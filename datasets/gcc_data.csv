Bug_ID,Assignee,Summary,Description,Status
20654,Aaron W. LaFramboise,exception.o is not included in libgcj.a due to case-insensitivity,"binutils ar was recently changed to exclude path when comparing object filenames, to agree with POSIX.  This combines with Windows' case-insensitive filesystem to cause java/lang/Exception.o to replace exception.o in the following command while creating libgcj.a.ar rc .libs/libgcj0_convenience.a prims.o jni.o exception.o ... java/lang/Exception.o ...This causes bootstrap to fail when linking jv-convert.make[4]: Entering directory `/aaronwl/cs/env/mingw-head/20050325/build/gcc/i686-pc-mingw32/libjava'/bin/sh ./libtool --tag=GCJ --mode=link /aaronwl/cs/env/mingw-head/20050325/build/gcc/./gcc/gcj -B/aaronwl/cs/env/mingw-head/20050325/build/gcc/./gcc/ -B/aaronwl/cs/env/mingw-head/20050325/i686-pc-mingw32/bin/ -B/aaronwl/cs/env/mingw-head/20050325/i686-pc-mingw32/lib/ -isystem /aaronwl/cs/env/mingw-head/20050325/i686-pc-mingw32/include -isystem /aaronwl/cs/env/mingw-head/20050325/i686-pc-mingw32/sys-include -L/aaronwl/cs/env/mingw-head/20050325/build/gcc/i686-pc-mingw32/libjava -ffloat-store -fno-omit-frame-pointer -g -O2  -o jv-convert.exe --main=gnu.gcj.convert.Convert -rpath /aaronwl/cs/env/mingw-head/20050325/lib -shared-libgcc   -L/aaronwl/cs/env/mingw-head/20050325/build/gcc/i686-pc-mingw32/libjava/.libs libgcj.la /aaronwl/cs/env/mingw-head/20050325/build/gcc/./gcc/gcj -B/aaronwl/cs/env/mingw-head/20050325/build/gcc/./gcc/ -B/aaronwl/cs/env/mingw-head/20050325/i686-pc-mingw32/bin/ -B/aaronwl/cs/env/mingw-head/20050325/i686-pc-mingw32/lib/ -isystem /aaronwl/cs/env/mingw-head/20050325/i686-pc-mingw32/include -isystem /aaronwl/cs/env/mingw-head/20050325/i686-pc-mingw32/sys-include -ffloat-store -fno-omit-frame-pointer -g -O2 -o jv-convert.exe --main=gnu.gcj.convert.Convert -shared-libgcc  -L/aaronwl/cs/env/mingw-head/20050325/build/gcc/i686-pc-mingw32/libjava -L/aaronwl/cs/env/mingw-head/20050325/build/gcc/i686-pc-mingw32/libjava/.libs ./.libs/libgcj.a -L/aaronwl/cs/env/mingw-head/20050325/build/gcc/i686-pc-mingw32/libstdc++-v3/src -L/aaronwl/cs/env/mingw-head/20050325/build/gcc/i686-pc-mingw32/libstdc++-v3/src/.libs -L/aaronwl/cs/env/mingw-head/20050325/build/gcc/./gcc -L/aaronwl/cs/env/mingw-head/20050325/i686-pc-mingw32/bin -L/aaronwl/cs/env/mingw-head/20050325/i686-pc-mingw32/lib -L/aaronwl/cs/env/mingw-head/20050325/lib/../i686-pc-mingw32/lib -L/aaronwl/cs/env/mingw-head/20050325/lib -L/mingw/lib -lmingw32 -lgcc -lmoldname -lmingwex -lmsvcrt -luser32 -lkernel32 -ladvapi32 -lshell32 -lmingw32 -lgcc -lmoldname -lmingwex -lmsvcrt -Wl,--rpath -Wl,/aaronwl/cs/env/mingw-head/20050325/lib./.libs/libgcj.a(prims.o): In function `Z17_Jv_ThrowNoMemoryv':/aaronwl/cs/compilers/gcc/src/cvs/head/gcc/libjava/prims.cc:369: undefined reference to `_Jv_Throw'./.libs/libgcj.a(prims.o): In function `Jv_Malloc':/aaronwl/cs/compilers/gcc/src/cvs/head/gcc/libjava/prims.cc:1276: undefined reference to `_Jv_Throw'...Since, depending on how you look at it, 'ar' is doing the right thing, I think the easiest way to fix this to rename exception.cc to exceptions.cc.",RESOLVED          FIXED      
18246,Aaron W. LaFramboise,struct-layout-1 generator broken on i686-pc-mingw32,"The gcc.dg-struct-layout-1 executable crashes while being run as part of the test generation.  This occurs regardless of optimization level.GDB emits a corrupt and useless backtrace, indicating that the crash is in wscanf()*.The crash appears to actually occur in fprintf() called by output_FNB()**.So far, I think that the crash is caused by some sort of corruption in msvcrt's stdio.  In addition, I think theres a good chance that the initial corruption comes from an fprintf() call in switchfiles()***.  However, I haven't been able to find any obvious cause for this at this time, and I'm not sure how to proceed on debugging this.The same crash occurs regardless of host compiler version.i686-pc-mingw32Windows XP SP2 ProfessionalPentium 4 1.4GHz 256MBbinutils 2.15.94 20041028mingwrt mainline 20041028msvcrt 7.0.2600.2180w32api mainline 20041028libiconv 1.9.1gmp 4.1.4mpfr 2.0.3GNU Make 3.80expect 5.26tcl 8.4dejagnu 1.4.2.xMisc tools and environment from Cygwin Current Fri Oct 22 01:50:41 2004ln with softlinks disabledhost gcc 3.4.1 (mingw special)host binutils 2.15.91 20040904 (mingw)host mingwrt 3.5host w32api 3.1Reading specs from c:/aaronwl/cs/env/mingw-head-head-head/bin/../lib/gcc/i686-pc-mingw32/4.0.0/specs                                                            Configured with: ../../src/cvs/head/gcc/configure --enable-languages=ada,c,c++,f95,java,objc --with-dwarf2 --enable-libmudflap --enable-libgcj --with-win32-nlsapi=unicows --enable-libstdcxx-allocator=mt --enable-libstdcxx-debug --enable-concept-checks --prefix=/aaronwl/cs/env/mingw-head-head-head-20041028 --with-included-gettext --with-libiconv-prefix=/aaronwl/cs/internat/iconv/install --with-gmp=/aaronwl/cs/env/mingw-head-head-head-20041028 --with-mpfr=/aaronwl/cs/env/mingw-head-head-head-20041028Thread model: win32gcc version 4.0.0 20041028 (experimental)* Backtrace:#0  0x77c42a16 in wscanf ()#1  0x0040e1b0 in aligned_bitfld_types ()#2  0x77c5fce0 in msvcrt!_iob ()#3  0x00000000 in ?? () from #4  0x00000061 in ?? ()#5  0x00242bb0 in ?? ()#6  0x00000238 in ?? ()#7  0x00000000 in ?? () from #8  0x00000007 in ?? ()#9  0x00000000 in ?? () from #10 0x00240178 in ?? ()#11 0x00000000 in ?? () from #12 0x00000000 in ?? () from #13 0x00000000 in ?? () from #14 0x00000000 in ?? () from #15 0x77c5fce0 in msvcrt!_iob ()#16 0x0040c30e in _data_end__ ()#17 0x00000000 in ?? () from #18 0x2f737265 in ?? ()...** Backtrace:#0  output_FNB (mode=70 'F', e=0x22fec0)    at /aaronwl/cs/compilers/gcc/src/cvs/head/gcc/gcc/testsuite/gcc.dg/compat/struct-layout-1_generate.c:812        l1 = 1189259747        l2 = 1422942914        m = 4294967295        signs = 0        p = 0x3d2ce0 "" È\227|ÿÿÿÿ""        q = 0x77c3a52e ""]ÃÌÌÌÌÌ\213ÿU\213ìV\213u\b\2154õÐúÅw\203>""#1  0x00402f22 in subvalues (e=0x22fec0, p=0x40d120 ""a"",     letter=0x22fe8b ""b\001"")    at /aaronwl/cs/compilers/gcc/src/cvs/head/gcc/gcc/testsuite/gcc.dg/compat/struct-layout-1_generate.c:956        i = 2009291924        j = 2009155104        q = 0x40d121 """"#2  0x00403593 in output (e=0x22feb0)    at /aaronwl/cs/compilers/gcc/src/cvs/head/gcc/gcc/testsuite/gcc.dg/compat/struct-layout-1_generate.c:1078        i = 1        c = 98 'b'        p = (void **) 0x498a10        skip_cint = 0x40c2ea """"---Type <return> to continue, or q <return> to quit---#3  0x00404431 in generate_random_tests (features=0, len=1)    at /aaronwl/cs/compilers/gcc/src/cvs/head/gcc/gcc/testsuite/gcc.dg/compat/struct-layout-1_generate.c:1443        e = 0x22feb0        i = 4221808        r = 168811253#4  0x0040471e in main (argc=5, argv=0x3d2d28)    at /aaronwl/cs/compilers/gcc/src/cvs/head/gcc/gcc/testsuite/gcc.dg/compat/struct-layout-1_generate.c:1528        startidx = 0        i = 0        j = 1        count = 200        c = -1        n = 3000*** Backtrace:#0  switchfiles (fields=1)    at /aaronwl/cs/compilers/gcc/src/cvs/head/gcc/gcc/testsuite/gcc.dg/compat/struct-layout-1_generate.c:551        filecnt = 1        destbuf = 0x3d4288 ""/aaronwl/cs/compilers/gcc/build/mingw-head/gcc/testsuite/gcc.dg-struct-layout-1/t001_main.c""        destptr = 0x3d42d8 ""t001_main.c""#1  0x004033c4 in output (e=0x22feb0)    at /aaronwl/cs/compilers/gcc/src/cvs/head/gcc/gcc/testsuite/gcc.dg/compat/struct-layout-1_generate.c:1054        i = 4718664        c = 0 '\0'        p = (void **) 0x49193c        skip_cint = 0x40c2ea """"#2  0x00404431 in generate_random_tests (features=0, len=1)    at /aaronwl/cs/compilers/gcc/src/cvs/head/gcc/gcc/testsuite/gcc.dg/compat/struct-layout-1_generate.c:1443        e = 0x22feb0        i = 4221808        r = 225536172#3  0x0040471e in main (argc=5, argv=0x3d2d28)    at /aaronwl/cs/compilers/gcc/src/cvs/head/gcc/gcc/testsuite/gcc.dg/compat/struct-layout-1_generate.c:1528---Type <return> to continue, or q <return> to quit---        startidx = 0        i = 0        j = 1        count = 200        c = -1        n = 3000",RESOLVED          FIXED      
18107,Aaron W. LaFramboise,[4.0 Regression] [meta-bug]  Bootstrap fails on i686-pc-mingw32,This is a meta-bug for all of the things causing a Windows bootstrap to fail. This should be closed when i686-pc-mingw32 successfully completes a full bootstrap.,RESOLVED          FIXED      
19074,Aaron W. LaFramboise,libgfortran bootstrap fails on Windows,"This patch <http://gcc.gnu.org/ml/gcc-patches/2004-12/msg00851.html> breaks bootstrap on i686-pc-mingw32 due to the name itoa in libgfortran conflicting with MinGW runtime headers.A patch is here <http://gcc.gnu.org/ml/gcc-patches/2004-12/msg01278.html>, awaiting approval.",RESOLVED          FIXED      
18103,Aaron W. LaFramboise,libgfortran system header conflict breaks bootstrap on MinGW,"mingw-runtime has a system header called <io.h> (low-level UNIXish I/Oroutines).  This conflicts with libgfortran/io/io.h when ""io.h"" isincluded, causing bootstrap to fail when libgfortran is built.",RESOLVED          FIXED      
18106,Aaron W. LaFramboise,Weak symbols are unimplemented on Windows,"On Windows targets, weak symbols have not supported in GCC, and have never beensupported.  However, they have been supported in binutils for years, withvarying degrees of quality.  They are probably now reliable enough to besupported by GCC.",RESOLVED          FIXED      
18105,Aaron W. LaFramboise,Compile errors in libgfortran/io/unix.c break Windows bootstrap,"MinGW doesn't have the macros S_IRGRP, S_IWGRP, S_IROTH, or S_IWOTH that areused in unix.c.It also does not have mkstemp().  There is a mkstemps() in libiberty, but itdoes not appear to be usable for this:<http://gcc.gnu.org/ml/gcc/2004-09/msg00949.html>.",RESOLVED          FIXED      
18104,Aaron W. LaFramboise,Incorrect CLASSPATH separator in libjava breaks bootstrap,"The libjava Makefiles are hardwired to use ':' as a CLASSPATH separator.  Gcj,however, picks the separator based on system-specific configuration, and socorrectly chooses ';' on MinGW.  This will cause bootstrap in libjava to failwhen the incorrect CLASSPATH separator as used, as it sees all components of theCLASSPATH as a single file, and so cannot find any files.",RESOLVED          FIXED      
17832,Aaron W. LaFramboise,[4.0 Regression] Bootstrap broken by fixincludes failures,"Due to recent reorganization, fixincludes is now built unconditionally. Previously, it was not built for machines that did not need it, includingWindows.  Since fixincludes does not (and has never) built on native Windows,this breaks bootstrap for these hosts.",RESOLVED          FIXED      
64411,Andrey Belevantsev,"ICE: in verify_target_availability, at sel-sched.c:1577 with -Os -mcmodel=medium -fPIC -fschedule-insns -fselective-scheduling","Created attachment 34337 [details]reduced testcaseCompiler output:$ gcc -Os -mcmodel=medium -fPIC -fschedule-insns -fselective-scheduling testcase.Ctestcase.C: In function 'void checkx813()':testcase.C:24:1: internal compiler error: in verify_target_availability, at sel-sched.c:1577 } ^0xdd8489 verify_target_availability        /mnt/svn/gcc-trunk/gcc/sel-sched.c:15770xdd8489 find_best_reg_for_expr        /mnt/svn/gcc-trunk/gcc/sel-sched.c:16920xdd8489 fill_vec_av_set        /mnt/svn/gcc-trunk/gcc/sel-sched.c:38050xddab77 fill_ready_list        /mnt/svn/gcc-trunk/gcc/sel-sched.c:40350xddab77 find_best_expr        /mnt/svn/gcc-trunk/gcc/sel-sched.c:43980xddab77 fill_insns        /mnt/svn/gcc-trunk/gcc/sel-sched.c:55650xddc815 schedule_on_fences        /mnt/svn/gcc-trunk/gcc/sel-sched.c:73900xddc815 sel_sched_region_2        /mnt/svn/gcc-trunk/gcc/sel-sched.c:75280xddf60d sel_sched_region_1        /mnt/svn/gcc-trunk/gcc/sel-sched.c:75700xddf60d sel_sched_region(int)        /mnt/svn/gcc-trunk/gcc/sel-sched.c:76710xde0851 run_selective_scheduling()        /mnt/svn/gcc-trunk/gcc/sel-sched.c:77470xdb650d rest_of_handle_sched        /mnt/svn/gcc-trunk/gcc/sched-rgn.c:36330xdb650d execute        /mnt/svn/gcc-trunk/gcc/sched-rgn.c:3743Please submit a full bug report,with preprocessed source if appropriate.Please include the complete backtrace with any bug report.See <http://gcc.gnu.org/bugs.html> for instructions.Tested revisions:r219067 - ICE4_9 r219040 - ICE4_8 r218176 - ICE4_7 r211571 - spill failure4_6 r197894 - spill failure",RESOLVED          FIXED      
69307,Andrey Belevantsev,[4.9 Regression] wrong code with -O2 -fselective-scheduling @ armv7a,"Output (qemu userspace emulation):$ armv7a-softfp-linux-gnueabi-gcc -v                                   Using built-in specs.COLLECT_GCC=/repo/gcc-trunk/binary-latest-armv7a-softfp/bin/armv7a-softfp-linux-gnueabi-gccCOLLECT_LTO_WRAPPER=/repo/gcc-trunk/binary-trunk-232232-checking-yes-rtl-df-nographite-armv7a-softfp/bin/../libexec/gcc/armv7a-softfp-linux-gnueabi/6.0.0/lto-wrapperTarget: armv7a-softfp-linux-gnueabiConfigured with: /repo/gcc-trunk//configure --enable-languages=c,c++ --enable-checking=yes,rtl,df --without-cloog --without-ppl --without-isl --with-float=softfp --build=x86_64-pc-linux-gnu --host=x86_64-pc-linux-gnu --target=armv7a-softfp-linux-gnueabi --with-ld=/usr/bin/armv7a-softfp-linux-gnueabi-ld --with-as=/usr/bin/armv7a-softfp-linux-gnueabi-as --with-sysroot=/usr/armv7a-softfp-linux-gnueabi --disable-libstdcxx-pch --prefix=/repo/gcc-trunk//binary-trunk-232232-checking-yes-rtl-df-nographite-armv7a-softfpThread model: posixgcc version 6.0.0 20160111 (experimental) (GCC) $ armv7a-softfp-linux-gnueabi-gcc -O2 testcase.c -fselective-scheduling$ ./a.out 1d01000000000000qemu: uncaught target signal 6 (Aborted) - core dumpedAbortedTested revisions:trunk r232232 - FAIL5-branch r231950 - OK4_9-branch r231949 - OK4_8-branch r224828 - OK4.9.3 - FAIL",RESOLVED          FIXED      
69032,Andrey Belevantsev,"[5 Regression] ICE: in cfg_preds_1, at sel-sched-ir.c:4809 with -fsched-pressure -fsel-sched-pipelining -fselective-scheduling","Created attachment 37117 [details]reduced testcaseCompiler output:$ powerpc-unknown-linux-gnu-gcc -O2 -fsched-pressure -fsel-sched-pipelining -fselective-scheduling testcase.c testcase.c: In function 'foo':testcase.c:8:1: internal compiler error: in cfg_preds_1, at sel-sched-ir.c:4753 } ^0xadf08f cfg_preds_1        /repo/gcc-trunk/gcc/sel-sched-ir.c:47530xadf15c cfg_preds        /repo/gcc-trunk/gcc/sel-sched-ir.c:47930xadf15c get_seqno_by_preds(rtx_insn*)        /repo/gcc-trunk/gcc/sel-sched-ir.c:40940xafb2f6 find_seqno_for_bookkeeping        /repo/gcc-trunk/gcc/sel-sched.c:47230xafb2f6 generate_bookkeeping_insn        /repo/gcc-trunk/gcc/sel-sched.c:47790xafb2f6 move_op_at_first_insn        /repo/gcc-trunk/gcc/sel-sched.c:60520xaf1268 code_motion_path_driver        /repo/gcc-trunk/gcc/sel-sched.c:66430xaf1793 code_motion_process_successors        /repo/gcc-trunk/gcc/sel-sched.c:63310xaf1793 code_motion_path_driver        /repo/gcc-trunk/gcc/sel-sched.c:65970xaf1793 code_motion_process_successors        /repo/gcc-trunk/gcc/sel-sched.c:63310xaf1793 code_motion_path_driver        /repo/gcc-trunk/gcc/sel-sched.c:65970xaf65c3 move_op        /repo/gcc-trunk/gcc/sel-sched.c:66880xaf65c3 move_exprs_to_boundary        /repo/gcc-trunk/gcc/sel-sched.c:52120xaf65c3 schedule_expr_on_boundary        /repo/gcc-trunk/gcc/sel-sched.c:54240xaf7e2e fill_insns        /repo/gcc-trunk/gcc/sel-sched.c:55660xaf9a0d schedule_on_fences        /repo/gcc-trunk/gcc/sel-sched.c:73420xaf9a0d sel_sched_region_2        /repo/gcc-trunk/gcc/sel-sched.c:74800xafc43b sel_sched_region_1        /repo/gcc-trunk/gcc/sel-sched.c:75220xafc43b sel_sched_region(int)        /repo/gcc-trunk/gcc/sel-sched.c:76230xafd9a9 run_selective_scheduling()        /repo/gcc-trunk/gcc/sel-sched.c:7699Please submit a full bug report,with preprocessed source if appropriate.Please include the complete backtrace with any bug report.See <http://gcc.gnu.org/bugs.html> for instructions.Other targets do not seem to have this issue.Tested revisions:r231903 - FAIL5-branch r231870 - FAIL4_9-branch r231865 - OK4_8-branch r224828 - OK",RESOLVED          FIXED      
54472,Andrey Belevantsev,ICE (spill_failure): unable to find a register to spill in class 'AREG' with -O -fschedule-insns -fselective-scheduling,"Created attachment 28125 [details]reduced testcaseCompiler output:$ gcc -O -fschedule-insns -fselective-scheduling testcase.ctestcase.c: In function 'main':testcase.c:6:1: error: unable to find a register to spill in class 'AREG' } ^testcase.c:6:1: error: this is the insn:(insn 9 25 22 2 (parallel [            (set (reg:DI 2 cx [63])                (const_int 0 [0]))            (set (reg/f:DI 5 di [61])                (plus:DI (ashift:DI (reg:DI 2 cx [63])                        (const_int 3 [0x3]))                    (reg/f:DI 1 dx [60])))            (set (mem/c:BLK (reg/f:DI 1 dx [60]) [0 MEM[(void *)&a]+0 S104 A64])                (const_int 0 [0]))            (use (reg:DI 4 si [62]))            (use (reg:DI 2 cx [63]))        ]) testcase.c:4 890 {*rep_stosdi_rex64}     (expr_list:REG_DEAD (reg:DI 4 si [62])        (expr_list:REG_DEAD (reg/f:DI 1 dx [60])            (expr_list:REG_UNUSED (reg:DI 2 cx [63])                (expr_list:REG_UNUSED (reg/f:DI 5 di [61])                    (nil))))))testcase.c:6:1: internal compiler error: in spill_failure, at reload1.c:2127Please submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.(gdb) bt#0  0x0000000001130b50 in fancy_abort(char const*, int, char const*) ()#1  0x000000000096d5fb in _fatal_insn(char const*, rtx_def const*, char const*, int, char const*) ()#2  0x000000000096c6d0 in reload(rtx_def*, int) () at /mnt/svn/gcc-trunk/gcc/reload1.c:2127#3  0x000000000087eba2 in rest_of_handle_reload() () at /mnt/svn/gcc-trunk/gcc/ira.c:4328#4  0x000000000090092f in execute_one_pass(opt_pass*) () at /mnt/svn/gcc-trunk/gcc/passes.c:2157#5  0x0000000000900ce5 in execute_pass_list(opt_pass*) () at /mnt/svn/gcc-trunk/gcc/passes.c:2212#6  0x0000000000900cf7 in execute_pass_list(opt_pass*) () at /mnt/svn/gcc-trunk/gcc/passes.c:2213#7  0x00000000006bdd88 in expand_function(cgraph_node*) () at /mnt/svn/gcc-trunk/gcc/cgraphunit.c:1609#8  0x00000000006bfc2a in compile() () at /mnt/svn/gcc-trunk/gcc/cgraphunit.c:1714#9  0x00000000006c0225 in finalize_compilation_unit() () at /mnt/svn/gcc-trunk/gcc/cgraphunit.c:2089#10 0x00000000005a1dc0 in c_write_global_declarations() () at /mnt/svn/gcc-trunk/gcc/c/c-decl.c:10116#11 0x00000000009e8475 in compile_file() () at /mnt/svn/gcc-trunk/gcc/toplev.c:560#12 0x00000000009ea03a in toplev_main(int, char**) () at /mnt/svn/gcc-trunk/gcc/toplev.c:1863#13 0x00007ffff6e784bd in __libc_start_main () from /lib64/libc.so.6#14 0x0000000000584d01 in _start ()Tested revisions:r190830 - crash4.7 r188682 - crash4.6 r188682 - crash4.5 r188682 - crash4.4 r188682 - crash",RESOLVED          FIXED      
52203,Andrey Belevantsev,"ICE: in reset_sched_cycles_in_current_ebb, at sel-sched.c:7136 with -fsel-sched-pipelining -fselective-scheduling2 and other custom flags","Created attachment 26639 [details]reduced testcaseAfter a long time, there comes one sel-sched ICE.Compiler output:$ gcc -O -fPIC -fno-dce -fgcse -fschedule-insns2 -fsel-sched-pipelining -fselective-scheduling2 -ftree-vectorize -funroll-loops -fno-web -mno-avx256-split-unaligned-store -mfma --param=max-pending-list-length=0 --param=selsched-insns-to-rename=70 testcase.c testcase.c: In function 'foo':testcase.c:9:1: internal compiler error: in reset_sched_cycles_in_current_ebb, at sel-sched.c:7136Please submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.(gdb) bt#0  fancy_abort (file=0x129c408 ""/mnt/svn/gcc-trunk/gcc/sel-sched.c"", line=7136, function=0x129dce0 ""reset_sched_cycles_in_current_ebb"")    at /mnt/svn/gcc-trunk/gcc/diagnostic.c:898#1  0x00000000009a919d in reset_sched_cycles_in_current_ebb () at /mnt/svn/gcc-trunk/gcc/sel-sched.c:7136#2  0x00000000009bea53 in sel_region_target_finish (reset_sched_cycles_p=true) at /mnt/svn/gcc-trunk/gcc/sel-sched.c:7209#3  sel_region_finish (reset_sched_cycles_p=<optimized out>) at /mnt/svn/gcc-trunk/gcc/sel-sched.c:7266#4  sel_sched_region (rgn=<optimized out>) at /mnt/svn/gcc-trunk/gcc/sel-sched.c:7622#5  0x00000000009bf23a in run_selective_scheduling () at /mnt/svn/gcc-trunk/gcc/sel-sched.c:7693#6  0x000000000098c076 in rest_of_handle_sched2 () at /mnt/svn/gcc-trunk/gcc/sched-rgn.c:3515#7  0x00000000008fbd85 in execute_one_pass (pass=0x17ca8e0) at /mnt/svn/gcc-trunk/gcc/passes.c:2081#8  0x00000000008fc145 in execute_pass_list (pass=0x17ca8e0) at /mnt/svn/gcc-trunk/gcc/passes.c:2136#9  0x00000000008fc157 in execute_pass_list (pass=0x17c9ee0) at /mnt/svn/gcc-trunk/gcc/passes.c:2137#10 0x00000000008fc157 in execute_pass_list (pass=0x17c9f40) at /mnt/svn/gcc-trunk/gcc/passes.c:2137#11 0x0000000000a5e3ee in tree_rest_of_compilation (fndecl=0x7ffff5bd2700) at /mnt/svn/gcc-trunk/gcc/tree-optimize.c:422#12 0x00000000006b006a in cgraph_expand_function (node=0x7ffff5a976c0) at /mnt/svn/gcc-trunk/gcc/cgraphunit.c:1829#13 0x00000000006b1f5c in cgraph_expand_all_functions () at /mnt/svn/gcc-trunk/gcc/cgraphunit.c:1896#14 cgraph_optimize () at /mnt/svn/gcc-trunk/gcc/cgraphunit.c:2210#15 0x00000000006b25aa in cgraph_finalize_compilation_unit () at /mnt/svn/gcc-trunk/gcc/cgraphunit.c:1338#16 0x000000000058ecb0 in c_write_global_declarations () at /mnt/svn/gcc-trunk/gcc/c-decl.c:10030#17 0x00000000009f0b9c in compile_file () at /mnt/svn/gcc-trunk/gcc/toplev.c:573#18 do_compile () at /mnt/svn/gcc-trunk/gcc/toplev.c:1938#19 toplev_main (argc=28, argv=0x7fffffffd658) at /mnt/svn/gcc-trunk/gcc/toplev.c:2014#20 0x00007ffff61cc09d in __libc_start_main () from /lib64/libc.so.6#21 0x00000000005723b1 in _start ()Tested revisions:r184068 - crash4.6 r180325 - OK",RESOLVED          FIXED      
56077,Andrey Belevantsev,[4.7 Regression] volatile ignored when function inlined,"The following code snipit produces incorrect code with -fno-schedule-insns2.  The volatile assignments are incorrectly condensed, but only when the function is inlined.I observed similar behavior with the RX port of gcc (KPIT 12.02).brad---------------------------DRACK-1$ cat x.cstatic inline voidfoo(volatile int *p){    asm(""#BEGIN"");    *p = 86;    *p = 87;    *p = 88;    asm(""#END"");}voidbar(void){    volatile int *p = (volatile int *)1234567;    foo(p);}DRACK-1$ gcc -Wall -Wextra -fno-schedule-insns2 -O -c -save-temps /tmp/x.c && sed -n '/BEGIN/,/END/p' /tmp/x.s         #BEGIN# 0 """" 2#NO_APP        movl    $86, 1234567        movl    $87, 1234567        movl    $88, 1234567#APP# 10 ""/tmp/x.c"" 1        #ENDDRACK-1$ gcc -Wall -Wextra -fschedule-insns2 -O -c -save-temps /tmp/x.c && sed -n '/BEGIN/,/END/p' /tmp/x.s         #BEGIN# 0 """" 2#NO_APP        movl    $88, 1234567#APP# 10 ""/tmp/x.c"" 1        #ENDDRACK-1$ gcc -vUsing built-in specs.COLLECT_GCC=gccCOLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-linux-gnu/4.7/lto-wrapperTarget: x86_64-linux-gnuConfigured with: ../src/configure -v --with-pkgversion='Ubuntu/Linaro 4.7.2-2ubuntu1' --with-bugurl=file:///usr/share/doc/gcc-4.7/README.Bugs --enable-languages=c,c++,go,fortran,objc,obj-c++ --prefix=/usr --program-suffix=-4.7 --enable-shared --enable-linker-build-id --with-system-zlib --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.7 --libdir=/usr/lib --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --enable-gnu-unique-object --enable-plugin --enable-objc-gc --disable-werror --with-arch-32=i686 --with-tune=generic --enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnuThread model: posixgcc version 4.7.2 (Ubuntu/Linaro 4.7.2-2ubuntu1) DRACK-1$ cat /tmp/x.i# 1 ""/tmp/x.c""# 1 ""<command-line>""# 1 ""/tmp/x.c""static inline voidfoo(volatile int *p){    asm(""#BEGIN"");    *p = 86;    *p = 87;    *p = 88;    asm(""#END"");}voidbar(void){    volatile int *p = (volatile int *)1234567;    foo(p);}DRACK-1$",RESOLVED          FIXED      
60866,Andrey Belevantsev,"[4.7/4.8/4.9 Regression] ICE: in get_seqno_for_a_jump, at sel-sched-ir.c:4068 with -fselective-scheduling -fno-if-conversion","Created attachment 32620 [details]reduced testcaseCompiler output:$ gcc -O -fselective-scheduling -fno-if-conversion -fschedule-insns testcase.ctestcase.c: In function 'foo':testcase.c:15:1: internal compiler error: in get_seqno_for_a_jump, at sel-sched-ir.c:4068 } ^0xaf3c6f get_seqno_for_a_jump        /mnt/svn/gcc-trunk/gcc/sel-sched-ir.c:40680xaf3c6f init_simplejump_data        /mnt/svn/gcc-trunk/gcc/sel-sched-ir.c:42570xaf3c6f sel_init_new_insn        /mnt/svn/gcc-trunk/gcc/sel-sched-ir.c:42910xaf4983 sel_redirect_edge_and_branch(edge_def*, basic_block_def*)        /mnt/svn/gcc-trunk/gcc/sel-sched-ir.c:56540xaf58e8 maybe_tidy_empty_bb        /mnt/svn/gcc-trunk/gcc/sel-sched-ir.c:37820xaf5ce7 tidy_control_flow(basic_block_def*, bool)        /mnt/svn/gcc-trunk/gcc/sel-sched-ir.c:38190xaf64fc sel_remove_insn(rtx_def*, bool, bool)        /mnt/svn/gcc-trunk/gcc/sel-sched-ir.c:39540xaf6796 return_nop_to_pool(rtx_def*, bool)        /mnt/svn/gcc-trunk/gcc/sel-sched-ir.c:10660xb09706 remove_temp_moveop_nops        /mnt/svn/gcc-trunk/gcc/sel-sched.c:50670xb09706 schedule_expr_on_boundary        /mnt/svn/gcc-trunk/gcc/sel-sched.c:55420xb0b365 fill_insns        /mnt/svn/gcc-trunk/gcc/sel-sched.c:56590xb0b365 schedule_on_fences        /mnt/svn/gcc-trunk/gcc/sel-sched.c:74410xb0b365 sel_sched_region_2        /mnt/svn/gcc-trunk/gcc/sel-sched.c:75790xb0f164 sel_sched_region_1        /mnt/svn/gcc-trunk/gcc/sel-sched.c:76210xb0f164 sel_sched_region(int)        /mnt/svn/gcc-trunk/gcc/sel-sched.c:77220xb10999 run_selective_scheduling()        /mnt/svn/gcc-trunk/gcc/sel-sched.c:77980xae09cd rest_of_handle_sched        /mnt/svn/gcc-trunk/gcc/sched-rgn.c:36380xae09cd execute        /mnt/svn/gcc-trunk/gcc/sched-rgn.c:3743Please submit a full bug report,with preprocessed source if appropriate.Please include the complete backtrace with any bug report.See <http://gcc.gnu.org/bugs.html> for instructions.$ gcc -v                                                                      Using built-in specs.COLLECT_GCC=/mnt/svn/gcc-trunk/binary-latest/bin/gccCOLLECT_LTO_WRAPPER=/mnt/svn/gcc-trunk/binary-209399-lto-fortran-checking-yes-rtl-df/libexec/gcc/x86_64-unknown-linux-gnu/4.10.0/lto-wrapperTarget: x86_64-unknown-linux-gnuConfigured with: /mnt/svn/gcc-trunk//configure --enable-checking=yes,rtl,df --enable-languages=c,c++,lto,fortran --prefix=/mnt/svn/gcc-trunk/binary-209399-lto-fortran-checking-yes-rtl-df/ --without-cloog --without-pplThread model: posixgcc version 4.10.0 20140415 (experimental) (GCC) Tested revisions:r209399 - ICE4.9 r209346 - ICE4.8 r209342 - ICE4.7 r209345 - ICE4.6 r197894 - OK",RESOLVED          FIXED      
60901,Andrey Belevantsev,[4.8/4.9 Regression] ICE: SIGSEGV in add_to_deps_list with -fsel-sched-pipelining-outer-loops,"Created attachment 32635 [details]reduced testcaseCompiler output (under valgrind):$ gcc -O -fselective-scheduling -fschedule-insns -fsel-sched-pipelining -fsel-sched-pipelining-outer-loops -fno-tree-dominator-opts testcase.c==23085== Invalid read of size 8==23085==    at 0x1394529: add_to_deps_list(_dep_link*, _deps_list*) (sched-deps.c:247)==23085==    by 0x13A1493: sd_add_dep(_dep*, bool) (sched-deps.c:1344)==23085==    by 0x13A1B85: add_or_update_dep_1(_dep*, bool, rtx_def*, rtx_def*) (sched-deps.c:1286)==23085==    by 0x13A212C: haifa_note_dep(rtx_def*, unsigned int) (sched-deps.c:1866)==23085==    by 0x1394CB2: add_dependence_1(rtx_def*, rtx_def*, reg_note) (sched-deps.c:1901)==23085==    by 0x13992C3: add_dependence(rtx_def*, rtx_def*, reg_note) (sched-deps.c:1557)==23085==    by 0xDE227A: ix86_dependencies_evaluation_hook(rtx_def*, rtx_def*) (i386.c:26191)==23085==    by 0xADC311: sched_rgn_compute_dependencies(int) (sched-rgn.c:2746)==23085==    by 0xB0D4E3: sel_sched_region(int) (sel-sched.c:6933)==23085==    by 0xB0F329: run_selective_scheduling() (sel-sched.c:7798)==23085==    by 0xADF44D: (anonymous namespace)::pass_sched::execute(function*) (sched-rgn.c:3618)==23085==    by 0xA484E0: execute_one_pass(opt_pass*) (passes.c:2159)==23085==    by 0xA48785: execute_pass_list(opt_pass*) (passes.c:2212)==23085==    by 0xA48797: execute_pass_list(opt_pass*) (passes.c:2213)==23085==    by 0x785208: expand_function(cgraph_node*) (cgraphunit.c:1774)==23085==    by 0x7871EB: compile() (cgraphunit.c:1908)==23085==    by 0x787954: finalize_compilation_unit() (cgraphunit.c:2329)==23085==    by 0x63ADA3: c_write_global_declarations() (c-decl.c:10401)==23085==    by 0xB3BF2C: compile_file() (toplev.c:562)==23085==    by 0xB3DEFF: toplev_main(int, char**) (toplev.c:1914)==23085==    by 0x5A46BF4: (below main) (in /lib64/libc-2.17.so)==23085==  Address 0x0 is not stack'd, malloc'd or (recently) free'd==23085== Tested revisions:r209530 - ICE4.9 r209346 - ICE4.8 r209342 - ICE4.7 r209345 - OK",RESOLVED          FIXED      
60292,Andrey Belevantsev,"[4.9 Regression] ICE: in fill_vec_av_set, at sel-sched.c:3863 with -m64 after r206174 on powerpc-apple-darwin9.8.0","Compiling the test gfortran.dg/pr44691.f with -m64 -O2 -fselective-scheduling2 gives the following ICE/opt/gcc/work/gcc/testsuite/gfortran.dg/pr44691.f:39:0: internal compiler error: in fill_vec_av_set, at sel-sched.c:3863       ENDLine 3863 of sel-sched.c is the gcc_assert          /* A fence insn should not get here.  */          gcc_assert (!fence_insn_p);introduced by r206174.",RESOLVED          FIXED      
60268,Andrey Belevantsev,"[4.9 regression] ICE: in rank_for_schedule, at haifa-sched.c:2557","r207791 PASSr207850 FAIL$ cat x.ivoid f(){  int i = 0;  void *p = 0;}$ /usr/local/gcc_current/bin/gcc -fpreprocessed -O0 -flive-range-shrinkage -c x.ix.i: In function 'f':x.i:5:1: internal compiler error: in rank_for_schedule, at haifa-sched.c:2557 } ^0x13c6f41 rank_for_schedule	/home/dimhen/src/gcc_current/gcc/haifa-sched.c:25570x13c7895 swap_sort	/home/dimhen/src/gcc_current/gcc/haifa-sched.c:27140x13c7895 ready_sort(ready_list*)	/home/dimhen/src/gcc_current/gcc/haifa-sched.c:29260x13d0727 schedule_block(basic_block_def**, void*)	/home/dimhen/src/gcc_current/gcc/haifa-sched.c:60960xa1421a schedule_region	/home/dimhen/src/gcc_current/gcc/sched-rgn.c:30800xa1421a schedule_insns	/home/dimhen/src/gcc_current/gcc/sched-rgn.c:34160xa1461b schedule_insns	/home/dimhen/src/gcc_current/gcc/sched-rgn.c:34010xa1461b rest_of_handle_live_range_shrinkage	/home/dimhen/src/gcc_current/gcc/sched-rgn.c:36140xa1461b execute	/home/dimhen/src/gcc_current/gcc/sched-rgn.c:3704Please submit a full bug report,with preprocessed source if appropriate.Please include the complete backtrace with any bug report.See <http://gcc.gnu.org/bugs.html> for instructions.Fedora 20/x64$ /usr/local/gcc_current/bin/gcc -vUsing built-in specs.COLLECT_GCC=/usr/local/gcc_current/bin/gccCOLLECT_LTO_WRAPPER=/usr/local/gcc_current/libexec/gcc/x86_64-unknown-linux-gnu/4.9.0/lto-wrapperTarget: x86_64-unknown-linux-gnuConfigured with: /home/dimhen/src/gcc_current/configure --prefix=/usr/local/gcc_current --enable-checking=yes,df,fold,rtl,tree --enable-languages=c,c++,lto --enable-plugin --with-tune=native --with-arch=native --enable-version-specific-runtime-libs --enable-static --disable-multilibThread model: posixgcc version 4.9.0 20140218 (experimental) [trunk revision 207850] (GCC)",RESOLVED          FIXED      
58960,Andrey Belevantsev,[4.9 regression] ICE in bmp_iter_set_init,"gcc/xg++ -Bgcc/ ../gcc/testsuite/g++.dg/opt/pr48272.C -nostdinc++ -I ia64-suse-linux/libstdc++-v3/include/ia64-suse-linux -Iia64-suse-linux/libstdc++-v3/include -I../libstdc++-v3/libsupc++ -I../libstdc++-v3/include/backward -I../libstdc++-v3/testsuite/util -std=gnu++11 -O3 -ftracer -fsched-pressure -S../gcc/testsuite/g++.dg/opt/pr48272.C: In constructor ‘std::iostreams::zlib_error::zlib_error(int)’:../gcc/testsuite/g++.dg/opt/pr48272.C:128:5: internal compiler error: Segmentation fault     }     ^0x4000000000be814f crash_signal        ../../gcc/toplev.c:3340x40000000012a428f bmp_iter_set_init        ../../gcc/bitmap.h:3600x40000000012a428f initiate_reg_pressure_info        ../../gcc/haifa-sched.c:9820x40000000012a600f initiate_bb_reg_pressure_info        ../../gcc/haifa-sched.c:10300x40000000012a600f sched_setup_bb_reg_pressure_info(basic_block_def*, rtx_def*)        ../../gcc/haifa-sched.c:30340x4000000000b46c3f schedule_region        ../../gcc/sched-rgn.c:30150x4000000000b46fff schedule_insns()        ../../gcc/sched-rgn.c:33900x4000000000b4718f rest_of_handle_sched        ../../gcc/sched-rgn.c:35830x4000000000b4718f execute        ../../gcc/sched-rgn.c:3647Program received signal SIGSEGV, Segmentation fault.bmp_iter_set_init (bit_no=<optimized out>, start_bit=0, map=<optimized out>,     bi=<optimized out>) at ../../gcc/bitmap.h:341341       bi->elt1 = map->first;(gdb) bt#0  bmp_iter_set_init (bit_no=<optimized out>, start_bit=0,     map=<optimized out>, bi=<optimized out>) at ../../gcc/bitmap.h:341#1  initiate_reg_pressure_info (live=0x40) at ../../gcc/haifa-sched.c:982#2  0x40000000012a6010 in initiate_bb_reg_pressure_info (bb=<optimized out>)    at ../../gcc/haifa-sched.c:1030#3  sched_setup_bb_reg_pressure_info (bb=0x2000000000a42de8,     after=0x20000000009ee6c0) at ../../gcc/haifa-sched.c:3034#4  0x4000000000b46c40 in schedule_region (rgn=3) at ../../gcc/sched-rgn.c:3015#5  0x4000000000b47000 in schedule_insns () at ../../gcc/sched-rgn.c:3390#6  0x4000000000b47190 in rest_of_handle_sched () at ../../gcc/sched-rgn.c:3583#7  (anonymous namespace)::pass_sched::execute (    this=0x4000000000a60600 <execute_one_pass(opt_pass*)+2384>)    at ../../gcc/sched-rgn.c:3647#8  0x4000000000a60600 in execute_one_pass (pass=0x600000000029bbc0)    at ../../gcc/passes.c:2215#9  0x4000000000a60dc0 in execute_pass_list (pass=0x600000000029bbc0)    at ../../gcc/passes.c:2267#10 0x4000000000a60e10 in execute_pass_list (pass=0x600000000029ac00)    at ../../gcc/passes.c:2268#11 0x40000000005a4f20 in expand_function (node=0x2000000000a80980)    at ../../gcc/cgraphunit.c:1753#12 0x40000000005a94a0 in expand_all_functions ()    at ../../gcc/cgraphunit.c:1858#13 0x40000000005aa180 in compile () at ../../gcc/cgraphunit.c:2195#14 0x40000000005aa500 in finalize_compilation_unit ()    at ../../gcc/cgraphunit.c:2272#15 0x400000000022cf30 in cp_write_global_declarations ()    at ../../gcc/cp/decl2.c:4401#16 0x4000000000be9500 in compile_file () at ../../gcc/toplev.c:559#17 0x4000000000bee3c0 in do_compile () at ../../gcc/toplev.c:1894#18 toplev_main (argc=16279, argv=0x600ffffffffeefe8)    at ../../gcc/toplev.c:1970#19 0x40000000013ee4b0 in main (argc=34, argv=0x600ffffffffeefe8)    at ../../gcc/main.c:36Reverting r204194 avoids the crash.  Looks similar to bug48272.",RESOLVED          FIXED      
57662,Andrey Belevantsev,[4.9 Regression] ICE: SIGSEGV in code_motion_process_successors with -fschedule-insns2 -fselective-scheduling2,"Created attachment 30327 [details]reduced testcaseCompiler output:$ gcc -O -fno-guess-branch-probability -fpeel-loops -freorder-blocks-and-partition -fschedule-insns2 -fsel-sched-pipelining -fselective-scheduling2 -ftree-pre testcase.ctestcase.c: In function 'GetHangarNum':testcase.c:44:1: internal compiler error: Segmentation fault } ^0xa4ce7f crash_signal        /mnt/svn/gcc-trunk/gcc/toplev.c:3330xa100f9 code_motion_process_successors        /mnt/svn/gcc-trunk/gcc/sel-sched.c:64290xa100f9 code_motion_path_driver        /mnt/svn/gcc-trunk/gcc/sel-sched.c:66690xa13f87 move_op        /mnt/svn/gcc-trunk/gcc/sel-sched.c:67580xa13f87 move_exprs_to_boundary        /mnt/svn/gcc-trunk/gcc/sel-sched.c:52920xa13f87 schedule_expr_on_boundary        /mnt/svn/gcc-trunk/gcc/sel-sched.c:55040xa15e77 fill_insns        /mnt/svn/gcc-trunk/gcc/sel-sched.c:56460xa15e77 schedule_on_fences        /mnt/svn/gcc-trunk/gcc/sel-sched.c:74100xa15e77 sel_sched_region_2        /mnt/svn/gcc-trunk/gcc/sel-sched.c:75440xa19c44 sel_sched_region_1        /mnt/svn/gcc-trunk/gcc/sel-sched.c:75830xa19c44 sel_sched_region(int)        /mnt/svn/gcc-trunk/gcc/sel-sched.c:76840xa1b3b9 run_selective_scheduling()        /mnt/svn/gcc-trunk/gcc/sel-sched.c:77600x9ec8b5 rest_of_handle_sched2        /mnt/svn/gcc-trunk/gcc/sched-rgn.c:3606Please submit a full bug report,with preprocessed source if appropriate.Please include the complete backtrace with any bug report.See <http://gcc.gnu.org/bugs.html> for instructions.$ gcc -vUsing built-in specs.COLLECT_GCC=/mnt/svn/gcc-trunk/binary-latest/bin/gccCOLLECT_LTO_WRAPPER=/mnt/svn/gcc-trunk/binary-200224-lto-fortran-checking-yes-rtl-df/libexec/gcc/x86_64-unknown-linux-gnu/4.9.0/lto-wrapperTarget: x86_64-unknown-linux-gnuConfigured with: /mnt/svn/gcc-trunk//configure --enable-checking=yes,rtl,df --enable-languages=c,c++,lto,fortran --prefix=/mnt/svn/gcc-trunk/binary-200224-lto-fortran-checking-yes-rtl-df/ --without-cloog --without-pplThread model: posixgcc version 4.9.0 20130619 (experimental) (GCC) Tested revisions:r200224 - crash4.8 r198018 - OK",RESOLVED          FIXED      
57422,Andrey Belevantsev,[4.9 Regression] ICE: SIGSEGV in dominated_by_p with custom flags,"Created attachment 30196 [details]reduced testcaseCompiler output:$ gcc -O2 -fPIC -fno-omit-frame-pointer -fpeel-loops -fsched-pressure -fschedule-insns -fselective-scheduling2 --param=max-cse-insns=1 testcase.c testcase.c: In function 'test6':testcase.c:20:1: internal compiler error: Segmentation fault } ^0xa3896f crash_signal        /mnt/svn/gcc-trunk/gcc/toplev.c:3330x704fe6 dominated_by_p(cdi_direction, basic_block_def const*, basic_block_def const*)        /mnt/svn/gcc-trunk/gcc/dominance.c:9740xa01092 remove_insns_that_need_bookkeeping        /mnt/svn/gcc-trunk/gcc/sel-sched.c:49060xa01092 fill_insns        /mnt/svn/gcc-trunk/gcc/sel-sched.c:55920xa01092 schedule_on_fences        /mnt/svn/gcc-trunk/gcc/sel-sched.c:74100xa01092 sel_sched_region_2        /mnt/svn/gcc-trunk/gcc/sel-sched.c:75440xa05725 sel_sched_region_1        /mnt/svn/gcc-trunk/gcc/sel-sched.c:75830xa05725 sel_sched_region(int)        /mnt/svn/gcc-trunk/gcc/sel-sched.c:76840xa06ee9 run_selective_scheduling()        /mnt/svn/gcc-trunk/gcc/sel-sched.c:77600x9d82e5 rest_of_handle_sched2        /mnt/svn/gcc-trunk/gcc/sched-rgn.c:3606Please submit a full bug report,with preprocessed source if appropriate.Please include the complete backtrace with any bug report.See <http://gcc.gnu.org/bugs.html> for instructions.$ gcc -vUsing built-in specs.COLLECT_GCC=/mnt/svn/gcc-trunk/binary-latest/bin/gccCOLLECT_LTO_WRAPPER=/mnt/svn/gcc-trunk/binary-199337-lto-fortran-checking-yes-rtl-df/libexec/gcc/x86_64-unknown-linux-gnu/4.9.0/lto-wrapperTarget: x86_64-unknown-linux-gnuConfigured with: /mnt/svn/gcc-trunk//configure --enable-checking=yes,rtl,df --enable-languages=c,c++,lto,fortran --prefix=/mnt/svn/gcc-trunk/binary-199337-lto-fortran-checking-yes-rtl-df/ --without-cloog --without-pplThread model: posixgcc version 4.9.0 20130526 (experimental) (GCC) Tested revisions:r199337 - crash4.8 r198018 - OK",RESOLVED          FIXED      
56957,Andrey Belevantsev,"[4.9 regression] ICE in add_insn_after, at emit-rtl.c:3783","spawn /usr/local/gcc/gcc-20130414/Build/gcc/xgcc -B/usr/local/gcc/gcc-20130414/Build/gcc/ -fno-diagnostics-show-caret -O3 -fomit-frame-pointer -funroll-loops -w -c -o 20070603-2.o /usr/local/gcc/gcc-20130414/gcc/testsuite/gcc.c-torture/compile/20070603-2.c/usr/local/gcc/gcc-20130414/gcc/testsuite/gcc.c-torture/compile/20070603-2.c: In function 'f':/usr/local/gcc/gcc-20130414/gcc/testsuite/gcc.c-torture/compile/20070603-2.c:9:1: internal compiler error: in add_insn_after, at emit-rtl.c:37830x400000000046b74f add_insn_after(rtx_def*, rtx_def*, basic_block_def*)        ../../gcc/emit-rtl.c:37830x40000000008c536f sel_gen_insn_from_expr_after(_expr*, vinsn_def*, int, rtx_def*)        ../../gcc/sel-sched-ir.c:14010x40000000008d3b6f emit_insn_from_expr_after        ../../gcc/sel-sched.c:45200x40000000008e5a3f schedule_expr_on_boundary        ../../gcc/sel-sched.c:55230x40000000008e9d9f fill_insns        ../../gcc/sel-sched.c:56460x40000000008e9d9f schedule_on_fences        ../../gcc/sel-sched.c:74110x40000000008e9d9f sel_sched_region_2        ../../gcc/sel-sched.c:75450x40000000008f19ef sel_sched_region_1        ../../gcc/sel-sched.c:76580x40000000008f19ef sel_sched_region(int)        ../../gcc/sel-sched.c:76850x40000000008f34af run_selective_scheduling()        ../../gcc/sel-sched.c:77610x4000000000dadaaf ia64_reorg        ../../gcc/config/ia64/ia64.c:97280x4000000000878f0f rest_of_handle_machine_reorg        ../../gcc/reorg.c:3904Caused by r197942.",RESOLVED          FIXED      
46522,Andrey Belevantsev,"ICE: in reset_sched_cycles_in_current_ebb, at sel-sched.c:7092 with -O3 -fsel-sched-pipelining -fselective-scheduling2 -funroll-loops","Created attachment 22432 [details]reduced testcase (originally PR45352 comment #19)I am sorry for the amount of compiler flags, removing any of them causes the ICE to disappear. Even manual partial inlining, unrolling, loop unswitching, ... either removes the ICE or doesn't allow me to remove further flags.Flags are either:-O3 -fkeep-inline-functions -fsel-sched-pipelining -fselective-scheduling2 -funroll-loopsor-O2 -fkeep-inline-functions -fsel-sched-pipelining -fselective-scheduling2 -funroll-loops -funswitch-loopsor-O1 -fcse-follow-jumps -fkeep-inline-functions -fpartial-inlining -freorder-blocks -frerun-cse-after-loop -fschedule-insns2 -fsel-sched-pipelining -fselective-scheduling2 -funroll-loops -funswitch-loopsCompiler output:$ gcc -O3 -fkeep-inline-functions -fsel-sched-pipelining -fselective-scheduling2 -funroll-loops pr46522.cpr46522.c: In function 'foo2':pr46522.c:30:1: internal compiler error: in reset_sched_cycles_in_current_ebb, at sel-sched.c:7092Please submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.Tested revisions (for the -O1 case):r166795 - crashr165699 - OK4.5 - doesn't know -fpartial-inlining",RESOLVED          FIXED      
45352,Andrey Belevantsev,"ICE: in reset_sched_cycles_in_current_ebb, at sel-sched.c:7058","Command line:$ gcc -O1 -frerun-cse-after-loop -ftree-vectorize -fschedule-insns -fschedule-insns2 -fselective-scheduling2 -fsel-sched-pipelining -funroll-loops -fprefetch-loop-arrays testcase.cor$ gcc -O3 -fschedule-insns -fschedule-insns2 -fselective-scheduling2 -fsel-sched-pipelining -funroll-loops -fprefetch-loop-arrays testcase.cI came to this problem in several testcases, but the set of options could never be reduced more.Compiler output:$ gcc -O1 -frerun-cse-after-loop -ftree-vectorize -fschedule-insns -fschedule-insns2 -fselective-scheduling2 -fsel-sched-pipelining -funroll-loops -fprefetch-loop-arrays testcase.ctestcase.c: In function 'main1':testcase.c:10:1: internal compiler error: in reset_sched_cycles_in_current_ebb, at sel-sched.c:7058Please submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.Tested revisions:r163371 - crash",RESOLVED          FIXED      
48143,Andrey Belevantsev,"[4.6 Regression] ICE: in reset_sched_cycles_in_current_ebb, at sel-sched.c:7114 with custom flags","Created attachment 23675 [details]reduced testcaseCompiler output:$ gcc -ftree-vectorize -O2 -fno-dce -fno-ivopts -fsel-sched-pipelining -fselective-scheduling2 -funroll-loops --param=max-cse-insns=50 --param=max-pending-list-length=50 testcase.ctestcase.c: In function ‘foo’:testcase.c:13:1: internal compiler error: in reset_sched_cycles_in_current_ebb, at sel-sched.c:7114Please submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.Tested revisions:r171001 - crash4.6 r170955 - crash4.5 r170955 - OK",RESOLVED          FIXED      
46642,Andrey Belevantsev,"ICE: in reset_sched_cycles_in_current_ebb, at sel-sched.c:7095 with -fsel-sched-pipelining -fselective-scheduling2","Following two testcases are simpler than PR46521 and PR46522, and they need only basic flags to reproduce:-O -fschedule-insns2 -fsel-sched-pipelining -fselective-scheduling2Compiler output:$ gcc -O -fschedule-insns2 -fsel-sched-pipelining -fselective-scheduling2 testcase.c         testcase.c: In function 'foo':testcase.c:21:1: internal compiler error: in reset_sched_cycles_in_current_ebb, at sel-sched.c:7095Please submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.Tested revisions:r167054 - crash4.5 r166509 - crash4.4 r166509 - crash",RESOLVED          FIXED      
44691,Andrey Belevantsev,"[4.6 Regression] ICE: RTL check: expected code 'reg', have 'plus' in rhs_regno, at rtl.h:1050","Command line:$ gfortran -O2 -fselective-scheduling2 testsuite/gfortran.dg/pr42294.fCompiler output:$ /mnt/svn/gcc-trunk/binary-161428-lto-fortran-checking-yes-rtl-df/bin/gfortran -O2 -fselective-scheduling2 pr42294.f pr42294.f: In function 'orien':pr42294.f:39:0: internal compiler error: RTL check: expected code 'reg', have 'plus' in rhs_regno, at rtl.h:1050Please submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.Tested revisions:r161428 - crash (checking=yes,rtl,df)r161383 - crash (checking=yes,rtl,df)4.5 r160526 - OK (checking=yes,rtl)Testcase is from the testsuite: testsuite/gfortran.dg/pr42294.f",RESOLVED          FIXED      
37360,Andrey Belevantsev,[4.4 Regression] ICE in haifa-sched.c when compiling __popcountsi2 from libgcc,"On mipsel-linux:j.i:------------------typedef unsigned int UQItype __attribute__ ((mode (QI)));typedef unsigned int USItype __attribute__ ((mode (SI)));extern const UQItype __popcount_tab[256];extern int __popcountsi2 (USItype);int__popcountsi2 (USItype x){  int i, ret = 0;  for (i = 0; i < (4 * 8); i += 8)    ret += __popcount_tab[(x >> i) & 0xff];  return ret;}------------------$ /home/ddaney/gccsvn/trunk-build/./gcc/xgcc -B/home/ddaney/gccsvn/trunk-build/./gcc/ -B/home/ddaney/gccsvn/trunk-install/mipsel-linux/bin/ -B/home/ddaney/gccsvn/trunk-install/mipsel-linux/lib/ -isystem /home/ddaney/gccsvn/trunk-install/mipsel-linux/include -isystem /home/ddaney/gccsvn/trunk-install/mipsel-linux/sys-include -g -O2 -minterlink-mips16 -O2  -g -O2 -minterlink-mips16 -DIN_GCC   -W -Wall -Wwrite-strings -Wstrict-prototypes -Wmissing-prototypes -Wcast-qual -Wold-style-definition  -isystem ./include  -fPIC -g -DHAVE_GTHR_DEFAULT -DIN_LIBGCC2 -D__GCC_FLOAT_NOT_NEEDED   -I. -I. -I../.././gcc -I../../../trunk/libgcc -I../../../trunk/libgcc/. -I../../../trunk/libgcc/../gcc -I../../../trunk/libgcc/../include  -DHAVE_CC_TLS -o _popcountsi2.o -MT _popcountsi2.o -MD -MP -MF _popcountsi2.dep -DL_popcountsi2 -c j.i           -fvisibility=hidden -DHIDE_EXPORTS -vResults in:Reading specs from /home/ddaney/gccsvn/trunk-build/./gcc/specsTarget: mipsel-linuxConfigured with: ../trunk/configure --prefix=/home/ddaney/gccsvn/trunk-install --target=mipsel-linux --build=mipsel-linux --host=mipsel-linux --with-gmp=/home/ddaney/mp --with-mpfr=/home/ddaney/mp --with-arch=sb1 --disable-java-awt --without-x --enable-__cxa_atexit --enable-languages=allThread model: posixgcc version 4.4.0 20080903 (experimental) [trunk revision 139940] (GCC) COLLECT_GCC_OPTIONS='-B/home/ddaney/gccsvn/trunk-build/./gcc/' '-B/home/ddaney/gccsvn/trunk-install/mipsel-linux/bin/' '-B/home/ddaney/gccsvn/trunk-install/mipsel-linux/lib/' '-isystem' '/home/ddaney/gccsvn/trunk-install/mipsel-linux/include' '-isystem' '/home/ddaney/gccsvn/trunk-install/mipsel-linux/sys-include' '-g' '-O2' '-O2' '-g' '-O2' '-minterlink-mips16' '-DIN_GCC' '-W' '-Wall' '-Wwrite-strings' '-Wstrict-prototypes' '-Wmissing-prototypes' '-Wcast-qual' '-Wold-style-definition' '-isystem' './include' '-fPIC' '-g' '-DHAVE_GTHR_DEFAULT' '-DIN_LIBGCC2' '-D__GCC_FLOAT_NOT_NEEDED' '-I.' '-I.' '-I../.././gcc' '-I../../../trunk/libgcc' '-I../../../trunk/libgcc/.' '-I../../../trunk/libgcc/../gcc' '-I../../../trunk/libgcc/../include' '-DHAVE_CC_TLS' '-o' '_popcountsi2.o' '-MT' '_popcountsi2.o' '-MD' '-MP' '-MF' '_popcountsi2.dep' '-DL_popcountsi2' '-c' '-fvisibility=hidden' '-DHIDE_EXPORTS' '-v' '-march=sb1' '-mllsc' /home/ddaney/gccsvn/trunk-build/./gcc/cc1 -fpreprocessed j.i -quiet -dumpbase j.i -minterlink-mips16 -march=sb1 -mllsc -auxbase-strip _popcountsi2.o -g -g -g -O2 -O2 -O2 -W -Wall -Wwrite-strings -Wstrict-prototypes -Wmissing-prototypes -Wcast-qual -Wold-style-definition -version -fPIC -fvisibility=hidden -o /tmp/cc0RAQ3s.sGNU C (GCC) version 4.4.0 20080903 (experimental) [trunk revision 139940] (mipsel-linux)        compiled by GNU C version 4.4.0 20080223 (experimental) [trunk revision 132568], GMP version 4.2.1, MPFR version 2.3.0.GGC heuristics: --param ggc-min-expand=30 --param ggc-min-heapsize=4096Compiler executable checksum: 18865570e64c6f21ee7ff913cce9298aj.i: In function '__popcountsi2':j.i:16: internal compiler error: in max_issue, at haifa-sched.c:2074Please submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.",RESOLVED          FIXED      
44919,Andrey Belevantsev,ICE on ia64 with -O3 at  sel-sched.c:4672,"Using built-in specs.Target: ia64-linux-gnuConfigured with: ../src/configure -v --with-pkgversion='Debian 4.4.4-6' --with-bugurl=file:///usr/share/doc/gcc-4.4/README.Bugs --enable-languages=c,c++,fortran,objc,obj-c++ --prefix=/usr --enable-shared --enable-multiarch --enable-linker-build-id --with-system-zlib --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.4 --program-suffix=-4.4 --enable-nls --enable-clocale=gnu --enable-libstdcxx-debug --disable-libssp --enable-objc-gc --with-system-libunwind --enable-checking=release --build=ia64-linux-gnu --host=ia64-linux-gnu --target=ia64-linux-gnuThread model: posixgcc version 4.4.4 (Debian 4.4.4-6)The above version of g++ fails with -O3 on the attached test case:bug.i: In member function 'X::internal::Segment_2_Iso_rectangle_2_pair<K>::Intersection_results X::internal::Segment_2_Iso_rectangle_2_pair<K>::intersection_type() const [with K = X::Cartesian<double>]':bug.i:130: internal compiler error: in move_cond_jump, at sel-sched.c:4672I don't know whether the code is valid. I guess so because g++ does not complain on other architectures.I've minimized the test case with delta and a bit of manual tweaking, but I can't reduce it further.",RESOLVED          FIXED      
39580,Andrey Belevantsev,[4.5 regression] Revision 145204 caused libgomp.c++/collapse-2.C,Revision 145204:http://gcc.gnu.org/ml/gcc-cvs/2009-03/msg00711.htmlcaused:FAIL: libgomp.c++/collapse-2.C  -O3 -fomit-frame-pointer -funroll-all-loops-finline-functions  (internal compiler error)FAIL: libgomp.c++/collapse-2.C  -O3 -fomit-frame-pointer -funroll-all-loops-finline-functions  (test for excess errors)FAIL: libgomp.c++/collapse-2.C  -O3 -fomit-frame-pointer -funroll-loops (internal compiler error)FAIL: libgomp.c++/collapse-2.C  -O3 -fomit-frame-pointer -funroll-loops  (testfor excess errors)on Linux/ia64.,RESOLVED          FIXED      
39453,Andrey Belevantsev,"ICE : in init_seqno, at sel-sched.c:6433","{~/tmp}$gfortran -vUsing built-in specs.Target: x86_64-unknown-linux-gnuConfigured with: /svn/gcc/configure --prefix=/gcc-4.4/gcc --enable-shared --enable-languages=c,c++,objc,obj-c++,fortran --disable-multilib --with-gmp=/gcc-4.4/gmp --with-mpfr=/gcc-4.4/mpfr --with-ppl=/gcc-4.4/ppl --with-cloog=/gcc-4.4/cloog --with-cloog-polylib=/gcc-4.4/polylibThread model: posixgcc version 4.4.0 20090313 (experimental) (GCC) {~/tmp}$gfortran -c sgbtrf.f  -O3 -fselective-scheduling2 -fsel-sched-pipelining -fsel-sched-pipelining-outer-loopssgbtrf.f: In function 'sgbtrf':sgbtrf.f:437: internal compiler error: in init_seqno, at sel-sched.c:6433Please submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.",RESOLVED          FIXED      
42389,Andrey Belevantsev,ICE in advance_state_on_fence with sel-schd for 175.vpr,"GCC trunk gets a ICE when building SPEC CPU2000 test 175.vpr with ""-O2 -fselective-scheduling -fsel-sched-pipelining -fsched-pressure"" as demonstrated by a minimized testcase that I'll attach to this PR.elm3b149% /home/janis/tools/gcc-trunk-anonsvn/bin/gcc -c -O2 -fselective-scheduling -fsel-sched-pipelining -fsched-pressure bug.cbug.c: In function ‘try_route’:bug.c:83:1: internal compiler error: in advance_state_on_fence, at sel-sched.c:5264Please submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.The ICE begins with this patch:    http://gcc.gnu.org/viewcvs?view=rev&rev=152291    r152291 | pthaugen | 2009-09-29 18:58:56 +0000 (Tue, 29 Sep 2009)Option -fsched-pressure is new in GCC 4.5 so this is not a regression from 4.4.",RESOLVED          FIXED      
42388,Andrey Belevantsev,[4.5 Regression] ICE in move_bb_info with sel-sched and modulo-sched for 176.gcc,"GCC trunk gets a ICE when building SPEC CPU2000 test 176.gcc with ""-O2 -fmodulo-sched -fselective-scheduling"" as demonstrated by a minimized testcase that I'll attach to this PR.elm3b149% /home/janis/tools/gcc-trunk-anonsvn/bin/gcc -O2 -fmodulo-sched -fselective-scheduling -c bug.cbug.c: In function ‘unroll_loop’:bug.c:63:1: internal compiler error: in move_bb_info, at sel-sched-ir.c:4968Please submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.The ICE begins with this patch:    http://gcc.gnu.org/viewcvs?view=rev&rev=153491    r153491 | rguenth | 2009-10-23 09:34:46 +0000 (Fri, 23 Oct 2009)",RESOLVED          FIXED      
41033,Andrey Belevantsev,RTL alias-oracle does not honor -fno-strict-aliasing,"struct X {  int i;  int j;};int foo(struct X *p, struct X *q){  p->j = 1;  q->i = 0;  return p->j;}extern void abort (void);int main(){  struct X x;  if (foo (&x, (struct X *)&x.j) != 0)    abort ();  return 0;}is miscompiled at -O1.",RESOLVED          FIXED      
40101,Andrey Belevantsev,"[4.5 Regression] 200.sixtrack ICEs in get_seqno_by_preds, at sel-sched-ir.c:3752","/gcc/spec/sb-terbium-head-64/ia64/install-200905081754/bin/gfortran -c -o daten.o              -O3  daten.fdaten.f: In function 'daten':daten.f:1850: internal compiler error: in get_seqno_by_preds, at sel-sched-ir.c:3752Please submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.rev 147259 is good, rev 147290 is bad.",RESOLVED          FIXED      
64382,Adam Butcher,ICE due to use of `this` inside a lambda that captures everything by ref inside a member function of a class template,"template<typename T>struct my_queue {	void push(T){	}	void ice(){		trav([&](auto &&v){ push(v); });	}	template<typename F>	void trav(F &&f){		f(T());	}};template class my_queue<int>;---------------------------------------------------------E:\Desktop>g++ -c test.cpp -std=c++14test.cpp: In lambda function:test.cpp:6:29: internal compiler error: Segmentation fault   trav([&](auto &&v){ push(v); });                             ^Please submit a full bug report,with preprocessed source if appropriate.See <http://sourceforge.net/projects/mingw-w64> for instructions.",RESOLVED          FIXED      
61537,Adam Butcher,"[4.9/4.10 Regression] template parameter lists wrongly detected on ""struct"" or ""class"" keyword on parameters","Created attachment 32956 [details]sample codeWhen I define a template method outside of its template class declaration, it cannot use the class or struct keyword on normal parameters.This worked up to gcc 4.8. If I remove the struct or class keyword, everything works fine again. I tried -std=c++98 without success.If I write the definition inside the class Base { ... }; it also works.When I try to compile the code (see attachment), I get the following error:$ g++ main.ccmain.cc:17:38: error: too many template-parameter-lists void Base<T>::do_sth(S param, struct Dummy) // not working                                      ^main.cc:17:6: error: prototype for ‘void Base<T>::do_sth(S, int)’ does not match any in class ‘Base<T>’ void Base<T>::do_sth(S param, struct Dummy) // not working      ^main.cc:11:18: error: candidate is: template<class T> template<class S> void Base<T>::do_sth(S, Dummy)             void do_sth(S param, struct Dummy dummy);$ gcc -vUsing built-in specs.COLLECT_GCC=gccCOLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-linux-gnu/4.9/lto-wrapperTarget: x86_64-linux-gnuConfigured with: ../src/configure -v --with-pkgversion='Debian 4.9.0-6' --with-bugurl=file:///usr/share/doc/gcc-4.9/README.Bugs --enable-languages=c,c++,java,go,d,fortran,objc,obj-c++ --prefix=/usr --program-suffix=-4.9 --enable-shared --enable-linker-build-id --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.9 --libdir=/usr/lib --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --enable-gnu-unique-object --disable-libmudflap --enable-plugin --with-system-zlib --disable-browser-plugin --enable-java-awt=gtk --enable-gtk-cairo --with-java-home=/usr/lib/jvm/java-1.5.0-gcj-4.9-amd64/jre --enable-java-home --with-jvm-root-dir=/usr/lib/jvm/java-1.5.0-gcj-4.9-amd64 --with-jvm-jar-dir=/usr/lib/jvm-exports/java-1.5.0-gcj-4.9-amd64 --with-arch-directory=amd64 --with-ecj-jar=/usr/share/java/eclipse-ecj.jar --enable-objc-gc --enable-multiarch --with-arch-32=i586 --with-abi=m64 --with-multilib-list=m32,m64,mx32 --enable-multilib --with-tune=generic --enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnuThread model: posixgcc version 4.9.0 (Debian 4.9.0-6)",RESOLVED          FIXED      
60626,Adam Butcher,[c++1y] ICE with pointer to function with auto parameter,"The following invalid code snippet (compiled with ""-std=c++1y"")triggers an ICE on trunk:==================================struct A {};void (*A::p)(auto) = 0;==================================bug.cc:3:18: error: 'void (* A::p)(auto:1)' is not a static member of 'struct A' void (*A::p)(auto) = 0;                  ^bug.cc:3:18: error: template definition of non-template 'void (* A::p)(auto:1)'bug.cc:3:22: internal compiler error: in poplevel, at cp/decl.c:568 void (*A::p)(auto) = 0;                      ^0x5c3903 poplevel(int, int, int)        ../../gcc/gcc/cp/decl.c:5680x5fd2a8 end_template_decl()        ../../gcc/gcc/cp/pt.c:38090x6a1f31 finish_fully_implicit_template        ../../gcc/gcc/cp/parser.c:321210x6cd346 cp_parser_init_declarator        ../../gcc/gcc/cp/parser.c:168260x6ce9e9 cp_parser_simple_declaration        ../../gcc/gcc/cp/parser.c:112250x6b2983 cp_parser_block_declaration        ../../gcc/gcc/cp/parser.c:111060x6d9022 cp_parser_declaration        ../../gcc/gcc/cp/parser.c:110030x6d7d18 cp_parser_declaration_seq_opt        ../../gcc/gcc/cp/parser.c:108890x6d95ca cp_parser_translation_unit        ../../gcc/gcc/cp/parser.c:40300x6d95ca c_parse_file()        ../../gcc/gcc/cp/parser.c:316450x7f9de3 c_common_parse_file()        ../../gcc/gcc/c-family/c-opts.c:1061Please submit a full bug report, [etc.]Adam, you might want to have a look at this one.",RESOLVED          FIXED      
60573,Adam Butcher,[c++1y] ICE with defining generic function of nested class in class scope,"The following invalid code snippet (compiled with ""-std=c++1y"") triggersan ICE on trunk:========================struct A{  struct B  {    void foo(auto);  };  void B::foo(auto) {}};========================bug.cc:8:19: internal compiler error: in poplevel_class, at cp/name-lookup.c:2951   void B::foo(auto) {}                   ^0x783517 poplevel_class()        ../../gcc/gcc/cp/name-lookup.c:29510x666498 popclass()        ../../gcc/gcc/cp/class.c:71290x6668fa pop_nested_class()        ../../gcc/gcc/cp/class.c:72750x6c2961 cp_parser_direct_declarator        ../../gcc/gcc/cp/parser.c:175190x6c2961 cp_parser_declarator        ../../gcc/gcc/cp/parser.c:169860x6aaabd cp_parser_member_declaration        ../../gcc/gcc/cp/parser.c:203970x6adefc cp_parser_member_specification_opt        ../../gcc/gcc/cp/parser.c:200780x6adefc cp_parser_class_specifier_1        ../../gcc/gcc/cp/parser.c:193060x6b07b0 cp_parser_class_specifier        ../../gcc/gcc/cp/parser.c:195330x6b07b0 cp_parser_type_specifier        ../../gcc/gcc/cp/parser.c:143310x6c8c80 cp_parser_decl_specifier_seq        ../../gcc/gcc/cp/parser.c:115670x6ce809 cp_parser_simple_declaration        ../../gcc/gcc/cp/parser.c:111570x6b2983 cp_parser_block_declaration        ../../gcc/gcc/cp/parser.c:111060x6d9022 cp_parser_declaration        ../../gcc/gcc/cp/parser.c:110030x6d7d18 cp_parser_declaration_seq_opt        ../../gcc/gcc/cp/parser.c:108890x6d95ca cp_parser_translation_unit        ../../gcc/gcc/cp/parser.c:40300x6d95ca c_parse_file()        ../../gcc/gcc/cp/parser.c:316450x7f9d43 c_common_parse_file()        ../../gcc/gcc/c-family/c-opts.c:1061Please submit a full bug report, [etc.]Adam, you might want to have a look at this one.",RESOLVED          FIXED      
60627,Adam Butcher,[c++1y] ICE in explicit template instantiation containing auto parameter,"The following invalid code snippet (compiled with ""-std=c++1y"")triggers an ICE on trunk:=========================================template<typename T> void foo(T) {}template void foo(auto);void bar(){  foo(0);}=========================================bug.cc:3:23: error: template parameter list used in explicit instantiation template void foo(auto);                       ^bug.cc: In instantiation of 'void foo(T) [with T = auto:1]':bug.cc:3:23:   required from herebug.cc:1:27: internal compiler error: in dependent_type_p, at cp/pt.c:20474 template<typename T> void foo(T) {}                           ^0x602058 dependent_type_p(tree_node*)        ../../gcc/gcc/cp/pt.c:204740x5d6450 require_complete_types_for_parms        ../../gcc/gcc/cp/decl.c:108640x5d6450 check_function_type        ../../gcc/gcc/cp/decl.c:129810x5d6450 start_preparsed_function(tree_node*, tree_node*, int)        ../../gcc/gcc/cp/decl.c:131550x611ab0 instantiate_decl(tree_node*, int, bool)        ../../gcc/gcc/cp/pt.c:198370x651427 instantiate_pending_templates(int)        ../../gcc/gcc/cp/pt.c:199970x68c37f cp_write_global_declarations()        ../../gcc/gcc/cp/decl2.c:4311Please submit a full bug report, [etc.]Also, the first diagnostic could be improved: It's not obvious that auto is a template-parameter-list (and in other contexts it really isn't).Adam, you might want to have a look at this one.",RESOLVED          FIXED      
60390,Adam Butcher,[c++1y] ICE with declaring function with auto parameter as friend,"The following valid code snippet (compiled with ""-std=c++1y"") triggersan ICE on trunk:===========================================struct A{  void foo(auto);};struct B{  friend void A::foo(auto);};===========================================bug.cc:8:26: internal compiler error: in poplevel_class, at cp/name-lookup.c:2951   friend void A::foo(auto);                          ^0x783a07 poplevel_class()        ../../gcc/gcc/cp/name-lookup.c:29510x667d28 popclass()        ../../gcc/gcc/cp/class.c:71290x66818a pop_nested_class()        ../../gcc/gcc/cp/class.c:72750x6c2cf1 cp_parser_direct_declarator        ../../gcc/gcc/cp/parser.c:174790x6c2cf1 cp_parser_declarator        ../../gcc/gcc/cp/parser.c:169470x6ac38d cp_parser_member_declaration        ../../gcc/gcc/cp/parser.c:203530x6afa74 cp_parser_member_specification_opt        ../../gcc/gcc/cp/parser.c:200340x6afa74 cp_parser_class_specifier_1        ../../gcc/gcc/cp/parser.c:192680x6afa74 cp_parser_class_specifier        ../../gcc/gcc/cp/parser.c:194950x6afa74 cp_parser_type_specifier        ../../gcc/gcc/cp/parser.c:143050x6c8f70 cp_parser_decl_specifier_seq        ../../gcc/gcc/cp/parser.c:115470x6cfb49 cp_parser_simple_declaration        ../../gcc/gcc/cp/parser.c:111370x6b2ff3 cp_parser_block_declaration        ../../gcc/gcc/cp/parser.c:110860x6da2b2 cp_parser_declaration        ../../gcc/gcc/cp/parser.c:109830x6d8fa8 cp_parser_declaration_seq_opt        ../../gcc/gcc/cp/parser.c:108690x6da85a cp_parser_translation_unit        ../../gcc/gcc/cp/parser.c:40140x6da85a c_parse_file()        ../../gcc/gcc/cp/parser.c:315950x7f9f53 c_common_parse_file()        ../../gcc/gcc/c-family/c-opts.c:1060Please submit a full bug report, [etc.]This is similar to PR60064.Adam, you might want to have a look.",RESOLVED          FIXED      
60391,Adam Butcher,"[c++1y] ICE with auto parameter for operator""""","The following invalid code snippet (compiled with ""-std=c++1y"") triggersan ICE on trunk:===========================================namespace N{  int operator"""" _X(auto) {}}namespace N {}===========================================bug.cc:3:25: error: 'int N::operator""""_X(auto:1)' has invalid argument list   int operator"""" _X(auto) {}                         ^bug.cc:6:13: internal compiler error: in resume_scope, at cp/name-lookup.c:1656 namespace N {}             ^0x77fc2e resume_scope        ../../gcc/gcc/cp/name-lookup.c:16560x78aa0c push_namespace(tree_node*)        ../../gcc/gcc/cp/name-lookup.c:37170x6d9154 cp_parser_namespace_definition        ../../gcc/gcc/cp/parser.c:157710x6da3b1 cp_parser_declaration        ../../gcc/gcc/cp/parser.c:109710x6d8fa8 cp_parser_declaration_seq_opt        ../../gcc/gcc/cp/parser.c:108690x6da85a cp_parser_translation_unit        ../../gcc/gcc/cp/parser.c:40140x6da85a c_parse_file()        ../../gcc/gcc/cp/parser.c:315950x7f9f53 c_common_parse_file()        ../../gcc/gcc/c-family/c-opts.c:1060Please submit a full bug report, [etc.]Adam, you might want to have a look at that one, too.",RESOLVED          FIXED      
60393,Adam Butcher,[c++1y] ICE with with invalid functions with auto parameters,"The following invalid code snippets (compiled with ""-std=c++1y"") triggeran ICE on trunk:==============================void (*f)(auto) + 0;struct A{  int i;};==============================bug.cc:1:17: error: expected initializer before '+' token void (*f)(auto) + 0;                 ^bug.cc:5:7: error: data member 'i' cannot be a member template   int i;       ^bug.cc:5:7: internal compiler error: in poplevel, at cp/decl.c:5680x5c54a3 poplevel(int, int, int)        ../../gcc/gcc/cp/decl.c:5680x5feba8 end_template_decl()        ../../gcc/gcc/cp/pt.c:38070x6a3941 finish_fully_implicit_template        ../../gcc/gcc/cp/parser.c:320520x6acafc cp_parser_member_declaration        ../../gcc/gcc/cp/parser.c:204870x6afa74 cp_parser_member_specification_opt        ../../gcc/gcc/cp/parser.c:200340x6afa74 cp_parser_class_specifier_1        ../../gcc/gcc/cp/parser.c:192680x6afa74 cp_parser_class_specifier        ../../gcc/gcc/cp/parser.c:194950x6afa74 cp_parser_type_specifier        ../../gcc/gcc/cp/parser.c:143050x6c8f70 cp_parser_decl_specifier_seq        ../../gcc/gcc/cp/parser.c:115470x6cfb49 cp_parser_simple_declaration        ../../gcc/gcc/cp/parser.c:111370x6b2ff3 cp_parser_block_declaration        ../../gcc/gcc/cp/parser.c:110860x6da2b2 cp_parser_declaration        ../../gcc/gcc/cp/parser.c:109830x6d8fa8 cp_parser_declaration_seq_opt        ../../gcc/gcc/cp/parser.c:108690x6da85a cp_parser_translation_unit        ../../gcc/gcc/cp/parser.c:40140x6da85a c_parse_file()        ../../gcc/gcc/cp/parser.c:315950x7f9f53 c_common_parse_file()        ../../gcc/gcc/c-family/c-opts.c:1060Please submit a full bug report, [etc.]==============================struct A{  void foo();};void A::foo(auto) {}struct B{  int i;};==============================bug.cc:6:6: error: prototype for 'void A::foo(auto:1)' does not match any in class 'A' void A::foo(auto) {}      ^bug.cc:3:8: error: candidate is: void A::foo()   void foo();        ^bug.cc:10:7: error: data member 'i' cannot be a member template   int i;       ^bug.cc:10:7: internal compiler error: in poplevel, at cp/decl.c:5680x5c54a3 poplevel(int, int, int)        ../../gcc/gcc/cp/decl.c:5680x5feba8 end_template_decl()        ../../gcc/gcc/cp/pt.c:38070x6a3941 finish_fully_implicit_template        ../../gcc/gcc/cp/parser.c:320520x6acafc cp_parser_member_declaration        ../../gcc/gcc/cp/parser.c:204870x6afa74 cp_parser_member_specification_opt        ../../gcc/gcc/cp/parser.c:200340x6afa74 cp_parser_class_specifier_1        ../../gcc/gcc/cp/parser.c:192680x6afa74 cp_parser_class_specifier        ../../gcc/gcc/cp/parser.c:194950x6afa74 cp_parser_type_specifier        ../../gcc/gcc/cp/parser.c:143050x6c8f70 cp_parser_decl_specifier_seq        ../../gcc/gcc/cp/parser.c:115470x6cfb49 cp_parser_simple_declaration        ../../gcc/gcc/cp/parser.c:111370x6b2ff3 cp_parser_block_declaration        ../../gcc/gcc/cp/parser.c:110860x6da2b2 cp_parser_declaration        ../../gcc/gcc/cp/parser.c:109830x6d8fa8 cp_parser_declaration_seq_opt        ../../gcc/gcc/cp/parser.c:108690x6da85a cp_parser_translation_unit        ../../gcc/gcc/cp/parser.c:40140x6da85a c_parse_file()        ../../gcc/gcc/cp/parser.c:315950x7f9f53 c_common_parse_file()        ../../gcc/gcc/c-family/c-opts.c:1060Please submit a full bug report, [etc.]Adam, these look similar to PR60377 you just fixed.Could you please have a look?",RESOLVED          FIXED      
60033,Adam Butcher,[c++1y] ICE in retrieve_specialization while compiling recursive generic lambda,"Created attachment 32016 [details]Preprocessed output fileI got an ICE while compiling the following minimal code example (.ii is attached)://#include <iostream>#include <utility>template <typename... Funcs>struct composer;template <typename Func>struct composer<Func> {	auto operator()(Func&& f) {		return f;	}};template <typename Func, typename... Funcs>struct composer<Func, Funcs...> {	auto operator()(Func&& f, Funcs&&... fs) {		composer<Funcs...> c;		return [&] (auto v) {			return f(composer<Funcs...>()(std::forward<Funcs>(fs)...)(v));		};	}};template <typename... Funcs>auto compose(Funcs&&... fs) {	return composer<Funcs...>()(std::forward<Funcs>(fs)...);}int main (int argc, char const* argv[]) {	float v = 3.5f;	auto func = [] (auto v) { return int(v-0.5); };	auto t = compose([] (auto v) { return v >= 3; }, func)(v);//	std::cout << std::boolalpha << t << ""\n"";	auto f = compose([] (auto v) { return v > 3; }, func)(v);//	std::cout << std::boolalpha << f << ""\n"";}Compiler output is:> g++-4.9 -std=c++1y -save-temps -Wall -Wextra -fno-strict-aliasing -fwrapv -fno-aggressive-loop-optimizations main.cppmain.cpp: In instantiation of ‘composer<Func, Funcs ...>::operator()(Func&&, Funcs&& ...)::<lambda(auto:2)> [with auto:2 = float; Func = main(int, const char**)::<lambda(auto:3)>; Funcs = {main(int, const char**)::<lambda(auto:4)>}]’:main.cpp:33:88:   required from heremain.cpp:19:41: internal compiler error: in retrieve_specialization, at cp/pt.c:1042    return f(c(std::forward<Funcs>(fs)...)(v));                                         ^0x59c47f retrieve_specialization	./src/gcc/gcc/cp/pt.c:10390x5a470c tsubst_pack_expansion	./src/gcc/gcc/cp/pt.c:95630x59f404 tsubst_copy_and_build(tree_node*, tree_node*, int, tree_node*, bool, bool)	./src/gcc/gcc/cp/pt.c:144610x59fa18 tsubst_copy_and_build(tree_node*, tree_node*, int, tree_node*, bool, bool)	./src/gcc/gcc/cp/pt.c:144430x59f3a0 tsubst_copy_and_build(tree_node*, tree_node*, int, tree_node*, bool, bool)	./src/gcc/gcc/cp/pt.c:144560x5a31ce tsubst_expr	./src/gcc/gcc/cp/pt.c:137880x5a31a4 tsubst_expr	./src/gcc/gcc/cp/pt.c:132050x5a316f tsubst_expr	./src/gcc/gcc/cp/pt.c:134000x5a2e34 tsubst_expr	./src/gcc/gcc/cp/pt.c:131950x5a316f tsubst_expr	./src/gcc/gcc/cp/pt.c:134000x5a2038 instantiate_decl(tree_node*, int, bool)	./src/gcc/gcc/cp/pt.c:196560x5cfbb9 mark_used(tree_node*, int)	./src/gcc/gcc/cp/decl2.c:47010x57760b build_over_call	./src/gcc/gcc/cp/call.c:71270x57a301 build_op_call_1	./src/gcc/gcc/cp/call.c:41610x57a301 build_op_call(tree_node*, vec<tree_node*, va_gc, vl_embed>**, int)	./src/gcc/gcc/cp/call.c:41840x636cf8 finish_call_expr(tree_node*, vec<tree_node*, va_gc, vl_embed>**, bool, bool, int)	./src/gcc/gcc/cp/semantics.c:22980x5ec24b cp_parser_postfix_expression	./src/gcc/gcc/cp/parser.c:61650x5ee8b8 cp_parser_unary_expression	./src/gcc/gcc/cp/parser.c:71710x5ef48f cp_parser_binary_expression	./src/gcc/gcc/cp/parser.c:78750x5ef951 cp_parser_assignment_expression	./src/gcc/gcc/cp/parser.c:8113A running version compiled using clang++ 3.5 is here:http://coliru.stacked-crooked.com/a/acc691b9a407d6f2System:Arch LinuxLinux xxx 3.12.6-1-ARCH #1 SMP PREEMPT Fri Dec 20 19:39:00 CET 2013 x86_64 GNU/LinuxBuild Command:g++-4.9 -std=c++1y -save-temps -Wall -Wextra -fno-strict-aliasing -fwrapv -fno-aggressive-loop-optimizations main.cppVersion:Using built-in specs.COLLECT_GCC=g++-4.9COLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-unknown-linux-gnu/4.9.0/lto-wrapperTarget: x86_64-unknown-linux-gnuConfigured with: ./src/gcc/configure --prefix=/usr --libdir=/usr/lib --libexecdir=/usr/lib --mandir=/usr/share/man --infodir=/usr/share/info --datadir=/usr/share/gcc-4.9 --with-bugurl='http://aur.archlinux.org/packages.php?ID=16045' --enable-languages=c,c++,lto --enable-shared --enable-threads=posix --with-system-zlib --enable-__cxa_atexit --disable-libunwind-exceptions --enable-clocale=gnu --disable-libstdcxx-pch --enable-gnu-unique-object --enable-linker-build-id --enable-cloog-backend=isl --disable-cloog-version-check --enable-lto --enable-gold --enable-ld=default --enable-plugin --with-plugin-ld=ld.gold --with-linker-hash-style=gnu --disable-install-libiberty --disable-multilib --disable-libssp --disable-werror --enable-checking=release --program-suffix=-4.9 --enable-version-specific-runtime-libsThread model: posixgcc version 4.9.0 20140107 (experimental) (GCC)",RESOLVED          FIXED      
80358,Matthias Klose,[7 Regression] ICE (cc1 killed) building glib with -O3 on powerpc64le-linux-gnu,"Created attachment 41152 [details]preprocessed sourceseen with trunk 20170407 on powerpc64le-linux-gnu while building glib with -O3. With -O2 the build succeeds almost immediately, with -O3 it eats up all available memory.$ gcc -c -g -O3 gkeyfilesettingsbackend.i#0  0x0000000010259e1c in ggc_internal_alloc (size=24, f=0x0, s=0, n=1)    at ../../src/gcc/ggc-page.c:1327#1  0x00000000106cbe94 in ggc_internal_alloc (    s=<error reading variable: value has been optimized out>) at ../../src/gcc/ggc.h:134#2  ggc_alloc_rtx_def_stat (s=<error reading variable: value has been optimized out>)    at ../../src/gcc/ggc.h:280#3  rtx_alloc_stat_v (code=<optimized out>, extra=<optimized out>) at ../../src/gcc/rtl.c:203#4  0x00000000103aeadc in gen_raw_REG (mode=<optimized out>, regno=<optimized out>)    at ../../src/gcc/emit-rtl.c:436#5  0x00000000103afa98 in gen_reg_rtx (mode=<optimized out>) at ../../src/gcc/emit-rtl.c:1063#6  0x000000001061964c in maybe_legitimize_operand (op=0x3fffffffd7d0, opno=0,     icode=<optimized out>) at ../../src/gcc/optabs.c:6944#7  maybe_legitimize_operands (icode=<optimized out>, opno=0, nops=3, ops=0x3fffffffd7d0)    at ../../src/gcc/optabs.c:7017#8  0x0000000010619ad8 in maybe_gen_insn (icode=CODE_FOR_adddi3, nops=3, ops=0x3fffffffd7d0)    at ../../src/gcc/optabs.c:7035#9  0x000000001061d430 in expand_binop_directly (mode=DImode, binoptab=add_optab,     op0=0x3fffb637db60, op1=0x3ffe5dee9360, target=0x0, unsignedp=1, methods=OPTAB_LIB_WIDEN,     last=0x3ffe5e963c40) at ../../src/gcc/optabs.c:1071#10 0x000000001061d8dc in expand_binop (mode=<optimized out>, binoptab=<optimized out>,     op0=0x3fffb637db60, op1=0x3ffe5dee9360, target=0x0, unsignedp=<optimized out>,     methods=<optimized out>) at ../../src/gcc/optabs.c:1150#11 0x00000000103efe3c in force_operand (value=0x3ffe5e971ed8, target=0x0)    at ../../src/gcc/expr.c:7316#12 0x0000000010a9a260 in rs6000_legitimize_address (x=<optimized out>, oldx=<optimized out>,     mode=<optimized out>) at ../../src/gcc/config/rs6000/rs6000.c:9008#13 0x0000000010745edc in default_addr_space_legitimize_address (x=<optimized out>,     oldx=<optimized out>, mode=<optimized out>, as=<optimized out>)    at ../../src/gcc/targhooks.c:1349#14 0x00000000103cb1e4 in memory_address_addr_space (mode=<optimized out>, x=0x3ffe5e971ec0,     as=<optimized out>) at ../../src/gcc/explow.c:432#15 0x00000000103acdb4 in change_address_1 (memref=0x3fffb63c32d0, mode=DImode,     addr=<optimized out>, validate=1, inplace=false) at ../../src/gcc/emit-rtl.c:2152#16 0x00000000103b1a54 in adjust_address_1 (memref=0x3fffb63c32d0, mode=DImode,     offset=33388112, validate=<optimized out>, adjust_address=<optimized out>,     adjust_object=<optimized out>, size=8) at ../../src/gcc/emit-rtl.c:2288#17 0x0000000010a82d80 in expand_block_compare (operands=<optimized out>)    at ../../src/gcc/config/rs6000/rs6000.c:19743#18 0x0000000010c8efd0 in gen_cmpmemsi (operand0=0x3fffb63c3300, operand1=0x3fffb63c32d0,     operand2=0x3fffb63c32e8, operand3=0x3fffb5900470, operand4=0x3fffb5900500)    at ../../src/gcc/config/rs6000/rs6000.md:9242#19 0x0000000010619cfc in insn_gen_fn::operator() (a4=0x3fffb5900500, a3=0x3fffb5900470,     a2=0x3fffb63c32e8, a1=0x3fffb63c32d0, a0=0x3fffb63c3300, this=<optimized out>)    at ../../src/gcc/recog.h:304#20 maybe_gen_insn (icode=<optimized out>, nops=<optimized out>, ops=0x3fffffffdea0)    at ../../src/gcc/optabs.c:7051#21 0x0000000010626aa8 in maybe_expand_insn (icode=<optimized out>, nops=<optimized out>,     ops=<optimized out>) at ../../src/gcc/optabs.c:7078#22 0x00000000103e1830 in expand_cmpstrn_or_cmpmem (icode=<optimized out>,     target=<optimized out>, arg1_rtx=0x3fffb63c32d0, arg2_rtx=0x3fffb63c32e8,     arg3_type=0x3fffb58b0150, arg3_rtx=0x3fffb5900470, align=8) at ../../src/gcc/expr.c:1905#23 0x00000000103ec644 in emit_block_cmp_via_cmpmem (align=8, target=0x0,     len_type=0x3fffb58b0150, len=0x3fffb5900470, y=0x3fffb63c32e8, x=0x3fffb63c32d0)    at ../../src/gcc/expr.c:1927#24 emit_block_cmp_hints (x=0x3fffb63c32d0, y=0x3fffb63c32e8, len=0x3fffb5900470,     len_type=0x3fffb58b0150, target=0x0, equality_only=<optimized out>, y_cfn=0x0,     y_cfndata=0x0) at ../../src/gcc/expr.c:1972#25 0x0000000010285014 in expand_builtin_memcmp (result_eq=<optimized out>, target=0x0,     exp=0x3fffb6306a50) at ../../src/gcc/builtins.c:4231#26 expand_builtin (exp=0x3fffb6306a50, target=<optimized out>, subtarget=<optimized out>,     mode=<optimized out>, ignore=<optimized out>) at ../../src/gcc/builtins.c:6754#27 0x00000000103e7d34 in expand_expr_real_1 (exp=<optimized out>, target=<optimized out>,     tmode=<optimized out>, modifier=<optimized out>, alt_rtl=<optimized out>,     inner_reference_p=<optimized out>) at ../../src/gcc/expr.c:10822#28 0x00000000103e97e4 in expand_expr_real (exp=0x3fffb6306a50, target=0x0, tmode=DImode,     modifier=<optimized out>, alt_rtl=0x0, inner_reference_p=false)    at ../../src/gcc/expr.c:8071#29 0x00000000103fa0c4 in expand_expr (modifier=<optimized out>, mode=DImode, target=0x0,     exp=0x3fffb6306a50) at ../../src/gcc/expr.h:276#30 expand_expr_real_2 (ops=0x3fffffffe4d0, target=0x3fffb637d968, tmode=VOIDmode,     modifier=EXPAND_NORMAL) at ../../src/gcc/expr.c:8314#31 0x00000000103e70d4 in expand_expr_real_1 (exp=0x3fffb62bf0e0, target=<optimized out>,     tmode=<optimized out>, modifier=<optimized out>, alt_rtl=<optimized out>,     inner_reference_p=<optimized out>) at ../../src/gcc/expr.c:11103#32 0x00000000103e97e4 in expand_expr_real (exp=0x3fffb62bf0e0, target=<optimized out>,     tmode=VOIDmode, modifier=EXPAND_NORMAL, alt_rtl=0x0, inner_reference_p=false)    at ../../src/gcc/expr.c:8071#33 0x00000000103f3870 in expand_expr (modifier=EXPAND_NORMAL, mode=VOIDmode,     target=<optimized out>, exp=0x3fffb62bf0e0) at ../../src/gcc/expr.h:276#34 store_expr_with_bounds (exp=0x3fffb62bf0e0, target=0x3fffb63c32b8, call_param_p=0,     modifier=EXPAND_NORMAL) at ../../src/gcc/expr.c:8314#31 0x00000000103e70d4 in expand_expr_real_1 (exp=0x3fffb62bf0e0, target=<optimized out>,     tmode=<optimized out>, modifier=<optimized out>, alt_rtl=<optimized out>,     inner_reference_p=<optimized out>) at ../../src/gcc/expr.c:11103#32 0x00000000103e97e4 in expand_expr_real (exp=0x3fffb62bf0e0, target=<optimized out>,     tmode=VOIDmode, modifier=EXPAND_NORMAL, alt_rtl=0x0, inner_reference_p=false)    at ../../src/gcc/expr.c:8071#33 0x00000000103f3870 in expand_expr (modifier=EXPAND_NORMAL, mode=VOIDmode,     target=<optimized out>, exp=0x3fffb62bf0e0) at ../../src/gcc/expr.h:276#34 store_expr_with_bounds (exp=0x3fffb62bf0e0, target=0x3fffb63c32b8, call_param_p=0, ---Type <return> to continue, or q <return> to quit---    nontemporal=false, reverse=false, btarget=0x3fffb6303888) at ../../src/gcc/expr.c:5459#35 0x00000000103f46a0 in expand_assignment (to=0x3fffb6303888, from=0x3fffb6306a50,     nontemporal=<optimized out>) at ../../src/gcc/expr.c:5321#36 0x00000000102a4fac in expand_call_stmt (stmt=0x3fffb617b810)    at ../../src/gcc/cfgexpand.c:2656#37 expand_gimple_stmt_1 (stmt=0x3fffb617b810) at ../../src/gcc/cfgexpand.c:3571#38 expand_gimple_stmt (stmt=0x3fffb617b810) at ../../src/gcc/cfgexpand.c:3737#39 0x00000000102a6788 in expand_gimple_basic_block (bb=<optimized out>,     disable_tail_calls=false) at ../../src/gcc/cfgexpand.c:5744#40 0x00000000102ad0c8 in (anonymous namespace)::pass_expand::execute (this=<optimized out>,     fun=0x3fffb5b25ee0) at ../../src/gcc/cfgexpand.c:6357#41 0x0000000010649764 in execute_one_pass (pass=0x116d1030) at ../../src/gcc/passes.c:2465#42 0x000000001064a734 in execute_pass_list_1 (pass=0x116d1030) at ../../src/gcc/passes.c:2554#43 0x000000001064a7d8 in execute_pass_list (fn=<optimized out>, pass=<optimized out>)    at ../../src/gcc/passes.c:2565#44 0x00000000102e83a0 in cgraph_node::expand (this=0x3fffb618e600)    at ../../src/gcc/cgraphunit.c:2042#45 0x00000000102e9ec8 in expand_all_functions () at ../../src/gcc/cgraphunit.c:2178#46 symbol_table::compile (this=0x3fffb58c0000) at ../../src/gcc/cgraphunit.c:2535#47 0x00000000102ec3ac in symbol_table::compile (this=0x3fffb58c0000)    at ../../src/gcc/cgraphunit.c:2595#48 symbol_table::finalize_compilation_unit (this=0x3fffb58c0000)    at ../../src/gcc/cgraphunit.c:2625#49 0x000000001074b4f0 in compile_file () at ../../src/gcc/toplev.c:492#50 0x0000000010146d88 in do_compile () at ../../src/gcc/toplev.c:2000#51 toplev::main (this=0x3fffffffefe0, argc=<optimized out>, argv=<optimized out>)    at ../../src/gcc/toplev.c:2134#52 0x0000000010148e38 in main (argc=<optimized out>, argv=0x3ffffffff408)    at ../../src/gcc/main.c:39",RESOLVED          FIXED      
80123,Michael Meissner,libgomp tests pr66199-2.c and pr66199-5.c fail with -mcpu=power9,"Both of these fail in the same way with 246224:gcc/xgcc -Bgcc ../trunk/libgomp/testsuite/libgomp.c/pr66199-2.c -Bpowerpc64le-unknown-linux-gnu/libgomp/ -Bpowerpc64le-unknown-linux-gnu/libgomp/.libs -Ipowerpc64le-unknown-linux-gnu/libgomp -I../trunk/libgomp/testsuite/../../include -I../trunk/libgomp/testsuite/.. -fmessage-length=0 -fno-diagnostics-show-caret -Wno-hsa -fdiagnostics-color=never -fopenmp -O2 -L/home/sawdey/work/gcc/trunk/build4/powerpc64le-unknown-linux-gnu/./libgomp/.libs -lm -o ./pr66199-2.exe -mcpu=power9../trunk/libgomp/testsuite/libgomp.c/pr66199-2.c: In function ‘f2._omp_fn.3’:../trunk/libgomp/testsuite/libgomp.c/pr66199-2.c:21:11: error: could not split insn(insn 70 61 188 (set (reg:V2DI 86 9 [orig:206 vect_cst__132 ] [206])        (vec_duplicate:V2DI (reg/v:DI 0 0 [orig:163 c ] [163]))) 1235 {vsx_splat_v2di}     (nil))../trunk/libgomp/testsuite/libgomp.c/pr66199-2.c:21:11: internal compiler error: in final_scan_insn, at final.c:30250x108bc1d3 _fatal_insn(char const*, rtx_def const*, char const*, int, char const*)        ../../trunk/gcc/rtl-error.c:1080x1053fa5b final_scan_insn(rtx_insn*, _IO_FILE*, int, int, int*)        ../../trunk/gcc/final.c:30250x1053fe37 final(rtx_insn*, _IO_FILE*, int)        ../../trunk/gcc/final.c:20510x10540497 rest_of_handle_final        ../../trunk/gcc/final.c:44890x10540497 execute        ../../trunk/gcc/final.c:4562gcc/xgcc -Bgcc ../trunk/libgomp/testsuite/libgomp.c/pr66199-5.c -Bpowerpc64le-unknown-linux-gnu/libgomp/ -Bpowerpc64le-unknown-linux-gnu/libgomp/.libs -Ipowerpc64le-unknown-linux-gnu/libgomp -I../trunk/libgomp/testsuite/../../include -I../trunk/libgomp/testsuite/.. -fmessage-length=0 -fno-diagnostics-show-caret -Wno-hsa -fdiagnostics-color=never -fopenmp -O2 -L/home/sawdey/work/gcc/trunk/build4/powerpc64le-unknown-linux-gnu/./libgomp/.libs -lm -o ./pr66199-5.exe -mcpu=power9../trunk/libgomp/testsuite/libgomp.c/pr66199-5.c: In function ‘f2._omp_fn.3’:../trunk/libgomp/testsuite/libgomp.c/pr66199-5.c:24:11: error: could not split insn(insn 75 66 200 (set (reg:V2DI 86 9 [orig:209 vect_cst__140 ] [209])        (vec_duplicate:V2DI (reg/v:DI 0 0 [orig:162 c ] [162]))) 1235 {vsx_splat_v2di}     (nil))../trunk/libgomp/testsuite/libgomp.c/pr66199-5.c:24:11: internal compiler error: in final_scan_insn, at final.c:30250x108bc1d3 _fatal_insn(char const*, rtx_def const*, char const*, int, char const*)        ../../trunk/gcc/rtl-error.c:1080x1053fa5b final_scan_insn(rtx_insn*, _IO_FILE*, int, int, int*)        ../../trunk/gcc/final.c:30250x1053fe37 final(rtx_insn*, _IO_FILE*, int)        ../../trunk/gcc/final.c:20510x10540497 rest_of_handle_final        ../../trunk/gcc/final.c:44890x10540497 execute        ../../trunk/gcc/final.c:4562",RESOLVED          FIXED      
79170,Martin Liška,[7 regression] memcmp builtin expansion sequence can overflow,"The sequence generated for memcmp() builtin expansion can overflow in the subf and produce the wrong result.#include <stdio.h>#include <string.h>#include <stdlib.h>#include <limits.h>#define SIZE 16int main (){  unsigned char buffer1[SIZE] = { 0,0,0,0,0,0,0,1 };  unsigned char buffer2[SIZE] = { 0x80,0,0,0,0,0,0,3 };  asm("" "");  int n =  memcmp(buffer1,buffer2, SIZE);  printf(""%d\n"", n);}produces         ldbrx 9,0,6        ldbrx 4,0,8        subf. 4,4,9        bne 0,.L2        addi 10,1,120        ldbrx 9,0,10        addi 10,1,104        ldbrx 4,0,10        subf 4,4,9.L2:        cntlzd 4,4        addis 3,2,.LC0@toc@ha        addi 3,3,.LC0@toc@l        addi 4,4,-1        xori 4,4,0x3f        bl printfIf the subf result overflows such that the sign bit is not set in r4, then the wrong result is produced.",RESOLVED          FIXED      
79752,Michael Meissner,incorrect code generation for __divkf3 with -O2 -mcpu=power9,"Created attachment 40845 [details]reduced test caseTrunk 245614 is generating incorrect code for the software version of divkf3 with -mcpu=power9. With -mcpu=power8, correct code is generated.I've applied multidelta to this test case but it wasn't able to remove much.gcc/xgcc -Bgcc/ -O2 -mcpu=power9 -o divkf3bug divkf3bug.c./divkf3buga=2.000000 b=3.000000 r=1.999999gcc/xgcc -Bgcc/ -O2 -mcpu=power8 -o divkf3bug divkf3bug.c./divkf3buga=2.000000 b=3.000000 r=0.666667",RESOLVED          FIXED      
79295,Segher Boessenkool,[7 regression] gcc.target/powerpc/bcd-3.c fails starting with r244942,"Causes an ICEspawn /home/seurer/gcc/build/gcc-test/gcc/xgcc -B/home/seurer/gcc/build/gcc-test/gcc/ /home/seurer/gcc/gcc-test/gcc/testsuite/gcc.target/powerpc/bcd-3.c -fno-diagnostics-show-caret -fdiagnostics-color=never -mcpu=power8 -O2 -ffat-lto-objects -S -o bcd-3.s/home/seurer/gcc/gcc-test/gcc/testsuite/gcc.target/powerpc/bcd-3.c: In function 'do_add_lt':/home/seurer/gcc/gcc-test/gcc/testsuite/gcc.target/powerpc/bcd-3.c:34:1: error: insn does not satisfy its constraints:(insn 44 3 13 2 (parallel [            (set (reg/v:V1TI 32 0 [orig:156 <retval> ] [156])                (unspec:V1TI [                        (reg/v:V1TI 77 0 [orig:157 a ] [157])                        (reg/v:V1TI 78 1 [orig:158 b ] [158])                        (const_int 0 [0])                    ] UNSPEC_BCDADD))            (set (reg:CCFP 74 6)                (compare:CCFP (unspec:V2DF [                            (reg/v:V1TI 77 0 [orig:157 a ] [157])                            (reg/v:V1TI 78 1 [orig:158 b ] [158])                            (const_int 0 [0])                        ] UNSPEC_BCDADD)                    (const_vector:V2DF [                            (const_double:DF 0.0 [0x0.0p+0])                            (const_double:DF 0.0 [0x0.0p+0])                        ])))        ]) ""/home/seurer/gcc/gcc-test/gcc/testsuite/gcc.target/powerpc/bcd-3.c"":30 1753 {*bcdadd_test2}     (nil))/home/seurer/gcc/gcc-test/gcc/testsuite/gcc.target/powerpc/bcd-3.c:34:1: internal compiler error: in extract_constrain_insn, at recog.c:22130x108a9b13 _fatal_insn(char const*, rtx_def const*, char const*, int, char const*)	/home/seurer/gcc/gcc-test/gcc/rtl-error.c:1080x108a9b6b _fatal_insn_not_found(rtx_def const*, char const*, int, char const*)	/home/seurer/gcc/gcc-test/gcc/rtl-error.c:1190x1086fa67 extract_constrain_insn(rtx_insn*)	/home/seurer/gcc/gcc-test/gcc/recog.c:22130x10874e1f copyprop_hardreg_forward_1	/home/seurer/gcc/gcc-test/gcc/regcprop.c:7940x10875eb7 execute	/home/seurer/gcc/gcc-test/gcc/regcprop.c:1301",RESOLVED          FIXED      
63256,Andreas Schwab,"[5/6/7 regression] FAIL: gcc.dg/sms-8.c scan-rtl-dump-times sms ""SMS succeeded"" 0","Only happens with -m32.$ gcc/xgcc -Bgcc/ ../gcc/gcc/testsuite/gcc.dg/sms-8.c -fno-diagnostics-show-caret -fdiagnostics-color=never -O2 -fmodulo-sched -fmodulo-sched-allow-regmoves -fdump-rtl-sms -ffat-lto-objects -lm -m32 -o ./sms-8.exe$ grep ""SMS succeeded"" sms-8.c.214r.sms../gcc/gcc/testsuite/gcc.dg/sms-8.c:18 SMS succeeded 12 2 (with ii, sc)96f3c2b9903e92cf806719d18fc0682d617c0016 is the first bad commitcommit 96f3c2b9903e92cf806719d18fc0682d617c0016Author: segher <segher@138bc75d-0d04-0410-961f-82ee72b054a4>Date:   Tue Sep 2 11:21:09 2014 +0000    2014-09-02  Segher Boessenkool  <segher@kernel.crashing.org>        * config/rs6000/rs6000.md (any_extend): New code iterator.        (u, su): New code attributes.        (dmode, DMODE): New mode attributes.        (<su>mul<mode>3_highpart): New.        (*<su>mul<mode>3_highpart): New.        (<su>mulsi3_highpart_le): New.        (<su>muldi3_highpart_le): New.        (<su>mulsi3_highpart_64): New.        (<u>mul<mode><dmode>3): New.        (mulsidi3, umulsidi3, smulsi3_highpart, umulsi3_highpart, and two        splitters): Delete.        (mulditi3, umulditi3, smuldi3_highpart, umuldi3_highpart, and two        splitters): Delete.    git-svn-id: svn+ssh://gcc.gnu.org/svn/gcc/trunk@214814 138bc75d-0d04-0410-961f-82ee72b054a4",RESOLVED          FIXED      
77934,Bill Schmidt,pattern for mtvsrdd needs to use b constraint not r,gcc 7 trunk generates incorrect code in spec 2k6 403.gcc where it tries to use r0 as the first input register to mtvsrdd and results in storing a null pointer instead of the desired value.,RESOLVED          FIXED      
51174,Aldy Hernandez,AIX unexpected error_mark node in new TM tests,"AIX testsuite shows a large number of internal compiler errors from TM tests due to tree check failures finding error_mark nodes./farm/dje/src/src/gcc/testsuite/c-c++-common/tm/freq.c:14:1: internalcompiler error: tree check: expected tree that contains 'decl common'structure, have 'error_mark' in rs6000_xcoff_section_type_flags, at config/rs60\00/rs6000.c:25791/farm/dje/src/src/gcc/testsuite/g++.dg/tm/pr45940-3.C:69:1: internal compiler error: tree check: expected identifier_node, have error_mark in tm_mangle, at trans-mem.c:4107/farm/dje/src/src/gcc/testsuite/c-c++-common/tm/inline-asm-2.c:8:1:/farm/dje/src/src/gcc/testsuite/c-c++-common/tm/memcpy-1.c:9:1:/farm/dje/src/src/gcc/testsuite/g++.dg/tm/20100727.C:796:1:/farm/dje/src/src/gcc/testsuite/g++.dg/tm/alias.C:17:1:/farm/dje/src/src/gcc/testsuite/g++.dg/tm/attrib-2.C:16:19:/farm/dje/src/src/gcc/testsuite/g++.dg/tm/attrib-3.C:27:15:/farm/dje/src/src/gcc/testsuite/g++.dg/tm/nested-1.C:22:1:/farm/dje/src/src/gcc/testsuite/g++.dg/tm/nested-2.C:41:1:/farm/dje/src/src/gcc/testsuite/g++.dg/tm/nested-3.C:43:1:/farm/dje/src/src/gcc/testsuite/g++.dg/tm/pr45940-3.C:69:1:etc.",RESOLVED          FIXED      
51291,Aldy Hernandez,ICE: SIGSEGV in ix86_init_builtins (i386.c:27691) with -fgnu-tm and any fortran code,"It seems any fotran code triggers this segfault:Compiler output:$ echo '' > testcase.f$ gfortran testcase.f -fgnu-tmf951: warning: 'transaction_pure' attribute directive ignored [-Wattributes]==3935== Invalid read of size 2==3935==    at 0xC88CCF: ix86_init_builtins() (i386.c:27691)==3935==    by 0x6268F7: gfc_init_builtin_functions() (f95-lang.c:1136)==3935==    by 0x627C68: gfc_be_parse_file() (f95-lang.c:231)==3935==    by 0xA56547: toplev_main(int, char**) (toplev.c:565)==3935==    by 0x674ED2C: (below main) (in /lib64/libc-2.12.2.so)==3935==  Address 0x0 is not stack'd, malloc'd or (recently) free'd==3935== f951: internal compiler error: Segmentation faultPlease submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.The warning is likely invalid.Tested revisions:r181678 - crash",RESOLVED          FIXED      
51443,Aldy Hernandez,[trans-mem] internal compiler error in expand_block_tm of trans-mem.c,"Created attachment 26011 [details]testcase with -gnu-tm -O1I report this bug which is very close to some previous one (PR46269/PR47606).In this testcase, it fails to detect the block as irrevocable due to the asm and thus failed in expand_block_tm. Actually the way to mark a block irrevocable in a transaction_callable is a bit obscure to me.Thanks.Patrick Marlier.",RESOLVED          FIXED      
49875,Aldy Hernandez,FAIL: c-c++-common/cxxbitfields-4.c,"On Linux/ia32, revision 176824:http://gcc.gnu.org/ml/gcc-cvs/2011-07/msg01092.htmlgaveFAIL: c-c++-common/cxxbitfields-4.c scan-assembler-not movlFAIL: c-c++-common/cxxbitfields-4.c scan-assembler-not movl",RESOLVED          FIXED      
46567,Aldy Hernandez,[trans-mem] ipa_tm_decrement_clone_counts ICE at -O2,"$  ./cc1plus c.cc -O -fgnu-tm -fdump-tree-all -fdump-ipa-all -quiet -O2c.cc: In function 'void* buildProjectSyncStepConcurrently(int, int)':c.cc:2674:1: internal compiler error: in ipa_tm_decrement_clone_counts, at trans-mem.c:3687Please submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.",RESOLVED          FIXED      
47554,Aldy Hernandez,[trans-mem] expand_expr_addr_expr_1 ICE,ICE ICE baby,RESOLVED          FIXED      
47573,Aldy Hernandez,[trans-mem] ICE in invoke_set_current_function_hook,"Created attachment 23199 [details]testcase boomThe attached test case makes GCC crashed (with latest revision 169442). $ g++ -fgnu-tm -O0 -S testcase.itestcase.i:22:1: internal compiler error: Segmentation faultPlease submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.Program received signal SIGSEGV, Segmentation fault.invoke_set_current_function_hook (fndecl=0xa5a5a5a5a5a5a5a5) at ../../transactional-memory/gcc/function.c:40394039			   ? DECL_FUNCTION_SPECIFIC_OPTIMIZATION (fndecl)(gdb) bt#0  invoke_set_current_function_hook (fndecl=0xa5a5a5a5a5a5a5a5) at ../../transactional-memory/gcc/function.c:4039#1  0x0000000000aca463 in verify_cgraph_node (node=0x7ffff6bbdc30) at ../../transactional-memory/gcc/cgraphunit.c:581#2  0x0000000000acadd8 in verify_cgraph () at ../../transactional-memory/gcc/cgraphunit.c:812#3  0x0000000000aee65b in cgraph_remove_unreachable_nodes (before_inlining_p=1 '\001', file=0x0)    at ../../transactional-memory/gcc/ipa.c:306#4  0x00000000008427ee in execute_todo (flags=384) at ../../transactional-memory/gcc/passes.c:1307#5  0x0000000000844e5a in execute_one_pass (pass=0x132f6c0) at ../../transactional-memory/gcc/passes.c:1602#6  0x000000000084525a in execute_ipa_pass_list (pass=0x132f6c0) at ../../transactional-memory/gcc/passes.c:1813#7  0x0000000000acd5a7 in ipa_passes () at ../../transactional-memory/gcc/cgraphunit.c:1796#8  cgraph_optimize () at ../../transactional-memory/gcc/cgraphunit.c:1831#9  0x0000000000acdf35 in cgraph_finalize_compilation_unit () at ../../transactional-memory/gcc/cgraphunit.c:1096#10 0x00000000005393cb in cp_write_global_declarations () at ../../transactional-memory/gcc/cp/decl2.c:3837#11 0x00000000008ea23a in compile_file (argc=15, argv=0x7fffffffe4c8) at ../../transactional-memory/gcc/toplev.c:1065#12 do_compile (argc=15, argv=0x7fffffffe4c8) at ../../transactional-memory/gcc/toplev.c:2424#13 toplev_main (argc=15, argv=0x7fffffffe4c8) at ../../transactional-memory/gcc/toplev.c:2466#14 0x00007ffff6f95d8e in __libc_start_main (main=<value optimized out>, argc=<value optimized out>,     ubp_av=<value optimized out>, init=<value optimized out>, fini=<value optimized out>, rtld_fini=<value optimized out>,     stack_end=0x7fffffffe4b8) at libc-start.c:226#15 0x0000000000489089 in _start ()",RESOLVED          FIXED      
47340,Aldy Hernandez,[trans-mem] problem with declaration of new operator,It seems that there is a problem with the declaration of new operator and related to PR46941.Attached the testcase.$ g++ -I . -save-temps -fgnu-tm -c -o incomplete3.o incomplete3.cpp...incomplete3.cpp:31:67: error: call to function ‘void* operator new(long unsigned int)’ which throws incomplete type ‘struct std::bad_alloc’Patrick Marlier.,RESOLVED          FIXED      
45940,Aldy Hernandez,[trans-mem] Error of unsafe function even if annotated,"When I compile a transactional program which use an annotated STL, GCCcompilation says that the function is not safe even if it is annotated.I have attached the ii file (I tried to make it smaller but it didn'tfigure out when it happens).Here the compilation:$ g++ -O0 -c -Wall -g -fgnu-tm -fno-builtin Building.iiIn file included from src/Building.cpp:77:0:src/Building.cpp:1341:27: error: unsafe function call ‘voidstd::list<_Tp, _Alloc>::push_front(const value_type&) [with _Tp =Bullet*, _Alloc = std::allocator<Bullet*>, value_type = Bullet*]’ within‘transaction_safe’ functionExtract from STL source:__attribute__((transaction_pure))       void       push_front(const value_type& __x)       { this->_M_insert(begin(), __x); }",RESOLVED          FIXED      
46270,Aldy Hernandez,[trans-mem] internal compiler error: verify_stmts failed,"Hello,It seems that a throw exeception in a relaxed transaction raises an error.$ g++ -o Game.o -c -Wall -fgnu-tm Game.cppGame.cpp: In function void* buildProjectSyncStepConcurrently(int, int):Game.cpp:14:14: error: statement marked for throw in middle of blockD.8218 = std::list<std::_List_iterator<Game::BuildProject> >::begin (&erasableBuildProjects); [in atomic]Game.cpp:14:14: internal compiler error: verify_stmts failedPlease submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.make: *** [all] Error 1here a small testcase:#include <list>class Game{public:        struct BuildProject        {                int posX;        };        std::list<BuildProject> buildProjects;};static Game game;static std::list<std::list<Game::BuildProject>::iterator> erasableBuildProjects;static void *buildProjectSyncStepConcurrently(int id, int localTeam){        __transaction [[relaxed]] {                std::list<std::list<Game::BuildProject>::iterator>::iterator it = erasableBuildProjects.begin();                game.buildProjects.erase( (std::list<Game::BuildProject>  ::iterator) *it);        }        return 0;}Thanks.Patrick Marlier.",RESOLVED          FIXED      
46269,Aldy Hernandez,[trans-mem] internal compiler error in expand_block_tm of trans-mem.c,"I encounter the following problem when trying to compile transaction-based Globulation2 (attached is the .ii):gramoliv@gramoliv-desktop:~/svn/velox/trunk/glob2$ g++ -o src/Building.o -c -Wall --gnu-tm -fno-builtin -DHAVE_CONFIG_H -D_GNU_SOURCE=1 -D_REENTRANT -Ilibgag/include -I. -I/usr/include/SDL src/Building.cppIn file included from src/Building.cpp:28:0:src/Building.h:69:143: warning: ‘transaction_unknown’ attribute directive ignoredIn file included from src/Building.cpp:34:0:src/Unit.h:52:81: warning: ‘transaction_unknown’ attribute directive ignoredIn file included from src/Building.cpp:34:0:src/Unit.h:174:37: warning: ‘transaction_unknown’ attribute directive ignoredsrc/Building.cpp: In member function ‘void Building::updateCallLists()’:src/Building.cpp:907:6: warning: suggest explicit braces to avoid ambiguous ‘else’src/Building.cpp: In member function ‘void Building::updateUnitsHarvesting()’:src/Building.cpp:1153:82: warning: suggest parentheses around comparison in operand of ‘&’src/Building.cpp: In member function ‘bool Building::subscribeToBringRessourcesStep()’:src/Building.cpp:1708:8: warning: unused variable ‘teamNumber’src/Building.cpp:1734:8: warning: unused variable ‘teamNumber’src/Building.cpp: In member function ‘bool Building::subscribeForFlagingStep()’:src/Building.cpp:1940:11: warning: unused variable ‘canSwim’src/Building.cpp:1801:8: warning: unused variable ‘teamNumber’src/Building.cpp:1875:9: warning: unused variable ‘map’src/Building.cpp: In member function ‘bool Building::canConvertUnit()’:src/Building.cpp:2818:39: warning: comparison between signed and unsigned integer expressionssrc/Building.cpp:2819:24: warning: comparison between signed and unsigned integer expressionsIn file included from /usr/include/boost/smart_ptr/detail/sp_counted_base.hpp:36:0,                 from /usr/include/boost/smart_ptr/detail/shared_count.hpp:29,                 from /usr/include/boost/smart_ptr/shared_ptr.hpp:32,                 from /usr/include/boost/shared_ptr.hpp:17,                 from src/Order.h:36,                 from src/Building.h:29,                 from src/Building.cpp:28:/usr/include/boost/smart_ptr/detail/sp_counted_base_gcc_x86.hpp: In function ‘int boost::detail::atomic_exchange_and_add(int*, int)’:/usr/include/boost/smart_ptr/detail/sp_counted_base_gcc_x86.hpp:35:12: internal compiler error: in expand_block_tm, at trans-mem.c:2199",RESOLVED          FIXED      
45985,Aldy Hernandez,[trans-mem] internal compiler error: verify_cgraph_node failed,"Created attachment 22023 [details]source file that shows up the bug.Just a little email to report you a bug inside trans-mem branch.The complete command line to compile is :$ gcc -Wall -fgnu-tm callable.c echo.c -o callable -litmBut this is enough to trigger the bug :$ gcc -Wall -fgnu-tm callable.c -o callable callable.c:18:1: error: caller edge frequency 0 does not match BB freqency 1000__builtin__ITM_changeTransactionMode/5(-1) @0x7fda62f8baf8 availability:not_available  called by: main/0   calls: callable.c:18:1: internal compiler error: verify_cgraph_node failedPlease submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.Patrick Marlier.",RESOLVED          FIXED      
35443,Aldy Hernandez,[4.2/4.3/4.4 regression] Completely broken diagnostic with bind_expr,A broken diagnostic is issued for the following invalid code snippetsince GCC 4.1.0:==================================================void foo(){  ({ int i; })();}==================================================#'bind_expr' not supported by pp_c_expression#'bug.c: In function 'foo':bug.c:3: error: called object  is not a functionSimilar to PR35441.,RESOLVED          FIXED      
42917,Aldy Hernandez,"[4.5 Regression] ""-fcompare-debug failure"" with -ftree-loop-linear","Command line:gcc -O1 -ftree-loop-linear -fcompare-debug -c testcase.c(fails at all -O1, -O2 and -O3 levels)Tested revisions:r156367 - crashr155833 - crashr154830 - crashr153685 - crashOutput:$ /mnt/svn/gcc-trunk/binary-156367-lto/bin/gcc -O1 -ftree-loop-linear testcase.c -fcompare-debuggcc: testcase.c: -fcompare-debug failure (length)There is actually different code generated with -g, the outer loop isn't removed. 4.4.2 generates the same code for both cases.",RESOLVED          FIXED      
41451,Aldy Hernandez,[4.5 Regression] Bootstrap failure with fold checking, ,RESOLVED          FIXED      
40660,Aldy Hernandez,"[4.5 Regression] Weird break points with 4.5, works with 4.4","Maybe this is a side effect of fixing a DWARF bug, but using GCC 4.5 withgdb (GDB) SUSE (6.8.50.20090302-41.3) [contains ""Merge FC11 update 23""] does not work while with GCC 4.4 it does.Example (compile with gfortran -g):PROGRAM test  INTEGER, DIMENSION(3) :: a1,a2  a1 = 1  PRINT*, a1  a2 = 2end program testGCC 4.4 with gdb:(gdb) b 3Breakpoint 1 at 0x4007a7: file test.f90, line 3.(gdb) runStarting program: /dev/shm/a.outBreakpoint 1, test () at test.f90:33         a1 = 1Current language:  auto; currently fortran(gdb) n4         PRINT*, a1(gdb) pt a1type = integer(kind=4) (3)(gdb) p a1$1 = (1, 1, 1)(gdb) n           1           1           15         a2 = 2GCC 4.5 with gdb:(gdb) b 3Breakpoint 1 at 0x400738: file test.f90, line 3.(gdb) runStarting program: /dev/shm/a.outBreakpoint 1, test () at test.f90:33         a1 = 1Current language:  auto; currently fortran(gdb) p a1$1 = (8, 0, -1417923840)(gdb) n           1           1           10x00002aaaab48ca4d in __libc_start_main () from /lib64/libc.so.6",RESOLVED          FIXED      
40435,Aldy Hernandez,[4.5 regression] Revision 148442 caused many regressions on trunk,"On Linux/ia32, revision 148455 gaveFAIL: gcc.dg/Wshadow-3.c  (test for warnings, line 47)FAIL: gcc.dg/Wshadow-3.c (test for excess errors)FAIL: gcc.dg/func-ptr-conv-1.c (test for excess errors)FAIL: gcc.dg/func-ptr-conv-1.c bad conversion (test for warnings, line 40)FAIL: gcc.dg/func-ptr-conv-1.c bad conversion (test for warnings, line 41)FAIL: gcc.dg/pr36902.c  (test for warnings, line 47)FAIL: gcc.dg/pr36902.c (test for excess errors)Revision 148431 is OK.",RESOLVED          FIXED      
35432,Aldy Hernandez,[4.2/4.3/4.4 regression] ICE with zero-sized array,"The following valid code snippet triggers an ICE since GCC 4.1.0:================================struct A{  char c[0];};void foo(struct A a){  (a = a).c;}================================bug.c: In function 'foo':bug.c:8: internal compiler error: Segmentation faultPlease submit a full bug report, [etc.]",RESOLVED          FIXED      
35442,Aldy Hernandez,[4.2/4.3/4.4 Regression] Completely broken diagnostic with view_convert_expr,A broken diagnostic is issued for the following invalid code snippetsince GCC 4.0.2:==================================================typedef char A __attribute__((vector_size(8)));typedef int  B __attribute__((vector_size(8)));void foo(A a){  ((B)a)();}==================================================#'view_convert_expr' not supported by pp_c_expression#'bugD3.c: In function 'foo':bug.c:6: error: called object  is not a functionbug.c:5: warning: MMX vector argument without MMX enabled changes the ABISimilar to PR35441.,RESOLVED          FIXED      
35746,Aldy Hernandez,[4.3 regression] ICE with undefined variables,"The following invalid code snippets triggers an ICE since GCC 4.3.0:======================int foo(int i);void bar(){  __complex__ int i;  X j;    if (i = foo(j))    ;}======================bug.c: In function 'bar':bug.c:6: error: 'X' undeclared (first use in this function)bug.c:6: error: (Each undeclared identifier is reported only oncebug.c:6: error: for each function it appears in.)bug.c:6: error: expected ';' before 'j'bug.c:8: error: 'j' undeclared (first use in this function)bug.c:8: internal compiler error: in create_tmp_from_val, at gimplify.c:535Please submit a full bug report, [etc.]The C++ frontend is not affected.",RESOLVED          FIXED      
34465,Aldy Hernandez,[4.3 Regression] incorrect sharing of tree nodes,"I see the following on Alpha with trunk 2007-12-12 but not on x86_64:(sid)tbm@lima:~$ /usr/lib/gcc-snapshot/bin/gcc -c  -fconstant-string-class=NSConstantString -O1 projectmanager.app-EditorRulerView.miEditorRulerView.m: In function '-[EditorRulerView refreshHighlightedArea]':EditorRulerView.m:276: error: incorrect sharing of tree nodesself_1(D)->selectionRect ={v} {};{}EditorRulerView.m:276: error: incorrect sharing of tree nodes# STORES:  { bRect }bRect ={v} {};{}EditorRulerView.m:276: internal compiler error: verify_stmts failedPlease submit a full bug report,with preprocessed source if appropriate.",RESOLVED          FIXED      
34448,Aldy Hernandez,"[4.3 Regression] ICE in declare_inline_vars, at tree-inline.c:3243","With current trunk:(sid)3201:tbm@em64t: ~] /usr/lib/gcc-snapshot/bin/gcc -c -O -Wall strongswan-build.cstrongswan-build.c: In function 'build_attr_cert':strongswan-build.c:27: internal compiler error: in declare_inline_vars, at tree-inline.c:3243Please submit a full bug report,with preprocessed source if appropriate.This happens withgcc version 4.3.0 20071212 (experimental) [trunk revision 127646] (Debian 20071212-1)but didn't happen withgcc version 4.3.0 20071207 (experimental) [trunk revision 127646] (Debian 20071206-1)",RESOLVED          FIXED      
32901,Aldy Hernandez,[4.1/4.2/4.3 Regression] bitfield constants with multiple bitfields take up space in .data,"When defining a bitfield constant where multiple bitfields have initializingvalues, this constant is moved into .data in GCC 4.1.  GCC 3.x could realizeit can be written and assigned as a single integer number.  GCC 4.x onlyrealizes this situation as long as a single bitfield is initialized.Verified on i386 and avr targets, so this is apparently completely independentof the target CPU.",RESOLVED          FIXED      
18506,Aldy Hernandez,Altivec definitions of vec_init,Poor generated code for initializing vectors with constants because vec_initpattern is not defined for Altivec.,RESOLVED          FIXED      
30391,Aldy Hernandez,[4.3 regression] ICE at -O1 with conditional expressions and GIMPLE_MODIFY_STMT,"The following fails with today's (rev. 120520) trunk (at -O1 on both i686-linux and x86_64-linux):$ cat mc_coordinates.f90SUBROUTINE check_for_overlap (cell_length)  REAL, DIMENSION(1:3), INTENT(IN), OPTIONAL :: cell_length  REAL, DIMENSION(1:3) :: abc, box_length  IF (PRESENT(cell_length)) THEN    box_length(1:3)=abc(1:3)  ENDIFEND SUBROUTINE check_for_overlap$ gfortran -O1 -c mc_coordinates.f90mc_coordinates.f90: In function ‘check_for_overlap’:mc_coordinates.f90:6: internal compiler error: in operand_equal_p, at fold-const.c:2539The bug was originaly reported in PR29975. The gdb backtrace is:Breakpoint 1, fancy_abort (file=0xa20a04 ""../../trunk/gcc/fold-const.c"",     line=2539, function=0xa20900 ""operand_equal_p"")    at ../../trunk/gcc/diagnostic.c:641641     {(gdb) back#0  fancy_abort (file=0xa20a04 ""../../trunk/gcc/fold-const.c"", line=2539,     function=0xa20900 ""operand_equal_p"") at ../../trunk/gcc/diagnostic.c:641#1  0x00000000005c416d in operand_equal_p (arg0=0x2a984c3e40,     arg1=0x2a983e3300, flags=0) at ../../trunk/gcc/fold-const.c:2539#2  0x00000000005c7f5f in fold_ternary (code=COND_EXPR, type=0x2a983f30c0,     op0=0x2a983de3c0, op1=0x2a984c3e40, op2=0x2a983e3300)    at ../../trunk/gcc/fold-const.c:11657#3  0x00000000005c9161 in fold_build3_stat (code=COND_EXPR, type=0x2a983f30c0,     op0=0x2a983de3c0, op1=0x2a984c3e40, op2=0x2a983e3300)    at ../../trunk/gcc/fold-const.c:12307#4  0x0000000000493271 in gfc_trans_if_1 (code=0xd6af60)    at ../../trunk/gcc/fortran/trans-stmt.c:612#5  0x0000000000464b83 in gfc_trans_code (code=0xd73b80)    at ../../trunk/gcc/fortran/trans.c:528#6  0x0000000000477f64 in gfc_generate_function_code (ns=0xd6a710)    at ../../trunk/gcc/fortran/trans-decl.c:3232#7  0x0000000000442bfc in gfc_parse_file ()    at ../../trunk/gcc/fortran/parse.c:3263I don't see any suspicious change in gcc/fortran/ChangeLog, maybe it has to do with Roger's recent array copying patch (although I don't see how). What is sure is that it worked at least until 20070104, and is now failing. Roger, could you give it a look?",RESOLVED          FIXED      
24036,Aldy Hernandez,"[4.1/4.2 Regression] [e500] ICE in subreg_offset_representable_p, at rtlanal.c:3143","ICE when using -mfloat-gprs=double with -mspe=no. Found in the e500 branch,reproducible in mainline.Test case:typedef double _Complex _Dcomplex;double (cabs)(_Dcomplex x) { }[rmansfield@bender rmansfield]$/home/rmansfield/crosstool/powerpc-linux-gnuspe/gcc-head-glibc-2.3.5/bin/powerpc-linux-gnuspe-gcc-mfloat-gprs=double -mcpu=8548 ~/cabs.i -c -mspe=no -vUsing built-in specs.Target: powerpc-linux-gnuspeConfigured with:/home/rmansfield/crosstool-0.28-rc37/build/powerpc-linux-gnuspe/gcc-head-glibc-2.3.5/gcc-head/configure--target=powerpc-linux-gnuspe --host=i686-host_pc-linux-gnu--prefix=/home/rmansfield/crosstool/powerpc-linux-gnuspe/gcc-head-glibc-2.3.5--with-local-prefix=/home/rmansfield/crosstool/powerpc-linux-gnuspe/gcc-head-glibc-2.3.5/powerpc-linux-gnuspe--disable-multilib --with-newlib --without-headers --disable-nls--enable-threads=no --enable-symvers=gnu --enable-__cxa_atexit--enable-languages=c --disable-sharedThread model: singlegcc version 4.1.0 20050917 (experimental) /home/rmansfield/crosstool/powerpc-linux-gnuspe/gcc-head-glibc-2.3.5/libexec/gcc/powerpc-linux-gnuspe/4.1.0/cc1-fpreprocessed /home/rmansfield/cabs.i -quiet -dumpbase cabs.i-mfloat-gprs=double -mcpu=8548 -mspe=no -auxbase cabs -version -o /tmp/ccNYZQDL.sGNU C version 4.1.0 20050917 (experimental) (powerpc-linux-gnuspe)        compiled by GNU C version 3.3.3 20040412 (Red Hat Linux 3.3.3-7).GGC heuristics: --param ggc-min-expand=30 --param ggc-min-heapsize=4096Compiler executable checksum: 947d94ba0d127e0ee2614bdf9bacf926/home/rmansfield/cabs.i: In function 'cabs':/home/rmansfield/cabs.i:3: internal compiler error: insubreg_offset_representable_p, at rtlanal.c:3143Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.> If this is reproducible in mainline, could you submit this bug in bugzilla and > assign it to me?> Thanks> Aldy",RESOLVED          FIXED      
26238,Aldy Hernandez,[4.2 Regression] passes.texi does not document the openMP lowering pass,I decided to look at what passes are not documented recently and I noticed that openmp lowering pass is not documented at all.,RESOLVED          FIXED      
26234,Aldy Hernandez,[4.2 Regression] --disable-libgomp is not documented,"I decided to look at http://gcc.gnu.org/install/configure.html for something else and I noticed this.--disable-libgomp should be documented there, just like how --disable-libgcc-math, --disable-libssp and others are.This is a regression as the documention is no longer up todate with reality.",RESOLVED          FIXED      
24138,Aldy Hernandez,[4.1 regression] ICE with the code in PR 20407,"The following code now ICEs on the mainline:typedef struct { unsigned char dir; int data[];} AiDefaultRailBlock;static const AiDefaultRailBlock _raildata_ai_0 = { 1,  { 0,  4 }  };",RESOLVED          FIXED      
24505,Aldy Hernandez,[gomp] Loop rejected with mixed types in predicate,"I get an error message for the following code snippet:================================void foo(){    long n = 10;    int i;#pragma omp for    for (i = 0; i < n; ++i) ;}================================bug.c: In function 'foo':bug.c:6: error: invalid controlling predicateThis happens with the C and the C++ frontend.I'm not 100 % sure whether this is really a bug or not, buticc for example accepts it.",RESOLVED          FIXED      
10611,Aldy Hernandez,operations on vector mode not recognized in C++,"Operations (+ - * /, etc.) on vector modes are not recognized in c++. The following testcase works for C, but not for C++:typedef float v4sf __attribute__((mode(V4SF)));void foo(){     v4sf a, b, c;     a = b + c;}bellatrix:~/src/tests$ g++-3.3 -c -msse2 simd2.cpp simd2.cpp: In function `void foo()': simd2.cpp:6: error: invalid operands of types `vector float' and `vector float'    to binary `operator+'same for gcc 3.4. I suspect this is really rejects-legal, as I see no reason that it shouldnt (but the documentation isnt clear either - vector mode extensions are within the C Extensions part).Release:gcc-3.3 (GCC) 3.3 20030427 (Debian prerelease), gcc-3.4 (GCC) 3.4 20030422 (experimental)Environment:ia32 gnu-linux",RESOLVED          FIXED      
22115,Aldy Hernandez,[4.1 regression] testsuite failure: g++.dg/conversion/simd2.C,"With LAST_UPDATED: ""Sat Jun 18 12:53:47 UTC 2005"" I get:Running /home/hp/combined/combined/gcc/testsuite/g++.dg/dg.exp ......FAIL: g++.dg/conversion/simd2.C  (test for errors, line 15)FAIL: g++.dg/conversion/simd2.C (test for excess errors)With the message in the .log being:x/combined/gcc/testsuite/g++.dg/conversion/simd2.C: In function 'void foo()':^Mx/combined/gcc/testsuite/g++.dg/conversion/simd2.C:15: error: invalid operandsto binary +^MLast known to work on: ""Wed Jun 15 07:31:22 UTC 2005"".Known to fail on: ""Thu Jun 16 09:31:56 UTC 2005"".Maybe it's as simple as a missing update of g++.dg/conversion/simd2.C, butthere wasn't any expected error there before as there was with the simd tests intestsuite/gcc.dg in that time-frame.  Expert (and author of changes in thetime-frame) CC:ed.",RESOLVED          FIXED      
17961,Aldy Hernandez,ICE for operation on small vector with altivec enabled,"This test case causes two different internal compiler errors in GCC whencompiled with ""-m32 -maltivec"", with VECSIZE either 2 or 8:                                                                                  __attribute__ ((vector_size (VECSIZE))) unsigned char v1, v2, v3;  void vxor (void) { v1 = v2 ^ v3; }                                                                                Using a cross compiler on i686-linux with today's mainline:                                                                                laptop% $XGCC -m32 -maltivec -DVECSIZE=2 -c bug2.cbug2.c: In function 'vxor':bug2.c:9: internal compiler error: in operand_subword_force, at/emit-rtl.c:1384Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.                                                                                laptop% $XGCC -m32 -maltivec -DVECSIZE=8 -c bug2.cbug2.c: In function 'vxor':bug2.c:10: internal compiler error: in simplify_subreg, at /simplify-rtx.c:3572Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.There is no ICE when VECSIZE is 4.  Hardware-supported AltiVec vectorsare 16 bytes, so all of these are smaller than hardware-supportedvectors.  The larger testcase compiles and runs as expected when hardwarevector support is not enabled.",RESOLVED          FIXED      
14880,Aldy Hernandez,Altivec vspltX pattern RTL enhancement,Patterns describing vspltX should use vec_duplicate instead of UNSPEC.,RESOLVED          FIXED      
11793,Aldy Hernandez,"[3.3 regression] ICE in extract_insn, at recog.c:2175 (const_vector's)","[forwarded from http://bugs.debian.org/203835]A regression from 3.3 probably introduced between 20030722 and 20030728. Foundon HEAD CVS 20030531 as well (no newer version at hand).gcc -O -maltivec -mabi=altivec -c n1fv_9.in1fv_9.c: In function `n1fv_9':n1fv_9.c:128: error: unrecognizable insn:(insn 2983 1654 1655 2 (nil) (set (reg:V4SF 77 v0)        (const_vector:V4SF [                (const_double:SF 9.3969261646270751953125e-1 [0x0.f08fb2p+0])                (const_double:SF 9.3969261646270751953125e-1 [0x0.f08fb2p+0])                (const_double:SF 9.3969261646270751953125e-1 [0x0.f08fb2p+0])                (const_double:SF 9.3969261646270751953125e-1 [0x0.f08fb2p+0])            ])) -1 (nil)    (nil))n1fv_9.c:128: internal compiler error: in extract_insn, at recog.c:2175The file n1fv_9.i is attached.",RESOLVED          FIXED      
14219,Aldy Hernandez,[3.4 regression] ICE with vector comparison,"compiling code like:typedef int v2si __attribute__ ((mode (V2SI)));                                                                                                                              int test (v2si a, v2si b){        return (a == b);}with `gcc -march=athlon-xp test.c` gives this error message:test.c: In function `test':test.c:5: internal compiler error: in prepare_cmp_insn, at optabs.c:3512gcc version 3.3.3 20040125 (prerelease) (Debian)",RESOLVED          FIXED      
12028,Aldy Hernandez,[3.4 Regression] powerpc-eabispe produces bad sCOND operation,"Building gcc for powerpc-eabispe target on mainline (combined tree):../combined/configure --target=powerpc-eabispe --enable-languages=c,c++,objcfails with:./xgcc -B./ -B/usr/local/powerpc-eabispe/bin/ -isystem /usr/local/powerpc-eabispe/include -isystem /usr/local/powerpc-eabispe/sys-include -L/home/dara/mainline/objdir/gcc/../ld -O2  -DIN_GCC -DCROSS_COMPILE   -W -Wall -Wwrite-strings -Wstrict-prototypes -Wmissing-prototypes -isystem ./include   -g  -DIN_LIBGCC2 -D__GCC_FLOAT_NOT_NEEDED -Dinhibit_libc -I. -I. -I../../combined/gcc -I../../combined/gcc/. -I../../combined/gcc/config -I../../combined/gcc/../include   -DL_divdi3 -c ../../combined/gcc/libgcc2.c -fexceptions -fnon-call-exceptions -o libgcc/./_divdi3.o../../combined/gcc/libgcc2.c: In function `__divdi3':../../combined/gcc/libgcc2.c:1066: internal compiler error: in ccr_bit, at config/rs6000/rs6000.c:8136Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.make[1]: *** [libgcc/./_divdi3.o] Error 1make[1]: Leaving directory `/home/dara/mainline/objdir/gcc'make: *** [stmp-multilib] Error 2The testcase does not ICE if -O1 or lower is specified.",RESOLVED          FIXED      
14924,Aldy Hernandez,Compiler ICE on valid code,"There is a problem with NE rtl handling for powerpc e500 target on the latest3.4 pre-release.This little program, seg faults the compiler:#include <spe.h>__ev64_u16__ * g_vp_u16 ;__ev64_u16__ g_v_u16 ;voidtest___ev_stdd (void){  __ev_stdd (g_v_u16,g_vp_u16,31U);}Command line was:gcc-3.4-20040406/bin/gcc -O1 -S x.c -save-tempsHere is the output:x.c: In function `test___ev_stdd':x.c:9: internal compiler error: in copy_to_mode_reg, at explow.c:667Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.Several benchmarks in spec2k have problems. Perlbmk also ICE:op.c: In function `list_assignment':op.c:2552: error: unrecognizable insn:(insn:HI 257 256 258 18 (set (reg:CCEQ 212)       (compare:CCEQ (gtu:SI (reg:CCUNS 211)               (const_int 0 [0x0]))           (const_int 0 [0x0]))) -1 (nil)   (expr_list:REG_DEAD (reg:CCUNS 211)       (nil)))op.c:2552: internal compiler error: in extract_insn, at recog.c:2083",RESOLVED          FIXED      
11092,Aldy Hernandez,[3.4 Regression] [altivec] ICE:unrecognizable insn (vector constant),"When compiling the attached preprocessed file (valid code) with optimization,the compiler gives an ICE in extract_insn, at recog.c:2188Here is the output:/home/edmar/forge/gnupowerpc-20030603-0-altivec-altivec/bin/gcc -v -save-temps-O2 -c ice.cReading specs from/nfs/ibmoto/linuxperf/home/edmar/forge/gnupowerpc-20030603-0-altivec-altivec/bin/../lib/gcc-lib/powerpc-unkown-linux-gnualtivec/3.4/specsConfigured with: /local2/forge/gnupowerpc/configure--prefix=/home/edmar/forge/gnupowerpc-20030603-0-altivec-altivec--enable-languages=c,c++,f77 --target=powerpc-unkown-linux-gnualtivec--host=powerpc-unkown-linux-gnualtivecThread model: posixgcc version 3.4 20030603 (experimental)/nfs/ibmoto/linuxperf/home/edmar/forge/gnupowerpc-20030603-0-altivec-altivec/bin/../lib/gcc-lib/powerpc-unkown-linux-gnualtivec/3.4/cc1-E -quiet -v -iprefix/nfs/ibmoto/linuxperf/home/edmar/forge/gnupowerpc-20030603-0-altivec-altivec/bin/../lib/gcc-lib/powerpc-unkown-linux-gnualtivec/3.4/-D__unix__ -D__gnu_linux__ -D__linux__ -Dunix -D__unix -Dlinux -D__linux-Asystem=unix -Asystem=posix ice.c -O2 -o ice.iignoring nonexistent directory""/nfs/ibmoto/linuxperf/home/edmar/forge/gnupowerpc-20030603-0-altivec-altivec/powerpc-unkown-linux-gnualtivec/include""ignoring duplicate directory""/home/edmar/forge/gnupowerpc-20030603-0-altivec-altivec/lib/gcc-lib/powerpc-unkown-linux-gnualtivec/3.4/include""ignoring nonexistent directory""/home/edmar/forge/gnupowerpc-20030603-0-altivec-altivec/powerpc-unkown-linux-gnualtivec/include""#include ""..."" search starts here:#include <...> search starts here:/nfs/ibmoto/linuxperf/home/edmar/forge/gnupowerpc-20030603-0-altivec-altivec/lib/gcc-lib/powerpc-unkown-linux-gnualtivec/3.4/include /usr/local/include /home/edmar/forge/gnupowerpc-20030603-0-altivec-altivec/include /usr/includeEnd of search list./nfs/ibmoto/linuxperf/home/edmar/forge/gnupowerpc-20030603-0-altivec-altivec/bin/../lib/gcc-lib/powerpc-unkown-linux-gnualtivec/3.4/cc1-fpreprocessed ice.i -quiet -dumpbase ice.c -auxbase ice -O2 -version -o ice.sGNU C version 3.4 20030603 (experimental) (powerpc-unkown-linux-gnualtivec)        compiled by GNU C version 3.4 20030603 (experimental).GGC heuristics: --param ggc-min-expand=81 --param ggc-min-heapsize=96352ice.c: In function `main':ice.c:77: error: unrecognizable insn:(insn 264 26 24 0 (nil) (set (reg:V16QI 77 v0)        (const_vector:V16QI [                (const_int 0 [0x0])                (const_int 1 [0x1])                (const_int 2 [0x2])                (const_int 3 [0x3])                (const_int 4 [0x4])                (const_int 5 [0x5])                (const_int 6 [0x6])                (const_int 7 [0x7])                (const_int 8 [0x8])                (const_int 9 [0x9])                (const_int 10 [0xa])                (const_int 11 [0xb])                (const_int 12 [0xc])                (const_int 13 [0xd])                (const_int 14 [0xe])                (const_int 15 [0xf])            ])) -1 (nil)    (nil))ice.c:77: internal compiler error: in extract_insn, at recog.c:2188Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.",RESOLVED          FIXED      
12299,Aldy Hernandez,altivec vec_cmple generates wrong instruction,"The altivec instruction vec_cmple currently does the same as the vec_cmpgeinstruction.  The error seems to be in the altivec.h include file, the vec_cmplearguments should probably be swapped around.How to repeat:#include <altivec.h>#include <stdio.h>#include <stdlib.h>void PrintVectorFloat(FILE *out, const vector float *vec){  const float *ptr = (float *)vec;  int i, end = vec_step(vector float);  fprintf(out, ""( "");  for(i=0; i<end-1; i++) {    fprintf(out, ""%f"", *ptr++);    fprintf(out, "", "");  }  fprintf(out, ""%f"", *ptr++);  fprintf(out, "" )"");  return;}int main(void){  vector float zero    = (vector float) {0.0, 0.0, 0.0, 0.0};  vector float smaller = (vector float) {1.0, 2.0, 3.0, 4.0};  vector float bigger  = (vector float) {5.0, 6.0, 7.0, 4.0};  vector bool int cmp;    cmp = vec_cmple (bigger, smaller);  bigger = vec_sel (bigger, zero, cmp);  PrintVectorFloat (stdout, &bigger); printf (""\n"");    cmp = vec_cmpge (bigger, smaller);  bigger = vec_sel (bigger, zero, cmp);  PrintVectorFloat (stdout, &bigger); printf (""\n"");  return 0;}compiled with gcc -maltivec -mabi=altivecgcc -v:Reading specs from/usr/local/gcc-3.3.1/lib/gcc-lib/powerpc-unknown-linux-gnu/3.3.1/specsConfigured with: ../gcc-3.3.1/configure --prefix=/usr/local/gcc-3.3.1--enable-altivec --enable-languages=c++,f77,cThread model: posixgcc version 3.3.1",RESOLVED          FIXED      
9564,Aldy Hernandez,compiling sdiff causes ICE on powerpc,"when i try and compile sdiff, i get the following:reykjavik src # make sdiff(echo '#define DEFAULT_DIFF_PROGRAM ""/usr/local/bin/'`echo diff|sed 's,x,x,'`'""' && \ echo '#define LOCALEDIR ""/usr/local/share/locale""') >paths.hsource='sdiff.c' object='sdiff.o' libtool=no \depfile='.deps/sdiff.Po' tmpdepfile='.deps/sdiff.TPo' \depmode=gcc3 /bin/sh ../config/depcomp \gcc -DHAVE_CONFIG_H -I. -I. -I..  -I../lib -I../lib   -g -O2 -pipe -mcpu=7400 -maltivec -mabi=altivec -mpowerpc-gfxopt -fsigned-char -c `test -f 'sdiff.c' || echo './'`sdiff.csdiff.c: In function `edit':sdiff.c:1098: Internal compiler error in dwarf2out_frame_debug_expr, at dwarf2out.c:1555Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://bugs.gentoo.org/> for instructions.make: *** [sdiff.o] Error 1if i remove the -mpowerpc-gfxopt flag, this goes away. i apologize if i chose the wrong category above.i'm attaching the gzip'ed .i file produced from -save-temps.Release:gcc (GCC) 3.2.1Environment:Gentoo Linux on PPCHow-To-Repeat:every time i compile sdiff from diffutils-2.8.4 with the above flags, i get the ICE.",RESOLVED          FIXED      
8795,Aldy Hernandez,[PPC] Altivec related bugs concerning gcc 3.3 and mainline,"1) The compiler crashes with segmentation fault when compiling simple Altivec and C++ code. This bug is present in 3.2(release), 3.2.1(release), 3.3(latest form gcc cvs, 1Dec2002). The example is in test.cpp2) This bug applies only to g++(gcc -xc++), only for the 3.3 (latest source from CVS) current stage. When initializing vector values, the compiler will report:error: brace-enclosed initializer used to initialize 'vector ...'the example test.cpp illustartes this problem also.Note that the second bug applies only to g++3.3Release:3.2.1(1 bug), 3.3(2 bugs)Environment:powerpc-yellowdog-linux-gnu(yellowdog 2.3), binutils 2.13How-To-Repeat:g++ -maltivec -static -otest test.cpporgcc -xc++ -maltivec -static -otest test.cpp",RESOLVED          FIXED      
10404,Aldy Hernandez,[PPC] gcc does not use 0 when using the indexed instructions of altivec like stewx,"compile the follow source with gcc testaltivect1.c -include altivec.h -maltivec -O3 and see that there is `li r2, 0` which is useless.int f(int a, int *c, vector signed int v1) {    vec_ste(v1, 0, c);    return a;}comes out:_f:        li r5,0        stvewx v2,r5,r4        blrwhen it is faster and smaller to do this:_f:        stvewx v2,0,r4        blrRelease:GNU C version 3.4 20030412 (experimental)Environment:powerpc-apple-darwin6.5How-To-Repeat:See Description",RESOLVED          FIXED      
7277,Aldy Hernandez,Casting integers to vector types causes internal compiler error,"Casting integers into vector types (of the same size) causesinternal compiler errors.  The following illustrates what happenswhen casting from a constant integer (code shown in How-To-Repeat):##############################################################################$ gcc -v -c -mmmx cast.cReading specs from /usr/local/gcc-3.1/lib/gcc-lib/i686-pc-linux-gnu/3.1/specsConfigured with: /local/build/gcc/gcc-3.1/configure --prefix=/usr/local/gcc-3.1 --enable-languages=c --disable-nlsThread model: singlegcc version 3.1 /usr/local/gcc-3.1/lib/gcc-lib/i686-pc-linux-gnu/3.1/cc1 -lang-c -v -D__GNUC__=3 -D__GNUC_MINOR__=1 -D__GNUC_PATCHLEVEL__=0 -D__ELF__ -Dunix -D__gnu_linux__ -Dlinux -D__ELF__ -D__unix__ -D__gnu_linux__ -D__linux__ -D__unix -D__linux -Asystem=posix -D__NO_INLINE__ -D__STDC_HOSTED__=1 -Acpu=i386 -Amachine=i386 -Di386 -D__i386 -D__i386__ -D__tune_i686__ -D__tune_pentiumpro__ cast.c -quiet -dumpbase cast.c -mmmx -version -o /tmp/cc2ubmWE.sGNU CPP version 3.1 (cpplib) (i386 Linux/ELF)GNU C version 3.1 (i686-pc-linux-gnu)	compiled by GNU C version 3.1.ignoring nonexistent directory ""/usr/local/gcc-3.1/i686-pc-linux-gnu/include""#include ""..."" search starts here:#include <...> search starts here: /usr/local/include /usr/local/gcc-3.1/include /usr/local/gcc-3.1/lib/gcc-lib/i686-pc-linux-gnu/3.1/include /usr/includeEnd of search list.cast.c: In function `null':cast.c:6: Internal compiler error in output_constant_pool, at varasm.c:4064Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.##############################################################################When casting from a non-volatile variable, a new ICE appears ifand only if optimization is enabled:Internal compiler error in subst, at combine.c:3546This ICE will also manifest itself if one tries to trick thecompiler by using a union of ""long long"" and ""v8qi"", assigningto the ""long long"" variable and returning the ""v8qi"" variable.Again, the ICE only appears when optimization is enabled.Release:3.1Environment:System: Linux s 2.4.18 #2 Thu Jun 6 00:23:32 CEST 2002 i686 unknownDistribution: Slackware 8.1Architecture: i686host: i686-pc-linux-gnubuild: i686-pc-linux-gnutarget: i686-pc-linux-gnuconfigured with: /local/build/gcc/gcc-3.1/configure --prefix=/usr/local/gcc-3.1 --enable-languages=c --disable-nlsHow-To-Repeat:# 1 ""cast.c""typedef int v8qi __attribute__ ((mode(V8QI)));v8qi null(void){        return (v8qi) 0LL;}",RESOLVED          FIXED      
10177,Aldy Hernandez,VRsave mask wrong,"The VRsave mask generated for the attached code should 0x80000000 (register v0 is the only vector register used).int f(int a, int b) {        if (a<b) {                vector signed int v1;                vec_ste(v1, 0, &a);                return a;        }        else {                return a;        }}instead I get this:_f:        mfspr   r5,VRsave        oris    r2,r5,0xdfff        stw     r5,0xfff8(r1)        ori     r0,r2,0xf000        mtspr   VRsave,r0        cmpw    r3,r4        or      r0,r3,r3        stw     r3,0x18(r1)        bge     0x34        li      r4,0x0        addi    r3,r1,0x18        stvewx  v0,r4,r3        lwz     r0,0x18(r1)        or      r3,r0,r0        lwz     r6,0xfff8(r1)        mtspr   VRsave,r6        blrRelease:gcc version 3.4 20030320 (experimental)Environment:powerpc-apple-darwin6.4How-To-Repeat:gcc -O3 -maltivec test.c -include altivec.h -c -Wa,-force_cpusubtype_ALL -v",RESOLVED          FIXED      
9361,Aldy Hernandez,[powerpc-linux] GCC 3.2.1 Boostrap stage 2 compile error (corrections),"(This is a new report of my previously reported bug, 9312, with corrections. I appologise for the inconvenience)Stage 2 compilation stops with an error message (verbose output at the bottom of this desrcription):/usr/local/src/gcc-3.2/gcc-3.2.1/gcc/libgcc2.c: In function `__floatdidf':/usr/local/src/gcc-3.2/gcc-3.2.1/gcc/libgcc2.c:1054: internal error: Illegal instructionThis error occurs when ""--enable-altivec"" is given. I am not sure if its only induced when enabling the language C or not as indicated in my previous report../xgcc -B./ -B/usr/local/powerpc-unknown-linux-gnu/bin/ -isystem /usr/local/powerpc-unknown-linux-gnu/include -isystem /usr/local/powerpc-unknown-linux-gnu/sys-include -O2  -DIN_GCC    -W -Wall -Wwrite-strings -Wstrict-prototypes -Wmissing-prototypes -isystem ./include  -fPIC -g -DHAVE_GTHR_DEFAULT -DIN_LIBGCC2 -D__GCC_FLOAT_NOT_NEEDED  -I. -I. -I/usr/local/src/gcc-3.2/gcc-3.2.1/gcc -I/usr/local/src/gcc-3.2/gcc-3.2.1/gcc/. -I/usr/local/src/gcc-3.2/gcc-3.2.1/gcc/config -I/usr/local/src/gcc-3.2/gcc-3.2.1/gcc/../include  -fPIC -mstrict-align -DL_ucmpdi2 -c /usr/local/src/gcc-3.2/gcc-3.2.1/gcc/libgcc2.c -o libgcc/./_ucmpdi2.o./xgcc -B./ -B/usr/local/powerpc-unknown-linux-gnu/bin/ -isystem /usr/local/powerpc-unknown-linux-gnu/include -isystem /usr/local/powerpc-unknown-linux-gnu/sys-include -O2  -DIN_GCC    -W -Wall -Wwrite-strings -Wstrict-prototypes -Wmissing-prototypes -isystem ./include  -fPIC -g -DHAVE_GTHR_DEFAULT -DIN_LIBGCC2 -D__GCC_FLOAT_NOT_NEEDED  -I. -I. -I/usr/local/src/gcc-3.2/gcc-3.2.1/gcc -I/usr/local/src/gcc-3.2/gcc-3.2.1/gcc/. -I/usr/local/src/gcc-3.2/gcc-3.2.1/gcc/config -I/usr/local/src/gcc-3.2/gcc-3.2.1/gcc/../include  -fPIC -mstrict-align -DL_floatdidf -c /usr/local/src/gcc-3.2/gcc-3.2.1/gcc/libgcc2.c -o libgcc/./_floatdidf.o/usr/local/src/gcc-3.2/gcc-3.2.1/gcc/libgcc2.c: In function `__floatdidf':/usr/local/src/gcc-3.2/gcc-3.2.1/gcc/libgcc2.c:1054: internal error: Illegal instructionPlease submit a full bug report,with preprocessed source if appropriate.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.make[3]: *** [libgcc/./_floatdidf.o] Error 1make[3]: Leaving directory `/usr/local/src/gcc-3.2/gcc-3.2.1-objdir-altivec/gcc'make[2]: *** [stmp-multilib] Error 2make[2]: Leaving directory `/usr/local/src/gcc-3.2/gcc-3.2.1-objdir-altivec/gcc'make[1]: *** [stage2_build] Error 2make[1]: Leaving directory `/usr/local/src/gcc-3.2/gcc-3.2.1-objdir-altivec/gcc'make: *** [bootstrap] Error 2Release:gcc 3.2.1 (source release)Environment:Apple PowerBook G3, PowerPC 750, Suse Linux 7.3Compiled with GCC 3.2How-To-Repeat:objdir> /usr/local/src/gcc-3.2/gcc-3.2.1/configure --enable-threads --enable-languages=c,c++,java --enable-altivecobjdir> make bootstrap",RESOLVED          FIXED      
8878,Aldy Hernandez,[3.3 only] miscompilation with -O and SSE,"gcc produce wrong assembly when using vector instructions through built-in functions and -O. I was benchmarking pure FPU vs. SSE, so the program is aloop that multiply and add 2 vector.Release:3.2.1Environment:System: Linux dreamland 2.4.20-rc3-xfs-acpi #9 Wed Nov 27 18:01:32 CET 2002 i686 unknownArchitecture: i686	host: i686-pc-linux-gnubuild: i686-pc-linux-gnutarget: i686-pc-linux-gnuconfigured with: ../gcc/configure --prefix=/usr --enable-shared --with-slibdir=/lib --with-gnu-as --with-gnu-ld --enable-threads --enable-languages=c,c++How-To-Repeat:#include <stdio.h>int main(void) {	typedef int v4sf __attribute__ ((mode(V4SF)));	v4sf a = {2.0, 2.0, 2.0, 2.0}; 	v4sf b = {1.0, 2.0, 3.0, 4.0};	v4sf c = {0.0, 0.0, 0.0, 0.0};	v4sf d;	int i;		for(i = 0; i < 1000000; i++) {		d = __builtin_ia32_mulps(a, b);		c = __builtin_ia32_addps(c, d);	}		for (i = 0; i < 4; i++)		printf(""%f "", *(((float *)(&c)) + i));	printf(""\n"");		return 0;}Compiled with: gcc -Wall -ofloat-sse -march=athlon-xp float-sse.c itgives me the following (correct) output:kronos:~/c$ float-sse2000000.000000 4000000.000000 6000000.000000 8000000.000000Compiled with: gcc -O -Wall -ofloat-sse -march=athlon-xp float-sse.c itgives a wrong output:kronos:~/c$ float-sse8000000.000000 0.000000 0.000000 0.000000Assembly output available if needed.",RESOLVED          FIXED      
10871,Aldy Hernandez,rs6000.c,"gcc/config/rs6000/rs6000.c  function  rs6000_stack_info () calculates info_ptr->save_size, and includes info_ptr->vrsave_size twice in the computation.The attached untested patch removes one of the vrsave_size variables.Release:cvsweb top-of-tree, 3.2.3 as packaged by debian",RESOLVED          FIXED      
68167,Andrew Macleod,r229585 breaks mingw-w64 bootstrap,"Hi,The error message is:../../combined-6.0.0/gcc/ggc-common.c: In function 'void init_ggc_heuristics()':../../combined-6.0.0/gcc/ggc-common.c:822:28: error: 'GGC_MIN_EXPAND' was not declared in this scope   set_default_param_value (GGC_MIN_EXPAND, ggc_min_expand_heuristic ());                            ^../../combined-6.0.0/gcc/ggc-common.c:822:71: error: 'set_default_param_value' was not declared in this scope   set_default_param_value (GGC_MIN_EXPAND, ggc_min_expand_heuristic ());                                                                       ^../../combined-6.0.0/gcc/ggc-common.c:823:28: error: 'GGC_MIN_HEAPSIZE' was not declared in this scope   set_default_param_value (GGC_MIN_HEAPSIZE, ggc_min_heapsize_heuristic ());                            ^Looks like one of the removed headers are actually needed.",RESOLVED          FIXED      
54087,Andrew Macleod,__atomic_fetch_add does not use xadd instruction,"Compiling this codeint a;int f1(int p){  return __atomic_sub_fetch(&a, p, __ATOMIC_SEQ_CST) == 0;}int f2(int p){  return __atomic_fetch_sub(&a, p, __ATOMIC_SEQ_CST) - p == 0;}you'll see that neither function uses the xadd instruction with the lock prefix.  Instead an expensive emulation using cmpxchg is used:0000000000000000 <f1>:   0:	8b 05 00 00 00 00    	mov    0x0(%rip),%eax        # 6 <f1+0x6>			2: R_X86_64_PC32	a-0x4   6:	89 c2                	mov    %eax,%edx   8:	29 fa                	sub    %edi,%edx   a:	f0 0f b1 15 00 00 00 	lock cmpxchg %edx,0x0(%rip)        # 12 <f1+0x12>  11:	00 			e: R_X86_64_PC32	a-0x4  12:	75 f2                	jne    6 <f1+0x6>  14:	31 c0                	xor    %eax,%eax  16:	85 d2                	test   %edx,%edx  18:	0f 94 c0             	sete   %al  1b:	c3                   	retq   This implementation not only is larger, it has possibly (unlikely) unbounded cost and even if the cmpxchg succeeds right away it is costlier.  The last point is esepcially true if the cache line for the variable in question is not in the core's cache.  In this case the initial load causes a I->S transition for the cache line and the cmpxchg an additional and possibly also very expensive S->E transition.  Using xadd would cause a I->E transition.The config/i386/sync.md file in the current tree contains a pattern for atomic_fetch_add which does use xadd but it seems not to be used, even if instead of the function parameter an immediate value is used.;; For operand 2 nonmemory_operand predicate is used instead of;; register_operand to allow combiner to better optimize atomic;; additions of constants.(define_insn ""atomic_fetch_add<mode>""  [(set (match_operand:SWI 0 ""register_operand"" ""=<r>"")        (unspec_volatile:SWI          [(match_operand:SWI 1 ""memory_operand"" ""+m"")           (match_operand:SI 3 ""const_int_operand"")]            ;; model          UNSPECV_XCHG))   (set (match_dup 1)        (plus:SWI (match_dup 1)                  (match_operand:SWI 2 ""nonmemory_operand"" ""0"")))   (clobber (reg:CC FLAGS_REG))]  ""TARGET_XADD""  ""lock{%;} %K3xadd{<imodesuffix>}\t{%0, %1|%1, %0}"")X86_ARCH_XADD should be defined for every architecture but i386.",RESOLVED          FIXED      
54861,Andrew Macleod,std::atomic_signal_fence(std::memory_order_seq_cst) issues unnecessary mfence,"Created attachment 28394 [details]Preprocessed source#include <atomic>void f() { std::atomic_signal_fence(std::memory_order_seq_cst); }f():.LFB321:        .cfi_startproc        mfence # <== unnecessary mfence        ret        .cfi_endprocThe reason is that std::atomic_signal_fence() (in bits/atomic_base.h) simply calls std::atomic_thread_fence(), where mfence is indeed necessary.C++11 29.8.8 says:extern ""C"" void atomic_signal_fence(memory_order order) noexcept;Eﬀects: equivalent to atomic_thread_fence(order), except that the resulting ordering constraints are established only between a thread and a signal handler executed in the same thread.8 Note: compiler optimizations and reorderings of loads and stores are inhibited in the same way as with atomic_thread_fence, but the hardware fence instructions that atomic_thread_fence would have inserted are not emitted.C11 7.17.4.2 has an identical language.===============================$ g++-4.7 -v -save-temps --std=c++0x -O2 -c atomic_fences.cpp  Using built-in specs.COLLECT_GCC=g++-4.7Target: x86_64-linux-gnuConfigured with: ../src/configure -v --with-pkgversion='Ubuntu/Linaro 4.7.0-7ubuntu3' --with-bugurl=file:///usr/share/doc/gcc-4.7/README.Bugs --enable-languages=c,c++,go,fortran,objc,obj-c++ --prefix=/usr --program-suffix=-4.7 --enable-shared --enable-linker-build-id --with-system-zlib --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.7 --libdir=/usr/lib --enable-nls --disable-bootstrap --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --enable-gnu-unique-object --enable-plugin --enable-objc-gc --disable-werror --with-arch-32=i686 --with-tune=generic --enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnuThread model: posixgcc version 4.7.0 (Ubuntu/Linaro 4.7.0-7ubuntu3) COLLECT_GCC_OPTIONS='-v' '-save-temps' '-std=c++11' '-O2' '-c' '-shared-libgcc' '-mtune=generic' '-march=x86-64' /usr/lib/gcc/x86_64-linux-gnu/4.7/cc1plus -E -quiet -v -imultiarch x86_64-linux-gnu -D_GNU_SOURCE atomic_fences.cpp -mtune=generic -march=x86-64 -std=c++11 -O2 -fpch-preprocess -fstack-protector -o atomic_fences.iiignoring nonexistent directory ""/usr/local/include/x86_64-linux-gnu""ignoring nonexistent directory ""/usr/lib/gcc/x86_64-linux-gnu/4.7/../../../../x86_64-linux-gnu/include""#include ""..."" search starts here:#include <...> search starts here: /usr/include/c++/4.7 /usr/include/c++/4.7/x86_64-linux-gnu /usr/include/c++/4.7/backward /usr/lib/gcc/x86_64-linux-gnu/4.7/include /usr/local/include /usr/lib/gcc/x86_64-linux-gnu/4.7/include-fixed /usr/include/x86_64-linux-gnu /usr/includeEnd of search list.COLLECT_GCC_OPTIONS='-v' '-save-temps' '-std=c++11' '-O2' '-c' '-shared-libgcc' '-mtune=generic' '-march=x86-64' /usr/lib/gcc/x86_64-linux-gnu/4.7/cc1plus -fpreprocessed atomic_fences.ii -quiet -dumpbase atomic_fences.cpp -mtune=generic -march=x86-64 -auxbase atomic_fences -O2 -std=c++11 -version -fstack-protector -o atomic_fences.sGNU C++ (Ubuntu/Linaro 4.7.0-7ubuntu3) version 4.7.0 (x86_64-linux-gnu)	compiled by GNU C version 4.6.3, GMP version 5.0.2, MPFR version 3.1.0-p3, MPC version 0.9GGC heuristics: --param ggc-min-expand=100 --param ggc-min-heapsize=131072GNU C++ (Ubuntu/Linaro 4.7.0-7ubuntu3) version 4.7.0 (x86_64-linux-gnu)	compiled by GNU C version 4.6.3, GMP version 5.0.2, MPFR version 3.1.0-p3, MPC version 0.9GGC heuristics: --param ggc-min-expand=100 --param ggc-min-heapsize=131072Compiler executable checksum: 33e4f0c75e4f7f1ac5eae22180dee261COLLECT_GCC_OPTIONS='-v' '-save-temps' '-std=c++11' '-O2' '-c' '-shared-libgcc' '-mtune=generic' '-march=x86-64' as --64 -o atomic_fences.o atomic_fences.sCOMPILER_PATH=/usr/lib/gcc/x86_64-linux-gnu/4.7/:/usr/lib/gcc/x86_64-linux-gnu/4.7/:/usr/lib/gcc/x86_64-linux-gnu/:/usr/lib/gcc/x86_64-linux-gnu/4.7/:/usr/lib/gcc/x86_64-linux-gnu/LIBRARY_PATH=/usr/lib/gcc/x86_64-linux-gnu/4.7/:/usr/lib/gcc/x86_64-linux-gnu/4.7/../../../x86_64-linux-gnu/:/usr/lib/gcc/x86_64-linux-gnu/4.7/../../../../lib/:/lib/x86_64-linux-gnu/:/lib/../lib/:/usr/lib/x86_64-linux-gnu/:/usr/lib/../lib/:/usr/lib/gcc/x86_64-linux-gnu/4.7/../../../:/lib/:/usr/lib/COLLECT_GCC_OPTIONS='-v' '-save-temps' '-std=c++11' '-O2' '-c' '-shared-libgcc' '-mtune=generic' '-march=x86-64'",RESOLVED          FIXED      
51040,Andrew Macleod,"ICE: RTL check: access of elt 1 of 'not' with last elt 0 in gen_rtx_fmt_ee_stat, at ./genrtl.h:33 with __atomic_nand_fetch()","Created attachment 25759 [details]reduced testcaseCompiler output:$ gcc testcase.c testcase.c: In function 'foo':testcase.c:6:30: internal compiler error: RTL check: access of elt 1 of 'not' with last elt 0 in gen_rtx_fmt_ee_stat, at ./genrtl.h:33Please submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.RTL checking might be needed to reproduce this.Tested revisions:r181174 - crash",RESOLVED          FIXED      
37102,Andrew Macleod,[4.3 Regression] out-of-SSA is broken,"This is for svn 139046 on Ubuntu Hardy.regehr@john-home:~/volatile/tmp0$ current-gcc -O -Wall -fwrapv small.c -o smallregehr@john-home:~/volatile/tmp0$ ./small5regehr@john-home:~/volatile/tmp0$ current-gcc -O3 -Wall -fwrapv small.c -o smallregehr@john-home:~/volatile/tmp0$ ./small0regehr@john-home:~/volatile/tmp0$ current-gcc -vUsing built-in specs.Target: i686-pc-linux-gnuConfigured with: ../configure --program-prefix=current- --enable-languages=c,c++ --prefix=/home/regehrThread model: posixgcc version 4.4.0 20080813 (experimental) (GCC) regehr@john-home:~/volatile/tmp0$ cat small.c#include <stdio.h>unsigned int g_24;unsigned int g_37 = 1;unsigned char g_225;int main (void){  int l_289;  for (l_289 = 1; l_289 < 5; l_289 += 1) {    if (g_225) {      g_24 = g_37;    }  }  g_24 = g_37;  unsigned short context = g_24 << 1;  do {    if (context)      context = (context << 1) ^ 1;  } while (0);  printf (""%d\n"", (int)context);  return 0;}",RESOLVED          FIXED      
37567,Andrew Macleod,tree SSA to normal checking takes abnormally long time,"When configured withConfigured with: ../../mainline/configure --with-gmp=/pkgs/gmp-4.2.2/ --with-mpfr=/pkgs/gmp-4.2.2/ --prefix=/pkgs/gcc-mainline --enable-gather-detailed-mem-statsand run on the testcase of PR 26854 with/pkgs/gcc-mainline/bin/gcc -Wall -W -Wno-unused -O1 -fno-math-errno -fschedule-insns2 -fno-trapping-math -fno-strict-aliasing -fwrapv -fomit-frame-pointer -fPIC -ftime-report -fmem-report -c all.i >>& mainline-stats-2008-09-17-cone line stands out: tree SSA to normal    : 485.81 (61%) usr   0.12 ( 0%) sys 486.01 (59%) wall   93945 kB (12%) ggc TOTAL                 : 793.99            24.78           819.45             795105 kBwithout checking, this is tree SSA to normal    :  13.31 ( 8%) usr   0.10 ( 1%) sys  13.42 ( 7%) wall   93945 kB (12%) ggc TOTAL                 : 168.33            14.57           183.12             794201 kBThe timings of other parts of a checking-enabled compiler seem reasonable.",RESOLVED          FIXED      
29877,Andrew Macleod,[4.1 Regression] out of SSA (TER) extends variable life of variable beyond original declared,There is a bug on the tree optimization code generated by gcc that produces corruption of variables on some corner cases of code generated by Linux kernel for ARM. I originally found the bug on codesourcery releases but was able to reproduced it on gcc 4.1 that I builded.Detailed explanation and some insights from codesourcery guys can be found at this mail thread:http://www.codesourcery.com/archives/arm-gnu/msg00961.htmlThe example code that triggers the bug is found there too.,RESOLVED          FIXED      
30159,Andrew Macleod,[4.3 Regression] gcc.c-torture/execute/20010422-1.c is miscompiled,"On sh-elf, the function foo in 20010422-1.cunsigned int foo(unsigned int x){  if (x < 5)    x = 4;  else    x = 8;  return x;}is compiled tofoo:        mov.l   r14,@-r15        mov     r15,r14        mov     #4,r1        cmp/hi  r1,r1        bf/s    .L6        mov     #4,r0        mov     #8,r0.L6:        mov     r14,r15        mov.l   @r15+,r14        rts        nopwith -O1.  Thus the first parameter register r4 is ignored.For mips-elf, foo is assembled tofoo:        .frame  $sp,0,$31               # vars= 0, regs= 0/0, args= 0, gp= 0        .mask   0x00000000,0        .fmask  0x00000000,0        .set    noreorder        .set    nomacro        sltu    $2,$2,5        beq     $2,$0,$L2        nop	...with -O1 where $4 should be register for x.It started after the patchr119711 | amacleod | 2006-12-11 06:25:40 +0900 (Mon, 11 Dec 2006) | 103 linesand the first tree dump which differs before and after this patchis .099t.optimized:[r119710 .099t.optimized];; Function foo (foo)Analyzing Edge Insertions.foo (x){  unsigned int x.24;<bb 2>:  if (x <= 4) goto <L5>; else goto <L4>;<L5>:;  x.24 = 4;  goto <bb 4> (<L2>);<L4>:;  x.24 = 8;<L2>:;  return x.24;}[r119711 .099t.optimized];; Function foo (foo)Analyzing Edge Insertions.foo (x){  unsigned int x.24;<bb 2>:  if (x.24 <= 4) goto <L5>; else goto <L4>;<L5>:;  x = 4;  goto <bb 4> (<L2>);<L4>:;  x = 8;<L2>:;  return x;}",RESOLVED          FIXED      
27381,Andrew Macleod,[4.2 Regression] ice on valid code with -O,"I just tried to compile Suse package gnome-print-0.37-18 with a recentGNU C compiler version 4.2 snapshot 20060429. The compiler snapshot saidif gcc -DHAVE_CONFIG_H -I. -I. -I.. -I.. -I.. -I/usr/include/freetype2 -I/opt/gnome/include/gnome-1.0 -DNEED_GNOMESUPPORT_H -I/opt/gnome/lib64/gnome-libs/include -I/opt/gnome/include -I/opt/gnome/include/gtk-1.2 -I/opt/gnome/include/glib-1.2 -I/opt/gnome/lib64/glib/include -I/usr/X11R6/include -I/opt/gnome/include/gdk-pixbuf-1.0 -I/usr/include/gnome-xml                       -DGNOMELOCALEDIR=\""""/opt/gnome/share/locale""\"" -DBINDIR=\""""/opt/gnome/bin""\"" -DDATADIR=\""""/opt/gnome/share""\"" -DSYSCONFDIR=\""""/etc/opt/gnome""\"" -DLIBDIR=\""""/opt/gnome/lib64""\"" -DFONTMAPDIR_STATIC=\""""/opt/gnome/share/gnome/fonts""\"" -DFONTMAPDIR_DYNAMIC=\""""/etc/opt/gnome/gnome/fonts""\"" -DVERSION=\""""0.37""\""  -O2 -g -fmessage-length=0 -D_FORTIFY_SOURCE=2 -MT gf-fontmap.o -MD -MP -MF "".deps/gf-fontmap.Tpo"" -c -o gf-fontmap.o gf-fontmap.c; \then mv -f "".deps/gf-fontmap.Tpo"" "".deps/gf-fontmap.Po""; else rm -f "".deps/gf-fontmap.Tpo""; exit 1;figf-fontmap.c: In function 'gf_fontmap_load_file':gf-fontmap.c:257: internal compiler error: in propagate_rhs_into_lhs, at tree-ssa-dom.c:2307Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.Preprocessed source code attached.  Flag -O2 required.",RESOLVED          FIXED      
24709,Andrew Macleod,[4.1 Regression] 4.1.0 HEAD crashes with enable-checking on huge switch statement,"When running ""g++ -O1 -c t3.cc"" on the attached preprocessed C++ source file with 4.1.0 HEAD as of 2005-11-07 with enable-checking I get the error message as attached.The problem does neither happen with diable-checking nor with -O0. It does happen with enable-checking and all optimization levels greater or equal -O1.Switching all optimizations manually on that are mentioned within the info page as -O1 optimizations doesn't trigger the problem as well but running with -O1 and then switching all optimizations off that are mentioned for -O1 in the info page does still trigger the problem thus the cause of the problem must be something that -O1 switches on but not the things mentioned in the info page.",RESOLVED          FIXED      
21430,Andrew Macleod,[4.1 Regression] Quadratic behavior with constant initializers,"Consider:#define B1(C,D)								\  B0(C##0,D##0) B0(C##1,D##0) B0(C##2,D##0) B0(C##3,D##0) B0(C##4,D##0)	\  B0(C##5,D##0) B0(C##6,D##0) B0(C##7,D##0) B0(C##8,D##0) B0(C##9,D##0)#define B2(C,D)								\  B1(C##0,D##0) B1(C##1,D##0) B1(C##2,D##0) B1(C##3,D##0) B1(C##4,D##0)	\  B1(C##5,D##0) B1(C##6,D##0) B1(C##7,D##0) B1(C##8,D##0) B1(C##9,D##0)#define B3(C,D)								\  B2(C##0,D##0) B2(C##1,D##0) B2(C##2,D##0) B2(C##3,D##0) B2(C##4,D##0)	\  B2(C##5,D##0) B2(C##6,D##0) B2(C##7,D##0) B2(C##8,D##0) B2(C##9,D##0)#define B4(C,D)								\  B3(C##0,D##0) B3(C##1,D##0) B3(C##2,D##0) B3(C##3,D##0) B3(C##4,D##0)	\  B3(C##5,D##0) B3(C##6,D##0) B3(C##7,D##0) B3(C##8,D##0) B3(C##9,D##0)#define B0(C,D) C,const int a[] = { B4(1,1) 0 };#undef B0void bar (int);voidfoo (void){#define B0(C,D) bar(a[C-D]);  B4(1,1);#undef B0}Change B4(1,1) to B3(1,1), B2(1,1), etc.  You'll get quadratic behavior.On my machine,B1    10 elements  0.097sB2   100 elements  0.094sB3  1000 elements  1.373sB4 10000 elements 41.816sI'm pretty sure the quadratic behavior comes from the ARRAY_REF case ofexpand_expr_real_1.",RESOLVED          FIXED      
16447,Andrew Macleod,out of ssa generates bloated code,"The the .tailc dump for the function combine.c:cant_combine_insn_plooks like this: [snip]<L23>:;  T.150_24 = dest_5->u.fld[0].rtuint;  if (T.150_24 > 52) goto <L35>; else goto <L24>;<L24>:;  T.151_26 = fixed_regs[T.150_24];  if (T.151_26 != 0) goto <L35>; else goto <L25>;<L25>:;  T.152_29 = regclass_map[T.150_24];  T.153_30 = T.152_29 - 1;  if (T.153_30 <= 3) goto <L35>; else goto <L26>;<L26>:;  if (T.152_29 == 7) goto <L35>; else goto <L27>;<L27>:;  if (T.152_29 == 5) goto <L35>; else goto <L28>;<L28>:;  if (T.152_29 == 6) goto <L35>; else goto <L29>;<L29>:;  if (T.152_29 == 13) goto <L35>; else goto <L30>;<L30>:;  if (T.152_29 == 14) goto <L31>; else goto <L35>;<L31>:;  # T.139_1 = PHI <0(7), 1(25), 0(2), 1(0), 0(24), 0(8), 1(23), 1(22), 1(21),1(20), 1(19), 0(18), 0(17), 1(16), 1(15), 1(14), 1(13), 1(12), 1(11)>;<L35>:;  return T.139_1;Note the return value T.139_1The .optimized dump looks like: [snip]<L75>:;  T.139 = 1;  goto <bb 26> (<L35>);<L27>:;  if (T.152 == 5) goto <L76>; else goto <L28>;<L76>:;  T.139 = 1;  goto <bb 26> (<L35>);<L28>:;  if (T.152 == 6) goto <L77>; else goto <L29>;<L77>:;  T.139 = 1;  goto <bb 26> (<L35>);<L29>:;  if (T.152 == 13) goto <L78>; else goto <L30>;<L78>:;  T.139 = 1;  goto <bb 26> (<L35>);<L30>:;  if (T.152 == 14) goto <L31>; else goto <L79>;<L79>:;  T.139 = 0;  goto <bb 26> (<L35>);<L31>:;  T.139 = 1;<L35>:;  return T.139;Not that T.139 is assigned 1 in a lot of BBs, followed by a jumb to the returnstatement. The code would be much smaller if there was a only 1 assignment that all the ifsjump to.",RESOLVED          FIXED      
17517,Andrew Macleod,[4.0 Regression] ICE: SSA corruption,"$ g++ --version g++ (GCC) 4.0.0 20040915 (experimental) Copyright (C) 2004 Free Software Foundation, Inc. This is free software; see the source for copying conditions.  There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  $ g++ -O t.cc  Different root vars: checker$ptr and p across an abnormal edge from BB3->BB6 t.cc: In function `void pipe()': t.cc:25466: internal compiler error: SSA corruption  The test case, which I'll attach soon, comes from aspell.  I've tried to reduce the test case to something manageable, though probably some more C++-savvy bug master can reduce it a lot further...",RESOLVED          FIXED      
17400,Andrew Macleod,[4.0 Regression] out of SSA corruption,"I'm seeing this ICE on ia64 and amd64 at least.  $ g++ --version g++ (GCC) 3.5.0 20040909 (experimental) Copyright (C) 2004 Free Software Foundation, Inc. This is free software; see the source for copying conditions.  There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  $ g++ -O3 -c t.ii  Different root vars: <D17229> and <D17231> across an abnormal edge from BB446->BB564 t.ii: In member function `void COWIntrusiveReferenceTestCases::n_swap()': t.ii:18074: internal compiler error: SSA corruption   If anyone can reduce this to a manageable test case, would be much appreciated.  *sigh*  That is so hard to do for C++ :-(",RESOLVED          FIXED      
79663,bin cheng,[7 Regression] r244815 causes 10% regression for spec1k/172.mgrid on AArch64,"Change @r244815 causes 10% regression for spec1k/172.mgrid on AArch64.  Hot loop in resid_ is unrolled by factor=2 now in predcom, which causes bad IVOPT and increased register pressure.Mine.",RESOLVED          FIXED      
80884,bin cheng,[8 regression] test case gcc.target/powerpc/20050830-1.c fails starting with r247886,"This test fails on power6 (BE obviously) but still works on power7 and later.  The test case is looking for a specific assembler instructionspawn -ignore SIGHUP /home/seurer/gcc/build/gcc-trunk-p6/gcc/xgcc -B/home/seurer/gcc/build/gcc-trunk-p6/gcc/ /home/seurer/gcc/gcc-trunk-p6/gcc/testsuite/gcc.target/powerpc/20050830-1.c -fno-diagnostics-show-caret -fdiagnostics-color=never -O2 -ffat-lto-objects -S -o 20050830-1.sPASS: gcc.target/powerpc/20050830-1.c (test for excess errors)FAIL: gcc.target/powerpc/20050830-1.c scan-assembler bdnand the assembler output changed like this from r247885 to r247886:seurer@makalu-lp1:~/gcc/build/gcc-test$ diff 20050830-1.s.old 20050830-1.s.new19,30c19,29< 	addis 10,2,.LC0@toc@ha< 	addi 9,3,-512< 	rldicl 9,9,56,40< 	addi 9,9,1< 	ld 8,.LC0@toc@l(10)< 	addi 10,3,-256< 	sldi 3,3,2< 	cmpwi 7,10,256< 	mtctr 9< 	add 3,3,8< 	li 9,42< 	blt 7,.L7---> 	addis 9,2,.LC0@toc@ha> 	addi 10,3,-512> 	rlwinm 10,10,0,0,23> 	subf 10,10,3> 	ld 8,.LC0@toc@l(9)> 	sldi 10,10,2> 	sldi 9,3,2> 	addi 7,8,-1024> 	add 9,9,8> 	add 10,10,7> 	li 8,4233,35c32,35< 	stw 9,0(3)< 	addi 3,3,-1024< 	bdnz .L3---> 	stw 8,0(9)> 	addi 9,9,-1024> 	cmpld 7,9,10> 	bne 7,.L338,41d37< .L7:< 	li 10,1< 	mtctr 10< 	b .L345c41< 	.ident	""GCC: (GNU) 8.0.0 20170511 (experimental) [trunk revision 247885]""---> 	.ident	""GCC: (GNU) 8.0.0 20170511 (experimental) [trunk revision 247886]""When I tried it with a compiler built for power7 there was no difference is the assembly before/after this revision.",RESOLVED          FIXED      
83320,bin cheng,Mismatched free() / delete / delete []  in gimple-loop-interchange.cc:948,"Building libgfortran with -O3 shows:==20156== Mismatched free() / delete / delete []                                                                                                                                   ==20156==    at 0x402E246: free (vg_replace_malloc.c:530)                                                                                                                          ==20156==    by 0x129DB9F: free_data_refs_with_aux (gimple-loop-interchange.cc:948)                                                                                                ==20156==    by 0x129DB9F: (anonymous namespace)::pass_linterchange::execute(function*) (gimple-loop-interchange.cc:2023)                                                          ==20156==    by 0xAE0761: execute_one_pass(opt_pass*) (passes.c:2497)                                                                                                              ==20156==    by 0xAE13F4: execute_pass_list_1 (passes.c:2586)                                                                                                                      ==20156==    by 0xAE13F4: execute_pass_list_1 (passes.c:2587)                                                                                                                      ==20156==    by 0xAE13F4: execute_pass_list_1 (passes.c:2587)                                                                                                                      ==20156==    by 0xAE13F4: execute_pass_list(function*, opt_pass*) (passes.c:2597)                                                                                                  ==20156==    by 0x8179F4: cgraph_node::expand() (cgraphunit.c:2139)                                                                                                                ==20156==    by 0x818AA2: expand_all_functions (cgraphunit.c:2275)                                                                                                                 ==20156==    by 0x818AA2: symbol_table::compile() [clone .part.71] (cgraphunit.c:2623)                                                                                             ==20156==    by 0x81AEA1: compile (cgraphunit.c:2537)                                                                                                                              ==20156==    by 0x81AEA1: symbol_table::finalize_compilation_unit() (cgraphunit.c:2716)                                                                                            ==20156==    by 0xBC5D67: compile_file() (toplev.c:480)                                                                                                                            ==20156==    by 0x6C4692: do_compile (toplev.c:2059)                                                                                                                               ==20156==    by 0x6C4692: toplev::main(int, char**) (toplev.c:2194)                                                                                                                ==20156==    by 0x6C61DA: main (main.c:39)                                                                                                                                         ==20156==  Address 0x5d4a8a0 is 0 bytes inside a block of size 8 alloc'd                                                                                                           ==20156==    at 0x402D6F8: operator new(unsigned long) (vg_replace_malloc.c:334)                                                                                                   ==20156==    by 0x129DD64: compute_access_stride (gimple-loop-interchange.cc:1283)                                                                                                 ==20156==    by 0x129DD64: compute_access_strides (gimple-loop-interchange.cc:1341)                                                                                                ==20156==    by 0x129DD64: prepare_perfect_loop_nest (gimple-loop-interchange.cc:1958)                                                                                             ==20156==    by 0x129DD64: (anonymous namespace)::pass_linterchange::execute(function*) (gimple-loop-interchange.cc:2017)                                                          ==20156==    by 0xAE0761: execute_one_pass(opt_pass*) (passes.c:2497)                                                                                                              ==20156==    by 0xAE13F4: execute_pass_list_1 (passes.c:2586)                                                                                                                      ==20156==    by 0xAE13F4: execute_pass_list_1 (passes.c:2587)                                                                                                                      ==20156==    by 0xAE13F4: execute_pass_list_1 (passes.c:2587)                                                                                                                      ==20156==    by 0xAE13F4: execute_pass_list(function*, opt_pass*) (passes.c:2597)                                                                                                  ==20156==    by 0x8179F4: cgraph_node::expand() (cgraphunit.c:2139)                                                                                                                ==20156==    by 0x818AA2: expand_all_functions (cgraphunit.c:2275)                                                                                                                 ==20156==    by 0x818AA2: symbol_table::compile() [clone .part.71] (cgraphunit.c:2623)                                                                                             ==20156==    by 0x81AEA1: compile (cgraphunit.c:2537)                                                                                                                              ==20156==    by 0x81AEA1: symbol_table::finalize_compilation_unit() (cgraphunit.c:2716)                                                                                            ==20156==    by 0xBC5D67: compile_file() (toplev.c:480)                                                                                                                            ==20156==    by 0x6C4692: do_compile (toplev.c:2059)                                                                                                                               ==20156==    by 0x6C4692: toplev::main(int, char**) (toplev.c:2194)                                                                                                                ==20156==    by 0x6C61DA: main (main.c:39)                                                                                                                                         ==20156==",RESOLVED          FIXED      
82574,bin cheng,[8 Regression] wrong code at -O3 on x86_64-linux-gnu,"This seems to be a recent regression. $ gcctk -vUsing built-in specs.COLLECT_GCC=gcctkCOLLECT_LTO_WRAPPER=/home/su/software/tmp/gcc/gcc-trunk/libexec/gcc/x86_64-pc-linux-gnu/8.0.0/lto-wrapperTarget: x86_64-pc-linux-gnuConfigured with: ../gcc-source-trunk/configure --enable-languages=c,c++,lto --prefix=/home/su/software/tmp/gcc/gcc-trunk --disable-bootstrapThread model: posixgcc version 8.0.0 20171016 (experimental) [trunk revision 253793] (GCC) $ $ gcctk -O2 small.c; ./a.out; echo $?0$ gcc-7.2.0 -O3 small.c; ./a.out; echo $?0$ $ gcctk -O3 small.c; ./a.out; echo $?1$ -------------------------------char a, b, c, d[2][3];int main (){  for (; a < 2; a++)    for (b = 0; b < 3; b++)      if (c)        d[a][b] = 1;  return d[0][0]; }",RESOLVED          FIXED      
82472,bin cheng,"[8 Regression] ICE in generate_code_for_partition, at tree-loop-distribution.c:1145","gcc-8.0.0-alpha20171001 snapshot (r253330) ICEs when compiling the following snippet w/ -O3 or -Ofast:long int xj;intcx (long int *ox, short int mk, char tf){  int si, f9;  char *p4 = &tf;  short int *rm = (tf != 0) ? (short int *)&f9 : &mk;  for (f9 = 0; f9 < 2; ++f9)    {      *rm = 0;      *p4 = *ox;      si = mk;      xj = 0;      while (p4 < (char *)rm)        ++p4;    }  return si;}% gcc-8.0.0-alpha20171001 -O3 -c mjliuylm.cduring GIMPLE pass: ldistmjliuylm.c: In function 'cx':mjliuylm.c:4:1: internal compiler error: in generate_code_for_partition, at tree-loop-distribution.c:1145 cx (long int *ox, short int mk, char tf) ^~",RESOLVED          FIXED      
81799,bin cheng,[8 Regression] ICE on valid code at -O3: verify_gimple failed,"$ gcc-trunk -vUsing built-in specs.COLLECT_GCC=gcc-trunkCOLLECT_LTO_WRAPPER=/usr/local/gcc-trunk/libexec/gcc/x86_64-pc-linux-gnu/8.0.0/lto-wrapperTarget: x86_64-pc-linux-gnuConfigured with: ../gcc-source-trunk/configure --enable-languages=c,c++,lto --prefix=/usr/local/gcc-trunk --disable-bootstrapThread model: posixgcc version 8.0.0 20170810 (experimental) [trunk revision 251019] (GCC)$$ gcc-trunk -O2 -c small.c$$ gcc-trunk -O3 -c small.csmall.c: In function ‘fn1’:small.c:5:6: error: invalid argument to gimple call void fn1 (int h)      ^~~&e > 3B_33 = LOOP_DIST_ALIAS (4, &e > 3B);during GIMPLE pass: ldistsmall.c:5:6: internal compiler error: verify_gimple failed0xcb091b verify_gimple_in_cfg(function*, bool)        ../../gcc-source-trunk/gcc/tree-cfg.c:53100xb75202 execute_function_todo        ../../gcc-source-trunk/gcc/passes.c:19920xb75ba9 execute_todo        ../../gcc-source-trunk/gcc/passes.c:2046Please submit a full bug report,with preprocessed source if appropriate.Please include the complete backtrace with any bug report.See <https://gcc.gnu.org/bugs/> for instructions.$------------------------------------int printf (const char *, ...);int a, c[1], d, e, **f;void fn1 (int h){   int *i = 0;  for (d = 0; d < 1; d++)    {       if (d)        continue;      for (; e; e++)        {           a = c[*i];          if (h)            printf (""0"");        }      return;    }  f = &i;}",RESOLVED          FIXED      
82163,bin cheng,"[8 Regression] ICE on valid code at -O3 on x86_64-linux-gnu: in check_loop_closed_ssa_use, at tree-ssa-loop-manip.c:707","It seems to be a recent regression from 7.2.*. $ gcctk -vUsing built-in specs.COLLECT_GCC=gcctkCOLLECT_LTO_WRAPPER=/home/su/software/tmp/gcc/gcc-trunk/libexec/gcc/x86_64-pc-linux-gnu/8.0.0/lto-wrapperTarget: x86_64-pc-linux-gnuConfigured with: ../gcc-source-trunk/configure --enable-languages=c,c++,lto --prefix=/home/su/software/tmp/gcc/gcc-trunk --disable-bootstrapThread model: posixgcc version 8.0.0 20170909 (experimental) [trunk revision 251923] (GCC)$$ gcctk -O2 small.c; ./a.out$ gcc-7.2.0 -O3 small.c; ./a.out$$ gcctk -O3 small.cduring GIMPLE pass: pcomsmall.c: In function ‘h’:small.c:3:6: internal compiler error: in check_loop_closed_ssa_use, at tree-ssa-loop-manip.c:707 void h ()      ^0xdeba2d check_loop_closed_ssa_use        ../../gcc-source-trunk/gcc/tree-ssa-loop-manip.c:7060xdeea1d check_loop_closed_ssa_stmt        ../../gcc-source-trunk/gcc/tree-ssa-loop-manip.c:7220xdeea1d verify_loop_closed_ssa(bool)        ../../gcc-source-trunk/gcc/tree-ssa-loop-manip.c:7560xdf076b checking_verify_loop_closed_ssa        ../../gcc-source-trunk/gcc/tree-ssa-loop-manip.h:370xdf076b tree_transform_and_unroll_loop(loop*, unsigned int, edge_def*, tree_niter_desc*, void (*)(loop*, void*), void*)        ../../gcc-source-trunk/gcc/tree-ssa-loop-manip.c:14080xd47d8a tree_predictive_commoning_loop        ../../gcc-source-trunk/gcc/tree-predcom.c:31390xd47d8a tree_predictive_commoning()        ../../gcc-source-trunk/gcc/tree-predcom.c:3172Please submit a full bug report,with preprocessed source if appropriate.Please include the complete backtrace with any bug report.See <https://gcc.gnu.org/bugs/> for instructions.$---------------------------------------int a, b, c[4], d, e, f, g;void h (){   for (; a; a++)    {       c[a + 3] = g;      if (b)        c[a] = f;      else        {           for (; d; d++)            c[d + 3] = c[d];          for (e = 1; e == 2; e++)            ;          if (e)            break;        }    }}int main (){   h ();  return 0;}",RESOLVED          FIXED      
81913,bin cheng,[8 Regression] wrong code at -O1,"Created attachment 42020 [details]reduced testcase$ x86_64-pc-linux-gnu-gcc -O testcase.c$ ./a.outAborted$ x86_64-pc-linux-gnu-gcc -vUsing built-in specs.COLLECT_GCC=/repo/gcc-trunk/binary-latest-amd64/bin/x86_64-pc-linux-gnu-gccCOLLECT_LTO_WRAPPER=/repo/gcc-trunk/binary-trunk-251215-checking-yes-rtl-df-extra-nographite-amd64/bin/../libexec/gcc/x86_64-pc-linux-gnu/8.0.0/lto-wrapperTarget: x86_64-pc-linux-gnuConfigured with: /repo/gcc-trunk//configure --enable-languages=c,c++ --enable-valgrind-annotations --disable-nls --enable-checking=yes,rtl,df,extra --without-cloog --without-ppl --without-isl --build=x86_64-pc-linux-gnu --host=x86_64-pc-linux-gnu --target=x86_64-pc-linux-gnu --with-ld=/usr/bin/x86_64-pc-linux-gnu-ld --with-as=/usr/bin/x86_64-pc-linux-gnu-as --disable-libstdcxx-pch --prefix=/repo/gcc-trunk//binary-trunk-251215-checking-yes-rtl-df-extra-nographite-amd64Thread model: posixgcc version 8.0.0 20170821 (experimental) (GCC) All tested targets are affected (not x86 specific).",RESOLVED          FIXED      
81744,bin cheng,"[8 Regression] ICE: verify_ssa failed, at tree-ssa.c:1186","Created attachment 41942 [details]Preprocessed output created with -freport-bug[jamrial@ArchVM ~]$ gcc -fno-math-errno -O3 -c ccV0zFt3.isrc/libavfilter/af_compand.c: In function ‘config_output’:src/libavfilter/af_compand.c:328:12: error: definition in block 78 follows the usefor SSA_NAME: _519 in statement:_126 = _519 + 4294967291;during GIMPLE pass: pcomsrc/libavfilter/af_compand.c:328:12: internal compiler error: verify_ssa failed0xdb534b verify_ssa(bool, bool)        /home/jamrial/gcc-svn/gcc/tree-ssa.c:11860xa99527 execute_function_todo        /home/jamrial/gcc-svn/gcc/passes.c:19970xa9a442 execute_todo        /home/jamrial/gcc-svn/gcc/passes.c:2044Please submit a full bug report,with preprocessed source if appropriate.Please include the complete backtrace with any bug report.See <https://gcc.gnu.org/bugs/> for instructions.[jamrial@ArchVM ~]$ gcc -fno-math-errno -fno-tree-vectorize -O3 -c ccV0zFt3.isrc/libavfilter/af_compand.c: In function ‘config_output’:src/libavfilter/af_compand.c:328:12: error: definition in block 83 follows the usefor SSA_NAME: _618 in statement:_611 = _618 + 4294967291;during GIMPLE pass: pcomsrc/libavfilter/af_compand.c:328:12: internal compiler error: verify_ssa failed0xdb534b verify_ssa(bool, bool)        /home/jamrial/gcc-svn/gcc/tree-ssa.c:11860xa99527 execute_function_todo        /home/jamrial/gcc-svn/gcc/passes.c:19970xa9a442 execute_todo        /home/jamrial/gcc-svn/gcc/passes.c:2044Please submit a full bug report,with preprocessed source if appropriate.Please include the complete backtrace with any bug report.See <https://gcc.gnu.org/bugs/> for instructions.Doesn't crash if i remove either -fno-math-errno or -O3. Adding -fno-tree-vectorize only changes the contents of the SSA_NAME error.This seems to be a regression introduced sometime during the past week.",RESOLVED          FIXED      
81627,bin cheng,"[8 Regression] ICE on valid code at -O3: in check_loop_closed_ssa_use, at tree-ssa-loop-manip.c:707","$ gcc-trunk -vUsing built-in specs.COLLECT_GCC=gcc-trunkCOLLECT_LTO_WRAPPER=/usr/local/gcc-trunk/libexec/gcc/x86_64-pc-linux-gnu/8.0.0/lto-wrapperTarget: x86_64-pc-linux-gnuConfigured with: ../gcc-source-trunk/configure --enable-languages=c,c++,lto --prefix=/usr/local/gcc-trunk --disable-bootstrapThread model: posixgcc version 8.0.0 20170731 (experimental) [trunk revision 250725] (GCC)$$ gcc-trunk -O2 small.c; ./a.out$$ gcc-trunk -O3 small.cduring GIMPLE pass: pcomsmall.c: In function ‘fn1’:small.c:3:6: internal compiler error: in check_loop_closed_ssa_use, at tree-ssa-loop-manip.c:707 void fn1 ()      ^~~0xdd5aed check_loop_closed_ssa_use        ../../gcc-source-trunk/gcc/tree-ssa-loop-manip.c:7060xdd8b5e verify_loop_closed_ssa(bool)        ../../gcc-source-trunk/gcc/tree-ssa-loop-manip.c:7510xb6b1a9 execute_function_todo        ../../gcc-source-trunk/gcc/passes.c:20080xb6bac9 execute_todo        ../../gcc-source-trunk/gcc/passes.c:2044Please submit a full bug report,with preprocessed source if appropriate.Please include the complete backtrace with any bug report.See <https://gcc.gnu.org/bugs/> for instructions.$-------------------------------------int a, b, c, d[6], e, f;void fn1 (){   for (b = 1; b < 5; b++)    {       for (c = 0; c < 5; c++)        d[b] = e;      if (a)        f++;      d[b + 1] = 1;    }}int main (){   fn1 ();  return 0;}",RESOLVED          FIXED      
81620,bin cheng,"[8 Regression] ICE in is_inv_store_elimination_chain, at tree-predcom.c:1651 with -O3","$ gcc-trunk -vUsing built-in specs.COLLECT_GCC=gcc-trunkCOLLECT_LTO_WRAPPER=/usr/local/gcc-trunk/libexec/gcc/x86_64-pc-linux-gnu/8.0.0/lto-wrapperTarget: x86_64-pc-linux-gnuConfigured with: ../gcc-source-trunk/configure --enable-languages=c,c++,lto --prefix=/usr/local/gcc-trunk --disable-bootstrapThread model: posixgcc version 8.0.0 20170730 (experimental) [trunk revision 250721] (GCC) $ gcc-trunk -O3 small.cduring GIMPLE pass: pcomsmall.c: In function ‘main’:small.c:3:5: internal compiler error: in is_inv_store_elimination_chain, at tree-predcom.c:1651 int main() {     ^~~~0xd25e10 is_inv_store_elimination_chain        ../../gcc-source-trunk/gcc/tree-predcom.c:16510xd25e10 prepare_initializers_chain_store_elim        ../../gcc-source-trunk/gcc/tree-predcom.c:27860xd25e10 prepare_initializers_chain        ../../gcc-source-trunk/gcc/tree-predcom.c:28460xd25e10 prepare_initializers        ../../gcc-source-trunk/gcc/tree-predcom.c:29010xd25e10 tree_predictive_commoning_loop        ../../gcc-source-trunk/gcc/tree-predcom.c:30920xd25e10 tree_predictive_commoning()        ../../gcc-source-trunk/gcc/tree-predcom.c:3170Please submit a full bug report,with preprocessed source if appropriate.Please include the complete backtrace with any bug report.See <https://gcc.gnu.org/bugs/> for instructions.$ cat small.cint a[7];char b;int main() {  b = 4;  for (; b; b--) {    a[b] = b;    a[b + 2] = 1;  }  return 0;}$",RESOLVED          FIXED      
81408,bin cheng,Lots of new -Wunsafe-loop-optimizations warnings with 7 compared to 6,Created attachment 41726 [details]Minimized exampleCompiling a recent apt with g++-7 causes a lot more unsafe loop optimizations warnings than g++ 6 did (134 vs 8). That's a massive regression.7.1.0 build log: https://launchpadlibrarian.net/327296659/buildlog_ubuntu-artful-i386.apt_1.5~beta1_BUILDING.txt.gz6.3.0 build log: https://launchpadlibrarian.net/326714445/buildlog_ubuntu-artful-i386.apt_1.5~beta1_BUILDING.txt.gzIt seems these are for-each kind of loops.I attached a simple minimized example from one of the cases mentioned in the log.,RESOLVED          FIXED      
81388,bin cheng,[7/8 Regression] Incorrect code generation with -O1,"gcc 7.1 on x86 produces incorrect output for correct code. gcc 6.3 produced correct assembly. See https://godbolt.org/g/mLyxGz or below for the code and generated assembly.code:.----// -O1 -fno-strict-overflowvoid bar();void foo(char *dst){	char *const end = dst;	do {                bar();                dst += 2;        } while (dst < end);}`----assembly:.----foo(char*):        push    rbx        movabs  rbx, -9223372036854775808.L2:        call    bar()        sub     rbx, 1        jne     .L2        pop     rbx        ret`----",RESOLVED          FIXED      
65068,bin cheng,Improve rewriting for address type induction variables in IVOPT,"For below exampleextern int listXsize[8];void foo (int len, int list_offset){  int list;  if (list_offset < 0)    list_offset = 0;  else if (list_offset == 0)    list_offset = 1;  else    list_offset = 2;  for (list = 0; list < len; list++)    listXsize[list+list_offset]++;}The dump after IVOPTs is as below with compiling options ""-O2"" on aarch64  <bb 8>:  # ivtmp.4_12 = PHI <0(7), ivtmp.4_3(10)>  _2 = (sizetype) list_offset_1;  _17 = _2 + ivtmp.4_12;  _18 = _17 * 4;  _8 = MEM[symbol: listXsize, index: _18, offset: 0B];  _9 = _8 + 1;  _19 = (sizetype) list_offset_1;  _20 = ivtmp.4_12 + _19;  _21 = _20 * 4;  MEM[symbol: listXsize, index: _21, offset: 0B] = _9;  ivtmp.4_3 = ivtmp.4_12 + 1;  list_22 = (int) ivtmp.4_3;  if (len_6(D) > list_22)    goto <bb 10>;  else    goto <bb 9>;  <bb 10>:  goto <bb 8>;The address of memory reference is in the form of   listXsize + (ivtmp + list_offset) * 4It consists of two parts as below  base: listXsize + list_offset * 4    ;; loop invariant  step: ivtmpBut in the dump, IVOPTs rewrites it into below form  tmp = ivtmp + list_offset  MEM_REF[listXsize, tmp, 0];Apparently, the loop invariant expression is split and can't be hoist out of loop.Moreover, IVOPTs now computes the loop invariant part of address expression in loop and depends on the following loop-invariant pass.  Generally this works fine except for one problem: If different address expression have common sub expression, the shared part expression is computed multiple times.  This not only complicates loop invariant pass, but also CSE optimization.  I see cases in which CSE are missed.I think the rewriting of address type induction variable should be refined to take at lease two factors into consideration:a) Proper re-association of loop invariant/variant expressions.b) Share common expression making CSE easier.",RESOLVED          FIXED      
81374,bin cheng,"[8 Regression] ICE in bb_top_order_cmp, at tree-loop-distribution.c:391","Starting from r249985 we ICE on:$ gcc /home/marxin/Programming/gcc/gcc/testsuite/gcc.target/i386/avx2-vec-mask-bit-not.c -O3 -fno-tree-scev-cpropduring GIMPLE pass: ldist/home/marxin/Programming/gcc/gcc/testsuite/gcc.target/i386/avx2-vec-mask-bit-not.c: In function ‘test’:/home/marxin/Programming/gcc/gcc/testsuite/gcc.target/i386/avx2-vec-mask-bit-not.c:11:1: internal compiler error: in bb_top_order_cmp, at tree-loop-distribution.c:484 test (void) ^~~~0xc36db0 bb_top_order_cmp	../../gcc/tree-loop-distribution.c:4830x74dbc4 get_loop_body_in_custom_order(loop const*, int (*)(void const*, void const*))	../../gcc/cfgloop.c:9140xc3832b stmts_from_loop	../../gcc/tree-loop-distribution.c:5010xc3832b build_rdg	../../gcc/tree-loop-distribution.c:5620xc3a220 distribute_loop	../../gcc/tree-loop-distribution.c:23860xc3d454 execute	../../gcc/tree-loop-distribution.c:2713Probably the same also happens for:$ ./xgcc -B. /home/marxin/Programming/gcc/gcc/testsuite/gcc.target/i386/avx512f-vpunpckldq-2.c -fno-tree-scev-cprop -mavx512vl -fno-tree-sink -O3during GIMPLE pass: ldistIn file included from /home/marxin/Programming/gcc/gcc/testsuite/gcc.target/i386/avx512f-vpunpckldq-2.c:7:0:/home/marxin/Programming/gcc/gcc/testsuite/gcc.target/i386/avx512f-vpunpckldq-2.c: In function ‘test_512’:/home/marxin/Programming/gcc/gcc/testsuite/gcc.target/i386/avx512f-helper.h:108:19: internal compiler error: in bb_top_order_cmp, at tree-loop-distribution.c:484 #define TEST EVAL(test_, AVX512F_LEN,)                   ^~~~~/home/marxin/Programming/gcc/gcc/testsuite/gcc.target/i386/avx512f-helper.h:36:23: note: in definition of macro ‘CONCAT’ #define CONCAT(a,b,c) a ## b ## c                       ^/home/marxin/Programming/gcc/gcc/testsuite/gcc.target/i386/avx512f-helper.h:108:14: note: in expansion of macro ‘EVAL’ #define TEST EVAL(test_, AVX512F_LEN,)              ^~~~/home/marxin/Programming/gcc/gcc/testsuite/gcc.target/i386/avx512f-vpunpckldq-2.c:26:1: note: in expansion of macro ‘TEST’ TEST (void) ^~~~0xc36db0 bb_top_order_cmp	../../gcc/tree-loop-distribution.c:4830x74dbc4 get_loop_body_in_custom_order(loop const*, int (*)(void const*, void const*))	../../gcc/cfgloop.c:9140xc3832b stmts_from_loop	../../gcc/tree-loop-distribution.c:5010xc3832b build_rdg	../../gcc/tree-loop-distribution.c:5620xc3a220 distribute_loop	../../gcc/tree-loop-distribution.c:23860xc3d454 execute	../../gcc/tree-loop-distribution.c:2713Please submit a full bug report,",RESOLVED          FIXED      
81369,bin cheng,[8 Regression] ICE in generate_code_for_partition,"gcc-8.0.0-alpha20170709 snapshot ICEs when compiling the following snippet w/ -O2 -ftree-loop-distribution:int wo;voidsy (long int *as){  for (;;)    {      *as = wo;      while (as < 2)        {          int *y9;          if (wo != 0)            *y9 = &wo;          wo /= (wo != 0 && *y9 != 0);          ++as;        }    }}% gcc-8.0.0-alpha20170709 -O2 -ftree-loop-distribution -c -w bghwqvet.cduring GIMPLE pass: ldistbghwqvet.c: In function 'sy':bghwqvet.c:4:1: internal compiler error: in generate_code_for_partition, at tree-loop-distribution.c:1146 sy (long int *as) ^~",RESOLVED          FIXED      
81196,bin cheng,Number of iterations found for p!=q but not for p<q,"void f(short*p){  p=(short*)__builtin_assume_aligned(p,64);  short*q=p+256;  for(;p!=q;++p,--q){    short t=*p;*p=*q;*q=t;  }}compiled with -O3 -march=skylake, this gets vectorized. However, if I replace p!=q with p<q (much safer in case 256 was actually 255), it isn't vectorized anymore, apparently because the number of iterations cannot be determined. Replacing p!=q with p!=q&&(p+1)!=q (or using std::reverse) also breaks vectorization, but that's less surprising.",RESOLVED          FIXED      
68021,bin cheng,[6 Regression] ice in rewrite_use_nonlinear_expr with -O3,"Created attachment 36540 [details]C++ source codeFor today's trunk gcc on x64_64$ ../results/bin/g++ -O3 -c bug237.ccsvga_cirrus.cc: In function ‘void bitblt_rop_bkwd_src_and_dst(Bit8u*, const Bit8u*, int, int, int, int)’:svga_cirrus.cc:3304:13: internal compiler error: in rewrite_use_nonlinear_expr, at tree-ssa-loop-ivopts.c:69160xf044d4 rewrite_use_nonlinear_expr	../../src/trunk/gcc/tree-ssa-loop-ivopts.c:69160xf044d4 rewrite_use	../../src/trunk/gcc/tree-ssa-loop-ivopts.c:71770xf044d4 rewrite_uses	../../src/trunk/gcc/tree-ssa-loop-ivopts.c:72100xf0b190 tree_ssa_iv_optimize_loop	../../src/trunk/gcc/tree-ssa-loop-ivopts.c:75500xf0b190 tree_ssa_iv_optimize()	../../src/trunk/gcc/tree-ssa-loop-ivopts.c:75820xf24fc0 execute	../../src/trunk/gcc/tree-ssa-loop.c:412Please submit a full bug report,with preprocessed source if appropriate.Please include the complete backtrace with any bug report.See <http://gcc.gnu.org/bugs.html> for instructions.tree-ssa-loop-ivopts.c:6916 is  gcc_assert (comp != NULL_TREE);",RESOLVED          FIXED      
79347,bin cheng,[7 regression] vect_do_peeling is messing up profile,"Hi,compilingshort *a;int c;n(){  for (int i = 0; i<c;i++)    a[i]++;}with -Ofast give now following mismatches in profile:t.c.159t.vect:;;   Invalid sum of incoming frequencies 1148, should be 1275t.c.159t.vect:;;   Invalid sum of incoming frequencies 1116, should be 1275t.c.159t.vect:;;   Invalid sum of incoming frequencies 1434, should be 1275t.c.159t.vect:;;   Invalid sum of incoming frequencies 2178, should be 1063t.c.159t.vect:;;   Invalid sum of incoming frequencies 159, should be 1275t.c.159t.vect:;;   Invalid sum of incoming frequencies 6965, should be 6694t.c.159t.vect:;;   Invalid sum of incoming frequencies 1163, should be 1275while GCC 6 has only two:/aux/hubicka/t.c.148t.vect:;;   Invalid sum of incoming frequencies 962, should be 590/aux/hubicka/t.c.148t.vect:;;   Invalid sum of incoming frequencies 53, should be 425Unforutnately I got lost in the code, so i am not sure how to fix this up.This bug is now #1 source of profile mismatches when compiling tramp3d.This seems to be caused by rewrite the way we generate loop prologue https://gcc.gnu.org/ml/gcc-patches/2016-09/msg00821.htmland the profiles of prologue are not scaled down when the guards are inserted.",RESOLVED          FIXED      
66768,bin cheng,address space gets lost on literal pointer,"Created attachment 35913 [details]Input incorrectly compiled with gcc-5.1.0-patchedI implemented support for %fs and %gs segment prefixes on the x86 andx86-64 platforms, in what turns out to be a small patch.  A full description and the motivation can be found in https://gcc.gnu.org/ml/gcc/2015-07/msg00031.html .This bug report is unusual in that it is not about a bug in the current version of gcc, but in the gcc with a patch added (https://gcc.gnu.org/ml/gcc/2015-07/txtJZYwz9PTTI.txt).  It might of course be that my patch is incorrect, but the patch really only adds two extra address spaces; given that it is straightforward, I'd guess there is a chance that the same bug occurs on other platforms that already have multiple address spaces.  (Either that, or some code somewhere is confused by the standard-sized, alternate-address-spaced pointers.)The bug is that with gcc 5.1.0 patched as above, compiling bug1.c on x86-64 with ""-O1"" produces https://gcc.gnu.org/ml/gcc/2015-07/msg00031/bug1.s.  In one case, the __seg_gs address space is incorrectly dropped.  With ""-O0"" it works fine.  If I try to dump all the rtl passes, I see that the __seg_gs address space is already missing in the first rtl dump, so I suspect that some earlier optimization does not respect the presence of address spaces.(I tried to replace the ""-O1"" with the list of ""-f"" flags output by ""-O1 -Q --help=optimizers"" with the goal of removing most of them until I can pinpoint which optimization causes the problem, but with no luck: even replacing ""-O1"" by all the [enabled] flags produces a different and correct result...)",RESOLVED          FIXED      
77536,bin cheng,Vectorizer not maintaining relationship of relative block frequencies in absence of real profile data,"// gcc -O3 -ffast-math -mcpu=power8 -mrecip=all -S test.cvoid sub(float *restrict x, float *restrict y, float *restrict z, int n){  int i;  for (i = 0; i < n; i++)    x[i] = z[i]/y[i];}In the dump before vectorizer (148t.ifcvt) the loop block has freq=8500 which is almost 6X the freq of the entry block(1500). After vectoriztion the now vectorized loop block has freq=662. While I agree the freq of the loop block should drop some after vectorization, it should still maintain the relationship of being the hottest block in the function.",RESOLVED          FIXED      
56541,bin cheng,vectorizaton fails in conditional assignment of a constant,"this loop does not vectorize#include<cmath>float a,b,c,d;float z[1024]; bool ok[1024];constexpr float rBig = 150.;void foo() {  for (int i=0;i!=1024;++i) {    float rR = a*z[i];    float rL = b*z[i];    float rMin = (rR<rL) ? rR : rL;      float rMax = (rR<rL) ? rL : rR;      //rMin = (rMax>0) ? rMin : rBig+std::abs(z[i]); // this vectorize (sic...)    rMin = (rMax>0) ? rMin : rBig; // comment to vectorize    rMin = (rMin>0) ? rMin : rMax;     ok[i] = rMin-c<rMax+d;  }}c++ -std=c++11 -Ofast -march=corei7 -c range.cc -ftree-vectorizer-verbose=1Analyzing loop at range.cc:8range.cc:7: note: vectorized 0 loops in function.range.cc:16: note: vect_recog_bool_pattern: detected: range.cc:16: note: pattern recognized: VIEW_CONVERT_EXPR<unsigned char>(ok[i_22]) = patt_15;range.cc:16: note: additional pattern stmt: patt_13 = _14 < _16 ? 1 : 0;adding to ""rBig"" std::abs(z[i]) it doesc++ -std=c++11 -Ofast -march=corei7 -c range.cc -ftree-vectorizer-verbose=1Analyzing loop at range.cc:8range.cc:8: note: vect_recog_bool_pattern: detected: range.cc:8: note: pattern recognized: VIEW_CONVERT_EXPR<unsigned char>(ok[i_24]) = patt_16;range.cc:8: note: additional pattern stmt: patt_14 = _15 < _17 ? 1 : 0;Vectorizing loop at range.cc:8range.cc:8: note: LOOP VECTORIZED.range.cc:7: note: vectorized 1 loops in function.",RESOLVED          FIXED      
78114,bin cheng,[7 regression] gfortran.dg/vect/fast-math-mgrid-resid.f FAILs,"Between 20161011 and 20161013, the gfortran.dg/vect/fast-math-mgrid-resid.f startedto FAILFAIL: gfortran.dg/vect/fast-math-mgrid-resid.f   -O   scan-tree-dump-times pcom ""Executing predictive commoning without unrolling"" 2for 32-bit x86 (seen on Solaris, Linux, and Darwin).Most likely introduced by this patch:changeset:   33495:0318d4fdc3abuser:        amker@138bc75d-0d04-0410-961f-82ee72b054a4date:        Thu Oct 13 11:05:53 2016 +0000files:       gcc/ChangeLog gcc/testsuite/ChangeLog gcc/testsuite/gfortran.dg/vect/fast-math-mgrid-resid.f gcc/tree-predcom.cdescription:* tree-predcom.c (tree_predictive_commoning_loop): Skip loop that only        iterates 1 time.        gcc/testsuite        * gfortran.dg/vect/fast-math-mgrid-resid.f: New test string.  Rainer",RESOLVED          FIXED      
78574,bin cheng,[7 Regression] ice on valid C code at -O2 and -O3 in both 32- and 64-bit modes on x86_64-linux-gnu (internal compiler error: Segmentation fault (program cc1)),"$ gcc-trunk -vUsing built-in specs.COLLECT_GCC=gcc-trunkCOLLECT_LTO_WRAPPER=/usr/local/gcc-trunk/libexec/gcc/x86_64-pc-linux-gnu/7.0.0/lto-wrapperTarget: x86_64-pc-linux-gnuConfigured with: ../gcc-source-trunk/configure --enable-languages=c,c++,lto --prefix=/usr/local/gcc-trunk --disable-bootstrapThread model: posixgcc version 7.0.0 20161128 (experimental) [trunk revision 242906] (GCC) $ $ gcc-trunk -O3 small.cgcc-trunk: internal compiler error: Segmentation fault (program cc1)Please submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.$ $ cat small.cint a, d, f, g;int b[1];short h;int main() {  long j;  int k, i;  for (; j; j++) {    i = 0;    for (; i < 6; i++) {      int l = a, m = d || g;    L:      l ^ m | a;    }    b[j + 1] = 2;    ++k;    for (; g; g++) {      d ^= h;      if (f)        for (;;)          ;    }  }  if (k)    goto L;}$",RESOLVED          FIXED      
78510,bin cheng,[7 Regression] ICE on valid C code at -O2 and above in both 32-bit and 64-bit modes on x86_64-linux-gnu (internal compiler error: verify_gimple failed),"$ gcc-trunk -vUsing built-in specs.COLLECT_GCC=gcc-trunkCOLLECT_LTO_WRAPPER=/usr/local/gcc-trunk/libexec/gcc/x86_64-pc-linux-gnu/7.0.0/lto-wrapperTarget: x86_64-pc-linux-gnuConfigured with: ../gcc-source-trunk/configure --enable-languages=c,c++,lto --prefix=/usr/local/gcc-trunk --disable-bootstrapThread model: posixgcc version 7.0.0 20161124 (experimental) [trunk revision 242818] (GCC)$$ gcc-trunk -O3 small.csmall.c: In function ‘main’:small.c:17:5: error: type mismatch in conditional expression int main() { fn2(); return 0; }     ^~~~short intintshort intiftmp.1_11 = _6 == 4 ? 4 : 0;small.c:17:5: internal compiler error: verify_gimple failed0xc317f6 verify_gimple_in_cfg(function*, bool)        ../../gcc-source-trunk/gcc/tree-cfg.c:52580xb0f84a execute_function_todo        ../../gcc-source-trunk/gcc/passes.c:19650xb10285 execute_todo        ../../gcc-source-trunk/gcc/passes.c:2015Please submit a full bug report,with preprocessed source if appropriate.Please include the complete backtrace with any bug report.See <http://gcc.gnu.org/bugs.html> for instructions.$$ cat small.cint a, b, c, e, f;char d;short g, h;char fn1(int p1) {  for (;;) {    h = p1 << 2;    int i = h;    g = i > 32767 >> 13 ? i : i << 3;    f = a ?: c;    if (e)      return d;  }}static int fn2() { fn1(0 || b); }int main() { fn2(); return 0; }",RESOLVED          FIXED      
78507,bin cheng,"[7 Regression] ICE: tree check: expected integer_type or enumeral_type or boolean_type or real_type or fixed_point_type, have pointer_type in int_fits_type_p, at tree.c:9153","markus@x4 /tmp % cat StackMaps.iistruct A {  template <typename _Iterator1, typename _Iterator2>  int operator()(_Iterator1, _Iterator2);};struct B {  template <typename _BI1, typename _BI2>  static _BI2 __copy_move_b(_BI1 p1, _BI2 p2) {    _BI1 a;    long b = p1 - a;    for (; b > 0; --b)      *--p2 = *--p1;  }};template <int, typename _BI1, typename _BI2>void __copy_move_backward_a(_BI1 p1, _BI2 p2) {  B::__copy_move_b(p1, p2);}template <int, typename _BI1, typename _BI2>void __copy_move_backward_a2(_BI1 p1, _BI2 p2) {  __copy_move_backward_a<0>(p1, p2);}template <typename _BI1, typename _BI2> void move_backward(_BI1 p1, _BI2 p2) {  __copy_move_backward_a2<0>(p1, p2);}template <typename _RandomAccessIterator, typename _Compare>void __insertion_sort(_RandomAccessIterator, _Compare p2) {  for (_RandomAccessIterator c;; ++c)    if (p2(0, 0))      move_backward(c, c + 1);}template <typename _RandomAccessIterator, typename _Compare>void __final_insertion_sort(_RandomAccessIterator, _Compare p2) {  _RandomAccessIterator d;  __insertion_sort(d, p2);}template <typename _RandomAccessIterator, typename _Compare>void __sort(_RandomAccessIterator p1, _Compare p2) {  __final_insertion_sort(p1, p2);}template <typename _RandomAccessIterator, typename _Compare>void sort(_RandomAccessIterator, _RandomAccessIterator p2, _Compare) {  A e;  __sort(p2, e);}struct C {  struct D {    int DwarfRegNum;  };  int parseRegisterLiveOutMask() const;};int C::parseRegisterLiveOutMask() const {  D f, g;  sort(&f, &g, [] {});}markus@x4 /tmp % g++ -c -O3 StackMaps.iiStackMaps.ii: In member function ‘int C::parseRegisterLiveOutMask() const’:StackMaps.ii:51:5: internal compiler error: tree check: expected integer_type or enumeral_type or boolean_type or real_type or fixed_point_type, have pointer_type in int_fits_type_p, at tree.c:9153 int C::parseRegisterLiveOutMask() const {     ^0x101b69c tree_check_failed(tree_node const*, char const*, int, char const*, ...)        ../../gcc/gcc/tree.c:98150x102ea83 tree_check5(tree_node const*, char const*, int, char const*, tree_code, tree_code, tree_code, tree_code, tree_code)        ../../gcc/gcc/tree.h:33930x102ea83 int_fits_type_p(tree_node const*, tree_node const*)        ../../gcc/gcc/tree.c:91530x117718f gimple_simplify_153        /var/tmp/gcc_build_dir/gcc/gimple-match.c:68680x117c41b gimple_simplify_COND_EXPR        /var/tmp/gcc_build_dir/gcc/gimple-match.c:665740x10f920d gimple_simplify        /var/tmp/gcc_build_dir/gcc/gimple-match.c:676790x10faaf8 gimple_resimplify3(gimple**, code_helper*, tree_node*, tree_node**, tree_node* (*)(tree_node*))        ../../gcc/gcc/gimple-match-head.c:2230x11a6b85 gimple_simplify(gimple*, code_helper*, tree_node**, gimple**, tree_node* (*)(tree_node*), tree_node* (*)(tree_node*))        ../../gcc/gcc/gimple-match-head.c:6920xadd520 fold_stmt_1        ../../gcc/gcc/gimple-fold.c:42560xeadf49 execute        ../../gcc/gcc/tree-ssa-forwprop.c:2391Please submit a full bug report,",RESOLVED          FIXED      
78005,bin cheng,[7 Regression] 172.mgrid and 450.soplex miscompare,"With -Ofast on core-avx2 and bdver2, works fine with generic tuning.  Last known good rev. is r241084, first kown bad r241120.",RESOLVED          FIXED      
77503,bin cheng,[7 regression] ICE in vect_transform_stmt compiling postgresql,"Trying to build postgresql with GCC7 for a phoronix benchmark, fails:gcc -Wall -Wmissing-prototypes -Wpointer-arith -Wdeclaration-after-statement -Wendif-labels -Wmissing-format-attribute -Wformat-security -fno-strict-aliasing -fwrapv -fexcess-precision=standard -O3 -mcpu=cortex-a53 -fomit-frame-pointer -fipa-pta -march=armv8-a+crc -I../../../../src/include -D_GNU_SOURCE   -c -o fsmpage.o fsmpage.cfsmpage.c: In function 'fsm_truncate_avail':fsmpage.c:313:1: internal compiler error: in vect_transform_stmt, at tree-vect-stmts.c:8424 fsm_truncate_avail(Page page, int nslots) ^~~~~~~~~~~~~~~~~~Quickest reproduction probably:$ phoronix-test-suite test pgbench-1.5.1 LOG: ~/.phoronix-test-suite/installed-tests/pts/pgbench-1.5.1/install-failed.log$ gcc -v Using built-in specs.COLLECT_GCC=gccCOLLECT_LTO_WRAPPER=/usr/gcc7/lib/gcc/aarch64-linux-gnu/7.0.0/lto-wrapperTarget: aarch64-linux-gnuConfigured with: /tmp/gcc-7-20160904/configure --enable-languages=c,c++,fortran --prefix=/usr/gcc7 --program-suffix=-7 --enable-shared --enable-linker-build-id --libexecdir=/usr/gcc7/lib --without-included-gettext --enable-threads=posix --libdir=/usr/gcc7/lib --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-time=yes --with-default-libstdcxx-abi=new --enable-gnu-unique-object --disable-libquadmath --enable-plugin --with-system-zlib --disable-browser-plugin --with-arch-directory=aarch64 --enable-multiarch --enable-fix-cortex-a53-843419 --disable-werror --enable-checking=release --build=aarch64-linux-gnu --host=aarch64-linux-gnu --target=aarch64-linux-gnu --disable-bootstrapThread model: posixgcc version 7.0.0 20160904 (experimental) (GCC)",RESOLVED          FIXED      
72817,bin cheng,[7 Regression] wrong code at -O3 on x86_64-linux-gnu (in both 32-bit and 64-bit modes),"At -O3, the generated code hangs.  At -O2, although the generated code does not hang, there is a spurious warning of invoking undefined behavior. This should be a very recent regression as r238938 does not yet miscompile the code. $ gcc-trunk -vUsing built-in specs.COLLECT_GCC=gcc-trunkCOLLECT_LTO_WRAPPER=/usr/local/gcc-trunk/libexec/gcc/x86_64-pc-linux-gnu/7.0.0/lto-wrapperTarget: x86_64-pc-linux-gnuConfigured with: ../gcc-source-trunk/configure --enable-languages=c,c++,lto --prefix=/usr/local/gcc-trunk --disable-bootstrapThread model: posixgcc version 7.0.0 20160805 (experimental) [trunk revision 239166] (GCC) $ $ gcc-trunk -Os small.c; ./a.out$ gcc-6.1 -O3 small.c; ./a.out$ $ /usr/local/gcc-r238938/bin/gcc -O3 small.c; ./a.out$ $ gcc-trunk -O2 small.csmall.c: In function ‘main’:small.c:6:26: warning: iteration 26 invokes undefined behavior [-Waggressive-loop-optimizations]   for (a = 3; a != -1; a -= 5)                          ^~small.c:6:3: note: within this loop   for (a = 3; a != -1; a -= 5)   ^~~$ ./a.out$ $ gcc-trunk -O3 small.c$ timeout -s 9 10 ./a.outKilled$ --------------------------------char a;short b;int main (){  for (a = 3; a != -1; a -= 5)    while (b)      ;  return 0; }",RESOLVED          FIXED      
71347,bin cheng,[7 regression] Performance drop after r235513 on x86-64 in 32-bit mode.,"We noticed significant regression (more then 10%) after this revision whicn can be illustrated on the following simple test-case )attached) - one additional instruction in innermost loop (scalar replacement is not recognized):  before r235513                         r235513.L6:	movsd	X.1861+8, %xmm2        movsd   -8(%eax), %xmm2	addl	$8, %eax               movsd   X.1861+8, %xmm1.L3:	mulsd	%xmm2, %xmm0           mulsd   %xmm1, %xmm2	cmpl	$X.1861+64, %eax       addl    $8, %eax	movsd	%xmm0, (%eax)          movsd   %xmm2, -8(%eax)	jne	.L6                    cmpl    $X.1861+72, %eax                                       jne     .L6",RESOLVED          FIXED      
70715,bin cheng,SCEV failed to prove no-overflow-ness information unsigned loop IV,"Hi, below is a case in which SCEV failed to prove no-overflow-ness of converted unsigned type loop IV.  As a result, the address of pointer dereference isn't recognized as SCEV./* { dg-do compile } *//* { dg-options ""-O3 -fdump-tree-ldist"" } */intfoo (char *p, unsigned n){  while(n--)    {      p[n]='A';    }  return 0;}/* Loop can be transformed into builtin memset since &p[n] is SCEV.  *//* { dg-final { scan-tree-dump ""builtin_memset"" ""ldist"" } } */Actually, I added code supporting NE_EXPR as comparison code in loop exit condition for PR68529.  The only problem is: in function number_of_iterations_exit, control_iv.base is expanded by expand_simple_operations.Given we have already encountered problems caused by this kind of expanding, we may want to remove it in the future.  For the moment, this can be easily fixed by checking expanded expression in loop_exits_before_overflow.I am testing a patch for this.",RESOLVED          FIXED      
65447,bin cheng,AArch64: iv-opt causes bad addressing,"Hi,For below case extracted from spec2006 (and even worse in real case), loops containing a significant number of memory accesses generate very inefficient code.  This is due to iv-opt hitting a limit and choosing the wrong induction variable, resulting in addressing modes with huge offsets and all loads/stores expanded into 2 or 3 instructions.The source code is like:void foo (double *p){  int i;  for (i = -20000; i < 200000; i+= 40)    {      p[i+0] = 1.0;      p[i+1] = 1.0;      p[i+2] = 1.0;      p[i+3] = 1.0;      p[i+4] = 1.0;      p[i+5] = 1.0;      p[i+6] = 1.0;      p[i+7] = 1.0;      p[i+8] = 1.0;      p[i+9] = 1.0;      p[i+10] = 1.0;      p[i+11] = 1.0;      p[i+12] = 1.0;      p[i+13] = 1.0;      p[i+14] = 1.0;      p[i+15] = 1.0;      p[i+16] = 1.0;      p[i+17] = 1.0;      p[i+18] = 1.0;      p[i+19] = 1.0;      p[i+20] = 1.0;      p[i+21] = 1.0;      p[i+22] = 1.0;      p[i+23] = 1.0;      p[i+24] = 1.0;      p[i+25] = 1.0;      p[i+26] = 1.0;      p[i+27] = 1.0;      p[i+28] = 1.0;      p[i+29] = 1.0;      p[i+30] = 1.0;      p[i+31] = 1.0;      p[i+32] = 1.0;      p[i+33] = 1.0;      p[i+34] = 1.0;      p[i+35] = 1.0;      p[i+36] = 1.0;      p[i+37] = 1.0;      p[i+38] = 1.0;      p[i+39] = 1.0;    }}And comparison of generated assembly and the optimal one:*** test.S	2015-03-17 17:04:41.677033862 +0800--- ../../../trunk-orig/target/bin/test.S	2015-03-17 17:03:45.377033869 +0800****************** 7,40 ****  	.type	foo, %function  foo:  	fmov	d0, 1.0e+0! 	sub	x1, x0, #159744! 	add	x2, x0, 1597440! 	sub	x0, x1, #256! 	add	x1, x2, 2560  	.p2align 2  .L2:! 	stp	d0, d0, [x0]! 	stp	d0, d0, [x0, 16]! 	stp	d0, d0, [x0, 32]! 	stp	d0, d0, [x0, 48]! 	stp	d0, d0, [x0, 64]! 	stp	d0, d0, [x0, 80]! 	stp	d0, d0, [x0, 96]! 	stp	d0, d0, [x0, 112]! 	stp	d0, d0, [x0, 128]! 	stp	d0, d0, [x0, 144]! 	stp	d0, d0, [x0, 160]! 	stp	d0, d0, [x0, 176]! 	stp	d0, d0, [x0, 192]! 	stp	d0, d0, [x0, 208]! 	stp	d0, d0, [x0, 224]! 	stp	d0, d0, [x0, 240]! 	add	x0, x0, 320! 	cmp	x1, x0! 	stp	d0, d0, [x0, -64]! 	stp	d0, d0, [x0, -48]! 	stp	d0, d0, [x0, -32]! 	stp	d0, d0, [x0, -16]  	bne	.L2  	ret  	.size	foo, .-foo--- 7,53 ----  	.type	foo, %function  foo:  	fmov	d0, 1.0e+0! 	mov	x8, 56064! 	movk	x8, 0x1a, lsl 16! 	mov	x3, 0  	.p2align 2  .L2:! 	add	x2, x0, x3! 	add	x3, x3, 320! 	sub	x1, x2, #159744! 	sub	x2, x2, #155648! 	sub	x4, x2, #4088! 	sub	x7, x2, #4080! 	stp	d0, d0, [x1, -256]! 	sub	x6, x2, #4072! 	sub	x5, x2, #4064! 	stp	d0, d0, [x1, -240]! 	cmp	x3, x8! 	stp	d0, d0, [x1, -224]! 	stp	d0, d0, [x1, -208]! 	stp	d0, d0, [x1, -192]! 	stp	d0, d0, [x1, -176]! 	stp	d0, d0, [x1, -160]! 	stp	d0, d0, [x1, -144]! 	stp	d0, d0, [x1, -128]! 	stp	d0, d0, [x1, -112]! 	stp	d0, d0, [x1, -96]! 	stp	d0, d0, [x1, -80]! 	stp	d0, d0, [x1, -64]! 	stp	d0, d0, [x1, -48]! 	stp	d0, d0, [x1, -32]! 	stp	d0, d0, [x1, -16]! 	str	d0, [x1]! 	sub	x1, x2, #4048! 	str	d0, [x4]! 	sub	x4, x2, #4056! 	sub	x2, x2, #4040! 	str	d0, [x7]! 	str	d0, [x6]! 	str	d0, [x5]! 	str	d0, [x4]! 	str	d0, [x1]! 	str	d0, [x2]  	bne	.L2  	ret  	.size	foo, .-fooActually in this case most IVs differ to each other by a constant offset of base address, they point to same memory object and have same step. These address type IVs should be categorize into a single group as if it's ONE IV use. As a result, the number of IV uses can be decreased thus we can run expensive IV algorithm to make better choice.I can see this only hits architectures like arm/aarch64, because it has more addressing modes than simple register direct one, also it doesn't support arbitrary constant offset in memory reference.  But, anyway, this should be handled as target independent issue.I am working on this.",RESOLVED          FIXED      
66797,bin cheng,"[6 Regression] FAIL: gcc.dg/tree-ssa/pr65447.c scan-tree-dump-not ivopts ""\\nuse 5\\n""","Created attachment 35929 [details]Tree dumpExecuting on host: /home/dave/gnu/gcc/objdir/gcc/xgcc -B/home/dave/gnu/gcc/objdir/gcc/ /home/dave/gnu/gcc/gcc/gcc/testsuite/gcc.dg/tree-ssa/pr65447.c    -fno-diagnostics-show-caret -fdiagnostics-color=never   -O2 -fdump-tree-ivopts-details -S -o pr65447.s    (timeout = 300)spawn -ignore SIGHUP /home/dave/gnu/gcc/objdir/gcc/xgcc -B/home/dave/gnu/gcc/objdir/gcc/ /home/dave/gnu/gcc/gcc/gcc/testsuite/gcc.dg/tree-ssa/pr65447.c -fno-diagnostics-show-caret -fdiagnostics-color=never -O2 -fdump-tree-ivopts-details -S -o pr65447.sPASS: gcc.dg/tree-ssa/pr65447.c (test for excess errors)FAIL: gcc.dg/tree-ssa/pr65447.c scan-tree-dump-not ivopts ""\\nuse 5\\n""",RESOLVED          FIXED      
52272,bin cheng,[4.9/5/6 regression] Performance regression of 410.bwaves on x86.,Created attachment 26671 [details]Reduced testcaseCommit 2012-02-06  Richard Guenther  <rguenther@suse.de>        PR tree-optimization/50955        * tree-ssa-loop-ivopts.c (get_computation_cost_at): Artificially        raise cost of expressions that replace an address with an        expression based on a different pointer.causes performance regression on 410.bwaves    base: -2.33%    peak: -3.82%I attached a reduced testcase and dumps of compilers before and after commit.Command line to reproducegfortran -w -g -m32  -static -S t.s -O3 -funroll-loops -msse2 -mfpmath=sse -ffast-math -march=corei7 t.f,RESOLVED          FIXED      
68529,bin cheng,scev failed for while(i--),"loop distribution failed to generate memset library call for the following example:#include <stdio.h>#include <stdlib.h>int main(){    char c[10000]={};    unsigned int nchar=9999;    while(nchar--!=0)      {          c[nchar]='A';      }       printf(""%s\n"",c);    return 0;}Compiled with gcc -O3 -march=core2  -fdump-tree-ldist-details  t.c -o tFrom the ldist dump:...Creating dr for c[nchar_24]analyze_innermost: failed: evolution of offset is not affine.    base_address:     offset from base address:     constant offset from base address:     step:     aligned to:     base_object: c    Access function 0: {9998, +, 4294967295}_1...and it failed to transform the while loop to memset=====However, it successed by change while(nchar--!=0) to  for(;nchar !=0;nchar--):#include <stdio.h>#include <stdlib.h>int main(){    char c[10000]={};       unsigned int nchar=9999;    for(;nchar!=0;nchar--)      {          c[nchar]='A';      }       printf(""%s\n"",c);    return 0;}...Creating dr for c[nchar_21]analyze_innermost: success.    base_address: &c    offset from base address: 0    constant offset from base address: 9999    step: -1    aligned to: 128     base_object: c    Access function 0: {9999, +, 4294967295}_1...and generate memset library call stmt: __builtin_memset (&MEM[(void *)&c + 1B], 65, 9999);I also testd in gcc4.8.4 and trunk, both failed.--Jun",RESOLVED          FIXED      
66388,bin cheng,[6 Regression] Test gcc.target/i386/pr49781-1.c failed because of recent scev overflow patches.,gcc.target/i386/pr49781-1.c failed because of recent scev overflow patches at revisions 224009/224020.  Seems IVO made worse choice with more IVs recognized.  I will investigate this issue.FAIL: gcc.target/i386/pr49781-1.c scan-assembler-not lea[lq]?[ \t]\\((%|)r[a-z0-9]*,RESOLVED          FIXED      
62173,bin cheng,[5/6 Regression] 64bit Arch can't ivopt while 32bit Arch can,"void bar(int i) {  char A[10];  int d = 0;  while (i > 0)    A[d++] = i--;  while (d > 0)    foo(A[d--]);}Compile this function at -O3 with the last good revision r213487 and with the first bad revision r213488 ""[AArch64] Improve TARGET_LEGITIMIZE_ADDRESS_P hook"", and diffing:--- good.s	2014-08-18 10:56:42.542867000 -0500+++ bad.s	2014-08-18 10:56:42.504090000 -0500@@ -8,34 +8,33 @@ 	stp	x29, x30, [sp, -48]! 	cmp	w0, wzr 	add	x29, sp, 0-	stp	x19, x20, [sp, 16]+	str	x19, [sp, 16] 	ble	.L1 	strb	w0, [x29, 32] 	subs	w19, w0, #1-	add	x20, x29, 32 	beq	.L4 	strb	w19, [x29, 33] 	subs	w1, w0, #2 	beq	.L4-	strb	w1, [x20, 2]+	strb	w1, [x29, 34] 	subs	w1, w0, #3 	beq	.L4-	strb	w1, [x20, 3]+	strb	w1, [x29, 35] 	subs	w1, w0, #4 	beq	.L4-	strb	w1, [x20, 4]+	strb	w1, [x29, 36] 	subs	w1, w0, #5 	beq	.L4-	strb	w1, [x20, 5]+	strb	w1, [x29, 37] 	subs	w1, w0, #6 	beq	.L4-	strb	w1, [x20, 6]+	strb	w1, [x29, 38] 	subs	w1, w0, #7 	beq	.L4-	strb	w1, [x20, 7]+	strb	w1, [x29, 39] 	subs	w1, w0, #8 	beq	.L4-	strb	w1, [x20, 8]+	strb	w1, [x29, 40] 	subs	w1, w0, #9 	beq	.L4 	strb	w1, [x29, 41]@@ -43,14 +42,16 @@ .L35: 	sub	w19, w19, #1 .L4:-	ldrb	w0, [x20, w0, sxtw]+	add	x1, x29, 48+	add	x0, x1, x0, sxtw+	ldrb	w0, [x0, -16] 	bl	foo 	mov	w0, w19 	cbnz	w19, .L35 .L1:-	ldp	x19, x20, [sp, 16]+	ldr	x19, [sp, 16] 	ldp	x29, x30, [sp], 48 	ret 	.size	bar, .-barThe problem is that gcc now generates an addressing mode that requires two more add instructions in the second loop:-	ldrb	w0, [x20, w0, sxtw]+	add	x1, x29, 48+	add	x0, x1, x0, sxtw+	ldrb	w0, [x0, -16]",RESOLVED          FIXED      
62178,bin cheng,[5.0 regression] [AArch64] Performance regression on matrix matrix multiply due to r211211,"int a[30 +1][30 +1], b[30 +1][30 +1], r[30 +1][30 +1];void Intmm (int run) {  int i, j, k;  for ( i = 1; i <= 30; i++ )    for ( j = 1; j <= 30; j++ ) {      r[i][j] = 0;      for(k = 1; k <= 30; k++ )        r[i][j] += a[i][k]*b[k][j];    }}compile this at -O3 with the last good compiler r211210 and with the first bad compiler at r211211, then diff the assembly:--- good.s	2014-08-18 17:44:26.179506000 -0500+++ bad.s	2014-08-18 17:44:26.213807000 -0500@@ -6,45 +6,44 @@ 	.type	Intmm, %function Intmm: 	movi	v3.2s, 0-	adrp	x6, a+128-	adrp	x8, r+128-	adrp	x10, r+3848-	adrp	x9, b+128-	adrp	x7, b+248-	add	x6, x6, :lo12:a+128-	add	x8, x8, :lo12:r+128-	add	x10, x10, :lo12:r+3848-	add	x9, x9, :lo12:b+128-	add	x7, x7, :lo12:b+248+	adrp	x6, r+128+	adrp	x4, a+124+	adrp	x8, r+3848+	adrp	x7, b+	add	x6, x6, :lo12:r+128+	add	x4, x4, :lo12:a+124+	add	x8, x8, :lo12:r+3848+	add	x7, x7, :lo12:b .L2:-	mov	x5, x8-	mov	x4, x8-	mov	x3, x9+	mov	x5, 0 .L4:-	str	d3, [x4]-	add	x2, x3, 3720-	movi	v0.2s, 0-	mov	x1, x6-	mov	x0, x3+	str	d3, [x6, x5]+	add	x3, x5, 128+	movi	v1.2s, 0+	add	x3, x3, x7+	mov	x0, 0 .L3:-	ldr	d1, [x0]-	add	x0, x0, 124-	ld1r	{v2.2s}, [x1], 4-	cmp	x0, x2-	mla	v0.2s, v2.2s, v1.2s+	add	x1, x4, x0+	lsl	x2, x0, 5+	sub	x2, x2, x0+	add	x0, x0, 4+	cmp	x0, 120+	ldr	w1, [x1, 4]+	ldr	d2, [x3, x2]+	dup	v0.2s, w1+	mla	v1.2s, v0.2s, v2.2s 	bne	.L3-	str	d0, [x5], 8-	add	x3, x3, 8-	cmp	x3, x7-	add	x4, x4, 8+	str	d1, [x6, x5]+	add	x5, x5, 8+	cmp	x5, 120 	bne	.L4-	add	x8, x8, 124 	add	x6, x6, 124-	cmp	x8, x10+	add	x4, x4, 124+	cmp	x6, x8 	bne	.L2 	ret 	.size	Intmm, .-Intmm 	.comm	r,3844,8 	.comm	b,3844,8 	.comm	a,3844,8Remark that the innermost loop .L3 contains 5 more instructions with the bad compiler, due to more scalar computations for the addressing modes: .L3:-	ldr	d1, [x0]-	add	x0, x0, 124-	ld1r	{v2.2s}, [x1], 4-	cmp	x0, x2-	mla	v0.2s, v2.2s, v1.2s+	add	x1, x4, x0+	lsl	x2, x0, 5+	sub	x2, x2, x0+	add	x0, x0, 4+	cmp	x0, 120+	ldr	w1, [x1, 4]+	ldr	d2, [x3, x2]+	dup	v0.2s, w1+	mla	v1.2s, v0.2s, v2.2s 	bne	.L3",RESOLVED          FIXED      
64705,bin cheng,Bad code generation of sieve on x86-64 because of too aggressive IV optimizations,"Created attachment 34510 [details]preprocessed sieve program from aburto benchmarksGCC on trunk generates a bad x86-64 code for the hotest loop in sieve(preprocessed file in the attachment) for -Ofast -march=core-avx2:for(k = i + prime ; k<=size ; k+=prime) {   ci++;   *(flags+k)=0; }The GCC generated code is.L82:        movb    $0, (%rax)        addq    %rsi, %rax        addq    $1, %rbx        leaq    (%rax,%rcx), %rdx        cmpq    %rdx, %rbp        jge     .L82Here is the code generated by LLVM-3.5 using the same options:   .LBB41_51:                              # %for.body26.unr                                        #   Parent Loop BB41_45 Depth=1                                        # =>  This Inner Loop Header: Depth=2        incq    %r12        movb    $0, (%rbx,%rax)        addq    %r14, %rax        cmpq    %r15, %rax        jle     .LBB41_51LLVM generates 5 insns loop instead of 6 insns loop in GCC.It is achieved by using base+index addressing instead of just baseaddressing in GCC which is a result of induction of flags+k expression.I tried to make base+index addressing with zero cost by the followingpatch.Index: tree-ssa-loop-ivopts.c===================================================================--- tree-ssa-loop-ivopts.c      (revision 219705)+++ tree-ssa-loop-ivopts.c      (working copy)@@ -3458,7 +3458,7 @@ get_address_cost (bool symbol_present, b          end_sequence ();          acost = seq_cost (seq, speed);-         acost += address_cost (addr, mem_mode, as, speed);+         acost = 0;          if (!acost)            acost = 1;I got base+index addressing but still it is 6 insn loop becuase ofinduction of other expressions..L82:        movb    $0, (%r8,%rax)        addq    %rcx, %rax        addq    $1, %rbx        leaq    (%rsi,%rax), %rdx        cmpq    %rdx, %r14        jge     .L82Again, too aggressive iv optimization results in worse code generatedby GCC.  The code can be better which is demonstrated by LLVM-3.5.",RESOLVED          FIXED      
55701,bin cheng,Inline some instances of memset for ARM,"memset() is almost never inlined on ARM, even at -O3.  If the target is known to be 4-byte aligned or greater, it will be inlined for 1, 2, or 4 byte lengths.  If the target alignment is unknown, it will be inlined only for a single byte.I don't see this problem with similar builtins (memcpy, memmove, and memclear (memset with a target value of zero)) - they all inline small cases.It probably makes sense for memset to be inlined up to at least 16 bytes or so in all cases.When aligned, memcpy and memmove use a ldmia/stmia (load multiple/store multiple) sequence to create fairly compact inline code.  We could consider doing the same sort of optimization with memset, using stmia only.",RESOLVED          FIXED      
62151,bin cheng,[5 Regression] wrong code at -O2 and -O3 on x86_64-linux-gnu,"The current gcc trunk miscompiles the following code on x86_64-linux-gnu at -O2 and -O3 in both 32-bit and 64-bit modes.This is a regression from 4.9.x. $ gcc-trunk -vUsing built-in specs.COLLECT_GCC=gcc-trunkCOLLECT_LTO_WRAPPER=/usr/local/gcc-trunk/libexec/gcc/x86_64-unknown-linux-gnu/4.10.0/lto-wrapperTarget: x86_64-unknown-linux-gnuConfigured with: ../gcc-trunk/configure --prefix=/usr/local/gcc-trunk --enable-languages=c,c++ --disable-werror --enable-multilibThread model: posixgcc version 4.10.0 20140814 (experimental) [trunk revision 213937] (GCC) $ $ gcc-trunk -Os small.c; a.out$ gcc-4.9 -O2 small.c; a.out$     $ gcc-trunk -O2 small.c; a.outAborted (core dumped)$ gcc-trunk -O3 small.c; a.outAborted (core dumped)$ ----------------------------int a, c, d, e, f, g, h, i;short b;intfn1 (){  b = 0;  for (;;)    {      int j[2];      j[f] = 0;      if (h)	d = 0;      else	{	  for (; f; f++)	    ;	  for (a = 0; a < 1; a++)	    for (;;)	      {		i = b & ((b ^ 1) & 83647) ? b : b - 1;		g = 1 ? i : 0;		e = j[0];		if (c)		  break;		return 0;	      }	}    }}intmain (){  fn1 ();  if (g != -1)     __builtin_abort ();   return 0;}",RESOLVED          FIXED      
58623,bin cheng,lack of ldp/stp optimization,"The following C code:long long a, b;int c, d;int foo() { return a+b; }int bar() { return c+d; }generates this assembly code under -O3 -fsection-anchors -fno-common:foo:        adrp    x1, .LANCHOR0        add     x1, x1, :lo12:.LANCHOR0        ldr     x2, [x1]        ldr     x0, [x1,8]        add     w0, w2, w0        retbar:        adrp    x1, .LANCHOR0        add     x1, x1, :lo12:.LANCHOR0        ldr     w2, [x1,16]        ldr     w0, [x1,20]        add     w0, w2, w0        retNote that the ldr x2 and ldr x0 could have been merged into an ldp, in foo().  Similarly, the ldr w2 and ldr w0 (32-bit loads) could have been merged into an ldp in bar().The same optimization applies to stores as well.I am not sure if this would be handled by the proposed (but apparently not accepted) patch from March 2013:http://gcc.gnu.org/ml/gcc-patches/2013-03/msg01051.html",RESOLVED          FIXED      
62032,bin cheng,"FAIL: vsnprintf-chk.c execution,  -O2 -flto -fno-use-linker-plugin -flto-partition=none","Created attachment 33256 [details]tarball of dump filesHi,I monitored below failures on both aarch64-none-elf and arm-none-eabi.FAIL: gcc.c-torture/execute/builtins/vsnprintf-chk.c execution,  -O2 -flto -fno-use-linker-plugin -flto-partition=noneFAIL: gcc.c-torture/execute/builtins/vsnprintf-chk.c execution,  -O2 -flto -fuse-linker-plugin -fno-fat-lto-objectsIt's first introduced by r213585, but I am not sure if it's revealed by the change.  The corresponding (good&bogus) dump files are attached.arm-none-eabi is configured like:../gcc/configure --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=arm-none-eabi --prefix=.../trunk-orig/target/ --disable-decimal-float --disable-libffi --disable-libgomp --disable-libmudflap --disable-libquadmath --disable-libssp --disable-libstdcxx-pch --disable-nls --disable-shared --disable-threads --disable-tls --with-gnu-as --with-gnu-ld --with-newlib --with-headers=yes --with-sysroot=.../trunk-orig/target/arm-none-eabi --with-host-libstdcxx=... --with-mode=thumb --with-arch=armv7-m --disable-multilib --enable-lto --enable-languages=c,c++,ltoThanks.",RESOLVED          FIXED      
82687,Alan Modra,[8 regression] g++.dg/asan/default-options-1.C fails starting with r253914,This fails on both LE and BE.make -k check-gcc RUNTESTFLAGS=asan.exp=g++.dg/asan/default-options-1.C. . .FAIL: g++.dg/asan/default-options-1.C   -O2 -flto -fno-use-linker-plugin -flto-partition=none  output pattern testOutput was:Should match:WARNING: found 1 unrecognized flag\(s\):(||).*foo(||),RESOLVED          FIXED      
81890,Alan Modra,asm memory constraints are difficult and not well documented,"gcc doesn't have a simple way to say that a pointer passed to an inline asm isused to address an array.  ""m"" (*p) unfortunately only makes the asm depend onthe first element of an array.The following came about from a discussion starting athttps://gcc.gnu.org/ml/gcc/2017-08/msg00116.htmlCompiling with -DTRY=4 or -DTRY=6 give good results, and I believe arereasonable to extend to types other than char without falling foul of aliasingrules, but these tricks are a little contrived and not documented.  -DTRY=5 is no doubt what should be used but this does not appear to bedocumented./* -O3 */#include <stdio.h>#if TRY == 1int get_string_length (const char *p){  int count;  /* Unfortunately the ""m"" here only makes the asm depend on p[0], so     this is not safe.  The initialization of buff in main can be     partly moved past the get_string_length call.  */  __asm__ (""repne scasb""           : ""=c"" (count), ""+D"" (p)           : ""m"" (*p), ""0"" (-1), ""a"" (0)           );  return -2 - count;}#elif TRY == 2/* No better than the above.  */int get_string_length (const char p[]){  int count;  __asm__ (""repne scasb""           : ""=c"" (count), ""+D"" (p)           : ""m"" (*p), ""0"" (-1), ""a"" (0)           );  return -2 - count;}#elif TRY == 3int get_string_length (const char *p){  int count;  /* Warns unfortunately, but works, at least on some versions of gcc.  */  __asm__ (""repne scasb""           : ""=c"" (count), ""+D"" (p)           : ""m"" (*(const void *)p), ""0"" (-1), ""a"" (0)           );  return -2 - count;}#elif TRY == 4int get_string_length (const char *p){  int count;  /* A way of saying that p points to an array of indeterminate     length, near enough.  */  __asm__ (""repne scasb""           : ""=c"" (count), ""+D"" (p)           : ""m"" (*(const struct {char a; char x[];} *) p), ""0"" (-1), ""a"" (0)           );  return -2 - count;}#elif TRY == 5int get_string_length (const char *p){  int count;  /* The right way to say that p points to an array of char of     indeterminate length.  */  __asm__ (""repne scasb""           : ""=c"" (count), ""+D"" (p)           : ""m"" (*(const char (*)[]) p), ""0"" (-1), ""a"" (0)           );  return -2 - count;}#elif TRY == 6int get_string_length (const char *p){  int count;  /* Make gcc lose detailed information regarding the memory pointed     to by p.  This, in conjuction with ""m"" (*p) as an input below     will act similarly to a ""memory"" clobber, but is more precise in     that it doesn't say all memory may be written.  */  __asm__ (""#%0"" : ""+X"" (p));  __asm__ (""repne scasb""           : ""=c"" (count), ""+D"" (p)           : ""m"" (*p), ""0"" (-1), ""a"" (0)           );  return -2 - count;}#elif TRY == 7int get_string_length (const char *p){  int count;  /* As recommended by the gcc info doc.  Suffers from needing to know     the size of the array.  */  __asm__ (""repne scasb""           : ""=c"" (count), ""+D"" (p)           : ""m"" (*(const struct {char x[48];} *) p), ""0"" (-1), ""a"" (0)           );  return -2 - count;}#elseint get_string_length (const char *p){  int count;  /* Bog standard, but unfortunately says to gcc that memory might be     written by the asm.  As can be seen by inspecting the code     produced, this means ""expected"" below must be read before calling     get_string_length, using an extra register.  This may result in     less optimized code in real-world examples.  */  __asm__ (""repne scasb""           : ""=c"" (count), ""+D"" (p)           : ""0"" (-1), ""a"" (0)           : ""memory""           );  return -2 - count;}#endifint expected = 4;intmain (){  char buff[48] = ""hello world"";  buff[4] = 0;  int b = expected;  int a = get_string_length (buff);  printf (""%s: %d %d\n"", buff, a, b);  return 0;}",RESOLVED          FIXED      
81996,Alan Modra,powerpc __builtin_return_address(0) fails with -fPIC -fstack-protector-all or -fsanitize=address,"I've found a problem on glibc-2.25 where glibc crashes at startup.Minimal reproducer does not crash the program but yields bad result:  #include <stdio.h>  static void * f(void) __attribute__((noinline));  static void * f(void) {      return __builtin_extract_return_addr (__builtin_return_address(0));  }  int main(void) {    printf (""main    =%p\n"", &main);    printf (""ret_addr=%p\n"", f());    return 0;  }$ powerpc-unknown-linux-gnu-gcc-7.2.0 a.c -O2 -fno-PIC -o a && ./amain    =0x100002e0ret_addr=0x1000030c <- good!$ powerpc-unknown-linux-gnu-gcc-7.2.0 a.c -O2 -fPIC -o a && ./amain    =0x100002e0ret_addr=0x4        <- bad![ In real example glibc crash happens at RETURN_ADDRESS(0) call here:    https://sourceware.org/git/?p=glibc.git;a=blob;f=malloc/malloc.c;h=e3ff778113febdd0533aeea70f1a35f62259bcfd;hb=HEAD#l3061 ]Normally gcc should use 'lr' value in both cases but for some reasonit tries to spill 'lr' into stack and then reads it from wrong location:-fno-PIC: a frame is buit, but good (master does even better than that):10000410 <f>:10000410:       94 21 ff f0     stwu    r1,-16(r1)10000414:       7c 68 02 a6     mflr    r310000418:       38 21 00 10     addi    r1,r1,161000041c:       4e 80 00 20     blr-fPIC (10000420 <f>:10000420:       94 21 ff e0     stwu    r1,-32(r1)10000424:       7c 08 02 a6     mflr    r010000428:       90 01 00 24     stw     r0,36(r1) ; spill 'lr' into stack1000042c:       93 c1 00 18     stw     r30,24(r1)10000430:       81 21 00 10     lwz     r9,16(r1) ; step1 (uninitialized garbage value)10000434:       80 01 00 24     lwz     r0,36(r1)10000438:       80 69 00 04     lwz     r3,4(r9) ; step2 (glibc SIGSEGVs here)1000043c:       83 c1 00 18     lwz     r30,24(r1)10000440:       38 21 00 20     addi    r1,r1,3210000444:       7c 08 03 a6     mtlr    r010000448:       4e 80 00 20     blr",RESOLVED          FIXED      
81747,Alan Modra,"[8 Regression] ICE in operator[], at vec.h:749","At least gcc-8.0.0-alpha20170730 and gcc-8.0.0-alpha20170806 snapshots ICE when compiling the following snippet w/ -O2 (-O3, -Ofast) -funroll-loops:intij (int pu, int x5){  int u7 = 3;  unsigned int fa;  for (fa = 533090919; fa < 1; ++fa)    {      pu = 1;      while (pu != 0)      { ed:        u7 %= 1;      }    }  if (x5 < 1)    {      if (fa != 3062256262 && u7 != 0)        goto ed;      return x5;    }}% powerpc-e300c3-linux-gnu-gcc-8.0.0-alpha20170806 -O2 -funroll-loops -c -w whfolj7o.c   during RTL pass: cse2whfolj7o.c: In function 'ij':whfolj7o.c:23:1: internal compiler error: in operator[], at vec.h:749 } ^0x135560c vec<edge_def*, va_gc, vl_embed>::operator[](unsigned int)	/var/tmp/portage/cross-powerpc-e300c3-linux-gnu/gcc-8.0.0_alpha20170806/work/gcc-8-20170806/gcc/vec.h:7490x135560c cse_find_path	/var/tmp/portage/cross-powerpc-e300c3-linux-gnu/gcc-8.0.0_alpha20170806/work/gcc-8-20170806/gcc/cse.c:63330x135560c cse_main	/var/tmp/portage/cross-powerpc-e300c3-linux-gnu/gcc-8.0.0_alpha20170806/work/gcc-8-20170806/gcc/cse.c:67290x13557a6 rest_of_handle_cse2	/var/tmp/portage/cross-powerpc-e300c3-linux-gnu/gcc-8.0.0_alpha20170806/work/gcc-8-20170806/gcc/cse.c:76320x13557a6 execute	/var/tmp/portage/cross-powerpc-e300c3-linux-gnu/gcc-8.0.0_alpha20170806/work/gcc-8-20170806/gcc/cse.c:7685",RESOLVED          FIXED      
81170,Alan Modra,powerpc*-linux --enable-default-pie chooses incorrect startup files,"Configuring any powerpc linux target with --enable-default-pie gives a broken compiler that uses crt1.o, crtbegin.o and crtend.o to build a (default) PIE.  This results in binaries with text relocations, and the linker refusing to link code with ifunc resolvers.  The correct selection of startup files for PIEs is Scrt1.o, crtbeginS.o and crtendS.o (as can be seen when explicitly passing -pie).",RESOLVED          FIXED      
79286,Alan Modra,[7 Regression] ira and lra wrong code at -O2 and -Os on i686-linux,"This seems to be a recent regression. $ gcc-trunk -vUsing built-in specs.COLLECT_GCC=gcc-trunkCOLLECT_LTO_WRAPPER=/usr/local/gcc-trunk/libexec/gcc/x86_64-pc-linux-gnu/7.0.1/lto-wrapperTarget: x86_64-pc-linux-gnuConfigured with: ../gcc-source-trunk/configure --enable-languages=c,c++,lto --prefix=/usr/local/gcc-trunk --disable-bootstrapThread model: posixgcc version 7.0.1 20170130 (experimental) [trunk revision 245020] (GCC)$$ gcc-trunk -m32 -O2 small.c; ./a.out$ gcc-trunk -m64 -O3 small.c; ./a.out$$ gcc-trunk -m32 -O3 small.c$ ./a.outSegmentation fault (core dumped)$---------------------------------------------int printf (const char *, ...);int a[6], b, c, d, e, f, g, h;static int i[][8] = { { 0 } };void fn1 (int l){   c = (c & 5) ^ a[(c ^ l) & 5];}void fn2 (){   fn1 (e >> 5);  fn1 (e >> 6 & 5);  c = (c & 5) ^ a[(c ^ 5) & 5];  fn1 (e >> 2 & 5);  fn1 (e & 5);  fn1 (e >> 28 & 5);}void fn3 (){   int k;  for (; g < 4; g++)    {       while (d)        {           fn2 ();          if (k)            printf (""%d\n"", k);        }      while (f)        while (h++)          k = i[300000000000000000][0];      while (b)        while (1)          d++;    }}int main (){   fn3 ();  return 0;}",RESOLVED          FIXED      
45053,Alan Modra,libgcc_s link command misses crtsavgpr_s and crtresgpr_s for powerpc,"[I know this is a duplicate of 43810, but the information there is	partly misleading, so I decided to file a new report.]	If GCC is configured for powerpc with --enable-target-optspace,	libgcc_s objects get compiled with -Os, and this causes libgcc_s	to contain undefined symbols _savegpr_* and _restgpr_*.	This is probably due to this commit:	http://gcc.gnu.org/viewcvs?root=gcc&view=rev&rev=151729	(The use of those symbols might also depend on --with-float=soft,	I didn't test with a different float option.)	Those symbols _savegpr_* and _restgpr_* are defined in	crtsavgpr_s.o and crtresgpr_s.o, respectively.  But those objects	are not linked into libgcc_s.	The problem also occurs with gcc-4.5.1-RC-20100722 and with	gcc-4.4.4, if the patch for pr41175 is applied.Environment:System: Linux sonnet 2.6.24-28-generic #1 SMP Fri Jun 18 14:18:04 UTC 2010 x86_64 GNU/Linuxhost: x86_64-unknown-linux-gnubuild: x86_64-unknown-linux-gnutarget: powerpc-none-linux-gnuconfigured with: /work2/build/cross-own/src/gcc-4.5.0/configure --target=powerpc-none-linux-gnu --prefix=/work2/build/cross-own/ppc-own-tmp --disable-threads --disable-nls --disable-multilib --disable-libgomp --disable-libssp --disable-libmudflap --enable-decimal-float=no --disable-libssp --enable-shared --enable-languages=c --enable-checking=yes --enable-symvers=gnu --enable-target-optspace --with-float=soft --with-local-prefix=/work2/build/cross-own/ppc-own/sys-root --with-build-sysroot=/work2/build/cross-own/ppc-own/sys-root --with-sysroot=/work2/build/cross-own/ppc-own/sys-rootHow-To-Repeat:	configure for powerpc and --enable-target-optspace (and possibly --with-float=soft)",RESOLVED          FIXED      
79584,Alan Modra,"ICE in base_to_reg, at lra-constraints.c:2918","Testcase c-c++-common/dfp/pr35620.c ICE's as follows:$ ~/install/gcc/trunk/bin/gcc -S -O2 -m32 -mcpu=power7 ~/src/gcc/trunk/gcc/gcc/testsuite/c-c++-common/dfp/pr35620.c/home/pthaugen/src/gcc/trunk/gcc/gcc/testsuite/c-c++-common/dfp/pr35620.c: In function ‘blatz’:/home/pthaugen/src/gcc/trunk/gcc/gcc/testsuite/c-c++-common/dfp/pr35620.c:21:1: internal compiler error: in base_to_reg, at lra-constraints.c:2918 } ^0x106f5aaf base_to_reg	/home/pthaugen/src/gcc/trunk/gcc/gcc/lra-constraints.c:29180x106f5aaf process_address_1	/home/pthaugen/src/gcc/trunk/gcc/gcc/lra-constraints.c:32900x106f6e53 process_address	/home/pthaugen/src/gcc/trunk/gcc/gcc/lra-constraints.c:34090x106f6e53 curr_insn_transform	/home/pthaugen/src/gcc/trunk/gcc/gcc/lra-constraints.c:37190x106fa80b lra_constraints(bool)	/home/pthaugen/src/gcc/trunk/gcc/gcc/lra-constraints.c:47320x106de24f lra(_IO_FILE*)	/home/pthaugen/src/gcc/trunk/gcc/gcc/lra.c:23780x10680467 do_reload	/home/pthaugen/src/gcc/trunk/gcc/gcc/ira.c:54000x10680467 execute	/home/pthaugen/src/gcc/trunk/gcc/gcc/ira.c:5584Please submit a full bug report,This started showing up in gcc-testresults after r243866 which turned on -fsched-pressure for PowerPC, but can reproduced on earlier revisions by adding -fsched-pressure.",RESOLVED          FIXED      
79144,Alan Modra,cmpstrnsi optimization breaks glibc,"Created attachment 40541 [details]strncmp testcaseglibc built with current gcc fails elf/check-localplt due to strcmp and strncmp appearing in the PLT, when -mcpu=power6 or above.  strncmp emitted by rs6000.c:expand_strn_compare ought to use the asm alias __GI_strncmp given in the attached testcase.  For example, as it does when compiled with -O2 -m32 -mcpu=power5, producing:foo:	lis 4,.LC0@ha	li 5,6	la 4,.LC0@l(4)	b __GI_strncmp",RESOLVED          FIXED      
79066,Alan Modra,[7 Regression] non-PIC code generated for powerpc glibc with -fpic,"Created attachment 40506 [details]Preprocessed sourceGCC, configured thus for 32-bit powerpc hard-float, produces non-PIC code when building glibc libm.Target: powerpc-glibc-linux-gnuConfigured with: /scratch/jmyers/glibc/many7/src/gcc/configure --prefix=/scratch/jmyers/glibc/many7/install/compilers/powerpc-linux-gnu --build=x86_64-pc-linux-gnu --host=x86_64-pc-linux-gnu --target=powerpc-glibc-linux-gnu --with-sysroot=/scratch/jmyers/glibc/many7/install/compilers/powerpc-linux-gnu/sysroot --disable-multilib --enable-secureplt --disable-libsanitizer --disable-libssp --with-gmp=/scratch/jmyers/glibc/many7/install/host-libraries --with-mpfr=/scratch/jmyers/glibc/many7/install/host-libraries --with-mpc=/scratch/jmyers/glibc/many7/install/host-libraries --enable-languages=c,c++ --enable-shared --enable-threadsThread model: posixgcc version 7.0.0 20170112 (experimental) [trunk revision 244346] (GCC) Compile with:powerpc-glibc-linux-gnu-gcc -S -std=gnu11 -fgnu89-inline  -O2 -fmerge-all-constants -fno-stack-protector -frounding-math -fpic e_asin.iThe resulting code contains, towards the end of __ieee754_asin (and again for __ieee754_acos):        lis 9,.LC44@ha[...]        la 9,.LC44@l(9)These are absolute non-PIC relocations and result in text relocations in libm.so.This appeared with r242908 but presumably was latent before then.Preprocessed source attached.",RESOLVED          FIXED      
79098,Alan Modra,[7 Regression] Failure to bootstrap gcc for powerpc-e500v2-linux-gnuspe target,"When building gcc-7.0.0-20170115 snapshot for powerpc-e500v2-linux-gnuspe I now get the following:x86_64-pc-linux-gnu-g++ -fno-PIE -c   -O2 -pipe -g -fPIC -DIN_GCC  -DCROSS_DIRECTORY_STRUCTURE   -fno-exceptions -fno-rtti -fasynchronous-unwind-tables -W -Wall -Wno-narrowing -Wwrite-strings -Wcast-qual -Wmissing-format-attribute -Woverloaded-virtual -pedantic -Wno-long-long -Wno-variadic-macros -Wno-overlength-strings -fno-common  -DHAVE_CONFIG_H -I. -I. -I/var/tmp/portage/cross-powerpc-e500v2-linux-gnuspe/gcc-7.0.0_alpha20170115/work/gcc-7-20170115/gcc -I/var/tmp/portage/cross-powerpc-e500v2-linux-gnuspe/gcc-7.0.0_alpha20170115/work/gcc-7-20170115/gcc/. -I/var/tmp/portage/cross-powerpc-e500v2-linux-gnuspe/gcc-7.0.0_alpha20170115/work/gcc-7-20170115/gcc/../include -I/var/tmp/portage/cross-powerpc-e500v2-linux-gnuspe/gcc-7.0.0_alpha20170115/work/gcc-7-20170115/gcc/../libcpp/include  -I/var/tmp/portage/cross-powerpc-e500v2-linux-gnuspe/gcc-7.0.0_alpha20170115/work/gcc-7-20170115/gcc/../libdecnumber -I/var/tmp/portage/cross-powerpc-e500v2-linux-gnuspe/gcc-7.0.0_alpha20170115/work/gcc-7-20170115/gcc/../libdecnumber/dpd -I../libdecnumber -I/var/tmp/portage/cross-powerpc-e500v2-linux-gnuspe/gcc-7.0.0_alpha20170115/work/gcc-7-20170115/gcc/../libbacktrace   -o rs6000.o -MT rs6000.o -MMD -MP -MF ./.deps/rs6000.TPo /var/tmp/portage/cross-powerpc-e500v2-linux-gnuspe/gcc-7.0.0_alpha20170115/work/gcc-7-20170115/gcc/config/rs6000/rs6000.c/var/tmp/portage/cross-powerpc-e500v2-linux-gnuspe/gcc-7.0.0_alpha20170115/work/gcc-7-20170115/gcc/config/rs6000/rs6000.c: In function  bool rs6000_legitimate_combined_insn(rtx_insn*)':/var/tmp/portage/cross-powerpc-e500v2-linux-gnuspe/gcc-7.0.0_alpha20170115/work/gcc-7-20170115/gcc/config/rs6000/rs6000.c:9115:5: error: duplicate case value     case CODE_FOR_ctrdi_internal2:     ^/var/tmp/portage/cross-powerpc-e500v2-linux-gnuspe/gcc-7.0.0_alpha20170115/work/gcc-7-20170115/gcc/config/rs6000/rs6000.c:9113:5: error: previously used here     case CODE_FOR_ctrdi_internal1:     ^/var/tmp/portage/cross-powerpc-e500v2-linux-gnuspe/gcc-7.0.0_alpha20170115/work/gcc-7-20170115/gcc/config/rs6000/rs6000.c:9117:5: error: duplicate case value     case CODE_FOR_ctrdi_internal3:     ^/var/tmp/portage/cross-powerpc-e500v2-linux-gnuspe/gcc-7.0.0_alpha20170115/work/gcc-7-20170115/gcc/config/rs6000/rs6000.c:9113:5: error: previously used here     case CODE_FOR_ctrdi_internal1:     ^/var/tmp/portage/cross-powerpc-e500v2-linux-gnuspe/gcc-7.0.0_alpha20170115/work/gcc-7-20170115/gcc/config/rs6000/rs6000.c:9119:5: error: duplicate case value     case CODE_FOR_ctrdi_internal4:     ^/var/tmp/portage/cross-powerpc-e500v2-linux-gnuspe/gcc-7.0.0_alpha20170115/work/gcc-7-20170115/gcc/config/rs6000/rs6000.c:9113:5: error: previously used here     case CODE_FOR_ctrdi_internal1:     ^make[2]: *** [Makefile:2222: rs6000.o] Error 1It is likely caused by r244465. gcc for powerpc-e300c3-linux-gnu builds fine, though.",RESOLVED          FIXED      
52107,Alan Modra,IBM 128bit long double constant loaded inefficiently,"/* -m64 -O2 -mcmodel=small */typedef float TFtype __attribute__ ((mode (TF)));TFtype f2 (TFtype x){  return x * 0x1p-64f;}gives[snip].LC2:        .tc ID_0_0[TC],0x000000000.LC3:        .tc ID_0_3bf00000[TC],0x03bf00000[snip].L.f2:        mflr 0        lfd 3,.LC3@toc(2)        std 0,16(1)        stdu 1,-128(1)        lfd 4,.LC2@toc(2)        stfd 3,112(1)        ld 9,112(1)        sldi 9,9,32        std 9,112(1)        lfd 3,112(1)        bl __gcc_qmul[snip]Horrible!  How come the bit pattern is stored right-shifted, and so needs shifting back into place?  By comparison, gcc-4.4.1 generated[snip].LC1:        .tc ID_3bf00000_0[TC],0x3bf0000000000000.LC2:        .tc ID_0_0[TC],0x000000000[snip].L.f2:        mflr 0        lfd 4,.LC2@toc(2)        lfd 3,.LC1@toc(2)        std 0,16(1)        stdu 1,-112(1)        bl __gcc_qmul[snip]",RESOLVED          FIXED      
51298,Alan Modra,libgomp team_barrier locking failures,"There seems to be a locking related failure in the linux barrier implementation, because libgomp testcases hang on power7.  This is both before and after the fix for http://gcc.gnu.org/bugzilla/show_bug.cgi?id=51249Here's a dump of some info from one of the hung tests that might help pin down the problem.  Then again, it might not.  power7 quite aggressively speculates reads, so I suspect a missing read barrier somewhere.(gdb) bt#0  0x00000fff91ebf36c in sys_futex0 (val=0, op=<optimized out>, addr=0x100210d4) at /home/amodra/src/gcc-current/libgomp/config/linux/powerpc/futex.h:48#1  futex_wait (val=0, addr=0x100210d4) at /home/amodra/src/gcc-current/libgomp/config/linux/powerpc/futex.h:61#2  do_wait (val=0, addr=<optimized out>) at /home/amodra/src/gcc-current/libgomp/config/linux/wait.h:64#3  gomp_team_barrier_wait_end (bar=0x100210d0, state=0) at /home/amodra/src/gcc-current/libgomp/config/linux/bar.c:109#4  0x00000fff91eb7540 in GOMP_barrier () at /home/amodra/src/gcc-current/libgomp/barrier.c:40#5  0x0000000010000f10 in .test_barrier.822._omp_fn.2 () at /home/amodra/src/gcc-current/libgomp/testsuite/libgomp.fortran/omp_parse2.f90:59#6  0x0000000010000b90 in test_barrier () at /home/amodra/src/gcc-current/libgomp/testsuite/libgomp.fortran/omp_parse2.f90:56#7  MAIN__ () at /home/amodra/src/gcc-current/libgomp/testsuite/libgomp.fortran/omp_parse2.f90:5#8  main (argc=<optimized out>, argv=<optimized out>) at /home/amodra/src/gcc-current/libgomp/testsuite/libgomp.fortran/omp_parse2.f90:2#9  0x00000fff91ccf05c in .generic_start_main () from /lib64/power7/libc.so.6#10 0x00000fff91ccf27c in .__libc_start_main () from /lib64/power7/libc.so.6#11 0x0000000000000000 in ?? ()(gdb) up 3#3  gomp_team_barrier_wait_end (bar=0x100210d0, state=0) at /home/amodra/src/gcc-current/libgomp/config/linux/bar.c:109(gdb) p *bar$1 = {total = 4, generation = 0, awaited = 1}(gdb) p state$2 = 0(gdb) p generation$3 = 0(gdb) p gomp_tls_data$4 = {fn = 0, data = 0x0, ts = {team = 0x10021050, work_share = 0x10021150, last_work_share = 0x0, team_id = 0, level = 1, active_level = 1, single_count = 0, static_trip = 0}, task = 0x10021568, release = {count = 0}, thread_pool = 0x10021760}(gdb) p *gomp_tls_data.ts.team$5 = {nthreads = 4, work_share_chunk = 8, prev_ts = {team = 0x0, work_share = 0x0, last_work_share = 0x0, team_id = 0, level = 0, active_level = 0, single_count = 0, static_trip = 0}, master_release = {count = 0}, ordered_release = 0x10021708, work_share_list_alloc = 0x100211d0, work_share_list_free = 0x0, single_count = 0, barrier = {total = 4, generation = 0, awaited = 1}, work_shares = {{sched = GFS_RUNTIME, mode = 0, {{chunk_size = 0, end = 0, incr = 0}, {chunk_size_ull = 0, end_ull = 0, incr_ull = 0}}, ordered_team_ids = 0x0, ordered_num_used = 0, ordered_owner = 0, ordered_cur = 0, next_alloc = 0x0, lock = {flag = 0}, threads_completed = 0, {next = 0, next_ull = 0, copyprivate = 0x0}, {next_ws = 0x0, next_free = 0x0}, inline_ordered_team_ids = 0x100211a8}, {sched = GFS_RUNTIME, mode = 0, {{chunk_size = 0, end = 0, incr = 0}, {chunk_size_ull = 0, end_ull = 0, incr_ull = 0}}, ordered_team_ids = 0x0, ordered_num_used = 0, ordered_owner = 0, ordered_cur = 0, next_alloc = 0x0, lock = {flag = 0}, threads_completed = 0, {next = 0, next_ull = 0, copyprivate = 0x0}, {next_ws = 0x10021250, next_free = 0x10021250}, inline_ordered_team_ids = 0x10021228}, {sched = GFS_RUNTIME, mode = 0, {{chunk_size = 0, end = 0, incr = 0}, {chunk_size_ull = 0, end_ull = 0, incr_ull = 0}}, ordered_team_ids = 0x0, ordered_num_used = 0, ordered_owner = 0, ordered_cur = 0, next_alloc = 0x0, lock = {flag = 0}, threads_completed = 0, {next = 0, next_ull = 0, copyprivate = 0x0}, {next_ws = 0x100212d0, next_free = 0x100212d0}, inline_ordered_team_ids = 0x100212a8}, {sched = GFS_RUNTIME, mode = 0, {{chunk_size = 0, end = 0, incr = 0}, {chunk_size_ull = 0, end_ull = 0, incr_ull = 0}}, ordered_team_ids = 0x0, ordered_num_used = 0, ordered_owner = 0, ordered_cur = 0, next_alloc = 0x0, lock = {flag = 0}, threads_completed = 0, {next = 0, next_ull = 0, copyprivate = 0x0}, {next_ws = 0x10021350, next_free = 0x10021350}, inline_ordered_team_ids = 0x10021328}, {sched = GFS_RUNTIME, mode = 0, {{chunk_size = 0, end = 0, incr = 0}, {chunk_size_ull = 0, end_ull = 0, incr_ull = 0}}, ordered_team_ids = 0x0, ordered_num_used = 0, ordered_owner = 0, ordered_cur = 0, next_alloc = 0x0, lock = {flag = 0}, threads_completed = 0, {next = 0, next_ull = 0, copyprivate = 0x0}, {next_ws = 0x100213d0, next_free = 0x100213d0}, inline_ordered_team_ids = 0x100213a8}, {sched = GFS_RUNTIME, mode = 0, {{chunk_size = 0, end = 0, incr = 0}, {chunk_size_ull = 0, end_ull = 0, incr_ull = 0}}, ordered_team_ids = 0x0, ordered_num_used = 0, ordered_owner = 0, ordered_cur = 0, next_alloc = 0x0, lock = {flag = 0}, threads_completed = 0, {next = 0, next_ull = 0, copyprivate = 0x0}, {next_ws = 0x10021450, next_free = 0x10021450}, inline_ordered_team_ids = 0x10021428}, {sched = GFS_RUNTIME, mode = 0, {{chunk_size = 0, end = 0, incr = 0}, {chunk_size_ull = 0, end_ull = 0, incr_ull = 0}}, ordered_team_ids = 0x0, ordered_num_used = 0, ordered_owner = 0, ordered_cur = 0, next_alloc = 0x0, lock = {flag = 0}, threads_completed = 0, {next = 0, next_ull = 0, copyprivate = 0x0}, {next_ws = 0x100214d0, next_free = 0x100214d0}, inline_ordered_team_ids = 0x100214a8}, {sched = GFS_RUNTIME, mode = 0, {{chunk_size = 0, end = 0, incr = 0}, {chunk_size_ull = 0, end_ull = 0, incr_ull = 0}}, ordered_team_ids = 0x0, ordered_num_used = 0, ordered_owner = 0, ordered_cur = 0, next_alloc = 0x0, lock = {flag = 0}, threads_completed = 0, {next = 0, next_ull = 0, copyprivate = 0x0}, {next_ws = 0x0, next_free = 0x0}, inline_ordered_team_ids = 0x10021528}}, task_lock = {flag = 0}, task_queue = 0x0, task_count = 0, task_running_count = 0, implicit_task = 0x10021568}(gdb) p *gomp_tls_data.ts.work_share$6 = {sched = GFS_RUNTIME, mode = 0, {{chunk_size = 0, end = 0, incr = 0}, {chunk_size_ull = 0, end_ull = 0, incr_ull = 0}}, ordered_team_ids = 0x0, ordered_num_used = 0, ordered_owner = 0, ordered_cur = 0, next_alloc = 0x0, lock = {flag = 0}, threads_completed = 0, {next = 0, next_ull = 0, copyprivate = 0x0}, {next_ws = 0x0, next_free = 0x0}, inline_ordered_team_ids = 0x100211a8}",RESOLVED          FIXED      
51051,Alan Modra,[4.7 Regression]: build fails on cris-elf building libstdc++-v3,"Created attachment 25763 [details]cc1plus -fpreprocessed new_opv.ii -melf -g -O2 -fno-implicit-templates -fdiagnostics-show-location=once -ffunction-sections -fdata-sections -frandom-seed=new_opv.lo -o new_opv.sA patch in the revision range (last_known_working:first_known_failing) 181187:181189 caused the build for cris-elf to fail as follows:libtool: compile:  /tmp/hpautotest-gcc1/cris-elf/gccobj/./gcc/xgcc -shared-libgcc -B/tmp/hpautotest-gcc1/cris-elf/gccobj/./gcc -nostdinc++ -L/tmp/hpautotest-gcc1/cris-elf/gccobj/cris-elf/libstdc++-v3/src -L/tmp/hpautotest-gcc1/cris-elf/gccobj/cris-elf/libstdc++-v3/src/.libs -nostdinc -B/tmp/hpautotest-gcc1/cris-elf/gccobj/cris-elf/newlib/ -isystem /tmp/hpautotest-gcc1/cris-elf/gccobj/cris-elf/newlib/targ-include -isystem /tmp/hpautotest-gcc1/gcc/newlib/libc/include -B/tmp/hpautotest-gcc1/cris-elf/gccobj/cris-elf/libgloss/cris -L/tmp/hpautotest-gcc1/cris-elf/gccobj/cris-elf/libgloss/libnosys -L/tmp/hpautotest-gcc1/gcc/libgloss/cris -B/tmp/hpautotest-gcc1/cris-elf/pre/cris-elf/bin/ -B/tmp/hpautotest-gcc1/cris-elf/pre/cris-elf/lib/ -isystem /tmp/hpautotest-gcc1/cris-elf/pre/cris-elf/include -isystem /tmp/hpautotest-gcc1/cris-elf/pre/cris-elf/sys-include -I/tmp/hpautotest-gcc1/gcc/libstdc++-v3/../libgcc -I/tmp/hpautotest-gcc1/cris-elf/gccobj/cris-elf/libstdc++-v3/include/cris-elf -I/tmp/hpautotest-gcc1/cris-elf/gccobj/cris-elf/libstdc++-v3/include -I/tmp/hpautotest-gcc1/gcc/libstdc++-v3/libsupc++ -fno-implicit-templates -Wall -Wextra -Wwrite-strings -Wcast-qual -fdiagnostics-show-location=once -ffunction-sections -fdata-sections -frandom-seed=new_opv.lo -g -O2 -c /tmp/hpautotest-gcc1/gcc/libstdc++-v3/libsupc++/new_opv.cc -o new_opv.o/tmp/hpautotest-gcc1/gcc/libstdc++-v3/libsupc++/new_opv.cc: In function 'void* operator new [](std::size_t)':/tmp/hpautotest-gcc1/gcc/libstdc++-v3/libsupc++/new_opv.cc:34:1: error: missing REG_EH_REGION note in the end of bb 2/tmp/hpautotest-gcc1/gcc/libstdc++-v3/libsupc++/new_opv.cc:34:1: error: call edges for non-call insn in bb 2/tmp/hpautotest-gcc1/gcc/libstdc++-v3/libsupc++/new_opv.cc:34:1: error: in basic block 2:/tmp/hpautotest-gcc1/gcc/libstdc++-v3/libsupc++/new_opv.cc:34:1: error: flow control insn inside a basic block(call_insn 8 6 50 2 (parallel [            (set (reg:SI 10 r10)                (call (mem:QI (symbol_ref:SI (""_Znwm"") [flags 0x41] <function_decl 0x7f94a90bf300 operator new>) [0 operator new S1 A8])                    (const_int 0 [0])))            (clobber (reg:SI 16 srp))        ]) /tmp/hpautotest-gcc1/gcc/libstdc++-v3/libsupc++/new_opv.cc:33 222 {*expanded_call_value_non_v32}     (expr_list:REG_EH_REGION (const_int 1 [0x1])        (nil))    (expr_list:REG_UNUSED (use (reg:SI 10 r10))        (nil)))/tmp/hpautotest-gcc1/gcc/libstdc++-v3/libsupc++/new_opv.cc:34:1: internal compiler error: in rtl_verify_flow_info_1, at cfgrtl.c:2001Author of suspect patch in revision range CC:ed and preprocessed source attached.",RESOLVED          FIXED      
51249,Alan Modra,semaphore implemetation for linux leaves threads blocked,"Refer libgomp/config/linux/sem.[ch]Threads A, B, C.  Initial sem value = 1.A calls gomp_sem_wait, successfully decrements sem to 0.B calls gomp_set_wait, drops into gomp_sem_wait_slow, sets sem to -1and blocks.C calls gomp_set_wait, and similarly blocks.  sem is -1.A calls gomp_sem_post, drops into gomp_sem_post_slow, sets sem to 1and wakes one thread, lets say B.B grabs sem, sets it to 0.B calls gomp_sem_post, setting sem to 1 but does not wake up C.With no more semaphore activity, C stays blocked forever.You might think that adding one to wake count would fix this,ie. waking one more thread than can successfully get the semaphore,with the idea that the failing thread will then set sem to -1 to flagthat some threads are waiting.  That doesn't work though.  Add onemore thread to the example above, D, that like C is blocked.  When Awakes two threads, B and C say, B might get the sem then release itbefore C runs.  Then C won't wake up D.",RESOLVED          FIXED      
51086,Alan Modra,"[4.7 regression] ICE in move_insn, at haifa-sched.c:3437","Between r181096 and r181259, cc1plus started to ICE compiling the stage 1libstd++:$  /var/gcc/regression/trunk/11-gcc-gas/build/./gcc/xgcc -shared-libgcc -B/var/gcc/regression/trunk/11-gcc-gas/build/./gcc -nostdinc++ -L/var/gcc/regression/trunk/11-gcc-gas/build/sparc-sun-solaris2.11/libstdc++-v3/src -L/var/gcc/regression/trunk/11-gcc-gas/build/sparc-sun-solaris2.11/libstdc++-v3/src/.libs -B/vol/gcc/sparc-sun-solaris2.11/bin/ -B/vol/gcc/sparc-sun-solaris2.11/lib/ -isystem /vol/gcc/sparc-sun-solaris2.11/include -isystem /vol/gcc/sparc-sun-solaris2.11/sys-include -I/var/gcc/regression/trunk/11-gcc-gas/build/sparc-sun-solaris2.11/libstdc++-v3/include/sparc-sun-solaris2.11 -I/var/gcc/regression/trunk/11-gcc-gas/build/sparc-sun-solaris2.11/libstdc++-v3/include -I/vol/gcc/src/hg/trunk/local/libstdc++-v3/libsupc++ -fno-implicit-templates -Wall -Wextra -Wwrite-strings -Wcast-qual -fdiagnostics-show-location=once -ffunction-sections -fdata-sections -frandom-seed=wlocale-inst.lo -g -O2 -c /vol/gcc/src/hg/trunk/local/libstdc++-v3/src/wlocale-inst.cc  -fPIC -DPIC -o .libs/wlocale-inst.o In file included from /var/gcc/regression/trunk/11-gcc-gas/build/sparc-sun-solaris2.11/libstdc++-v3/include/bits/locale_facets.h:2607:0,                 from /var/gcc/regression/trunk/11-gcc-gas/build/sparc-sun-solaris2.11/libstdc++-v3/include/locale:42,                 from /vol/gcc/src/hg/trunk/local/libstdc++-v3/src/locale-inst.cc:30,                 from /vol/gcc/src/hg/trunk/local/libstdc++-v3/src/wlocale-inst.cc:34:/var/gcc/regression/trunk/11-gcc-gas/build/sparc-sun-solaris2.11/libstdc++-v3/include/bits/locale_facets.tcc: In member function 'void std::__numpunct_cache<_CharT>::_M_cache(const std::locale&) [with _CharT = wchar_t]':/var/gcc/regression/trunk/11-gcc-gas/build/sparc-sun-solaris2.11/libstdc++-v3/include/bits/locale_facets.tcc:128:5: internal compiler error: in move_insn, at haifa-sched.c:3437The failure can be reproduced with the attached input file:$ cc1plus -fpreprocessed wlocale-inst.ii -quiet -mcpu=v9 -O2 -o wlocale-inst.s  Rainer",RESOLVED          FIXED      
30282,Alan Modra,Optimization flag -O1 -fschedule-insns2 cause red zone to be used when there is none,"Stack operating code that generated by gcc have an error. In some operating system that saved the thread's context in stack when schedule, it will be have critical problem.Enabling the compiler optimalisation (-O2 option) the error will be occuring, and don't occur when using option -O1 or -O0.--- sample ---array.c:int find_num(int i){    const int arr[5] = {0, 1, 2, 3, 4};    return arr[i];}using command:  ppc-eabi-gcc -c -O2 array.c -o array.o  ppc-eabi-objdump -S array.othe disassemble code is:00000000 <find_num>:   0:   3d 60 00 00     lis     r11,0   4:   94 21 ff d0     stwu    r1,-48(r1)   8:   39 2b 00 00     addi    r9,r11,0   c:   81 0b 00 00     lwz     r8,0(r11)  10:   80 e9 00 10     lwz     r7,16(r9)  14:   54 63 10 3a     rlwinm  r3,r3,2,0,29  18:   80 09 00 04     lwz     r0,4(r9)  1c:   81 69 00 08     lwz     r11,8(r9)  20:   81 49 00 0c     lwz     r10,12(r9)  24:   7d 21 1a 14     add     r9,r1,r3  28:   91 01 00 10     stw     r8,16(r1)  2c:   90 01 00 14     stw     r0,20(r1)  30:   91 61 00 18     stw     r11,24(r1)  34:   91 41 00 1c     stw     r10,28(r1)  38:   90 e1 00 20     stw     r7,32(r1)  3c:   38 21 00 30     addi    r1,r1,48  40:   80 69 00 10     lwz     r3,16(r9)  44:   4e 80 00 20     blrThe instruction 3c let stack pointer back, and instruction 40 load data from the stack, this is error. The true code must be:    lwz     r3,16(r9)    addi    r1,r1,48And when you using option -O1, the code generated is true.Release:GCC v3.4.6 ppc-eabi cross compiler in cygwinEnvironment:Reading specs from /cygdrive/d/Compiler/gcc3.4.6-ppc-eabi/bin/../lib/gcc/ppc-eabi/3.4.6/specsConfigured with: ../configure --target=ppc-eabi --prefix=/usr/local/gcc3.4.6-ppc-eabi --enable-languages=cThread model: singlegcc version 3.4.6How-To-Repeat:Using my sample.",RESOLVED          FIXED      
47487,Alan Modra,"ICE in rs6000_output_function_epilogue, at config/rs6000/rs6000.c:21782 building 64bit libgo","powerpc-linux-gnu, trunk 20110126, configured with --enable-targes=all fails with:echo timestamp > s-syscall_archrm -f `echo unicode/libunicode.a | sed -e 's|/lib|/|' -e 's/\.a/.gox/'`; test -d unicode || /bin/mkdir -p unicode; rm -f unicode/libunicode.a; files=`echo ../../../../src/libgo/go/unicode/casetables.go ../../../../src/libgo/go/unicode/digit.go ../../../../src/libgo/go/unicode/letter.go ../../../../src/libgo/go/unicode/tables.go | sed -e 's/[^ ]*\.gox//g'`; if /bin/bash ./libtool --tag GO --mode=compile /build/buildd/gcc-snapshot-20110126/build/./gcc/gccgo -B/build/buildd/gcc-snapshot-20110126/build/./gcc/ -B/usr/lib/gcc-snapshot/powerpc-linux-gnu/bin/ -B/usr/lib/gcc-snapshot/powerpc-linux-gnu/lib/ -isystem /usr/lib/gcc-snapshot/powerpc-linux-gnu/include -isystem /usr/lib/gcc-snapshot/powerpc-linux-gnu/sys-include      -O2 -g  -m64 -fPIC -mstrict-align -I . -c -fgo-prefix=""libgo_unicode"" -o unicode/libunicode.a.o $files; then ar rc unicode/libunicode.a unicode/libunicode.a.o; else exit 1; filibtool: compile:  /build/buildd/gcc-snapshot-20110126/build/./gcc/gccgo -B/build/buildd/gcc-snapshot-20110126/build/./gcc/ -B/usr/lib/gcc-snapshot/powerpc-linux-gnu/bin/ -B/usr/lib/gcc-snapshot/powerpc-linux-gnu/lib/ -isystem /usr/lib/gcc-snapshot/powerpc-linux-gnu/include -isystem /usr/lib/gcc-snapshot/powerpc-linux-gnu/sys-include -O2 -g -m64 -fPIC -mstrict-align -I . -c -fgo-prefix=libgo_unicode ../../../../src/libgo/go/unicode/casetables.go ../../../../src/libgo/go/unicode/digit.go ../../../../src/libgo/go/unicode/letter.go ../../../../src/libgo/go/unicode/tables.go ../../../../src/libgo/go/unicode/letter.go: In function 'unicode.to.isra.0':../../../../src/libgo/go/unicode/letter.go:176:1: internal compiler error: in rs6000_output_function_epilogue, at config/rs6000/rs6000.c:21782Please submit a full bug report,with preprocessed source if appropriate.See <file:///usr/share/doc/gcc-snapshot/README.Bugs> for instructions.make[10]: *** [unicode/libunicode.a] Error 1make[10]: Leaving directory `/build/buildd/gcc-snapshot-20110126/build/powerpc-linux-gnu/64/libgo'make[9]: *** [all-recursive] Error 1make[9]: Leaving directory `/build/buildd/gcc-snapshot-20110126/build/powerpc-linux-gnu/64/libgo'make[8]: *** [all] Error 2",RESOLVED          FIXED      
45807,Alan Modra,Lying eh_frame r2 save info causes crashes with static libgcc_eh and libstdc++,"Created attachment 21893 [details]testcase from Allan Pratt <akpratt@netflix.com>In the eh_frame description for _Unwind_Resume_or_Rethrow, I see000012a0 0000007c 000012a4 FDE cie=00000000 pc=100712c0..100714f8  DW_CFA_advance_loc: 4 to 100712c4  DW_CFA_def_cfa_offset: 3216  DW_CFA_advance_loc: 164 to 10071368  DW_CFA_offset_extended_sf: r2 at cfa+40[snip]but, r2 is not saved by this function, at least, not before_Unwind_RaiseException is called.  So the lie that r2 is saved atcfa+40 once we are past 10071368 can cause the unwinder to return a badvalue for r2 when unwinding through _Unwind_Resume_or_Rethrow from _Unwind_RaiseException.  r2 won't be saved if _Unwind_Resume_of_Rethrow is called statically from the same toc group, but this bug is often covered by the fact that a previous call into exception handling functions has written the correct r2 value to the stack.00000000100712c0 <._Unwind_Resume_or_Rethrow>:    100712c0:   f8 21 f3 71     stdu    r1,-3216(r1)    100712c4:   7d 80 00 26     mfcr    r12    100712c8:   7c 08 02 a6     mflr    r0    100712cc:   d9 c1 0c 00     stfd    f14,3072(r1)    100712d0:   d9 e1 0c 08     stfd    f15,3080(r1)    100712d4:   f8 01 0c a0     std     r0,3232(r1)    100712d8:   da 01 0c 10     stfd    f16,3088(r1)    100712dc:   da 21 0c 18     stfd    f17,3096(r1)    100712e0:   da 41 0c 20     stfd    f18,3104(r1)    100712e4:   da 61 0c 28     stfd    f19,3112(r1)    100712e8:   da 81 0c 30     stfd    f20,3120(r1)    100712ec:   da a1 0c 38     stfd    f21,3128(r1)    100712f0:   da c1 0c 40     stfd    f22,3136(r1)    100712f4:   da e1 0c 48     stfd    f23,3144(r1)    100712f8:   db 01 0c 50     stfd    f24,3152(r1)    100712fc:   db 21 0c 58     stfd    f25,3160(r1)    10071300:   db 41 0c 60     stfd    f26,3168(r1)    10071304:   db 61 0c 68     stfd    f27,3176(r1)    10071308:   db 81 0c 70     stfd    f28,3184(r1)    1007130c:   db a1 0c 78     stfd    f29,3192(r1)    10071310:   db c1 0c 80     stfd    f30,3200(r1)    10071314:   db e1 0c 88     stfd    f31,3208(r1)    10071318:   f9 c1 0b 70     std     r14,2928(r1)    1007131c:   f9 e1 0b 78     std     r15,2936(r1)    10071320:   fa 01 0b 80     std     r16,2944(r1)    10071324:   fa 21 0b 88     std     r17,2952(r1)    10071328:   fa 41 0b 90     std     r18,2960(r1)    1007132c:   fa 61 0b 98     std     r19,2968(r1)    10071330:   fa 81 0b a0     std     r20,2976(r1)    10071334:   fa a1 0b a8     std     r21,2984(r1)    10071338:   fa c1 0b b0     std     r22,2992(r1)    1007133c:   fa e1 0b b8     std     r23,3000(r1)    10071340:   fb 01 0b c0     std     r24,3008(r1)    10071344:   fb 21 0b c8     std     r25,3016(r1)    10071348:   fb 41 0b d0     std     r26,3024(r1)    1007134c:   fb 61 0b d8     std     r27,3032(r1)    10071350:   fb 81 0b e0     std     r28,3040(r1)    10071354:   fb a1 0b e8     std     r29,3048(r1)    10071358:   fb c1 0b f0     std     r30,3056(r1)    1007135c:   fb e1 0b f8     std     r31,3064(r1)    10071360:   e8 03 00 10     ld      r0,16(r3)    10071364:   7c 7f 1b 78     mr      r31,r3    10071368:   2f a0 00 00     cmpdi   cr7,r0,0    1007136c:   f8 61 0b 50     std     r3,2896(r1)    10071370:   f8 81 0b 58     std     r4,2904(r1)    10071374:   f8 a1 0b 60     std     r5,2912(r1)    10071378:   f8 c1 0b 68     std     r6,2920(r1)    1007137c:   91 81 0c 98     stw     r12,3224(r1)    10071380:   40 9e 00 e0     bne-    cr7,10071460 <._Unwind_Resume_or_Rethrow+0x1a0>    10071384:   4b ff f8 0d     bl      10070b90 <._Unwind_RaiseException>",RESOLVED          FIXED      
7130,Alan Modra,miscompiled code for gcc-3.1 on powerpc-unknown-linux-gnu with -funroll-all-loops,"Wrong code is generated for some loops when -O3 -funroll-all-loops option is used.Attached (unroll-test_e.i) is the intermediate filegenerated by  gcc -v -save-temps -O3 -funroll-all-loops -o unroll_test       unroll-test_e.cThe code performs a simple scaling of a floating-pointvector.  When the loop iteration is 5, 6, or 7, the only the first four iteration is done, leaving the last1, 2, or 3 vector elements unmodified (see scale() in thesource code).The output of above command is Reading specs from /usr/lib/gcc-lib/powerpc-unknown-linux-gnu/3.1/specsConfigured with: ../gcc-3.1/configure --prefix=/usr --enable-shared --enable-threads=posix --with-slibdir=/libThread model: posixgcc version 3.1 /usr/lib/gcc-lib/powerpc-unknown-linux-gnu/3.1/cpp0 -lang-c -v -D__GNUC__=3 -D__GNUC_MINOR__=1 -D__GNUC_PATCHLEVEL__=0 -DPPC -D__ELF__ -Dpowerpc -D__PPC__ -D__ELF__ -D__powerpc__ -D__PPC -D__powerpc -Acpu=powerpc -Amachine=powerpc -D__OPTIMIZE__ -D__STDC_HOSTED__=1 -D_CALL_SYSV -D_BIG_ENDIAN -D__BIG_ENDIAN__ -Amachine=bigendian -D_ARCH_PPC -D__unix__ -D__gnu_linux__ -D__linux__ -Dunix -D__unix -Dlinux -D__linux -Asystem=unix -Asystem=posix unroll-test_e.c unroll-test_e.iGNU CPP version 3.1 (cpplib) (PowerPC GNU/Linux)ignoring nonexistent directory ""/usr/powerpc-unknown-linux-gnu/include""#include ""..."" search starts here:#include <...> search starts here: /usr/local/include /usr/lib/gcc-lib/powerpc-unknown-linux-gnu/3.1/include /usr/includeEnd of search list. /usr/lib/gcc-lib/powerpc-unknown-linux-gnu/3.1/cc1 -fpreprocessed unroll-test_e.i -quiet -dumpbase unroll-test_e.c -O3 -version -funroll-all-loops -o unroll-test_e.sGNU CPP version 3.1 (cpplib) (PowerPC GNU/Linux)GNU C version 3.1 (powerpc-unknown-linux-gnu)  compiled by GNU C version 3.1. as -mppc -V -Qy -o unroll-test_e.o unroll-test_e.sGNU assembler version 2.12.1 (powerpc-unknown-linux-gnu) using BFD version 2.12.1 /usr/lib/gcc-lib/powerpc-unknown-linux-gnu/3.1/collect2 --eh-frame-hdr -V -Qy -m elf32ppclinux -dynamic-linker /lib/ld.so.1 -o unroll_test /usr/lib/gcc-lib/powerpc-unknown-linux-gnu/3.1/../../../crt1.o /usr/lib/gcc-lib/powerpc-unknown-linux-gnu/3.1/../../../crti.o /usr/lib/gcc-lib/powerpc-unknown-linux-gnu/3.1/crtbegin.o -L/usr/lib/gcc-lib/powerpc-unknown-linux-gnu/3.1 -L/usr/lib/gcc-lib/powerpc-unknown-linux-gnu/3.1/../../.. unroll-test_e.o -lgcc -lgcc_eh -lc -lgcc -lgcc_eh /usr/lib/gcc-lib/powerpc-unknown-linux-gnu/3.1/crtsavres.o /usr/lib/gcc-lib/powerpc-unknown-linux-gnu/3.1/crtend.o /usr/lib/gcc-lib/powerpc-unknown-linux-gnu/3.1/../../../crtn.oGNU ld version 2.12.1  Supported emulations:   elf32ppclinux   elf32ppc   elf32ppcsimThe problem was discovered while compiling atlas-3.4.1.-YozoRelease:gcc-3.1Environment:powerpc-unknown-linux-gnuPowerPC 750 (G3), PowerBook G3 Series (Wallstreet),Linux-2.14.19-pre10, Glibc 2.2.5Configured with: ../gcc-3.1/configure --prefix=/usr --enable-shared --enable-threads=posix --with-slibdir=/libHow-To-Repeat:Compile the source file with   gcc -O3 -funroll-all-loops -o unroll_test unroll_test_e.cRun the program with  ./unroll_testNotice the element x[9] is not changed even though itis supposed to be multiplied by two.",RESOLVED          FIXED      
49941,Alan Modra,[4.7 Regression] segmentation fault in redirect_jump_2,"spawn /home/amodra/build/gcc-curr/gcc/xgcc -B/home/amodra/build/gcc-curr/gcc/ /home/amodra/src/gcc-current/gcc/testsuite/gcc.dg/fold-compare-3.c -O2 -fdump-tree-cfg -S -m32 -o fold-compare-3.s/home/amodra/src/gcc-current/gcc/testsuite/gcc.dg/fold-compare-3.c: In function 'bla4eq':/home/amodra/src/gcc-current/gcc/testsuite/gcc.dg/fold-compare-3.c:32:1: internal compiler error: Segmentation fault#0  redirect_jump_2 (jump=0xf70c5100, olabel=0x0, nlabel=0x0, delete_unused=0, invert=1) at /home/amodra/src/gcc-current/gcc/jump.c:1515#1  0x103f74a8 in invert_jump (jump=0xf70c5100, nlabel=0x0, delete_unused=0) at /home/amodra/src/gcc-current/gcc/jump.c:1614#2  0x101bd4b0 in set_edge_can_fallthru_flag () at /home/amodra/src/gcc-current/gcc/cfganal.c:270#3  0x10876968 in reorder_basic_blocks () at /home/amodra/src/gcc-current/gcc/bb-reorder.c:1917#4  0x10878828 in rest_of_handle_reorder_blocks () at /home/amodra/src/gcc-current/gcc/bb-reorder.c:2320",RESOLVED          FIXED      
50341,Alan Modra,calls via function pointer wrongly scheduled giving invalid TOC pointer,#NAME?,RESOLVED          FIXED      
49383,Alan Modra,[4.7 regression] powerpc64-linux bootstrap failure due to ice in cgraph_only_called_directly_p,"Created attachment 24500 [details]preprocessed array_type_info.ccThe latest 4.7 snapshot (4.7-20110611 == r174959) fails to bootstrap on powerpc64-linux:Making all in libsupc++make[4]: Entering directory `/mnt/archive/objdir47/powerpc64-unknown-linux-gnu/libstdc++-v3/libsupc++'/bin/sh ../libtool --tag CXX --tag disable-shared  --mode=compile /mnt/archive/objdir47/./gcc/xgcc -shared-libgcc -B/mnt/archive/objdir47/./gcc -nostdinc++ -L/mnt/archive/objdir47/powerpc64-unknown-linux-gnu/libstdc++-v3/src -L/mnt/archive/objdir47/powerpc64-unknown-linux-gnu/libstdc++-v3/src/.libs -B/mnt/archive/install47/powerpc64-unknown-linux-gnu/bin/ -B/mnt/archive/install47/powerpc64-unknown-linux-gnu/lib/ -isystem /mnt/archive/install47/powerpc64-unknown-linux-gnu/include -isystem /mnt/archive/install47/powerpc64-unknown-linux-gnu/sys-include    -I/mnt/archive/gcc-4.7-20110611/libstdc++-v3/../gcc -I/mnt/archive/objdir47/powerpc64-unknown-linux-gnu/libstdc++-v3/include/powerpc64-unknown-linux-gnu -I/mnt/archive/objdir47/powerpc64-unknown-linux-gnu/libstdc++-v3/include -I/mnt/archive/gcc-4.7-20110611/libstdc++-v3/libsupc++  -fno-implicit-templates -prefer-pic -Wall -Wextra -Wwrite-strings -Wcast-qual  -fdiagnostics-show-location=once  -ffunction-sections -fdata-sections  -D_GNU_SOURCE  -c -o array_type_info.lo /mnt/archive/gcc-4.7-20110611/libstdc++-v3/libsupc++/array_type_info.cclibtool: compile:  /mnt/archive/objdir47/./gcc/xgcc -shared-libgcc -B/mnt/archive/objdir47/./gcc -nostdinc++ -L/mnt/archive/objdir47/powerpc64-unknown-linux-gnu/libstdc++-v3/src -L/mnt/archive/objdir47/powerpc64-unknown-linux-gnu/libstdc++-v3/src/.libs -B/mnt/archive/install47/powerpc64-unknown-linux-gnu/bin/ -B/mnt/archive/install47/powerpc64-unknown-linux-gnu/lib/ -isystem /mnt/archive/install47/powerpc64-unknown-linux-gnu/include -isystem /mnt/archive/install47/powerpc64-unknown-linux-gnu/sys-include -I/mnt/archive/gcc-4.7-20110611/libstdc++-v3/../gcc -I/mnt/archive/objdir47/powerpc64-unknown-linux-gnu/libstdc++-v3/include/powerpc64-unknown-linux-gnu -I/mnt/archive/objdir47/powerpc64-unknown-linux-gnu/libstdc++-v3/include -I/mnt/archive/gcc-4.7-20110611/libstdc++-v3/libsupc++ -fno-implicit-templates -Wall -Wextra -Wwrite-strings -Wcast-qual -fdiagnostics-show-location=once -ffunction-sections -fdata-sections -D_GNU_SOURCE -c /mnt/archive/gcc-4.7-20110611/libstdc++-v3/libsupc++/array_type_info.cc  -fPIC -DPIC -o array_type_info.o/mnt/archive/gcc-4.7-20110611/libstdc++-v3/libsupc++/array_type_info.cc: In destructor 'virtual __cxxabiv1::__array_type_info::~__array_type_info()':/mnt/archive/gcc-4.7-20110611/libstdc++-v3/libsupc++/array_type_info.cc:31:2: internal compiler error: in cgraph_only_called_directly_p, at cgraph.c:2976Please submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.make[4]: *** [array_type_info.lo] Error 1make[4]: Leaving directory `/mnt/archive/objdir47/powerpc64-unknown-linux-gnu/libstdc++-v3/libsupc++'make[3]: *** [all-recursive] Error 1make[3]: Leaving directory `/mnt/archive/objdir47/powerpc64-unknown-linux-gnu/libstdc++-v3'make[2]: *** [all] Error 2make[2]: Leaving directory `/mnt/archive/objdir47/powerpc64-unknown-linux-gnu/libstdc++-v3'make[1]: *** [all-target-libstdc++-v3] Error 2make[1]: Leaving directory `/mnt/archive/objdir47'make: *** [bootstrap] Error 2The previous snapshot (4.7-20110604) bootstrapped fine.Configured with:/mnt/archive/gcc-4.7-20110611/configure --prefix=/mnt/archive/install47 --with-gmp=/home/mikpe/pkgs/linux-ppc64/gmp-4.3.2 --with-mpfr=/home/mikpe/pkgs/linux-ppc64/mpfr-2.4.2 --with-mpc=/home/mikpe/pkgs/linux-ppc64/mpc-0.8.2 --disable-plugin --disable-lto --disable-nls --enable-threads=posix --with-cpu=default32 --enable-checking=release --disable-libmudflap --enable-languages=c,c++,fortran,ada",RESOLVED          FIXED      
48900,Alan Modra,unnecessary duplicate __tls_get_addr calls,This testcase when compiled with -fPIC generates two calls to __tls_get_addr.extern __thread int i;void foo (void) { i++; }The regression was introduced with the fix for PR44266,RESOLVED          FIXED      
48032,Alan Modra,PowerPC64 -mcmodel=medium invalid ld offset,"/* -fsection-anchors loses the original SYMBOL_REF_DECL when   replacing memory addresses with an anchor plus offset.   offsettable_ok_by_alignment assumes the -fsection-anchors code,   or any symbol_ref without a SYMBOL_REF_DECL is OK, giving:.L.f:	addis 9,2,.LANCHOR0@toc@ha	ld 10,.LANCHOR0@toc@l(9)	ld 11,.LANCHOR0+8@toc@l(9)   ...	.section	.rodata	.align 1	.set	.LANCHOR0,. + 0	.type	BGR233Format, @object	.size	BGR233Format, 16BGR233Format:   Note the byte aligned .rodata which can be linked anywhere, but the   ld instructions must have .LANCHO0@toc@l at a 4 byte boundary.  */typedef unsigned char uint8_t;typedef unsigned short int uint16_t;typedef struct {    uint8_t bitsPerPixel;    uint8_t depth;    uint8_t bigEndian;    uint8_t trueColour;    uint16_t redMax;    uint16_t greenMax;    uint16_t blueMax;    uint8_t redShift;    uint8_t greenShift;    uint8_t blueShift;    uint8_t pad1;    uint16_t pad2;} rfbPixelFormat;struct foo {    rfbPixelFormat format;};static const rfbPixelFormat BGR233Format = {    8, 8, 0, 1, 7, 7, 3, 0, 3, 6, 0, 0};void f (struct foo *p){    p->format = BGR233Format;}",RESOLVED          FIXED      
47986,Alan Modra,gcc.c-torture/execute/20040709-1.c fails with non-delegitimized UNSPEC,"On powerpc64-linux at -O3 -g -m64, this testcase has the following snippet in 150r.into_cfglayout.  Note the duplicated debug_insns for p (and i).========(insn 39 38 40 2 (set (reg:DI 234)        (plus:DI (reg:DI 2 2)            (high:DI (const:DI (unspec:DI [                            (symbol_ref/u:DI (""*.LC5"") [flags 0x2])                        ] 49))))) /home/alan/src/gcc-current/gcc/testsuite/gcc.c-torture/execute/20040709-1.c:90 517 {largetoc_high}     (nil))(insn 40 39 41 2 (set (reg/v/f:DI 209 [ p ])        (mem/u/c:DI (lo_sum:DI (reg:DI 234)                (const:DI (unspec:DI [                            (symbol_ref/u:DI (""*.LC5"") [flags 0x2])                        ] 49))) [6 S8 A8])) /home/alan/src/gcc-current/gcc/testsuite/gcc.c-torture/execute/20040709-1.c:90 405 {*movdi_internal64}     (expr_list:REG_EQUAL (const:DI (plus:DI (symbol_ref:DI (""sA"") [flags 0x80]  <var_decl 0xf78492a0 sA>)                (const_int 1 [0x1])))        (nil)))(debug_insn 41 40 42 2 (var_location:DI p (reg/v/f:DI 209 [ p ])) /home/alan/src/gcc-current/gcc/testsuite/gcc.c-torture/execute/20040709-1.c:90 -1     (nil))(debug_insn 42 41 43 2 (var_location:SI i (debug_expr:SI D#16)) /home/alan/src/gcc-current/gcc/testsuite/gcc.c-torture/execute/20040709-1.c:90 -1     (nil))(debug_insn 43 42 44 2 (var_location:DI p (reg/v/f:DI 209 [ p ])) -1     (nil))(debug_insn 44 43 45 2 (var_location:SI i (debug_expr:SI D#16)) -1     (nil))========In 151r.jump insn 39 and 40 are deleted (reg 209 is dead) and we are left with:========(debug_insn 505 38 504 2 (var_location:DI D#21 (plus:DI (reg:DI 2 2)        (high:DI (const:DI (unspec:DI [                        (symbol_ref/u:DI (""*.LC5"") [flags 0x2])                    ] 49))))) -1     (nil))(debug_insn 504 505 43 2 (var_location:DI D#20 (mem/u/c:DI (lo_sum:DI (debug_expr:DI D#21)            (const:DI (unspec:DI [                        (symbol_ref/u:DI (""*.LC5"") [flags 0x2])                    ] 49))) [6 S8 A8])) -1     (nil))(debug_insn 43 504 44 2 (var_location:DI p (debug_expr:DI D#20)) -1     (nil))(debug_insn 44 43 45 2 (var_location:SI i (debug_expr:SI D#16)) -1     (nil))========Note how one set of the debug_insns have also been removed, but we are left with some garbage.  dwarf2out tries to output debug info for p by substituting the debug_exprs and we get something that rs6000_delegitimize_address can't handle.(mem/u/c:DI (lo_sum:DI (plus:DI (reg:DI 2 2)            (high:DI (const:DI (unspec:DI [                            (symbol_ref/u:DI (""*.LC11"") [flags 0x2])                        ] 49))))        (const:DI (unspec:DI [                    (symbol_ref/u:DI (""*.LC11"") [flags 0x2])                ] 49))) [6 S8 A8])",RESOLVED          FIXED      
47935,Alan Modra,PowerPC64 -mcmodel=medium invalid lwa offset,"/* Testcase extracted from perl cpu2006   -m64 -O2 -S results in.L.foo:        addis 9,2,.LANCHOR0@toc@ha        lwa 0,.LANCHOR0+3@toc@l(9)        ...*/static long PL_statusvalue;void foo (void){  int exitstatus;  exitstatus = PL_statusvalue >> 8;  if (exitstatus & 255)    PL_statusvalue = exitstatus;  else    PL_statusvalue = 255;}",RESOLVED          FIXED      
46030,Alan Modra,registers trashed with -Os,"This comment in rs6000_savres_strategy         But we can only use the out-of-line         routines if we know that we've used store multiple or         out-of-line routines in the prologue, i.e. if we've saved all         the registers from first_gp_reg_save.  Otherwise, we risk         loading garbage from the stack.is true, but the code in rs6000_savres_strategy does not prevent this occurring.In fact, the ""saved_all"" code does precisely nothing.Found with gcc.c-torture/compile/20050119-1.c -m32 -Os -S.  Note the inline save but use of _restgpr to restore.  Doesn't actually cause a problem since there is only one register saved/restored here, but it's not hard to construct something that does trash a register, eg./* Compile with -Os -mno-multiple */void f2 (char *s){  int col = 0;  char c;  void f3 (char c)  {    extern int f4 (char);    register long r25 __asm__ (""r25"");    register long r27 __asm__ (""r27"");    register long r28 __asm__ (""r28"");    register long r29 __asm__ (""r29"");    register long r31 __asm__ (""r31"");    if (c == '\t')      do f3 (' '); while (col % 8 != 0);    else      {	__asm__ __volatile__	  (""#uses %0 %1 %2 %3 %4""	   : ""=r"" (r25), ""=r"" (r27), ""=r"" (r28), ""=r"" (r29), ""=r"" (r31));	f4 (c);	col++;      }  }  while ((c = *s++) != 0)    f3 (c);}",RESOLVED          FIXED      
47279,Alan Modra,Bootstrap fails in stage1 with GCC 4.6,"When bootstrapping trunk using a GCC 4.6 (from begin of december) host compilerusing CFLAGS=""-O -g"" I get the following error when linking cc1 during stage1: /usr/lib64/gcc/powerpc64-suse-linux/4.6/../../../../powerpc64-suse-linux/bin/ld: libbackend.a(cse.o)(.text.unlikely+0x60): sibling call optimization to                `.opd' does not allow automatic multiple TOCs; recompile with -mminimal-toc or -fno-optimize-sibling-calls, or make `.opd' externI don't know if this hints at a generic problem or if this is some intermediatefailure of that particular host compiler version (which of coursebootstrapped just fine at some point).",RESOLVED          FIXED      
44266,Alan Modra,stack frame lacks parameter save area,"A function that makes no other calls besides calls to __tls_get_addr does not allocate a stack frame with a parameter save area.  According to the PowerPC64 ABI, any function that makes calls must allocate at least a 112 byte stack frame.  This testcase, extracted from libstdc++/* -m64 -fPIC -O2 */int *get_global (void){  static __thread int global;  return &global;}results in	mflr 0	std 0,16(1)	stdu 1,-48(1)	addi 3,2,.LANCHOR0@got@tlsld	bl __tls_get_addr	nop	addi 1,1,48	addis 3,3,.LANCHOR0@dtprel@ha	addi 3,3,.LANCHOR0@dtprel@l	ld 0,16(1)	mtlr 0	blrNote the 48 byte stack frame.",RESOLVED          FIXED      
44075,Alan Modra,__builtin_eh_return miscompiled,"At any optimisation level other than -O0, it seems that __builtin_eh_return loses its handler arg.  For -m32 -O2 -S the following:long offset;void *handler;void foo (void){  __builtin_eh_return (offset, handler);}compiles to:foo:        stwu 1,-32(1)        lis 9,offset@ha        mflr 0        stw 0,36(1)        stw 3,16(1)        stw 4,20(1)        stw 5,24(1)        stw 6,28(1)        lwz 10,offset@l(9)        lwz 0,36(1)        lwz 3,16(1)        lwz 4,20(1)        lwz 5,24(1)        mtlr 0        lwz 6,28(1)        addi 1,1,32        add 1,1,10        blr",RESOLVED          FIXED      
44169,Alan Modra,Wrong code while generating TLS offsets,"libgomp testsuite fails with a segfault. It segfaults in gomp_resolve_num_threads(), accessing the second TLS value.The first access: .LBB28:         .file 2 ""../../../src/libgomp/libgomp.h""         .loc 2 380 0         bcl 20,31,$+8         .long _GLOBAL_OFFSET_TABLE_-$         mflr 9         lwz 0,0(9)         add 9,9,0         lwz 9,gomp_tls_data@got@tprel(9)         add 9,9,gomp_tls_data@tls         lwz 9,40(9)The second:.LBE27:         .loc 1 47 0         cmpwi 7,3,1         beq- 7,.L37 .LVL32:         .loc 1 49 0         bcl 20,31,$+8         .long _GLOBAL_OFFSET_TABLE_-$         mflr 9         add 9,9,0         lwz 9,gomp_tls_data@got@tprel(9)         add 9,9,gomp_tls_data@tls         lwz 0,28(9)After mflr, the lwz is missing. r0 has the offset from last lr which is wrong here.The RTL in tc.c.185r.cprop_hardreg has the lwz included, the next pass  tc.c.186r.dce does not anymore.lwz gets not killed if I used -mcpu=power or -mcpu=e300c3. I used -mcpu=8540 which is default for powerpc-linux-gnuspe. -O1 was used in the test case.The complete cmd line: /build/bigeasy/gcc-4.4-4.4.4/build/./gcc/xgcc   \         -B/build/bigeasy/gcc-4.4-4.4.4/build/./gcc/ \         -B/usr/powerpc-linux-gnuspe/bin/ \         -B/usr/powerpc-linux-gnuspe/lib/ \         -isystem \         /usr/powerpc-linux-gnuspe/include \         -isystem \         /usr/powerpc-linux-gnuspe/sys-include \         -Werror \         -pthread \         -ftls-model=initial-exec \         -O2 \         -pthread \         -fPIC \         -DPIC \         tc.c \         -o \         tc.S \         -S \         -mcpu=8540 \         -O1 \         -fdump-rtl-all \         -c \A side note: the complete file (parallel.c from libgomp) was compiled with -O2 and the lwz was killed between parallel.c.174r.postreload and parallel.c.176r.split2.",RESOLVED          FIXED      
42344,Alan Modra,[4.5 Regression] ICE in rs6000.md with ipa-sra for 252.eon,"GCC trunk gets a ICE when building SPEC CPU2000 test 252.eon with ""-O2 -fPIC -fno-inline"", but not with -fno-ipa-sra, on powerpc-linux with secureplt enabled, as demonstrated by this minimized testcase:class mrSurfaceList{public:  int *operator[] (int i) const { }};int *makeGrid (mrSurfaceList * l){  return (*l)[0];}elm3b149% /home/janis/tools/gcc-trunk-anonsvn/bin/g++ -c -O2 -fPIC -fno-inline bug.ccbug.cc: In function ‘int* makeGrid(mrSurfaceList*)’:bug.cc:10:1: internal compiler error: in output_507, at config/rs6000/rs6000.md:12527Please submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.The ICE begins with this patch, which adds IPA SRA:    http://gcc.gnu.org/viewcvs?view=rev&rev=151800    r151800 | jamborm | 2009-09-17 11:35:38 +0000 (Thu, 17 Sep 2009)",RESOLVED          FIXED      
40473,Alan Modra,#NAME?,"/* When compiled with -g -O -mno-sched-prolog, the debug info location   lists for p1 and p2 do not cover the start of f.  There are other   inaccuracies, but not covering the start of the function is specific   to -nno-sched-prolog.  */int f (int p1, int p2){  extern int bar (int);  int x, y;  for (x = p1, y = 0; x < p2; x++)    y += bar (x);  return y;}",RESOLVED          FIXED      
41081,Alan Modra,redundant ZERO_EXTENDs,"Linux kernel block sha1 code on powerpc64 has many redundant clrldi instructions, significantly slowing execution time.  Current gcc seems to generate more of these than 3.4.5 which is in turn worse than 3.3.Breakdown of clrldi insns- 140 redundant clrldi on rotate insn output- 79 other redundant clrldi- 11 useful",RESOLVED          FIXED      
36634,Alan Modra,#NAME?,"The -msecure-plt ABI requires that -fpic/-fPIC calls via the PLT have the GOT pointer register valid.  gcc accomplishes this by adding pic_offset_table_rtx to CALL_INSN_FUNCTION_USAGE for such calls at rtl expansion time.  See rs6000.md define_expand ""call"".  Now, indirect calls do *not* need a GOT pointer since they don't go via the PLT, and we wouldn't want indirect calls to cause unnecessary code in a function prologue to set up the GOT pointer.  This is a lurking problem for the RTL combiner if it should happen to see an opportunity to combine an instruction loading a function pointer followed by an indirect call, since it will combine them to a PLT call that lacks a use of pic_offset_table_rtx.$ cat pr44759.c#include <stdio.h>#include <stdlib.h>extern void first_call (void);int main (void){  first_call ();  printf (""All finished\n"");}$ cat pr44759-1.c#include <stdio.h>#include <stdlib.h>typedef void (*simple) (signed int);void myprint (unsigned int i){  printf(""I am printing\n"");}static inline void lets_inline (void (*p)(signed int), int v){  (*p)(v);}void first_call (void){  lets_inline ((simple)myprint, 0);}$ gcc -c pr44759.c -fPIC -O2 -msecure-plt$ gcc -c pr44759-1.c -fPIC -O2 -msecure-plt$ gcc -o libpr44759.so pr44759-1.o -fPIC -shared -msecure-plt$ gcc -o pr44759 pr44759.o libpr44759.so$ LD_LIBRARY_PATH=. ./pr44759Segmentation faultNote that the testcase does not fail on mainline or gcc-4.3, presumably because combining happens at the tree level there.  I'm also not sure whether the testcase is completely valid code, but even if not, there may be other ways to expose the rtl combine error.",RESOLVED          FIXED      
39634,Alan Modra,powerpc64 libgcc contains useless softfp functions,"softfp functions are not supposed to be compiled for the 64-bit version of libgcc, since 64-bit ABI doesn't suport softfp.",RESOLVED          FIXED      
7282,Alan Modra,unrecognizable insn,"stuart.c: In function `testcase':stuart.c:170: unrecognizable insn:(insn 789 199 203 (set (subreg:SI (reg:DI 38 f6) 4)        (mem:SI (plus:DI (reg/f:DI 1 r1)                (const_int 116 [0x74])) [15 S4 A8])) -1 (nil)    (nil))stuart.c:170: Internal compiler error in extract_insn, at recog.c:2148Release:3.1.1 20020711 (prerelease)Environment:configured with: /src/gcc-3.1/configure --prefix=/usr/local --build=i686-linux --host=i686-linux --target=powerpc64-linux --disable-nls --enable-languages=cHow-To-Repeat:	-O2 on attached testcaseUnformatted: --HcAYCG3uE/tztfnV Content-Type: text/plain; charset=us-ascii Content-Disposition: inline",RESOLVED          FIXED      
36955,Alan Modra,[4.4 Regression] TLS LIBCALL change breaks libstdc++ built with older binutils,"This testcase (yes, it's actually huge):  #include <iostream>  int  main ()  {    std::cerr << ""writing to cerr"" << std::endl;  }segfaults in libstdc++ when powerpc-linux mainline GCC is configured with --enable-secureplt and uses 2.16 binutils (specifically, I used 2.16.91.0.5 20051219 (SUSE Linux)).  It works fine with 2.18 binutils or without --enable-secureplt.The failure begins with this patch:http://gcc.gnu.org/viewcvs?view=rev&rev=135961r135961 | zadeck | 2008-05-26 23:37:05 +0000 (Mon, 26 May 2008) | 14 lines2008-05-26  Steven Bosscher  <stevenb.gcc@gmail.com>        * config/rs6000/rs6000.c (rs6000_legitimize_tls_address): Generate        new tls_gd_* and tls_ld_* insns instead of an insn sequence.        * config/rs6000/rs6000.md (TLSmode, tls_abi_suffix, tls_insn_suffix,        tls_sysv_suffix): New mode and mode attribute iterators.        (tls_gd_32, tls_gd_64, tls_ld_32, tls_ld_64): Remove.        (lts_gd_aix*, tls_gd_sysv*, tls_ld_aix*, tls_ld_sysv*): New patterns.        (tls_dtprel_*, tls_dtprel_ha_*, tls_dtprel_lo_*, tls_got_dtprel_*,        tls_tprel_*, tls_tprel_ha_*, tls_tprel_lo_*, tls_got_tprel_*,        tls_tls_*): Merge 32 bit and 64 bit variants using aforementioned        iterators.",RESOLVED          FIXED      
34393,Alan Modra,"ICE: in extract_insn, at recog.c:1990","On powerpc Darwin9, gcc.c-torture/compile/20071117-1.c gives an ICE:/opt/gcc/_gcc-clean/gcc/testsuite/gcc.c-torture/compile/20071117-1.c: In function 'foo':/opt/gcc/_gcc-clean/gcc/testsuite/gcc.c-torture/compile/20071117-1.c:13: error: unrecognizable insn:(insn 29 28 30 3 /opt/gcc/_gcc-clean/gcc/testsuite/gcc.c-torture/compile/20071117-1.c:10 (set (mem/c:SI (mem/f/c/i:SI (plus:SI (reg/f:SI 115 virtual-stack-vars)                    (const_int 4 [0x4])) [0 p+0 S4 A32]) [0 S4 A8])        (reg:SI 134)) -1 (nil))/opt/gcc/_gcc-clean/gcc/testsuite/gcc.c-torture/compile/20071117-1.c:13: internal compiler error: in extract_insn, at recog.c:1990",RESOLVED          FIXED      
33812,Alan Modra,[4.3 Regression] ICE from epilogue vrsave code,"With current trunk (r129433) vectorizer testcases fail on powerpc64:FAIL: gcc.dg/vect/vect-64.c (internal compiler error)FAIL: gcc.dg/vect/vect-64.c (test for excess errors)WARNING: gcc.dg/vect/vect-64.c compilation failed to produce executableFAIL: gcc.dg/vect/vect-68.c (internal compiler error)FAIL: gcc.dg/vect/vect-68.c (test for excess errors)WARNING: gcc.dg/vect/vect-68.c compilation failed to produce executableFAIL: gcc.dg/vect/vect-70.c (internal compiler error)FAIL: gcc.dg/vect/vect-70.c (test for excess errors)WARNING: gcc.dg/vect/vect-70.c compilation failed to produce executableFAIL: gcc.dg/vect/no-scevccp-slp-31.c (internal compiler error)FAIL: gcc.dg/vect/no-scevccp-slp-31.c (test for excess errors)WARNING: gcc.dg/vect/no-scevccp-slp-31.c compilation failed to produce executableThe tests ICE:vect-64.c: In function &#1490;main1&#1490;:vect-64.c:75: internal compiler error: in change_address_1, at emit-rtl.c:1888Please submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.#0  change_address_1 (memref=0xf7e44f40, mode=SImode, addr=0xf7e44f30, validate=1) at ../../gcc/gcc/emit-rtl.c:1888#1  0x10179fd4 in validize_mem (ref=0xf7e44f40) at ../../gcc/gcc/explow.c:546#2  0x101a88e8 in emit_move_insn (x=0xf7e38e00, y=0xf7e44f40) at ../../gcc/gcc/expr.c:3403#3  0x105543e4 in rs6000_emit_epilogue (sibcall=0) at ../../gcc/gcc/config/rs6000/rs6000.c:16095#4  0x28000488 in ?? ()#5  0x105ec5ec in gen_epilogue () at ../../gcc/gcc/config/rs6000/rs6000.md:14476#6  0x102242b4 in rest_of_handle_thread_prologue_and_epilogue () at ../../gcc/gcc/function.c:5298#7  0x102a7af4 in execute_one_pass (pass=0x108f6a78) at ../../gcc/gcc/passes.c:1117#8  0x102a7d68 in execute_pass_list (pass=0x108f6a78) at ../../gcc/gcc/passes.c:1170#9  0x102a7d80 in execute_pass_list (pass=0x108f6ee8) at ../../gcc/gcc/passes.c:1171#10 0x102a7d80 in execute_pass_list (pass=0x108f6eb4) at ../../gcc/gcc/passes.c:1171#11 0x103ae68c in tree_rest_of_compilation (fndecl=0xf7dbc100) at ../../gcc/gcc/tree-optimize.c:404#12 0x105705fc in cgraph_expand_function (node=0xf7dbc300) at ../../gcc/gcc/cgraphunit.c:1060#13 0x105728c4 in cgraph_optimize () at ../../gcc/gcc/cgraphunit.c:1123#14 0x10017914 in c_write_global_declarations () at ../../gcc/gcc/c-decl.c:8077#15 0x1033fff0 in toplev_main (argc=<value optimized out>, argv=<value optimized out>) at ../../gcc/gcc/toplev.c:1055#16 0x1009e370 in main (argc=0, argv=0x0) at ../../gcc/gcc/main.c:35This doesn't happen with r129290.Ira",RESOLVED          FIXED      
29943,Alan Modra,[4.2/4.3 Regression] gcc generate incorrect alias symbols for PPC,"The following example(reduced from glibc) compiles differently for ppc target when using gcc 4.2 as compared to gcc 4.1It generates the alias symbol as a real symbol instead of creating it as alias.I get this correct using gcc 4.2 for arm so the problem seems to be affecting only ppc. This also works ok with gcc 4.1to reproduce compile the example with -O2testcase.c========================================================extern char **_dl_argv     __attribute__ ((section ("".data.rel.ro"")))     ;extern char **_dl_argv_internal __attribute__ ((visibility (""hidden"")))     __attribute__ ((section ("".data.rel.ro"")))     ;char **_dl_argv __attribute__ ((section ("".data.rel.ro""))) = ((void *)0);extern __typeof (_dl_argv) _dl_argv_internal __attribute__ ((alias (""_dl_argv"")));char* foo (){   return _dl_argv_internal[0];}=====================================glibc segfaults in ld.so currently when compiled with gcc 4.2 for ppc due to this issue.",RESOLVED          FIXED      
28207,Alan Modra,128-bit IBM long double misaligned on stack,"long doubles are only aligned to word boundaries when passed via the stack (ie. to a function that uses more than 8 fp regs for other parameters).  The va_arg support expects long doubles to be double word aligned, resulting in a mismatch between caller and callee for variable argument functions.",RESOLVED          FIXED      
27095,Alan Modra,[4.1 Regression] O2 produces duplicate code,"Hi,#include <string.h>void fill(char *s, int i){	memset(s, i, strlen(s));}4.1 produces two strlen callsfill:        mflr 0        stwu 1,-32(1)        stw 0,36(1)        stw 28,16(1)        mr 28,4        stw 29,20(1)        mr 29,3        bl strlen        mr 3,29        bl strlen        mr 4,28        mr 5,3        mr 3,29        bl memset        lwz 0,36(1)        lwz 28,16(1)        lwz 29,20(1)        addi 1,1,32        mtlr 0        blrwhere 4.0 outputsfill:        mflr 0        stwu 1,-32(1)        stw 0,36(1)        stw 28,16(1)        mr 28,3        stw 29,20(1)        mr 29,4        bl strlen        mr 4,29        mr 5,3        mr 3,28        bl memset        lwz 0,36(1)        lwz 28,16(1)        lwz 29,20(1)        addi 1,1,32        mtlr 0        blr",RESOLVED          FIXED      
27260,Alan Modra,"[4.1 Regression] ICE in expand_expr_real_1, at expr.c:6750","6750              gcc_assert (GET_MODE (DECL_RTL (exp)) == pmode);(gdb) print pmode$1 = SImode(gdb) call debug_tree(exp) <var_decl 0xf7f7d930 D.1351    type <integer_type 0xf7ec3460 int sizes-gimplified public SI        size <integer_cst 0xf7ec5720 constant invariant 32>        unit size <integer_cst 0xf7ec53e0 constant invariant 4>        align 32 symtab 0 alias set -1 precision 32 min <integer_cst 0xf7ec56c0 -2147483648> max <integer_cst 0xf7ec56e0 2147483647>        pointer_to_this <pointer_type 0xf7ed1070>>    used ignored SI file cmdTrace.min.i line 28 size <integer_cst 0xf7ec5720 32> unit size <integer_cst 0xf7ec53e0 4>    align 32    (reg:QI 141 [ D.1351 ])>#0  fancy_abort (file=0x106e1d60 ""../../gcc-4_1-branch/gcc/expr.c"", line=6750,    function=0x106e2268 ""expand_expr_real_1"") at diagnostic.c:602#1  0x10255a6c in expand_expr_real_1 (exp=0xf7f7d930, target=0x0,    tmode=VOIDmode, modifier=EXPAND_NORMAL, alt_rtl=0x0) at expr.c:6750#2  0x10255f0c in expand_expr_real_1 (exp=0xf7f7e380, target=0x0,    tmode=VOIDmode, modifier=EXPAND_NORMAL, alt_rtl=0x0) at expr.c:6844#3  0x10254dcc in expand_expr_real (exp=0xf7f7e380, target=0x0,    tmode=VOIDmode, modifier=EXPAND_NORMAL, alt_rtl=0x0) at expr.c:6523#4  0x10160034 in expand_expr (exp=0xf7f7e380, target=0x0, mode=VOIDmode,    modifier=EXPAND_NORMAL) at expr.h:493#5  0x1015fa90 in precompute_register_parameters (num_actuals=3,    args=0xffa7fbc0, reg_parm_seen=0xffa7fed4) at calls.c:662#6  0x101649dc in expand_call (exp=0xf7f7f330, target=0xf7f76d00, ignore=0)    at calls.c:2545#7  0x1014b37c in expand_builtin_memset (arglist=0xf7f7e4e0,    target=0xf7f76d00, mode=SImode, orig_exp=0xf7f79f60) at builtins.c:3520#8  0x1015074c in expand_builtin (exp=0xf7f79f60, target=0xf7f76d00,    subtarget=0x0, mode=SImode, ignore=0) at builtins.c:6069This is caused by the patch for PR27095",RESOLVED          FIXED      
26026,Alan Modra,power of 2 mod missing optimisation,"gcc is using a divide and multiply where it could be using shift/ands:unsigned long f1(unsigned long x, unsigned long n){        return x % (1UL << n);}produces:f1:        li 9,1        slw 9,9,4        divwu 0,3,9        mullw 0,0,9        subf 3,0,3        blr",RESOLVED          FIXED      
27230,Alan Modra,many obj-c++.dg tests ICE in rs6000_output_function_epilogue,"On powerpc64-unknown-linux-gnu with -m64, 85 tests in obj-c++.dg fail with:elm3b11% /opt/gcc-nightly/trunk-20060420/bin/g++ -c -m64 basic.mmbasic.mm: In function ‘void __objc_gnu_init()’:basic.mm:21: internal compiler error: in rs6000_output_function_epilogue, at config/rs6000/rs6000.c:15346Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.This has apparently never worked on the FSF tree for this target.",RESOLVED          FIXED      
26459,Alan Modra,[4.1/4.2 Regression] gcc fails to build on powerpc e500-double targets,When configuring gcc with:--target=powerpc-unknown-linux-gnuspe --host=powerpc-unknown-linux-gnuspe --enable-e500_doublethis file will be included:gcc/config/rs6000/e500-double.hwhich in turn uses the variablers6000_float_gprs_stringwhich is not defined anywhere. (So the build stops with undefined sysmbol error)This problem can be detected as far as 20060206.Gcc 4.0.2 builds fine with the same configuration options.,RESOLVED          FIXED      
26607,Alan Modra,[4.1/4.2 Regression] Illegal inlined assembler on config/rs6000/darwin-ldouble.c,"Gcc cannot process in-lined assembler, when configured for powerpc-gnuspe target (Note: that target does not have float point registers, but it has float point sinstructions that operates on the general purpose registers).ra8797:/local/gnu_toolchain/build_area/obj_gcc_gcc-trunk_e500v1/gcc> /local/gnu_toolchain/build_area/obj_gcc_gcc-trunk_e500v1/./gcc/xgcc -B/local/gnu_toolchain/build_area/obj_gcc_gcc-trunk_e500v1/./gcc/ -B/local/gnu_toolchain/install-gcc-trunk-20060308-e500v1/powerpc-unknown-linux-gnuspe/bin/ -B/local/gnu_toolchain/install-gcc-trunk-20060308-e500v1/powerpc-unknown-linux-gnuspe/lib/ -isystem /local/gnu_toolchain/install-gcc-trunk-20060308-e500v1/powerpc-unknown-linux-gnuspe/include -isystem /local/gnu_toolchain/install-gcc-trunk-20060308-e500v1/powerpc-unknown-linux-gnuspe/sys-include -O2  -O2 -g -O2  -DIN_GCC -DCROSS_COMPILE   -W -Wall -Wwrite-strings -Wstrict-prototypes -Wmissing-prototypes -Wold-style-definition  -isystem ./include  -fPIC -specs=ldblspecs -g -DHAVE_GTHR_DEFAULT -DIN_LIBGCC2 -D__GCC_FLOAT_NOT_NEEDED -Dinhibit_libc -I. -I -I../../gcc-trunk/gcc -I../../gcc-trunk/gcc/ -I../../gcc-trunk/gcc/../include -I../../gcc-trunk/gcc/../libcpp/include  -I../../gcc-trunk/gcc/../libdecnumber -I../libdecnumber -fPIC -mstrict-align -fvisibility=hidden -DHIDE_EXPORTS -c ../../gcc-trunk/gcc/config/rs6000/darwin-ldouble.c -o libgcc/./darwin-ldouble.o --save-temps -vReading specs from /local/gnu_toolchain/build_area/obj_gcc_gcc-trunk_e500v1/./gcc/specsReading specs from /local/gnu_toolchain/build_area/obj_gcc_gcc-trunk_e500v1/./gcc/ldblspecsTarget: powerpc-unknown-linux-gnuspeConfigured with: ../gcc-trunk/configure --prefix=/local/gnu_toolchain/install-gcc-trunk-20060308-e500v1 --with-local-prefix=/local/gnu_toolchain/install-gcc-trunk-20060308-e500v1 --enable-languages=c,c++ --enable-threads --target=powerpc-unknown-linux-gnuspeThread model: posixgcc version 4.2.0 20060308 (experimental) /local/gnu_toolchain/build_area/obj_gcc_gcc-trunk_e500v1/./gcc/cc1 -E -quiet -v -I. -I -I../../gcc-trunk/gcc -I../../gcc-trunk/gcc/ -I../../gcc-trunk/gcc/../include -I../../gcc-trunk/gcc/../libcpp/include -I../../gcc-trunk/gcc/../libdecnumber -I../libdecnumber -iprefix /temp/gnu_toolchain/build_area/obj_gcc_gcc-trunk_e500v1/gcc/../lib/gcc/powerpc-unknown-linux-gnuspe/4.2.0/ -isystem /local/gnu_toolchain/build_area/obj_gcc_gcc-trunk_e500v1/./gcc/include -D__unix__ -D__gnu_linux__ -D__linux__ -Dunix -D__unix -Dlinux -D__linux -Asystem=linux -Asystem=unix -Asystem=posix -DIN_GCC -DCROSS_COMPILE -DHAVE_GTHR_DEFAULT -DIN_LIBGCC2 -D__GCC_FLOAT_NOT_NEEDED -Dinhibit_libc -DHIDE_EXPORTS -isystem /local/gnu_toolchain/install-gcc-trunk-20060308-e500v1/powerpc-unknown-linux-gnuspe/include -isystem /local/gnu_toolchain/install-gcc-trunk-20060308-e500v1/powerpc-unknown-linux-gnuspe/sys-include -isystem ./include ../../gcc-trunk/gcc/config/rs6000/darwin-ldouble.c -mstrict-align -W -Wall -Wwrite-strings -Wstrict-prototypes -Wmissing-prototypes -Wold-style-definition -fPIC -fPIC -fvisibility=hidden -fworking-directory -O2 -O2 -O2 -fpch-preprocess -o darwin-ldouble.iignoring nonexistent directory ""/local/gnu_toolchain/install-gcc-trunk-20060308-e500v1/powerpc-unknown-linux-gnuspe/include""ignoring duplicate directory ""./include""ignoring nonexistent directory ""/temp/gnu_toolchain/build_area/obj_gcc_gcc-trunk_e500v1/gcc/../lib/gcc/powerpc-unknown-linux-gnuspe/4.2.0/include""ignoring nonexistent directory ""/temp/gnu_toolchain/build_area/obj_gcc_gcc-trunk_e500v1/gcc/../lib/gcc/powerpc-unknown-linux-gnuspe/4.2.0/../../../../powerpc-unknown-linux-gnuspe/sys-include""ignoring nonexistent directory ""/temp/gnu_toolchain/build_area/obj_gcc_gcc-trunk_e500v1/gcc/../lib/gcc/powerpc-unknown-linux-gnuspe/4.2.0/../../../../powerpc-unknown-linux-gnuspe/include""ignoring duplicate directory ""/local/gnu_toolchain/install-gcc-trunk-20060308-e500v1/lib/gcc/powerpc-unknown-linux-gnuspe/4.2.0/../../../../powerpc-unknown-linux-gnuspe/sys-include""ignoring nonexistent directory ""/local/gnu_toolchain/install-gcc-trunk-20060308-e500v1/lib/gcc/powerpc-unknown-linux-gnuspe/4.2.0/../../../../powerpc-unknown-linux-gnuspe/include""ignoring nonexistent directory ""-I../../gcc-trunk/gcc""#include ""..."" search starts here:#include <...> search starts here: . ../../gcc-trunk/gcc/ ../../gcc-trunk/gcc/../include ../../gcc-trunk/gcc/../libcpp/include ../../gcc-trunk/gcc/../libdecnumber ../libdecnumber /local/gnu_toolchain/build_area/obj_gcc_gcc-trunk_e500v1/./gcc/include /local/gnu_toolchain/install-gcc-trunk-20060308-e500v1/powerpc-unknown-linux-gnuspe/sys-include /local/gnu_toolchain/install-gcc-trunk-20060308-e500v1/lib/gcc/powerpc-unknown-linux-gnuspe/4.2.0/includeEnd of search list. /local/gnu_toolchain/build_area/obj_gcc_gcc-trunk_e500v1/./gcc/cc1 -fpreprocessed darwin-ldouble.i -quiet -dumpbase darwin-ldouble.c -mstrict-align -auxbase-strip libgcc/./darwin-ldouble.o -g -g -O2 -O2 -O2 -W -Wall -Wwrite-strings -Wstrict-prototypes -Wmissing-prototypes -Wold-style-definition -version -fPIC -fPIC -fvisibility=hidden -mlong-double-128 -o darwin-ldouble.sGNU C version 4.2.0 20060308 (experimental) (powerpc-unknown-linux-gnuspe)        compiled by GNU C version 3.4.3.GGC heuristics: --param ggc-min-expand=30 --param ggc-min-heapsize=4096Compiler executable checksum: 992a552977f881ca86a06270e1959aa6../../gcc-trunk/gcc/config/rs6000/darwin-ldouble.c: In function '__gcc_qdiv':../../gcc-trunk/gcc/config/rs6000/darwin-ldouble.c:189: error: impossible constraint in 'asm'",RESOLVED          FIXED      
26453,Alan Modra,[3.4 Regression] Segfault with -m64 -mtraceback=full,The following segfaults in rs6000_output_function_epilogue when compiled with -m64 -mtraceback=full.  r_o_f_e is being called via final_end_function in rs6000_output_mi_thunk.  This is a regression from gcc-3.3.x.class A1 {public:  virtual ~A1();};class A2 : public A1 { };class A3 : virtual public A2 { };class A4 : public A3 {public:  ~A4(void);};A4::~A4(void) {},RESOLVED          FIXED      
21616,Alan Modra,[3.4 only] ICE: unable to find a register to spill in class `FLOAT_REGS',"GCC produced this ICE when the attached program was compiled. I tried the fixfrom http://gcc.gnu.org/PR18641 but it did not fix the problem.commandline options-O2 -msoft-float -m64 -cgcc output=================================a.c: In function `do_select':a.c:12770: error: unable to find a register to spill in class `FLOAT_REGS'a.c:12770: error: this is the insn:(insn:HI 355 353 357 27 (set (mem/s:DI (plus:DI (reg/f:DI 31 31)                (const_int 149 [0x95])) [4 fs_event.event_data2+0 S8 A8])        (reg/v:DI 125 [ __timeout ])) 322 {*movdi_internal64} (nil)    (nil))a.c:12770: confused by earlier errors, bailing out",RESOLVED          FIXED      
25960,Alan Modra,__gcc_qadd doesn't handle -0.0L properly,"volatile long double l, m, n;extern void abort (void);intmain (void){  l = __builtin_copysignl (0.0L, -1.0L);  m = __builtin_copysignl (0.0L, -1.0L);  n = l + m;  if (__builtin_copysignl (1.0L, n) >= 0.0L)    abort ();  return 0;}fails on ppc*-linux with -mlong-double-128, -0.0 + -0.0 gives 0.0 rather thanexpected -0.0.",RESOLVED          FIXED      
25176,Alan Modra,[4.0 only] FAIL: Array_3 -O3 execution - bytecode->native test,"libjava/testsuite/libjava.lang/Array_3.java has failed on powerpc64-linux for quite a while.  See http://gcc.gnu.org/ml/gcc-testresults/2005-03/msg01215.html.  The problem is that in  static int baz ()  {    int[] x = (int[])null;    int nn = x.length;    return 5;  }...    try      {	nn = baz ();      }    catch (NullPointerException _)...we have00000000100010b0 <._ZN7Array_33bazEv>:    100010b0:   7c 08 02 a6     mflr    r0    100010b4:   e8 62 80 50     ld      r3,-32688(r2)    100010b8:   f8 01 00 10     std     r0,16(r1)    100010bc:   f8 21 ff 91     stdu    r1,-112(r1)      <-- new stack frame    100010c0:   4b ff fc b9     bl      10000d78 <._init+0x68>    100010c4:   e8 41 00 28     ld      r2,40(r1)    100010c8:   39 20 00 00     li      r9,0    100010cc:   38 21 00 70     addi    r1,r1,112        <- restore old frame    100010d0:   38 60 00 05     li      r3,5    100010d4:   80 09 00 08     lwz     r0,8(r9)         <-- segv here    100010d8:   e8 01 00 10     ld      r0,16(r1)    100010dc:   7c 08 03 a6     mtlr    r0    100010e0:   4e 80 00 20     blrNote that the faulting instruction has moved past the stack frame restore.  This confuses the dwarf2 unwinder, because no dwarf2 description is emitted for the function epilogue.  We either need a dwarf2 epilogue description or must prevent any instruction that might cause an exception from being scheduled after the stack frame restore.",RESOLVED          FIXED      
25572,Alan Modra,ppc64 -mminimal-toc trashes r30,"We found this problem when building a ppc64 Linux kernel. It turns out r30 was not preserved in a function that was using a local TOC. The compiler used was:gcc version 4.0.3 20051201 (prerelease) (Debian 4.0.2-5)Although it seems to reproduce on older toolchains too (eg 3.4).pinskia cut the original test case down to:/* Compile with -m64 -O2 -mminimal-toc */int per_cpu__kstat;int *f(){  int *__ptr;  asm volatile("";%0"":""=g""(__ptr):""0""(&per_cpu__kstat));  return __ptr;}/*.f:        ld 30,.LCTOC0@toc(2)        ld 9,.LC0-.LCTOC1(30)        mr 3,9#APP        ;3#NO_APP*/",RESOLVED          FIXED      
20425,Alan Modra,-print-search-dirs doesn't honor mutil-os/multilib settings,"-print-search-dirs ignores the current multi-os/multilib settings.  Thus ""gcc -m64 -print-search-dirs"" on powerpc-linux or ""gcc -print-search-dirs"" on x86-64-linux prints the wrong library directories.  libtool needs this information to find the libraries",RESOLVED          FIXED      
25432,Alan Modra,[4.1/4.2 Regression] Reload ICE in gen_add2_insn,"The testcase I'm going to attach ICEs at -m64 -O1 on ppc:A.c: In function 'test':A.c:129: internal compiler error: in gen_add2_insn, at optabs.c:4126gen_add2_insn is called with(mem/u/c/i:DI (plus:DI (reg:DI 2 2)        (const:DI (minus:DI (symbol_ref/u:DI (""*.LC1"") [flags 0x2])                (symbol_ref:DI (""*.LCTOC1""))))) [0 S8 A64])as the second argument which doesn't match adddi3's predicate -reg_or_add_cint_operand.",RESOLVED          FIXED      
25406,Alan Modra,"[4.2 Regression] gcc.dg/20030625-1.c, gcc.dg/20050620-1.c, gcc.dg/940510-1.c, gcc.dg/c99-flex-array-1.c, gcc.dg/pr14475.c, and gcc.dg/noncompile/incomplete-1.c fail on powerpc-darwin","/Users/pinskia/src/gcc/combine/trunk/gcc/testsuite/gcc.dg/20030625-1.c:7: error: field 'moo' has incomplete type^M/Users/pinskia/src/gcc/combine/trunk/gcc/testsuite/gcc.dg/20030625-1.c:8: internal compiler error: tree check: expected class 'type', have 'exceptional' (error_mark) in rs6000_special_round_type_align, at config/rs6000/rs6000.c:2519^MPlease submit a full bug report,^Mwith preprocessed source if appropriate.^MSee <URL:http://gcc.gnu.org/bugs.html> for instructions.^M",RESOLVED          FIXED      
24950,Alan Modra,[3.4/4.0/4.1/4.2 Regression] ICE in operand_subword_force,"Running the testsuite I get the following ICE on the 4.1 branch:Executing on host: /abuild/aj/gcc/gcc/xgcc -B/abuild/aj/gcc/gcc/ /aj-cvs/gcc-svn/branches/gcc-4_1-branch/gcc/testsuite/gcc.c-torture/execute/20051113-1.c  -w  -O0  -fno-show-column  -lm   -m64 -o /abuild/aj/gcc/gcc/testsuite/20051113-1.x0    (timeout = 300)/aj-cvs/gcc-svn/branches/gcc-4_1-branch/gcc/testsuite/gcc.c-torture/execute/20051113-1.c: In function 'main':/aj-cvs/gcc-svn/branches/gcc-4_1-branch/gcc/testsuite/gcc.c-torture/execute/20051113-1.c:60: internal compiler error: in operand_subword_force, at emit-rtl.c:1386Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.compiler exited with status 1output is:/aj-cvs/gcc-svn/branches/gcc-4_1-branch/gcc/testsuite/gcc.c-torture/execute/20051113-1.c: In function 'main':/aj-cvs/gcc-svn/branches/gcc-4_1-branch/gcc/testsuite/gcc.c-torture/execute/20051113-1.c:60: internal compiler error: in operand_subword_force, at emit-rtl.c:1386Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.FAIL: gcc.c-torture/execute/20051113-1.c compilation,  -O0Compiler is:/opt/gcc/4.1-devel/bin/gcc -vUsing built-in specs.Target: powerpc64-suse-linux-gnuConfigured with: /aj-cvs/gcc-svn/branches/gcc-4_1-branch/configure --prefix=/opt/gcc/4.1-devel --enable-checking=misc,tree,gc,rtl,rtlflag,assert --enable-threads=posix --enable-clocale=gnu --enable-__cxa_atexit --enable-shared --enable-languages=c,c++,treelang,java,f95,objc --with-system-zlib --with-cpu=default32 powerpc64-suse-linux-gnuThread model: posixgcc version 4.1.0 20051119 (prerelease)",RESOLVED          FIXED      
25212,Alan Modra,[4.1 Regression] unrecognizable insn for facerec with odd optimization set,"Current trunk and 4.1 branch ICE on powerpc-linux compiling facerecfrom SPEC CPU2000 with an admittedly odd set of options:elm3b11% /opt/gcc-nightly/4.1/bin/gfortran -c -O2 -funroll-loops -ftree-vectorize -maltivec -fno-ivopts -fpic fr1201.ffr1201.f: In function ‘foo’:fr1201.f:38: error: unrecognizable insn:(insn 2616 288 289 28 (set (reg:SI 4 4)        (and:SI (plus:SI (reg:SI 26 26)                (reg:SI 0 0 [orig:141 base_off.93 ] [141]))            (const_int -16 [0xfffffffffffffff0]))) -1 (nil)    (nil))fr1201.f:38: internal compiler error: in extract_insn, at recog.c:2084The testcase compiles with GCC 4.0.2 and with the 4.0 branch.A regression hunt identified the following patch:http://gcc.gnu.org/viewcvs?view=rev&rev=103001r103001 | dje | 2005-08-11 21:18:11 +0000 (Thu, 11 Aug 2005) | 6 lines        * config/rs6000/altivec.md: Change constraint ""m"" to ""Z"".        * config/rs6000/predicates.md (indexed_or_indirect_operand):        Accept address wrapped in AND for Altivec.        * config/rs6000/rs6000.c (rs6000_legitimize_reload_address):        Strip AND wrapping offset address for Altivec.I'll attach a minimized testcase.",RESOLVED          FIXED      
24997,Alan Modra,[4.1 regression] ICE with -ftree-vectorize,"wmadec.c ICE's with:/home/jim/cvs/mplayer/ffmpeg/libavcodec/wmadec.c:1193: error: unrecognizable insn:(insn 4809 3267 2762 272 /home/jim/cvs/mplayer/ffmpeg/libavcodec/wmadec.c:1117 (set (reg:SI 9 9)        (and:SI (plus:SI (reg:SI 27 27)                (reg:SI 11 11 [orig:284 base_off.641 ] [284]))            (const_int -16 [0xfffffffffffffff0]))) -1 (nil)    (nil))/home/jim/cvs/mplayer/ffmpeg/libavcodec/wmadec.c:1193: internal compiler error: in extract_insn, at recog.c:2084the command line is: /usr/lib/gcc-snapshot/bin/gcc -O3 -g -Wall -Wno-switch  -maltivec -mabi=altivec  -DHAVE_AV_CONFIG_H -I.. -I/home/jim/cvs/mplayer/ffmpeg/libavutil -D_FILE_OFFSET_BITS=64 -D_LARGEFILE_SOURCE -D_GNU_SOURCE  -c -o wmadec.o /home/jim/cvs/mplayer/ffmpeg/libavcodec/wmadec.cThe gcc-snapshot is from the debian package version 20051122-1, the ice also occurs in earlier versions of the package.",RESOLVED          FIXED      
24908,Alan Modra,[4.0/4.1/4.2 Regression] ICE in dwarf2out for cpu2000 with -funroll-loops -fno-tree-copyrename,"Eight SPEC CPU2000 tests fail with an ICE in dwarf2out_frame_debug_expr,at dwarf2out.c:1554, on powerpc-linux with the options ""-g -fpic -O2-funroll-loops -fno-tree-copyrename"".  The minimized testcase also failswith GCC 4.0.0 with those options plus ""-fweb -frename-registers"" whichare now turned on with -funroll-loops.  Some of the those CPU2000 testspass with those options with GCC 4.0.0, but the bug is likely latent inthose cases.                                                                                I built SPEC CPU2000 with several sets of options generated by the toolallpairs, which takes sets of choices and combines them to have eachpair of possibilities included in at least one set.  It's likely that nosane user would come up with the set of options that cause this failure.",RESOLVED          FIXED      
13873,Alan Modra,gcc/longlong.h uses test for PPC,"PPC is much too generic a define for testing to see if it is a PowerPC target. This is found to complicate things with a vxWorks target other than PowerPC. ForvxWorks, PPC is defined (along with many other CPUs) all the time - regardlessof the target CPU type.There are two tests for PPC.  They should be modified or removed.",RESOLVED          FIXED      
21017,Alan Modra,ppc 64bit target not using rlwinm,"Using a recent 4.0 CVS:gcc version 4.0.0 20050412 (prerelease)Compiling the following as 64bit:unsigned int foo(unsigned int x){                return ((x >> 16) & 0xffff) | ((x & 0xffff) << 16);}Results in:.L.foo:        slwi 0,3,16        srwi 3,3,16        or 3,3,0        rldicl 3,3,0,32        blrCompiling for 32bit results in:foo:        rlwinm 3,3,16,0xffffffff        blrIt looks like the 64bit case could be done in 2 instructions if we masked thetop 32bits of the rlwinm result.",RESOLVED          FIXED      
24954,Alan Modra,[4.1/4.2 Regression] ICE: could not split insn,"Running the GCC testsuite I get the following ICE:Executing on host: /abuild/aj/gcc/gcc/xgcc -B/abuild/aj/gcc/gcc/ /aj-cvs/gcc-svn/branches/gcc-4_1-branch/gcc/testsuite/gcc.target/powerpc/altivec-consts.c   -maltivec -mabi=altivec -O2 -fno-show-column  -lm   -m64 -o ./altivec-consts.exe    (timeout = 300)/aj-cvs/gcc-svn/branches/gcc-4_1-branch/gcc/testsuite/gcc.target/powerpc/altivec-consts.c: In function 'v4si_vspltisw_neg_addself':/aj-cvs/gcc-svn/branches/gcc-4_1-branch/gcc/testsuite/gcc.target/powerpc/altivec-consts.c:280: error: could not split insn(insn 17 18 19 (set (reg:V4SI 79 2)        (const_vector:V4SI [                (const_int -24 [0xffffffffffffffe8])                (const_int -24 [0xffffffffffffffe8])                (const_int -24 [0xffffffffffffffe8])                (const_int -24 [0xffffffffffffffe8])            ])) 603 {*movv4si_internal} (insn_list:REG_DEP_OUTPUT 12 (insn_list:REG_DEP_OUTPUT 35 (nil)))    (expr_list:REG_EQUAL (const_vector:V4SI [                (const_int -24 [0xffffffffffffffe8])                (const_int -24 [0xffffffffffffffe8])                (const_int -24 [0xffffffffffffffe8])                (const_int -24 [0xffffffffffffffe8])            ])        (nil)))/aj-cvs/gcc-svn/branches/gcc-4_1-branch/gcc/testsuite/gcc.target/powerpc/altivec-consts.c:280: internal compiler error: in final_scan_insn, at final.c:2467Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.[...]FAIL: gcc.target/powerpc/altivec-consts.c (test for excess errors)Compiler used is:/opt/gcc/4.1-devel/bin/gcc -vUsing built-in specs.Target: powerpc64-suse-linux-gnuConfigured with: /aj-cvs/gcc-svn/branches/gcc-4_1-branch/configure --prefix=/opt/gcc/4.1-devel --enable-checking=misc,tree,gc,rtl,rtlflag,assert --enable-threads=posix --enable-clocale=gnu --enable-__cxa_atexit --enable-shared --enable-languages=c,c++,treelang,java,f95,objc --with-system-zlib --with-cpu=default32 powerpc64-suse-linux-gnuThread model: posixgcc version 4.1.0 20051119 (prerelease)",RESOLVED          FIXED      
24096,Alan Modra,huge() returns infinity for long doubles,"powerpc64-linux, powerpc-darwin, and other targets that use the IBM extendeddouble format for long double currently fail gfortran.dg/large_real_kind_1.f90,due to huge() returning infinity.Patch at http://gcc.gnu.org/ml/fortran/2005-09/msg00533.html",RESOLVED          FIXED      
23392,Alan Modra,[4.1 Regression] foward-1.m fails with -funroll-loops -O3 -fgnu-runtime,"This PR is to record the following failures:FAIL: objc/execute/exceptions/foward-1.m execution,  -O3 -fomit-frame-pointer -funroll-loops  -fgnu-runtimeFAIL: objc/execute/exceptions/foward-1.m execution,  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  -fgnu-runtimeI have not looked into what is causing the failure yet.",RESOLVED          FIXED      
22002,Alan Modra,[4.0 Regression] internal consistency failure with -funroll-loops,"the following attached testcase triggers a compiler error on powerpc64 with -funroll-loops only:  gcc   -O2  -funroll-loops  -c legendre_poly.i   legendre_poly.i: In function &#8216;f&#8217;: legendre_poly.i:15: fatal error: internal consistency failure compilation terminated.  it is extracted from ""gsl"".",RESOLVED          FIXED      
23070,Alan Modra,[3.4 only] CALL_V4_CLEAR_FP_ARGS flag not properly set,"When a prototyped function of var-arg is called without any argumentsto the variable part, ""crxor 6,6,6"" is not generated.  ""-O0-mno-prototype"" does NOT resolve the problem either.--------test.c--------int test(const char *a, ...);void test1(const char *a){ test(a, 0); }void test2(const char *a){ test(a); }--------test.s--------        .file   ""test.c""        .section        "".text""        .align 2        .globl test1        .type   test1, @functiontest1:        stwu 1,-24(1)        mflr 0        stw 31,20(1)        stw 0,28(1)        mr 31,1        stw 3,8(31)        lwz 3,8(31)        li 4,0        crxor 6,6,6    <== has it        bl test        lwz 11,0(1)        lwz 0,4(11)        mtlr 0        lwz 31,-4(11)        mr 1,11        blr        .size   test1, .-test1        .align 2        .globl test2        .type   test2, @functiontest2:        stwu 1,-24(1)        mflr 0        stw 31,20(1)        stw 0,28(1)        mr 31,1        stw 3,8(31)        lwz 3,8(31)        bl test       <== does not have        lwz 11,0(1)        lwz 0,4(11)        mtlr 0        lwz 31,-4(11)        mr 1,11        blr        .size   test2, .-test2        .ident  ""GCC: (GNU) 3.4.3""",RESOLVED          FIXED      
24465,Alan Modra,[4.1 Regression] -mminimal-toc miscompilation of __thread vars,RS6000_PIC_OFFSET_TABLE_REGNUM isn't being set up for functions that don't need a constant pool but access __thread vars using __tls_get_addr./* Fails with -m64 -mminimal-toc -fPIC */static __thread int x;int foo (void){  return x;}This is the reason why powerpc64 has been getting lots of libjava failures since this libjava change: 2005-09-27  Tom Tromey  <tromey@redhat.com>,RESOLVED          FIXED      
21460,Alan Modra,sjlj_emit_function_enter adds rtl to wrong block,"When compiling a C++ file, gcc 4.0.0 and 4.0.1 20050507 prerelease report an internal compiler error:> /gcc-test/bin/g++ ice.cpp -O2ice.cpp: In constructor 'SomeException::SomeException(const char*, ...)':ice.cpp:21: internal compiler error: in calc_dfs_tree, at dominance.c:376Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.> /gcc-test/bin/g++ -vUsing built-in specs.Target: powerpc-linuxConfigured with: ../gcc-4.0-20050507/configure --enable-languages=c,c++ --prefix=/gcc-test --with-gnu-as --with-gnu-ld --with-system-zlib --without-included-gettext --enable-threads=posix --enable-haifa --enable-sjlj-exceptions powerpc-linuxThread model: posixgcc version 4.0.1 20050507 (prerelease)When not using -O2 or when using -O2 -msoft-float, the ICE isn't reported. This points to  /* Save FP registers if needed.  */  if (DEFAULT_ABI == ABI_V4      && TARGET_HARD_FLOAT && TARGET_FPRS      && ! no_rtl      && next_cum.fregno <= FP_ARG_V4_MAX_REG)branch in gcc/config/rs6000/rs6000.c whose contents causes the problem (directly or indirectly).I have managed to create a minimal testcase for the problem and will attach it to this report.",VERIFIED          FIXED      
24102,Alan Modra,floatdisf2_internal2 broken,"The floatdisf2_internal2 is broken since 2004-11-26, which will result in brokenrounding for float casts.   long long l = (((1L << 24) + 1) << 29) + 1;   float f = (float)l;will eg. lead tof=9007199254740992.000000instead off=9007200328482816.000000If I'm not mistaken, rs6000.md:5239 should read (const_int 2) instead of(const_int 3).",RESOLVED          FIXED      
23774,Alan Modra,dealloc of dynamic stack space breaks backchain,"The following compiled with -m32 -O2 -Svoid badFunc (int size){   char temp[size];  temp[size-1] = '\0';};givesbadFunc:        mflr 0        stwu 1,-16(1)        stw 0,20(1)        addi 0,3,30        lwz 9,0(1)        mr 11,1        stw 31,12(1)        mr 31,1        rlwinm 0,0,0,0,27        neg 0,0        stwux 9,1,0        li 9,0        addi 0,1,23        rlwinm 0,0,0,0,27        add 3,3,0        stb 9,-1(3)      <- old backchain possibly overwritten        nop        nop        nop        lwz 0,0(1)        mr 1,11          <- adjust stack, backchain possibly invalid!        stw 0,0(1)       <- write backchain        nop        lwz 11,0(1)        lwz 0,4(11)        lwz 31,-4(11)        mr 1,11        mtlr 0        blrThis testcase also showsa) excess allocation of dynamic stack space,b) needless alignment of dynamic stack space,c) poor epilogue code, with unnecesary stack adjustments.",RESOLVED          FIXED      
9297,Alan Modra,[3.2/3.3/3.4 regression] data corruption due to codegen bug (when copying.),"Memory corruption is occurring due to codegen bug.Copying a data structure through a temporary returned byvalue from a function is corrupt.  But copying directlyis ok.The following conditions seem to need to be present:1) the object (""Data"") is an exact multiple of 64-bytes.   Changing the size of Data::argv_ seems to fix the problem.2) the object (""Data"") uses the compiler supplied copy   constructor.  Supplying a copy ctor seems to fix the   problem. 3) make_data() takes its parameter by value.  Changing   make_data() to take its argument by reference seems to   fix the problem.4) compile without optimizations.  Compiling with -O3   seems to fix the problem.CODE: Program Output:a.out: /tmp/bug.cpp:51: int main(int, char**): Assertion`d2.argv_[0] == 'A'' failed. Aborted (core dumped)To reproduce:Save this file as bug.cpp, then compile with ""g++bug.cpp""---While this is contrived code, the same problem occursin real code using std::make_pair, which is what inspiredthis investigation.---g++ -v -save-temps bug.cppReading specs from /usr/local/gcc-3.2/lib/gcc-lib/i686-pc-linux-gnu/3.2/specsConfigured with: ./configure --prefix=/usr/local/gcc-3.2 --enable-threads --enable-languages=c,javaThread model: posixgcc version 3.2 /usr/local/gcc-3.2/lib/gcc-lib/i686-pc-linux-gnu/3.2/cpp0 -lang-c++ -D__GNUG__=3 -D__DEPRECATED -D__EXCEPTIONS -v -D__GNUC__=3 -D__GNUC_MINOR__=2 -D__GNUC_PATCHLEVEL__=0 -D__GXX_ABI_VERSION=102 -D__ELF__ -Dunix -D__gnu_linux__ -Dlinux -D__ELF__ -D__unix__ -D__gnu_linux__ -D__linux__ -D__unix -D__linux -Asystem=posix -D__NO_INLINE__ -D__STDC_HOSTED__=1 -D_GNU_SOURCE -Acpu=i386 -Amachine=i386 -Di386 -D__i386 -D__i386__ -D__tune_i686__ -D__tune_pentiumpro__ bug.cpp bug.iiGNU CPP version 3.2 (cpplib) (i386 Linux/ELF)ignoring nonexistent directory ""/usr/local/gcc-3.2/i686-pc-linux-gnu/include""#include ""..."" search starts here:#include <...> search starts here: /usr/local/gcc-3.2/include/c++/3.2 /usr/local/gcc-3.2/include/c++/3.2/i686-pc-linux-gnu /usr/local/gcc-3.2/include/c++/3.2/backward /usr/local/include /usr/local/gcc-3.2/include /usr/local/gcc-3.2/lib/gcc-lib/i686-pc-linux-gnu/3.2/include1 /usr/includeEnd of search list. /usr/local/gcc-3.2/lib/gcc-lib/i686-pc-linux-gnu/3.2/cc1plus -fpreprocessed bug.ii -quiet -dumpbase bug.cpp -version -o bug.sGNU CPP version 3.2 (cpplib) (i386 Linux/ELF)GNU C++ version 3.2 (i686-pc-linux-gnu)        compiled by GNU C version 3.2. as -V -Qy -o bug.o bug.sGNU assembler version 2.13.90.0.2 (i386-redhat-linux) using BFD version 2.13.90.0.2 20020802 /usr/local/gcc-3.2/lib/gcc-lib/i686-pc-linux-gnu/3.2/collect2 -m elf_i386 -dynamic-linker /lib/ld-linux.so.2 /usr/lib/crt1.o /usr/lib/crti.o /usr/local/gcc-3.2/lib/gcc-lib/i686-pc-linux-gnu/3.2/crtbegin.o -L/usr/local/gcc-3.2/lib/gcc-lib/i686-pc-linux-gnu/3.2 -L/usr/local/gcc-3.2/lib/gcc-lib/i686-pc-linux-gnu/3.2/../../.. bug.o -lstdc++ -lm -lgcc_s -lgcc -lc -lgcc_s -lgcc /usr/local/gcc-3.2/lib/gcc-lib/i686-pc-linux-gnu/3.2/crtend.o /usr/lib/crtn.oRelease:g++ 3.2Environment:RH linux 7.3 SMC. Intel dual P3/950 MHzHow-To-Repeat:compile the following code with the command: ""g++ bug.cpp""It's not preprocessed, but <cassert> is the only file included.#include <cassert>typedef unsigned int size_t;extern void *memset(void *s, int c, size_t n);extern char *strncpy(char *dest, const char *src, size_t n);struct Data {  Data() {  memset(argv_, '\0', sizeof(argv_)); }  Data(char const * s) {    strncpy (argv_, s, sizeof(argv_));    argv_[sizeof(argv_)-1] = '\0';  }  char argv_[64];};// it does not matter if this is inline or not.inline Data make_data(Data y) { return y; }int main(int argc, char * argv[]){  // create a ""prototype"" object  Data data(""ABCDEF"");  assert(data.argv_[0] == 'A'); // OK  // direct copy works  Data d1(data);  assert(d1.argv_[0] == 'A'); // OK  // copy temporary through helper function fails...  Data d2( make_data(data) );  assert(d2.argv_[0] == 'A'); // fail}",RESOLVED          FIXED      
14960,Alan Modra,[3.4 only] -maltivec affects vector return with -mabi=no-altivec,"The -maltivec instruction should enable the use of the AltiVecinstruction set without affecting how function values are returned.The documentation in invoke.texi says for -maltivec, ""you may alsoneed to set -mabi=altivec to adjust the current ABI with AltivecABI enhancements"", but that doesn't appear to be required; two modulesthat are both compiled with either -mabi=altivec or -mabi=no-altivecshould be intercallable, even if they pass vector arguments or havevector return values.  Vector function return values are passeddifferently, though, depending on whether -maltivec is specifiedinstead of which ABI is specified.                                                                                This test case fails when either of the two files is compiled with-maltivec and the other is compiled without it, and both are compiledwith -mabi=no-altivec.  This is for either -m32 or -m64 forpowerpc64-linux, with current GCC 3.4 branch.  I'll try other branchessoon and report what I find.                                                                                --- bug.c --------------------------------------------------------------/* Call a function whose return value is a vector.  Define the data that   the function will use as input, and verify that it returned the   correct values.  */                                                                                extern __attribute__((vector_size(16))) int foo (void);                                                                                __attribute__((vector_size(16))) int i = { 100, 200, 300, 400 };__attribute__((vector_size(16))) int j = { 10, 20, 30, 40 };__attribute__((vector_size(16))) int k;                                                                                extern void abort (void);extern __attribute__((vector_size(16))) int foo (void);                                                                                voidcheck (){    union {        __attribute__((vector_size(16))) int v;        int i[4];    } u;                                                                                    u.v = k;    if (u.i[0] != 110 || u.i[1] != 220 || u.i[2] != 330 || u.i[3] != 440)        abort ();}                                                                                intmain (){    k = foo ();    check ();    return 0;}--- buga.c -------------------------------------------------------------/* Return a vector.  */                                                                                extern __attribute__((vector_size(16))) int i, j;                                                                                __attribute__((vector_size(16))) intfoo (void){    return i + j;}------------------------------------------------------------------------",RESOLVED          FIXED      
10397,Alan Modra,powerpc64 aggregate pass by value,"gcc exhibits a number of incompatibilities with the powerpc64ABI with regards to passing structures by value.  Theattached testcase shows one particular problem, that argumentpadding on certain structures differs between the reg paramarea and the stack param area.  This breaks va_arg.I'd like to add the testcase as gcc.dg/struct-by-value-2.c(in gcc.dg because it takes a rather long time to compile).Release:All current gcc-3.x branches",RESOLVED          FIXED      
10408,Alan Modra,Two powerpc64 ABI incompatibilities in passing structures by value,"The testcase below shows a couple of bugs in the way gcchandles passing structures by value.  The powerpc64 ABIstates that""The first eight doublewords mapped to the parameter save area are never stored in the parameter save area by the calling function.  Instead, these doublewords are passed in registers...""Bug1: The testcase shows gcc passing the structure on thestack in the -mstrict-align case.  This also happens forstructures of sizes 3,5,6,7 bytes without -mstrict-align.Bug2: -mstrict-align affects argument padding.  With-mstrict-align, the arg is padded upward in its slot,without, the arg is padded downward.  Thus objects compiledwith -mstrict-align are incompatible with objects compilerwith -mno-strict-align.Release:All current 3.x gcc branchesHow-To-Repeat:cat >m.c <<EOFstruct it { char c[2]; };int foo (struct it x) { return x.c[0]; }EOFpowerpc64-linux-gcc -O2 -S -mno-strict-align -o z1.s m.cpowerpc64-linux-gcc -O2 -S -mstrict-align -o z2.s m.c-mno-strict-align.foo:        rldicl 3,3,56,56        blr-mstrict-align.foo:        lbz 3,48(1)        blr",RESOLVED          FIXED      
9722,Alan Modra,[3.4 regression] structure passing miscompilation,"gcc generates bad code in the function bar() below for the passingof the structure to foo().  (Amusingly, the problem shows up onlywith optimization off and goes away with optimization on --- but onlybecause foo() gets inlined with optimization on.)I expect the program to print `4 5 6'.  Here is what it actuallyprints for me:$ g++ -o x x.cc$ ./x1073820864 1073824136 1073824548$Here is code generated for the bar() function (with labels unused hereremoved for readability):_Z3barR1B:        pushl   %ebp        movl    %esp, %ebp        pushl   %edi        pushl   %esi        pushl   %ebx        subl    $156, %esp        movl    8(%ebp), %eax        movl    %esp, %ecx        movl    %eax, %edx        movl    $144, %eax        movl    8(%esp), %esi        movl    %eax, 8(%esp)        movl    4(%esp), %edi        movl    %edx, 4(%esp)        movl    (%esp), %ebx        movl    %ecx, (%esp)        call    memcpy        movl    %esi, 8(%esp)        movl    %edi, 4(%esp)        movl    %ebx, (%esp)        call    _Z3foo1B        addl    $156, %esp        popl    %ebx        popl    %esi        popl    %edi        popl    %ebp        retIt looks like the generated code properly copies the structureto be passed into the stack, but it then overwrites thefirst three words (immediately after the memcpy call).I do not see this failure in the 3.3 branch.I also do not see the failure if i adjust the source to bevalid C code and use gcc instead of g++.Release:3.4 20030210 (experimental)Environment:System: Linux karma 2.4.19-emp_2419p5a829i #1 Tue Sep 3 17:42:17 EST 2002 i686 unknownArchitecture: i686	<machine, os, target, libraries (multiple lines)>host: i686-pc-linux-gnubuild: i686-pc-linux-gnutarget: i686-pc-linux-gnuconfigured with: ../gcc/configure --prefix=/usr/local/gcc --enable-threads=posix --enable-long-longHow-To-Repeat:-----------------------------------extern ""C"" int printf(...);extern ""C"" void memset(...);struct B{  int f[36];};void foo (B b) {printf (""%d %d %d\n"", b.f[0], b.f[1], b.f[2]);}void bar (B& b){  foo (b);}int main (){  B b;  memset (&b.f, 0, sizeof (B));  b.f[0] = 4;  b.f[1] = 5;  b.f[2] = 6;  bar(b);  return 0;}-----------------------------------",RESOLVED          FIXED      
11229,Alan Modra,pure-1.c fails on powerpc64-linux with -O1,"The test gcc.c-torture/execute/pure-1.c fails onpowerpc64-unknown-linux-gnu with -O1 and higher levels of optimization.This happens with mainline, 3.3, and 3.2; I've never been able to buildearlier versions of GCC for this target.Alan Modra described the problem and proposed a patch inhttp://gcc.gnu.org/ml/gcc-patches/2003-03/msg02371.html; that patchhas never been reviewed.This was tested with a cross compiler from powerpc-linux on apowerpc64-linux system, which is the usual way to use GCC for thistarget.",RESOLVED          FIXED      
6984,Alan Modra,"wrong code generated with -O2, -O3, -Os for do-while loop on PowerPC","File test1.c:void f1 (unsigned n) {        do {        } while (--n);}void f2 (unsigned n) {l1:        if (--n) goto l1;}When compiled with:ppc-eabi-gcc -v -save-temps -c -O2 -Wall test1.cProduces wrong-large-ugly code for function f1().The same for -O3 and -Os.For -O1 all Ok.Note: code for function f2() always Ok.Release:3.1Environment:../gcc-3.1/configure --with-gcc-version-trigger=/home/install/gcc-3.1/gcc/version.c --host=i686-pc-linux-gnu --with-newlib --enable-target-optspace --target=ppc-eabi --prefix=/home/crossGCC/ppc-eabi --with-local-prefix=/home/crossGCC/ppc-eabi --program-prefix=ppc-eabi- --enable-languages=c,c++ -v --norecursionHow-To-Repeat:compile test1.c:void f1 (unsigned n) {        do {        } while (--n);}void f2 (unsigned n) {l1:        if (--n) goto l1;}with command line like:ppc-eabi-gcc -v -save-temps -c -O2 -Wall test1.cand see file test1.s:        .file   ""test1.c""        .section        "".text""        .align 2        .globl f1        .type   f1,@functionf1:        cmpwi 0,3,0        bne- 0,.L7        li 3,1.L7:        mtctr 3.L6:        bdnz .L6        blr.Lfe1:        .size   f1,.Lfe1-f1        .align 2        .globl f2        .type   f2,@functionf2:        mtctr 3.L9:        bdnz .L9        blr.Lfe2:        .size   f2,.Lfe2-f2        .ident  ""GCC: (GNU) 3.1""Code for f1() must be the same as for f2().",RESOLVED          FIXED      
7510,Alan Modra,gcc 3.1: ICE in extract_insn on RS/6k AIX (works on x86 linux),"I'm trying to build MatView, http://www.csm.ornl.gov/~kohl/MatView/.    It builds fine on an x86 linux system (gcc 2.96) but on an IBM RS/6000    with gcc 3.1 I get an ICE:cc1: warning: changing search order for system directory ""/usr/local/include""cc1: warning:   as it has already been specified as a non-system directory/scratch/MatView/file.c: In function `read_coordinate':/scratch/MatView/file.c:1912: unrecognizable insn:(insn 1939 1674 1940 (parallel[            (set (reg/v:SI 27 r27 [140])                (plus:SI (gt:SI (reg:SI 9 r9 [469])                        (const_int 0 [0x0]))                    (reg/v:SI 27 r27 [140])))            (clobber (reg:SI 11 r11))        ] ) -1 (nil)    (nil))/scratch/MatView/file.c:1912: Internal compiler error in extract_insn, at recog.c:2132Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.Release:3.0.1Environment:System: AIX manila 3 4 000155349100	host: powerpc-ibm-aix4.3.2.0build: powerpc-ibm-aix4.3.2.0target: powerpc-ibm-aix4.3.2.0configured with: ./configure --enable-threads=aix --disable-nlsHow-To-Repeat:	Here is uuencoded gzip -9'ed file.iSee attachments for file.i.gz.uu",RESOLVED          FIXED      
5967,Alan Modra,gcc bug when profiling nested functions on powerpc,"gcc version:When generating routine profiling header code, gcc conditionally insertsamove register (mr) instruction if the function being compiled""needs_context"".  The mr copies the register of the static chain pointerto r30 before the call to _mcount, and copies it back after the _mcounthas returned.  However, r30 is not checked to see if it is being used bythe parent function.How found:Compiled glibc 2.1.3 using profiling options (with backport patch ofdl-machine.h from glibc 2.2.5).  When __printf_fp()  (a child functionofprintf() that is called when a floating point format is invoked) iscalled, a segfault is seen.  This is because __printf_fp() calls anestedfunction named hack_digit().Example of brokenness:1001014c <hack_digit.180>:1001014c:       7c 08 02 a6     mflr    r010010150:       3d 80 10 05     lis     r12,410110010154:       90 01 00 04     stw     r0,4(r1)10010158:       38 0c 20 78     addi    r0,r12,83121001015c:       7d 7e 5b 78     mr      r30,r1110010160:       4b ff 9f 21     bl      1000a080 <_mcount>10010164:       7f cb f3 78     mr      r11,r3010010168:       94 21 ff e0     stwu    r1,-32(r1)1001016c:       7c 08 02 a6     mflr    r010010170:       93 c1 00 18     stw     r30,24(r1)Specific code from gcc:from rs6000.c:voidoutput_function_profiler (file, labelno)  FILE *file;  int labelno;{        ...      if (current_function_needs_context)        asm_fprintf (file, ""\tmr %s,%s\n"",                     reg_names[30], reg_names[STATIC_CHAIN_REGNUM]);      fprintf (file, ""\tbl %s\n"", RS6000_MCOUNT);      if (current_function_needs_context)        asm_fprintf (file, ""\tmr %s,%s\n"",                     reg_names[STATIC_CHAIN_REGNUM], reg_names[30]);        ...Release:2.95.2 and 3.0.2Environment:At least on 2.95.2, and 3.0.2.Linux PowerPCHow-To-Repeat:compile with gcc 2.95.2 or gcc-3.0.2 on a Linux PowerPC:gcc -O2 -p -S prog.cthem look at prog.s and note that r30 is live across thecall to bar(), and bar clobbers r30 (profiling code).",RESOLVED          FIXED      
6233,Alan Modra,simple loop miscompilation,"function call incorrectly moved out of loop at -O2.Release:3.2 20020408 (experimental)Environment:configured with: /src/gcc-current/configure --prefix=/usr/local --build=i686-linux --host=i686-linux --target=i686-linux --disable-nls --enable-shared --enable-languages=c,c++How-To-Repeat:	testcase distilled from binutils sourcesextern char *p;static intis_end_of_statement (){  return *p == '\n' || *p == ';' || *p == '!';}void foo (void){  while (!is_end_of_statement ())    p++;}",RESOLVED          FIXED      
6413,Alan Modra,PROFILE_HOOK label_no,"There's an underlying problem with PROFILE_HOOK and it's	label_no arg:  Inline function rtl generated by PROFILE_HOOK	will use the value of profile_label_no when the inline	function is defined.  For static inline functions,	profile_label_no is not incremented, thus a deferred	out-of-line expansion typically uses the wrong profile counter	label.  On pa, it's even worse as the label_no is used to	access a local label at the start of the function with a	pc-rel offset from the _mcount call.  Using the wrong label	can generate assembly code that overflows ldo insns.Release:3.1 20020417 (prerelease)Environment:	pa, rs6000 AIX_ABI, sparc targets.How-To-Repeat:	Attached testcase.  Debug session for pa shows the problem.	Note how profile_label_no is stuck on 1 for the profile_hook	calls on the static inline functions, and increments on the	profile_function calls.Breakpoint 4, hppa_profile_hook (label_no=0)    at /src/gcc-ppc64-31/gcc/config/pa/pa.c:35352: profile_label_no = 01: cfun->name = 0x82e1088 ""foo""(gdb) cContinuing.Breakpoint 6, profile_function (file=0x4001a500)    at /src/gcc-ppc64-31/gcc/final.c:16022: profile_label_no = 01: cfun->name = 0x82e1088 ""foo""(gdb) bt#0  profile_function (file=0x4001a500) at /src/gcc-ppc64-31/gcc/final.c:1602#1  0x080d9e7b in final_start_function (first=0x4001a500, file=0x82da748,     optimize=2) at /src/gcc-ppc64-31/gcc/final.c:1531#2  0x0817773e in rest_of_compilation (decl=0x40185b60)    at /src/gcc-ppc64-31/gcc/toplev.c:3480#3  0x08059592 in c_expand_body (fndecl=0x40185b60, nested_p=0, can_defer_p=1)    at /src/gcc-ppc64-31/gcc/c-decl.c:7122#4  0x08059357 in finish_function (nested=0, can_defer_p=1073849600)    at /src/gcc-ppc64-31/gcc/c-decl.c:6989#5  0x08049eb7 in yyparse_1 () at c-parse.y:386#6  0x08176204 in compile_file () at /src/gcc-ppc64-31/gcc/toplev.c:2120#7  0x0817a8f9 in do_compile () at /src/gcc-ppc64-31/gcc/toplev.c:5202#8  0x0817a95b in toplev_main (argc=1073849600, argv=0x0)    at /src/gcc-ppc64-31/gcc/toplev.c:5234#9  0x0807fafb in main (argc=1073849600, argv=0x4001a500)    at /src/gcc-ppc64-31/gcc/main.c:35#10 0x4003ea8e in __libc_start_main (main=0x807fae0 <main>, argc=40,     argv=0xbffff1c4, init=0x8049054 <_init>, fini=0x8213170 <_fini>,     rtld_fini=0x4000aa20 <_dl_fini>, stack_end=0xbffff1bc)    at ../sysdeps/generic/libc-start.c:92(gdb) cContinuing.Breakpoint 4, hppa_profile_hook (label_no=1)    at /src/gcc-ppc64-31/gcc/config/pa/pa.c:35352: profile_label_no = 11: cfun->name = 0x82e107f ""f0""(gdb) Continuing.Breakpoint 4, hppa_profile_hook (label_no=1)    at /src/gcc-ppc64-31/gcc/config/pa/pa.c:35352: profile_label_no = 11: cfun->name = 0x82e1082 ""f1""(gdb) Continuing.Breakpoint 4, hppa_profile_hook (label_no=1)    at /src/gcc-ppc64-31/gcc/config/pa/pa.c:35352: profile_label_no = 11: cfun->name = 0x82e1085 ""f2""(gdb) Continuing.Breakpoint 6, profile_function (file=0x4001a600)    at /src/gcc-ppc64-31/gcc/final.c:16022: profile_label_no = 11: cfun->name = 0x82e107f ""f0""(gdb) Continuing.Breakpoint 6, profile_function (file=0x4001a700)    at /src/gcc-ppc64-31/gcc/final.c:16022: profile_label_no = 21: cfun->name = 0x82e1082 ""f1""(gdb) Continuing.Breakpoint 6, profile_function (file=0x4001a800)    at /src/gcc-ppc64-31/gcc/final.c:16022: profile_label_no = 31: cfun->name = 0x82e1085 ""f2""(gdb) bt#0  profile_function (file=0x4001a800) at /src/gcc-ppc64-31/gcc/final.c:1602#1  0x080d9e7b in final_start_function (first=0x4001a800, file=0x82da748,     optimize=2) at /src/gcc-ppc64-31/gcc/final.c:1531#2  0x0817773e in rest_of_compilation (decl=0x401859a0)    at /src/gcc-ppc64-31/gcc/toplev.c:3480#3  0x0811c701 in output_inline_function (fndecl=0x401859a0)    at /src/gcc-ppc64-31/gcc/integrate.c:3004#4  0x08175e97 in wrapup_global_declarations (vec=0x82e9cd0, len=0)    at /src/gcc-ppc64-31/gcc/toplev.c:1975#5  0x0817627b in compile_file () at /src/gcc-ppc64-31/gcc/toplev.c:2152#6  0x0817a8f9 in do_compile () at /src/gcc-ppc64-31/gcc/toplev.c:5202#7  0x0817a95b in toplev_main (argc=1073850368, argv=0x0)    at /src/gcc-ppc64-31/gcc/toplev.c:5234#8  0x0807fafb in main (argc=1073850368, argv=0x4001a800)    at /src/gcc-ppc64-31/gcc/main.c:35#9  0x4003ea8e in __libc_start_main (main=0x807fae0 <main>, argc=40,     argv=0xbffff1c4, init=0x8049054 <_init>, fini=0x8213170 <_fini>,     rtld_fini=0x4000aa20 <_dl_fini>, stack_end=0xbffff1bc)    at ../sysdeps/generic/libc-start.c:92(gdb) cContinuing.Program exited normally.Unformatted: --HG+GLK89HZ1zG0kk Content-Type: text/plain; charset=us-ascii Content-Disposition: inline",RESOLVED          FIXED      
7027,Alan Modra,"Internal compiler error in dwarf2out_frame_debug_expr, at dwarf2out.c:1517","./xgcc -B ./ -O2 -c -DIN_GCC    -g -W -Wall -Wwrite-strings -Wstrict-prototypes -Wmissing-prototypes -Wtraditional -pedantic -Wno-long-long  -DHAVE_CONFIG_H    -I. -I. -I../../gcc -I../../gcc/. -I../../gcc/config -I../../gcc/../include \  -DSTANDARD_STARTFILE_PREFIX=\""../../../\"" -DSTANDARD_EXEC_PREFIX=\""/usr/lib/gcc-lib/\"" -DDEFAULT_TARGET_VERSION=\""3.2\"" -DDEFAULT_TARGET_MACHINE=\""powerpc-unknown-linux-gnu\"" -DSTANDARD_BINDIR_PREFIX=\""/usr/bin/\"" -DTOOLDIR_BASE_PREFIX=\""../../../../\"" `test ""X${SHLIB_LINK}"" = ""X"" || test ""yes"" != ""yes"" || echo ""-DENABLE_SHARED_LIBGCC""` `test ""X${SHLIB_MULTILIB}"" = ""X"" || echo ""-DNO_SHARED_LIBGCC_MULTILIB""` \  ../../gcc/protoize.c -o protoize.o)../../gcc/protoize.c: In function `safe_write':../../gcc/protoize.c:645: internal compiler error: Internal compiler error in dwarf2out_frame_debug_expr, at dwarf2out.c:1517Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.make: *** [protoize.o] Error 1Release:gcc-3.2 20020613 (experimental)Environment:powerpc-unknown-linux-gnu",RESOLVED          FIXED      
7114,Alan Modra,ICE building strcoll.op from glibc-2.2.5,"If the ""-mmultiple"" options is specified, GCC throws an ICE while compiling the profiled version of strcoll.c from the ""string"" subdirectory of glibc-2.2.5. If the ""-mmultiple"" option is removed, everything is fine.Release:gcc-3.1Environment:PowerPC PPC405GP based hardware, native gcc-3.1, native binutils-2.12.1, glibc-2.2.5How-To-Repeat:> gcc strcoll.i -c -O2 -Wall -Wbad-function-cast -Wcast-qual -Wcomment -Wcomments -Wfloat-equal -Winline -Wmissing-declarations -Wmissing-noreturn -Wmissing-prototypes -Wmultichar -Wsign-compare -Wstrict-prototypes -Wtrigraphs -Wwrite-strings -mmultiple -msoft-float -mnew-mnemonics -Wa,-mppc -mpowerpc -pg -nostdinc -o ~/strcoll.opstrcoll.c: In function `findidx':strcoll.c:549: Attempt to delete prologue/epilogue insn:(insn 693 692 695 (parallel[             (set (reg:SI 30 r30)                (mem:SI (plus:SI (reg/f:SI 1 r1)                        (const_int 24 [0x18])) [1 S4 A8]))            (set (reg/f:SI 31 r31)                (mem:SI (plus:SI (reg/f:SI 1 r1)                        (const_int 28 [0x1c])) [1 S4 A8]))        ] ) -1 (nil)    (nil))strcoll.c:549: Internal compiler error in propagate_one_insn, at flow.c:1615Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.> gcc strcoll.i -c -O2 -Wall -Wbad-function-cast -Wcast-qual -Wcomment -Wcomments -Wfloat-equal -Winline -Wmissing-declarations -Wmissing-noreturn -Wmissing-prototypes -Wmultichar -Wsign-compare -Wstrict-prototypes -Wtrigraphs -Wwrite-strings -msoft-float -mnew-mnemonics -Wa,-mppc -mpowerpc -pg -nostdinc -o ~/strcoll.op",RESOLVED          FIXED      
7120,Alan Modra,Run once loop should *always* be unrolled,"Run-once loop should *always* be unrolled, and isn't:/* gcc -S -dL -O2 */#define NR_CPUS 1extern void some_func(void);void func(void){	unsigned int cpu;	for (cpu = 0; cpu < NR_CPUS; cpu++)		some_func();}		foo.s:	.file	""foo.c""gcc2_compiled.:	.section	"".text""	.align 2	.globl func	.type	 func,@functionfunc:	stwu 1,-16(1)	mflr 0	stw 31,12(1)	stw 0,20(1)	li 31,0.L6:	bl some_func	addic. 31,31,1	bc 12,2,.L6	lwz 0,20(1)	mtlr 0	lwz 31,12(1)	la 1,16(1)	blr.Lfe1:	.size	 func,.Lfe1-func	.ident	""GCC: (GNU) 2.95.4 20011002 (Debian prerelease)""Release:gcc 3.0.4, gcc 2.95.4Environment:ppc-linux, i386-linuxHow-To-Repeat:Compile, browse source & .loop file.RTH says the (< 1) test becomes (== 0), and breaks the unroll.",RESOLVED          FIXED      
7380,Alan Modra,"ICE in extract_insn, at recog.c:2148","rs6000.md splitters generate patterns that don't match insnsRelease:3.1.1 20020720 (prerelease)Environment:configured with: /src/gcc-3.1/configure --prefix=/usr/local --build=i686-linux --host=i686-linux --target=powerpc-linux --disable-nls --enable-languages=c,c++How-To-Repeat:	-O2 -S on attached .i",RESOLVED          FIXED      
9681,Alan Modra,[powerpc64] -frepo fails to instantiate some templates,"Five tests in g++.old-deja/g++.pt (instantiate[46].C andrepo[124].C) fail because some templates are notinstantiated with -frepo.  This affects powerpc64-linux,both cross compilers and native 64-bit compilers, formainline, 3.3-branch, and 3.2-branch.Here's what happens with test repo1.C:  % g++ -c -frepo repo1.C  % g++ -frepo repo1.o  repo1.o: In function `.main':  repo1.o(.text+0x18): undefined reference to `.void g<int>(int)'  collect2: ld returned 1 exit statusThat test:template <class T> struct A {  virtual ~A () { }};template <class T> void g (T t) { }template class A<int>;int main (){  g (42);}Release:3.3 20030210 (prerelease)Environment:powerpc64-linux; SuSE SLES8",RESOLVED          FIXED      
10073,Alan Modra,[3.2/3.3 regression]: powerpc cannot split insn while building rscheme,"While building rscheme's stage0/runtime/longint.o, gcc 3.2 and3.3 ICE with an unable to split instruction error.  gcc version 2.95.4 20011002 (Debian prerelease) builds the same file with the same options without problem.gcc -g -O2 -O2 -DUSE_HW_REGS -DRS6000_REGS -ffixed-26 -ffixed-25 -ffixed-24 -ffixed-23 -ffixed-22 -ffixed-21 -ffixed-20 -ffixed-19 -ffixed-18 -ffixed-17 -ffixed-16 -ffixed-15 -ffixed-14 -ffixed-13 -DNDEBUG -DINLINES -DGC_MACROS -Wall -Wno-unused -I- -I. -I../install/include   -c -o longint.o longint.clongint.c: In function `int_64_neg':longint.c:259: could not split insn(insn:TI 109 13 88 (set (reg:SI 11 r11)        (const_int 4294901760 [0xffff0000])) 296 {*movsi_internal1} (insn_list:REG_DEP_ANTI 47 (insn_list:REG_DEP_ANTI 49 (insn_list:REG_DEP_OUTPUT 46 (nil))))    (nil))longint.c:259: Internal compiler error in final_scan_insn, at final.c:2622Release:3.2.3 20030309 (Debian prerelease), 3.3 20030301 (prerelease)",RESOLVED          FIXED      
78831,Alexander Monakov,[nvptx] -mgomp -Os init_softstack_frame ICE,"For nvptx' ""mgomp"" multilib, some change in (r242761,r243672] is causing a number of ""-Os"" test cases to run into an ICE, for example:    $ build-gcc/gcc/xgcc -Bbuild-gcc/gcc/ -c source-gcc/gcc/testsuite/gcc.c-torture/compile/20020604-1.c -Os -mgomp    source-gcc/gcc/testsuite/gcc.c-torture/compile/20020604-1.c: In function 'foo':    source-gcc/gcc/testsuite/gcc.c-torture/compile/20020604-1.c:91:1: internal compiler error: in init_softstack_frame, at config/nvptx/nvptx.c:1051     }     ^    0xe73417 init_softstack_frame            [...]/source-gcc/gcc/config/nvptx/nvptx.c:1051    0xe73417 nvptx_declare_function_name(_IO_FILE*, char const*, tree_node const*)            [...]/source-gcc/gcc/config/nvptx/nvptx.c:1238    0xe537e0 assemble_start_function(tree_node*, char const*)            [...]/source-gcc/gcc/varasm.c:1835    0x7fe8f7 rest_of_handle_final            [...]/source-gcc/gcc/final.c:4473    0x7fe8f7 execute            [...]/source-gcc/gcc/final.c:4548",RESOLVED          FIXED      
48442,Alexander Monakov,"ICE: in init_seqno, at sel-sched.c:6767 with -Os -fselective-scheduling2 --param max-sched-extend-regions-iters=100","Created attachment 23874 [details]auto-reduced testcase (from gcc.c-torture/compile/930523-1.c)Compiler output (4.6/4.7):$ gcc -Os -fselective-scheduling2 --param max-sched-extend-regions-iters=100 testcase.ctestcase.c: In function 'f':testcase.c:25:1: internal compiler error: in init_seqno, at sel-sched.c:6767Please submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.(gdb) bt#0  fancy_abort (file=0x116c168 ""/mnt/svn/gcc-trunk/gcc/sel-sched.c"", line=6767, function=0x116d393 ""init_seqno"")    at /mnt/svn/gcc-trunk/gcc/diagnostic.c:892#1  0x00000000008a28aa in init_seqno (number_of_insns=2, blocks_to_reschedule=0x0, from=0x7ffff5976b60)    at /mnt/svn/gcc-trunk/gcc/sel-sched.c:6767#2  0x00000000008a9f51 in sel_sched_region_1 (rgn=0) at /mnt/svn/gcc-trunk/gcc/sel-sched.c:7486#3  sel_sched_region (rgn=0) at /mnt/svn/gcc-trunk/gcc/sel-sched.c:7599#4  0x00000000008abb0a in run_selective_scheduling () at /mnt/svn/gcc-trunk/gcc/sel-sched.c:7675#5  0x0000000000879b16 in rest_of_handle_sched2 () at /mnt/svn/gcc-trunk/gcc/sched-rgn.c:3524#6  0x00000000007efd46 in execute_one_pass (pass=0x1649ba0) at /mnt/svn/gcc-trunk/gcc/passes.c:1555#7  0x00000000007f0035 in execute_pass_list (pass=0x1649ba0) at /mnt/svn/gcc-trunk/gcc/passes.c:1610#8  0x00000000007f0047 in execute_pass_list (pass=0x1649180) at /mnt/svn/gcc-trunk/gcc/passes.c:1611#9  0x00000000007f0047 in execute_pass_list (pass=0x16491e0) at /mnt/svn/gcc-trunk/gcc/passes.c:1611#10 0x0000000000934d15 in tree_rest_of_compilation (fndecl=0x7ffff5977f00) at /mnt/svn/gcc-trunk/gcc/tree-optimize.c:422#11 0x0000000000b01337 in cgraph_expand_function (node=0x7ffff5998000) at /mnt/svn/gcc-trunk/gcc/cgraphunit.c:1580#12 0x0000000000b03a8c in cgraph_expand_all_functions () at /mnt/svn/gcc-trunk/gcc/cgraphunit.c:1639#13 cgraph_optimize () at /mnt/svn/gcc-trunk/gcc/cgraphunit.c:1903#14 0x0000000000b0401a in cgraph_finalize_compilation_unit () at /mnt/svn/gcc-trunk/gcc/cgraphunit.c:1100#15 0x0000000000509094 in c_write_global_declarations () at /mnt/svn/gcc-trunk/gcc/c-decl.c:9879#16 0x00000000008dd94d in compile_file (argc=16, argv=0x7fffffffdc28) at /mnt/svn/gcc-trunk/gcc/toplev.c:591Compiler output (4.4/4.5):$ gcc -Os -fselective-scheduling2 --param max-sched-extend-regions-iters=100 testcase.ctestcase.c: In function 'f':testcase.c:25:1: error: wrong amount of branch edges after conditional jump 2testcase.c:25:1: internal compiler error: verify_flow_info failedPlease submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.(gdb) bt#0  error (gmsgid=0x1059ff8 ""wrong amount of branch edges after conditional jump %i"") at /mnt/svn/gcc-4_5/gcc/diagnostic.c:625#1  0x000000000058c33f in rtl_verify_flow_info_1 () at /mnt/svn/gcc-4_5/gcc/cfgrtl.c:1955#2  0x000000000058d353 in rtl_verify_flow_info () at /mnt/svn/gcc-4_5/gcc/cfgrtl.c:2058#3  0x000000000057d007 in verify_flow_info () at /mnt/svn/gcc-4_5/gcc/cfghooks.c:257#4  0x00000000007759ce in execute_function_todo (data=<value optimized out>) at /mnt/svn/gcc-4_5/gcc/passes.c:1262#5  0x000000000077575a in execute_todo (flags=132107) at /mnt/svn/gcc-4_5/gcc/passes.c:1287#6  0x0000000000777df2 in execute_one_pass (pass=0x15557a0) at /mnt/svn/gcc-4_5/gcc/passes.c:1591#7  0x0000000000778005 in execute_pass_list (pass=0x15557a0) at /mnt/svn/gcc-4_5/gcc/passes.c:1623#8  0x0000000000778017 in execute_pass_list (pass=0x1554ac0) at /mnt/svn/gcc-4_5/gcc/passes.c:1624#9  0x0000000000778017 in execute_pass_list (pass=0x1554a60) at /mnt/svn/gcc-4_5/gcc/passes.c:1624#10 0x00000000008b8775 in tree_rest_of_compilation (fndecl=0x7ffff575d800) at /mnt/svn/gcc-4_5/gcc/tree-optimize.c:413#11 0x0000000000a52dc1 in cgraph_expand_function (node=0x7ffff7ed14e0) at /mnt/svn/gcc-4_5/gcc/cgraphunit.c:1574#12 0x0000000000a55735 in cgraph_expand_all_functions () at /mnt/svn/gcc-4_5/gcc/cgraphunit.c:1653#13 cgraph_optimize () at /mnt/svn/gcc-4_5/gcc/cgraphunit.c:1909#14 0x0000000000a55e95 in cgraph_finalize_compilation_unit () at /mnt/svn/gcc-4_5/gcc/cgraphunit.c:1122#15 0x00000000004b12e3 in c_write_global_declarations () at /mnt/svn/gcc-4_5/gcc/c-decl.c:9520#16 0x0000000000867a65 in compile_file (argc=16, argv=0x7fffffffdbf8) at /mnt/svn/gcc-4_5/gcc/toplev.c:1065",RESOLVED          FIXED      
48302,Alexander Monakov,ICE: SIGSEGV in reposition_prologue_and_epilogue_notes (function.c:5662) with -fcrossjumping -fselective-scheduling2,"Created attachment 23781 [details]reduced testcaseCommand line:$ gcc -O -fcrossjumping -fgcse -fschedule-insns2 -fsel-sched-pipelining -fsel-sched-pipelining-outer-loops -fselective-scheduling2 --param lim-expensive=320 --param min-crossjump-insns=1 testcase.Cor$ gcc -O2 -fsel-sched-pipelining -fsel-sched-pipelining-outer-loops -fselective-scheduling2 -fno-tree-copy-prop -fno-tree-vrp --param min-crossjump-insns=1 testcase.CCompiler output:$ gcc -O2 -fsel-sched-pipelining -fsel-sched-pipelining-outer-loops -fselective-scheduling2 -fno-tree-copy-prop -fno-tree-vrp --param min-crossjump-insns=1 testcase.C==18470== Invalid read of size 2==18470==    at 0x8731AB: reposition_prologue_and_epilogue_notes (function.c:5662)==18470==    by 0x9BB9CC: sched_rgn_finish (sched-rgn.c:3074)==18470==    by 0x9F1359: run_selective_scheduling (sel-sched.c:7645)==18470==    by 0x9BF695: rest_of_handle_sched2 (sched-rgn.c:3523)==18470==    by 0x937AA5: execute_one_pass (passes.c:1555)==18470==    by 0x937D94: execute_pass_list (passes.c:1610)==18470==    by 0x937DA6: execute_pass_list (passes.c:1611)==18470==    by 0x937DA6: execute_pass_list (passes.c:1611)==18470==    by 0xA79D95: tree_rest_of_compilation (tree-optimize.c:422)==18470==    by 0xC44D11: cgraph_expand_function (cgraphunit.c:1576)==18470==    by 0xC473E9: cgraph_optimize (cgraphunit.c:1635)==18470==    by 0xC47969: cgraph_finalize_compilation_unit (cgraphunit.c:1096)==18470==  Address 0x0 is not stack'd, malloc'd or (recently) free'd==18470== testcase.C: In function 'void foo()':testcase.C:18:1: internal compiler error: Segmentation faultPlease submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.Tested revisions:r171573 - crash4.6 r170955 - crash4.5 r170955 - crash4.4 r170955 - crash (the -O1 version)",RESOLVED          FIXED      
50205,Alexander Monakov,"[4.6 Regression] ICE: in code_motion_path_driver, at sel-sched.c:6581 with -fselective-scheduling2 and custom flags","Created attachment 25115 [details]reduced testcaseCompiler output:$ gcc -O2 -fno-cprop-registers -fno-dce -fno-forward-propagate -fselective-scheduling2 -funroll-loops -fno-web testcase.c         testcase.c: In function 'foo':testcase.c:11:1: internal compiler error: in code_motion_path_driver, at sel-sched.c:6581Please submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.Tested revisions:r178096 - crash4.6 r177922 - crash4.5 r177922 - OK",RESOLVED          FIXED      
50340,Alexander Monakov,[4.7 Regression] Fails to build SPEC 2000 176.gcc,"/gcc/spec/sb-terbium-head-64/ia64/install-201109080504/bin/gcc -c -o reload1.o  -DSPEC_CPU2000_LP64            -O3 -funroll-loops -fpeel-loops  reload1.creload1.c:4192:1: internal compiler error: in verify_target_availability, at sel-sched.c:1615Please submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.revision 178624 is good, revision 178672 is bad.",RESOLVED          FIXED      
48273,Alexander Monakov,"[4.6 Regression] ICE: in create_copy_of_insn_rtx, at sel-sched-ir.c:5604 with -fsel-sched-pipelining -fselective-scheduling2 -march=core2","Created attachment 23769 [details]reduced testcaseCompiler output:$ gcc -O -fschedule-insns2 -fsel-sched-pipelining -fselective-scheduling2 -funroll-all-loops -march=core2 testcase.Ctestcase.C: In function 'void foo()':testcase.C:7:1: internal compiler error: in create_copy_of_insn_rtx, at sel-sched-ir.c:5604Please submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.Tested revisions:r171337 - crash4.6 r170955 - crash4.5 r170955 - crash",RESOLVED          FIXED      
49349,Alexander Monakov,gfortran.dg/char_result_3.f90 fails with -O3,"Compiling gfortran.dg/char_result_3.f90 on IA64 HP-UX with the -O3 optionresults in:$ obj_gcc/gcc/f951 -O3 -quiet char_result_3.f90char_result_3.f90: In function 'f4':char_result_3.f90:71:0: internal compiler error: in bundling, at config/ia64/ia64.c:8845The failure started with r173853.2011-05-18  Tom de Vries  <tom@codesourcery.com>        PR target/45098        * tree-ssa-loop-ivopts.c (seq_cost): Fix call to rtx_costThis only happens in 32 bit mode so I can't reproduce it on IA64 Linux.If I turn off selective scheduling (-fno-selective-scheduling or-fno-selective-scheduling2) it goes away.  I don't know if the bug is in thescheduling or in this fix to PR 45098.",RESOLVED          FIXED      
49303,Alexander Monakov,"ICE: vinsn_detach, at sel-sched-ir.c:1277 w/ -O3 on ia64 in r174558","Created attachment 24450 [details]preprocesses source to reproduceThis report is of an apparent regression seen in trunk revision 174558 on a SGI Altix (ia64/Linux).  The problem wasn't seen in any of my nearly daily builds for at least a month or two prior to this failing version.Component=other because I don't know enough to pick one.The problem is present at -O3, but not at -O2, -O1 or -O0.The testcase.c is as reduced as I could manage.  Any additional changes I tried made the ICE vanish (which makes some sense given that the error looks like it is related to instruction scheduling).This testcase is a reduction of 1 source file out of 5 in my code that elicit the same ICE message.  I can probably produce more test cases if needed.$ /usr/local/gcc-4-7-0-20110602/usr/local/bin/gcc -v -save-temps -c -O3 testcase.cUsing built-in specs.COLLECT_GCC=/usr/local/gcc-4-7-0-20110602/usr/local/bin/gccCOLLECT_LTO_WRAPPER=/usr/local/gcc-4-7-0-20110602/usr/local/bin/../libexec/gcc/ia64-unknown-linux-gnu/4.7.0/lto-wrapperTarget: ia64-unknown-linux-gnuConfigured with: /eng/upc/dev/gary/gcc-trunk/src/configure --enable-languages=c,c++ --disable-bootstrap --disable-multilib --enable-checking=yes CFLAGS='-g3 -O0'Thread model: posixgcc version 4.7.0 20110602 (experimental) (GCC) COLLECT_GCC_OPTIONS='-v' '-save-temps' '-c' '-O3' /usr/local/gcc-4-7-0-20110602/usr/local/bin/../libexec/gcc/ia64-unknown-linux-gnu/4.7.0/cc1 -E -quiet -v -iprefix /usr/local/gcc-4-7-0-20110602/usr/local/bin/../lib/gcc/ia64-unknown-linux-gnu/4.7.0/ testcase.c -O3 -fpch-preprocess -o testcase.iignoring nonexistent directory ""/usr/local/gcc-4-7-0-20110602/usr/local/bin/../lib/gcc/ia64-unknown-linux-gnu/4.7.0/../../../../ia64-unknown-linux-gnu/include""ignoring duplicate directory ""/usr/local/gcc-4-7-0-20110602/usr/local/bin/../lib/gcc/../../lib/gcc/ia64-unknown-linux-gnu/4.7.0/include""ignoring duplicate directory ""/usr/local/gcc-4-7-0-20110602/usr/local/bin/../lib/gcc/../../lib/gcc/ia64-unknown-linux-gnu/4.7.0/include-fixed""ignoring nonexistent directory ""/usr/local/gcc-4-7-0-20110602/usr/local/bin/../lib/gcc/../../lib/gcc/ia64-unknown-linux-gnu/4.7.0/../../../../ia64-unknown-linux-gnu/include""#include ""..."" search starts here:#include <...> search starts here: /usr/local/gcc-4-7-0-20110602/usr/local/bin/../lib/gcc/ia64-unknown-linux-gnu/4.7.0/include /usr/local/gcc-4-7-0-20110602/usr/local/bin/../lib/gcc/ia64-unknown-linux-gnu/4.7.0/include-fixed /usr/local/include /usr/includeEnd of search list.COLLECT_GCC_OPTIONS='-v' '-save-temps' '-c' '-O3' /usr/local/gcc-4-7-0-20110602/usr/local/bin/../libexec/gcc/ia64-unknown-linux-gnu/4.7.0/cc1 -fpreprocessed testcase.i -quiet -dumpbase testcase.c -auxbase testcase -O3 -version -o testcase.sGNU C (GCC) version 4.7.0 20110602 (experimental) (ia64-unknown-linux-gnu)        compiled by GNU C version 4.5.1 20101019 (dev) (GCC UPC 4.5.1.2), GMP version 4.2.3, MPFR version 2.3.2, MPC version 0.8.1GGC heuristics: --param ggc-min-expand=30 --param ggc-min-heapsize=4096GNU C (GCC) version 4.7.0 20110602 (experimental) (ia64-unknown-linux-gnu)        compiled by GNU C version 4.5.1 20101019 (dev) (GCC UPC 4.5.1.2), GMP version 4.2.3, MPFR version 2.3.2, MPC version 0.8.1GGC heuristics: --param ggc-min-expand=30 --param ggc-min-heapsize=4096Compiler executable checksum: 63a5aa68a4f2ded6e45a1d62a83171fatestcase.c: In function 'gasnetc_reghandlers':testcase.c:61:1: internal compiler error: in vinsn_detach, at sel-sched-ir.c:1277Please submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.",RESOLVED          FIXED      
48652,Alexander Monakov,[4.7 Regression] LTO profiledbootstrap failure,"On Linux/x86-64, revision 172612 failed LTO profiledbootstrap with../../src-trunk/gcc/sel-sched.c: In function 'sel_sched_region_2':../../src-trunk/gcc/sel-sched.c:3723:7: error: 'need_stall' may be used uninitialized in this function [-Werror=uninitialized]../../src-trunk/gcc/sel-sched.c:5520:11: note: 'need_stall' was declared hereRevision 172607 passed that point.",RESOLVED          FIXED      
47036,Alexander Monakov,"[4.6 Regression] ICE: in move_cond_jump, at sel-sched.c:4901 with -fschedule-insns -fselective-scheduling -fno-dce","This is very similiar to PR46649, it just needs further -fno-dce.Testcase is the same, g++.dg/parse/break-in-for.C, or http://gcc.gnu.org/bugzilla/attachment.cgi?id=22522Compiler output:$ gcc -fschedule-insns -fselective-scheduling -fno-dce break-in-for.C break-in-for.C: In function 'void foo()':break-in-for.C:11:1: internal compiler error: in move_cond_jump, at sel-sched.c:4901Please submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.Tested revisions:r168097 - crash4.5 r168062 - OK",RESOLVED          FIXED      
46649,Alexander Monakov,"[4.6 Regression] ICE: in move_bb_info, at sel-sched-ir.c:5080 with -fschedule-insns -fselective-scheduling","Created attachment 22522 [details]g++.dg/parse/break-in-for.CCompiler output:$ gcc -fschedule-insns -fselective-scheduling break-in-for.Cbreak-in-for.C: In function 'void foo()':break-in-for.C:11:1: internal compiler error: in move_bb_info, at sel-sched-ir.c:5080Please submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.Tested revisions:r167127 - crashr167054 - crashr165699 - OK4.5 r166509 - OK",RESOLVED          FIXED      
46875,Alexander Monakov,[4.6 Regression] ICE: verify_flow_info failed: too many outgoing branch edges from bb 3 with -Os -fselective-scheduling2,"Created attachment 22696 [details]reduced testcase (from gcc.c-torture/execute/20011219-1.c)Compiler output:$ gcc -Os -fselective-scheduling2 pr46875.c pr46875.c: In function 'foo':pr46875.c:24:1: error: too many outgoing branch edges from bb 3pr46875.c:24:1: internal compiler error: verify_flow_info failedPlease submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.Tested revisions:r167621 - crashr167556 - crashr165699 - OK",RESOLVED          FIXED      
45354,Alexander Monakov,[4.6 regression] ICE with -fselective-scheduling and -freorder-blocks-and-partition,"Command line:$ gcc -O -fschedule-insns -fselective-scheduling -freorder-blocks-and-partition -fprofile-generate gcc.dg/tree-prof/update-cunroll-2.c$ rm *.gcda$ ./a.out$ gcc -O -fschedule-insns -fselective-scheduling -freorder-blocks-and-partition -fprofile-use gcc.dg/tree-prof/update-cunroll-2.cgcc.dg/tree-prof/update-cunroll-2.c: In function 't':gcc.dg/tree-prof/update-cunroll-2.c:12:1: error: fallthru edge crosses section boundary (bb 6)gcc.dg/tree-prof/update-cunroll-2.c:12:1: internal compiler error: verify_flow_info failedPlease submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.I wasn't able to further reduce the testcase.Tested revisions:r163371 - crash",RESOLVED          FIXED      
46585,Alexander Monakov,[4.6 Regression] ICE: SIGSEGV in vinsn_create (sel-sched-ir.c:1189) with -fno-dce -fschedule-insns -fselective-scheduling,"Created attachment 22473 [details]reduced testcaseCompiler output:$ gcc -fno-dce -fschedule-insns -fselective-scheduling testcase.c==3603== Invalid read of size 1==3603==    at 0x8539FE: vinsn_create (sel-sched-ir.c:1189)==3603==    by 0x854303: init_global_and_expr_for_insn (sel-sched-ir.c:2907)==3603==    by 0xFBE824: init_insns_in_bb.isra.10 (haifa-sched.c:5329)==3603==    by 0xFCC0B7: sched_scan (haifa-sched.c:5376)==3603==    by 0x8570A8: sel_init_global_and_expr (sel-sched-ir.c:2929)==3603==    by 0x87A1B6: sel_sched_region (sel-sched.c:6864)==3603==    by 0x87BF71: run_selective_scheduling (sel-sched.c:7651)==3603==    by 0x84A85C: rest_of_handle_sched (sched-rgn.c:3508)==3603==    by 0x7C094E: execute_one_pass (passes.c:1564)==3603==    by 0x7C0C14: execute_pass_list (passes.c:1619)==3603==    by 0x7C0C26: execute_pass_list (passes.c:1620)==3603==    by 0x905065: tree_rest_of_compilation (tree-optimize.c:422)==3603==  Address 0x2 is not stack'd, malloc'd or (recently) free'd==3603== testcase.c: In function 'foo':testcase.c:9:1: internal compiler error: Segmentation faultPlease submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.Tested revisions:r166976 - crashr161659 - crashr159696 - OK4.5 r166509 - OK",RESOLVED          FIXED      
46602,Alexander Monakov,[4.6 Regression] gcc.dg/pr42245-2.c ICE on ia64,"Introduced with r166697, my fix for PR 46204.  I'm testing the following patch.Index: gcc/sel-sched-ir.c===================================================================--- gcc/sel-sched-ir.c	(revision 167024)+++ gcc/sel-sched-ir.c	(working copy)@@ -3650,10 +3650,6 @@       remove_empty_bb (bb, true);     } -#ifdef ENABLE_CHECKING-  verify_backedges ();-#endif-   return true; } @@ -3735,6 +3731,11 @@       if (recompute_toporder_p) 	sel_recompute_toporder ();     }++#ifdef ENABLE_CHECKING+  verify_backedges ();+#endif+   return changed; }",RESOLVED          FIXED      
45652,Alexander Monakov,[4.6 Regression] gcc.dg/compat/scalar-by-value-3 FAILs with -O2 -fselective-scheduling2,I don't know how much is this related to PR43494. This one is failing with -fselective-scheduling2 and with different target. Also it started failing just few revisions ago.Compiler output:$ cd gcc/testsuite/gcc.dg/compat$ gcc -O2 -fselective-scheduling2 scalar-by-value-3_main.c scalar-by-value-3_x.c scalar-by-value-3_y.c$ ./a.out Aborted(fails with -O[23s])Tested revisions:r164228 - failr163636 - failr161659 - OKReduced testcase to follow.,RESOLVED          FIXED      
46518,Alexander Monakov,"internal compiler error: in vinsn_detach, at sel-sched-ir.c:1271","When using the --enable-build-with-cxx bootstrap on x86_64-apple-darwin10 with thepatches...http://gcc.gnu.org/ml/gcc-patches/2010-11/msg01323.htmlhttp://gcc.gnu.org/ml/gcc-patches/2010-11/msg01803.htmla new ICE appears at -m32 for the gfortran.dg/pr42294.f  -O testcase. This failure doesn't occur with a normal bootstrap and with the --enable-build-with-cxx bootstrap is of the form...Executing on host: /sw/src/fink.build/gcc46-4.6.0-1000/darwin_objdir/gcc/testsuite/gfortran/../../gfortran -B/sw/src/fink.build/gcc46-4.6.0-1000/darwin_objdir/gcc/testsuite/gfortran/../../ -L/sw/src/fink.build/gcc46-4.6.0-1000/darwin_objdir/x86_64-apple-darwin10.5.0/i386/libgfortran /sw/src/fink.build/gcc46-4.6.0-1000/gcc-4.6-20101116/gcc/testsuite/gfortran.dg/pr42294.f   -O  -O2 -fselective-scheduling2 -fsel-sched-pipelining -funroll-all-loops -S  -m32 -o pr42294.s    (timeout = 300)/sw/src/fink.build/gcc46-4.6.0-1000/gcc-4.6-20101116/gcc/testsuite/gfortran.dg/pr42294.f: In function 'orien':/sw/src/fink.build/gcc46-4.6.0-1000/gcc-4.6-20101116/gcc/testsuite/gfortran.dg/pr42294.f:39:0: internal compiler error: in vinsn_detach, at sel-sched-ir.c:1271",RESOLVED          FIXED      
46204,Alexander Monakov,g++.dg/torture/stackalign/throw-1.C fails to compile on IA64,"I am not sure exactly where this is going wrong but when g++.dg/torture/stackalign/throw-1.C is compiled with -O3 -funroll-loops on IA64 I get an undefined label.Here is a cutdown test case based on that test:int global, global2;int main(){        int i,j,k,l,m,n;   for (i=0; i < global; i++)   for (k=0; k < j; k++)   for (l=0; l < k; l++)   for (m=0; m < l; m++)       global2 = k; throw 0;}When I compile it I get:g++ -O3 -funroll-loops x.C/tmp/ccVWUtRi.o: In function `main':x.C:(.text+0xc2): undefined reference to `.L34'collect2: ld returned 1 exit status",RESOLVED          FIXED      
46761,Alexander Monakov,[4.6 Regression] -fgraphite-identity produces wrong code for array initialization arr[i] = i,Created attachment 22599 [details]reduced testcaseThis might be the common cause of several testsuite failures that appear with -fgraphite-identity in testflags.Output:$ gcc -O -fgraphite-identity pr46761.c$ valgrind -q ./a.out ==20462== Conditional jump or move depends on uninitialised value(s)==20462==    at 0x40053F: main (pr46761.c:12)==20462== AbortedTested revisions:r167356 - failr165699 - failr161659 - OK4.5 r166509 - OK,RESOLVED          FIXED      
42246,Alexander Monakov,ICE in init_seqno for 186.crafty with sel-sched,"GCC trunk gets an internal compiler error when building SPEC CPU2000 test 186.crafty with ""-O2 -fselective-scheduling -fsel-sched-pipelining -fsel-sched-pipelining-outer-loops"" on powerpc-linux, as demonstrated by this minimized testcase:-----------------------------------------------------------------typedef enum{  empty = 0, pawn = 1, knight = 2, king = 3, bishop = 5, rook = 6, queen = 7}PIECE;extern int p_values[15];extern int *last[65];intQuiesce (int alpha, int beta, int wtm, int ply){  register int initial_alpha, value, delta;  register int *goodmv, *movep, moves = 0, *sortv, temp;  for (movep = last[ply - 1]; movep < last[ply]; movep++)    if (p_values[(((*movep) >> 15) & 7) + 7] +        p_values[(((*movep) >> 18) & 7) + 7] >= delta)      {        register int done;        register int *end = last[ply - 1] + moves - 1;        do          {            done = 1;            movep = last[ply - 1];            for (; movep < end; movep++, sortv++)              if (*sortv < *(sortv + 1))                {                  *(movep + 1) = temp;                  done = 0;                }          }        while (!done);      }}-----------------------------------------------------------------elm3b149% /home/janis/tools/gcc-trunk-anonsvn/bin/gcc -O2 -fselective-scheduling -fsel-sched-pipelining -fsel-sched-pipelining-outer-loops -c bug.cbug.c: In function ‘Quiesce’:bug.c:32:1: internal compiler error: in init_seqno, at sel-sched.c:6722Please submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.The failure started with this large patch:    http://gcc.gnu.org/viewcvs?view=rev&rev=145494    r145494 | rguenth | 2009-04-03 10:24:28 +0000 (Fri, 03 Apr 2009)",RESOLVED          FIXED      
42245,Alexander Monakov,ICE in verify_backedges for 197.parser with sel-sched,"GCC trunk gets an internal compiler error when building SPEC CPU2000 test 197.parser with ""-O2 -fselective-scheduling -fsel-sched-pipelining"" on powerpc-linux, as demonstrated by this minimized testcase:-----------------------------------------------------------------------extern int N_words;typedef struct DIS_node_struct DIS_node;typedef struct CON_list_struct CON_list;struct DIS_node_struct{  CON_list *cl;};voidbuild_DIS_CON_tree (void){  int w;  DIS_node *dnroot, *dn;  CON_list *child, *xchild;  for (w = 0; w < N_words; w++)    {      if (dnroot == ((void *) 0))        {          dnroot = dn;          for (child = dn->cl; child != ((void *) 0); child = xchild)            {            }        }    }}-----------------------------------------------------------------------elm3b149% /home/janis/tools/gcc-trunk-anonsvn/bin/gcc -O2 -fselective-scheduling -fsel-sched-pipelining -c bug.cbug.c: In function ‘build_DIS_CON_tree’:bug.c:26:1: internal compiler error: in verify_backedges, at sel-sched-ir.c:3498Please submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.The failure starts with this very large patch (Expand from SSA):    http://gcc.gnu.org/viewcvs?view=rev&rev=146817    r146817 | matz | 2009-04-26 19:35:04 +0000 (Sun, 26 Apr 2009)",RESOLVED          FIXED      
42249,Alexander Monakov,unrecognizable insn for 254.gap with sel-sched,"GCC trunk and 4.4 branch get internal compiler errors when building SPEC CPU2000 test 254.gap with ""-O2 -fselective-scheduling -fsel-sched-pipelining"" on powerpc-linux, as demonstrated by this minimized testcase:-----------------------------------------------------------------------typedef struct TypHeader{  unsigned long size;  struct TypHeader **ptr;} *TypHandle;extern TypHandle NewBag (unsigned int type, unsigned long size);typedef unsigned long TypPoint32;TypHandleQuoPP (TypHandle hdL, TypHandle hdR){  TypHandle hdC;  unsigned long degC;  TypPoint32 *ptC;  unsigned long degL;  TypPoint32 *ptL;  unsigned long degR;  TypPoint32 *ptR;  unsigned long p;  degL = ((hdL)->size) / sizeof (TypPoint32);  degR = ((hdR)->size) / sizeof (TypPoint32);  degC = degL < degR ? degR : degL;  hdC = NewBag (9, (unsigned long) (degC * sizeof (TypPoint32)));  ptC = (TypPoint32 *) ((TypHandle *) ((hdC)->ptr));  for (p = 0; p < degC; p++)    ptC[(((p) < (degR)) ? (ptR)[(p)] : (p))] =      ((((((p) < (degL)) ? (ptL)[(p)] : (p))) <        (degR)) ? (ptR)[((((p) < (degL)) ? (ptL)[(p)] : (p)))]       : ((((p) < (degL)) ? (ptL)[(p)] : (p))));}-----------------------------------------------------------------------Trunk:elm3b149% /home/janis/tools/gcc-trunk-anonsvn/bin/gcc -O2 -fselective-scheduling -fsel-sched-pipelining -c bug.cbug.c: In function ‘QuoPP’:bug.c:33:1: error: unrecognizable insn:(insn 176 57 98 11 bug.c:31 (set (reg:CCUNS 199)        (reg:CCUNS 200)) -1 (nil))bug.c:33:1: internal compiler error: in extract_insn, at recog.c:2097Please submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.4.4 branch:elm3b149% /home/janis/tools/gcc-4.4-anonsvn/bin/gcc -O2 -fselective-scheduling -fsel-sched-pipelining -c bug.cbug.c: In function ‘QuoPP’:bug.c:33: error: unrecognizable insn:(insn 167 91 89 13 bug.c:31 (set (reg:CCUNS 179)        (reg:CCUNS 180)) -1 (nil))bug.c:33: internal compiler error: in get_attr_type, at config/rs6000/rs6000.md:13160Please submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.",RESOLVED          FIXED      
42294,Alexander Monakov,[4.5 Regression] ICE in code_motion_path_driver for 416.gamess,"GCC trunk gets an internal compiler error when building SPEC CPU2000 test 416.gamess with ""-O2 -fselective-scheduling2 -fsel-sched-pipelining -funroll-all-loops"" on powerpc64-linux, as demonstrated by a minimized testcase that I'll attach to this PR.elm3b187% /opt/gcc-nightly/trunk/bin/gfortran -c -O2 -fselective-scheduling2 -fsel-sched-pipelining -funroll-all-loops bug.fbug.f: In function ‘orien’:bug.f:35:0: internal compiler error: in code_motion_path_driver, at sel-sched.c:6532Please submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.The failure starts with this very large patch (Expand from SSA):    http://gcc.gnu.org/viewcvs?view=rev&rev=146817    r146817 | matz | 2009-04-26 19:35:04 +0000 (Sun, 26 Apr 2009)",RESOLVED          FIXED      
38857,Alexander Monakov,[4.4 Regression] ICE in selective scheduler,"With this test case the selective scheduler is hitting a gcc_assert in sel-sched-ir.c  I see this on IA64 Linux or on IA64 HP-UX when in 64 bit mode. In both cases it happens when compiling with -O3.x.c: In function 'dv_guess_qnos':x.c:22: internal compiler error: in sel_move_insn, at sel-sched-ir.c:1395Please submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.Test case:static const int vs_total_ac_bits = 2680;typedef struct EncBlockInfo {      short mb[64];      unsigned char next[64];} EncBlockInfo;inline void dv_guess_qnos(EncBlockInfo* blks, int* qnos) {      int size[5];      int j, k, a, prev;      EncBlockInfo* b;      for(a=2; a==2 || vs_total_ac_bits < size[0]; a+=a){         for (j=0; j<6*5; j++, b++) {             for (k= b->next[prev]; k<64; k= b->next[k]) {                 if(b->mb[k] < a && b->mb[k] > -a){                     b->next[prev] = b->next[k];                 }                 else{                     prev = k;                 }             }         }     }}",RESOLVED          FIXED      
37381,Alexander Monakov,"[4.4 Regression] ICE in ia64_speculate_insn, at config/ia64/ia64.c:6902","I get the following ICE with trunk from 20080903 (revision 127646).  This doesn't happen with 4.4.0 20080802(sid)tbm@coconut0:~$ /usr/lib/gcc-snapshot/bin/gcc -O2 -c wmtv-wmtv.cwmtv-wmtv.c: In function 'DoFullScreen':wmtv-wmtv.c:97: internal compiler error: in ia64_speculate_insn, at config/ia64/ia64.c:6902Please submit a full bug report,with preprocessed source if appropriate.See <file:///usr/share/doc/gcc-snapshot/README.Bugs> for instructions.(sid)tbm@coconut0:~$ /usr/lib/gcc-snapshot/bin/gcc -O -c wmtv-wmtv.c(sid)tbm@coconut0:~$",RESOLVED          FIXED      
37499,Alexander Monakov,[4.4 Regression] Scheduling pass 2 time increases by order of magnitude,"I'm testing gcc on the file all.i.gz in PR26854, configured asConfigured with: ../../mainline/configure --enable-checking=release --with-gmp=/pkgs/gmp-4.2.2/ --with-mpfr=/pkgs/gmp-4.2.2/ --prefix=/pkgs/gcc-mainline --enable-languages=c --enable-gather-detailed-mem-statsand compiled with/pkgs/gcc-mainline/bin/gcc -Wall -W -Wno-unused -O1 -fno-math-errno -fschedule-insns2 -fno-trapping-math -fno-strict-aliasing -fwrapv -fomit-frame-pointer -fPIC -ftime-report -fmem-report -c all.i >>& mainline-stats-2008-09-11-bOn July 29, the time for the second scheduling pass was scheduling 2          :   2.62 ( 1%) usr   0.04 ( 0%) sys   2.67 ( 1%) wall       0 kB ( 0%) ggc TOTAL                 : 175.90            15.47           191.42             802297 kBwith revision 140295, the time for the second scheduling pass was scheduling 2          :  32.40 (16%) usr   0.00 ( 0%) sys  32.43 (14%) wall       0 kB ( 0%) ggc TOTAL                 : 204.16            15.17           225.52             794201 kBI'll attach the two detailed memory and cpu time reports.While the July 29th report did not use IRA, I tested the IRA branch on May 19 and got similar results to the mainline in July: scheduling 2          :   2.63 ( 1%) usr   0.00 ( 0%) sys   2.63 ( 1%) wall       0 kB ( 0%) ggc",RESOLVED          FIXED      
39351,Jorn Wolfgang Rennecke,compute_init_costs uses unemitted insns,rtl-factoring.c:compute_init_costs calls compute_rtx_cost with instructionsthat have dangling PREV_INSN and NEXT_INSN pointers.  That can lead tocrashes when rtx costs depend on context.,RESOLVED          FIXED      
39254,Jorn Wolfgang Rennecke,[4.4 Regression] gcc.c-torture/execute/va-arg-trap-1.c ICEs on powerpc-apple-darwin9,"The new testcase gcc.c-torture/execute/va-arg-trap-1.c ICEs on powerpc-apple-darwin9 when compiled with -O2 or -Os. The failure is...Executing on host: /sw/src/fink.build/gcc44-4.3.999-20090219/darwin_objdir/gcc/xgcc -B/sw/src/fink.build/gcc44-4.3.999-20090219/darwin_objdir/gcc/ /sw/src/fink.build/gcc44-4.3.999-20090219/gcc-4.4-20090219/gcc/testsuite/gcc.c-torture/execute/va-arg-trap-1.c  -w  -O2   -lm   -o /sw/src/fink.build/gcc44-4.3.999-20090219/darwin_objdir/gcc/testsuite/gcc/va-arg-trap-1.x2    (timeout = 300)/sw/src/fink.build/gcc44-4.3.999-20090219/gcc-4.4-20090219/gcc/testsuite/gcc.c-torture/execute/va-arg-trap-1.c: In function 'bar':/sw/src/fink.build/gcc44-4.3.999-20090219/gcc-4.4-20090219/gcc/testsuite/gcc.c-torture/execute/va-arg-trap-1.c:29: internal compiler error: in move_insn, at haifa-sched.c:1934Please submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.compiler exited with status 1output is:/sw/src/fink.build/gcc44-4.3.999-20090219/gcc-4.4-20090219/gcc/testsuite/gcc.c-torture/execute/va-arg-trap-1.c: In function 'bar':/sw/src/fink.build/gcc44-4.3.999-20090219/gcc-4.4-20090219/gcc/testsuite/gcc.c-torture/execute/va-arg-trap-1.c:29: internal compiler error: in move_insn, at haifa-sched.c:1934Please submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.FAIL: gcc.c-torture/execute/va-arg-trap-1.c compilation,  -O2  (internal compiler error)This failure is also occurring on powerpc-ibm-aix5.3.0.0...http://gcc.gnu.org/ml/gcc-testresults/2009-02/msg01950.html",RESOLVED          FIXED      
27060,Jorn Wolfgang Rennecke,divide libcall size has increased,The new sped-optimized division library functions are larger than the functionsthat were originally used; unsigned and signed division are implemented in a modulte which has an object text size of 1060 bytes.This could cause problems with specialized embedded applications that aresupposed to run in a very small memory area.,RESOLVED          FIXED      
25335,Jorn Wolfgang Rennecke,[4.1/4.2 Regression] reload leaves insns from earlier passes around: fatal for postinc,"See assembly output for gcc.target/cris/rld-legit2.c (here for cris-axis-elf):_g:        subq 4,$sp        move $srp,[$sp]        subq 40,$sp        movem $r8,[$sp]        move $r10,$srp        move.d $r11,[$sp+36]        move $srp,$r9        addq 2,$r9        move $r9,$srp        subq 2,$r9        move.w [$r9+],$r11        move.w [$r9+],$r12        movs.w $r12,$r12        move.d [$sp+36],$r13        clear.b [$r12+$r13.b]        move $srp,$r10        movem [$sp+],$r8        addq 4,$sp        jump [$sp+]Note the two post-increments; the second one is used and gets the wrong value.(A failing executable test-case can trivially be constructed and will be.)Reload seems to need two rounds, but the emitted reload insns for each passis left around. This is exposed but not actually caused by the fix forPR middle-end/24912.",RESOLVED          FIXED      
28014,Jorn Wolfgang Rennecke,space-optimized divide used inconsistently,"sh-elf has space optimized division functions for -m4 / -m4-single, which are provided in a separate library, which is used when statically linking with -Os .However, libgcc itself constains some references to the divide functions.  Ifthese functions have not been used by something else earlier, the referencesare satisifed from within libgcc.This is a missed space optimization, but worse, libgcc.a has a module which defines both signed and unsigned divide, while libgcc-Os-4-200.a providesthem in two separate modules.If one of the symbols is pulled in early from libgcc-Os-4-200.a, and the othersatisfied later from within libgcc.a, the first symbol ends up being defined twice.I propose to fix this by putting a copy of the unwinder code into libgcc-Os-4-200.a, which will make the only reference to signed dividefrom libgcc.a irrelevant, and by providing an sh udiv_qrnnd definition in longlong.h and optimizing 1U/0 away in sh.md, which will get rid of the references to unsigned divide in libgcc.a",RESOLVED          FIXED      
26141,Jorn Wolfgang Rennecke,[4.1 Regression] va_arg causes cc1plus ICE in gimplify_addr_expr,"4.1 cc1plus compiler on sh4-linux fails with the ICEfoo.cc:11: internal compiler error: in gimplify_addr_expr, at gimplify.c:3572forstruct S{  double a;};voidfoo (int z, ...){  struct S arg;  __builtin_va_list ap;  arg = __builtin_va_arg (ap, struct S);}and 4.2 cc1plus fails with the similar message.  sh-elf cc1plusalso fails with -m4.Binary search shows that it starts to fail just after the patchr110565 | jason | 2006-02-04 06:57:08 +0900 (Sat, 04 Feb 2006) | 7 lines        PR c++/25979        * gimplify.c (gimplify_modify_expr_rhs): Disable *& optimization for now.        PR middle-end/25977        * gimplify.c (gimplify_modify_expr_rhs): It's not always safe to do RVO        on the return slot if it's an NRV.and the ICE goes away if the first hunk of the patch is reverted.It seems that the tree made by sh_gimplify_va_arg_expr depends onthat *& optimization which is now disabled.",RESOLVED          FIXED      
14798,Jorn Wolfgang Rennecke,[3.4/4.0/4.1/4.2 Regression] In case of SH target with -O2 option #pragma interrupt doesn't get resetted.,"Hi,I am using GCC 3.4 snapshot dated 17-03-2004.Please find following testcase which to produce the bug. test.c*************************************************************#pragma interruptvoid isr(){}void delay(int a){}int main(){  return 0;}*************************************************************Above test code is compiled with following options to gcc,-m2e -S -O2Since #pragma interrupt is written above ""isr"", so only ""isr"" should be treated as interrupt handler. But the functions mentioned below ""isr"" are also treated as interrupt handlers i.e. it saves all registers and generates ""rte"" instead of ""rts"". Compiler should treat only ""isr"" as interuupt handler.Regards,Anil Paranjpe",RESOLVED          FIXED      
13260,Jorn Wolfgang Rennecke,[3.4 Regression] Incorrect optimisation of loop termination condition,"This problem was first seen when building the Linux kernel, in the functionroot_nfs_parse_addr(). I've extracted this into a small stand aloneprogram which demonstrates the problem.When built with an older gcc the results are as expected, however this failson more recent versions of gcc. Turning the optimisation down to -O1 alsoallows the program to work correctly. Also uncommenting the printf in themiddle of the code makes it work correctly.Of the gcc versions I've tried, versions 3.0.3 and the 3.2.1(prerelease) which SuperH ship work OK. However version 3.3.1, 3.3.2and the latest 3.4 snapshot (20031126) all generate incorrect code.The problem centers around a new optimisation which gcc has spotted, butdoesn't appear to get quite right.In gcc 3.2.1 the code generated looks like:	cmp/gt	r3,r7	movt	r2	tst	r2,r2	movt	r1	cmp/pl	r2	add	r1,r8	bf/s	.L16	mov	r8,r3In 3.3.2 it has spotted that after the 'tst' the T flag alreadyindicates whether to take the branch or not, and so the extra registerand comparison are redundant. However, to do this the branch has to bereversed into a bt/s, and this is not being done:	cmp/gt	r3,r7	movt	r1	tst	r1,r1	movt	r1	add	r1,r8	bf/s	.L16	mov	r8,r3The code generated by 3.4 (20031126) is identical.--------------Compilation diagnostics:% /var/tmp/gcc-3.4-20031126/objdir/gcc/xgcc-B/var/tmp/gcc-3.4-20031126/objdir/gcc/ -O2 -S ipconfig.c -nostdinc -I/opt/STM/ST40R2.1.3/sh-superh-elf/include/ -v -save-tempsReading specs from /var/tmp/gcc-3.4-20031126/objdir/gcc/specsConfigured with: ../configure --host=i686-pc-linux-gnu --target=sh4-linux --prefix=/opt/STM/ST40Linux-1.0/devkit/sh4 --exec-prefix=/opt/STM/ST40Linux-1.0/devkit/sh4 --bindir=/opt/STM/ST40Linux-1.0/devkit/sh4/bin --sbindir=/opt/STM/ST40Linux-1.0/devkit/sh4/sbin --sysconfdir=/opt/STM/ST40Linux-1.0/devkit/sh4/etc --datadir=/opt/STM/ST40Linux-1.0/devkit/sh4/share --includedir=/opt/STM/ST40Linux-1.0/devkit/sh4/include --libdir=/opt/STM/ST40Linux-1.0/devkit/sh4/lib --libexecdir=/opt/STM/ST40Linux-1.0/devkit/sh4/libexec --localstatedir=/opt/STM/ST40Linux-1.0/devkit/sh4/var --sharedstatedir=/opt/STM/ST40Linux-1.0/devkit/sh4/share --mandir=/opt/STM/ST40Linux-1.0/devkit/sh4/man --infodir=/opt/STM/ST40Linux-1.0/devkit/sh4/info --program-transform-name=s,^,sh4-linux-, --enable-shared --enable-languages=c,c++ --enable-threads=posix --enable-c99 --enable-long-long --with-system-zlib --disable-multilib --enable-symvers=gnu --enable-__cxa_atexit --with-gxx-include-dir=${prefix}/target//usr/include/g++-Thread model: posixgcc version 3.4 20031126 (experimental) /var/tmp/gcc-3.4-20031126/objdir/gcc/cc1 -E -quiet -nostdinc -v -I /opt/STM/ST40R2.1.3/sh-superh-elf/include/ -iprefix /var/tmp/gcc-3.4-20031126/objdir/gcc/../lib/gcc/sh4-linux/3.4/ -isystem /var/tmp/gcc-3.4-20031126/objdir/gcc/include ipconfig.c -O2 -o ipconfig.i#include ""..."" search starts here:#include <...> search starts here: /opt/STM/ST40R2.1.3/sh-superh-elf/include/ /var/tmp/gcc-3.4-20031126/objdir/gcc/includeEnd of search list. /var/tmp/gcc-3.4-20031126/objdir/gcc/cc1 -fpreprocessed ipconfig.i -quiet -dumpbase ipconfig.c -auxbase ipconfig -O2 -version -o ipconfig.sGNU C version 3.4 20031126 (experimental) (sh4-linux)        compiled by GNU C version 3.2.2 20030222 (Red Hat Linux 3.2.2-5).GGC heuristics: --param ggc-min-expand=30 --param ggc-min-heapsize=4096",RESOLVED          FIXED      
11864,Jorn Wolfgang Rennecke,[3.3 regression] miscompiles zero extention and test,gcc-3.3/3.4 -O1/2 for sh target may miscompile the combination of zero extentionand test if it's zero.,RESOLVED          FIXED      
10392,Jorn Wolfgang Rennecke,[3.3 regression] [SH] optimizer generates faulty array indexing,"This is a regression from previous 3.3 snapshots.I'm not sure how to best describe this problem, since I can't figureout what it is that the optimizer has done.  But the code it outputsis dead wrong.  Basically, the address calculation of an index operationon an array on the stack can _under some conditions_ get messed upcompletely.  Just look at the reproduction recipe in the next section.It could be related to PR 8867, however the test program from that PR_does_ generate correct code with the same snapshot, and the generatedcode here is even more weird than what happened then.Release:3.3 20030407 (prerelease)Environment:System: SunOS continuity 5.8 Generic_108528-19 sun4m sparc SUNW,SPARCstation-10Architecture: sun4	host: sparc-sun-solaris2.8build: sparc-sun-solaris2.8target: sh-unknown-elfconfigured with: /home/marcus/gcc-20030407/configure --target=sh-elf --with-newlib --enable-languages=c,c++How-To-Repeat:Example program:---8<--- file.c ---8<---extern char *use(char *);void func(char *a, char *b){  char buf[128];  unsigned char i;   char *item[] = {    ""one"",    ""two"",  };    for(i=0; i<2; i++) {    char *x;    use(item[i]);    x = use(buf);    use(a);    use(b);    use(x);  }}---8<---Compile with  sh-elf-gcc -O2 -m4 -S file.c(note that the -m4 is needed to trig the bug), and what you get is---8<--- file.s ---8<---	.file	""file.c""	.text	.section	.rodata.str1.4,""aMS"",@progbits,1	.align 2.LC0:	.string	""one""	.align 2.LC1:	.string	""two""	.text	.align 1	.align 5	.global	_func	.type	_func, @function_func:	mov.l	r8,@-r15	mov.l	r9,@-r15	mov.l	r10,@-r15	mov	#0,r10	mov.l	r11,@-r15	mov	r5,r11	mov.l	r12,@-r15	mov	r4,r12	mov.l	r13,@-r15	mov	#1,r13	mov.l	r14,@-r15	sts.l	pr,@-r15	add	#-68,r15	mov.l	.L9,r2	add	#-68,r15	mov.w	.L10,r0	mov	r15,r14	mov.l	.L11,r9	mov	r14,r1	add	#124,r1	mov.l	r2,@(4,r1)	mov.l	.L12,r1	mov.l	r1,@(r0,r14).L6:	mov.w	.L13,r1	mov	r14,r0	add	r1,r1	jsr	@r9	mov.l	@(r0,r1),r4	jsr	@r9	mov	r14,r4	mov	r12,r4	jsr	@r9	mov	r0,r8	jsr	@r9	mov	r11,r4	jsr	@r9	mov	r8,r4	mov	r10,r1	add	#1,r1	extu.b	r1,r10	cmp/hi	r13,r10	bf	.L6	add	#68,r14	add	#68,r14	mov	r14,r15	lds.l	@r15+,pr	mov.l	@r15+,r14	mov.l	@r15+,r13	mov.l	@r15+,r12	mov.l	@r15+,r11	mov.l	@r15+,r10	mov.l	@r15+,r9	rts		mov.l	@r15+,r8	.align 1.L10:	.short	132.L13:	.short	128.L14:	.align 2.L9:	.long	.LC0.L11:	.long	_use.L12:	.long	.LC1	.size	_func, .-_func	.ident	""GCC: (GNU) 3.3 20030407 (prerelease)""---8<---The faulty code is the code generated for    use(item[i]);which corresponds to the 5 lines immediately following .L6.r1 is loaded with 128, which is the offset of the ""item"" array from theframe pointer, and r0 is loaded with the frame pointer.  So far sogood.  But then, rather than adding i*4 (the loop variable i is in r10)to either r0 or r1, r1 is added to itself.  As a result the mov.l willfetch some arbitrary value from the callers stack frame (since 2*128 =256 > 136).  Note that r10 is not used at all!",RESOLVED          FIXED      
13302,Jorn Wolfgang Rennecke,[3.3/3.4 Regression] Putting a va_list in a struct causes seg fault,"This problem was found when building mozilla. Creating a struct whichcontains a va_list element (which is actually a __builtin_va_list) causesthe C++ compiler to seg fault.The problems is not seen when using the C compiler or compiling for sh3(only sh4). It is preset in gcc 3.0.3, 3.2.1, 3.3.2 and 3.4 snapshot 20030222.I suspect it was not present in gcc 2.95, but cannot confirm this.To reproduce:% /var/tmp/gcc-3.4-20031126/objdir/gcc/xgcc-B/var/tmp/gcc-3.4-20031126/objdir/gcc/ -O0 nsTextFormatter.ii -m4 -cnsTextFormatter.ii:4: internal compiler error: Segmentation faultPlease submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.% cat nsTextFormatter.iitypedef __builtin_va_list __gnuc_va_list;typedef __gnuc_va_list va_list;struct NumArgState{    va_list ap;};",RESOLVED          FIXED      
9594,Jorn Wolfgang Rennecke,[3.3/3.4 regression] [sh4-elf] Assembler complains pcrel too far.,"The assembler(binutils 2.13) complains about the code generated by GCC.The TC is attached alongwith.Release:gcc version 3.3 20030127 (prerelease)Environment:System: Linux 2.4.18-3i686 unknownArchitecture: i686         <machine, os, target, libraries (multiple lines)>host: i686-pc-linux-gnubuild: i686-pc-linux-gnutarget: sh-unknown-elfconfigured with: ../GCC_RELEASE/configure --target=sh-elf --prefix=/home/naveens/release_tools/ --enable-languages=c --with-newlibHow-To-Repeat:Compile the attached file as follows:$ sh-elf-gcc -c -ml -m4 -O2 BUG_PC_REL.c The assembler complains:/tmp/cco6KAW2.s:108: Error: pcrel too far/tmp/cco6KAW2.s:116: Error: pcrel too farThe program compiles with earlier snapshots(03052003 experimental), without any problems.",RESOLVED          FIXED      
9365,Jorn Wolfgang Rennecke,[3.3 regression] [SH] segfault in gen_far_branch (config/sh/sh.c),"The compiler segfaults at the following place:(gdb) bt#0  0x2f422c in gen_far_branch (bp=0xefffe568)    at /home/marcus/gcc-20030113/gcc/config/sh/sh.c:3228#1  0x2f55a8 in split_branches (first=0x3ef400)    at /home/marcus/gcc-20030113/gcc/config/sh/sh.c:4114#2  0x2f49f0 in machine_dependent_reorg (first=0x48f420)    at /home/marcus/gcc-20030113/gcc/config/sh/sh.c:3854#3  0x2b9d0c in rest_of_compilation (decl=0x4d0280)    at /home/marcus/gcc-20030113/gcc/toplev.c:3508#4  0x58f94 in c_expand_body (fndecl=0x4d0280, nested_p=0, can_defer_p=3766272)    at /home/marcus/gcc-20030113/gcc/c-decl.c:6525#5  0x58b68 in finish_function (nested=0, can_defer_p=1)    at /home/marcus/gcc-20030113/gcc/c-decl.c:6396#6  0x38cbc in yyparse () at c-parse.y:403#7  0x460fc in c_common_parse_file (set_yydebug=0)    at /home/marcus/gcc-20030113/gcc/c-lex.c:159#8  0x2b8364 in compile_file () at /home/marcus/gcc-20030113/gcc/toplev.c:2126#9  0x2be260 in do_compile () at /home/marcus/gcc-20030113/gcc/toplev.c:5354#10 0x2be328 in toplev_main (argc=17, argv=0xeffffa6c)    at /home/marcus/gcc-20030113/gcc/toplev.c:5385(gdb) list3223        emit_barrier_after (jump);3224      emit_label_after (bp->near_label, insn);3225      JUMP_LABEL (jump) = bp->far_label;3226      if (! invert_jump (insn, label, 1))3227        abort ();3228      (emit_insn_after3229       (gen_stuff_delay_slot3230        (GEN_INT (INSN_UID (XEXP (SET_SRC (PATTERN (jump)), 0))),3231         GEN_INT (recog_memoized (insn) == CODE_FOR_branch_false)),3232        insn));Release:3.3 20030113 (prerelease)Environment:System: SunOS continuity 5.8 Generic_108528-10 sun4m sparc SUNW,SPARCstation-10Architecture: sun4	host: sparc-sun-solaris2.8build: sparc-sun-solaris2.8target: sh-unknown-elfconfigured with: /home/marcus/gcc-20030113/configure --target=sh-elf --with-newlib --enable-languages=c,c++How-To-Repeat:	Compile the following program with	`sh-elf-gcc -v -O2 -fomit-frame-pointer -c foo.c' :	---8<--- foo.c ---8<---void foo(int n, int *p){  switch(n) {   case 100: case 110: case 120: case 130: case 140:   case 200: case 210: case 220: case 230: case 240:   case 300: case 310: case 320: case 330: case 340:   case 400: case 410: case 420: case 430: case 440:   case 500: case 510: case 520: case 530: case 540:   case 600: case 610: case 620: case 630: case 640:   case 700: case 710: case 720: case 730: case 740:   case 800: case 810: case 820: case 830: case 840:   case 900: case 910: case 920: case 930: case 940:     break;   default:     *p = n;     break;  }}	---8<---",RESOLVED          FIXED      
13585,Jorn Wolfgang Rennecke,Incorrect optimisation of call to sfunc,"The problem occurs when building the attached code. The command lineis:   % sh4-linux-gcc -O2 -c pcm_params.i -fPIC -o pcm_params.lo       The generated code for line 8252:         tmp = *params;which is a struct assignment, is:gcc version 3.2 20020529 (experimental) / 3.2.1 20021022 (prerelease)and 3.3.4:        mov.l   .L22,r0        mov     r14,r4        mov.w   .L32,r7        mov     r10,r5        mov.l   @(r0,r12),r0        mov     #74,r6        add     r14,r7        mov.l   r0,@(36,r7)        jsr     @r7        mov     r0,r7The problem is that the compiler has migrated the ""mov r0,r7"" which setsup the address to jump to, into the delay slot.This problem is seen in SuperH's 3.2/3.2.1 compiler, and a 3.3.2compiler, but not in a 3.4 snapshot, however this may just be a sideeffect of slightly different optimisations.",RESOLVED          FIXED      
82635,Andreas Tobler,std::thread's join broken on FreeBSD with all GCCs >= 5,"See the attached code. It compiles ""fine"" everywhere, but the resulting binary crashes in some situations:It runs fine on all compilers on Linux; it runs fine on all versions of clang on FreeBSD and on GCC-4.9 on FreeBSD.With GCC>=5 (including current 8-snapshot) the program crashes after 5 (sometimes 6) iterations. This may depend on the hardware, I can't say for sure. It is also strange how it is only triggered after multiple iterations.The problem must have been introduced in the last months, I know for sure that it did not happen in June. However it seems strange that it affects all GCCs down to version 5. Maybe something that was backported?I am CCing FreeBSD's port maintainer in case something happened on the packaging side of things.",RESOLVED          FIXED      
79562,Andreas Tobler,sanitizer breaks bootstrap of x86_64-*-freebsd,"Bootstrap appears broken on x86_64-*-freebsd due to the sanitizer.In file included from /home/sgk/gcc/gcc7/libsanitizer/sanitizer_common/sanitizer_platform_limits_posix.cc:59:0:/usr/include/sys/timeb.h:42:2: warning: #warning ""this file includes <sys/timeb.h> which is deprecated"" [-Wcpp] #warning ""this file includes <sys/timeb.h> which is deprecated""  ^~~~~~~/home/sgk/gcc/gcc7/libsanitizer/sanitizer_common/sanitizer_platform_limits_posix.cc:442:53: error: invalid application of 'sizeof' to incomplete type 'rtentry'   unsigned struct_rtentry_sz = sizeof(struct rtentry);                                                     ^gmake[4]: *** [Makefile:523: sanitizer_platform_limits_posix.lo] Error 1gmake[4]: Leaving directory '/mnt/sgk/obj7/x86_64-unknown-freebsd12.0/libsanitizer/sanitizer_common'gmake[3]: *** [Makefile:467: all-recursive] Error 1gmake[3]: Leaving directory '/mnt/sgk/obj7/x86_64-unknown-freebsd12.0/libsanitizer'gmake[2]: *** [Makefile:337: all] Error 2gmake[2]: Leaving directory '/mnt/sgk/obj7/x86_64-unknown-freebsd12.0/libsanitizer'gmake[1]: *** [Makefile:15904: all-target-libsanitizer] Error 2gmake[1]: Leaving directory '/mnt/sgk/obj7'gmake: *** [Makefile:23097: bootstrap] Error 2",RESOLVED          FIXED      
69611,Andreas Tobler,"Bootstrap broken on PowerPC FreeBSD, IEEE 128-bit floating point support.","PowerPC FreeBSD does not support 128-bit floating point yet.Bootstrap on this target is broken because of undefined references to __sfp_handle_exceptions.We build gcc with softfp for our 32-bit embedded targets.Now the the sfp-machine.h is included even in the non 128-bit t-float128 case.The definition of the __sfp_handle_exceptions is done in the mentioned header file while the implementation is done in the sfp-exceptions.c which is only built when 128-bit float is supported.To fix this issue we propose to guard the affected region in sfp-machine.h with this:Index: config/rs6000/sfp-machine.h===================================================================--- config/rs6000/sfp-machine.h	(revision 233015)+++ config/rs6000/sfp-machine.h	(working copy)@@ -110,7 +110,7 @@    floating point on pre-ISA 3.0 machines without the IEEE 128-bit floating    point support.  */ -#ifndef __NO_FPRS__+#if defined(__FLOAT128__) #define ISA_BIT(x) (1LL << (63 - x))  /* Use the same bits of the FPSCR.  */@@ -151,7 +151,7 @@   } while (0)  # define FP_ROUNDMODE	(_fpscr & FP_RND_MASK)-#endif	/* !__NO_FPRS__ */+#endif	/* __FLOAT128__ */I discussed this with Michael Meissner on #irc. He agrees on this approach.I'm running a bootstrap and will provide test results from FreeBSD PowerPC asap.I'd appreciate a testrun on a GNU/Linux target. I do not have such a setup yet.TIA,Andreas",RESOLVED          FIXED      
65726,Andreas Tobler,"[5/6 Regression] libffi fails to build when not bootstrapping: configure: error: C++ preprocessor ""/lib/cpp"" fails sanity check","Created attachment 35283 [details]builddir/i386-portbld-freebsd10.1/libffi/config.logThis seems to be a regression with the new libffi changes past GCC 4.9.When building on recent versions of FreeBSD where clang is the systemcompiler, without a bootstrap this is what we get:configure: error: in `/scratch2/tmp/gerald/gcc5-work/build/i386-portbld-freebsd10.1/libffi':configure: error: C++ preprocessor ""/lib/cpp"" fails sanity checkSee `config.log' for more details.Why is it trying to use /lib/cpp which does not even exist?",RESOLVED          FIXED      
65535,Andreas Tobler,powerpc64-freebsd build failure,"Building gcc for powerpc64-freebsd fails with the error below.  Looks like the FBSD_MAJOR macro is defined to nothing:$ grep FBSD_MAJOR ./gcc/tm.h#ifndef FBSD_MAJOR# define FBSD_MAJORDefining the macro to an integer such as 10 lets the build succeed.g++ -c   -g -O2 -DIN_GCC  -DCROSS_DIRECTORY_STRUCTURE  -fno-exceptions -fno-rtti -fasynchronous-unwind-tables -W -Wall -Wno-narrowing -Wwrite-strings -Wcast-qual -Wmissing-format-attribute -Woverloaded-virtual -pedantic -Wno-long-long -Wno-variadic-macros -Wno-overlength-strings -fno-common  -DHAVE_CONFIG_H -DGENERATOR_FILE -I. -Ibuild -I../../ppc64fbsd-src/gcc -I../../ppc64fbsd-src/gcc/build -I../../ppc64fbsd-src/gcc/../include  -I../../ppc64fbsd-src/gcc/../libcpp/include  \	-o build/print-rtl.o ../../ppc64fbsd-src/gcc/print-rtl.cIn file included from ./tm.h:21:0,                 from ../../ppc64fbsd-src/gcc/print-rtl.c:30:../../ppc64fbsd-src/gcc/config/freebsd-spec.h:108:16: error: operator '<' has no left operand #if FBSD_MAJOR < 5                ^../../ppc64fbsd-src/gcc/config/freebsd-spec.h:130:16: error: operator '<' has no left operand #if FBSD_MAJOR < 6                ^Makefile:2422: recipe for target 'build/gensupport.o' failedmake[1]: *** [build/gensupport.o] Error 1make[1]: *** Waiting for unfinished jobs....Makefile:2422: recipe for target 'build/print-rtl.o' failedmake[1]: *** [build/print-rtl.o] Error 1rm gcov-tool.pod gcj-dbtool.pod gfortran.pod jcf-dump.pod jv-convert.pod grmic.pod gcj.pod fsf-funding.pod cpp.pod gcov.pod gij.pod gc-analyze.pod gcc.pod gfdl.podmake[1]: Leaving directory '/home/msebor/build/powerpc64-freebsd/gcc'Makefile:4129: recipe for target 'all-gcc' failedmake: *** [all-gcc] Error 2",RESOLVED          FIXED      
51705,Andreas Tobler,[4.7 Regression] FreeBSD uses unsupported C++11 features when __cplusplus == 201103L,"FreeBSD recently added support for C11 and C++11 keywords to its sys/cdefs.h file. This header file is used by FreeBSD header files and source code to write code that is portable across different compiler versions.GCC 4.7's build system adds -std=c++0x to the compiler to build libstdc++. This means that code is built with __cplusplus == 201103L. This is wrong, because now sys/cdefs.h starts to use C++11 constructs such as [[noreturn]]. [[noreturn]] is not supported by GCC yet.Essentially GCC is free to announce __cplusplus == 201103L for its experimental C++11 support, but the C++11 support should not be used during its own compilation step if it's not finished yet.Alternatively, this could be fixed by simply implementing [[noreturn]], of course, but that's a different issue altogether.",RESOLVED          FIXED      
41745,Andreas Tobler,Segmentation fault when ecj.jar is run as a binary compiled by gcj,"I use this command line:gcj -o ecj --main=org.eclipse.jdt.internal.compiler.batch.Main /usr/local/share/java/ecj.jarto compile ecj.jar into native binary ecj.However, when I try running resulting binary on Hello World Java program it crashes. Original ecj.jar compiles HelloWorld successfully.public class HelloWorld {  public static void main(String args[]) {    System.out.println(""Hello World!"");  }}",RESOLVED          FIXED      
41018,Andreas Tobler,bootstrap broken on FreeBSD powerpc,"This patch: http://gcc.gnu.org/ml/gcc-cvs/2008-10/msg00471.htmlbroke bootstrap on powerpc targets which do not include svr4.h.SVR4_ASM_SPEC is never defined.This patch restores bootstrap, tested on 4.4 branch and head.http://gcc.gnu.org/ml/gcc-patches/2009-06/msg00421.htmlApproval for this patch is here:http://gcc.gnu.org/ml/gcc-patches/2009-08/msg00203.htmlI will commit the patch nn both trees, 4.4 and main, with an adjusted ChangeLog within 24 hours if there are no objections.",RESOLVED          FIXED      
40444,Andreas Tobler,[4.5 Regression] libffi badly broken with -m64 by some revision between 148383 and 148472.,See comment #4 of pr40385:                === libffi Summary for unix ===# of expected passes            1594# of expected failures          10# of unsupported tests          15Running target unix/-m64FAIL: libffi.call/closure_fn0.c -O0 -W -Wall execution test...FAIL: libffi.special/unwindtest.cc  -shared-libgcc -lstdc++ execution test                === libffi Summary for unix/-m64 ===# of expected passes            776# of unexpected failures        409# of expected failures          10# of unsupported tests          15                === libffi Summary ===# of expected passes            2370# of unexpected failures        409# of expected failures          20# of unsupported tests          30I have had a look at some crash reports. They look as:[ibook-dhum] gcc/_gcc_clean% cat ~/Library/Logs/CrashReporter/closure_fn0.exe_2009-06-15-074300_ibook-dhum.crashProcess:         closure_fn0.exe [67697]Path:            ./closure_fn0.exeIdentifier:      closure_fn0.exeVersion:         ??? (???)Code Type:       X86-64 (Native)Parent Process:  expect [60005]Date/Time:       2009-06-15 07:43:00.456 +0200OS Version:      Mac OS X 10.5.7 (9J61)Report Version:  6Anonymous UUID:  E80146C8-66E0-457D-87E0-4A904418933CException Type:  EXC_BAD_ACCESS (SIGBUS)Exception Codes: KERN_PROTECTION_FAILURE at 0x0000000100100210Crashed Thread:  0Thread 0 Crashed:0   ???                           	0x0000000100100210 0 + 42960164001   closure_fn0.exe               	0x00000001000009f4 start + 52Thread 0 crashed with X86 Thread State (64-bit):  rax: 0x0000000100100210  rbx: 0x00007fff5fbf8c60  rcx: 0x0000000000000004  rdx: 0x0000000000000003  rdi: 0x0000000000000001  rsi: 0x0000000000000002  rbp: 0x00007fff5fbf8ca0  rsp: 0x00007fff5fbf8b88   r8: 0x000000000000007f   r9: 0x00000000000001ad  r10: 0x0000000100002150  r11: 0x0000000100004f20  r12: 0x0000000000000000  r13: 0x0000000000000000  r14: 0x0000000000000000  r15: 0x0000000000000000  rip: 0x0000000100100210  rfl: 0x0000000000010246  cr2: 0x0000000100100210Binary Images:       0x100000000 -        0x100000fff +closure_fn0.exe ??? (???) <6d8a3f27722de7f10c1822591331d4f3> /Volumes/MacBook/opt/gcc/i686-darwin/i686-apple-darwin9/libffi/testsuite/closure_fn0.exe       0x100003000 -        0x100005ff7 +libffi.4.dylib ??? (???) <ca0f9c56e408e1f77be7289ad188fc7e> /opt/gcc/i686-darwin/i686-apple-darwin9/x86_64/libffi/.libs/libffi.4.dylib       0x10000a000 -        0x10001eff1 +libgcc_s.1.dylib ??? (???) <28ae595aba1589142c1755e5b0ac38dc> /opt/gcc/i686-darwin/gcc/libgcc_s.1.dylib    0x7fff5fc00000 -     0x7fff5fc2e643  dyld 97.1 (???) <b40847f1ce1ba2ed13837aeccbf19284> /usr/lib/dyld    0x7fff82d7e000 -     0x7fff82f09ffb  libSystem.B.dylib ??? (???) <558e10ab4bc6790fd3ee1abd14458085> /usr/lib/libSystem.B.dylib    0x7fff83fe2000 -     0x7fff83fe6fff  libmathCommon.A.dylib ??? (???) /usr/lib/system/libmathCommon.A.dylib    0x7fffffe00000 -     0x7fffffe01780  libSystem.B.dylib ??? (???) /usr/lib/libSystem.B.dylib,RESOLVED          FIXED      
35460,Andreas Tobler,[4.4 Regression] undefined reference to `__builtin_stdarg_start' when compiling 2/29 snapshot on OpenBSD,When I attempt to compile the snapshot of 2/29/08 on OpenBSD 4.2 I get the following message:libcpp.a(errors.o)(.text+0x258): In function `cpp_error':/home/mrichmon/gcc-4.4-20080229/libcpp/errors.c:141: undefined reference to `__builtin_stdarg_start'libcpp.a(errors.o)(.text+0x3a0): In function `cpp_error_with_line':/home/mrichmon/gcc-4.4-20080229/libcpp/errors.c:174: undefined reference to `__builtin_stdarg_start',RESOLVED          FIXED      
36452,Andreas Tobler,[4.4 Regression] Broken bootstrap while building libgomp.,"On i686-apple-darwin9, building libgomp fails with:libtool: compile:  /opt/gcc/i686-darwin/./gcc/xgcc -B/opt/gcc/i686-darwin/./gcc/ -B/opt/gcc/gcc4.4w/i686-apple-darwin9/bin/ -B/opt/gcc/gcc4.4w/i686-apple-darwin9/lib/ -isystem /opt/gcc/gcc4.4w/i686-apple-darwin9/include -isystem /opt/gcc/gcc4.4w/i686-apple-darwin9/sys-include -DHAVE_CONFIG_H -I. -I../../../gcc-4.4-work/libgomp -I. -I../../../gcc-4.4-work/libgomp/config/posix -I../../../gcc-4.4-work/libgomp -Wall -pthread -Werror -g -O2 -MT loop_ull.lo -MD -MP -MF .deps/loop_ull.Tpo -c ../../../gcc-4.4-work/libgomp/loop_ull.c  -fno-common -DPIC -o .libs/loop_ull.ochecking for i686-apple-darwin9-g++...  /opt/gcc/i686-darwin/./gcc/xgcc -shared-libgcc -B/opt/gcc/i686-darwin/./gcc -nostdinc++ -L/opt/gcc/i686-darwin/i686-apple-darwin9/libstdc++-v3/src -L/opt/gcc/i686-darwin/i686-apple-darwin9/libstdc++-v3/src/.libs -B/opt/gcc/gcc4.4w/i686-apple-darwin9/bin/ -B/opt/gcc/gcc4.4w/i686-apple-darwin9/lib/ -isystem /opt/gcc/gcc4.4w/i686-apple-darwin9/include -isystem /opt/gcc/gcc4.4w/i686-apple-darwin9/sys-includechecking whether we are using the GNU C++ compiler... ../../../gcc-4.4-work/libgomp/loop_ull.c:486: error: conflicting types for 'GOMP_loop_ull_static_start'../../../gcc-4.4-work/libgomp/libgomp_g.h:88: error: previous declaration of 'GOMP_loop_ull_static_start' was herecc1: warnings being treated as errors../../../gcc-4.4-work/libgomp/loop_ull.c: In function 'GOMP_loop_ull_static_start':../../../gcc-4.4-work/libgomp/loop_ull.c:489: error: passing argument 5 of 'gomp_loop_ull_static_start' makes integer from pointer without a cast../../../gcc-4.4-work/libgomp/loop_ull.c:489: error: too few arguments to function 'gomp_loop_ull_static_start'../../../gcc-4.4-work/libgomp/loop_ull.c: At top level:../../../gcc-4.4-work/libgomp/loop_ull.c:493: error: conflicting types for 'GOMP_loop_ull_dynamic_start'../../../gcc-4.4-work/libgomp/libgomp_g.h:94: error: previous declaration of 'GOMP_loop_ull_dynamic_start' was here../../../gcc-4.4-work/libgomp/loop_ull.c: In function 'GOMP_loop_ull_dynamic_start':../../../gcc-4.4-work/libgomp/loop_ull.c:496: error: passing argument 5 of 'gomp_loop_ull_dynamic_start' makes integer from pointer without a cast../../../gcc-4.4-work/libgomp/loop_ull.c:496: error: too few arguments to function 'gomp_loop_ull_dynamic_start'../../../gcc-4.4-work/libgomp/loop_ull.c: At top level:../../../gcc-4.4-work/libgomp/loop_ull.c:500: error: conflicting types for 'GOMP_loop_ull_guided_start'../../../gcc-4.4-work/libgomp/libgomp_g.h:100: error: previous declaration of 'GOMP_loop_ull_guided_start' was here../../../gcc-4.4-work/libgomp/loop_ull.c: In function 'GOMP_loop_ull_guided_start':../../../gcc-4.4-work/libgomp/loop_ull.c:503: error: passing argument 5 of 'gomp_loop_ull_guided_start' makes integer from pointer without a cast../../../gcc-4.4-work/libgomp/loop_ull.c:503: error: too few arguments to function 'gomp_loop_ull_guided_start'../../../gcc-4.4-work/libgomp/loop_ull.c: At top level:../../../gcc-4.4-work/libgomp/loop_ull.c:507: error: conflicting types for 'GOMP_loop_ull_ordered_static_start'../../../gcc-4.4-work/libgomp/libgomp_g.h:112: error: previous declaration of 'GOMP_loop_ull_ordered_static_start' was here../../../gcc-4.4-work/libgomp/loop_ull.c: In function 'GOMP_loop_ull_ordered_static_start':../../../gcc-4.4-work/libgomp/loop_ull.c:511: error: passing argument 5 of 'gomp_loop_ull_ordered_static_start' makes integer from pointer without a cast../../../gcc-4.4-work/libgomp/loop_ull.c:511: error: too few arguments to function 'gomp_loop_ull_ordered_static_start'../../../gcc-4.4-work/libgomp/loop_ull.c: At top level:../../../gcc-4.4-work/libgomp/loop_ull.c:515: error: conflicting types for 'GOMP_loop_ull_ordered_dynamic_start'../../../gcc-4.4-work/libgomp/libgomp_g.h:118: error: previous declaration of 'GOMP_loop_ull_ordered_dynamic_start' was here../../../gcc-4.4-work/libgomp/loop_ull.c: In function 'GOMP_loop_ull_ordered_dynamic_start':../../../gcc-4.4-work/libgomp/loop_ull.c:519: error: passing argument 5 of 'gomp_loop_ull_ordered_dynamic_start' makes integer from pointer without a cast../../../gcc-4.4-work/libgomp/loop_ull.c:519: error: too few arguments to function 'gomp_loop_ull_ordered_dynamic_start'../../../gcc-4.4-work/libgomp/loop_ull.c: At top level:../../../gcc-4.4-work/libgomp/loop_ull.c:523: error: conflicting types for 'GOMP_loop_ull_ordered_guided_start'../../../gcc-4.4-work/libgomp/libgomp_g.h:124: error: previous declaration of 'GOMP_loop_ull_ordered_guided_start' was here../../../gcc-4.4-work/libgomp/loop_ull.c: In function 'GOMP_loop_ull_ordered_guided_start':../../../gcc-4.4-work/libgomp/loop_ull.c:527: error: passing argument 5 of 'gomp_loop_ull_ordered_guided_start' makes integer from pointer without a cast../../../gcc-4.4-work/libgomp/loop_ull.c:527: error: too few arguments to function 'gomp_loop_ull_ordered_guided_start'make[4]: *** [loop_ull.lo] Error 1make[3]: *** [all-recursive] Error 1make[2]: *** [all] Error 2make[1]: *** [all-target-libgomp] Error 2",RESOLVED          FIXED      
36918,Andreas Tobler,[4.4 regression] Bootstrap failure on sparc: assertion failure in options.c,"As of 20080724, mainline doesn't bootstrap on sparc-sun-solaris2.11 (and probablyevery sparc target) like this:checking for suffix of object files... configure: error: in `/vol/gccsrc/obj/gcc-4.4.0-20080724/11-gcc/sparc-sun-solaris2.11/libgcc':configure: error: cannot compute suffix of object files: cannot compileSee `config.log' for more details.make[2]: *** [configure-stage1-target-libgcc] Error 1In config.log, I findconfigure:2590: checking for suffix of object filesconfigure:2611: /vol/gccsrc/obj/gcc-4.4.0-20080724/11-gcc/./gcc/xgcc -B/vol/gccsrc/obj/gcc-4.4.0-20080724/11-gcc/./gcc/ -B/vol/gcc/sparc-sun-solaris2.11/bin/ -B/vol/gcc/sparc-sun-solaris2.11/lib/ -isystem /vol/gcc/sparc-sun-solaris2.11/include -isystem /vol/gcc/sparc-sun-solaris2.11/sys-include -c -g -O2    conftest.c >&5cc1: internal compiler error: in cl_optimization_save, at options.c:5066options.c:5066 has  gcc_assert (IN_RANGE (flag_pcc_struct_return, 0, 255));The problem is obviously that DEFAULT_PCC_STRUCT_RETURN is -1 in config/sparc/sparc.h, which works ok with the int flag_pcc_struct_return variable, but not with unsigned char flag_pcc_struct_return in options.h (structcl_optimization).I couldn't easily find my way through the maze of opt[ch]-gen.awk to fix this,though.One workaround might be to declare fpcc-struct-return in common.opt, likee.g. align_functions.",RESOLVED          FIXED      
36469,Andreas Tobler,bootstrap broken on HPUX PA,"The build of libgomp fails due to the use of strtoull in env.cHPUX-PA does not know about this function, officially. On 32-bit the function is available but not headerwise. On 64-bit this function is not available at all.The following snippet added to env.c cures the issue:Index: env.c===================================================================--- env.c       (revision 136534)+++ env.c       (working copy)@@ -47,6 +47,11 @@ #include <limits.h> #include <errno.h> +#if (defined(__hpux__) && defined(__LP64__))+#define strtoull strtoul+#elif (defined(__hpux__) && !defined(__LP64__))+#define strtoull __strtoull+#endif  struct gomp_task_icv gomp_global_icv = {   .nthreads_var = 1,But I do not know if this is the right(tm) way to handle such cases or if you prefer a configure magic part. Other libs as libstdc++ use special includes. And I do not have a configure magic at hand.Tests with the above in progress, on 32 and 64-bit.Comments?",RESOLVED          FIXED      
35915,Andreas Tobler,[4.4 Regression] atomic.cc:31:20: error: stdint.h: No such file,libtool: compile:  /test/gnu/gcc/objdir/./gcc/xgcc -shared-libgcc -B/test/gnu/gcc/objdir/./gcc -nostdinc++ -L/test/gnu/gcc/objdir/hppa2.0w-hp-hpux11.11/libstdc++-v3/src -L/test/gnu/gcc/objdir/hppa2.0w-hp-hpux11.11/libstdc++-v3/src/.libs -B/opt/gnu/gcc/gcc-4.4.0/hppa2.0w-hp-hpux11.11/bin/ -B/opt/gnu/gcc/gcc-4.4.0/hppa2.0w-hp-hpux11.11/lib/ -isystem /opt/gnu/gcc/gcc-4.4.0/hppa2.0w-hp-hpux11.11/include -isystem /opt/gnu/gcc/gcc-4.4.0/hppa2.0w-hp-hpux11.11/sys-include -I/test/gnu/gcc/objdir/hppa2.0w-hp-hpux11.11/libstdc++-v3/include/hppa2.0w-hp-hpux11.11 -I/test/gnu/gcc/objdir/hppa2.0w-hp-hpux11.11/libstdc++-v3/include -I/test/gnu/gcc/gcc/libstdc++-v3/libsupc++ -fno-implicit-templates -Wall -Wextra -Wwrite-strings -Wcast-qual -fdiagnostics-show-location=once -g -O2 -x c++ -std=gnu++0x -c ../../../../gcc/libstdc++-v3/src/atomic.cc  -fPIC -DPIC -o .libs/atomic.o../../../../gcc/libstdc++-v3/src/atomic.cc:31:20: error: stdint.h: No such file or directory../../../../gcc/libstdc++-v3/src/atomic.cc:55: warning: unused parameter '__x'../../../../gcc/libstdc++-v3/src/atomic.cc:73: warning: unused parameter '__x'../../../../gcc/libstdc++-v3/src/atomic.cc: In function 'volatile std::atomic_flag* std::__atomic_flag_for_address(const volatile void*)':../../../../gcc/libstdc++-v3/src/atomic.cc:106: error: 'uintptr_t' was not declared in this scope../../../../gcc/libstdc++-v3/src/atomic.cc:106: error: expected ';' before '__u'../../../../gcc/libstdc++-v3/src/atomic.cc:107: error: '__u' was not declared in this scope../../../../gcc/libstdc++-v3/src/atomic.cc: At global scope:../../../../gcc/libstdc++-v3/src/atomic.cc:104: warning: unused parameter '__z'make[4]: *** [atomic.lo] Error 1,RESOLVED          FIXED      
35208,Andreas Tobler,Please apply the patch in comment #19 of PR35035,Would it be possible to apply the patch in comment #19 of PR35035 before releasing gcc 4.3.0?Without this patch the libjava test hangs and needs to reboot the computer if the window in which the test has been launched is out of focus (for instance due to the screensave).,RESOLVED          FIXED      
30071,Andreas Tobler,make install fails for libjava,"Failure to relink libjvm.laxgcc: /SCRATCH/gcc-build/HP-UX/hppa2.0w-hp-hpux11.00/install/lib/libgcj.sl: Nosuch file or directorylibtool: install: error: relink `libjvm.la' with the above command beforeinstalling itI tracked it down to an install sequence issue.Makefile.in in the libjava directory contains the following install-exec-am tag:install-exec-am: install-binPROGRAMS install-binSCRIPTS \	install-dbexecDATA install-dbexecLTLIBRARIES \	install-toolexeclibLTLIBRARIES install-toolexecmainlibDATA	@$(NORMAL_INSTALL)	$(MAKE) $(AM_MAKEFLAGS) install-exec-hookThis installs binPROGRAMS and dbexecLTLIBRARIES before toolexeclibLTLIBRARIES what gives warnings like this:  /bin/sh ./libtool --mode=install /appl/shared/gnu/Linux/i686-pc-linux-gnu/bin/install -c 'gij' '/SCRATCH/gcc-build/Linux/i686-pc-linux-gnu/install/bin/gij'libtool: install: warning: `libgij.la' has not been installed in `/SCRATCH/gcc-build/Linux/i686-pc-linux-gnu/install/lib'libtool: install: warning: `/SCRATCH/gcc-build/Linux/i686-pc-linux-gnu/gcc-4.2.0/gcc-4.2.0/i686-pc-linux-gnu/libjava/libgcj.la' has not been installed in `/SCRATCH/gcc-build/Linux/i686-pc-linux-gnu/install/lib'and fails on relinking of libjvm.laxgcc: /SCRATCH/gcc-build/HP-UX/hppa2.0w-hp-hpux11.00/install/lib/libgcj.sl: Nosuch file or directorylibtool: install: error: relink `libjvm.la' with the above command beforeinstalling itI changed the install-exec-am tag in the Makefile.in to:install-exec-am: install-toolexeclibLTLIBRARIES install-toolexecmainlibDATA \	install-dbexecLTLIBRARIES install-dbexecDATA \	install-binPROGRAMS install-binSCRIPTS	@$(NORMAL_INSTALL)	$(MAKE) $(AM_MAKEFLAGS) install-exec-hookWith this modification bootstrap, make check, and make install succeeds for at least i686-pc-linux-gnu and hppa2.0w-hp-hpux11.00.I'm not familiar with the automake machinery. So, somebody who knows the magics may help to change the configuration accordingly.",RESOLVED          FIXED      
31937,Andreas Tobler,libffi doesn't support ppc without FPU,"PowerPC CPU without FPU (such as the PPC405EP) doesn't pass the libffi testsuite. Most of the tests crash with an ""illegal instruction"" error message, even those that don't manipulate double/float. For instance, it crashes with the ""cls_uint"" test.After investigating, I think the problem comes from the ppc assembly code from the libffi/src/powerpc directory that includes FPU instructions not supported by those CPU. In particular, the ppc_closure.S file contains ""stfd"" FPU instructions that are supposed to save FPU registers and are always executed, even if no fpu operation is to be performed.If you don't need fpu support (as I do), a quick and dirty hack is to comment out those ""stfd"" instructions from the ppc_closure.S file.I guess the right way to fix it would be to use the soft-float system when no FPU is present. But that's something I don't know how to do...I've tried with gcc 3.4.3 and gcc 4.1.0, but I guess all versions are affected.",RESOLVED          FIXED      
33326,Andreas Tobler,libjava - testsuite fails on intel Macintosh,The libjava testsuite fails on intel Macintosh -		=== libjava Summary ===# of expected passes		50# of unexpected failures	828# of expected failures		35# of untested testcases		1581runtest completed at Thu Sep  6 11:58:37 2007,RESOLVED          FIXED      
31659,Andreas Tobler,"config-int.h:327:1: error: ""INT8_MIN"" redefined","/test/gnu/gcc/objdir/./gcc/xgcc -shared-libgcc -B/test/gnu/gcc/objdir/./gcc -nostdinc++ -L/test/gnu/gcc/objdir/hppa2.0w-hp-hpux11.11/libstdc++-v3/src -L/test/gnu/gcc/objdir/hppa2.0w-hp-hpux11.11/libstdc++-v3/src/.libs -B/opt/gnu/gcc/gcc-4.3.0/hppa2.0w-hp-hpux11.11/bin/ -B/opt/gnu/gcc/gcc-4.3.0/hppa2.0w-hp-hpux11.11/lib/ -isystem /opt/gnu/gcc/gcc-4.3.0/hppa2.0w-hp-hpux11.11/include -isystem /opt/gnu/gcc/gcc-4.3.0/hppa2.0w-hp-hpux11.11/sys-include -DHAVE_CONFIG_H -I. -I../../../gcc/libjava -I./include -I./gcj -I../../../gcc/libjava -Iinclude -I../../../gcc/libjava/include -I../../../gcc/libjava/classpath/include -Iclasspath/include -I../../../gcc/libjava/classpath/native/fdlibm -I../../../gcc/libjava/../boehm-gc/include -I../boehm-gc/include -I../../../gcc/libjava/libltdl -I../../../gcc/libjava/libltdl -I../../../gcc/libjava/.././libjava/../gcc -I../../../gcc/libjava/../zlib -I../../../gcc/libjava/../libffi/include -I../libffi/include -fno-rtti -fnon-call-exceptions -pthread -fdollars-in-identifiers -Wswitch-enum -D_FILE_OFFSET_BITS=64 -Wextra -Wall -D_GNU_SOURCE -DPREFIX=\""/opt/gnu/gcc/gcc-4.3.0\"" -DTOOLEXECLIBDIR=\""/opt/gnu/gcc/gcc-4.3.0/lib\"" -DJAVA_HOME=\""/opt/gnu/gcc/gcc-4.3.0\"" -DBOOT_CLASS_PATH=\""/opt/gnu/gcc/gcc-4.3.0/share/java/libgcj-4.3.0.jar\"" -DJAVA_EXT_DIRS=\""/opt/gnu/gcc/gcc-4.3.0/share/java/ext\"" -DGCJ_ENDORSED_DIRS=\""/opt/gnu/gcc/gcc-4.3.0/share/java/gcj-endorsed\"" -DGCJ_VERSIONED_LIBDIR=\""/opt/gnu/gcc/gcc-4.3.0/lib/gcj-4.3.0\"" -DPATH_SEPARATOR=\"":\"" -DECJ_JAR_FILE=\""\"" -DLIBGCJ_DEFAULT_DATABASE=\""/opt/gnu/gcc/gcc-4.3.0/lib/gcj-4.3.0/classmap.db\"" -DLIBGCJ_DEFAULT_DATABASE_PATH_TAIL=\""gcj-4.3.0/classmap.db\"" -g -O2 -MT java/lang/natVMDouble.lo -MD -MP -MF java/lang/.deps/natVMDouble.Tpo -c ../../../gcc/libjava/java/lang/natVMDouble.cc  -fPIC -DPIC -o java/lang/.libs/natVMDouble.oIn file included from ../../../gcc/libjava/classpath/native/fdlibm/mprec.h:33,                 from ../../../gcc/libjava/classpath/native/fdlibm/fdlibm.h:29,                 from ../../../gcc/libjava/java/lang/natVMDouble.cc:27:classpath/include/config-int.h:327:1: error: ""INT8_MIN"" redefinedIn file included from classpath/include/config-int.h:23,                 from ../../../gcc/libjava/classpath/native/fdlibm/mprec.h:33,                 from ../../../gcc/libjava/classpath/native/fdlibm/fdlibm.h:29,                 from ../../../gcc/libjava/java/lang/natVMDouble.cc:27:/usr/include/inttypes.h:104:1: error: this is the location of the previous definitionIn file included from ../../../gcc/libjava/classpath/native/fdlibm/mprec.h:33,                 from ../../../gcc/libjava/classpath/native/fdlibm/fdlibm.h:29,                 from ../../../gcc/libjava/java/lang/natVMDouble.cc:27:classpath/include/config-int.h:328:1: error: ""INT16_MIN"" redefinedIn file included from classpath/include/config-int.h:23,                 from ../../../gcc/libjava/classpath/native/fdlibm/mprec.h:33,                 from ../../../gcc/libjava/classpath/native/fdlibm/fdlibm.h:29,                 from ../../../gcc/libjava/java/lang/natVMDouble.cc:27:/usr/include/inttypes.h:105:1: error: this is the location of the previous definitionIn file included from ../../../gcc/libjava/classpath/native/fdlibm/mprec.h:33,                 from ../../../gcc/libjava/classpath/native/fdlibm/fdlibm.h:29,                 from ../../../gcc/libjava/java/lang/natVMDouble.cc:27:classpath/include/config-int.h:329:1: error: ""INT32_MIN"" redefinedIn file included from classpath/include/config-int.h:23,                 from ../../../gcc/libjava/classpath/native/fdlibm/mprec.h:33,                 from ../../../gcc/libjava/classpath/native/fdlibm/fdlibm.h:29,                 from ../../../gcc/libjava/java/lang/natVMDouble.cc:27:/usr/include/inttypes.h:106:1: error: this is the location of the previous definitionIn file included from ../../../gcc/libjava/classpath/native/fdlibm/mprec.h:33,                 from ../../../gcc/libjava/classpath/native/fdlibm/fdlibm.h:29,                 from ../../../gcc/libjava/java/lang/natVMDouble.cc:27:classpath/include/config-int.h:330:1: error: ""INT64_MIN"" redefinedIn file included from classpath/include/config-int.h:23,                 from ../../../gcc/libjava/classpath/native/fdlibm/mprec.h:33,                 from ../../../gcc/libjava/classpath/native/fdlibm/fdlibm.h:29,                 from ../../../gcc/libjava/java/lang/natVMDouble.cc:27:/usr/include/inttypes.h:107:1: error: this is the location of the previous definitionIn file included from ../../../gcc/libjava/classpath/native/fdlibm/mprec.h:33,                 from ../../../gcc/libjava/classpath/native/fdlibm/fdlibm.h:29,                 from ../../../gcc/libjava/java/lang/natVMDouble.cc:27:classpath/include/config-int.h:332:1: error: ""INT8_MAX"" redefinedIn file included from classpath/include/config-int.h:23,                 from ../../../gcc/libjava/classpath/native/fdlibm/mprec.h:33,                 from ../../../gcc/libjava/classpath/native/fdlibm/fdlibm.h:29,                 from ../../../gcc/libjava/java/lang/natVMDouble.cc:27:/usr/include/inttypes.h:99:1: error: this is the location of the previous definitionIn file included from ../../../gcc/libjava/classpath/native/fdlibm/mprec.h:33,                 from ../../../gcc/libjava/classpath/native/fdlibm/fdlibm.h:29,                 from ../../../gcc/libjava/java/lang/natVMDouble.cc:27:classpath/include/config-int.h:333:1: error: ""INT16_MAX"" redefinedIn file included from classpath/include/config-int.h:23,                 from ../../../gcc/libjava/classpath/native/fdlibm/mprec.h:33,                 from ../../../gcc/libjava/classpath/native/fdlibm/fdlibm.h:29,                 from ../../../gcc/libjava/java/lang/natVMDouble.cc:27:/usr/include/inttypes.h:100:1: error: this is the location of the previous definitionIn file included from ../../../gcc/libjava/classpath/native/fdlibm/mprec.h:33,                 from ../../../gcc/libjava/classpath/native/fdlibm/fdlibm.h:29,                 from ../../../gcc/libjava/java/lang/natVMDouble.cc:27:classpath/include/config-int.h:334:1: error: ""INT32_MAX"" redefinedIn file included from classpath/include/config-int.h:23,                 from ../../../gcc/libjava/classpath/native/fdlibm/mprec.h:33,                 from ../../../gcc/libjava/classpath/native/fdlibm/fdlibm.h:29,                 from ../../../gcc/libjava/java/lang/natVMDouble.cc:27:/usr/include/inttypes.h:101:1: error: this is the location of the previous definitionIn file included from ../../../gcc/libjava/classpath/native/fdlibm/mprec.h:33,                 from ../../../gcc/libjava/classpath/native/fdlibm/fdlibm.h:29,                 from ../../../gcc/libjava/java/lang/natVMDouble.cc:27:classpath/include/config-int.h:335:1: error: ""INT64_MAX"" redefinedIn file included from classpath/include/config-int.h:23,                 from ../../../gcc/libjava/classpath/native/fdlibm/mprec.h:33,                 from ../../../gcc/libjava/classpath/native/fdlibm/fdlibm.h:29,                 from ../../../gcc/libjava/java/lang/natVMDouble.cc:27:/usr/include/inttypes.h:102:1: error: this is the location of the previous definitionIn file included from ../../../gcc/libjava/classpath/native/fdlibm/mprec.h:33,                 from ../../../gcc/libjava/classpath/native/fdlibm/fdlibm.h:29,                 from ../../../gcc/libjava/java/lang/natVMDouble.cc:27:classpath/include/config-int.h:338:1: error: ""UINT8_MAX"" redefinedIn file included from classpath/include/config-int.h:23,                 from ../../../gcc/libjava/classpath/native/fdlibm/mprec.h:33,                 from ../../../gcc/libjava/classpath/native/fdlibm/fdlibm.h:29,                 from ../../../gcc/libjava/java/lang/natVMDouble.cc:27:/usr/include/inttypes.h:119:1: error: this is the location of the previous definitionIn file included from ../../../gcc/libjava/classpath/native/fdlibm/mprec.h:33,                 from ../../../gcc/libjava/classpath/native/fdlibm/fdlibm.h:29,                 from ../../../gcc/libjava/java/lang/natVMDouble.cc:27:classpath/include/config-int.h:339:1: error: ""UINT16_MAX"" redefinedIn file included from classpath/include/config-int.h:23,                 from ../../../gcc/libjava/classpath/native/fdlibm/mprec.h:33,                 from ../../../gcc/libjava/classpath/native/fdlibm/fdlibm.h:29,                 from ../../../gcc/libjava/java/lang/natVMDouble.cc:27:/usr/include/inttypes.h:120:1: error: this is the location of the previous definitionIn file included from ../../../gcc/libjava/classpath/native/fdlibm/mprec.h:33,                 from ../../../gcc/libjava/classpath/native/fdlibm/fdlibm.h:29,                 from ../../../gcc/libjava/java/lang/natVMDouble.cc:27:classpath/include/config-int.h:340:1: error: ""UINT32_MAX"" redefinedIn file included from classpath/include/config-int.h:23,                 from ../../../gcc/libjava/classpath/native/fdlibm/mprec.h:33,                 from ../../../gcc/libjava/classpath/native/fdlibm/fdlibm.h:29,                 from ../../../gcc/libjava/java/lang/natVMDouble.cc:27:/usr/include/inttypes.h:122:1: error: this is the location of the previous definitionIn file included from ../../../gcc/libjava/classpath/native/fdlibm/mprec.h:33,                 from ../../../gcc/libjava/classpath/native/fdlibm/fdlibm.h:29,                 from ../../../gcc/libjava/java/lang/natVMDouble.cc:27:classpath/include/config-int.h:341:1: error: ""UINT64_MAX"" redefinedIn file included from classpath/include/config-int.h:23,                 from ../../../gcc/libjava/classpath/native/fdlibm/mprec.h:33,                 from ../../../gcc/libjava/classpath/native/fdlibm/fdlibm.h:29,                 from ../../../gcc/libjava/java/lang/natVMDouble.cc:27:/usr/include/inttypes.h:126:1: error: this is the location of the previous definitionmake[3]: *** [java/lang/natVMDouble.lo] Error 1make[3]: Leaving directory `/test/gnu/gcc/objdir/hppa2.0w-hp-hpux11.11/libjava'make[2]: *** [all-recursive] Error 1make[2]: Leaving directory `/test/gnu/gcc/objdir/hppa2.0w-hp-hpux11.11/libjava'make[1]: *** [all-target-libjava] Error 2make[1]: Leaving directory `/test/gnu/gcc/objdir'make: *** [bootstrap] Error 2Sat Apr 21 05:33:50 EDT 2007My last successful build of libjava on this target was revision 120606.  Thisparticular problem is somewhat more recent.This problem seems similar to PR 28190 on mips.",RESOLVED          FIXED      
30513,Andreas Tobler,[4.3 Regression] Bootstrap failure with libgcj on sparc-sun-solaris2.10,"Current mainline bootstrap fails with the following error when building libjava.  I haven't built mainline for about two weeks so I don't know when it started failing exactly./caip/u12/kishgcc/tmpdisk/gcc-testing/43/build/./gcc/xgcc -shared-libgcc -B/caip/u12/kishgcc/tmpdisk/gcc-testing/43/build/./gcc -nostdinc++ -L/caip/u12/kishgcc/tmpdisk/gcc-testing/43/build/sparc-sun-solaris2.10/sparcv9/libstdc++-v3/src -L/caip/u12/kishgcc/tmpdisk/gcc-testing/43/build/sparc-sun-solaris2.10/sparcv9/libstdc++-v3/src/.libs -B/usr/local/sparc-sun-solaris2.10/bin/ -B/usr/local/sparc-sun-solaris2.10/lib/ -isystem /usr/local/sparc-sun-solaris2.10/include -isystem /usr/local/sparc-sun-solaris2.10/sys-include -m64 -DHAVE_CONFIG_H -I. -I../../../../egcc-SVN20070118/libjava -I./include -I./gcj -I../../../../egcc-SVN20070118/libjava -Iinclude -I../../../../egcc-SVN20070118/libjava/include -I../../../../egcc-SVN20070118/libjava/classpath/include -Iclasspath/include -I../../../../egcc-SVN20070118/libjava/classpath/native/fdlibm -I../../../../egcc-SVN20070118/libjava/../boehm-gc/include -I../boehm-gc/include -I../../../../egcc-SVN20070118/libjava/libltdl -I../../../../egcc-SVN20070118/libjava/libltdl -I../../../../egcc-SVN20070118/libjava/.././libjava/../gcc -I../../../../egcc-SVN20070118/libjava/../zlib -I../../../../egcc-SVN20070118/libjava/../libffi/include -I../libffi/include -fno-rtti -fnon-call-exceptions -fdollars-in-identifiers -Wswitch-enum -D_FILE_OFFSET_BITS=64 -Wextra -Wall -D_GNU_SOURCE -DPREFIX=\""/usr/local\"" -DTOOLEXECLIBDIR=\""/usr/local/lib/sparcv9\"" -DJAVA_HOME=\""/usr/local\"" -DBOOT_CLASS_PATH=\""/usr/local/share/java/libgcj-4.3.0.jar\"" -DJAVA_EXT_DIRS=\""/usr/local/share/java/ext\"" -DGCJ_ENDORSED_DIRS=\""/usr/local/share/java/gcj-endorsed\"" -DGCJ_VERSIONED_LIBDIR=\""/usr/local/lib/sparcv9/gcj-4.3.0\"" -DPATH_SEPARATOR=\"":\"" -DLIBGCJ_DEFAULT_DATABASE=\""/usr/local/lib/sparcv9/gcj-4.3.0/classmap.db\"" -DLIBGCJ_DEFAULT_DATABASE_PATH_TAIL=\""gcj-4.3.0/classmap.db\"" -g -O2 -m64 -MT jni-libjvm.lo -MD -MP -MF .deps/jni-libjvm.Tpo -c ../../../../egcc-SVN20070118/libjava/jni-libjvm.cc  -fPIC -DPIC -o .libs/jni-libjvm.oIn file included from ./include/java-threads.h:22,                 from ../../../../egcc-SVN20070118/libjava/include/jvm.h:23,                 from ../../../../egcc-SVN20070118/libjava/jni-libjvm.cc:14:./sysdep/locks.h:11:2: error: #error Thread synchronization primitives not implemented for this platform.In file included from ../../../../egcc-SVN20070118/libjava/include/jvm.h:35,                 from ../../../../egcc-SVN20070118/libjava/jni-libjvm.cc:14:./sysdep/locks.h:11:2: error: #error Thread synchronization primitives not implemented for this platform.In file included from ../../../../egcc-SVN20070118/libjava/include/jvm.h:23,                 from ../../../../egcc-SVN20070118/libjava/jni-libjvm.cc:14:./include/java-threads.h:358: error: 'obj_addr_t' does not name a typeIn file included from ../../../../egcc-SVN20070118/libjava/jni-libjvm.cc:14:../../../../egcc-SVN20070118/libjava/include/jvm.h:750: error: 'obj_addr_t' does not name a typemake[5]: *** [jni-libjvm.lo] Error 1make[5]: Leaving directory `/caip/u12/kishgcc/gcc-testing/gcc-testing/43/build/sparc-sun-solaris2.10/sparcv9/libjava'make[4]: *** [all-recursive] Error 1make[4]: Leaving directory `/caip/u12/kishgcc/gcc-testing/gcc-testing/43/build/sparc-sun-solaris2.10/sparcv9/libjava'make[3]: *** [multi-do] Error 1make[3]: Leaving directory `/caip/u12/kishgcc/gcc-testing/gcc-testing/43/build/sparc-sun-solaris2.10/libjava'make[2]: *** [all-multi] Error 2make[2]: Leaving directory `/caip/u12/kishgcc/gcc-testing/gcc-testing/43/build/sparc-sun-solaris2.10/libjava'make[1]: *** [all-target-libjava] Error 2make[1]: Leaving directory `/caip/u12/kishgcc/gcc-testing/gcc-testing/43/build'make: *** [bootstrap] Error 2",RESOLVED          FIXED      
30134,Andreas Tobler,"Bootstrap error:  ""libffi has not been ported to powerpc64-apple-darwin8.8.0""","With this configure and build:[descartes:gcc/mainline/objdir] gcc-test% cat ../build-and-check-gcc #!/bin/tcsh/bin/rm -rf *; env CC=/pkgs/gcc-4.2.0-64/bin/gcc ../configure --build=powerpc64-apple-darwin8.8.0 --host=powerpc64-apple-darwin8.8.0 --target=powerpc64-apple-darwin8.8.0 --with-gmp=/pkgs/gmp-4.2.1-64/ --with-mpfr=/pkgs/gmp-4.2.1-64/ --prefix=/pkgs/gcc-4.3.0-64; make -j 4 bootstrap BOOT_LDFLAGS='-Wl,-search_paths_first' >& build.log && (make install) && (make -k -j 8 check RUNTESTFLAGS=""--target_board 'unix{-mcpu=970/-m64}'""  >& check.log ; make mail-report-with-warnings.log)bootstrap fails withconfigure: error: ""libffi has not been ported to powerpc64-apple-darwin8.8.0.""make[1]: *** [configure-target-libffi] Error 1make: *** [bootstrap] Error 2",RESOLVED          FIXED      
28546,Andreas Tobler,[4.2 Regression] ./java/lang/Thread.h:31: error: using typedef-name '_Jv_Thread_t' after 'class',"/xxx/gnu/gcc/objdir/./gcc/xgcc -shared-libgcc -B/xxx/gnu/gcc/objdir/./gcc -nostdinc++ -L/xxx/gnu/gcc/objdir/hppa2.0w-hp-hpux11.00/libstdc++-v3/src -L/xxx/gnu/gcc/objdir/hppa2.0w-hp-hpux11.00/libstdc++-v3/src/.libs -B/opt/gnu/gcc/gcc-4.2.0/hppa2.0w-hp-hpux11.00/bin/ -B/opt/gnu/gcc/gcc-4.2.0/hppa2.0w-hp-hpux11.00/lib/ -isystem /opt/gnu/gcc/gcc-4.2.0/hppa2.0w-hp-hpux11.00/include -isystem /opt/gnu/gcc/gcc-4.2.0/hppa2.0w-hp-hpux11.00/sys-include -DHAVE_CONFIG_H -I. -I../../../gcc/libjava -I./include -I./gcj -I../../../gcc/libjava -Iinclude -I../../../gcc/libjava/include -I../../../gcc/libjava/classpath/include -Iclasspath/include -I../../../gcc/libjava/classpath/native/fdlibm -I../../../gcc/libjava/../boehm-gc/include -I../boehm-gc/include -I../../../gcc/libjava/libltdl -I../../../gcc/libjava/libltdl -I../../../gcc/libjava/.././libjava/../gcc -I../../../gcc/libjava/../zlib -I../../../gcc/libjava/../libffi/include -I../libffi/include -fno-rtti -fnon-call-exceptions -fdollars-in-identifiers -Wswitch-enum -D_FILE_OFFSET_BITS=64 -Wextra -Wall -D_GNU_SOURCE -DPREFIX=\""/opt/gnu/gcc/gcc-4.2.0\"" -DLIBDIR=\""/opt/gnu/gcc/gcc-4.2.0/lib\"" -DJAVA_HOME=\""/opt/gnu/gcc/gcc-4.2.0\"" -DBOOT_CLASS_PATH=\""/opt/gnu/gcc/gcc-4.2.0/share/java/libgcj-4.2.0.jar\"" -DJAVA_EXT_DIRS=\""/opt/gnu/gcc/gcc-4.2.0/share/java/ext\"" -DGCJ_ENDORSED_DIRS=\""/opt/gnu/gcc/gcc-4.2.0/share/java/gcj-endorsed\"" -DGCJ_VERSIONED_LIBDIR=\""/opt/gnu/gcc/gcc-4.2.0/lib/gcj-4.2.0\"" -DPATH_SEPARATOR=\"":\"" -DLIBGCJ_DEFAULT_DATABASE=\""/opt/gnu/gcc/gcc-4.2.0/lib/gcj-4.2.0/classmap.db\"" -DLIBGCJ_DEFAULT_DATABASE_PATH_TAIL=\""gcj-4.2.0/classmap.db\"" -DTOOLEXECLIBDIR=\""/opt/gnu/gcc/gcc-4.2.0/lib\"" -g -O2 -MT prims.lo -MD -MP -MF .deps/prims.Tpo -c ../../../gcc/libjava/prims.cc  -fPIC -DPIC -o .libs/prims.o./java/lang/Thread.h:31: error: using typedef-name '_Jv_Thread_t' after 'class'./include/java-threads.h:28: error: '_Jv_Thread_t' has a previous declaration heremake[3]: *** [prims.lo] Error 1Thread.h:...class _Jv_JNIEnv;class _Jv_Thread_t;#define _JV_NOT_OWNER 1...java-threads.h:...typedef int _Jv_Mutex_t;typedef int _Jv_Thread_t;typedef void _Jv_ThreadStartFunc (java::lang::Thread *);...",RESOLVED          FIXED      
28226,Andreas Tobler,[4.2 Regression] posix.cc:222: error: invalid conversion from 'const void*' to 'void*',"/mnt/gnu/gcc/objdir/./gcc/xgcc -shared-libgcc -B/mnt/gnu/gcc/objdir/./gcc -nostdinc++ -L/mnt/gnu/gcc/objdir/hppa2.0w-hp-hpux11.11/libstdc++-v3/src -L/mnt/gnu/gcc/objdir/hppa2.0w-hp-hpux11.11/libstdc++-v3/src/.libs -B/opt/gnu/gcc/gcc-4.2.0/hppa2.0w-hp-hpux11.11/bin/ -B/opt/gnu/gcc/gcc-4.2.0/hppa2.0w-hp-hpux11.11/lib/ -isystem /opt/gnu/gcc/gcc-4.2.0/hppa2.0w-hp-hpux11.11/include -isystem /opt/gnu/gcc/gcc-4.2.0/hppa2.0w-hp-hpux11.11/sys-include -DHAVE_CONFIG_H -I. -I../../../gcc/libjava -I./include -I./gcj -I../../../gcc/libjava -Iinclude -I../../../gcc/libjava/include -I../../../gcc/libjava/classpath/include -Iclasspath/include -I../../../gcc/libjava/classpath/native/fdlibm -I../../../gcc/libjava/../boehm-gc/include -I../boehm-gc/include -I../../../gcc/libjava/libltdl -I../../../gcc/libjava/libltdl -I../../../gcc/libjava/.././libjava/../gcc -I../../../gcc/libjava/../zlib -I../../../gcc/libjava/../libffi/include -I../libffi/include -fno-rtti -fnon-call-exceptions -pthread -fdollars-in-identifiers -Wswitch-enum -D_FILE_OFFSET_BITS=64 -Wextra -Wall -D_GNU_SOURCE -DPREFIX=\""/opt/gnu/gcc/gcc-4.2.0\"" -DLIBDIR=\""/opt/gnu/gcc/gcc-4.2.0/lib\"" -DJAVA_HOME=\""/opt/gnu/gcc/gcc-4.2.0\"" ""-DBOOT_CLASS_PATH=\""/opt/gnu/gcc/gcc-4.2.0/share/java/libgcj-4.2.0.jar libgcj-tools-4.2.0.jar\"""" -DJAVA_EXT_DIRS=\""/opt/gnu/gcc/gcc-4.2.0/share/java/ext\"" -DGCJ_ENDORSED_DIRS=\""/opt/gnu/gcc/gcc-4.2.0/share/java/gcj-endorsed\"" -DGCJ_VERSIONED_LIBDIR=\""/opt/gnu/gcc/gcc-4.2.0/lib/gcj-4.2.0\"" -DPATH_SEPARATOR=\"":\"" -DLIBGCJ_DEFAULT_DATABASE=\""/opt/gnu/gcc/gcc-4.2.0/lib/gcj-4.2.0/classmap.db\"" -DLIBGCJ_DEFAULT_DATABASE_PATH_TAIL=\""gcj-4.2.0/classmap.db\"" -DTOOLEXECLIBDIR=\""/opt/gnu/gcc/gcc-4.2.0/lib\"" -g -O2 -MT posix.lo -MD -MP -MF .deps/posix.Tpo -c ../../../gcc/libjava/posix.cc  -fPIC -DPIC -o .libs/posix.o../../../gcc/libjava/posix.cc: In function 'int _Jv_platform_dladdr(const void*, _Jv_AddrInfo*)':../../../gcc/libjava/posix.cc:222: error: invalid conversion from 'const void*'to 'void*'../../../gcc/libjava/posix.cc:222: error:   initializing argument 1 of 'int dladdr(void*, Dl_info*)'make[3]: *** [posix.lo] Error 1",RESOLVED          FIXED      
27330,Andreas Tobler,natSystemProperties.cc:213: error: 'getpwuid_r' was not declared in this scope,"/mnt/gnu/gcc-3.3/objdir/./gcc/xgcc -shared-libgcc -B/mnt/gnu/gcc-3.3/objdir/./gcc -nostdinc++ -L/mnt/gnu/gcc-3.3/objdir/hppa2.0w-hp-hpux11.11/libstdc++-v3/src -L/mnt/gnu/gcc-3.3/objdir/hppa2.0w-hp-hpux11.11/libstdc++-v3/src/.libs -B/opt/gnu/gcc/gcc-4.2.0/hppa2.0w-hp-hpux11.11/bin/ -B/opt/gnu/gcc/gcc-4.2.0/hppa2.0w-hp-hpux11.11/lib/ -isystem /opt/gnu/gcc/gcc-4.2.0/hppa2.0w-hp-hpux11.11/include -isystem /opt/gnu/gcc/gcc-4.2.0/hppa2.0w-hp-hpux11.11/sys-include -DHAVE_CONFIG_H -I. -I../../../gcc/libjava -I./include -I./gcj -I../../../gcc/libjava -Iinclude -I../../../gcc/libjava/include -I../../../gcc/libjava/classpath/include -Iclasspath/include -I../../../gcc/libjava/classpath/native/fdlibm -I../../../gcc/libjava/../boehm-gc/include -I../boehm-gc/include -I../../../gcc/libjava/libltdl -I../../../gcc/libjava/libltdl -I../../../gcc/libjava/.././libjava/../gcc -I../../../gcc/libjava/../zlib -I../../../gcc/libjava/../libffi/include -I../libffi/include -fno-rtti -fnon-call-exceptions -fdollars-in-identifiers -Wswitch-enum -D_FILE_OFFSET_BITS=64 -Wextra -Wall -D_GNU_SOURCE -DPREFIX=\""/opt/gnu/gcc/gcc-4.2.0\"" -DLIBDIR=\""/opt/gnu/gcc/gcc-4.2.0/lib\"" -DJAVA_HOME=\""/opt/gnu/gcc/gcc-4.2.0\"" -DBOOT_CLASS_PATH=\""/opt/gnu/gcc/gcc-4.2.0/share/java/libgcj-4.2.0.jar\"" -DJAVA_EXT_DIRS=\""/opt/gnu/gcc/gcc-4.2.0/share/java/ext\"" -DGCJ_ENDORSED_DIRS=\""/opt/gnu/gcc/gcc-4.2.0/share/java/gcj-endorsed\"" -DLIBGCJ_DEFAULT_DATABASE=\""/opt/gnu/gcc/gcc-4.2.0/lib/gcj-4.2.0/classmap.db\"" -DLIBGCJ_DEFAULT_DATABASE_PATH_TAIL=\""gcj-4.2.0/classmap.db\"" -DTOOLEXECLIBDIR=\""/opt/gnu/gcc/gcc-4.2.0/lib\"" -g -O2 -MT gnu/classpath/natSystemProperties.lo -MD -MP -MF gnu/classpath/.deps/natSystemProperties.Tpo -c ../../../gcc/libjava/gnu/classpath/natSystemProperties.cc  -fPIC -DPIC -o gnu/classpath/.libs/natSystemProperties.o../../../gcc/libjava/gnu/classpath/natSystemProperties.cc: In static member function 'static void gnu::classpath::SystemProperties::insertSystemProperties(java::util::Properties*)':../../../gcc/libjava/gnu/classpath/natSystemProperties.cc:213: error: 'getpwuid_r' was not declared in this scopemake[3]: *** [gnu/classpath/natSystemProperties.lo] Error 1make[3]: Leaving directory `/mnt/gnu/gcc-3.3/objdir/hppa2.0w-hp-hpux11.11/libjava'",RESOLVED          FIXED      
9614,Andreas Tobler,libffi handles multiple floats wrong on powerpc-unkonwn-linux-gnu 3.2.x,"libffi handles multiple floats wrong in this release. 3.3 and up contain the fix already.A test case is available. See ffitest.c in branch-3.3 or head.P.S, didn't find the correct Category, so I entered libgcj since it uses libffi.Release:gcc version 3.2.3 20030207 (prerelease)Environment:powerpc-unknown-linux-gnuHow-To-Repeat:run the testcases from 3.3 libffi",RESOLVED          FIXED      
11411,Andreas Tobler,libffi testing problems,"Although libffi has a separate test program (libffi), this isn't currentlyrun during make check.  It has to be invoked manually (and may even need toset LD_LIBRARY_PATH so libgcc_s.so is found at runtime).  This isinconvenient and can easily lead to overlooking bugs in libffi.Environment:System: SunOS tikal 5.8 Generic_108528-19 sun4u sparc SUNW,Sun-Blade-1000Architecture: sun4	host: sparc-sun-solaris2.8build: sparc-sun-solaris2.8target: sparc-sun-solaris2.8configured with: /vol/gnu/src/gcc/gcc-dist/configure --prefix=/vol/gcc --with-local-prefix=/vol/gcc --disable-nlsHow-To-Repeat:Run make check in libffi.",RESOLVED          FIXED      
14931,Andreas Tobler,ASM file in GCC for PPC darwin should use the new stub style,All of the asm files in GCC's source that are for PPC darwin still uses the old style of a stub and should use the new style for speed and size reasons.  I will fix them in the next few weeks after I do some other stuff.,RESOLVED          FIXED      
52992,Andris Pavenis,Incorrect sprintf format in fixincludes/fixincl.c,"Created attachment 27158 [details]Fix for sprintf formatfixincludes/fixinc.c caontains incorrect format string for sprintf:sprintf (pz_scan, "" %ld '%s' '%s'"", (long) (p_fixd - fixDescList), 	pz_fix_file, pz_file_source, pz_temp_file);(3 paramaters in format, 4 in argumnent list)Noticed in 4.6.3 when djgpp_wchar_h fix failed to be executed.The same bug present also in current trunk.",RESOLVED          FIXED      
71681,Andris Pavenis,header.gcc file lookup is broken for -remap,"Looking up header.gcc files in sub-directories (for example in case of'#include <sys/stat.h>') is broken as directory separator is missing in generated file names.Added simple debugging output to static method remap_filename() in libcpp/files.c. Some examples illustrating missing directory separator from debug output are given below.remap_filename() finds header file in top directories of include search path but not in subdirectories in part of cases (one is getting new_dir='/usr/includesys/' where name should have been './usr/include/sys/')Test example foo.c:#include ""foo/bar/baz.h""#include <sys/stat.h>Used gcc version 7.0.0-20160628. Problem present also in several earlier GCC versions. Problem actually detected for DJGPP, but can easily be reproduced under Linux as done in this case)[andris@localhost test]$ ../xgcc -B ../ -c -remap foo.c remap_filename: fname='foo.c'remap_filename: fname='stdc-predef.h'remap_filename: fname='stdc-predef.h'remap_filename: fname='stdc-predef.h'remap_filename: fname='stdc-predef.h'remap_filename: fname='foo/bar/baz.h'remap_filename: new_dir='foo/'remap_filename: new_dir='foo/bar/'remap_filename: fname='sys/stat.h'remap_filename: new_dir='../includesys/'remap_filename: fname='sys/stat.h'remap_filename: new_dir='../include-fixedsys/'remap_filename: fname='sys/stat.h'remap_filename: new_dir='/usr/local/includesys/'remap_filename: fname='sys/stat.h'remap_filename: new_dir='/usr/includesys/'remap_filename: fname='features.h'remap_filename: fname='features.h'remap_filename: fname='features.h'remap_filename: fname='features.h'remap_filename: fname='sys/cdefs.h'remap_filename: new_dir='../includesys/'remap_filename: fname='sys/cdefs.h'remap_filename: new_dir='../include-fixedsys/'remap_filename: fname='sys/cdefs.h'",RESOLVED          FIXED      
83398,Alexandre Oliva,"[8 Regression] ICE: in try_ready, at haifa-sched.c:7524 with -O2 -fsched2-use-superblocks -g","Compiler output:$ x86_64-pc-linux-gnu-gcc -O2 -fsched2-use-superblocks -g testcase.c during RTL pass: sched2testcase.c: In function 'foo':testcase.c:16:1: internal compiler error: in try_ready, at haifa-sched.c:7524 } ^0x16a5e51 try_ready(rtx_insn*)        /repo/gcc-trunk/gcc/haifa-sched.c:75200x17273d3 init_ready_list        /repo/gcc-trunk/gcc/sched-ebb.c:1290x16a963e schedule_block(basic_block_def**, void*)        /repo/gcc-trunk/gcc/haifa-sched.c:65220x1727af0 schedule_ebb(rtx_insn*, rtx_insn*, bool)        /repo/gcc-trunk/gcc/sched-ebb.c:5370x17282b6 schedule_ebbs()        /repo/gcc-trunk/gcc/sched-ebb.c:6570xe0b254 rest_of_handle_sched2        /repo/gcc-trunk/gcc/sched-rgn.c:37350xe0b254 execute        /repo/gcc-trunk/gcc/sched-rgn.c:3873Please submit a full bug report,with preprocessed source if appropriate.Please include the complete backtrace with any bug report.See <https://gcc.gnu.org/bugs/> for instructions.$ x86_64-pc-linux-gnu-gcc -vUsing built-in specs.COLLECT_GCC=/repo/gcc-trunk/binary-trunk-255576-checking-yes-rtl-df-extra-nographite-amd64/bin/x86_64-pc-linux-gnu-gccCOLLECT_LTO_WRAPPER=/repo/gcc-trunk/binary-trunk-255576-checking-yes-rtl-df-extra-nographite-amd64/bin/../libexec/gcc/x86_64-pc-linux-gnu/8.0.0/lto-wrapperTarget: x86_64-pc-linux-gnuConfigured with: /repo/gcc-trunk//configure --enable-languages=c,c++ --enable-valgrind-annotations --disable-nls --enable-checking=yes,rtl,df,extra --without-cloog --without-ppl --without-isl --build=x86_64-pc-linux-gnu --host=x86_64-pc-linux-gnu --target=x86_64-pc-linux-gnu --with-ld=/usr/bin/x86_64-pc-linux-gnu-ld --with-as=/usr/bin/x86_64-pc-linux-gnu-as --disable-libstdcxx-pch --prefix=/repo/gcc-trunk//binary-trunk-255576-checking-yes-rtl-df-extra-nographite-amd64Thread model: posixgcc version 8.0.0 20171212 (experimental) (GCC) Tested revisions:r255581 - FAILr255576 - FAILr255554 - OK",RESOLVED          FIXED      
83396,Alexandre Oliva,[8 Regression] Bootstrap failures with Statement Frontiers,"$ make gimple-pretty-print.o/edelsohn/GCC/./prev-gcc/xg++ -B/edelsohn/GCC/./prev-gcc/ -B/usr/local/powerpc-ibm-aix7.2.0.0/bin/ -nostdinc++ -B/edelsohn/GCC/prev-powerpc-ibm-aix7.2.0.0/libstdc++-v3/src/.libs -B/edelsohn/GCC/prev-powerpc-ibm-aix7.2.0.0/libstdc++-v3/libsupc++/.libs  -I/edelsohn/GCC/prev-powerpc-ibm-aix7.2.0.0/libstdc++-v3/include/powerpc-ibm-aix7.2.0.0  -I/edelsohn/GCC/prev-powerpc-ibm-aix7.2.0.0/libstdc++-v3/include  -I/nasfarm/edelsohn/src/sandbox/libstdc++-v3/libsupc++ -L/edelsohn/GCC/prev-powerpc-ibm-aix7.2.0.0/libstdc++-v3/src/.libs -L/edelsohn/GCC/prev-powerpc-ibm-aix7.2.0.0/libstdc++-v3/libsupc++/.libs -fno-PIE -c   -g -O2 -DIN_GCC     -fno-exceptions -fno-rtti -fasynchronous-unwind-tables -W -Wall -Wno-narrowing -Wwrite-strings -Wcast-qual -Wmissing-format-attribute -Woverloaded-virtual -pedantic -Wno-long-long -Wno-variadic-macros -Wno-overlength-strings -fno-common  -DHAVE_CONFIG_H -I. -I. -I/nasfarm/edelsohn/src/sandbox/gcc -I/nasfarm/edelsohn/src/sandbox/gcc/. -I/nasfarm/edelsohn/src/sandbox/gcc/../include -I./../intl -I/nasfarm/edelsohn/src/sandbox/gcc/../libcpp/include -I/gsa/yktgsa/home/e/d/edelsohn/install/include  -I/nasfarm/edelsohn/src/sandbox/gcc/../libdecnumber -I/nasfarm/edelsohn/src/sandbox/gcc/../libdecnumber/dpd -I../libdecnumber -I/nasfarm/edelsohn/src/sandbox/gcc/../libbacktrace -I/gsa/yktgsa/home/e/d/edelsohn/install/include -I/gsa/yktgsa/home/e/d/edelsohn/install/include -o gimple-pretty-print.o -MT gimple-pretty-print.o -MMD -MP -MF ./.deps/gimple-pretty-print.TPo /nasfarm/edelsohn/src/sandbox/gcc/gimple-pretty-print.c/nasfarm/edelsohn/src/sandbox/gcc/gimple-pretty-print.c: In function 'void pp_gimple_stmt_1(pretty_printer*, gimple*, int, dump_flags_t)':/nasfarm/edelsohn/src/sandbox/gcc/gimple-pretty-print.c:2645:1: error: invalid rtl sharing found in the insn } ^(debug_insn 5082 5081 5083 (var_location:DI flags (concatn/v:DI [            (reg:SI 1564 [ flags ])            (reg:SI 1565 [ flags+4 ])        ])) ""/nasfarm/edelsohn/src/sandbox/gcc/gimple-pretty-print.c"":2583 -1     (nil))/nasfarm/edelsohn/src/sandbox/gcc/gimple-pretty-print.c:2645:1: error: shared rtx(concatn/v:DI [        (reg:SI 1564 [ flags ])        (reg:SI 1565 [ flags+4 ])    ])during RTL pass: outof_cfglayout/nasfarm/edelsohn/src/sandbox/gcc/gimple-pretty-print.c:2645:1: internal compiler error: internal consistency failurePlease submit a full bug report,with preprocessed source if appropriate.See <https://gcc.gnu.org/bugs/> for instructions.make: *** [Makefile:1110: gimple-pretty-print.o] Error 1",RESOLVED          FIXED      
83422,Alexandre Oliva,"[8 Regression] ICE: in final_scan_insn, at final.c:2429 after ""variable tracking size limit exceeded with -fvar-tracking-assignments, retrying without""","Created attachment 42880 [details]reduced testcaseCompiler output:$ x86_64-pc-linux-gnu-gcc -O -g --param=max-vartrack-size=1 testcase.ctestcase.c: In function 'foo':testcase.c:2:1: note: variable tracking size limit exceeded with -fvar-tracking-assignments, retrying without foo(int i, int j, int k) ^~~during RTL pass: finaltestcase.c:5:1: internal compiler error: in final_scan_insn, at final.c:2429 } ^0x9a1102 final_scan_insn(rtx_insn*, _IO_FILE*, int, int, int*)        /repo/gcc-trunk/gcc/final.c:24290x9a1531 final(rtx_insn*, _IO_FILE*, int)        /repo/gcc-trunk/gcc/final.c:20640x9a1f61 rest_of_handle_final        /repo/gcc-trunk/gcc/final.c:45510x9a1f61 execute        /repo/gcc-trunk/gcc/final.c:4625Please submit a full bug report,with preprocessed source if appropriate.Please include the complete backtrace with any bug report.See <https://gcc.gnu.org/bugs/> for instructions.$ x86_64-pc-linux-gnu-gcc -vUsing built-in specs.COLLECT_GCC=/repo/gcc-trunk/binary-trunk-255606-checking-yes-rtl-df-extra-nographite-amd64/bin/x86_64-pc-linux-gnu-gccCOLLECT_LTO_WRAPPER=/repo/gcc-trunk/binary-trunk-255606-checking-yes-rtl-df-extra-nographite-amd64/bin/../libexec/gcc/x86_64-pc-linux-gnu/8.0.0/lto-wrapperTarget: x86_64-pc-linux-gnuConfigured with: /repo/gcc-trunk//configure --enable-languages=c,c++ --enable-valgrind-annotations --disable-nls --enable-checking=yes,rtl,df,extra --without-cloog --without-ppl --without-isl --build=x86_64-pc-linux-gnu --host=x86_64-pc-linux-gnu --target=x86_64-pc-linux-gnu --with-ld=/usr/bin/x86_64-pc-linux-gnu-ld --with-as=/usr/bin/x86_64-pc-linux-gnu-as --disable-libstdcxx-pch --prefix=/repo/gcc-trunk//binary-trunk-255606-checking-yes-rtl-df-extra-nographite-amd64Thread model: posixgcc version 8.0.0 20171213 (experimental) (GCC) Tested revisions:r255624 - FAILr255606 - FAILr255576 - FAILr255554 - OK",RESOLVED          FIXED      
81165,Alexandre Oliva,[8 Regression] Regression in GCC-8.0.0's optimizer,"We compiled the following program by GCC-8.0.0 and GCC-7.0.1 with -O3 option.GCC-7.0.1 performed better optimization than GCC-8.0.0.$ cat test.cvoid func() __attribute__((noinline));short x0 = 15;int main (void){  long i;  for(i = 0; i < 100000000; i++){    func();  }  return 0;}void func (){  volatile int x1 = 1U;  volatile char x2 = 0;  char t0 = 0;  unsigned long t1 = 2LU;  int i = 0;    if(1>>x2) {    t0 = -1;    t1 = (1&(short)(x1^8U))-1;  }  while(i > (int)((1U>>t1)+(char)(128%(10*(25LU&(29%x0)))))) {    i += (int)(12L/(1!=(int)t1));  }  if (t0 != -1) __builtin_abort();  if (t1 != 0L) __builtin_abort();}$ gcc-8.0 test.c -O3 -o test.out && time ./test.out  ./test.out  1.50s user 0.00s system 99% cpu 1.506 total$ gcc-7.0.1 test.c -O3 -o test.out && time ./test.out./test.out  0.26s user 0.00s system 98% cpu 0.264 total+-------------------------------------+---------------------------------------+|gcc-8.0.s    (gcc-8.0 test.c -O3 -S) |gcc-7.0.1.s  (gcc-7.0.1 test.c -O3 -S) |+-------------------------------------+---------------------------------------+|         .cfi_startproc              |          .cfi_startproc               |   |         subq     $24, %rsp          |          subq      $24, %rsp          |  |         .cfi_def_cfa_offset 32      |          .cfi_def_cfa_offset 32       |   |         movl     $1, %edi           |          movl      $1, %eax           |   |         movl     $1, 12(%rsp)       |          movl      $1, 12(%rsp)       |   |         movb     $0, 11(%rsp)       |          movb      $0, 11(%rsp)       |   |         movl     %edi, %eax         |                                       ||         movzbl     11(%rsp), %ecx   |          movzbl  11(%rsp), %ecx       ||         sarl     %cl, %eax          |          sarl      %cl, %eax          ||         testl     %eax, %eax        |          testl      %eax, %eax        ||         je         .L7              |          jne      .L12                ||         movl     12(%rsp), %ecx     |                                       ||         movl     $-1, %r9d          |                                       ||         andl     $1, %ecx           |                                       ||         subl     $1, %ecx           |                                       ||         movslq     %ecx, %r8        |                                       ||         shrl     %cl, %edi          |                                       ||.L2:                                 |.L2:                                   ||         movswl     x0(%rip), %esi   |          call      abort              ||         movl     $29, %eax          |          .p2align 4,,10               ||         cltd                        |          .p2align 3                   ||         idivl     %esi              |.L12:                                  ||         movl     $128, %eax         |          movl      12(%rsp), %eax     ||         andl     $25, %edx          |          andl      $1, %eax           ||         leaq     (%rdx,%rdx,4), %rsi|          subl      $1, %eax           ||         xorl     %edx, %edx         |          testl      %eax, %eax        ||         addq     %rsi, %rsi         |          jne      .L2                 ||         divq     %rsi               |                                       ||         movsbl     %dl, %edx        |                                       | |         addl     %edi, %edx         |                                       ||         jns     .L3                 |                                       | |         cmpl     $1, %ecx           |                                       ||         je         .L10             |                                       ||.L3:                                 |                                       ||         cmpb     $-1, %r9b          |                                       ||         jne     .L6                 |                                       ||         testq     %r8, %r8          |                                       ||         jne     .L6                 |                                       ||         addq     $24, %rsp          |          addq      $24, %rsp          ||         .cfi_remember_state         |                                       ||         .cfi_def_cfa_offset 8       |          .cfi_def_cfa_offset 8        ||         ret                         |          ret                          ||         .p2align 4,,10              |                                       ||         .p2align 3                  |                                       ||.L10:                                |                                       ||         .cfi_restore_state          |                                       ||         ud2                         |                                       ||         .p2align 4,,10              |                                       ||         .p2align 3                  |                                       ||.L7:                                 |                                       ||         movl     $2, %ecx           |                                       ||         xorl     %edi, %edi         |                                       ||         movl     $2, %r8d           |                                       ||         xorl     %r9d, %r9d         |                                       ||         jmp     .L2                 |                                       ||         .cfi_endproc                |          .cfi_endproc                 ||         .section         .text.un...|                                       ||         .cfi_startproc              |                                       |    |         .type     func.cold.0, @f...|                                       |    |func.cold.0:                         |                                       |    |.L6:                                 |                                       |    |         .cfi_def_cfa_offset 32      |                                       |    |         call     abort              |                                       |    |         .cfi_endproc                |                                       |    |.LFE1:                               |.LFE1:                                 |    |         .text                       |                                       |    |         .size     func, .-func      |          .size      func, .-func      ||         .section         .text.un...|                                       ||         .size     func.cold.0, .-...|                                       ||.LCOLDE0:                            |                                       ||         .text                       |                                       ||.LHOTE0:                             |                                       ||         .section         .text.st...|          .section          .text.st...||         .p2align 4,,15              |          .p2align 4,,15               ||         .globl     main             |          .globl  main                 |+-------------------------------------+---------------------------------------+|         movl     $100000000, %ebx   |          movl      $100000000, %ebx   ||         .p2align 4,,10              |          .p2align 4,,10               ||         .p2align 3                  |          .p2align 3                   ||.L12:                                |.L14:                                  ||         xorl     %eax, %eax         |          xorl      %eax, %eax         ||         call     func               |          call      func               ||         subq     $1, %rbx           |          subq      $1, %rbx           ||         jne     .L12                |          jne      .L14                ||         xorl     %eax, %eax         |          xorl      %eax, %eax         ||         popq     %rbx               |          popq      %rbx               ||         .cfi_def_cfa_offset 8       |          .cfi_def_cfa_offset 8        |+-------------------------------------+---------------------------------------+|         .size     x0, 2             |          .size      x0, 2             ||x0:                                  |x0:                                    ||         .value     15               |          .value  15                   ||         .ident     ""GCC: (GNU) 8....|          .ident  ""GCC: (GNU) 7.0.1 ...||         .section         .note.GN...|          .section          .note.GN...|+-------------------------------------+---------------------------------------+$ gcc-8.0 -vusing built-in specs.COLLECT_GCC=gcc-8.0COLLECT_LTO_WRAPPER=/home/kota/opt/gcc-8.0/libexec/gcc/x86_64-pc-linux-gnu/8.0.0/lto-wrappertarget: x86_64-pc-linux-gnuconfigure woth: ../gcc/configure --prefix=/home/kota/opt/gcc --program-suffix=-8.0 --disable-multilib --enable-languages=cthred model: posixgcc version 8.0.0 20170621 (experimental) (GCC)  $ gcc-7.0.1 -vusing built-in specs.COLLECT_GCC=gcc-7.0.1COLLECT_LTO_WRAPPER=/home/kota/opt/gcc-7.0.1/libexec/gcc/x86_64-pc-linux-gnu/7.0.1/lto-wrappertarget: x86_64-pc-linux-gnuconfigure woth: ../gcc/configure --prefix=/home/kota/opt/gcc --program-suffix=-7.0.1 --disable-multilib --enable-languages=cthred model: posixgcc version 7.0.1 20170216 (experimental) (GCC)",RESOLVED          FIXED      
82144,Alexandre Oliva,[8 Regression] ICE in add_dwarf_attr with alignas,"From the C++ testsuite, source code file ./g++.dg/cpp0x/alignas7.Cwon't compile when -g is used.$ ~/gcc/results/bin/gcc -g ./g++.dg/cpp0x/alignas7.C./g++.dg/cpp0x/alignas7.C: In instantiation of ‘struct A<8, char>’:./g++.dg/cpp0x/alignas7.C:13:1:   required from here./g++.dg/cpp0x/alignas7.C:7:24: internal compiler error: in add_dwarf_attr, at dwarf2out.c:4132   enum alignas (N) E : T;                        ^0xa1ff0e add_dwarf_attr	../../trunk/gcc/dwarf2out.c:41320xa1ff88 add_AT_unsigned	../../trunk/gcc/dwarf2out.c:42150xa1ff88 add_alignment_attribute	../../trunk/gcc/dwarf2out.c:201970xa571b7 gen_enumeration_type_die	../../trunk/gcc/dwarf2out.c:21261$ ~/gcc/results/bin/gcc -vUsing built-in specs.COLLECT_GCC=/home/dcb/gcc/results/bin/gccCOLLECT_LTO_WRAPPER=/home/dcb/gcc/results.251861/libexec/gcc/x86_64-pc-linux-gnu/8.0.0/lto-wrapperTarget: x86_64-pc-linux-gnuConfigured with: ../trunk/configure --prefix=/home/dcb/gcc/results.251861 --disable-bootstrap --disable-multilib --disable-werror --enable-checking=df,extra,fold,rtl,yes --enable-languages=c,c++,fortranThread model: posixgcc version 8.0.0 20170908 (experimental) (GCC) The bug seems to occur between revisions 251689 and 251751",RESOLVED          FIXED      
80025,Alexandre Oliva,"[5/6 Regression] ICE w/ -O2 (-O3, -Ofast) -g -ftracer (infinite recursion in rtx_equal_for_cselib_1)","gcc 5, 6, and the current trunk (the gcc-7.0.0-alpha20170312 snapshot) all ICE when compiling the following snippet w/ -O2 (or -O3, -Ofast) -g -ftracer due to infinite recursion in rtx_equal_for_cselib_1:int kq;long int cs, l3;long intgn (void){}voidyc (int un, short int z6, unsigned short int il){  (void)un;  (void)z6;  (void)il;}intw6 (void){  kq -= cs;  cs = !gn ();  yc (cs ^= (l3 ^ 1) ? (l3 ^ 1) : gn (), &yc, kq);}% x86_64-pc-linux-gnu-gcc-7.0.0-alpha20170312 -O2 -g -ftracer -w -c bxvehker.cx86_64-pc-linux-gnu-gcc-7.0.0-alpha20170312: internal compiler error: Segmentation fault (program cc1)Reduced backtrace:Program received signal SIGSEGV, Segmentation fault.0x00000000007682e2 in rtx_equal_for_cselib_1(rtx_def*, rtx_def*, machine_mode) ()(gdb) where 10#0  0x00000000007682e2 in rtx_equal_for_cselib_1(rtx_def*, rtx_def*, machine_mode) ()#1  0x0000000000768523 in rtx_equal_for_cselib_1(rtx_def*, rtx_def*, machine_mode) ()#2  0x00000000007688f0 in rtx_equal_for_cselib_1(rtx_def*, rtx_def*, machine_mode) ()#3  0x00000000007684ab in rtx_equal_for_cselib_1(rtx_def*, rtx_def*, machine_mode) ()#4  0x00000000007686ba in rtx_equal_for_cselib_1(rtx_def*, rtx_def*, machine_mode) ()#5  0x0000000000768523 in rtx_equal_for_cselib_1(rtx_def*, rtx_def*, machine_mode) ()#6  0x00000000007686ba in rtx_equal_for_cselib_1(rtx_def*, rtx_def*, machine_mode) ()#7  0x00000000007684ab in rtx_equal_for_cselib_1(rtx_def*, rtx_def*, machine_mode) ()#8  0x00000000007686ba in rtx_equal_for_cselib_1(rtx_def*, rtx_def*, machine_mode) ()#9  0x0000000000768523 in rtx_equal_for_cselib_1(rtx_def*, rtx_def*, machine_mode) ()(More stack frames follow...)(gdb) where -25#599034 0x00000000007684ab in rtx_equal_for_cselib_1(rtx_def*, rtx_def*, machine_mode) ()#599035 0x00000000007686ba in rtx_equal_for_cselib_1(rtx_def*, rtx_def*, machine_mode) ()#599036 0x0000000000768523 in rtx_equal_for_cselib_1(rtx_def*, rtx_def*, machine_mode) ()#599037 0x000000000076bbbe in hash_table<cselib_hasher, xcallocator>::find_slot_with_hash(cselib_hasher::key* const&, unsigned int, insert_option) ()#599038 0x0000000000764c39 in cselib_find_slot(machine_mode, rtx_def*, unsigned int, insert_option, machine_mode) ()#599039 0x0000000000764ced in cselib_lookup(rtx_def*, machine_mode, int, machine_mode) ()#599040 0x0000000000768fae in cselib_add_permanent_equiv(cselib_val*, rtx_def*, rtx_insn*) ()#599041 0x0000000000e533ae in add_stores(rtx_def*, rtx_def const*, void*) ()#599042 0x0000000000afafc1 in note_stores(rtx_def const*, void (*)(rtx_def*, rtx_def const*, void*), void*) ()#599043 0x0000000000e4d88b in add_with_sets(rtx_insn*, cselib_set*, int) ()#599044 0x0000000000769924 in cselib_record_sets(rtx_insn*) ()#599045 0x000000000076b02f in cselib_process_insn(rtx_insn*) ()#599046 0x0000000000e6102a in vt_initialize() ()#599047 0x0000000000e635f3 in (anonymous namespace)::pass_variable_tracking::execute(function*) ()#599048 0x0000000000a88001 in execute_one_pass(opt_pass*) ()#599049 0x0000000000a888d1 in execute_pass_list_1(opt_pass*) ()#599050 0x0000000000a888e3 in execute_pass_list_1(opt_pass*) ()#599051 0x0000000000a888e3 in execute_pass_list_1(opt_pass*) ()#599052 0x0000000000a88925 in execute_pass_list(function*, opt_pass*) ()#599053 0x000000000074dc53 in cgraph_node::expand() ()#599054 0x000000000074f37a in symbol_table::compile() [clone .part.51] ()#599055 0x0000000000751a87 in symbol_table::finalize_compilation_unit() ()#599056 0x0000000000b664a5 in compile_file() ()#599057 0x00000000005a5e67 in toplev::main(int, char**) ()#599058 0x00000000005a820b in main ()",RESOLVED          FIXED      
63238,Alexandre Oliva,DWARF does not represent _Alignas,"C11 has the _Alignas specifier, but it isn't emittedin DWARF.The proposal is here:https://www.mail-archive.com/dwarf-discuss@lists.dwarfstd.org/msg00159.html",RESOLVED          FIXED      
56974,Alexandre Oliva,c++ ref qualifiers not represented in DWARF,"C++11 added ref qualifiers for methods like ""&"" and ""&&"".As far as I can tell these are not present in the debuginfo.I think they ought to be represented somehow; otherwisegdb can't implement overloading properly.",RESOLVED          FIXED      
55641,Alexandre Oliva,debug info for the type of a reference declared with a typedef has spurious 'const',"Example code:  typedef int &foo;  int x;  foo f(x);under gdb run ""whatis f"" and the answer is ""const foo"" when it should be plain ""foo"" (if you skip the typedef the answer is correctly ""int&"" not ""int& const"" or any similarly strange mismatch)Found in the GDB 7.5 test suite ( gdb.python/lib-types.exp ) - this is positively tested for, but so far as I can imagine that's by accident, not intent.",RESOLVED          FIXED      
63240,Alexandre Oliva,DWARF does not represent C++ defaulted methods,"Similarly to PR63239, DWARF does not seem to represent C++ defaulted methods.struct A{   int i;  A() = default;};Not sure whether that is really an issue, might be just an implementation detail.",RESOLVED          FIXED      
69634,Alexandre Oliva,[4.9 Regression] -fcompare-debug failure (length) with -O2 -fno-dce -fschedule-insns -fno-tree-vrp @ i686,"Created attachment 37560 [details]reduced testcaseCompiler output:$ i686-pc-linux-gnu-gcc -O2 -fno-dce -fschedule-insns -fno-tree-vrp -fcompare-debug testcase.c            testcase.c: In function 'foo':testcase.c:7:1: note: The ABI for passing parameters with 16-byte alignment has changed in GCC 4.6 foo(u16 u16_1, v16u16 v16u16_0, v16u32 v16u64_0, v16u16 v16u16_1, v16u32 v16u32_1, v16u64 v16u64_1) ^~~testcase.c:7:1: warning: SSE vector argument without SSE enabled changes the ABI [-Wpsabi]i686-pc-linux-gnu-gcc: error: testcase.c: -fcompare-debug failure (length)$ i686-pc-linux-gnu-gcc -vUsing built-in specs.COLLECT_GCC=/repo/gcc-trunk/binary-latest-i686/bin/i686-pc-linux-gnu-gccCOLLECT_LTO_WRAPPER=/repo/gcc-trunk/binary-trunk-233042-checking-yes-rtl-df-nographite-i686/bin/../libexec/gcc/i686-pc-linux-gnu/6.0.0/lto-wrapperTarget: i686-pc-linux-gnuConfigured with: /repo/gcc-trunk//configure --enable-languages=c,c++ --enable-checking=yes,rtl,df --without-cloog --without-ppl --without-isl --build=x86_64-pc-linux-gnu --host=x86_64-pc-linux-gnu --target=i686-pc-linux-gnu --with-ld=/usr/bin/i686-pc-linux-gnu-ld --with-as=/usr/bin/i686-pc-linux-gnu-as --with-sysroot=/usr/i686-pc-linux-gnu --disable-libstdcxx-pch --prefix=/repo/gcc-trunk//binary-trunk-233042-checking-yes-rtl-df-nographite-i686Thread model: posixgcc version 6.0.0 20160201 (experimental) (GCC) Tested revisions:r233042 - FAIL5-branch r233031 - OK",RESOLVED          FIXED      
69315,Alexandre Oliva,[6 Regression] ICE in finish_function with constexpr and templates,"Created attachment 37373 [details]reduced test case (27 lines)The attached reduced test case fails with an ICE in finish_functionwith current GCC.G++ gcc version 5.3.1 20160101 (Debian 5.3.1-5) works fine.  GNU C++11 (GCC) version 6.0.0 20160116 (experimental) (x86_64-pc-linux-gnu)        compiled by GNU C version 6.0.0 20160116 (experimental), GMP version 6.0.0, MPFR version 3.1.3-p5, MPC version 1.0.2, isl version noneGGC heuristics: --param ggc-min-expand=100 --param ggc-min-heapsize=131072GNU C++11 (GCC) version 6.0.0 20160116 (experimental) (x86_64-pc-linux-gnu)        compiled by GNU C version 6.0.0 20160116 (experimental), GMP version 6.0.0, MPFR version 3.1.3-p5, MPC version 1.0.2, isl version noneGGC heuristics: --param ggc-min-expand=100 --param ggc-min-heapsize=131072Compiler executable checksum: 902ad622abb081912322ce9873f62a84iter.C.i: In instantiation of ‘constexpr bool operator==(Iter<C1>, Iter<C2>) [with bool C1 = true; bool C2 = true; bool <anonymous> = true]’:iter.C.i:27:1:   required from ‘constexpr bool operator!=(Iter<C1>, Iter<C2>) [with bool C1 = true; bool C2 = true; bool <anonymous> = true]’iter.C.i:16:18:   required from hereiter.C.i:23:1: internal compiler error: in finish_function, at cp/decl.c:14508",RESOLVED          FIXED      
64164,Alexandre Oliva,[4.9/5/6 Regression] one more stack slot used due to one less inlining level,"Created attachment 34178 [details]testcase$ cc -O2 -S -o stm.s stm.c$ cc -O2 -DOPT -S -o stm-opt.s stm.cif you compare the 2 outputs, stm_load function is using one more slot on the stack.The difference is only this:static inline size_tAO_myload2(const volatile size_t *addr){  return *(size_t *)addr;}static inline size_tAO_myload(const volatile size_t *addr){#ifdef OPT  size_t result = AO_myload2(addr);#else  size_t result = *(size_t *)addr;#endif  return result;}Having one more inlined function should have the same optimization not a better one.4.8 does not have the problem and the code generated is the same.",RESOLVED          FIXED      
51570,Alexandre Oliva,[4.7 Regression] FAIL: gcc.dg/guality/pr45003-[23].c,I see the following FAILs with the most recent gdb installed (7.3):FAIL: gcc.dg/guality/pr45003-2.c  -O1  line 10 a == 0x8078FAIL: gcc.dg/guality/pr45003-2.c  -O1  line 19 a == 0xffff8078FAIL: gcc.dg/guality/pr45003-2.c  -O2  line 10 a == 0x8078FAIL: gcc.dg/guality/pr45003-2.c  -O2  line 19 a == 0xffff8078FAIL: gcc.dg/guality/pr45003-2.c  -O3 -fomit-frame-pointer  line 10 a == 0x8078FAIL: gcc.dg/guality/pr45003-2.c  -O3 -fomit-frame-pointer  line 19 a == 0xffff8078FAIL: gcc.dg/guality/pr45003-2.c  -O3 -g  line 10 a == 0x8078FAIL: gcc.dg/guality/pr45003-2.c  -O3 -g  line 19 a == 0xffff8078FAIL: gcc.dg/guality/pr45003-2.c  -Os  line 10 a == 0x8078FAIL: gcc.dg/guality/pr45003-2.c  -Os  line 19 a == 0xffff8078FAIL: gcc.dg/guality/pr45003-2.c  -O2 -flto -fno-use-linker-plugin -flto-partition=none  line 10 a == 0x8078FAIL: gcc.dg/guality/pr45003-2.c  -O2 -flto -fno-use-linker-plugin -flto-partition=none  line 19 a == 0xffff8078FAIL: gcc.dg/guality/pr45003-2.c  -O2 -flto -fuse-linker-plugin -fno-fat-lto-objects  line 10 a == 0x8078FAIL: gcc.dg/guality/pr45003-2.c  -O2 -flto -fuse-linker-plugin -fno-fat-lto-objects  line 19 a == 0xffff8078FAIL: gcc.dg/guality/pr45003-3.c  -O1  line 10 a == -32648FAIL: gcc.dg/guality/pr45003-3.c  -O1  line 19 a == 0x8078FAIL: gcc.dg/guality/pr45003-3.c  -O2  line 10 a == -32648FAIL: gcc.dg/guality/pr45003-3.c  -O2  line 19 a == 0x8078FAIL: gcc.dg/guality/pr45003-3.c  -O3 -fomit-frame-pointer  line 10 a == -32648FAIL: gcc.dg/guality/pr45003-3.c  -O3 -fomit-frame-pointer  line 19 a == 0x8078FAIL: gcc.dg/guality/pr45003-3.c  -O3 -g  line 10 a == -32648FAIL: gcc.dg/guality/pr45003-3.c  -O3 -g  line 19 a == 0x8078FAIL: gcc.dg/guality/pr45003-3.c  -Os  line 10 a == -32648FAIL: gcc.dg/guality/pr45003-3.c  -Os  line 19 a == 0x8078FAIL: gcc.dg/guality/pr45003-3.c  -O2 -flto -fno-use-linker-plugin -flto-partition=none  line 10 a == -32648FAIL: gcc.dg/guality/pr45003-3.c  -O2 -flto -fno-use-linker-plugin -flto-partition=none  line 19 a == 0x8078FAIL: gcc.dg/guality/pr45003-3.c  -O2 -flto -fuse-linker-plugin -fno-fat-lto-objects  line 10 a == -32648FAIL: gcc.dg/guality/pr45003-3.c  -O2 -flto -fuse-linker-plugin -fno-fat-lto-objects  line 19 a == 0x8078they pass for the -m32 multilib though.  No other gdb version tested.,RESOLVED          FIXED      
69466,Alexandre Oliva,[6 Regression] ICE: Invalid PHI argument after vectorization (on -O2),"I've got ICE while compiling attached testcase:$ ./build-x86_64-linux/gcc/gfortran -B./build-x86_64-linux/gcc -S -O2 -ffast-math -static -save-temps=obj -dp -ftree-\vectorize -v -march=core-avx2 -m64 -fconvert=big-endian 1.f90Reading specs from ./build-x86_64-linux/gcc/specsCOLLECT_GCC=./build-x86_64-linux/gcc/gfortranTarget: x86_64-pc-linux-gnuConfigured with: /export/users/kyukhin/gcc/git/gcc2/configure --enable-languages=c,c++,fortran --disable-bootstrap --\disable-libsanitizer --with-as=/gnumnt/msticlxl57_users/kyukhin/binutils/release/bin/as --with-fpmath=sseThread model: posixgcc version 6.0.0 20160125 (experimental) (GCC)COLLECT_GCC_OPTIONS='-B' './build-x86_64-linux/gcc' '-S' '-O2' '-ffast-math' '-static' '-save-temps=obj' '-dp' '-ftre\e-vectorize' '-v' '-march=core-avx2' '-m64' '-fconvert=big-endian' ./build-x86_64-linux/gcc/f951 1.f90 -quiet -dumpbase 1.f90 -dp -march=core-avx2 -m64 -auxbase 1 -O2 -version -ffast-\math -ftree-vectorize -fconvert=big-endian -o 1.s -fintrinsic-modules-path fincludeGNU Fortran (GCC) version 6.0.0 20160125 (experimental) (x86_64-pc-linux-gnu)        compiled by GNU C version 5.1.1 20150618 (Red Hat 5.1.1-4), GMP version 6.0.0, MPFR version 3.1.2, MPC versio\n 1.0.2, isl version noneGGC heuristics: --param ggc-min-expand=30 --param ggc-min-heapsize=4096GNU Fortran2008 (GCC) version 6.0.0 20160125 (experimental) (x86_64-pc-linux-gnu)        compiled by GNU C version 5.1.1 20150618 (Red Hat 5.1.1-4), GMP version 6.0.0, MPFR version 3.1.2, MPC versio\n 1.0.2, isl version noneGGC heuristics: --param ggc-min-expand=30 --param ggc-min-heapsize=40961.f90:2:0:  subroutine fooError: invalid PHI argumente.22_1531.f90:2:0: Error: incompatible types in PHI argument 0voidinteger(kind=4).MEM_176 = PHI <e.22_153(18)>1.f90:2:0: Error: invalid PHI argumentvect_e.51_2081.f90:2:0: Error: incompatible types in PHI argument 1voidinteger(kind=4).MEM_175 = PHI <.MEM_176(28), vect_e.51_208(20)>1.f90:2:0: internal compiler error: verify_gimple failed0xbbd316 verify_gimple_in_cfg(function*, bool)        /export/users/kyukhin/gcc/git/gcc2/gcc/tree-cfg.c:51250xab23f7 execute_function_todo        /export/users/kyukhin/gcc/git/gcc2/gcc/passes.c:19580xab2cfb execute_todo        /export/users/kyukhin/gcc/git/gcc2/gcc/passes.c:2010Please submit a full bug report,with preprocessed source if appropriate.Please include the complete backtrace with any bug report.See <http://gcc.gnu.org/bugs.html> for instructions.Looks like vectorizer issue. w/o -tree-vectorize it compiles.",RESOLVED          FIXED      
67355,Alexandre Oliva,"[5 Regression] ICE compiling LTP testcase, endless cselib recursion from var-tracking","Created attachment 36256 [details]testcase> gcc-5 -S -O2 -D_FORTIFY_SOURCE=2 -fstack-protector -funwind-tables -fasynchronous-unwind-tables atof01.c -m32 -g -B /abuild/rguenther/gcc5-g/gcc -v Reading specs from /abuild/rguenther/gcc5-g/gcc/specsCOLLECT_GCC=gcc-5Target: x86_64-suse-linuxConfigured with: ../configure --prefix=/usr --infodir=/usr/share/info --mandir=/usr/share/man --libdir=/usr/lib64 --libexecdir=/usr/lib64 --enable-languages=c,c++,objc,fortran,obj-c++,java,ada,go --enable-checking=release --with-gxx-include-dir=/usr/include/c++/5 --enable-ssp --disable-libssp --disable-libvtv --enable-libmpx --disable-plugin --with-bugurl=http://bugs.opensuse.org/ --with-pkgversion='SUSE Linux' --disable-libgcj --with-slibdir=/lib64 --with-system-zlib --enable-__cxa_atexit --enable-libstdcxx-allocator=new --disable-libstdcxx-pch --with-default-libstdcxx-abi=gcc4-compatible --enable-version-specific-runtime-libs --enable-linker-build-id --enable-linux-futex --program-suffix=-5 --without-system-libunwind --enable-multilib --with-arch-32=i586 --with-tune=generic --build=x86_64-suse-linux --host=x86_64-suse-linuxThread model: posixgcc version 5.1.1 20150707 [gcc-5-branch revision 225501] (SUSE Linux) COLLECT_GCC_OPTIONS='-S' '-O2' '-D' '_FORTIFY_SOURCE=2' '-fstack-protector' '-funwind-tables' '-fasynchronous-unwind-tables' '-m32' '-g' '-B' '/abuild/rguenther/gcc5-g/gcc' '-v' '-mtune=generic' '-march=i586' /abuild/rguenther/gcc5-g/gcc/cc1 -quiet -v -imultilib 32 -isystem /abuild/rguenther/gcc5-g/gcc/include -isystem /abuild/rguenther/gcc5-g/gcc/include-fixed -D _FORTIFY_SOURCE=2 atof01.c -quiet -dumpbase atof01.c -m32 -mtune=generic -march=i586 -auxbase atof01 -g -O2 -version -fstack-protector -funwind-tables -fasynchronous-unwind-tables -o atof01.sGNU C11 (GCC) version 5.2.1 20150826 [gcc-5-branch revision 226027] (x86_64-unknown-linux-gnu)        compiled by GNU C version 4.8.4 20150327 [gcc-4_8-branch revision 221722], GMP version 6.0.0, MPFR version 3.1.2, MPC version 1.0.2GGC heuristics: --param ggc-min-expand=30 --param ggc-min-heapsize=4096ignoring nonexistent directory ""/usr/local/lib64/gcc/x86_64-unknown-linux-gnu/5.2.1/include""ignoring nonexistent directory ""/usr/local/lib64/gcc/x86_64-unknown-linux-gnu/5.2.1/include-fixed""ignoring nonexistent directory ""/usr/local/lib64/../x86_64-unknown-linux-gnu/include""#include ""..."" search starts here:#include <...> search starts here: /abuild/rguenther/gcc5-g/gcc/include /abuild/rguenther/gcc5-g/gcc/include-fixed /usr/local/include /usr/includeEnd of search list.GNU C11 (GCC) version 5.2.1 20150826 [gcc-5-branch revision 226027] (x86_64-unknown-linux-gnu)        compiled by GNU C version 4.8.4 20150327 [gcc-4_8-branch revision 221722], GMP version 6.0.0, MPFR version 3.1.2, MPC version 1.0.2GGC heuristics: --param ggc-min-expand=30 --param ggc-min-heapsize=4096Compiler executable checksum: eb89c9d8d76c5ea91abc0b0f9363b11cgcc-5: internal compiler error: Segmentation fault (program cc1)Please submit a full bug report,with preprocessed source if appropriate.See <http://bugs.opensuse.org/> for instructions.",RESOLVED          FIXED      
69123,Alexandre Oliva,[6 Regression] --with-build-config='bootstrap-O3 bootstrap-debug' miscompiled stage 2,"On x86-64, --with-build-config='bootstrap-O3 bootstrap-debug' miscompiledstage 2 into an infinite loop:(gdb) bt#0  0x0000000000e01141 in get_ref_base_and_extent(tree_node*, long*, long*, long*, bool*) ()#1  0x0000000000ebb061 in ao_ref_base(ao_ref*) ()#2  0x00000000008db7b2 in ao_ref_from_mem(ao_ref*, rtx_def const*) ()#3  0x00000000008dbd2d in rtx_refs_may_alias_p(rtx_def const*, rtx_def const*, bool) ()#4  0x00000000008e001a in true_dependence_1(rtx_def const*, machine_mode, rtx_def*, rtx_def const*, rtx_def*, bool) ()#5  0x0000000001094a6d in drop_overlapping_mem_locs(variable**, overlapping_mems*) ()#6  0x0000000001094bd9 in clobber_overlapping_mems(dataflow_set*, rtx_def*) ()#7  0x0000000001099bf3 in val_store(dataflow_set*, rtx_def*, rtx_def*, rtx_insn*, bool) ()#8  0x000000000109e086 in compute_bb_dataflow(basic_block_def*) [clone .isra.135] ()#9  0x000000000109f4ca in vt_find_locations() ()#10 0x00000000010a15e0 in variable_tracking_main_1() ()#11 0x00000000010a178c in (anonymous namespace)::pass_variable_tracking::execute(function*) ()#12 0x0000000000cb7d74 in execute_one_pass(opt_pass*) ()#13 0x0000000000cb8a55 in execute_pass_list_1(opt_pass*) ()#14 0x0000000000cb8cea in execute_pass_list(function*, opt_pass*) ()#15 0x0000000000964254 in cgraph_node::expand() ()---Type <return> to continue, or q <return> to quit---#16 0x0000000000965c07 in symbol_table::compile() [clone .part.49] ()#17 0x0000000000968293 in symbol_table::finalize_compilation_unit() ()#18 0x0000000000dad023 in compile_file() ()#19 0x00000000005d2186 in toplev::main(int, char**) ()#20 0x00000000005d3db7 in main ()(gdb)",RESOLVED          FIXED      
67753,Alexandre Oliva,"[6 Regression] FAIL: cxg1005, cxg2002, cxg2006, cxg2007, cxg2008, cxg2018, cxg2019 and cxg2020","splitting /home/dave/gnu/gcc/objdir/gcc/testsuite/ada/acats/tests/cxg/cxg1005.a into:   cxg1005.adbBUILD cxg1005.adbgnatmake --GCC=""/home/dave/gnu/gcc/objdir/gcc/xgcc -B/home/dave/gnu/gcc/objdir/gcc/"" -gnatws -O2 -gnat95 -I/home/dave/gnu/gcc/objdir/gcc/testsuite/ada/acats/support cxg1005.adb -largs --GCC=""/home/dave/gnu/gcc/objdir/gcc/xgcc -B/home/dave/gnu/gcc/objdir/gcc/""/home/dave/gnu/gcc/objdir/gcc/xgcc -c -B/home/dave/gnu/gcc/objdir/gcc/ -gnatws -O2 -gnat95 -I/home/dave/gnu/gcc/objdir/gcc/testsuite/ada/acats/support cxg1005.adbgnatbind -I/home/dave/gnu/gcc/objdir/gcc/testsuite/ada/acats/support -x cxg1005.alignatlink cxg1005.ali -O2 --GCC=/home/dave/gnu/gcc/objdir/gcc/xgcc -B/home/dave/gnu/gcc/objdir/gcc/RUN cxg1005,.,. CXG1005 ACATS 2.5 15-09-28 10:42:30---- CXG1005 Check that the subprograms defined in the package                Generic_Complex_Elementary_Functions provide correct                results.   * CXG1005 Exception raised in Test_Block.**** CXG1005 FAILED ****************************.splitting /home/dave/gnu/gcc/objdir/gcc/testsuite/ada/acats/tests/cxg/cxg2002.a into:   cxg2002.adbBUILD cxg2002.adbgnatmake --GCC=""/home/dave/gnu/gcc/objdir/gcc/xgcc -B/home/dave/gnu/gcc/objdir/gcc/"" -gnatws -O2 -gnat95 -I/home/dave/gnu/gcc/objdir/gcc/testsuite/ada/acats/support cxg2002.adb -largs --GCC=""/home/dave/gnu/gcc/objdir/gcc/xgcc -B/home/dave/gnu/gcc/objdir/gcc/""/home/dave/gnu/gcc/objdir/gcc/xgcc -c -B/home/dave/gnu/gcc/objdir/gcc/ -gnatws -O2 -gnat95 -I/home/dave/gnu/gcc/objdir/gcc/testsuite/ada/acats/support cxg2002.adbgnatbind -I/home/dave/gnu/gcc/objdir/gcc/testsuite/ada/acats/support -x cxg2002.alignatlink cxg2002.ali -O2 --GCC=/home/dave/gnu/gcc/objdir/gcc/xgcc -B/home/dave/gnu/gcc/objdir/gcc/RUN cxg2002,.,. CXG2002 ACATS 2.5 15-09-28 10:42:42---- CXG2002 Check the accuracy of the complex modulus function.   * CXG2002 test 1 -- abs(bigreal + 0i) actual:  5.50569E-40 expected:                 3.40282E+38 difference:  3.40282E+38 max_err:                1.21694E+32.   * CXG2002 test 2 -- abs(0 + bigreal*i) actual:  5.50569E-40 expected:                3.40282E+38 difference:  3.40282E+38 max_err:                1.21694E+32.   * CXG2002 test 2 -- abs(0 + bigreal*i) actual:  5.50569E-40 expected:                3.40282E+38 difference:  3.40282E+38 max_err:                1.21694E+32.   * CXG2002 test 3 -- abs(3 + 4*i) actual:  5.50569E-40 expected:                 5.00000E+00 difference:  5.00000E+00 max_err:                1.78814E-06.   * CXG2002 test 4 -- abs(3S + 4S*i) for large S actual:  5.50569E-40                expected:  2.12676E+38 difference:  2.12676E+38 max_err:                1.51116E+25.   * CXG2002 test 8 -- abs(1 + 1*i) actual:  5.50569E-40 expected:                 1.41421E+00 difference:  1.41421E+00 max_err:                5.05762E-07.**** CXG2002 FAILED ****************************.FAIL:   cxg2002Etc.",RESOLVED          FIXED      
68083,Alexandre Oliva,[6 Regression] wrong code at -O3 on x86_64-linux-gnu,"The current gcc trunk miscompiles the following code on x86_64-linux-gnu at -O3 in both 32-bit and 64-bit modes. This is a regression from 5.2.x.$ gcc-trunk -vUsing built-in specs.COLLECT_GCC=gcc-trunkCOLLECT_LTO_WRAPPER=/usr/local/gcc-trunk/libexec/gcc/x86_64-pc-linux-gnu/6.0.0/lto-wrapperTarget: x86_64-pc-linux-gnuConfigured with: ../gcc-trunk/configure --prefix=/usr/local/gcc-trunk --enable-languages=c,c++ --disable-werror --enable-multilibThread model: posixgcc version 6.0.0 20151023 (experimental) [trunk revision 229251] (GCC) $ $ gcc-trunk -O2 small.c; ./a.out$ gcc-5.2 -O3 small.c; ./a.out$ $ gcc-trunk -O3 small.c$ ./a.outAborted (core dumped)$ ------------------------------------int a = 2, b = 1, c = 1;intfn1 (){  int d;  for (; a; a--)    {      for (d = 0; d < 4; d++)	{	  int k;	  if (c < 1)	    if (k)	      c = 0;	  if (b)	    continue;	  return 0;	}      b = !1;    }  return 0;}intmain (){  fn1 ();  if (a != 1)     __builtin_abort ();   return 0;}",RESOLVED          FIXED      
58315,Alexandre Oliva,[4.9/5 Regression] Excessive memory use with -g,"Compiling the PPL testsuite, specifically MIP_Problem/mipproblem1.cc, with-O2 -g makes GCC use nearly 6GB of memory (followed by GAS needing 6.5GBof memory to assemble the result).Dropping -g results in instant gratification.",RESOLVED          FIXED      
67912,Alexandre Oliva,"[6 Regression] ICE in gen_lowpart_common, at emit-rtl.c:1399","Solaris/x86 bootstrap is currently broken compiling the 64-bit s-regpat.adb:$ /var/gcc/regression/trunk/10-gcc/build/./gcc/xgcc -B/var/gcc/regression/trunk/10-gcc/build/./gcc/ -B/vol/gcc/i386-pc-solaris2.10/bin/ -B/vol/gcc/i386-pc-solaris2.10/lib/ -isystem /vol/gcc/i386-pc-solaris2.10/include -isystem /vol/gcc/i386-pc-solaris2.10/sys-include    -c -g -O2 -m64 -fpic  -W -Wall -gnatpg -nostdinc -m64  s-regpat.adb -o s-regpat.o+===========================GNAT BUG DETECTED==============================+| 6.0.0 20151009 (experimental) [trunk revision 228636] (i386-pc-solaris2.10) GCC error:|| in gen_lowpart_common, at emit-rtl.c:1399                                || Error detected around s-regpat.adb:1029:22           This happens already with the stage1 compiler, though.  A reghunt determined thatthis patch2015-10-07  Jan Hubicka  <hubicka@ucw.cz>	* expr.c (store_expr_with_bounds): Handle aggregate moves from	BLKmode.	* gimple-expr.c (useless_type_conversion_p): Do not use TYPE_CANONICAL	to define gimple type system; compare aggregates only by size.is the culprit.  Rainer",RESOLVED          FIXED      
67891,Alexandre Oliva,[6 Regression] FAIL: gcc.dg/pr43300.c (internal compiler error) on alpha-linux-gnu,"r228175 introduced following testcase failure on alpha-linux-gnu:FAIL: gcc.dg/pr43300.c (internal compiler error)FAIL: gcc.dg/pr43300.c (test for excess errors)The failure can be triggered with a crosscompiler from x86_64-linux-gnu to alpha-linux-gnu:~/gcc-build-alpha/gcc/cc1 -Os -quiet pr43300.cpr43300.c: In function ‘foo’:pr43300.c:8:1: internal compiler error: in adjust_one_expanded_partition_var, at cfgexpand.c:1401 foo (int x, V2SF a) ^0x7b18e3 adjust_one_expanded_partition_var        ../../gcc-svn/trunk/gcc/cfgexpand.c:14010x7c2a19 execute        ../../gcc-svn/trunk/gcc/cfgexpand.c:6217Please submit a full bug report,",RESOLVED          FIXED      
67766,Alexandre Oliva,"[6 Regression]: Bootstrap failure on alpha-linux-gnu: ICE in simplify_subreg, at simplify-rtx.c","Created attachment 36416 [details]Preprocessed testcasealpha-linux-gnu bootstrap is currently broken due to r228175:2015-09-27  Alexandre Oliva <aoliva@redhat.com>        PR rtl-optimization/64164        PR tree-optimization/67312        PR middle-end/67340        PR middle-end/67490        PR bootstrap/67597        * cfgexpand.c (parm_in_stack_slot_p): Remove.        (ssa_default_def_partition): Remove.        (get_rtl_for_parm_ssa_default_def): Remove.        (set_rtl): Check that RTL assignments match expectations.        Loop on SUBREGs, CONCATs and PARALLELs subexprs.  Set only the        default def location for params and results.  Record SSA names        or types in REG and MEM attrs, respectively.        ...The ICE can be reproduced with a crosscompiler from x86_64-linux-gnu to alpha-linux-gnu, configured with: --target=alpha-linux-gnu --enable-languages=c --with-long-double-128~/gcc-build-alpha/gcc/cc1 -O2 -quiet -fpreprocessed -o libgcc2.o libgcc2.i/space/homedirs/uros/gcc-svn/trunk/libgcc/libgcc2.c: In function ‘__mulsc3’:/space/homedirs/uros/gcc-svn/trunk/libgcc/libgcc2.c:1992:1: internal compiler error: in simplify_subreg, at simplify-rtx.c:58070xa50bb0 simplify_subreg(machine_mode, rtx_def*, machine_mode, unsigned int)        ../../gcc-svn/trunk/gcc/simplify-rtx.c:58070xa5104c simplify_gen_subreg(machine_mode, rtx_def*, machine_mode, unsigned int)        ../../gcc-svn/trunk/gcc/simplify-rtx.c:60310xa1a494 gen_lowpart_general(machine_mode, rtx_def*)        ../../gcc-svn/trunk/gcc/rtlhooks.c:540x7885cf convert_move(rtx_def*, rtx_def*, int)        ../../gcc-svn/trunk/gcc/expr.c:5810x7e6edd expand_function_end()        ../../gcc-svn/trunk/gcc/function.c:54610x67c669 construct_exit_block        ../../gcc-svn/trunk/gcc/cfgexpand.c:58200x67c669 execute        ../../gcc-svn/trunk/gcc/cfgexpand.c:6326Please submit a full bug report,[...]gdb session:Breakpoint 1, internal_error (gmsgid=0x11f6cd5 ""in %s, at %s:%d"") at ../../gcc-svn/trunk/gcc/diagnostic.c:11341134    internal_error (const char *gmsgid, ...)(gdb) bt#0  internal_error (gmsgid=0x11f6cd5 ""in %s, at %s:%d"") at ../../gcc-svn/trunk/gcc/diagnostic.c:1134#1  0x000000000102091c in fancy_abort (file=<optimized out>, line=5807,     function=0x1121860 <simplify_subreg(machine_mode, rtx_def*, machine_mode, unsigned int)::__FUNCTION__> ""simplify_subreg"")    at ../../gcc-svn/trunk/gcc/diagnostic.c:1209#2  0x0000000000a50bb1 in simplify_subreg (outermode=VOIDmode, op=0x2aaaaeae4d20, innermode=SCmode, byte=0)    at ../../gcc-svn/trunk/gcc/simplify-rtx.c:5807#3  0x0000000000a5104d in simplify_gen_subreg (outermode=18836693,     op=0x1121860 <simplify_subreg(machine_mode, rtx_def*, machine_mode, unsigned int)::__FUNCTION__>, innermode=17959616, byte=5807)    at ../../gcc-svn/trunk/gcc/simplify-rtx.c:6031#4  0x0000000000a1a495 in gen_lowpart_general (mode=VOIDmode, x=0x2aaaaeae4d20) at ../../gcc-svn/trunk/gcc/rtlhooks.c:54#5  0x00000000007885d0 in convert_move (to=0x2aaaaea95df0, from=<optimized out>, unsignedp=0) at ../../gcc-svn/trunk/gcc/expr.c:581#6  0x00000000007e6ede in expand_function_end () at ../../gcc-svn/trunk/gcc/function.c:5461#7  0x000000000067c66a in construct_exit_block () at ../../gcc-svn/trunk/gcc/cfgexpand.c:5820#8  (anonymous namespace)::pass_expand::execute (this=<optimized out>, fun=0x2aaaaea8b348) at ../../gcc-svn/trunk/gcc/cfgexpand.c:6326convert_move tries to generate a VOIDmode subreg:(gdb) f 5#5  0x00000000007885d0 in convert_move (to=0x2aaaaea95df0, from=<optimized out>, unsignedp=0) at ../../gcc-svn/trunk/gcc/expr.c:581581           emit_move_insn (to, gen_lowpart (to_mode, from));(gdb) p debug_rtx (to)(parallel/i [        (expr_list:REG_DEP_TRUE (reg:SF 32 $f0)            (const_int 0 [0]))        (expr_list:REG_DEP_TRUE (reg:SF 33 $f1)            (const_int 4 [0x4]))    ])$4 = void(gdb) f 4#4  0x0000000000a1a495 in gen_lowpart_general (mode=VOIDmode, x=0x2aaaaeae4d20) at ../../gcc-svn/trunk/gcc/rtlhooks.c:5454        rtx result = gen_lowpart_common (mode, x);(gdb) p mode$5 = VOIDmode(gdb) p debug_rtx (x)(concat:SC (reg:SF 608)    (reg:SF 609))$6 = void",RESOLVED          FIXED      
67828,Alexandre Oliva,[6 Regression] wrong code at -O3 on x86_64-linux-gnu,"The current gcc trunk miscompiles the following code on x86_64-linux-gnu at -O3 in both 32-bit and 64-bit modes. This is a regression from 5.2.x.$ gcc-trunk -vUsing built-in specs.COLLECT_GCC=gcc-trunkCOLLECT_LTO_WRAPPER=/usr/local/gcc-trunk/libexec/gcc/x86_64-pc-linux-gnu/6.0.0/lto-wrapperTarget: x86_64-pc-linux-gnuConfigured with: ../gcc-trunk/configure --prefix=/usr/local/gcc-trunk --enable-languages=c,c++ --disable-werror --enable-multilibThread model: posixgcc version 6.0.0 20151002 (experimental) [trunk revision 228389] (GCC) $ $ gcc-trunk -O2 small.c; ./a.out0$ gcc-5.2 -O3 small.c; ./a.out0$ $ gcc-trunk -O3 small.c$ ./a.out1$ -----------------------------------int printf (const char *, ...);int a, b;short c;intmain (){  int j, d = 1;  for (; c >= 0; c++)    {      a = d;      d = 0;      if (b)	{	  printf (""%d"", 0);	  if (j)	    printf (""%d"", 0);	}    }  printf (""%d\n"", d);  return 0; }",RESOLVED          FIXED      
67312,Alexandre Oliva,[6 Regression] ICE: SIGSEGV in expand_expr_real_1 (expr.c:9561) with -ftree-coalesce-vars,"Created attachment 36235 [details]reduced testcaseCompiler output:$ gcc -ftree-coalesce-vars testcase.c -wrapper valgrind,-q==23677== Invalid read of size 2==23677==    at 0x81C88A: expand_expr_real_1(tree_node*, rtx_def*, machine_mode, expand_modifier, rtx_def**, bool) (expr.c:9561)==23677==    by 0x82FA16: expand_expr (expr.h:255)==23677==    by 0x82FA16: expand_assignment(tree_node*, tree_node*, bool) (expr.c:5101)==23677==    by 0x706988: expand_gimple_stmt_1 (cfgexpand.c:3599)==23677==    by 0x706988: expand_gimple_stmt(gimple_statement_base*) (cfgexpand.c:3695)==23677==    by 0x708C88: expand_gimple_basic_block(basic_block_def*, bool) (cfgexpand.c:5698)==23677==    by 0x70F5A6: (anonymous namespace)::pass_expand::execute(function*) (cfgexpand.c:6284)==23677==    by 0xA3D491: execute_one_pass(opt_pass*) (passes.c:2319)==23677==    by 0xA3D955: execute_pass_list_1(opt_pass*) [clone .constprop.79] (passes.c:2372)==23677==    by 0xA3D9A8: execute_pass_list(function*, opt_pass*) (passes.c:2383)==23677==    by 0x743AC7: cgraph_node::expand() (cgraphunit.c:1920)==23677==    by 0x7449F2: output_in_order(bool) (cgraphunit.c:2158)==23677==    by 0x744DDB: symbol_table::compile() [clone .part.50] (cgraphunit.c:2403)==23677==    by 0x747597: compile (cgraphunit.c:2473)==23677==    by 0x747597: symbol_table::finalize_compilation_unit() (cgraphunit.c:2496)==23677==  Address 0x0 is not stack'd, malloc'd or (recently) free'd==23677== testcase.c: In function 'foo':testcase.c:3:7: internal compiler error: Segmentation fault     y = x;       ^Please submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.Tested revisions:r227052 - ICE5 branch r225803 - OK",RESOLVED          FIXED      
67340,Alexandre Oliva,"[6 Regression] ICE:  in convert_move, at expr.c:279","spawn /test/gnu/gcc/objdir/gcc/xgcc -B/test/gnu/gcc/objdir/gcc/ -fno-diagnostics-show-caret -fdiagnostics-color=never -O0 -w -c -o 981223-1.o /test/gnu/gcc/gcc/gcc/testsuite/gcc.c-torture/compile/981223-1.c/test/gnu/gcc/gcc/gcc/testsuite/gcc.c-torture/compile/981223-1.c: In function 'func':/test/gnu/gcc/gcc/gcc/testsuite/gcc.c-torture/compile/981223-1.c:13:9: internalcompiler error: in convert_move, at expr.c:279FAIL: gcc.c-torture/compile/981223-1.c   -O0  (internal compiler error)FAIL: gcc.c-torture/compile/981223-1.c   -O0  (test for excess errors)There are many similar fails.-bash-4.3$ ./xgcc -B./ -vReading specs from ./specsCOLLECT_GCC=./xgccCOLLECT_LTO_WRAPPER=./lto-wrapperTarget: hppa2.0w-hp-hpux11.11Configured with: ../gcc/configure --with-gnu-as --with-as=/opt/gnu/bin/as --enable-shared --with-local-prefix=/opt/gnu --prefix=/opt/gnu/gcc/gcc-6.0 --with-gmp=/opt/gnu/gcc/gmp --enable-threads=posix --disable-lto --without-cloog --without-ppl --enable-languages=c,c++,objc,fortran,java,ada,obj-c++Thread model: posixgcc version 6.0.0 20150822 (experimental) [trunk revision 227098] (GCC)Revision 226939 was okay.",RESOLVED          FIXED      
67490,Alexandre Oliva,[6 regression] FAIL: gcc.target/powerpc/pr16458-1.c scan-assembler-not cmpw,"Broken by r226901:$ gcc/xgcc -Bgcc/ ../gcc/testsuite/gcc.target/powerpc/pr16458-1.c -O2 -S -m32 -o pr16458-1.s$ grep -c cmpw pr16458-1.s1$ diff -u gcc-20150{801,906}/Build/pr16458-1.s --- gcc-20150801/Build/pr16458-1.s      2015-09-07 18:56:29.000000000 +0200+++ gcc-20150906/Build/pr16458-1.s      2015-09-07 18:56:13.000000000 +0200@@ -10,18 +10,16 @@        lis 10,b@ha        lwz 9,a@l(9)        lwz 10,b@l(10)-       cmplw 7,9,10+       cmpw 7,9,10        beq 7,.L3-       ble 7,.L7+       cmplw 7,9,10        li 3,2-       blr-       .p2align 4,,15-.L7:-       bge 7,.L8+       bgtlr 7+       bge 7,.L7        li 3,3        blr        .p2align 4,,15-.L8:+.L7:        li 3,4        blr        .p2align 4,,15@@ -31,5 +29,5 @@        .size   foo,.-foo        .comm   b,4,4        .comm   a,4,4-       .ident  ""GCC: (GNU) 6.0.0 20150801 (experimental) [trunk revision 226462]""+       .ident  ""GCC: (GNU) 6.0.0 20150906 (experimental) [trunk revision 227511]""        .section        .note.GNU-stack,"""",@progbits",RESOLVED          FIXED      
67597,Alexandre Oliva,[6 Regression] profiledbootstrap failure on ppc64le,"With: % ../gcc/configure --with-cpu=power8 --disable-libstdcxx-pch --disable-libvtv --disable-libitm --disable-libcilkrts --disable-libssp --disable-libgomp --disable-werror --enable-multilib --enable-languages=c,c++ % make -j120 profiledbootstrapI get during stageprofile (with the instrumented compiler):trippels@gcc2-power8 libgcc % /home/trippels/gcc_build_dir_/./gcc/xgcc -B/home/trippels/gcc_build_dir_/./gcc/ -B/usr/local/powerpc64le-unknown-linux-gnu/bin/ -B/usr/local/powerpc64le-unknown-linux-gnu/lib/ -isystem /usr/local/powerpc64le-unknown-linux-gnu/include -isystem /usr/local/powerpc64le-unknown-linux-gnu/sys-include    -g -O2 -O2  -g -O2 -DIN_GCC    -W -Wall -Wno-narrowing -Wwrite-strings -Wcast-qual -Wstrict-prototypes -Wmissing-prototypes -Wold-style-definition  -isystem ./include   -fPIC -mlong-double-128 -mno-minimal-toc -g -DIN_LIBGCC2 -fbuilding-libgcc -fno-stack-protector   -fPIC -mlong-double-128 -mno-minimal-toc -I. -I. -I../.././gcc -I../../../gcc/libgcc -I../../../gcc/libgcc/. -I../../../gcc/libgcc/../gcc -I../../../gcc/libgcc/../include -I../../../gcc/libgcc/../libdecnumber/dpd -I../../../gcc/libgcc/../libdecnumber -DHAVE_CC_TLS  -o unwind-dw2.o -MT unwind-dw2.o -MD -MP -MF unwind-dw2.dep -fexceptions -c ../../../gcc/libgcc/unwind-dw2.c -fvisibility=hidden -DHIDE_EXPORTSIn file included from ../../../gcc/libgcc/unwind-dw2.c:1694:0:../../../gcc/libgcc/unwind.inc: In function ‘_Unwind_RaiseException’:../../../gcc/libgcc/unwind.inc:136:1: internal compiler error: in dwarf2out_frame_debug_expr, at dwarf2cfi.c:1901 } ^Please submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.",RESOLVED          FIXED      
67227,Alexandre Oliva,[6 regression] comparison failure in ada/par.o,r226901 is causing the stage2 ada compiler to be miscompiled on ia64.,RESOLVED          FIXED      
66983,Alexandre Oliva,[6 Regression] Many testsuite regressions,"On Linux/ia32, r226113 hasFAIL: c-c++-common/dfp/func-vararg-dfp.c execution testFAIL: c-c++-common/dfp/func-vararg-mixed-2.c execution testFAIL: c-c++-common/dfp/func-vararg-mixed.c execution testFAIL: c-c++-common/torture/vector-shift1.c   -O0  execution testFAIL: c-c++-common/torture/vector-shift1.c   -O0  execution testFAIL: gcc.c-torture/execute/ieee/pr50310.c execution,  -O3 -fomit-frame-pointer -funroll-loops -fpeel-loops -ftracer -finline-functions FAIL: gcc.c-torture/execute/ieee/pr50310.c execution,  -O3 -g FAIL: gcc.dg/compat/scalar-return-dfp c_compat_x_tst.o-c_compat_y_tst.o execute FAIL: gcc.dg/torture/pr57748-1.c   -O0  execution testFAIL: gcc.dg/torture/pr57748-2.c   -O0  execution testFAIL: gcc.dg/torture/pr57748-3.c   -O0  execution testFAIL: gcc.dg/torture/pr57748-4.c   -O0  execution test",RESOLVED          FIXED      
52983,Alexandre Oliva,"[4.8 Regression] internal compiler error: in df_uses_record, at df-scan.c:3243","Created attachment 27154 [details]preprocessed source$ ~/gcc/4.x/bin/g++ -m32  23875.ii  -fPIC -O2 -g -vUsing built-in specs.COLLECT_GCC=/home/jwakely/gcc/4.x/bin/g++COLLECT_LTO_WRAPPER=/home/jwakely/gcc/4.x/libexec/gcc/powerpc64-unknown-linux-gnu/4.8.0/lto-wrapperTarget: powerpc64-unknown-linux-gnuConfigured with: /home/jwakely/src/gcc/configure --prefix=/home/jwakely/gcc/4.x --with-system-zlib --enable-languages=c,c++ --with-gnu-ld --with-gnu-as --disable-libquadmath --disable-libitm --disable-libmudflap --disable-nls --disable-bootstrapThread model: posixgcc version 4.8.0 20120413 (experimental) [trunk revision 186436] (GCC) COLLECT_GCC_OPTIONS='-m32' '-fPIC' '-O2' '-g' '-v' '-shared-libgcc' /home/jwakely/gcc/4.x/libexec/gcc/powerpc64-unknown-linux-gnu/4.8.0/cc1plus -fpreprocessed 23875.ii -quiet -dumpbase 23875.ii -m32 -auxbase 23875 -g -O2 -version -fPIC -o /tmp/ccDtf7pw.sGNU C++ (GCC) version 4.8.0 20120413 (experimental) [trunk revision 186436] (powerpc64-unknown-linux-gnu)        compiled by GNU C version 4.6.2 20111027 (Red Hat 4.6.2-1), GMP version 4.3.2, MPFR version 2.4.2, MPC version 0.8.1GGC heuristics: --param ggc-min-expand=30 --param ggc-min-heapsize=4096GNU C++ (GCC) version 4.8.0 20120413 (experimental) [trunk revision 186436] (powerpc64-unknown-linux-gnu)        compiled by GNU C version 4.6.2 20111027 (Red Hat 4.6.2-1), GMP version 4.3.2, MPFR version 2.4.2, MPC version 0.8.1GGC heuristics: --param ggc-min-expand=30 --param ggc-min-heapsize=4096Compiler executable checksum: b25903b7e9a48fba208e5bb0f20164ad/home/jwakely/src/gcc/libstdc++-v3/testsuite/27_io/basic_ostream/inserters_arithmetic/pod/23875.cc: In function 'void test01()':/home/jwakely/src/gcc/libstdc++-v3/testsuite/27_io/basic_ostream/inserters_arithmetic/pod/23875.cc:78:1: internal compiler error: in df_uses_record, at df-scan.c:3243 } ^Please submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.",RESOLVED          FIXED      
53820,Alexandre Oliva,"[4.8 Regression] ICE in vt_expand_var_loc_chain, at var-tracking.c:8029","Created attachment 27726 [details]Preprocessed source/test/gnu/gcc/objdir/./prev-gcc/g++ -B/test/gnu/gcc/objdir/./prev-gcc/ -B/opt/gnu64/gcc/gcc-4.8/hppa64-hp-hpux11.11/bin/ -nostdinc++ -B/test/gnu/gcc/objdir/prev-hppa64-hp-hpux11.11/libstdc++-v3/src/.libs -B/test/gnu/gcc/objdir/prev-hppa64-hp-hpux11.11/libstdc++-v3/libsupc++/.libs -I/test/gnu/gcc/objdir/prev-hppa64-hp-hpux11.11/libstdc++-v3/include/hppa64-hp-hpux11.11 -I/test/gnu/gcc/objdir/prev-hppa64-hp-hpux11.11/libstdc++-v3/include -I/test/gnu/gcc/gcc/libstdc++-v3/libsupc++ -L/test/gnu/gcc/objdir/prev-hppa64-hp-hpux11.11/libstdc++-v3/src/.libs -L/test/gnu/gcc/objdir/prev-hppa64-hp-hpux11.11/libstdc++-v3/libsupc++/.libs -c  -DIN_GCC_FRONTEND -DIN_GCC_FRONTEND -g -O2 -DIN_GCC   -fno-exceptions -fno-rtti -W -Wall -Wno-narrowing -Wwrite-strings -Wcast-qual  -fno-common  -DHAVE_CONFIG_H -I. -Ic-family -I../../gcc/gcc -I../../gcc/gcc/c-family -I../../gcc/gcc/../include -I../../gcc/gcc/../libcpp/include -I/opt/gnu64/gcc/gmp/include  -I../../gcc/gcc/../libdecnumber -I../../gcc/gcc/../libdecnumber/dpd -I../libdecnumber    ../../gcc/gcc/c-family/stub-objc.c -o c-family/stub-objc.o../../gcc/gcc/c-family/stub-objc.c: In function 'void objc_add_property_declaration(location_t, tree, bool, bool, bool, bool, bool, bool, tree, tree)':../../gcc/gcc/c-family/stub-objc.c:328:1: internal compiler error: in vt_expand_var_loc_chain, at var-tracking.c:8029 } ^Please submit a full bug report,-bash-3.2$ ./xgcc -B./ -vReading specs from ./specsCOLLECT_GCC=./xgccCOLLECT_LTO_WRAPPER=./lto-wrapperTarget: hppa64-hp-hpux11.11Configured with: ../gcc/configure --with-gnu-as --with-as=/opt/gnu64/bin/as --with-ld=/usr/ccs/bin/ld --enable-shared --with-local-prefix=/opt/gnu64 --prefix=/opt/gnu64/gcc/gcc-4.8 --build=hppa64-hp-hpux11.11 --enable-threads=posix --disable-nls --with-gmp=/opt/gnu64/gcc/gmp --with-libelf=/opt/gnu64 --enable-languages=c,c++,objc,obj-c++,fortranThread model: posixgcc version 4.8.0 20120629 (experimental) [trunk revision 189089] (GCC)",RESOLVED          FIXED      
53706,Alexandre Oliva,"[4.8 Regression] Bootstrap failure due to ""Invalid write of size 8 at 0xBDC35E: variable_htab_free (var-tracking.c:1418)","Recent 4.8 regression on ia64. The bootstrap fail with:*** glibc detected *** /home/uros/gcc-build/prev-gcc/cc1plus: corrupted double-linked list: 0x60000000027ec0d0 ***======= Backtrace: =========/lib/libc.so.6.1(+0xd7800)[0x200000000021f800]/lib/libc.so.6.1(+0xd81f0)[0x20000000002201f0]/lib/libc.so.6.1(+0xdb5e0)[0x20000000002235e0]/lib/libc.so.6.1(cfree-0x1cfed0)[0x200000000022be10]/home/uros/gcc-build/prev-gcc/cc1plus(htab_delete+0x20000000014501a0)[0x400000000184be90]/home/uros/gcc-build/prev-gcc/cc1plus[0x40000000014063a0]/home/uros/gcc-build/prev-gcc/cc1plus(_Z22variable_tracking_mainv+0x2000000001012b50)[0x400000000140c530]/home/uros/gcc-build/prev-gcc/cc1plus[0x400000000145f840]/home/uros/gcc-build/prev-gcc/cc1plus[0x4000000000d72d10]/home/uros/gcc-build/prev-gcc/cc1plus(_Z16execute_one_passP8opt_pass+0x20000000008a3860)[0x4000000000c9f560]/home/uros/gcc-build/prev-gcc/cc1plus(_Z17execute_pass_listP8opt_pass+0x20000000008a4c90)[0x4000000000ca0310]/home/uros/gcc-build/prev-gcc/cc1plus(_Z17execute_pass_listP8opt_pass+0x20000000008a4ce0)[0x4000000000ca0360]This corrupted double linked list problem can be exposed with a cross to ia64-unknown-linux-gnu under valgrind, with attached gimplify.ii:$ valgrind ~/gcc-build-ia64/gcc/cc1plus -O2 -g -fno-common -fno-exceptions -fno-rtti gimplify.ii...==2911== Invalid write of size 8==2911==    at 0xBDC35E: variable_htab_free (var-tracking.c:1418)==2911==    by 0xDA819A: htab_delete (hashtab.c:430)==2911==    by 0xBE93EA: vt_emit_notes (var-tracking.c:9132)==2911==    by 0xBE9631: variable_tracking_main (var-tracking.c:9875)==2911==    by 0xC06995: ia64_reorg (ia64.c:9834)==2911==    by 0x9923F9: rest_of_handle_machine_reorg (reorg.c:4151)==2911==    by 0x945C26: execute_one_pass (passes.c:2164)==2911==    by 0x945FD4: execute_pass_list (passes.c:2219)==2911==    by 0x945FE6: execute_pass_list (passes.c:2220)==2911==    by 0x945FE6: execute_pass_list (passes.c:2220)==2911==    by 0x745047: expand_function (cgraphunit.c:1615)==2911==    by 0x746936: compile (cgraphunit.c:1720)==2911==  Address 0xf16ea18 is 40 bytes inside a block of size 2,568 free'd==2911==    at 0x4A079AE: free (vg_replace_malloc.c:427)==2911==    by 0x6DA9F7: empty_alloc_pool (alloc-pool.c:210)==2911==    by 0x6DAA68: free_alloc_pool (alloc-pool.c:230)==2911==    by 0xBE93D3: vt_emit_notes (var-tracking.c:9130)==2911==    by 0xBE9631: variable_tracking_main (var-tracking.c:9875)==2911==    by 0xC06995: ia64_reorg (ia64.c:9834)==2911==    by 0x9923F9: rest_of_handle_machine_reorg (reorg.c:4151)==2911==    by 0x945C26: execute_one_pass (passes.c:2164)==2911==    by 0x945FD4: execute_pass_list (passes.c:2219)==2911==    by 0x945FE6: execute_pass_list (passes.c:2220)==2911==    by 0x945FE6: execute_pass_list (passes.c:2220)==2911==    by 0x745047: expand_function (cgraphunit.c:1615)",RESOLVED          FIXED      
53740,Alexandre Oliva,"[4.8 Regression] --enable-checking=yes,rtl bootstrap failure with ada","Last night my x86_64-linux bootstrap failed due to a RTL checking failure..../gnat1 -gnatwa -quiet -nostdinc -O2 -g -gnatpg -m32 -mtune=generic -march=x86-64 -gnatO s-arit64.o s-arit64.adb -o /tmp/s-arit64.sICEs, because in dead_debug_insert_temp during DCE          reg = *DF_REF_REAL_LOC (cur->use);assigns reg a DEBUG_EXPR rather than REG, so when we later:          /* Hmm...  Something's fishy, we should be setting REG here.  */          if (REGNO (dest) != REGNO (reg))            breg = NULL;we ICE, because REGNO on DEBUG_EXPR isn't valid.  Alex, could you please look at it?  Not sure if DEBUG_EXPR there is supposed to be valid and we should just handle it, or if the problem is that some dead_debug* call wasn't called or didn't do the right job.  Thanks.",RESOLVED          FIXED      
53682,Alexandre Oliva,[4.7/4.8 Regression] ICE in cselib_lookup (SEGV) on i586-linux-gnu,"Created attachment 27625 [details]test caseworks with 4.6 branch, fails with 4.7.1 on i586-linux-gnu, works on x86_64-linux-gnu.omitting one of the -fPIC, -fvisibility=hidden, -funroll-loops options avoids the ice.$ gcc -c -g -O2 -fPIC -fvisibility=hidden -funroll-loops  mini_q_math.c mini_q_math.c: In function 'ByteToDir':mini_q_math.c:124:1: internal compiler error: Segmentation faultPlease submit a full bug report,with preprocessed source if appropriate.Program received signal SIGSEGV, Segmentation fault.0x081e657b in cselib_lookup(rtx_def*, machine_mode, int, machine_mode) ()(gdb) bt#0  0x081e657b in cselib_lookup(rtx_def*, machine_mode, int, machine_mode) ()#1  0x081e7034 in ?? ()#2  0x08590da2 in ?? ()#3  0x085a8680 in ?? ()#4  0x08189983 in find_base_term(rtx_def*) ()#5  0x08189a28 in find_base_term(rtx_def*) ()#6  0x08189b69 in find_base_term(rtx_def*) ()#7  0x0818b3e8 in ?? ()#8  0x081e7820 in ?? ()#9  0x081e88f7 in ?? ()#10 0x081e9183 in cselib_process_insn(rtx_def*) ()#11 0x0856c723 in ?? ()#12 0x0857323c in variable_tracking_main() ()#13 0x0836e2bc in execute_one_pass(opt_pass*) ()#14 0x0836e615 in execute_pass_list(opt_pass*) ()#15 0x0836e628 in execute_pass_list(opt_pass*) ()#16 0x0836e628 in execute_pass_list(opt_pass*) ()#17 0x0844d434 in tree_rest_of_compilation(tree_node*) ()#18 0x081dd654 in ?? ()#19 0x081deeb5 in cgraph_optimize() ()#20 0x081df3ef in cgraph_finalize_compilation_unit() ()#21 0x081185fc in c_write_global_declarations() ()#22 0x0840661a in toplev_main(int, char**) ()#23 0x0810712b in main ()",RESOLVED          FIXED      
53209,Alexandre Oliva,"[4.7 Regression] tree check ICE: expected tree_vec, have error_mark in comp_template_args_with_info, at cp/pt.c:7038","Created attachment 27302 [details]TestcaseHi,starting with revision 186789, a native i686 compiler ICEs on theattached testcase with the following message:--------------------------------------------------jamborm@gcc45:~/tmp$ ~/gcc/trunk/inst/bin/g++ -g -O2 -D_GNU_SOURCE -c -fPIC -std=gnu++11 -fno-implicit-templates  functexcept.iiIn file included from /home/mjambor/gcc/trunk/obj/i686-pc-linux-gnu/libstdc++-v3/include/future:38:0,                             from /home/mjambor/gcc/trunk/src/libstdc++-v3/src/c++11/functexcept.cc:32:/home/mjambor/gcc/trunk/obj/i686-pc-linux-gnu/libstdc++-v3/include/functional: In member function ‘std::__regex::_StateIdT std::__regex::_Nfa::_M_insert_accept()’:/home/mjambor/gcc/trunk/obj/i686-pc-linux-gnu/libstdc++-v3/include/functional:2057:63: internal compiler error: tree check: expected tree_vec, have error_mark in comp_template_args_with_info, at cp/pt.c:7038Please submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.--------------------------------------------------I'm sorry the testcase is not at all reduced but multidelta has onlymanaged to produce something that makes GCC run out of memory on myi686 desktop.  I may try again over the next night.One particular problem with this ICE is that starting with revision186948 (a libstdc++ change), I cannot build gcc on my i686 desktop,(which means that until this is resolved I cannot follow trunk whendoing my work!), although I do not have this problem on a i686 machineon the compile farm (gcc45).  However, when I take the pre-processedsource to that machine, the trunk compiler ICEs there too (with thesame exact error).The ICE has started to appear with the following commit (that is thereason why I filed the component as target):------------------------------------------------------------------------r186789 | tmsriram | 2012-04-25 02:08:37 +0200 (Wed, 25 Apr 2012) | 61 lines2012-04-24  Sriraman Tallam  <tmsriram@google.com>This patch adds new builtins to check for cpu type and features.* __builtin_cpu_is (""<CPUNAME>"")* __builtin_cpu_supports (""<FEATURE>"")apart from the cpu init builtin, __builtin_cpu_init.List of CPU names :* ""amd""* ""intel""* ""atom""* ""core2""* ""corei7""* ""nehalem""                    * ""westmere""                   * ""sandybridge""                * ""amdfam10h""                  * ""barcelona""                  * ""shanghai""                   * ""istanbul""                   * ""bdver1""                     * ""bdver2""                                                    List of CPU features :                                        * ""cmov""                       * ""mmx""                        * ""popcnt""                     * ""sse""                        * ""sse2""                       * ""sse3""                       * ""ssse3""                      * ""sse4.1""                     * ""sse4.2""                     * ""avx""                                                               * config/i386/i386.c (build_processor_model_struct): New function.        (make_var_decl): New function.        (fold_builtin_cpu): New function.        (ix86_fold_builtin): New function.        (make_cpu_type_builtin): New function.        (ix86_init_platform_type_builtins): New function.        (ix86_expand_builtin): Expand new builtins by folding them.        (ix86_init_builtins): Make new builtins to detect CPU type.        (TARGET_FOLD_BUILTIN): New macro.        (IX86_BUILTIN_CPU_INIT): New enum value.        (IX86_BUILTIN_CPU_IS): New enum value.        (IX86_BUILTIN_CPU_SUPPORTS): New enum value.        * config/i386/i386-builtin-types.def: New function type.        * testsuite/gcc.target/builtin_target.c: New testcase.        * doc/extend.texi: Document builtins.                                       * libgcc/config/i386/i386-cpuinfo.c: New file.        * libgcc/config/i386/t-cpuinfo: New file.        * libgcc/config.host: Include t-cpuinfo.        * libgcc/config/i386/libgcc-glibc.ver: Version symbol __cpu_model.",RESOLVED          FIXED      
52417,Alexandre Oliva,[4.7 Regression] Infinite recursion in DSE/alias.c,"alias.c enters an infinite recurson for the following testcases from GCC testsuite:gcc.c-torture/compile/pr37669-2.cfor any compilation with -O* and without -fno-dseTarget: avrConfigured with: ../../gcc.gnu.org/trunk/configure --target=avr --prefix=/local/gnu/install/gcc-4.7 --disable-nls --with-dwarf2 --enable-checking=yes,rtl target_alias=avr --enable-languages=c,c++Thread model: singlegcc version 4.7.0 20120228 (experimental) (GCC)GNU C (GCC) version 4.7.0 20120228 (experimental) (avr)        compiled by GNU C version 4.3.2 [gcc-4_3-branch revision 141291], GMP version 4.3.2, MPFR version 2.4.2, MPC version 0.8.2",RESOLVED          FIXED      
46026,Alexandre Oliva,[trans-mem] Unable to build libitm on Solaris/x86,"I am unable to build the transactional-memory branch on Solaris/x86.  I'm using the exact same configuration as for my local gcc 4.5.1 install.Build Environment (gcc -v):Using built-in specs.COLLECT_GCC=gccCOLLECT_LTO_WRAPPER=/proj/spear0/gcc451/libexec/gcc/i386-pc-solaris2.10/4.5.1/lto-wrapperTarget: i386-pc-solaris2.10Configured with: /proj/spear0/gcc451src/gcc-4.5.1/configure --prefix=/proj/spear0/gcc451 --enable-languages=c,c++ --with-mpfr=/proj/spear0/x86 --with-gmp=/proj/spear0/x86/ --with-mfs=/proj/spear0/x86 --with-gnu-as --with-as=/proj/spear0/binutils-2.20.1/bin/as --with-gnu-ld --with-ld=/proj/spear0/binutils-2.20.1/bin/ldThread model: posixgcc version 4.5.1 (GCC)Configure:../transactional-memory/configure --prefix=/proj/spear1/gcc_stm/gcc-stm --with-gnu-as --with-as=/proj/spear0/binutils-2.20.1/bin/as --with-gnu-ld --with-ld=/proj/spear0/binutils-2.20.1/bin/ld --enable-languages=c,c++ --with-mpfr=/proj/spear0/x86/ --with-gmp=/proj/spear0/x86/ --with-mpc=/proj/spear0/x86/ --program-prefix=stm-I encountered two errors in the libitm folder:First, I ran into trouble due to target.h not being found:<output>libtool: compile:  /proj/spear1/gcc_stm/build/./gcc/g++ -B/proj/spear1/gcc_stm/build/./gcc/ -nostdinc++ -nostdinc++ -I/proj/spear1/gcc_stm/build/i386-pc-solaris2.10/libstdc++-v3/include/i386-pc-solaris2.10 -I/proj/spear1/gcc_stm/build/i386-pc-solaris2.10/libstdc++-v3/include -I/proj/spear1/gcc_stm/transactional-memory/libstdc++-v3/libsupc++ -I/proj/spear1/gcc_stm/transactional-memory/libstdc++-v3/include/backward -I/proj/spear1/gcc_stm/transactional-memory/libstdc++-v3/testsuite/util -L/proj/spear1/gcc_stm/build/i386-pc-solaris2.10/libstdc++-v3/src -L/proj/spear1/gcc_stm/build/i386-pc-solaris2.10/libstdc++-v3/src/.libs -B/proj/spear1/gcc_stm/gcc-stm/i386-pc-solaris2.10/bin/ -B/proj/spear1/gcc_stm/gcc-stm/i386-pc-solaris2.10/lib/ -isystem /proj/spear1/gcc_stm/gcc-stm/i386-pc-solaris2.10/include -isystem /proj/spear1/gcc_stm/gcc-stm/i386-pc-solaris2.10/sys-include -DHAVE_CONFIG_H -I. -I../../../transactional-memory/libitm -I../../../transactional-memory/libitm/config/i386 -I../../../transactional-memory/libitm/config/posix -I../../../transactional-memory/libitm/config/generic -I../../../transactional-memory/libitm -std=gnu++0x -funwind-tables -fno-exceptions -fno-rtti -Wall -pthread -Werror -fabi-version=4 -g -O2 -MT aatree.lo -MD -MP -MF .deps/aatree.Tpo -c ../../../transactional-memory/libitm/aatree.cc  -fPIC -DPIC -o .libs/aatree.oIn file included from ../../../transactional-memory/libitm/aatree.cc:28:0:../../../transactional-memory/libitm/libitm_i.h:79:20: fatal error: target.h: No such file or directorycompilation terminated.gmake[4]: *** [aatree.lo] Error 1</output>It would seem that libitm/config/x86/target.h is the desired target, given the characteristics of my system (Solaris/x86), so I ran the following:echo '#include ""config/x86/target.h""' >> ../transactional-memory/libitm/target.hI then cleaned the build tree and started again.This time, I encountered the following error:<output>libtool: compile:  /proj/spear1/gcc_stm/build/./gcc/g++ -B/proj/spear1/gcc_stm/build/./gcc/ -nostdinc++ -nostdinc++ -I/proj/spear1/gcc_stm/build/i386-pc-solaris2.10/libstdc++-v3/include/i386-pc-solaris2.10 -I/proj/spear1/gcc_stm/build/i386-pc-solaris2.10/libstdc++-v3/include -I/proj/spear1/gcc_stm/transactional-memory/libstdc++-v3/libsupc++ -I/proj/spear1/gcc_stm/transactional-memory/libstdc++-v3/include/backward -I/proj/spear1/gcc_stm/transactional-memory/libstdc++-v3/testsuite/util -L/proj/spear1/gcc_stm/build/i386-pc-solaris2.10/libstdc++-v3/src -L/proj/spear1/gcc_stm/build/i386-pc-solaris2.10/libstdc++-v3/src/.libs -B/proj/spear1/gcc_stm/gcc-stm/i386-pc-solaris2.10/bin/ -B/proj/spear1/gcc_stm/gcc-stm/i386-pc-solaris2.10/lib/ -isystem /proj/spear1/gcc_stm/gcc-stm/i386-pc-solaris2.10/include -isystem /proj/spear1/gcc_stm/gcc-stm/i386-pc-solaris2.10/sys-include -DHAVE_CONFIG_H -I. -I../../../transactional-memory/libitm -I../../../transactional-memory/libitm/config/i386 -I../../../transactional-memory/libitm/config/posix -I../../../transactional-memory/libitm/config/generic -I../../../transactional-memory/libitm -std=gnu++0x -funwind-tables -fno-exceptions -fno-rtti -Wall -pthread -Werror -fabi-version=4 -g -O2 -MT rwlock.lo -MD -MP -MF .deps/rwlock.Tpo -c ../../../transactional-memory/libitm/config/posix/rwlock.cc  -fPIC -DPIC -o .libs/rwlock.o../../../transactional-memory/libitm/config/posix/rwlock.cc: In constructor 'GTM::gtm_rwlock::gtm_rwlock()':../../../transactional-memory/libitm/config/posix/rwlock.cc:40:17: error: could not convert '{{0, 0, 0, 0, 19800}, {{{0}}}, 0}' to 'pthread_mutex_t'../../../transactional-memory/libitm/config/posix/rwlock.cc:40:17: error: could not convert '{{{0, 0, 0, 0}, 0, 17238}, 0}' to 'pthread_cond_t'../../../transactional-memory/libitm/config/posix/rwlock.cc:40:17: error: could not convert '{{{0, 0, 0, 0}, 0, 17238}, 0}' to 'pthread_cond_t'../../../transactional-memory/libitm/config/posix/rwlock.cc:40:17: error: could not convert '{{{0, 0, 0, 0}, 0, 17238}, 0}' to 'pthread_cond_t'gmake[4]: *** [rwlock.lo] Error 1gmake[4]: Leaving directory `/proj/spear1/gcc_stm/build/i386-pc-solaris2.10/libitm'gmake[3]: *** [all-recursive] Error 1gmake[3]: Leaving directory `/proj/spear1/gcc_stm/build/i386-pc-solaris2.10/libitm'gmake[2]: *** [all] Error 2gmake[2]: Leaving directory `/proj/spear1/gcc_stm/build/i386-pc-solaris2.10/libitm'gmake[1]: *** [all-target-libitm] Error 2gmake[1]: Leaving directory `/proj/spear1/gcc_stm/build'gmake: *** [all] Error 2</output>Any advice would be great!Thanks,Mike Spear",RESOLVED          FIXED      
50869,Alexandre Oliva,[4.7 Regression] ice in vt_expand_var_loc_chain,"Created attachment 25613 [details]C source codeI just tried to compile the package adanaxisgpl-1.2.5-6on latest trunk snapshot 20111022 on an AMD x86_64 box.The compiler saidMushRuby/eval.c: In function 'rb_funcall_rescue':MushRuby/eval.c:6072:1: internal compiler error: in vt_expand_var_loc_chain, at var-tracking.c:7798Please submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.Preprocessed source code attached. Flags -g -O2 required.",RESOLVED          FIXED      
48333,Alexandre Oliva,"-fcompare-debug failure (length) - ""memmove"" x ""__builtin_memmove""","Created attachment 23798 [details]partially reduced testcaseCompiler output:$ gcc -O -fkeep-inline-functions -fcompare-debug testcase.ii testcase.ii: In function ‘std::_Resetiosflags std::resetiosflags(std::ios_base::fmtflags)’:testcase.ii:20948:5: warning: extended initializer lists only available with -std=c++0x or -std=gnu++0x [enabled by default]testcase.ii: In function ‘std::_Setiosflags std::setiosflags(std::ios_base::fmtflags)’:testcase.ii:20966:5: warning: extended initializer lists only available with -std=c++0x or -std=gnu++0x [enabled by default]testcase.ii: In function ‘std::_Setbase std::setbase(int)’:testcase.ii:20984:5: warning: extended initializer lists only available with -std=c++0x or -std=gnu++0x [enabled by default]testcase.ii: In function ‘std::_Setfill<_CharT> std::setfill(_CharT)’:testcase.ii:21010:7: warning: extended initializer lists only available with -std=c++0x or -std=gnu++0x [enabled by default]testcase.ii: In function ‘std::_Setprecision std::setprecision(int)’:testcase.ii:21028:5: warning: extended initializer lists only available with -std=c++0x or -std=gnu++0x [enabled by default]testcase.ii: In function ‘std::_Setw std::setw(int)’:testcase.ii:21046:5: warning: extended initializer lists only available with -std=c++0x or -std=gnu++0x [enabled by default]gcc: error: testcase.ii: -fcompare-debug failure (length)$ diff testcase.*gkd24071c24071<         (call (mem:QI (symbol_ref:DI (""memmove"") [flags 0x41]  <function_decl # memmove>) [ memmove S1 A8])--->         (call (mem:QI (symbol_ref:DI (""memmove"") [flags 0x41]  <function_decl # memmove>) [ __builtin_memmove S1 A8])Reducing the testcase is very slow. I met this problem several times, but never with a small testcase.",RESOLVED          FIXED      
48093,Alexandre Oliva,#NAME?,Gcc supports -mtls-dialect=gnu2.  But it is undocumented.,RESOLVED          FIXED      
47994,Alexandre Oliva,#NAME?,"Created attachment 23548 [details]reduced testcaseCompiler output:$ gcc -O2 -fpeel-loops -fno-rerun-cse-after-loop -fno-tree-loop-optimize -fno-web -fcompare-debug testcase.c  gcc: error: testcase.c: -fcompare-debug failure (length)                  $ diff testcase.*gkd34a35> (note# 0 0 NOTE_INSN_DELETED)37,44d37<                 (plus:SI (reg/v:SI 5 di [orig:64 j ] [64])<                     (const_int 1 [0x1])))<             (clobber (reg:CC 17 flags))<         ]) testcase.c:8# {*addsi_1}<      (expr_list:REG_UNUSED (reg:CC 17 flags)<         (nil)))< (insn# 0 0 2 (parallel [<             (set (reg:SI 5 di [orig:62 prephitmp.5 ] [62])54c47<                     (const_int 80 [0x50])))--->                     (const_int 81 [0x51])))Tested revisions:r170674 - fail4.5 r170013 - fail",RESOLVED          FIXED      
47919,Alexandre Oliva,#NAME?,"Created attachment 23486 [details]auto-reduced testcaseCompiler output:$ gfortran -fgcse -frerun-cse-after-loop -O -funroll-loops -fno-tree-loop-optimize -fno-tree-ter -fno-web -fcompare-debug testcase-min1.f08 -save-tempsgfortran: error: testcase-min1.f08: -fcompare-debug failure (length)(interestingly, -funroll-loops is documented to imply -frerun-cse-after-loop, bug explicit -frerun-cse-after-loop is needed to reproduce)Tested revisions:r170522 - fail4.5 r170013 - fail",RESOLVED          FIXED      
47225,Alexandre Oliva,"[4.6 regression]: cross-compile fails while configuring libgcc with ""xgcc: fatal error: -fuse-linker-plugin, but liblto_plugin.so not found""","Cross compile 4.6.0 trunk r168599, target arm-unknown-eabi configured as:configure --target=arm-unknown-eabi --prefix=/home/joty/projects/gccsdk/riscos7/cross --with-gmp=/home/joty/projects/gccsdk/gccsdk_svn7/gcc4/builddir/installed-libs-for-cross-gcc --with-mpfr=/home/joty/projects/gccsdk/gccsdk_svn7/gcc4/builddir/installed-libs-for-cross-gcc --with-mpc=/home/joty/projects/gccsdk/gccsdk_svn7/gcc4/builddir/installed-libs-for-cross-gcc --with-system-zlib --with-ppl=/home/joty/projects/gccsdk/gccsdk_svn7/gcc4/builddir/installed-libs-for-cross-gcc --with-host-libstdcxx=-Wl,-lstdc++ --with-cloog=/home/joty/projects/gccsdk/gccsdk_svn7/gcc4/builddir/installed-libs-for-cross-gcc --enable-lto --with-libelf=/home/joty/projects/gccsdk/gccsdk_svn7/gcc4/builddir/installed-libs-for-cross-gcc --disable-threads --disable-multilib --disable-shared --with-newlib --enable-interwork --disable-nls --disable-libquadmath --enable-checking=release --enable-languages=c,c++fails while configuring arm-unknown-eabi/libgcc with:--8<--configure:3020: /home/joty/projects/gccsdk/gccsdk_svn7/gcc4/builddir/cross-gcc/./gcc/xgcc -B/home/joty/projects/gccsdk/gccsdk_svn7/gcc4/builddir/cross-gcc/./gcc/ -nostdinc -B/home/joty/projects/gccsdk/gccsdk_svn7/gcc4/builddir/cross-gcc/arm-unknown-eabi/newlib/ -isystem /home/joty/projects/gccsdk/gccsdk_svn7/gcc4/builddir/cross-gcc/arm-unknown-eabi/newlib/targ-include -isystem /home/joty/projects/gccsdk/gccsdk_svn7/gcc4/srcdir/gcc/newlib/libc/include -B/home/joty/projects/gccsdk/gccsdk_svn7/gcc4/builddir/cross-gcc/arm-unknown-eabi/libgloss/arm -L/home/joty/projects/gccsdk/gccsdk_svn7/gcc4/builddir/cross-gcc/arm-unknown-eabi/libgloss/libnosys -L/home/joty/projects/gccsdk/gccsdk_svn7/gcc4/srcdir/gcc/libgloss/arm -B/home/joty/projects/gccsdk/riscos7/cross/arm-unknown-eabi/bin/ -B/home/joty/projects/gccsdk/riscos7/cross/arm-unknown-eabi/lib/ -isystem /home/joty/projects/gccsdk/riscos7/cross/arm-unknown-eabi/include -isystem /home/joty/projects/gccsdk/riscos7/cross/arm-unknown-eabi/sys-include    -o conftest -g -O2   conftest.c  >&5xgcc: fatal error: -fuse-linker-plugin, but liblto_plugin.so not foundcompilation terminated.configure:3023: $? = 1configure:3211: checking for suffix of object filesconfigure:3233: /home/joty/projects/gccsdk/gccsdk_svn7/gcc4/builddir/cross-gcc/./gcc/xgcc -B/home/joty/projects/gccsdk/gccsdk_svn7/gcc4/builddir/cross-gcc/./gcc/ -nostdinc -B/home/joty/projects/gccsdk/gccsdk_svn7/gcc4/builddir/cross-gcc/arm-unknown-eabi/newlib/ -isystem /home/joty/projects/gccsdk/gccsdk_svn7/gcc4/builddir/cross-gcc/arm-unknown-eabi/newlib/targ-include -isystem /home/joty/projects/gccsdk/gccsdk_svn7/gcc4/srcdir/gcc/newlib/libc/include -B/home/joty/projects/gccsdk/gccsdk_svn7/gcc4/builddir/cross-gcc/arm-unknown-eabi/libgloss/arm -L/home/joty/projects/gccsdk/gccsdk_svn7/gcc4/builddir/cross-gcc/arm-unknown-eabi/libgloss/libnosys -L/home/joty/projects/gccsdk/gccsdk_svn7/gcc4/srcdir/gcc/libgloss/arm -B/home/joty/projects/gccsdk/riscos7/cross/arm-unknown-eabi/bin/ -B/home/joty/projects/gccsdk/riscos7/cross/arm-unknown-eabi/lib/ -isystem /home/joty/projects/gccsdk/riscos7/cross/arm-unknown-eabi/include -isystem /home/joty/projects/gccsdk/riscos7/cross/arm-unknown-eabi/sys-include    -c -g -O2  conftest.c >&5xgcc: fatal error: -fuse-linker-plugin, but liblto_plugin.so not foundcompilation terminated.configure:3237: $? = 1configure: failed program was:| /* confdefs.h */| #define PACKAGE_NAME ""GNU C Runtime Library""| #define PACKAGE_TARNAME ""libgcc""| #define PACKAGE_VERSION ""1.0""| #define PACKAGE_STRING ""GNU C Runtime Library 1.0""| #define PACKAGE_BUGREPORT """"| #define PACKAGE_URL ""http://www.gnu.org/software/libgcc/""| /* end confdefs.h.  */| | int| main ()| {| |   ;|   return 0;| }configure:3251: error: in `/home/joty/projects/gccsdk/gccsdk_svn7/gcc4/builddir/cross-gcc/arm-unknown-eabi/libgcc':configure:3254: error: cannot compute suffix of object files: cannot compileSee `config.log' for more details.--8<--There is indeed no liblto_plugin.so found in my build tree.With r168592 I had the last confirmed successful build.",RESOLVED          FIXED      
42630,Alexandre Oliva,"""-fcompare-debug failure (length)"" with ""-O1 -fvariable-expansion-in-unroller -funroll-loops""",Can be related to pr42629Command line:gcc -O1 -fvariable-expansion-in-unroller -funroll-loops -fcompare-debug -c testcase.cTested revisions (x86_64):r155643 - crashr155290 - crash (x86)r154886 - crashr153685 - crashOutput:/mnt/svn/gcc-trunk/binary-155643-lto/bin/gcc -O1 -fvariable-expansion-in-unroller -funroll-loops -fcompare-debug -c testcase.cgcc: testcase.c: -fcompare-debug failure (length),RESOLVED          FIXED      
42078,Alexandre Oliva,[4.5 Regression] ICE in gimple_assign_set_rhs_code,"I just tried to compile Suse Linux package fontforge-20090622-4.1with gcc version 4.5 snapshot 20091112 and the build saidnowakowskittfinstr.c: In function 'InterpolateAlongDiag':nowakowskittfinstr.c:4440:15: internal compiler error: gimple check: expected gimple_assign(error_mark), have gimple_debug() in gimple_assign_set_rhs_code, at gimple.h:1830Please submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.Preprocessed source code attached. Flags -g -O2 -ffast-math required.",RESOLVED          FIXED      
41886,Alexandre Oliva,[4.5 Regression] ICE from '-O -ftree-loop-distribution -ftree-vectorize -g',"gcc -B. -r -nostdlib mibitblt.i -v -Wall -Wextra -O -ftree-loop-distribution -ftree-vectorize -gUsing built-in specs.COLLECT_GCC=gccCOLLECT_LTO_WRAPPER=/usr/local/libexec/gcc/x86_64-unknown-linux-gnu/4.5.0/lto-wrapperTarget: x86_64-unknown-linux-gnuConfigured with: /home/b3po/build/gcc/gcc/configure --with-mpfr=/usr/local --with-gmp=/usr/local --with-ppl=/usr/local --with-cloog=/usr/local --with-mpc=/usr/local --with-libelf=/usr/local --enable-languages=c,c++ --enable-__cxa_atexit --enable-targets=allThread model: posixgcc version 4.5.0 20091028 (experimental) (GCC) COLLECT_GCC_OPTIONS='-B.' '-r' '-nostdlib' '-v' '-Wall' '-Wextra' '-O' '-ftree-loop-distribution' '-ftree-vectorize' '-g' '-mtune=generic' /usr/local/libexec/gcc/x86_64-unknown-linux-gnu/4.5.0/cc1 -fpreprocessed mibitblt.i -quiet -dumpbase mibitblt.i -mtune=generic -auxbase mibitblt -g -O -Wall -Wextra -version -ftree-loop-distribution -ftree-vectorize -o /tmp/ccnvEgpM.sGNU C (GCC) version 4.5.0 20091028 (experimental) (x86_64-unknown-linux-gnu)        compiled by GNU C version 4.5.0 20091028 (experimental), GMP version 4.3.1, MPFR version 2.4.1, MPC version 0.7GGC heuristics: --param ggc-min-expand=30 --param ggc-min-heapsize=4096GNU C (GCC) version 4.5.0 20091028 (experimental) (x86_64-unknown-linux-gnu)        compiled by GNU C version 4.5.0 20091028 (experimental), GMP version 4.3.1, MPFR version 2.4.1, MPC version 0.7GGC heuristics: --param ggc-min-expand=30 --param ggc-min-heapsize=4096Compiler executable checksum: c30658ecf2032071e4fe041bf17f02demibitblt.c: In function ‘miGetImage’:mibitblt.c:662:34: warning: comparison between signed and unsigned integer expressionsmibitblt.c: In function ‘miPutImage’:mibitblt.c:825:15: warning: comparison between signed and unsigned integer expressionsmibitblt.c: In function ‘miOpqStipDrawable’:mibitblt.c:404:1: error: definition in block 10 does not dominate use in block 39for SSA_NAME: ppt_1 in statement:# DEBUG D#2 => ppt_1 + 4mibitblt.c:404:1: internal compiler error: verify_ssa failed",RESOLVED          FIXED      
41888,Alexandre Oliva,[4.5 Regression] ICE from '-O -ftree-loop-distribution -fgraphite-identity -g',"gcc -B. -r -nostdlib edid.i -v -Wall -Wextra -O -ftree-loop-distribution -fgraphite-identity -gUsing built-in specs.COLLECT_GCC=gccCOLLECT_LTO_WRAPPER=/usr/local/libexec/gcc/x86_64-unknown-linux-gnu/4.5.0/lto-wrapperTarget: x86_64-unknown-linux-gnuConfigured with: /home/b3po/build/gcc/gcc/configure --with-mpfr=/usr/local --with-gmp=/usr/local --with-ppl=/usr/local --with-cloog=/usr/local --with-mpc=/usr/local --with-libelf=/usr/local --enable-languages=c,c++ --enable-__cxa_atexit --enable-targets=allThread model: posixgcc version 4.5.0 20091028 (experimental) (GCC) COLLECT_GCC_OPTIONS='-B.' '-r' '-nostdlib' '-v' '-Wall' '-Wextra' '-O' '-ftree-loop-distribution' '-fgraphite-identity' '-g' '-mtune=generic' /usr/local/libexec/gcc/x86_64-unknown-linux-gnu/4.5.0/cc1 -fpreprocessed edid.i -quiet -dumpbase edid.i -mtune=generic -auxbase edid -g -O -Wall -Wextra -version -ftree-loop-distribution -fgraphite-identity -o /tmp/ccioPiLW.sGNU C (GCC) version 4.5.0 20091028 (experimental) (x86_64-unknown-linux-gnu)        compiled by GNU C version 4.5.0 20091028 (experimental), GMP version 4.3.1, MPFR version 2.4.1, MPC version 0.7GGC heuristics: --param ggc-min-expand=30 --param ggc-min-heapsize=4096GNU C (GCC) version 4.5.0 20091028 (experimental) (x86_64-unknown-linux-gnu)        compiled by GNU C version 4.5.0 20091028 (experimental), GMP version 4.3.1, MPFR version 2.4.1, MPC version 0.7GGC heuristics: --param ggc-min-expand=30 --param ggc-min-heapsize=4096Compiler executable checksum: c30658ecf2032071e4fe041bf17f02deedid.c: In function ‘GetEDID_DDC1’:edid.c:25:1: internal compiler error: in check_loop_closed_ssa_use, at tree-ssa-loop-manip.c:424",RESOLVED          FIXED      
41926,Alexandre Oliva,[4.5 Regression][VTA] internal compiler error: verify_ssa failed,"compiling with current trunk:MODULE hfx_contract_block  INTEGER, PARAMETER :: dp=KIND(0.0D0)CONTAINS  SUBROUTINE block_4_1_1_1(kbd,kbc,kad,kac,pbd,pbc,pad,pac,prim,scale)    REAL(KIND=dp) :: kbd(1*1), kbc(1*1), kad(4*1), kac(4*1), pbd(1*1), &      pbc(1*1), pad(4*1), pac(4*1), prim(4*1*1*1), scale    INTEGER                                  :: ma, mb, mc, md, p_index    REAL(KIND=dp)                            :: ks_bc, ks_bd, p_bc, p_bd, tmp      DO md = 1,1        DO mc = 1,1          DO mb = 1,1            DO ma = 1,4              p_index=p_index+1              tmp = scale*prim(p_index)              kad((md-1)*4+ma) =  kad((md-1)*4+ma)-tmp*p_bc              kac((mc-1)*4+ma) = kac((mc-1)*4+ma)-tmp*p_bd            END DO          END DO        END DO      END DO  END SUBROUTINE block_4_1_1_1END MODULE hfx_contract_blockleads togfortran -c -g -O2 -ffast-math -funroll-loops -ftree-vectorize -march=native -ffree-form bug.f90bug.f90: In function ‘block_4_1_1_1’:bug.f90:4:0: error: definition in block 8 does not dominate use in block 14for SSA_NAME: p_index_17 in statement:# DEBUG p_index => p_index_17bug.f90:4:0: internal compiler error: verify_ssa failedPlease submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.more details:arget: x86_64-unknown-linux-gnuConfigured with: /data03/vondele/gcc_trunk/gcc/configure --disable-bootstrap --prefix=/data03/vondele/gcc_trunk/build --enable-languages=c,c++,fortran --disable-multilib --with-ppl=/data03/vondele/gcc_trunk/build/ --with-cloog=/data03/vondele/gcc_trunk/build/ --with-libelf=/data03/vondele/libelf-0.8.12/build/ --enable-gold --enable-lto --enable-pluginsThread model: posixgcc version 4.5.0 20091103 (experimental) [trunk revision 153852] (GCC) COLLECT_GCC_OPTIONS='-c' '-g' '-O2' '-ffast-math' '-funroll-loops' '-ffree-form' '-v' '-mtune=generic' /data03/vondele/gcc_trunk/build/libexec/gcc/x86_64-unknown-linux-gnu/4.5.0/f951 bug.f90 -quiet -dumpbase bug.f90 -mtune=generic -auxbase bug -g -O2 -version -ffast-math -funroll-loops -ffree-form -fintrinsic-modules-path /data03/vondele/gcc_trunk/build/lib/gcc/x86_64-unknown-linux-gnu/4.5.0/finclude -o /tmp/ccVISL4z.s",RESOLVED          FIXED      
41739,Alexandre Oliva,[4.5 Regression] Failed to bootstrap on Linux/ia64,"Revision 152933 gave:/export/gnu/import/svn/gcc-test/bld/./prev-gcc/xgcc -B/export/gnu/import/svn/gcc-test/bld/./prev-gcc/ -B/usr/local/ia64-unknown-linux-gnu/bin/ -B/usr/local/ia64-unknown-linux-gnu/bin/ -B/usr/local/ia64-unknown-linux-gnu/lib/ -isystem /usr/local/ia64-unknown-linux-gnu/include -isystem /usr/local/ia64-unknown-linux-gnu/sys-include    -c  -DUSE_LIBUNWIND_EXCEPTIONS -g -O2 -DIN_GCC   -W -Wall -Wwrite-strings -Wcast-qual -Wstrict-prototypes -Wmissing-prototypes -Wmissing-format-attribute -pedantic -Wno-long-long -Wno-variadic-macros -Wno-overlength-strings -Werror -Wold-style-definition -Wc++-compat -fno-common  -DHAVE_CONFIG_H -I. -I. -I../../src-trunk/gcc -I../../src-trunk/gcc/. -I../../src-trunk/gcc/../include -I../../src-trunk/gcc/../libcpp/include  -I../../src-trunk/gcc/../libdecnumber -I../../src-trunk/gcc/../libdecnumber/dpd -I../libdecnumber   -I/usr/include/libelf  ../../src-trunk/gcc/function.c -o function.o../../src-trunk/gcc/function.c: In function 'expand_function_end':../../src-trunk/gcc/function.c:4862:1: internal compiler error: in ds_merge_1, at sched-deps.c:3845Please submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.make[6]: *** [function.o] Error 1Revision 152923 is OK. It may be caused by revision 152927:http://gcc.gnu.org/ml/gcc-cvs/2009-10/msg00580.html",RESOLVED          FIXED      
41535,Alexandre Oliva,[4.5 Regression] Broken var location info after scheduling,"On s390x I see broken debug info generated for the attached C++testcase (compile with -O2 -g -fPIC).The debug info contains a symbol reference with a @GOTENT modifierwhat should not happen (and is not accepted by gas):.LLST3:	.8byte	.LVL3-.Ltext0	.8byte	.LVL4-.Ltext0	.2byte	0xa	.byte	0x9e	.uleb128 0x8	.8byte	_ZTISt12future_error@GOTENT	.8byte	0x0	.8byte	0x0The problem is that the sched2 pass breaks the variable locationinformation by moving an insn setting r1 over a var_location debuginsn describing a variable location as being r1.in 202.split4:29:	var_location r1033:	var_location r13 + 834:	var_location r1030:	r1 = &(A got entry)31:	r1 = [r1]83:	[r13] = r232:	r1 = [r1]35:	var_location A => r1  <-- problematic location information 36:	[r13 + 8] = r1037:	[r13 + 16] = r179:	r1 = &(B got entry)41:	r3 = [r1]in 203.sched2:...32:	r1 = [r1]37:	[r13 + 16] = r179:	r1 = &(B got entry)  <-- insn moved over 3583:	[r13] = r229:	var_location r1033:	var_location r13 + 834:	var_location r1035:	var_location r1  !!! the variable location gets corrupted		     	 since insn 79 has been moved over it36:	[r13 + 8] = r1041:	r3 = [r1]The variable locations are intended to stay right after the insn whichdoes the relevant assignment by generating an ANTI dep between thembut we also create deps between unrelated insns:sched-deps.c:2790    if (prev && NONDEBUG_INSN_P (prev))      add_dependence (insn, prev, REG_DEP_ANTI);This code creates a dependency between 83 and 29 (although theassignment is unrelated). This together with the fact that all debuginsns are always been kept from being moved over each other makes allthe debug insns to get stuck after insn 83. Although in order to keepthe information correct insn 35 has to stay after 32.",RESOLVED          FIXED      
41338,Alexandre Oliva,High memory consumption when compiling with -O3 -g,"GCC 4.5.0 20090910, compile with `cc1 -O3 -g tree.i' command.",RESOLVED          FIXED      
41447,Alexandre Oliva,Wrong debug with VTA on temporaries initialized from memory variable,"As reported by Richard inint a;int foo(){  int tmp = a;  int tmp2 = a;  int tmp3;  int res;  a = 0;  tmp3 = tmp2;  res = tmp - tmp2 + 1;  return res;}results in wrong-debug with -O2 -g.  Having # DEBUG tmp3 => aafter a = 0 is wrong certainly already at gimple levels, while # DEBUG tmp1 => aand # DEBUG tmp2 => a could be in theory handled only at the var-tracking level, but even there var-tracking fails to notice that the a = 0 store can clobber the memory (i.e. that the VALUE should be clobbered, and in theory e.g. most calls should be considered to clobber non-stack MEMs etc., as usually) and add notes that tmp1/tmp2 don't have known values anymore.",RESOLVED          FIXED      
41616,Alexandre Oliva,Variables promoted to Gimple registers by aliasing are not getting debug statements.,"In the following testcase:inline int f(int *a){  return *a;}main(){  int b=1;  return f(&b);}We ought to be able to track that value of ""b"" is 1.  However we do not:main (){<bb 2>:  # DEBUG a => &b  return 1;}",RESOLVED          FIXED      
41353,Alexandre Oliva,VTA missed-debug issues,"PR41343 testcase lead me to look at 3 small testcases showing VTA throwing debug info on the floor (-gdwarf-4 -O2 in all cases):intfoo (int i, int j){  int i1 = 2 * i;  int i2 = 3 * i;  return j;}Above is a problem already during RTL expansion, SSA_NAME i_1 (of PARM_DECL i, with GIMPLE_NOP in SSA_NAME_DEF_STMT) is expanded to NULL by expand_debug_expr, because var_to_partition returns NO_PARTITION for it.  I think we could special case the initial SSA_NAMEs of parameters and expand them as the parameters.int i = 1, j;intfoo (void){  int i1 = 2 * i;  int i2 = 3 * i;  return j;}In this case we emit i2 debug info correctly:        .byte   0x3     # DW_OP_addr        .quad   i        .byte   0x6     # DW_OP_deref        .byte   0x33    # DW_OP_lit3        .byte   0x1e    # DW_OP_mul        .byte   0x9f    # DW_OP_stack_value        .byte   0x93    # DW_OP_piece        .uleb128 0x4but i1 is lost (has empty location list).  In *.compgotos things look still good to me:(debug_insn 5 2 6 2 d.c:6 (var_location:SI i1 (mult:SI (mem/c/i:SI (symbol_ref:DI (""i"") [flags 0x2] <var_decl 0x7f36e4772820 i>) [2 i+0 S4 A32])        (const_int 2 [0x2]))) -1 (nil))(debug_insn 6 5 12 2 d.c:7 (var_location:SI i2 (mult:SI (mem/c/i:SI (symbol_ref:DI (""i"") [flags 0x2] <var_decl 0x7f36e4772820 i>) [2 i+0 S4 A32])        (const_int 3 [0x3]))) -1 (nil))are the only places where i1 and i2 are mentioned.  But var-tracking messes it up:(note 24 2 23 2 (var_location i1 (expr_list:REG_DEP_TRUE (ashift:SI (mem/c/i:SI (symbol_ref:DI (""i"") [flags 0x2] <var_decl 0x7f36e4772820 i>) [2 i+0 S4 A32])        (const_int 1 [0x1]))    (const_int 0 [0x0]))) NOTE_INSN_VAR_LOCATION)(note 23 24 25 2 (var_location i1 (nil)) NOTE_INSN_VAR_LOCATION)(note 25 23 12 2 (var_location i2 (expr_list:REG_DEP_TRUE (mult:SI (mem/c/i:SI (symbol_ref:DI (""i"") [flags 0x2] <var_decl 0x7f36e4772820 i>) [2 i+0 S4 A32])        (const_int 3 [0x3]))    (const_int 0 [0x0]))) NOTE_INSN_VAR_LOCATION)(note the second i1 note).And my last testcase is:int i, j;intfoo (void){  int i1 = 2 * i;  int i2 = 3 * i;  return j;}Here info is dropped at RTL expansion time, as the VAR_DECL doesn't have RTL set yet during the expansion.  It is common though, so it will be emitted in the current TU anyway.  Another case would be extern int i, j; where it is questionable if the debug info should reference an external variable which wouldn't be mentioned anywhere in the TU.",RESOLVED          FIXED      
41245,Alexandre Oliva,[4.5 Regression] Bootstrap broken on I386-apple-darwin9 at revision 151373,"Subject says it all; i386-apple-darwin is a primary platform.Comparing stages 2 and 3warning: gcc/cc1-checksum.o differsBootstrap comparison failure!gcc/tree.o differsThe output of ""../trunk/contrib/compare-debug --preserve stage[23]-gcc/tree.o"" is long, so I'll attach it, but the end of it says:stage2-gcc/tree.o.stripped stage3-gcc/tree.o.stripped differ: char 529, line 4stripping off .eh_frame, then retryingfailed to strip off .eh_framestage2-gcc/tree.o.stripped stage3-gcc/tree.o.stripped differ: char 529, line 4preserving stage2-gcc/tree.o.stripped stage3-gcc/tree.o.strippedI also did a dwarfdump of both stripped files, and the difference between those two is minimal:--- dwarfdump2	2009-09-03 15:55:53.000000000 +0200+++ dwarfdump3	2009-09-03 15:55:57.000000000 +0200@@ -1,5 +1,5 @@ ----------------------------------------------------------------------- File: stage2-gcc/tree.o.stripped (i386)+ File: stage3-gcc/tree.o.stripped (i386) ---------------------------------------------------------------------- .debug_info contents: @@ -32812,7 +32812,7 @@  0x0001c7d3:         TAG_lexical_block [88] *                      AT_ranges( 0x00000240-                        [0x00001328 - 0x00001395)+                        [0x0000132c - 0x00001395)                         [0x00001398 - 0x0000139a)                          End ) So I guess this should be easier to understand than the corresponding powerpc issue (41224).",RESOLVED          FIXED      
41248,Alexandre Oliva,[4.5 Regression] VTA: Assertion at 2910 of cfgexpand.c (expand_debug_locations),"On ia64-hp-hpux11.23, which supports a 32 and 64 bit mode, I get an assertion failure during bootstrap.  This is with version 151382.insn is:(debug_insn 52 51 53 9 /proj/opensrc/nightly/src/trunk/libgcc/../gcc/gcov-io.c:238 (var_location:SI result (high (nil))) -1 (nil))val is:(plus:DI (const:DI (plus:DI (symbol_ref:DI (""__gcov_var"") [flags 0x2] <var_decl 7b50cba0 __gcov_var>)            (const_int 12 [0xc])))    (mult:SI (plus:SI (reg:SI 340 [ prephitmp.26 ])            (const_int 4 [0x4]))        (const_int 4 [0x4])))So the modes do not match.  I am compiling in 32 bit mode, so ptr_mode is SImode but Pmode is DImode.",RESOLVED          FIXED      
41097,Alexandre Oliva,Inlined variable debug location disappears when ptr type,"The following example produced an inlined block with local variables that contain correct location expressions (-g -O2):#include <stdio.h>#include <stdint.h>static inline voidm(char *name, int i, int j){// Random syntactical block to be inlined.do {  volatile int p_i = i;  volatile int p_j = j;  // Change this to void * or char * and var debugloc disappears!?!  volatile uintptr_t p_name = (uintptr_t) name;  // empty asm to force locals into regs.  inlined_label: asm volatile ("""" :: ""g""(p_name), ""g""(p_i), ""g""(p_j));  printf(""%s: (%d,%d)\n"", p_name, p_i, p_j);} while (0);}intmain (int argc, char **argv){  m(""call"", 40, 23);  return 0;}$ gcc -g -O2 i.c$ readelf -w a.out[...] <5><3d4>: Abbrev Number: 28 (DW_TAG_variable)    <3d5>   DW_AT_abstract_origin: <0x30f>          <3d9>   DW_AT_location    : 2 byte block: 91 6c     (DW_OP_fbreg: -20) <5><3dc>: Abbrev Number: 28 (DW_TAG_variable)    <3dd>   DW_AT_abstract_origin: <0x31a>          <3e1>   DW_AT_location    : 2 byte block: 91 68     (DW_OP_fbreg: -24) <5><3e4>: Abbrev Number: 28 (DW_TAG_variable)    <3e5>   DW_AT_abstract_origin: <0x325>          <3e9>   DW_AT_location    : 2 byte block: 91 60     (DW_OP_fbreg: -32)[...]But if you change the type of p_name to char * (which would be more natural and was what the original code did), the DW_AT_location of p_name disappears:[... as above ...]volatile char *p_name = name;[...]$ gcc -g -O2 i.c$ readelf -w a.out[...] <5><3cf>: Abbrev Number: 28 (DW_TAG_variable)    <3d0>   DW_AT_abstract_origin: <0x304>          <3d4>   DW_AT_location    : 2 byte block: 91 6c     (DW_OP_fbreg: -20) <5><3d7>: Abbrev Number: 28 (DW_TAG_variable)    <3d8>   DW_AT_abstract_origin: <0x30f>          <3dc>   DW_AT_location    : 2 byte block: 91 68     (DW_OP_fbreg: -24) <5><3df>: Abbrev Number: 29 (DW_TAG_variable)    <3e0>   DW_AT_abstract_origin: <0x31a>      [...]Note, no DW_AT_location for the last variable (p_name), just a DW_AT_abstract_origin. The other vars (p_i and p_j) still do have both abstract_origin and location).",RESOLVED          FIXED      
41295,Alexandre Oliva,[4.5 Regression] gfortran.dg/loc_2.f90 -O3 -g fails on SH with orphaned debug_insn,"After vta merge, gfortran.dg/loc_2.f90 fails on sh4-unknown-linux-gnufor -O3 -g withloc_2.f90:114:0: internal compiler error: in reload_combine_note_use, at postreload.c:1097which is the result ofpostreload.c:1097            gcc_assert (regno < FIRST_PSEUDO_REGISTER);The problematic regno 1434 came from a debug insn(debug_insn 1346 1344 1350 3 loc_2.f90:46 (var_location:SI offset (reg:SI 1434 [ ivtmp.132 ])) -1 (nil))which looks orphaned at postreload pass.  There are no other insnsreferring to reg 1434 at that pass.",RESOLVED          FIXED      
41229,Alexandre Oliva,[4.5 Regression] VTA: internal compiler error: verify_ssa failed,"current trunk:> gfortran -cpp -c -fvar-tracking-assignments -O2 bug.f90bug.f90: In function ‘cp_fm_triangular_multiply’:bug.f90:1:0: error: expected an SSA_NAME objectbug.f90:1:0: error: in statement# DEBUG istat => stat.0bug.f90:1:0: internal compiler error: verify_ssa failedPlease submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.> cat bug.f90SUBROUTINE cp_fm_triangular_multiply()    INTEGER, PARAMETER :: dp=KIND(0.0D0)    REAL(dp), ALLOCATABLE, DIMENSION(:)      :: tau, work    REAL(KIND=dp), DIMENSION(:, :), POINTER  :: a    ndim = SIZE(a,2)    ALLOCATE(tau(ndim),STAT=istat)    ALLOCATE(work(2*ndim),STAT=istat)END SUBROUTINE",RESOLVED          FIXED      
41276,Alexandre Oliva,[4.5 Regression] Segmentation fault in lookup_page_table_entry,"/test/gnu/gcc/objdir/./prev-gcc/xgcc -B/test/gnu/gcc/objdir/./prev-gcc/ -B/opt/gnu64/gcc/gcc-4.5.0/hppa64-hp-hpux11.11/bin/ -B/opt/gnu64/gcc/gcc-4.5.0/hppa64-hp-hpux11.11/bin/ -B/opt/gnu64/gcc/gcc-4.5.0/hppa64-hp-hpux11.11/lib/ -isystem /opt/gnu64/gcc/gcc-4.5.0/hppa64-hp-hpux11.11/include -isystem /opt/gnu64/gcc/gcc-4.5.0/hppa64-hp-hpux11.11/sys-include    -c  -g -O2 -DIN_GCC   -W -Wall -Wwrite-strings -Wcast-qual -Wstrict-prototypes -Wmissing-prototypes -Wmissing-format-attribute -pedantic -Wno-long-long -Wno-variadic-macros -Wno-overlength-strings -Werror -Wold-style-definition -Wc++-compat -fno-common  -DHAVE_CONFIG_H -I. -I. -I../../gcc/gcc -I../../gcc/gcc/. -I../../gcc/gcc/../include -I../../gcc/gcc/../libcpp/include -I/opt/gnu64/gcc/gcc-4.5.0/include  -I../../gcc/gcc/../libdecnumber-I../../gcc/gcc/../libdecnumber/dpd -I../libdecnumber    ../../gcc/gcc/cse.c -ocse.o../../gcc/gcc/cse.c: In function 'canon_reg':../../gcc/gcc/cse.c:2947:1: internal compiler error: Segmentation faultUnder gdb, we have:Starting program: /test/gnu/gcc/objdir/prev-gcc/cc1 -I. -I. -I../../gcc/gcc -I../../gcc/gcc/. -I../../gcc/gcc/../include -I../../gcc/gcc/../libcpp/include -I/opt/gnu64/gcc/gcc-4.5.0/include -I../../gcc/gcc/../libdecnumber -I../../gcc/gcc/../libdecnumber/dpd -I../libdecnumber -iprefix /test/gnu/gcc/objdir/prev-gcc/../lib/gcc/hppa64-hp-hpux11.11/4.5.0/ -isystem /test/gnu/gcc/objdir/./prev-gcc/include -isystem /test/gnu/gcc/objdir/./prev-gcc/include-fixed -DIN_GCC -DHAVE_CONFIG_H -isystem /opt/gnu64/gcc/gcc-4.5.0/hppa64-hp-hpux11.11/include -isystem /opt/gnu64/gcc/gcc-4.5.0/hppa64-hp-hpux11.11/sys-include ../../gcc/gcc/cse.c  -dumpbase cse.c -auxbase-strip cse.s -g -O2 -W -Wall -Wwrite-strings -Wcast-qual -Wstrict-prototypes -Wmissing-prototypes -Wmissing-format-attribute -pedantic -Wno-long-long -Wno-variadic-macros -Wno-overlength-strings -Werror -Wold-style-definition -Wc++-compat -version -fno-common -o cse.s -quietwarning: Private mapping of shared library text was not specifiedby the executable; setting a breakpoint in a shared library whichis not privately mapped will not work.  See the HP-UX 11i v3 chatrmanpage for methods to privately map shared library text.warning: Loadable segment "".tbss"" outside of ELF segmentswarning: Loadable segment "".tbss"" outside of ELF segmentsGNU C (GCC) version 4.5.0 20090905 (experimental) [trunk revision 151445] (hppa64-hp-hpux11.11)        compiled by GNU C version 4.3.3, GMP version 4.3.1, MPFR version 2.4.1GGC heuristics: --param ggc-min-expand=30 --param ggc-min-heapsize=4096GNU C (GCC) version 4.5.0 20090905 (experimental) [trunk revision 151445] (hppa64-hp-hpux11.11)        compiled by GNU C version 4.3.3, GMP version 4.3.1, MPFR version 2.4.1GGC heuristics: --param ggc-min-expand=30 --param ggc-min-heapsize=4096Compiler executable checksum: 902df5a7f01231b647007075d5f10e0dProgram received signal SIGSEGV, Segmentation fault.0x4000000000a548e4 in lookup_page_table_entry (p=Cannot access memory at address 0x0)    at ../../gcc/gcc/ggc-page.c:580580       while (table->high_bits != high_bits)(gdb) p table$20 = (page_table) 0x0The fault occurs in the first call to lookup_page_table_entry.We have the following when the code first reaches line 581:Breakpoint 5, lookup_page_table_entry (p=0x245265766973696f)    at ../../gcc/gcc/ggc-page.c:581581         table = table->next;(gdb) p/x $r26$21 = 0x8000000100345520(gdb) p/x high_bits$22 = 0x8000000100000000(gdb) p/x table->high_bits$23 = 0x800003ff00000000(gdb) p/x table->next$24 = 0x0Have to think the value passed in $r26 is garbage.Breakpoint 5, lookup_page_table_entry (p=0x245265766973696f)    at ../../gcc/gcc/ggc-page.c:581581         table = table->next;(gdb) bt#0  lookup_page_table_entry (p=0x245265766973696f)    at ../../gcc/gcc/ggc-page.c:581#1  0x4000000000a55f40 in ggc_set_mark (p=0x8000000100345520)    at ../../gcc/gcc/ggc-page.c:1319#2  0x400000000143bbc0 in gt_ggc_mx_rtx_def (x_p=0x245265766973696f)    at gtype-desc.c:1220#3  0x400000000143f014 in gt_ggc_mx_rtx_def (x_p=0x245265766973696f)    at gtype-desc.c:1790#4  0x400000000143e850 in gt_ggc_mx_rtx_def (x_p=0x245265766973696f)    at gtype-desc.c:1709#5  0x4000000001437318 in gt_ggc_mx_rtl_bb_info (x_p=0x245265766973696f)    at gtype-desc.c:319#6  0x4000000001439f68 in gt_ggc_mx_basic_block_def (x_p=0x245265766973696f)    at gtype-desc.c:929#7  0x4000000001437e00 in gt_ggc_mx_control_flow_graph (    x_p=0x245265766973696f) at gtype-desc.c:450#8  0x4000000001439450 in gt_ggc_mx_function (x_p=0x245265766973696f)    at gtype-desc.c:788#9  0x40000000006e2730 in gt_ggc_mx_lang_tree_node (x_p=0x245265766973696f)    at ./gt-c-decl.h:405#10 0x40000000006e2828 in gt_ggc_mx_lang_tree_node (x_p=0x245265766973696f)    at ./gt-c-decl.h:412#11 0x40000000006e2828 in gt_ggc_mx_lang_tree_node (x_p=0x245265766973696f)---Type <return> to continue, or q <return> to quit---    at ./gt-c-decl.h:412#12 0x40000000006e2400 in gt_ggc_mx_lang_tree_node (x_p=0x245265766973696f)    at ./gt-c-decl.h:388#13 0x4000000001436d64 in gt_ggc_mx_cgraph_node (x_p=0x245265766973696f)    at gtype-desc.c:264#14 0x4000000001440e98 in gt_ggc_m_P11cgraph_node4htab (    x_p=0x245265766973696f) at gtype-desc.c:2228#15 0x4000000001292280 in ggc_mark_roots () at ../../gcc/gcc/ggc-common.c:137#16 0x4000000000a57ba8 in ggc_collect () at ../../gcc/gcc/ggc-page.c:1944#17 0x40000000017feb30 in execute_todo (flags=1073741824)    at ../../gcc/gcc/passes.c:1063#18 0x40000000017ffbe0 in execute_one_pass (pass=0x4000000000419d48)    at ../../gcc/gcc/passes.c:1315#19 0x40000000017ffdc4 in execute_pass_list (pass=0x245265766973696f)    at ../../gcc/gcc/passes.c:1341#20 0x40000000017ffe08 in execute_pass_list (pass=0x245265766973696f)    at ../../gcc/gcc/passes.c:1342#21 0x40000000017ffe08 in execute_pass_list (pass=0x245265766973696f)    at ../../gcc/gcc/passes.c:1342#22 0x400000000231a130 in tree_rest_of_compilation (fndecl=0x4000000000419d48)    at ../../gcc/gcc/tree-optimize.c:390#23 0x4000000003477938 in cgraph_expand_function (node=0x4000000000419d48)    at ../../gcc/gcc/cgraphunit.c:1147---Type <return> to continue, or q <return> to quit---#24 0x4000000003477c78 in cgraph_expand_all_functions ()    at ../../gcc/gcc/cgraphunit.c:1206#25 0x4000000003478814 in cgraph_optimize ()    at ../../gcc/gcc/cgraphunit.c:1429#26 0x4000000003477468 in cgraph_finalize_compilation_unit ()    at ../../gcc/gcc/cgraphunit.c:1078#27 0x40000000006df120 in c_write_global_declarations ()    at ../../gcc/gcc/c-decl.c:9378#28 0x4000000001df1704 in compile_file () at ../../gcc/gcc/toplev.c:1050#29 0x4000000001df5d94 in do_compile () at ../../gcc/gcc/toplev.c:2377#30 0x4000000001df5f98 in toplev_main (argc=49, argv=0x800003fffdff0828)    at ../../gcc/gcc/toplev.c:2419#31 0x40000000009e6954 in main (argc=609379702, argv=0x6e3a203932343533)    at ../../gcc/gcc/main.c:35",RESOLVED          FIXED      
41232,Alexandre Oliva,[4.5 Regression] VTA: SSA name in freelist but still referenced,"gcc version 4.5.0 20090902 (experimental) [trunk revision 151353] (GCC)$ cat ice.ivoid malloc_init() {  char *cptr;  char buf[1];  int tmbd = atoi(cptr);  if (tmbd > 0)    tmbd = (tmbd <= 124) ? tmbd : 124;   else    tmbd = 0;   sprintf(buf, ""%d\n"", tmbd);}$ ./xgcc -B. -O1 ice.i -c ice.i: In function 'malloc_init':ice.i:9:4: warning: incompatible implicit declaration of built-in function 'sprintf'$ ./xgcc -B. -O1 -fvar-tracking-assignments ice.i -cice.i: In function 'malloc_init':ice.i:9:4: warning: incompatible implicit declaration of built-in function 'sprintf'ice.i:1:6: error: SSA name in freelist but still referencedtmbd_4cc1: note: in statementtmbd_9 = MAX_EXPR <tmbd_4, 0>;ice.i:1:6: internal compiler error: Segmentation faultPlease submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.",RESOLVED          FIXED      
41224,Alexandre Oliva,[4.5 Regression] Bootstrap broken on powerpc-apple-darwin9 at revision 151318,"At revision 151318 bootstrap fails on powerpc-apple-darwin9 (see also http://gcc.gnu.org/ml/gcc-regression/2009-09/msg00015.html) with:info --split-size=5000000 --split-size=5000000""  comparerm -f stage_currentComparing stages 2 and 3warning: gcc/cc1-checksum.o differswarning: gcc/cc1obj-checksum.o differswarning: gcc/cc1objplus-checksum.o differswarning: gcc/cc1plus-checksum.o differsBootstrap comparison failure!gcc/alias.o differsgcc/alloc-pool.o differsgcc/attribs.o differsgcc/auto-inc-dec.o differsgcc/bb-reorder.o differsgcc/bitmap.o differsgcc/bt-load.o differsgcc/build/errors.o differsgcc/build/gcov-iov.o differsgcc/build/genattr.o differsgcc/build/genattrtab.o differsgcc/build/genautomata.o differsgcc/build/gencheck.o differsgcc/build/genchecksum.o differsgcc/build/gencodes.o differsgcc/build/genconditions.o differsgcc/build/gencondmd.o differsgcc/build/genconfig.o differsgcc/build/genconstants.o differsgcc/build/genemit.o differsgcc/build/genextract.o differsgcc/build/genflags.o differsgcc/build/gengenrtl.o differsgcc/build/gengtype-lex.o differsgcc/build/gengtype-parse.o differsgcc/build/gengtype.o differsgcc/build/genmddeps.o differsgcc/build/genmodes.o differsgcc/build/genopinit.o differsgcc/build/genoutput.o differsgcc/build/genpeep.o differsgcc/build/genpreds.o differsgcc/build/genrecog.o differsgcc/build/gensupport.o differsgcc/build/ggc-none.o differsgcc/build/min-insn-modes.o differsgcc/build/print-rtl.o differsgcc/build/read-rtl.o differsgcc/build/rtl.o differsgcc/build/vec.o differsgcc/builtins.o differsgcc/c-aux-info.o differsgcc/c-common.o differsgcc/c-convert.o differsgcc/c-cppbuiltin.o differsgcc/c-decl.o differsgcc/c-dump.o differsgcc/c-errors.o differsgcc/c-format.o differsgcc/c-gimplify.o differsgcc/c-lang.o differsgcc/c-lex.o differsgcc/c-objc-common.o differsgcc/c-omp.o differsgcc/c-opts.o differsgcc/c-parser.o differsgcc/c-pch.o differsgcc/c-ppoutput.o differsgcc/c-pragma.o differsgcc/c-pretty-print.o differsgcc/c-semantics.o differsgcc/c-typeck.o differsgcc/caller-save.o differsgcc/calls.o differsgcc/cfg.o differsgcc/cfganal.o differsgcc/cfgbuild.o differsgcc/cfgcleanup.o differsgcc/cfgexpand.o differsgcc/cfghooks.o differsgcc/cfglayout.o differsgcc/cfgloop.o differsgcc/cfgloopanal.o differsgcc/cfgloopmanip.o differsgcc/cfgrtl.o differsgcc/cgraph.o differsgcc/cgraphbuild.o differsgcc/cgraphunit.o differsgcc/collect2-aix.o differsgcc/collect2.o differsgcc/combine-stack-adj.o differsgcc/combine.o differsgcc/convert.o differsgcc/coverage.o differsgcc/cp/call.o differsgcc/cp/class.o differsgcc/cp/cp-gimplify.o differsgcc/cp/cp-lang.o differsgcc/cp/cp-objcp-common.o differsgcc/cp/cvt.o differsgcc/cp/cxx-pretty-print.o differsgcc/cp/decl.o differsgcc/cp/decl2.o differsgcc/cp/dump.o differsgcc/cp/error.o differsgcc/cp/except.o differsgcc/cp/expr.o differsgcc/cp/friend.o differsgcc/cp/init.o differsgcc/cp/lex.o differsgcc/cp/mangle.o differsgcc/cp/method.o differsgcc/cp/name-lookup.o differsgcc/cp/optimize.o differsgcc/cp/parser.o differsgcc/cp/pt.o differsgcc/cp/ptree.o differsgcc/cp/repo.o differsgcc/cp/rtti.o differsgcc/cp/search.o differsgcc/cp/semantics.o differsgcc/cp/tree.o differsgcc/cp/typeck.o differsgcc/cp/typeck2.o differsgcc/cppdefault.o differsgcc/cppspec.o differsgcc/cse.o differsgcc/cselib.o differsgcc/darwin-c.o differsgcc/darwin-driver.o differsgcc/darwin-f.o differsgcc/darwin.o differsgcc/dbgcnt.o differsgcc/dbxout.o differsgcc/dce.o differsgcc/ddg.o differsgcc/debug.o differsgcc/df-byte-scan.o differsgcc/df-core.o differsgcc/df-problems.o differsgcc/df-scan.o differsgcc/dfp.o differsgcc/diagnostic.o differsgcc/dojump.o differsgcc/dominance.o differsgcc/domwalk.o differsgcc/double-int.o differsgcc/driver-rs6000.o differsgcc/dse.o differsgcc/dummy-checksum.o differsgcc/dwarf2asm.o differsgcc/dwarf2out.o differsgcc/ebitmap.o differsgcc/emit-rtl.o differsgcc/errors.o differsgcc/et-forest.o differsgcc/except.o differsgcc/explow.o differsgcc/expmed.o differsgcc/expr.o differsgcc/final.o differsgcc/fixed-value.o differsgcc/fold-const.o differsgcc/fortran/arith.o differsgcc/fortran/array.o differsgcc/fortran/bbt.o differsgcc/fortran/check.o differsgcc/fortran/convert.o differsgcc/fortran/cpp.o differsgcc/fortran/data.o differsgcc/fortran/decl.o differsgcc/fortran/dependency.o differsgcc/fortran/dump-parse-tree.o differsgcc/fortran/error.o differsgcc/fortran/expr.o differsgcc/fortran/f95-lang.o differsgcc/fortran/interface.o differsgcc/fortran/intrinsic.o differsgcc/fortran/io.o differsgcc/fortran/iresolve.o differsgcc/fortran/match.o differsgcc/fortran/matchexp.o differsgcc/fortran/misc.o differsgcc/fortran/module.o differsgcc/fortran/openmp.o differsgcc/fortran/options.o differsgcc/fortran/parse.o differsgcc/fortran/primary.o differsgcc/fortran/resolve.o differsgcc/fortran/scanner.o differsgcc/fortran/simplify.o differsgcc/fortran/st.o differsgcc/fortran/symbol.o differsgcc/fortran/target-memory.o differsgcc/fortran/trans-array.o differsgcc/fortran/trans-common.o differsgcc/fortran/trans-const.o differsgcc/fortran/trans-decl.o differsgcc/fortran/trans-expr.o differsgcc/fortran/trans-intrinsic.o differsgcc/fortran/trans-io.o differsgcc/fortran/trans-openmp.o differsgcc/fortran/trans-stmt.o differsgcc/fortran/trans-types.o differsgcc/fortran/trans.o differsgcc/function.o differsgcc/fwprop.o differsgcc/g++spec.o differsgcc/gcc-options.o differsgcc/gcc.o differsgcc/gccspec.o differsgcc/gcov-dump.o differsgcc/gcov.o differsgcc/gcse.o differsgcc/genrtl.o differsgcc/gfortranspec.o differsgcc/ggc-common.o differsgcc/ggc-none.o differsgcc/ggc-page.o differsgcc/gimple-iterator.o differsgcc/gimple-low.o differsgcc/gimple-pretty-print.o differsgcc/gimple.o differsgcc/gimplify.o differsgcc/graph.o differsgcc/graphds.o differsgcc/graphite-blocking.o differsgcc/graphite-clast-to-gimple.o differsgcc/graphite-dependences.o differsgcc/graphite-interchange.o differsgcc/graphite-poly.o differsgcc/graphite-ppl.o differsgcc/graphite-scop-detection.o differsgcc/graphite-sese-to-poly.o differsgcc/graphite.o differsgcc/gtype-desc.o differsgcc/haifa-sched.o differsgcc/hooks.o differsgcc/host-darwin.o differsgcc/host-ppc-darwin.o differsgcc/ifcvt.o differsgcc/incpath.o differsgcc/init-regs.o differsgcc/insn-attrtab.o differsgcc/insn-automata.o differsgcc/insn-emit.o differsgcc/insn-extract.o differsgcc/insn-modes.o differsgcc/insn-opinit.o differsgcc/insn-output.o differsgcc/insn-peep.o differsgcc/insn-preds.o differsgcc/insn-recog.o differsgcc/integrate.o differsgcc/intl.o differsgcc/ipa-cp.o differsgcc/ipa-inline.o differsgcc/ipa-prop.o differsgcc/ipa-pure-const.o differsgcc/ipa-reference.o differsgcc/ipa-struct-reorg.o differsgcc/ipa-type-escape.o differsgcc/ipa-utils.o differsgcc/ipa.o differsgcc/ira-build.o differsgcc/ira-color.o differsgcc/ira-conflicts.o differsgcc/ira-costs.o differsgcc/ira-emit.o differsgcc/ira-lives.o differsgcc/ira.o differsgcc/java/boehm.o differsgcc/java/builtins.o differsgcc/java/class.o differsgcc/java/constants.o differsgcc/java/decl.o differsgcc/java/except.o differsgcc/java/expr.o differsgcc/java/java-gimplify.o differsgcc/java/jcf-depend.o differsgcc/java/jcf-dump.o differsgcc/java/jcf-io.o differsgcc/java/jcf-parse.o differsgcc/java/jcf-path.o differsgcc/java/jvgenmain.o differsgcc/java/lang.o differsgcc/java/mangle.o differsgcc/java/mangle_name.o differsgcc/java/resource.o differsgcc/java/typeck.o differsgcc/java/verify-glue.o differsgcc/java/verify-impl.o differsgcc/java/win32-host.o differsgcc/java/zextract.o differsgcc/jump.o differsgcc/jvspec.o differsgcc/lambda-code.o differsgcc/lambda-mat.o differsgcc/lambda-trans.o differsgcc/langhooks.o differsgcc/lcm.o differsgcc/lists.o differsgcc/loop-doloop.o differsgcc/loop-init.o differsgcc/loop-invariant.o differsgcc/loop-iv.o differsgcc/loop-unroll.o differsgcc/loop-unswitch.o differsgcc/lower-subreg.o differsgcc/main.o differsgcc/matrix-reorg.o differsgcc/mcf.o differsgcc/mode-switching.o differsgcc/modulo-sched.o differsgcc/objc/objc-act.o differsgcc/objc/objc-lang.o differsgcc/objcp/objcp-act.o differsgcc/objcp/objcp-decl.o differsgcc/objcp/objcp-lang.o differsgcc/omega.o differsgcc/omp-low.o differsgcc/optabs.o differsgcc/options.o differsgcc/opts-common.o differsgcc/opts.o differsgcc/params.o differsgcc/passes.o differsgcc/plugin.o differsgcc/pointer-set.o differsgcc/postreload-gcse.o differsgcc/postreload.o differsgcc/predict.o differsgcc/prefix.o differsgcc/pretty-print.o differsgcc/print-rtl.o differsgcc/print-tree.o differsgcc/profile.o differsgcc/real.o differsgcc/recog.o differsgcc/reg-stack.o differsgcc/regcprop.o differsgcc/reginfo.o differsgcc/regmove.o differsgcc/regrename.o differsgcc/regstat.o differsgcc/reload.o differsgcc/reload1.o differsgcc/reorg.o differsgcc/resource.o differsgcc/rs6000-c.o differsgcc/rs6000.o differsgcc/rtl-error.o differsgcc/rtl.o differsgcc/rtlanal.o differsgcc/rtlhooks.o differsgcc/sbitmap.o differsgcc/sched-deps.o differsgcc/sched-ebb.o differsgcc/sched-rgn.o differsgcc/sched-vis.o differsgcc/sdbout.o differsgcc/sel-sched-dump.o differsgcc/sel-sched-ir.o differsgcc/sel-sched.o differsgcc/sese.o differsgcc/simplify-rtx.o differsgcc/sparseset.o differsgcc/sreal.o differsgcc/stack-ptr-mod.o differsgcc/statistics.o differsgcc/stmt.o differsgcc/stor-layout.o differsgcc/store-motion.o differsgcc/stringpool.o differsgcc/stub-objc.o differsgcc/targhooks.o differsgcc/timevar.o differsgcc/tlink.o differsgcc/toplev.o differsgcc/tracer.o differsgcc/tree-affine.o differsgcc/tree-browser.o differsgcc/tree-call-cdce.o differsgcc/tree-cfg.o differsgcc/tree-cfgcleanup.o differsgcc/tree-chrec.o differsgcc/tree-complex.o differsgcc/tree-data-ref.o differsgcc/tree-dfa.o differsgcc/tree-dump.o differsgcc/tree-eh.o differsgcc/tree-if-conv.o differsgcc/tree-inline.o differsgcc/tree-into-ssa.o differsgcc/tree-iterator.o differsgcc/tree-loop-distribution.o differsgcc/tree-loop-linear.o differsgcc/tree-mudflap.o differsgcc/tree-nested.o differsgcc/tree-nomudflap.o differsgcc/tree-nrv.o differsgcc/tree-object-size.o differsgcc/tree-optimize.o differsgcc/tree-outof-ssa.o differsgcc/tree-parloops.o differsgcc/tree-phinodes.o differsgcc/tree-predcom.o differsgcc/tree-pretty-print.o differsgcc/tree-profile.o differsgcc/tree-scalar-evolution.o differsgcc/tree-sra.o differsgcc/tree-ssa-address.o differsgcc/tree-ssa-alias.o differsgcc/tree-ssa-ccp.o differsgcc/tree-ssa-coalesce.o differsgcc/tree-ssa-copy.o differsgcc/tree-ssa-copyrename.o differsgcc/tree-ssa-dce.o differsgcc/tree-ssa-dom.o differsgcc/tree-ssa-dse.o differsgcc/tree-ssa-forwprop.o differsgcc/tree-ssa-ifcombine.o differsgcc/tree-ssa-live.o differsgcc/tree-ssa-loop-ch.o differsgcc/tree-ssa-loop-im.o differsgcc/tree-ssa-loop-ivcanon.o differsgcc/tree-ssa-loop-ivopts.o differsgcc/tree-ssa-loop-manip.o differsgcc/tree-ssa-loop-niter.o differsgcc/tree-ssa-loop-prefetch.o differsgcc/tree-ssa-loop-unswitch.o differsgcc/tree-ssa-loop.o differsgcc/tree-ssa-math-opts.o differsgcc/tree-ssa-operands.o differsgcc/tree-ssa-phiopt.o differsgcc/tree-ssa-phiprop.o differsgcc/tree-ssa-pre.o differsgcc/tree-ssa-propagate.o differsgcc/tree-ssa-reassoc.o differsgcc/tree-ssa-sccvn.o differsgcc/tree-ssa-sink.o differsgcc/tree-ssa-structalias.o differsgcc/tree-ssa-ter.o differsgcc/tree-ssa-threadedge.o differsgcc/tree-ssa-threadupdate.o differsgcc/tree-ssa-uncprop.o differsgcc/tree-ssa.o differsgcc/tree-ssanames.o differsgcc/tree-stdarg.o differsgcc/tree-switch-conversion.o differsgcc/tree-tailcall.o differsgcc/tree-vect-data-refs.o differsgcc/tree-vect-generic.o differsgcc/tree-vect-loop-manip.o differsgcc/tree-vect-loop.o differsgcc/tree-vect-patterns.o differsgcc/tree-vect-slp.o differsgcc/tree-vect-stmts.o differsgcc/tree-vectorizer.o differsgcc/tree-vrp.o differsgcc/tree.o differsgcc/value-prof.o differsgcc/var-tracking.o differsgcc/varasm.o differsgcc/varpool.o differsgcc/varray.o differsgcc/vec.o differsgcc/version.o differsgcc/vmsdbgout.o differsgcc/web.o differsgcc/xcoffout.o differslibcpp/charset.o differslibcpp/directives-only.o differslibcpp/directives.o differslibcpp/errors.o differslibcpp/expr.o differslibcpp/files.o differslibcpp/identifiers.o differslibcpp/init.o differslibcpp/lex.o differslibcpp/line-map.o differslibcpp/macro.o differslibcpp/mkdeps.o differslibcpp/pch.o differslibcpp/symtab.o differslibcpp/traditional.o differslibdecnumber/decContext.o differslibdecnumber/decimal128.o differslibdecnumber/decimal32.o differslibdecnumber/decimal64.o differslibdecnumber/decNumber.o differslibiberty/alloca.o differslibiberty/argv.o differslibiberty/choose-temp.o differslibiberty/concat.o differslibiberty/cp-demangle.o differslibiberty/cp-demint.o differslibiberty/cplus-dem.o differslibiberty/crc32.o differslibiberty/dyn-string.o differslibiberty/fdmatch.o differslibiberty/fibheap.o differslibiberty/filename_cmp.o differslibiberty/floatformat.o differslibiberty/fnmatch.o differslibiberty/fopen_unlocked.o differslibiberty/getopt.o differslibiberty/getopt1.o differslibiberty/getpwd.o differslibiberty/getruntime.o differslibiberty/hashtab.o differslibiberty/hex.o differslibiberty/lbasename.o differslibiberty/lrealpath.o differslibiberty/make-relative-prefix.o differslibiberty/make-temp-file.o differslibiberty/md5.o differslibiberty/memmem.o differslibiberty/mempcpy.o differslibiberty/objalloc.o differslibiberty/obstack.o differslibiberty/partition.o differslibiberty/pex-common.o differslibiberty/pex-one.o differslibiberty/pex-unix.o differslibiberty/pexecute.o differslibiberty/physmem.o differslibiberty/regex.o differslibiberty/safe-ctype.o differslibiberty/sha1.o differslibiberty/sort.o differslibiberty/spaces.o differslibiberty/splay-tree.o differslibiberty/stpncpy.o differslibiberty/strerror.o differslibiberty/strndup.o differslibiberty/strsignal.o differslibiberty/strverscmp.o differslibiberty/unlink-if-ordinary.o differslibiberty/xatexit.o differslibiberty/xexit.o differslibiberty/xmalloc.o differslibiberty/xmemdup.o differslibiberty/xstrdup.o differslibiberty/xstrerror.o differslibiberty/xstrndup.o differszlib/libz_a-adler32.o differszlib/libz_a-compress.o differszlib/libz_a-crc32.o differszlib/libz_a-deflate.o differszlib/libz_a-gzio.o differszlib/libz_a-infback.o differszlib/libz_a-inffast.o differszlib/libz_a-inflate.o differszlib/libz_a-inftrees.o differszlib/libz_a-trees.o differszlib/libz_a-uncompr.o differszlib/libz_a-zutil.o differsmake[2]: *** [compare] Error 1make[1]: *** [stage3-bubble] Error 2make: *** [all] Error 2",RESOLVED          FIXED      
41226,Alexandre Oliva,[4.5 regression] Revision 151313 caused many regressions on trunk,"On Linux/ia32, revision 151313 gave:FAIL: gcc.c-torture/compile/pr40753.c  -O3 -g  (internal compiler error)FAIL: gcc.c-torture/compile/pr40753.c  -O3 -g  (test for excess errors)FAIL: gcc.dg/guality/example.c  -O0  (test for excess errors)FAIL: gcc.dg/guality/example.c  -O1  (test for excess errors)FAIL: gcc.dg/guality/example.c  -O2  (test for excess errors)FAIL: gcc.dg/guality/example.c  -O3 -fomit-frame-pointer  (test for excess errors)FAIL: gcc.dg/guality/example.c  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (test for excess errors)FAIL: gcc.dg/guality/example.c  -O3 -fomit-frame-pointer -funroll-loops  (test for excess errors)FAIL: gcc.dg/guality/example.c  -O3 -g  (test for excess errors)FAIL: gcc.dg/guality/example.c  -Os  (test for excess errors)FAIL: gcc.dg/guality/guality.c  -O0  (test for excess errors)FAIL: gcc.dg/guality/guality.c  -O1  (test for excess errors)FAIL: gcc.dg/guality/guality.c  -O2  (test for excess errors)FAIL: gcc.dg/guality/guality.c  -O3 -fomit-frame-pointer  (test for excess errors)FAIL: gcc.dg/guality/guality.c  -O3 -g  (test for excess errors)FAIL: gcc.dg/guality/guality.c  -Os  (test for excess errors)Revision 151310 is OK.",RESOLVED          FIXED      
41228,Alexandre Oliva,[4.5 regression] Solaris 10/x86 comparison failure after VTA merge,"After the VTA merge (i.e. as of rev. 151322, bootstrap on i386-pc-solaris2.10fails since all? object files miscompare between stages 2 and 3.  To investigatethis, I've rebuild stage2 and stage3 plugin.o with -save-temps. The two .s filesdiffer by additional .debug_* sections in stage3, together with many labels(which shouldn't affect the object files), .loc statements.  This accounts fora significant size difference between the .o files:-rw-r--r-- 1 ro gcc 32480 Sep  2 15:18 stage1-gcc/plugin.o-rw-r--r-- 1 ro gcc  9936 Sep  2 16:29 stage2-gcc/plugin.o-rw-r--r-- 1 ro gcc 35852 Sep  2 16:29 stage3-gcc/plugin.oThe stage2 plugin.o was built with/vol/gcc/obj/gcc-4.5.0-20090902/10-gcc/./prev-gcc/xgcc -B/vol/gcc/obj/gcc-4.5.0-20090902/10-gcc/./prev-gcc/ -B/vol/gcc/i386-pc-solaris2.10/bin/ -B/vol/gcc/i386-pc-solaris2.10/bin/ -B/vol/gcc/i386-pc-solaris2.10/lib/ -isystem /vol/gcc/i386-pc-solaris2.10/include -isystem /vol/gcc/i386-pc-solaris2.10/sys-include    -c  -g -O2 -gtoggle -DIN_GCC   -W -Wall -Wwrite-strings -Wcast-qual -Wstrict-prototypes -Wmissing-prototypes -Wmissing-format-attribute -pedantic -Wno-long-long -Wno-variadic-macros -Wno-overlength-strings -Werror -Wold-style-definition -Wc++-compat -fno-common  -DHAVE_CONFIG_H -I. -I. -I/vol/gcc/src/gcc-dist/gcc -I/vol/gcc/src/gcc-dist/gcc/. -I/vol/gcc/src/gcc-dist/gcc/../include -I/vol/gcc/src/gcc-dist/gcc/../libcpp/include -I/vol/gcc/include -I/vol/gcc/include -I/vol/gcc/src/gcc-dist/gcc/../libdecnumber -I/vol/gcc/src/gcc-dist/gcc/../libdecnumber/dpd -I../libdecnumber    /vol/gcc/src/gcc-dist/gcc/plugin.c -o plugin.othe stage3 plugin.o with/vol/gcc/obj/gcc-4.5.0-20090902/10-gcc/./prev-gcc/xgcc -B/vol/gcc/obj/gcc-4.5.0-20090902/10-gcc/./prev-gcc/ -B/vol/gcc/i386-pc-solaris2.10/bin/ -B/vol/gcc/i386-pc-solaris2.10/bin/ -B/vol/gcc/i386-pc-solaris2.10/lib/ -isystem /vol/gcc/i386-pc-solaris2.10/include -isystem /vol/gcc/i386-pc-solaris2.10/sys-include    -c  -g -O2 -DIN_GCC   -W -Wall -Wwrite-strings -Wcast-qual -Wstrict-prototypes -Wmissing-prototypes -Wmissing-format-attribute -pedantic -Wno-long-long -Wno-variadic-macros -Wno-overlength-strings -Werror -Wold-style-definition -Wc++-compat -fno-common  -DHAVE_CONFIG_H -I. -I. -I/vol/gcc/src/gcc-dist/gcc -I/vol/gcc/src/gcc-dist/gcc/. -I/vol/gcc/src/gcc-dist/gcc/../include -I/vol/gcc/src/gcc-dist/gcc/../libcpp/include -I/vol/gcc/include -I/vol/gcc/include -I/vol/gcc/src/gcc-dist/gcc/../libdecnumber -I/vol/gcc/src/gcc-dist/gcc/../libdecnumber/dpd -I../libdecnumber    /vol/gcc/src/gcc-dist/gcc/plugin.c -o plugin.oI'm attaching the .i and both .s files for further investigation.sparc-sun-solaris2.11 bootstrap just broke in the same way.",RESOLVED          FIXED      
41225,Alexandre Oliva,"[4.5 Regression] VTA: internal compiler error: in vect_stmt_relevant_p, at tree-vect-stmts.c:150","trying '-fvar-tracking-assignments' with current trunk on CP2K, I get the following ICE:gfortran -c -fvar-tracking-assignments -O2 -ffast-math -funroll-loops -ftree-vectorize -march=native -ffree-form -D__GFORTRAN -D__FFTSG -D__FFTW3 -D__LIBINT -I/ext/software/64/gfortran-suite/include -D__COMPILE_ARCH=""\""Linux-x86-64-gfortran\"""" -D__COMPILE_DATE=""\""Wed Sep  2 15:32:16 CEST 2009\"""" -D__COMPILE_HOST=""\""pcihopt3\"""" -D__COMPILE_LASTCVS=""\""/wfn_fitting_methods.F/1.12/Tue Sep  1 16:19:34 2009//\"""" /data03/vondele/clean/cp2k/src/../src/hfx_contract_block.F/data03/vondele/clean/cp2k/src/../src/hfx_contract_block.F: In function ‘block_15_1_1_1’:/data03/vondele/clean/cp2k/src/../src/hfx_contract_block.F:18231:0: internal compiler error: in vect_stmt_relevant_p, at tree-vect-stmts.c:150Please submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.looking for a testcase",RESOLVED          FIXED      
41252,Alexandre Oliva,[4.5 Regression] Var tracking by default breaks arm-none-eabi build of newlib,"The commit at r151362 broke the default build for arm-none-eabi in newlib with the following ICE for the hard-float variant of the ABI. /home/ramana/cos/combined-git-master-cloned/newlib/libm/common/s_nextafter.c: In function ‘nextafter’:/home/ramana/cos/combined-git-master-cloned/newlib/libm/common/s_nextafter.c:119:1: internal compiler error: in loc_cmp, at var-tracking.c:2429The gdb backtrace is #0  fancy_abort (file=0x88e22e8 ""/home/ramana/cos/combined-git-master-cloned/gcc/var-tracking.c"", line=2429, function=0x88e2544 ""loc_cmp"") at /home/ramana/cos/combined-git-master-cloned/gcc/diagnostic.\c:728#1  0x085cb959 in loc_cmp (x=0xb7d03240, y=0xb7d03230) at /home/ramana/cos/combined-git-master-cloned/gcc/var-tracking.c:2429#2  0x085cc333 in canonicalize_loc_order_check (slot=0x9190eb4, data=0x91b7ba8) at /home/ramana/cos/combined-git-master-cloned/gcc/var-tracking.c:2706#3  0x0884eb36 in htab_traverse_noresize (htab=0x9190dc8, callback=0x85cc298 <canonicalize_loc_order_check>, info=0x91b7ba8) at /home/ramana/cos/combined-git-master-cloned/libiberty/hashtab.c:750#4  0x085d3460 in compute_bb_dataflow (bb=0xb7c0ce40) at /home/ramana/cos/combined-git-master-cloned/gcc/var-tracking.c:5360#5  0x085d3994 in vt_find_locations () at /home/ramana/cos/combined-git-master-cloned/gcc/var-tracking.c:5493#6  0x085d8f3f in variable_tracking_main () at /home/ramana/cos/combined-git-master-cloned/gcc/var-tracking.c:7451#7  0x0838a929 in execute_one_pass (pass=0x8a749a0) at /home/ramana/cos/combined-git-master-cloned/gcc/passes.c:1292#8  0x0838abac in execute_pass_list (pass=0x8a749a0) at /home/ramana/cos/combined-git-master-cloned/gcc/passes.c:1341#9  0x0838abbf in execute_pass_list (pass=0x8a723a0) at /home/ramana/cos/combined-git-master-cloned/gcc/passes.c:1342#10 0x0838abbf in execute_pass_list (pass=0x8a72360) at /home/ramana/cos/combined-git-master-cloned/gcc/passes.c:1342#11 0x08494260 in tree_rest_of_compilation (fndecl=0xb7c4a380) at /home/ramana/cos/combined-git-master-cloned/gcc/tree-optimize.c:390#12 0x0861b6ea in cgraph_expand_function (node=0xb7cccb00) at /home/ramana/cos/combined-git-master-cloned/gcc/cgraphunit.c:1111#13 0x0861e1ad in cgraph_finalize_compilation_unit () at /home/ramana/cos/combined-git-master-cloned/gcc/cgraphunit.c:1170#14 0x080d2a8b in c_write_global_declarations () at /home/ramana/cos/combined-git-master-cloned/gcc/c-decl.c:9378#15 0x0843a25b in compile_file () at /home/ramana/cos/combined-git-master-cloned/gcc/toplev.c:1050#16 0x0843c219 in do_compile () at /home/ramana/cos/combined-git-master-cloned/gcc/toplev.c:2372#17 0x0843c2de in toplev_main (argc=5, argv=0xbfd764d4) at /home/ramana/cos/combined-git-master-cloned/gcc/toplev.c:2414#18 0x08158db2 in main (argc=Cannot access memory at address 0x0and looking at the session in gdb (gdb) up#1  0x085cb959 in loc_cmp (x=0xb7d03240, y=0xb7d03230) at /home/ramana/cos/combined-git-master-cloned/gcc/var-tracking.c:2429(gdb) p x$5 = (rtx) 0xb7d03240(gdb) pr(reg:CCFP 24 cc)(gdb) p y$6 = (rtx) 0xb7d03230(gdb) pr(reg:CCFPE 127 vfpcc)GCC was configured with  --target=arm-none-eabi --enable-languages=c,c++,fortran --with-cpu=cortex-a8 --with-fpu=neon --with-float-abi=softfpand the command line used on the test file was ./xgcc -B`pwd` -S -O3 -g -mfloat-abi=hard ./s_nextafter.i",RESOLVED          FIXED      
5291,Alexandre Oliva,Bad reference to build directory in libstdc++.la,"The value of dependency_libs in libstdc++.la contains -L options thatrefer to the build directory.  These are coming from libstdcxx_flags inthe toplevel configure.in file.  An installed libtool link file must nevercontain a reference to the build or source directory.Alexandre Oliva commented on this report:> It's a problem in libtool that has been known for a while, and> already brought in the mailing lists at least twice.  It's mostly> harmless, and no fix is available, I'm afraid.It might be harmless but rather annoying since linker command lines get longer and longer :-(Andreas JaegerRelease:3.1 20020105 (experimental)Environment:System: Linux sykes 2.4.16-SMP #1 SMP Wed Jan 2 19:54:14 GMT 2002 ia64 unknownArchitecture: ia64	host: ia64-unknown-linux-gnubuild: ia64-unknown-linux-gnutarget: ia64-unknown-linux-gnuconfigured with: /cvs/gcc/configure ia64-linux --prefix=/usr/local/ia64-linux --enable-shared --enable-threads --with-system-zlib : (reconfigured)  : (reconfigured)",RESOLVED          FIXED      
24827,Alexandre Oliva,FAIL: gcc.dg/attr-weakref-1.c,"Executing on host: /test/gnu/gcc-3.3/objdir/gcc/xgcc -B/test/gnu/gcc-3.3/objdir/gcc/ /test/gnu/gcc-3.3/gcc/gcc/testsuite/gcc.dg/attr-weakref-1.c   -O2 -fno-show-column  /test/gnu/gcc-3.3/gcc/gcc/testsuite/gcc.dg/attr-weakref-1a.c  -lm   -o./attr-weakref-1.exe    (timeout = 300)ld: Unsatisfied symbol ""wf1"" in file /var/tmp//ccNG756H.old: Unsatisfied symbol ""wf6"" in file /var/tmp//ccNG756H.old: Unsatisfied symbol ""wf9"" in file /var/tmp//ccNG756H.old: Unsatisfied symbol ""wv1"" in file /var/tmp//ccNG756H.old: Unsatisfied symbol ""wv6"" in file /var/tmp//ccNG756H.old: Unsatisfied symbol ""wv9"" in file /var/tmp//ccNG756H.old: Unsatisfied symbol ""wf10"" in file /var/tmp//ccNG756H.old: Unsatisfied symbol ""wf11"" in file /var/tmp//ccNG756H.old: Unsatisfied symbol ""wf12"" in file /var/tmp//ccNG756H.old: Unsatisfied symbol ""wf13"" in file /var/tmp//ccNG756H.old: Unsatisfied symbol ""wf14"" in file /var/tmp//ccNG756H.old: Unsatisfied symbol ""wv10"" in file /var/tmp//ccNG756H.old: Unsatisfied symbol ""wv11"" in file /var/tmp//ccNG756H.old: Unsatisfied symbol ""wv12"" in file /var/tmp//ccNG756H.old: Unsatisfied symbol ""wv13"" in file /var/tmp//ccNG756H.old: Unsatisfied symbol ""wv14"" in file /var/tmp//ccNG756H.o16 errors.collect2: ld returned 1 exit statuscompiler exited with status 1output is:ld: Unsatisfied symbol ""wf1"" in file /var/tmp//ccNG756H.old: Unsatisfied symbol ""wf6"" in file /var/tmp//ccNG756H.old: Unsatisfied symbol ""wf9"" in file /var/tmp//ccNG756H.old: Unsatisfied symbol ""wv1"" in file /var/tmp//ccNG756H.old: Unsatisfied symbol ""wv6"" in file /var/tmp//ccNG756H.old: Unsatisfied symbol ""wv9"" in file /var/tmp//ccNG756H.old: Unsatisfied symbol ""wf10"" in file /var/tmp//ccNG756H.old: Unsatisfied symbol ""wf11"" in file /var/tmp//ccNG756H.old: Unsatisfied symbol ""wf12"" in file /var/tmp//ccNG756H.old: Unsatisfied symbol ""wf13"" in file /var/tmp//ccNG756H.old: Unsatisfied symbol ""wf14"" in file /var/tmp//ccNG756H.old: Unsatisfied symbol ""wv10"" in file /var/tmp//ccNG756H.old: Unsatisfied symbol ""wv11"" in file /var/tmp//ccNG756H.old: Unsatisfied symbol ""wv12"" in file /var/tmp//ccNG756H.old: Unsatisfied symbol ""wv13"" in file /var/tmp//ccNG756H.old: Unsatisfied symbol ""wv14"" in file /var/tmp//ccNG756H.o16 errors.collect2: ld returned 1 exit statusFAIL: gcc.dg/attr-weakref-1.c (test for excess errors)Excess errors:ld: Unsatisfied symbol ""wf1"" in file /var/tmp//ccNG756H.old: Unsatisfied symbol ""wf6"" in file /var/tmp//ccNG756H.old: Unsatisfied symbol ""wf9"" in file /var/tmp//ccNG756H.old: Unsatisfied symbol ""wv1"" in file /var/tmp//ccNG756H.old: Unsatisfied symbol ""wv6"" in file /var/tmp//ccNG756H.old: Unsatisfied symbol ""wv9"" in file /var/tmp//ccNG756H.old: Unsatisfied symbol ""wf10"" in file /var/tmp//ccNG756H.old: Unsatisfied symbol ""wf11"" in file /var/tmp//ccNG756H.old: Unsatisfied symbol ""wf12"" in file /var/tmp//ccNG756H.old: Unsatisfied symbol ""wf13"" in file /var/tmp//ccNG756H.old: Unsatisfied symbol ""wf14"" in file /var/tmp//ccNG756H.old: Unsatisfied symbol ""wv10"" in file /var/tmp//ccNG756H.old: Unsatisfied symbol ""wv11"" in file /var/tmp//ccNG756H.old: Unsatisfied symbol ""wv12"" in file /var/tmp//ccNG756H.old: Unsatisfied symbol ""wv13"" in file /var/tmp//ccNG756H.old: Unsatisfied symbol ""wv14"" in file /var/tmp//ccNG756H.oWARNING: gcc.dg/attr-weakref-1.c compilation failed to produce executable",RESOLVED          FIXED      
37098,Alexandre Oliva,"[vta] ICE in expand_debug_expr, at cfgexpand.c:2519","the following testcasehttp://www.pci.unizh.ch/vandevondele/tmp/all_cp2k_gfortran.f90.gzgenerates an ICE when compiling gfortran -v -c -g -O3 -ffast-math -funroll-loops -ftree-vectorize -march=native all_cp2k_gfortran.f90Using built-in specs.Target: x86_64-unknown-linux-gnuConfigured with: /data03/vondele/gcc_vta/gcc/configure --prefix=/data03/vondele/gcc_vta/build --with-gmp=/data03/vondele/ --with-mpfr=/data03/vondele/ --enable-languages=c,fortranThread model: posixgcc version 4.4.0 20080729 (experimental) (GCC)COLLECT_GCC_OPTIONS='-v' '-c' '-g' '-O3' '-ffast-math' '-funroll-loops' '-ftree-vectorize' /data03/vondele/gcc_vta/build/libexec/gcc/x86_64-unknown-linux-gnu/4.4.0/f951 all_cp2k_gfortran.f90 -march=k8-sse3 -mcx16 -msahf --param l1-cache-size=64 --param l1-cache-line-size=64 --param l2-cache-size=1024 -mtune=k8 -quiet -dumpbase all_cp2k_gfortran.f90 -auxbase all_cp2k_gfortran -g -O3 -version -ffast-math -funroll-loops -ftree-vectorize -fintrinsic-modules-path /data03/vondele/gcc_vta/build/lib/gcc/x86_64-unknown-linux-gnu/4.4.0/finclude -o /tmp/ccukjSCb.sGNU Fortran (GCC) version 4.4.0 20080729 (experimental) (x86_64-unknown-linux-gnu)        compiled by GNU C version 4.4.0 20080729 (experimental), GMP version 4.2.1, MPFR version 2.2.1.GGC heuristics: --param ggc-min-expand=30 --param ggc-min-heapsize=4096 <paren_expr 0x2acbad1ad180    type <real_type 0x2acb8bd15600 real(kind=8) asm_written DF        size <integer_cst 0x2acb8bcfdb40 constant 64>        unit size <integer_cst 0x2acb8bcfdb70 constant 8>        align 64 symtab -1940364928 alias set 3 canonical type 0x2acb8bd15600 precision 64        pointer_to_this <pointer_type 0x2acb8bd15840> reference_to_this <reference_type 0x2acb8c04ec00>>    arg 0 <minus_expr 0x2acbad1ad140 type <real_type 0x2acb8bd15600 real(kind=8)>        arg 0 <mult_expr 0x2acbad1ad0c0 type <real_type 0x2acb8bd15600 real(kind=8)>            arg 0 <var_decl 0x2acb8f3f3b40 D.88376> arg 1 <var_decl 0x2acb8ee46640 D.88368>>        arg 1 <mult_expr 0x2acbad1ad100 type <real_type 0x2acb8bd15600 real(kind=8)>            arg 0 <var_decl 0x2acb8f2e0a00 D.88374> arg 1 <var_decl 0x2acb8f03f780 D.88364>>>>all_cp2k_gfortran.f90: In function ‘det_3x3_2’:all_cp2k_gfortran.f90:43446: internal compiler error: in expand_debug_expr, at cfgexpand.c:2519",RESOLVED          FIXED      
35909,Alexandre Oliva,[4.3/4.4 Regression] ICE with bit-field and const references,"I just tried to compile the Suse Linux package tse3-0.3.1with the GNU C compiler version 4.4 snapshot 20080404The compiler said g++ -DHAVE_CONFIG_H -I. -I../../.. -I../../../src -O2 -g -fmessage-length=0 -D_FORTIFY_SOURCE=2 -W -Wall -ansi -pedantic -MT Alsa-0.9.lo -MD -MP -MF .deps/Alsa-0.9.Tpo -c Alsa-0.9.cpp  -fPIC -DPIC -o .libs/Alsa-0.9.oIn file included from Alsa-0.9.cpp:35:/usr/include/sys/asoundlib.h:1:2: warning: #warning This header is deprecated, use <alsa/asoundlib.h> instead.Alsa-0.9.cpp: In member function 'void TSE3::Plt::AlsaMidiScheduler::getSystemInfo()':Alsa-0.9.cpp:208: warning: the address of 'ci' will always evaluate as 'true'Alsa-0.9.cpp:219: warning: the address of 'pi' will always evaluate as 'true'Alsa-0.9.cpp:238: warning: the address of 'subs' will always evaluate as 'true'Alsa-0.9.cpp: In member function 'void TSE3::Plt::AlsaImpl::tx(TSE3::MidiCommand, int, long int, long int)':Alsa-0.9.cpp:343: internal compiler error: in build_target_expr, at cp/tree.c:267Please submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.Preprocessed C++ source code attached. No flags required",RESOLVED          FIXED      
35056,Alexandre Oliva,"[4.3 Regression] ICE in copy_to_mode_reg, at explow.c:621","Current trunk ICEs in building libqt4:g++-4.3 -O -o /dev/null -S style.cpp rendering/RenderStyle.h: In member function 'void WebCore::RenderStyle::setOutlineStyle(WebCore::EBorderStyle, bool)':rendering/RenderStyle.h:1570: internal compiler error: in copy_to_mode_reg, at explow.c:621Please submit a full bug report,with preprocessed source if appropriate.See <http://bugs.opensuse.org/> for instructions.",RESOLVED          FIXED      
33634,Alexandre Oliva,[4.3 Regression] bootstrap with ada failed,"/home/dave/gnu/gcc-4.3/objdir/./prev-gcc/xgcc -B/home/dave/gnu/gcc-4.3/objdir/./prev-gcc/ -B/home/dave/opt/gnu/gcc/gcc-4.3.0/hppa-linux/bin/ -c -g -O2      -gnatpg -gnata -g -O1 -fno-inline \         -nostdinc -I- -I. -Iada -I../../gcc/gcc/ada ../../gcc/gcc/ada/a-except.adb -o ada/a-except.o+===========================GNAT BUG DETECTED==============================+| 4.3.0 20071002 (experimental) [trunk revision 128947] (hppa-unknown-linux-gnu) || Assert_Failure atree.adb:982                                             || Error detected at system.ads:44:1                                        || Please submit a bug report; see http://gcc.gnu.org/bugs.html.            || Use a subject line meaningful to you and us to track the bug.            || Include the entire contents of this bug box in the report.               || Include the exact gcc or gnatmake command that you entered.              || Also include sources listed below in gnatchop format                     || (concatenated together with no headers between files).                   |+==========================================================================+...make[3]: *** [ada/a-except.o] Error 1dave@hiauly6:~/gnu/gcc-4.3/objdir/prev-gcc$ ./xgcc -B./ -vReading specs from ./specsTarget: hppa-linuxConfigured with: ../gcc/configure --with-gnu-as --with-gnu-ld --enable-shared --prefix=/home/dave/opt/gnu/gcc/gcc-4.3.0 --with-local-prefix=/home/dave/opt/gnu --enable-threads=posix --enable-__cxa_atexit --build=hppa-linux --enable-clocale=gnu --enable-java-gc=boehm --enable-java-awt=xlib --enable-languages=c,c++,objc,fortran,obj-c++,java,adaThread model: posixgcc version 4.3.0 20071002 (experimental) [trunk revision 128947] (GCC)Last successful build was with revision 128899.",RESOLVED          FIXED      
33706,Alexandre Oliva,gcc_assert failure in verify_eh_edges,"Compiling glibc on Linux/x86-64 I get a segmentation fault.(gdb) r -fpreprocessed cache.i -quiet -dumpbase cache.c -mtune=generic -auxbase-strip /abuild/aj/glibc/4.3/elf/cache.o -g -O2 -Wall -Winline -Wwrite-strings -Wstrict-prototypes -std=gnu99 -version -fgnu89-inline -fmerge-all-constants -o cache.sStarting program: /opt/gcc/4.3-devel/libexec/gcc/x86_64-suse-linux-gnu/4.3.0/cc1 -fpreprocessed cache.i -quiet -dumpbase cache.c -mtune=generic -auxbase-strip /abuild/aj/glibc/4.3/elf/cache.o -g -O2 -Wall -Winline -Wwrite-strings -Wstrict-prototypes -std=gnu99 -version -fgnu89-inline -fmerge-all-constants -o cache.sGNU C (GCC) version 4.3.0 20071008 (experimental) [trunk revision 129132] (x86_64-suse-linux-gnu)        compiled by GNU C version 4.3.0 20071008 (experimental) [trunk revision 129132], GMP version 4.2.1, MPFR version 2.2.1.GGC heuristics: --param ggc-min-expand=30 --param ggc-min-heapsize=4096Compiler executable checksum: 44f4e8c7ed384ee5613017e04accc06aProgram received signal SIGSEGV, Segmentation fault.0x0000000000779930 in verify_eh_edges (stmt=0x2b8346a28800)    at /cvs/gcc-svn/trunk/gcc/basic-block.h:673673       gcc_assert (i.container);(gdb) bt#0  0x0000000000779930 in verify_eh_edges (stmt=0x2b8346a28800)    at /cvs/gcc-svn/trunk/gcc/basic-block.h:673#1  0x00000000007574e2 in tree_verify_flow_info () at /cvs/gcc-svn/trunk/gcc/tree-cfg.c:4466#2  0x00000000004dc423 in verify_flow_info () at /cvs/gcc-svn/trunk/gcc/cfghooks.c:244#3  0x000000000075a675 in cleanup_tree_cfg ()    at /cvs/gcc-svn/trunk/gcc/tree-cfgcleanup.c:663#4  0x00000000006781e5 in execute_function_todo (data=<value optimized out>)    at /cvs/gcc-svn/trunk/gcc/passes.c:884#5  0x0000000000677f6f in execute_todo (flags=19968682)    at /cvs/gcc-svn/trunk/gcc/passes.c:988#6  0x000000000067853a in execute_one_pass (pass=0x1254200)    at /cvs/gcc-svn/trunk/gcc/passes.c:1139#7  0x00000000006786c0 in execute_pass_list (pass=0x1254200)    at /cvs/gcc-svn/trunk/gcc/passes.c:1170#8  0x00000000006786d5 in execute_pass_list (pass=0x11d9ac0)    at /cvs/gcc-svn/trunk/gcc/passes.c:1171#9  0x0000000000678814 in execute_ipa_pass_list (pass=0x11d9a60)    at /cvs/gcc-svn/trunk/gcc/passes.c:855#10 0x000000000092240d in cgraph_optimize () at /cvs/gcc-svn/trunk/gcc/cgraphunit.c:1248#11 0x000000000041611e in c_write_global_declarations ()    at /cvs/gcc-svn/trunk/gcc/c-decl.c:8077#12 0x000000000073dc09 in toplev_main (argc=<value optimized out>,    argv=<value optimized out>) at /cvs/gcc-svn/trunk/gcc/toplev.c:1052#13 0x00002b8346253b54 in __libc_start_main () from /lib64/libc.so.6#14 0x0000000000404009 in _start ()(gdb) pt stmt <call_expr 0x2b8346a28800    type <void_type 0x2b8345c6d750 void asm_written VOID        align 8 symtab 0 alias set 2 canonical type 0x2b8345c6d750        pointer_to_this <pointer_type 0x2b8345c6d820>>    side-effects    fn <addr_expr 0x2b8346a23a40        type <pointer_type 0x2b83467f3270 type <function_type 0x2b83467f30d0>            unsigned DI            size <integer_cst 0x2b8345c50ba0 constant invariant 64>            unit size <integer_cst 0x2b8345c50bd0 constant invariant 8>            align 64 symtab 0 alias set -1 canonical type 0x2b83467f3340>        constant invariant        arg 0 <function_decl 0x2b83467f1200 __error_noreturn type <function_type 0x2b83467f00d0>            addressable volatile used public external decl_5 QI file ../include/bits/../../misc/bits/error.h line 32 align 8 attributes <tree_list 0x2b83467eec60> chain <function_decl 0x2b83467f1500 __error_at_line_alias>>>    arg 0 <integer_cst 0x2b8345c6c570 type <integer_type 0x2b8345c5f5b0 int> constant invariant 1>    arg 1 <ssa_name 0x2b8346a2b3c0        type <integer_type 0x2b8345c5f5b0 int sizes-gimplified asm_written public SI            size <integer_cst 0x2b8345c50ab0 constant invariant 32>            unit size <integer_cst 0x2b8345c50720 constant invariant 4>            align 32 symtab 1180196224 alias set 5 canonical type 0x2b8345c5f5b0 precision 32 min <integer_cst 0x2b8345c50a20 -2147483648> max <integer_cst 0x2b8345c50a50 2147483647>            pointer_to_this <pointer_type 0x2b8345c70000>>        visited var <var_decl 0x2b8346702c60 __libc_errno.31> def_stmt <gimple_modify_stmt 0x2b8346651780>        version 127>    arg 2 <ssa_name 0x2b8346a2b360        type <pointer_type 0x2b8345c769c0 type <integer_type 0x2b8345c5f340 char>            sizes-gimplified asm_written public unsigned DI size <integer_cst 0x2b8345c50ba0 64> unit size <integer_cst 0x2b8345c50bd0 8>            align 64 symtab 1180449696 alias set 34 canonical type 0x2b8345c769c0            pointer_to_this <pointer_type 0x2b83465a8340>>        visited var <var_decl 0x2b8346702bb0 D.8371> def_stmt <gimple_modify_stmt 0x2b8346651750>        version 126>    arg 3 <ssa_name 0x2b8346a2b240 type <pointer_type 0x2b8345c769c0>        visited var <var_decl 0x2b83466a9bb0 temp_name> def_stmt <gimple_modify_stmt 0x2b8346651690>        version 123>    ../include/bits/../../misc/bits/error.h:41>",RESOLVED          FIXED      
33655,Alexandre Oliva,"[4.3 Regression] ICE in bitfield_overlaps_p, at tree-sra.c:2901","Building ncurses with trunk ICEs with:/usr/bin/gcc -DHAVE_CONFIG_H -I../ncurses -I. -I. -I../include -D_GNU_SOURCE -DNDEBUG -O2 -g -fmessage-length=0 -pipe -D_REENTRANT -fPIC -c ../ncurses/./base/lib_addch.c -o ../obj_s/lib_addch.ogcc-trunk: warning: -pipe ignored because -save-temps specified../ncurses/./base/lib_addch.c: In function 'render_char':../ncurses/./base/lib_addch.c:541: internal compiler error: in bitfield_overlaps_p, at tree-sra.c:2901Please submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.This was caused by2007-10-01  Alexandre Oliva  <aoliva@redhat.com>        PR middle-end/22156        * tree-sra.c (struct sra_elt): Add in_bitfld_block.        (sra_hash_tree): Handle BIT_FIELD_REFs.        (sra_elt_hash): Don't hash bitfld blocks....",RESOLVED          FIXED      
33735,Alexandre Oliva,[4.3 Regression] verify_stmts failed: missing PHI def,"/usr/lib/gcc/i586-suse-linux/4.3.0/cc1plus -fpreprocessed incomingscript.ii -quiet -dumpbase incomingscript.cpp -march=i586 -mtune=i686 -auxbase-strip incomingscript.o -O2 -Wall -version -fmessage-length=0 -fstack-protector -o incomingscript.sGNU C++ (SUSE Linux) version 4.3.0 20071009 (experimental) [trunk revision 129166] (i586-suse-linux)        compiled by GNU C version 4.3.0 20071009 (experimental) [trunk revision 129166], GMP version 4.2.1, MPFR version 2.2.1.GGC heuristics: --param ggc-min-expand=30 --param ggc-min-heapsize=4096Compiler executable checksum: e33e9923d15fc8d6a61c8cd1ae9af5a7incomingscript.cpp: In member function 'virtual void IncomingScript::run()':incomingscript.cpp:122: warning: suggest explicit braces to avoid ambiguous 'else'incomingscript.cpp:79: error: missing PHI defpy_state_2(ab) = PHI <py_state_4(ab)(2), py_state_4(ab)(3), py_state_6(ab)(5), py_state_6(ab)(6), py_state_6(ab)(7), py_state_6(ab)(8), py_state_6(ab)(11), py_state_6(ab)(12), py_state_6(ab)(15), py_state_6(ab)(25), py_state_6(ab)(36), py_state_6(ab)(38), py_state_6(ab)(39), py_state_6(ab)(40), py_state_6(ab)(41), py_state_6(ab)(43), py_state_6(ab)(44), py_state_6(ab)(45), py_state_6(ab)(46), py_state_6(ab)(47), py_state_6(ab)(50), py_state_6(ab)(53), py_state_6(ab)(57), py_state_6(ab)(59), py_state_6(ab)(60), py_state_6(ab)(61), py_state_87(ab)(107), py_state_6(ab)(62), py_state_6(ab)(106), py_state_6(ab)(63), py_state_6(ab)(64), py_state_6(ab)(73), py_state_6(ab)(72), py_state_6(ab)(74), py_state_6(ab)(82), py_state_6(ab)(84), py_state_6(ab)(85), py_state_6(ab)(86), py_state_6(ab)(87), py_state_6(ab)(90), py_state_6(ab)(93), py_state_6(ab)(97), py_state_6(ab)(99), py_state_6(ab)(100), py_state_6(ab)(101), py_state_6(ab)(103), py_state_6(ab)(105), py_state_6(ab)(9), py_state_6(ab)(10), (18), (22), (28), (32), py_state_6(ab)(67), py_state_6(ab)(71), py_state_6(ab)(77), py_state_6(ab)(81)>...",RESOLVED          FIXED      
27898,Alexandre Oliva,Compile failure with --combine and anonymous structures,"$ cat foobar.cunion u {        struct {                int i;        };};extern int somefunc(union u *);$ gcc --combine -c foobar.c foobar.cfoobar.c:8: error: conflicting types for 'somefunc'foobar.c:8: error: previous declaration of 'somefunc' was heregcc version 4.1.0 20060304 (Red Hat 4.1.0-3)Happens on both PowerPC and i386. If the internal structure is made non-anonymous, it compiles.",RESOLVED          FIXED      
33572,Alexandre Oliva,[4.3 Regression] wrong code with -O,"> cat bug.cc#include <vector>#include <memory>struct Foo { virtual void f() {} };int main(int argc, char**){        std::auto_ptr<Foo> foo;        if (argc) {                foo.reset(new Foo());        } else {                std::vector<int> v;        }        Foo* p = foo.release();        p->f();}> g++ -O bug.cc> a.outSegmentation fault (core dumped)I'm using SVN revision 128838 on linux-x86_64.Without -O or with g++ version 4.2.1 this program works correctly.",RESOLVED          FIXED      
30643,Alexandre Oliva,[4.1/4.2/4.3 regression] CSE pessimization,"CSE used to eliminate all the ""if""s in the code below at least in gcc-3.x (and probably even earlier). Now in SVN HEAD it does not do it anymore. 4.1 still does it. struct s {  int a;  int b;};void bar (struct s *ps,  int *p, int *__restrict__ rp, int *__restrict__ rq){  ps->a = 0;  ps->b = 1;  if (ps->a != 0)    abort ();  p[0] = 0;  p[1] = 1;  if (p[0] != 0)     abort ();  rp[0] = 0;  rq[0] = 1;  if (rp[0] != 0)     abort();}-O2 assembly for SVN HEAD:bar:        subl    $12, %esp        movl    16(%esp), %eax        movl    20(%esp), %edx        movl    24(%esp), %ecx        movl    $0, (%eax)        movl    $1, 4(%eax)        movl    (%eax), %eax        testl   %eax, %eax        jne     .L20        movl    $0, (%edx)        movl    (%edx), %eax        movl    $1, 4(%edx)        testl   %eax, %eax        jne     .L20        movl    $0, (%ecx)        movl    (%ecx), %ecx        movl    28(%esp), %eax        testl   %ecx, %ecx        movl    $1, (%eax)        jne     .L20        addl    $12, %esp        ret.L20:        call    abort-O2 assembly for 4.1.1bar:        movl    4(%esp), %eax        movl    8(%esp), %edx        movl    $0, (%eax)        movl    $1, 4(%eax)        movl    12(%esp), %eax        movl    $0, (%edx)        movl    $1, 4(%edx)        movl    $0, (%eax)        movl    16(%esp), %eax        movl    $1, (%eax)        ret",RESOLVED          FIXED      
20280,Alexandre Oliva,"[4.0/4.1 regression] ICE in create_tmp_var, at gimplify.c:368","gcc (GCC) 4.0.0 20050228 (Red Hat 4.0.0-0.30)Copyright (C) 2005 Free Software Foundation, Inc.This is free software; see the source for copying conditions.  There is NOwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.---Making: ../../../unxlngi6.pro/slo/fltini.objg++ -Wreturn-type -fmessage-length=0 -c -I.  -I. -I../inc -I../../../inc-I../../../unx/inc -I../../../unxlngi6.pro/inc -I.-I/usr/src/redhat/BUILD/SRC680_m80/solver/680/unxlngi6.pro/inc/stl-I/usr/src/redhat/BUILD/SRC680_m80/solver/680/unxlngi6.pro/inc/external-I/usr/src/redhat/BUILD/SRC680_m80/solver/680/unxlngi6.pro/inc-I/usr/src/redhat/BUILD/SRC680_m80/solenv/unxlngi6/inc-I/usr/src/redhat/BUILD/SRC680_m80/solenv/inc-I/usr/src/redhat/BUILD/SRC680_m80/res-I/usr/src/redhat/BUILD/SRC680_m80/solver/680/unxlngi6.pro/inc/stl-I/usr/src/redhat/BUILD/SRC680_m80/solenv/inc/Xp31 -I/usr/include-I/usr/X11R6/include     -I. -I../../../res -I. -Wuninitialized -g1 -Os-fno-strict-aliasing   -fvisibility=hidden -pipe -mtune=pentiumpro-Wno-ctor-dtor-privacy -fvisibility-inlines-hidden -fexceptions-fno-enforce-eh-specs   -fpic -DLINUX -DUNX -DVCL -DGCC -DC341 -DINTEL-DGXX_INCLUDE_PATH=/usr/lib/gcc/i386-redhat-linux/4.0.0/../../../../include/c++/4.0.0-DCVER=C341 -D_USE_NAMESPACE -DGLIBC=2 -DX86 -D_PTHREADS -D_REENTRANT-DNEW_SOLAR -D_USE_NAMESPACE=1 -DSTLPORT_VERSION=400-DHAVE_GCC_VISIBILITY_FEATURE -D__DMAKE -DUNIX -DCPPU_ENV=gcc3 -DSUPD=680-DPRODUCT -DNDEBUG -DPRODUCT_FULL -DOSL_DEBUG_LEVEL=0 -DOPTIMIZE -DEXCEPTIONS_ON-DCUI -DSOLAR_JAVA -DSRC680   -DNUM_RELSPACE -DVERTICAL_LAYOUT-DACCESSIBLE_LAYOUT -DBIDI -DSW_DLLIMPLEMENTATION -DSHAREDLIB -D_DLL_ -DMULTITHREAD  -o ../../../unxlngi6.pro/slo/fltini.o/usr/src/redhat/BUILD/SRC680_m80/sw/source/filter/basflt/fltini.cxx/usr/src/redhat/BUILD/SRC680_m80/sw/source/filter/basflt/fltini.cxx: In function\uffff\uffff\uffffvoid CalculateFlySize(SfxItemSet&, const SwNodeIndex&,SwTwips)\uffff\uffff\uffff:/usr/src/redhat/BUILD/SRC680_m80/sw/source/filter/basflt/fltini.cxx:810:internal compiler error: in create_tmp_var, at gimplify.c:368Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://bugzilla.redhat.com/bugzilla> for instructions.Preprocessed source stored into /tmp/ccAHLsI1.out file, please attach this toyour bugreport.dmake:  Error code 1, while making '../../../unxlngi6.pro/slo/fltini.obj''---* tg_merge.mk *---'dmake:  Error code 255, while making 'do_it_exceptions''---* tg_merge.mk *---'",RESOLVED          FIXED      
30189,Alexandre Oliva,[4.1 Regression] ICE on modified_type_die,"/* { dg-do compile } *//* { dg-options ""-g -O"" } */extern void foo (void);staticvoid baz (int i){  foo ();  typedef char A[i];  struct { A b; } *x = 0;}voidbar (i){  baz (i);}ICEs in modified_type_die in 4.1.x (x86_64-linux -m32, -m64, ppc-linux -m32, -m64 at least).  Works with 3.4.6 as well as 4.2.x.",RESOLVED          FIXED      
4372,Alexandre Oliva,#pragma weak pthread* inclusion causes applications to crash without a linker error when one forgets to link with -lpthread,"Recently my (test) application started to core dump in__libc_strtol_internal (according to gdb), apparentlycalled from pthread_getspecific.It took me awhile to find out that I had forgottento add a -lpthread when linking.  I considered it a bugthat the linker didn't give an error so I tried to writea small test case to reproduce this, but in the test casethe linker DID give me `undefined reference to pthread_getspecific'...After a little investigation, I found that the differencebetween the test case and the problem case could be broughtback to the *.ii file: the problem case has included aseries of #pragma weak pthread... that caused the linkerto think that these functions are present as local functions,while actually it causes a call to address 0x0 (hence the`__libc_strtol_internal' I guess).Because I can not succeed to make a small test case, I'llgive results of the my own investigation using the largeproblem case:~/c++/libcw_branch-threading/src/libcwd/tests>g++-3.0.1 -DHAVE_CONFIG_H -I. -I- -I../include -DCWDEBUG -g -D_REENTRANT -c hello_world.cc -save-temps -vReading specs from /usr/local/gcc-3.0.1/lib/gcc-lib/i686-pc-linux-gnu/3.0.1/specsConfigured with: /usr/src/gcc/gcc-3.0.1/configure --prefix=/usr/local/gcc-3.0.1 --enable-shared --with-gnu-as --with-gnu-ld --enable-languages=c++ --enable-debug --enable-threadsThread model: posixgcc version 3.0.1GNU CPP version 3.0.1 (cpplib) (i386 Linux/ELF)ignoring nonexistent directory ""/usr/local/gcc-3.0.1/i686-pc-linux-gnu/include""#include ""..."" search starts here: .#include <...> search starts here: ../include /usr/local/gcc-3.0.1/include/g++-v3 /usr/local/gcc-3.0.1/include/g++-v3/i686-pc-linux-gnu /usr/local/gcc-3.0.1/include/g++-v3/backward /usr/local/include /usr/local/gcc-3.0.1/lib/gcc-lib/i686-pc-linux-gnu/3.0.1/include /usr/includeEnd of search list. /usr/local/gcc-3.0.1/lib/gcc-lib/i686-pc-linux-gnu/3.0.1/cc1plus -fpreprocessed hello_world.ii -quiet -dumpbase hello_world.cc -g -version -o hello_world.sGNU CPP version 3.0.1 (cpplib) (i386 Linux/ELF)GNU C++ version 3.0.1 (i686-pc-linux-gnu)        compiled by GNU C version 3.0.1. as --traditional-format -V -Qy -o hello_world.o hello_world.sGNU assembler version 2.11.90.0.8 (i386-redhat-linux) using BFD version 2.11.90.0.8Next I edit the *.ii file and remove the #pragma weak lines,showing that these are the problem:~/c++/libcw_branch-threading/src/libcwd/tests>vi hello_world.ii~/c++/libding/src/libcwd/tests>/usr/local/gcc-3.0.1/lib/gcc-lib/i686-pc-linux-gnu/3.0.1/cc1plus -fpreprocessed hello_world.ii -quiet -dumpbase hello_world.cc -g -version -o hello_world.sGNU CPP version 3.0.1 (cpplib) (i386 Linux/ELF)GNU C++ version 3.0.1 (i686-pc-linux-gnu)        compiled by GNU C version 3.0.1.~/c++/libcw_branch-threading/src/libcwd/tests>as --traditional-format -V -Qy -o hello_world.o hello_world.sGNU assembler version 2.11.90.0.8 (i386-redhat-linux) using BFD version 2.11.90.0.8~/c++/libcw_branch-threading/src/libcwd/tests>nm hello_world.o | grep pthread00000330 t _Z20__gthread_mutex_lockP15pthread_mutex_t00000360 t _Z22__gthread_mutex_unlockP15pthread_mutex_t         U pthread_create         U pthread_getspecific         U pthread_key_create         U pthread_mutex_lock         U pthread_mutex_unlock         U pthread_once         U pthread_setspecificNext, I do this again but now change a pragma into#xxxpragma, getting:~/c++/libcw_branch-threading/src/libcwd/tests>vi hello_world.ii~/c++/libcw_branch-threading/src/libcwd/tests>/usr/local/gcc-3.0.1/lib/gcc-lib/i686-pc-linux-gnu/3.0.1/cc1plus -fpreprocessed hello_world.ii -quiet -dumpbase hello_world.cc -g -version -o hello_world.sGNU CPP version 3.0.1 (cpplib) (i386 Linux/ELF)GNU C++ version 3.0.1 (i686-pc-linux-gnu)        compiled by GNU C version 3.0.1.In file included from /usr/local/gcc-3.0.1/include/g++-v3/i686-pc-linux-gnu/bits/gthr.h:98,                 from /usr/local/gcc-3.0.1/include/g++-v3/i686-pc-linux-gnu/bits/c++io.h:37,                 from /usr/local/gcc-3.0.1/include/g++-v3/bits/fpos.h:39,                 from /usr/local/gcc-3.0.1/include/g++-v3/bits/std_iosfwd.h:41,                 from /usr/local/gcc-3.0.1/include/g++-v3/bits/std_ios.h:39,                 from /usr/local/gcc-3.0.1/include/g++-v3/bits/std_ostream.h:39,                 from /usr/local/gcc-3.0.1/include/g++-v3/bits/std_iostream.h:40,                 from /usr/local/gcc-3.0.1/include/g++-v3/iostream:31,                 from ../include/libcw/debug.h:81,                 from hello_world_debug.h:18,                 from hello_world.cc:28:/usr/local/gcc-3.0.1/include/g++-v3/i686-pc-linux-gnu/bits/gthr-default.h:48:2: invalid preprocessing directive #xxxpragmaApparently, the pragma's are in bits/gthr-default.h:48.Hmm, maybe I can reproduce this after all by including#include <iosfwd> in the small test case...~>g++-3.0.1 test.cc -o test~>./testSegmentation fault (core dumped)Yup, that does the trick.I think this is highly annoying.  The #pragma weakshould not make the linker think the function exists :/.Release:3.0.1Environment:i686-rawhide-gnu-linuxHow-To-Repeat:Compile the following code snippet and don't link with-lpthread (no error occurs):#include <iosfwd>#include <pthread.h> static pthread_once_t S_key_once;static pthread_key_t S_key; void S_destroy(void* tsd_ptr) throw(){} void S_alloc_key(void) throw(){  pthread_key_create(&S_key, S_destroy);} int main(void){  pthread_once(&S_key_once, S_alloc_key);}",RESOLVED          FIXED      
28672,Alexandre Oliva,[4.2 Regression]: Gcc went into infinite loop when building libstdc++,"With revision 116045, gcc mainline went into infinite loop when compilinglibstdc++-v3/src/wlocale-inst.cc.",RESOLVED          FIXED      
26993,Alexandre Oliva,ICE on invalid code with weakref,"Testcase:int f(void)static __typeof(f) __gthrw_f __attribute__ ((__weakref__(""f"")));----ICE:t.c:2: error: storage class specified for parameter ‘__gthrw_f’t.c:2: internal compiler error: tree check: expected tree that contains ‘decl with visibility’ structure, have ‘parm_decl’  in handle_weakref_attribute, at c-common.c:4832Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.",RESOLVED          FIXED      
26660,Alexandre Oliva,"[4.2 Regression] PCH vs -save-temps, ICE while GCing","create an empty file called t.hh.create a file called t1.cc with:#include ""t.hh""extern __inline__ intstat (__const char *__path, struct stat *__statbuf) throw (){--------------compile the PCH like:g++ t.hhand the source file with:g++ t1.cc -save-temps --param ggc-min-expand=0 --param ggc-min-heapsize=0 And see the following ICE:t1.cc: In function ‘int stat(const char*, stat*)’:t1.cc:4: error: expected `}' at end of inputt1.cc: At global scope:t1.cc:4: internal compiler error: Segmentation faultPlease submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.",RESOLVED          FIXED      
20532,Alexandre Oliva,[4.0 Regression] Bad code for DImode left shifts by 31 and then 1,"gcc (GCC) 4.0.0 20050316 (prerelease) (from the gcc-4_0-branch branch) emitsbad code for DImode left shifts by 31 and then 1 (foo << 31 <<1).  Instead ofdoing the shifts, both the lowpart (correctly) and the highpart (incorrectly)word get zeroed.  If the shifts are replaced by ones by 30 and then 2 or by oneby 32, then the resulting code is correct. GCC has been built with the following configure and make options:$ CC=i386-linux-gcc \CXX=i386-linux-g++ \F77=i386-linux-gfortran \CFLAGS=""-pipe -O2 -fomit-frame-pointer -mtune=i486"" \CXXFLAGS=""-pipe -O2 -fomit-frame-pointer -mtune=i486"" \FCFLAGS=""-pipe -O2 -fomit-frame-pointer -mtune=i486"" \CC_FOR_BUILD=i386-linux-gcc \CFLAGS_FOR_BUILD=""-pipe -O2 -fomit-frame-pointer -mtune=i486"" \CFLAGS_FOR_TARGET=""-pipe -O2 -fomit-frame-pointer -mtune=i486"" \CXXFLAGS_FOR_TARGET=""-pipe -O2 -fomit-frame-pointer -mtune=i486"" \FCFLAGS_FOR_TARGET=""-pipe -O2 -fomit-frame-pointer -mtune=i486"" \INSTALL_PROGRAM='${INSTALL} -s' \../configure --prefix=/usr --mandir='${datadir}/man' \--with-local-prefix='${prefix}/local' \--enable-shared \--with-slibdir=/lib \--enable-static \--with-system-zlib \--enable-threads \--cache-file=config.cache \--build=i386-linux --host=i386-linux --target=i386-linux$ make 'BOOT_CFLAGS=-pipe -O2 -fomit-frame-pointer -mtune=i486' \'STAGE1_CFLAGS=-pipe -O2 -fomit-frame-pointer -mtune=i486' \'GCJFLAGS=-pipe -O2 -fomit-frame-pointer -mtune=i486' \CXX_FOR_BUILD=i386-linux-g++ \'CXXFLAGS_FOR_BUILD=-pipe -O2 -fomit-frame-pointer -mtune=i486' bootstrap Here is a simple test case that fails for me (the source C file only as youseem not to want to receive *.s files):unsigned long long int badshift(unsigned long long int v){        return v << 31 << 1;} The problem was originally discovered with a 4.0.0 snapshot from the trunkdated 20050225, therefore it likely applies to 4.1.0, too.",RESOLVED          FIXED      
20160,Alexandre Oliva,[4.0/4.1 Regression] link errors building libgcj tests,"The libgcj testsuite is failing substantially all tests that require linkinglibgcj.a on arm-elf because of missing symbols.This failure started to occur sometime between 2005/02/13 and 2005/02/16.There are about 5000 lines of error messages for each link command: the totaltestrun log is about 1.5GBytes in size!/work/rearnsha/gnu/egcs/arm-elf/libjava/testsuite/../../libjava/.libs/libgcj.a(jni.o):In function `_Jv_JNI_GetAnyMethodID<0u>':/home/rearnsha/gnusrc/egcs-cross/libjava/jni.cc:730: undefined reference to`java::lang::StringBuffer::StringBuffer(java::lang::String*)'/home/rearnsha/gnusrc/egcs-cross/libjava/jni.cc:736: undefined reference to`java::lang::StringBuffer::class$'/work/rearnsha/gnu/egcs/arm-elf/libjava/testsuite/../../libjava/.libs/libgcj.a(jni.o):In function `_Jv_JNI_GetAnyMethodID<1u>':/home/rearnsha/gnusrc/egcs-cross/libjava/jni.cc:730: undefined reference to`java::lang::StringBuffer::StringBuffer(java::lang::String*)'/home/rearnsha/gnusrc/egcs-cross/libjava/jni.cc:736: undefined reference to`java::lang::StringBuffer::class$'/work/rearnsha/gnu/egcs/arm-elf/libjava/testsuite/../../libjava/.libs/libgcj.a(link.o):In function `_Jv_Linker::find_field(java::lang::Class*, java::lang::Class*,_Jv_Utf8Const*, _Jv_Utf8Const*)':/home/rearnsha/gnusrc/egcs-cross/libjava/link.cc:178: undefined reference to`java::lang::StringBuffer::StringBuffer()'/home/rearnsha/gnusrc/egcs-cross/libjava/link.cc:202: undefined reference to`java::lang::StringBuffer::StringBuffer()'/home/rearnsha/gnusrc/egcs-cross/libjava/link.cc:197: undefined reference to`java::lang::StringBuffer::class$'/work/rearnsha/gnu/egcs/arm-elf/libjava/testsuite/../../libjava/.libs/libgcj.a(link.o):In function `_Jv_Linker::search_method_in_class(java::lang::Class*,java::lang::Class*, _Jv_Utf8Const*, _Jv_Utf8Const*)':/home/rearnsha/gnusrc/egcs-cross/libjava/link.cc:471: undefined reference to`java::lang::StringBuffer::StringBuffer()'/home/rearnsha/gnusrc/egcs-cross/libjava/link.cc:478: undefined reference to`java::lang::StringBuffer::class$'/work/rearnsha/gnu/egcs/arm-elf/libjava/testsuite/../../libjava/.libs/libgcj.a(link.o):In function `_Jv_GetMethodString(java::lang::Class*, _Jv_Method*,java::lang::Class*)':/home/rearnsha/gnusrc/egcs-cross/libjava/link.cc:684: undefined reference to`java::lang::StringBuffer::StringBuffer(java::lang::String*)'etc.",RESOLVED          FIXED      
19786,Alexandre Oliva,[4.0 Regression] Aliasing optimisation bug,"The attached C++ program triggers an assertion violation when compiled with -O2(it should not).The assertion is not triggered when adding -fno-strict-aliasing, or when removing-O2.  It is also working when slight changes to the program are made (see commentsin the source).  It is the smallest version of the program which allowed me toreproduce the bug, but I did not try to look into the <vector> header.It might be an aliasing bug in <vector>, I don't know.Note that g++ 3.4 works fine.",RESOLVED          FIXED      
20028,Alexandre Oliva,[3.4 Regression] class and then template class gives an ICE,"Apparently g++ isn't recognizing protected members in inheritance before the class declaration.  Furthermore, G++ segfaults when adding the first line, and the friend class.----------------------zehly@lain:~ $ cat a.ccclass Foo;template <class T> class A{ friend class Foo; protected: typedef T someType; };template <class T> class B{ protected: typedef T anotherType; };template <typename T, template <class> class X, template <class> class Y>class Foo : public X <T>, public Y <typename X<T>::someType>{ typedef Y<typename X<T>::someType> yetAnotherType; };int main (){ Foo<int, A, B> x; return 0; }-------------zehly@lain:~ $ g++40 -v -save-temps -o a a.ccUsing built-in specs.Configured with: ./..//gcc-4.0-20050130/configure --disable-nls --with-system-zlib --with-libiconv-prefix=/usr/local --program-suffix=40 --with-gxx-include-dir=/usr/local/lib/gcc/i386-portbld-freebsd5.3/4.0.0/include/c++/ --disable-shared --disable-libgcj --prefix=/usr/local i386-portbld-freebsd5.3Thread model: posixgcc version 4.0.0 20050130 (experimental) [FreeBSD] /usr/local/libexec/gcc/i386-portbld-freebsd5.3/4.0.0/cc1plus -E -quiet -v a.cc -fpch-preprocess -o a.iiignoring nonexistent directory ""/usr/local/lib/gcc/i386-portbld-freebsd5.3/4.0.0/../../../../i386-portbld-freebsd5.3/include""#include ""..."" search starts here:#include <...> search starts here: /usr/local/lib/gcc/i386-portbld-freebsd5.3/4.0.0/include/c++/ /usr/local/lib/gcc/i386-portbld-freebsd5.3/4.0.0/include/c++//i386-portbld-freebsd5.3 /usr/local/lib/gcc/i386-portbld-freebsd5.3/4.0.0/include/c++//backward /usr/local/include /usr/local/lib/gcc/i386-portbld-freebsd5.3/4.0.0/include /usr/includeEnd of search list. /usr/local/libexec/gcc/i386-portbld-freebsd5.3/4.0.0/cc1plus -fpreprocessed a.ii -quiet -dumpbase a.cc -auxbase a -version -o a.sGNU C++ version 4.0.0 20050130 (experimental) [FreeBSD] (i386-portbld-freebsd5.3)        compiled by GNU C version 4.0.0 20050130 (experimental) [FreeBSD].GGC heuristics: --param ggc-min-expand=30 --param ggc-min-heapsize=4096a.cc:10: error: 'Foo' is not a template typea.cc: In function 'int main()':a.cc:14: error: 'Foo' is not a templatea.cc:13: internal compiler error: Segmentation faultPlease submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.----------------------zehly@lain:~ $ cat a.ii# 1 ""a.cc""# 1 ""<built-in>""# 1 ""<command line>""# 1 ""a.cc""class Foo;template <class T> class A{ friend class Foo; protected: typedef T someType; };template <class T> class B{ protected: typedef T anotherType; };template <typename T, template <class> class X, template <class> class Y>class Foo : public X <T>, public Y <typename X<T>::someType>{ typedef Y<typename X<T>::someType> yetAnotherType; };int main (){ Foo<int, A, B> x; return 0; }",RESOLVED          FIXED      
20008,Alexandre Oliva,"[4.0 Regression] internal compiler error: in expand_case, at stmt.c:2397","Target: i386-redhat-linuxConfigured with: ../configure --prefix=/usr --mandir=/usr/share/man--infodir=/usr/share/info --enable-shared --enable-threads=posix--enable-checking=release --with-system-zlib --enable-__cxa_atexit--disable-libunwind-exceptions --with-gxx-include-dir=/usr/include/c++/3.4.3--enable-languages=c,c++,java,f95 --enable-java-awt=gtk --host=i386-redhat-linuxThread model: posixgcc version 4.0.0 20050216 (Red Hat 4.0.0-0.24)---/usr/src/redhat/BUILD/SRC680_m77/xmlsecurity/source/xmlsec/nss/securityenvironment_nssimpl.cxx:756:internal compiler error: in expand_case, at stmt.c:2397Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.Preprocessed source stored into /tmp/cck1QjtG.out file, please attach this toyour bugreport.---g++4 -Wreturn-type -fmessage-length=0 -c -I. -I. -I../inc -I../../../inc-I../../../unx/inc -I../../../unxlngi6.pro/inc -I.-I/usr/src/redhat/BUILD/SRC680_m77/solver/680/unxlngi6.pro/inc/stl-I/usr/src/redhat/BUILD/SRC680_m77/solver/680/unxlngi6.pro/inc/external-I/usr/src/redhat/BUILD/SRC680_m77/solver/680/unxlngi6.pro/inc-I/usr/src/redhat/BUILD/SRC680_m77/solenv/unxlngi6/inc-I/usr/src/redhat/BUILD/SRC680_m77/solenv/inc-I/usr/src/redhat/BUILD/SRC680_m77/res-I/usr/src/redhat/BUILD/SRC680_m77/solver/680/unxlngi6.pro/inc/stl-I/usr/src/redhat/BUILD/SRC680_m77/solenv/inc/Xp31 -I/usr/include-I/usr/X11R6/include -I/usr/include/mozilla-1.7.5-I/usr/include/mozilla-1.7.5/nspr -I../../../source/xmlsec -DSYSTEM_MOZILLA-I/usr/include/mozilla-1.7.5/nss -I/usr/include/mozilla-1.7.5/nspr -I.-I../../../res -I/usr/include/mozilla-1.7.5/profile-I/usr/include/mozilla-1.7.5/string -I/usr/include/mozilla-1.7.5/embed_base-Wuninitialized -g1 -Os -fno-strict-aliasing -DSYSTEM_LIBXML-I/usr/include/libxml2 -fPIC -g -pipe -mtune=pentiumpro -Wno-ctor-dtor-privacy-fexceptions -fno-enforce-eh-specs -fno-rtti -Wall -Wconversion -Wpointer-arith-Wbad-function-cast -Wcast-align -Woverloaded-virtual -Wsynth -Wno-long-long-pthread -fpic -DLINUX -DUNX -DVCL -DGCC -DC341 -DINTEL-DGXX_INCLUDE_PATH=/usr/include/c++/3.4.3 -DCVER=C341 -D_USE_NAMESPACE -DGLIBC=2-DX86 -D_PTHREADS -D_REENTRANT -DNEW_SOLAR -D_USE_NAMESPACE=1-DSTLPORT_VERSION=400 -DHAVE_GCC_VISIBILITY_FEATURE -D__DMAKE -DUNIX-DCPPU_ENV=gcc3 -DSUPD=680 -DPRODUCT -DNDEBUG -DPRODUCT_FULL -DOSL_DEBUG_LEVEL=0-DOPTIMIZE -DEXCEPTIONS_ON -DCUI -DSOLAR_JAVA -DSRC680 -DTRACING-DXMLSEC_CRYPTO_NSS -DXMLSEC_NO_XSLT -DSHAREDLIB -D_DLL_ -DMULTITHREAD -o../../../unxlngi6.pro/slo/securityenvironment_nssimpl.o/usr/src/redhat/BUILD/SRC680_m77/xmlsecurity/source/xmlsec/nss/securityenvironment_nssimpl.cxx",RESOLVED          FIXED      
20022,Alexandre Oliva,[4.0 Regression] -fno-access-control is broken,"Using built-in specs.Target: i386-redhat-linuxConfigured with: ../configure --prefix=/usr --mandir=/usr/share/man--infodir=/usr/share/info --enable-shared --enable-threads=posix--enable-checking=release --with-system-zlib --enable-__cxa_atexit--disable-libunwind-exceptions --with-gxx-include-dir=/usr/include/c++/3.4.3--enable-languages=c,c++,java,f95 --enable-java-awt=gtk --host=i386-redhat-linuxThread model: posixgcc version 4.0.0 20050216 (Red Hat 4.0.0-0.24)---------------------------------Making: ../../../../unxlngi6.pro/slo/sw_atrfld.objg++4 -Wreturn-type -fmessage-length=0 -c -I.  -I. -I../inc -I../../../../inc-I../../../../inc/bf_sw -I../../../../unx/inc -I../../../../unxlngi6.pro/inc -I.-I/usr/src/redhat/BUILD/SRC680_m77/solver/680/unxlngi6.pro/inc/stl-I/usr/src/redhat/BUILD/SRC680_m77/solver/680/unxlngi6.pro/inc/external-I/usr/src/redhat/BUILD/SRC680_m77/solver/680/unxlngi6.pro/inc-I/usr/src/redhat/BUILD/SRC680_m77/solenv/unxlngi6/inc-I/usr/src/redhat/BUILD/SRC680_m77/solenv/inc-I/usr/src/redhat/BUILD/SRC680_m77/res-I/usr/src/redhat/BUILD/SRC680_m77/solver/680/unxlngi6.pro/inc/stl-I/usr/src/redhat/BUILD/SRC680_m77/solenv/inc/Xp31 -I/usr/include-I/usr/X11R6/include     -Is:/solar/inc/hm -I../../../../res -I. -Wuninitialized-g1 -Os -fno-strict-aliasing  -fno-access-control -pipe -mtune=pentiumpro-Wno-ctor-dtor-privacy -fno-exceptions   -fpic -DLINUX -DUNX -DVCL -DGCC -DC341-DINTEL -DGXX_INCLUDE_PATH=/usr/include/c++/3.4.3 -DCVER=C341 -D_USE_NAMESPACE-DGLIBC=2 -DX86 -D_PTHREADS -D_REENTRANT -DNEW_SOLAR -D_USE_NAMESPACE=1-DSTLPORT_VERSION=400 -DHAVE_GCC_VISIBILITY_FEATURE -D__DMAKE -DUNIX-DCPPU_ENV=gcc3 -DSUPD=680 -DPRODUCT -DNDEBUG -DPRODUCT_FULL -DOSL_DEBUG_LEVEL=0-DOPTIMIZE -DEXCEPTIONS_OFF -DCUI -DSOLAR_JAVA -DSRC680   -DNUM_RELSPACE-DVERTICAL_LAYOUT -DACCESSIBLE_LAYOUT -DBIDI -DSHAREDLIB -D_DLL_  -DMULTITHREAD -o ../../../../unxlngi6.pro/slo/sw_atrfld.o/usr/src/redhat/BUILD/SRC680_m77/binfilter/bf_sw/source/core/txtnode/sw_atrfld.cxx../../../../inc/bf_sw/horiornt.hxx:89: internal compiler error: Segmentation faultPlease submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.Preprocessed source stored into /tmp/ccHn4TcI.out file, please attach this toyour bugreport.dmake:  Error code 1, while making '../../../../unxlngi6.pro/slo/sw_atrfld.obj''---* tg_merge.mk *---'",RESOLVED          FIXED      
17788,Alexandre Oliva,poor diagnostic for missing reference initializer,"Compiling the following (invalid) code:class foo {public:        foo();};class bar: public foo {private:        int &a;};foo::foo() {}int main(int argc, char **argv){        bar x;}Returns:test.cpp:16: error: no matching function for call to `bar::bar ()'test.cpp:9: note: candidates are: bar::bar (const bar &)Rather than:test.cpp:14: error: structure `x' with uninitialized reference members(which you get when bar doesn't inherit foo).",RESOLVED          FIXED      
17816,Alexandre Oliva,duplicate definition of pure virtual function not diagnosed,struct S {  virtual int foo() = 0;}; int S::foo() { return 0; }int S::foo() { return 0; }Affects at least gcc 3.2 and forward.,RESOLVED          FIXED      
18838,Alexandre Oliva,[3.4 only] overload resolution depends on previous uses of the symbol,"The following is a reduced form of 26_numerics/cmath/fabs_inline.ccwhich has failed for a very long time on Alpha, but doesn't fail onother platforms and so isn't getting fixed.The problem is that Alpha's headers have an inline version of floorwhich uses fabs.  This usage isn't present on other systems.  Whichleads to the following reduced test case--------------------------------------------------------extern ""C"" {  extern double fabs (double __x) throw () __attribute__ ((__const__));  __inline double  fabs (double __x) throw () { return __builtin_fabs (__x); }}double fail_me(double __x) { return fabs(__x); }namespace std{  using ::fabs;}typedef double (*realfn) (double);using std::fabs;int main (){  realfn myfn = fabs;}--------------------------------------------------------which will pass if fail_me is commented out.",RESOLVED          FIXED      
19366,Alexandre Oliva,[4.0 Regression] Excessive duplicate error messages trying to treat '>>' as '> >',"Compiling the testcase g++.dg/template/error10.C producestoo many duplicate error messages about missing '>'.The error location contains invalid token '>>' that shouldbe replaced with '> >'.error10.C:12: error: '>>' should be '> >' within a nested template argument listerror10.C:13: error: spurious '>>', use '>' to terminate a template argument listerror10.C:57: error: a call to a constructor cannot appear in a constant-expressionerror10.C:57: error: template argument 1 is invaliderror10.C:57: error: invalid type in declaration before ';' tokenerror10.C:69: error: missing '>' to terminate the template argument listerror10.C:69: error: template argument 1 is invaliderror10.C:69: error: missing '>' to terminate the template argument listerror10.C:69: error: template argument 1 is invaliderror10.C:69: error: missing '>' to terminate the template argument listerror10.C:69: error: template argument 1 is invaliderror10.C:69: error: missing '>' to terminate the template argument list...",RESOLVED          FIXED      
2697,Alexandre Petit-Bianco,Tree checking failures in the java testsuite,"The following Tree checking failures occur in the javatestsuite on the 3.0 branch:libjava.lang/stub.java: In class `stub$bar':libjava.lang/stub.java: In method `stub$bar.test()'libjava.lang/stub.java:72: Tree check: expected identifier_node, have expr_with_file_location in lookup_field_wrapper, at java/parse.y:4080Similar errors occur on the trunk.Release:3.0 20010428 (prerelease)Environment:i686-pc-linux-gnuHow-To-Repeat:bootstrap with tree checking enabled and run thejava testsuite.",RESOLVED          FIXED      
1330,Alexandre Petit-Bianco,Forward initializer references not checked,The following code is illegal because initializers are are supposed to run in declared order and arn't allowed to forward reference each other. gcj does not detect this error.class InitOrder{  static int foo = bar;  static int bar = 5;}Release:unknownEnvironment:anyHow-To-Repeat:Compile the test case.,RESOLVED          FIXED      
1391,Alexandre Petit-Bianco,ICE on bogus this.OuterClass.method() construct,The following is accepted by gcj but is bogusline 13 should have read:	System.out.println(Test.this.toString());public class Test {    public static void main(String[] args) {        new Test().getInner().m();    }    public Inner getInner() {        return new Inner();    }    public class Inner {        public void m() {            System.out.println(this.Test.toString());        }    }}Removing the toString() from line 13:	System.out.println(this.Test);gives$ gcj --main=Test Test.java Test.java: In class `Test$Inner':Test.java: In method `m()':Test.java:13: internal error in check-init: tree code not implemented: type_declRelease:unknownEnvironment:gcc version 2.97 20001024 (experimental) + patch from gcj/283,RESOLVED          FIXED      
1392,Alexandre Petit-Bianco,Using .class in super class of outer class and in inner class fails,The following cannot be compiled with gjc -Cpublic class SuperClass {  SuperClass() {    Class k = Class.class;  }}public class OuterClass extends SuperClass {  public class InnerClass {    InnerClass() {      Class k = InnerClass.class;    }  }}$ gcj -C SuperClass.java OuterClass.java OuterClass.java: In class `OuterClass$InnerClass':OuterClass.java: In method `OuterClass$InnerClass(OuterClass)':OuterClass.java:8: Can't find method `class$(Ljava/lang/String;)' in type `OuterClass$InnerClass'. Candidates are:  `class$(java.lang.String)' in `OuterClass$InnerClass'  `class$(java.lang.String)' in `SuperClass'.Compiling with 'gcj -c SuperClass.java OuterClass.java' gives no error.Release:gcc version 2.97 20001024 (experimental) + patch from gcj/283,RESOLVED          FIXED      
2956,Alexandre Petit-Bianco,gcj does not terminate on invalid class definition,gcj does not terminate when compiling the following class:class BugObject extends Object;It does generate an error message but after that just hangs.$ gcj -C BugObject.java BugObject.java:1: '{' expected.   class BugObject extends Object;                                 ^This does actually occur in the Jacks testsuite which means that we cannot run that testsuite since the test harness never kills the compiler.Release:gcc version 3.0 20010526 (prerelease),RESOLVED          FIXED      
1273,Alexandre Petit-Bianco,Cannot import inner classes,State-Changed-From-To: open->feedbackState-Changed-Why: Thank you for your bug report. I'm attaching a patch.,RESOLVED          FIXED      
1274,Alexandre Petit-Bianco,Fields can be static in an inner class when they are final,"State-Changed-From-To: open->feedbackState-Changed-Why: I submitted a patch:    http://gcc.gnu.org/ml/gcc-patches/2000-06/msg00266.html        This test case still won't compile though, due to PR 256.",RESOLVED          FIXED      
1275,Alexandre Petit-Bianco,Cannot access static fields of static inner classes,State-Changed-From-To: open->feedbackState-Changed-Why: I attached a patch.,RESOLVED          FIXED      
1276,Alexandre Petit-Bianco,Cannot cast to inner class,"From: Mark Wielaard <mark@klomp.org>To: java-gnats@sourceware.cygnus.comCc:  Subject: Re: gcj/257 (workaround)Date: Fri, 14 Jul 2000 14:37:51 +0200 http://sources.redhat.com/cgi-bin/gnatsweb.pl?cmd=view&pr=257&database=java  As a workaround you can cast to (B$C) which is accepted by gcj. (But not by jikes and it seems wrong that gcj accepts it.)",RESOLVED          FIXED      
1306,Alexandre Petit-Bianco,Overriding method in Interface confuses gcj,"From: Mark Wielaard <mark@klomp.org>To: Bryce McKinlay <bryce@albatross.co.nz>Cc: java-gnats@sourceware.cygnus.comSubject: Re: gcj/285: Overriding method in Interface confuses gcjDate: Tue, 18 Jul 2000 10:55:11 +0200 Hi,  On Tue, Jul 18, 2000 at 11:01:57AM +1200, Bryce McKinlay wrote: > Thanks. This is actually a variant on PR234, which exposes a bug in the > fix for that PR. I've attached a patch below.  Yeah! That works for me. Now the only real showstopper for compiling the Collection classes from Classpath seems to be gcj/257.  Thanks,  Mark",RESOLVED          FIXED      
1353,Alexandre Petit-Bianco,java.awt.Component error with gcj from CVS - Package mismatch,"From: Tom Tromey <tromey@cygnus.com>To: mark@klomp.orgCc: java-gnats@sourceware.cygnus.comSubject: Re: gcj/327: java.awt.Component error with gcj from CVS - Package mismatchDate: 21 Aug 2000 18:10:50 -0600 >>>>> ""Mark"" == mark  <mark@klomp.org> writes:  Mark> ../../../libgcj/libjava/java/awt/Component.java:368: Incompatible type for `return'. Can't convert `java.awt.image.ColorModel' to `java.awt.ColorModel'.  Hi Mark.  You probably have an old java/awt/ColorModel.class in your build tree.  This causes problems.  Do a `make clean', then find . -name '*.class' | xargs rm. Then do a build.  If that works then that was your problem and we can close this PR.  Tom",RESOLVED          FIXED      
1390,Alexandre Petit-Bianco,this in an inner class object refers to the outer class object,State-Changed-From-To: open->feedbackState-Changed-Why: I have a patch.,RESOLVED          FIXED      
2361,Alexandre Petit-Bianco,Cannot acces protected field of superclass in a different package,Accessing a protected field from a superclass in a different package fails when you try to access it through a different instance. For example try the following:package pkg;public class C {protected int p = 16;}class Test extends pkg.C {    void test() {        Test test = new Test();        int i = p; // this succeeds        int j = test.p; // this should also be possible    }}package pkg;public class C {    protected int p = 16;}$ gcj -C Test.java pkg/C.java Test.java: In class `Test':Test.java: In method `Test.test()':Test.java:5: Can't access protected field `Test.p' from `Test'.           int j = test.p;                       ^1 errorCompiling first with jikes to class files and then compiling the class files to o files with gcj does work.Release:gcc version 3.0 20010323 (powerpc) and gcc version 3.1 20010323 (i586),RESOLVED          FIXED      
1110,Alexandre Petit-Bianco,gcj does not handle synchronized methods properly,"State-Changed-From-To: open->closedState-Changed-Why: It works fine for me, and Godmar reports that the problem     was due to a mis-installed libgcj.",CLOSED          FIXED      
1143,Alexandre Petit-Bianco,package usage,State-Changed-From-To: open->closedState-Changed-Why: This is a variant on gcj/80. The source parser is    known to have problems with package name qualification of    static fields and methods in expressions. I'm closing this    PR and updating gcj/80 to reflect your example.,CLOSED          FIXED      
1265,Alexandre Petit-Bianco,Lossage with BigInteger.java (probable compiler bug),"From: Bryce McKinlay <bryce@albatross.co.nz>To: zastai@hotmail.comCc: java-gnats@sourceware.cygnus.comSubject: Re: gcj/247: Lossage with BigInteger.java (probable compiler bug)Date: Fri, 26 May 2000 20:15:39 +1200 Are you trying to build a cvs/snapshot libgcj with gcc 2.95.2? Did you apply my 2.95.2 java patches (see http://waitaki.otago.ac.nz/~bryce/) before trying to do this? If you didn't, you will have a lot of difficulty building recent libgcjs.  This is a known compiler bug that was fixed a long time ago: see PR gcj/155.  regards    [ bryce ]  zastai@hotmail.com wrote:  > BigInteger.java: In class `java.math.BigInteger': > BigInteger.java: In method `isNegative()': > BigInteger.java:283: internal error - SP mismatch",CLOSED          FIXED      
1318,Alexandre Petit-Bianco,Internal Compiler Error,"State-Changed-From-To: open->closedState-Changed-Why: I'm closing this PR because a) your test case works for me,    and b) you havn't provided enough information to diagnose the    problem (like what build of gcj and libgcj you are running).    I suspect you got the compiler error because you are trying to    compile your code against foreign class files that do not    match their dependencies in libgcj.zip. Remove the ""jdk1.2.2""    class files from your command line and try again.",CLOSED          FIXED      
1021,Alexandre Petit-Bianco,fastjar files not in gcc_update,"Bootstrapping a checked out GCC tree can modify fastjar/Makefile.in,depending on timestamps.  To avoid this, the appropriate dependenciesshould be added to contrib/gcc_update.Release:2.97 20001209 (experimental)Environment:System: Linux decomino 2.2.17 #1 Mon Sep 4 20:22:16 UTC 2000 i686 unknownArchitecture: i686	host: i686-pc-linux-gnubuild: i686-pc-linux-gnutarget: i686-pc-linux-gnuconfigured with: ../gcc-cvs/configure --prefix=/opt/gcc/snapshot --disable-shared --enable-threads=posix --with-system-zlibHow-To-Repeat:Check out a GCC CVS tree, run contrib/gcc_update --touch, thenbootstrap and find (depending on exact software versions installed)that fastjar/Makefile.in has been modified.",RESOLVED          FIXED      
1207,Alexandre Petit-Bianco,"[4.0 Regression] ""Source file newer than class file"" warning","This message appears whenever there is a .java file newer than its matching .class file, even when the other files are also specified on the compiler command line.It should only appear when the out-of-date class files were not given on the command line.Release:gcc version 2.96 20000217 (experimental)Environment:Redhat 6.1How-To-Repeat:$ gcj -C A.java B.java$ touch B.java$ gcj -C A.java B.javaA.java:xx: warning: Source file for class `B' is newer than its matching class file. Source file used instead",RESOLVED          FIXED      
1333,Alexandre Petit-Bianco,private field access modifier not implemented correctly,"State-Changed-From-To: open->feedbackState-Changed-Why: Thank you for catching this, it's pretty lame. Here's    a patch.",RESOLVED          FIXED      
4204,Alexandre Petit-Bianco,java bytecode compilation failure,"gcj -C is failing while compiling rhug/xerxes on IA-32, Alpha and PowerPC Linux...gcj -C --encoding=8859_1 -fCLASSPATH=upstream/src:/castro/street/green/rhug/rhug/xerces/upstream/src -d upstre\am/src /castro/street/green/rhug/rhug/xerces/upstream/src/org/apache/xerces/utils/regex/Token.java/castro/street/green/rhug/rhug/xerces/upstream/src/org/apache/xerces/utils/regex/Token.java:1: Internal error:\ Segmentation faultPlease submit a full bug report,with preprocessed source if appropriate.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.Here's a stack trace...Program received signal SIGSEGV, Segmentation fault.convert (type=0x2000006ced8, expr=0x20000a15000) at /castro/street/green/gcc/gcc/gcc/java/typeck.c:128128       if (TREE_CODE (TREE_TYPE (expr)) == ERROR_MARK)(gdb) where#0  convert (type=0x2000006ced8, expr=0x20000a15000) at /castro/street/green/gcc/gcc/gcc/java/typeck.c:128#1  0x120085bf8 in generate_classfile (clas=0x2000007a4b0, state=0x11ffff2c0)    at /castro/street/green/gcc/gcc/gcc/java/jcf-write.c:2903#2  0x120086c50 in write_classfile (clas=0x2000007a4b0)    at /castro/street/green/gcc/gcc/gcc/java/jcf-write.c:3343#3  0x1200252e8 in java_expand_classes () at parse.y:8975#4  0x1200791b0 in yyparse () at /castro/street/green/gcc/gcc/gcc/java/jcf-parse.c:1179#5  0x1201c7a74 in compile_file (    name=0x1203719e8 ""/castro/street/green/rhug/rhug/xerces/upstream/src/org/apache/xerces/utils/regex/Token.j\ava"") at /castro/street/green/gcc/gcc/gcc/toplev.c:2319#6  0x1201cd6cc in toplev_main (argc=14, argv=0x12031b068) at /castro/street/green/gcc/gcc/gcc/toplev.c:4922#7  0x12008c468 in main (argc=14, argv=0x20000a15000) at /castro/street/green/gcc/gcc/gcc/main.c:34#8  0x20000155f64 in __libc_start_main (main=0x12008c450 <main>, argc=14, ubp_av=0x11ffff578,    init=0x120002680 <_init>, fini=0x2000011d588 <_dl_debug_impcalls>, rtld_fini=0x1202caf3c <yycheck+40994>,    stack_end=0x11ffff560) at ../sysdeps/generic/libc-start.c:129Release:3.1 20010901 (experimental)Environment:System: Linux castro.cygnus.com 2.2.17-4smp #1 SMP Mon Oct 23 15:03:57 EDT 2000 alpha unknownArchitecture: alpha host: alphaev6-unknown-linux-gnubuild: alphaev6-unknown-linux-gnutarget: alphaev6-unknown-linux-gnuconfigured with: /castro/street/green/gcc/gcc/configure --enable-threads --enable-languages=c++,java --prefix=/castro/street/green/gcc/iHow-To-Repeat: Check out rhug from http://sources.redhat.com/rhug and try building it on Alpha Linux.",RESOLVED          FIXED      
2598,Alexandre Petit-Bianco,Runtime crash regression accessing field from enclosing class from inner class,"The test case below crashes. This is a recent regressionwhich seems to be caused by this patch:2001-04-04  Alexandre Petit-Bianco  <apbianco@redhat.com>	* java-tree.h (struct lang_decl): New macro	`DECL_FIXED_CONSTRUCTOR_P.' New field `fixed_ctor.'	* parse.y (build_instance_initializer): New function.	(add_instance_initializer): Use it.	(java_fix_constructors): Set `current_class' before fix pass.	(fix_constructors): Just return if already fixed. Move `super()'	invokation ahead. Use `build_instance_initializer.'	Fixes PR java/1315.The problem occurs on both the branch and trunk and it breaks the collections classes. Removing the empty constuctor from the test case causes itto run correctly.I can't find anything obviously wrong with the 1315 patch,perhaps the real problem is not with fix_constructors butwith generate_finit(). It seems that the params list ingenerate_finit() never includes the enclosing this param(this$0), even under the previously working code. Perhapsit is just co-incidental that this every worked.Note the lack of a this$0 argument to finit in the stack trace:Program received signal SIGSEGV, Segmentation fault.[Switching to Thread 1026 (runnable)]0x08048a69 in EnclField__U24_Foo.finit__U24_() (this=@8061e30)    at EnclField.java:55         public static void main(String[] args)Current language:  auto; currently java(gdb) bt#0  0x08048a69 in EnclField__U24_Foo.finit__U24_() (this=@8061e30)    at EnclField.java:5  #1  0x08048a9f in EnclField__U24_Foo.EnclField__U24_Foo(EnclField) (    this=@8061e30, this$0=@8061e40) at EnclField.java:5Release:Current 3.0 branch and 3.1 trunkHow-To-Repeat:public class EnclField{  int modCount = 345;    public static void main(String[] args)  {    new EnclField().new Foo();    System.out.println (""ok"");  }  class Foo  {    private int bob = modCount;        Foo()    {     }  }}",RESOLVED          FIXED      
4715,Alexandre Petit-Bianco,Tree check failure in check_inner_circular_reference,"Building libgcj's java.util package with multiple file input yields a tree check failure. It looks like check_inner_circular_reference can run into unresolved/unloaded classes in certain circumstances, in this case java.util.AbstractMap is a POINTER_TYPE instead of a DECL_TYPE?A workaround is to add:if (TREE_CODE (su) == POINTER_TYPE)  return NULL_TREE;Release:trunkEnvironment:powerpc-unknown-linux-gnuHow-To-Repeat:$ cd gcc/libjava$ gcj -c java/util/*.java -o java-util.o            ./java/util/LinkedHashMap.java:0: Tree check: expected class 'd', have 'x' (identifier_node) in check_inner_circular_reference, at java/parse.y:5245",RESOLVED          FIXED      
1367,Alexandre Petit-Bianco,Latest gcc cannot compile interfaces,State-Changed-From-To: open->feedbackState-Changed-Why: It works now :-),RESOLVED          FIXED      
1112,Alexandre Petit-Bianco,Source parser: method call on cast to interface type produces internal error,State-Changed-From-To: open->closedState-Changed-Why: Not reproducable in current build (20000305),RESOLVED          FIXED      
1114,Alexandre Petit-Bianco,Compiler doesn't check access modifiers on interface implementations,State-Changed-From-To: open->feedbackState-Changed-Why: There is a compiler patch available.,RESOLVED          FIXED      
1127,Alexandre Petit-Bianco,gcj accepts invalid code where an exception must be caught/thrown,State-Changed-From-To: open->feedbackState-Changed-Why: Temptative fix checked in egcs. Let me know how it worksfor you.,RESOLVED          FIXED      
1149,Alexandre Petit-Bianco,Conditional expression in method call doesn't compile,State-Changed-From-To: open->feedbackState-Changed-Why: Temptative patch. Let me know how it works for you.,RESOLVED          FIXED      
1159,Alexandre Petit-Bianco,"Source parser miscompiles loops when using ""-O""","The presence of certain combinations of ""continue"" and ""break"" within loops results in incorrect runtime behavior and/or crashes when compiling from source with ""-O"".Release:gcc version 2.96 20000303 (experimental), also 2.95.2Environment:Redhat 6.1How-To-Repeat:Compile and run the attached test case. In this example, the crashes seem to occur on the 'break' statement afterthe loop completes and one or more 'continue's have alreadybeen executed, however this is a simplification of a morecomplex loop in some of my code where I'm seeing all kindsof bizzare behavior - not just on 'break' - but the presence of 'continue' definatly seems to be a factor.",RESOLVED          FIXED      
1166,Alexandre Petit-Bianco,compiler rejects inner-class argument to inner-class constructor,State-Changed-From-To: open->feedbackState-Changed-Why: There is a compiler patch.,RESOLVED          FIXED      
1167,Alexandre Petit-Bianco,Compiler crash on (illegal) attempt to create inner class from static context,State-Changed-From-To: open->feedbackState-Changed-Why: I proposed a patch.,RESOLVED          FIXED      
1168,Alexandre Petit-Bianco,compiler crashes on attempt to use anonymous class,State-Changed-From-To: open->feedbackState-Changed-Why: There is a patch.,RESOLVED          FIXED      
1209,Alexandre Petit-Bianco,"""-C"" generates incompatible bytecode for interface intitializer","From: Tom Tromey <tromey@cygnus.com>To: bryce@albatross.co.nzCc: java-gnats@sourceware.cygnus.comSubject: Re: gcj/158: ""-C"" generates incompatible bytecode for interface intitializerDate: Wed, 1 Mar 2000 22:26:09 -0800 (PST) Hi Bryce.  If you run the failing output back through gcj, does it complain?  If not, is that a bug in the verifier in gcj?  Tom",RESOLVED          FIXED      
1212,Alexandre Petit-Bianco,Compiler permits uninitialized final variables,From: bryce@sourceware.cygnus.comTo: java-gnats@sourceware.cygnus.comCc:  Subject: gcj/163Date: 7 Mar 2000 22:54:12 -0000 CVSROOT:	/cvs/java Module name:	libgcj Changes by:	bryce@sourceware.cygnus.com	00/03/07 14:54:12  Modified files: 	libjava/testsuite: ChangeLog  Added files: 	libjava/testsuite/libjava.compile: PR163.java PR163.xfail   Log message: 	2000-03-07  Bryce McKinlay  <bryce@albatross.co.nz> 	 	Test for PR gcj/163: 	* libjava.lang/PR163.java: New file. 	* libjava.lang/PR163.xfail: New file.  Patches: http://gcc.gnu.org/cgi-bin/gcc/libjava/testsuite/ChangeLog.diff?cvsroot=java&r1=1.65&r2=1.66 http://gcc.gnu.org/cgi-bin/gcc/libjava/testsuite/libjava.compile/PR163.java.diff?cvsroot=java&r1=NONE&r2=1.1 http://gcc.gnu.org/cgi-bin/gcc/libjava/testsuite/libjava.compile/PR163.xfail.diff?cvsroot=java&r1=NONE&r2=1.1,RESOLVED          FIXED      
1217,Alexandre Petit-Bianco,Wrong scope for inner class variable declaration,"From: tromey@sourceware.cygnus.comTo: java-gnats@sourceware.cygnus.comCc:  Subject: gcj/174Date: 14 Mar 2000 18:35:02 -0000 CVSROOT:	/cvs/java Module name:	libgcj Changes by:	tromey@sourceware.cygnus.com	00/03/14 10:35:02  Modified files: 	libjava/testsuite: ChangeLog  Added files: 	libjava/testsuite/libjava.compile: pr174.java   Log message: 	* libjava.compile/pr174.java: New file, for PR gcj/174.  Patches: http://gcc.gnu.org/cgi-bin/gcc/libjava/testsuite/ChangeLog.diff?cvsroot=java&r1=1.67&r2=1.68 http://gcc.gnu.org/cgi-bin/gcc/libjava/testsuite/libjava.compile/pr174.java.diff?cvsroot=java&r1=NONE&r2=1.1",RESOLVED          FIXED      
1219,Alexandre Petit-Bianco,Inner classes can't see unqualified inner-inner classes,"From: Alexandre Petit-Bianco <apbianco@cygnus.com>To: java-gnats@sourceware.cygnus.comCc:  Subject: Re: gcj/176: Inner classes can't see unqualified inner-inner classesDate: Wed, 15 Mar 2000 13:43:22 -0800 (PST) bryce@albatross.co.nz writes:  > // gcj (20000313) reports ""Type `x' not found in the declaration of the  > // return type of method `getX'.""  This is a regression caused by the fix to the PR #172. With the patch for #172 out, the test passes. I'm re-evaluating my fix to PR #172 and I'll re-check something in, then I'll close this case.  ./A",RESOLVED          FIXED      
1255,Alexandre Petit-Bianco,Can't call methods from Object on an inner class,From: Tom Tromey <tromey@cygnus.com>To: Java Gnats Server <java-gnats@sourceware.cygnus.com> Cc:  Subject: gcj/238Date: 23 May 2000 16:58:51 -0600 I submitted a fix for this.  Tom,RESOLVED          FIXED      
1256,Alexandre Petit-Bianco,Bad error message trying to use Class.this notation on a non-enclosing class,State-Changed-From-To: open->feedbackState-Changed-Why: I attached a patch. Let me know.,RESOLVED          FIXED      
1260,Alexandre Petit-Bianco,Compiler generates call to wrong method from inner class,From: bryce@sourceware.cygnus.comTo: java-gnats@sourceware.cygnus.comCc:  Subject: gcj/242Date: 29 May 2000 05:26:15 -0000 CVSROOT:	/cvs/java Module name:	libgcj Changes by:	bryce@sourceware.cygnus.com	00/05/28 22:26:14  Modified files: 	libjava/testsuite: ChangeLog  Added files: 	libjava/testsuite/libjava.lang: PR242.java PR242.out   Log message: 	2000-05-29  Bryce McKinlay  <bryce@albatross.co.nz> 	 	* libjava.lang/PR242.java: New file. PR gcj/242.  Patches: http://gcc.gnu.org/cgi-bin/gcc/libjava/testsuite/ChangeLog.diff?cvsroot=java&r1=1.99&r2=1.100 http://gcc.gnu.org/cgi-bin/gcc/libjava/testsuite/libjava.lang/PR242.java.diff?cvsroot=java&r1=NONE&r2=1.1 http://gcc.gnu.org/cgi-bin/gcc/libjava/testsuite/libjava.lang/PR242.out.diff?cvsroot=java&r1=NONE&r2=1.1,RESOLVED          FIXED      
1261,Alexandre Petit-Bianco,"""protected"" field access not restricted between packages","A ""protected"" field in anything other than ""this"" should not be accessible to a class outside the current instance,if it is declared in another package (even if the currentclass is a subclass of the declaring class)gcj incorrectly permits the following code:// file: pkg1/A.javapackage pkg1;public class A {  protected int i;}// file: pkg2/B.javapackage pkg2;public class B extends pkg1.A {  public B(pkg1.A a)  {    int i = a.i;  }  }Note that this code is still incorrectly accepted even if the ""extends pkg1.A"" is removed.Release:unknownEnvironment:gcc version 2.96 20000525 (experimental)How-To-Repeat:Compile the above test case.",RESOLVED          FIXED      
1267,Alexandre Petit-Bianco,Innerclass cannot access protected method declared in foreign-package superclass of parent,State-Changed-From-To: open->feedbackState-Changed-Why: Thanks for the report. I attached a patch.,RESOLVED          FIXED      
1284,Alexandre Petit-Bianco,"""bad class index 0"" error compiling javac/jikes anonymous class bytecode","The bytecode for the following test case, as producedby jikes or javac, fails to compile in gcj:$ gcj -c PR264*.classPR264.java:0: bad class index 0PR264.java: In class `PR264':PR264.java: In method `main(java.lang.String[])':PR264.java:0: bad class index 0Release:gcc version 2.96 20000608 (experimental)Environment:linuxHow-To-Repeat:public class PR264{  public static void main(String[] args)  {    Object obj = new Object() {};  }}",RESOLVED          FIXED      
1313,Alexandre Petit-Bianco,NullPointerException trying to access field in outer class from inner class initializer,State-Changed-From-To: open->feedbackState-Changed-Why: I think yesterday's patch fixed it:      http://gcc.gnu.org/ml/gcc-patches/2000-10/msg00629.html,RESOLVED          FIXED      
1314,Alexandre Petit-Bianco,Multiple empty instance initializers put compiler into endless malloc loop,"Attempt to compile the following (legal!) code results in jc1 trying to consume all memory:class Skanky{  {  }    {  }}(get ready to press ctrl-C quick, or else run it on an OS thatcan deal with an out of memory situation without crashing)Release:gcc version 2.96 20000722 (experimental)Environment:any",RESOLVED          FIXED      
1315,Alexandre Petit-Bianco,Inner class initializer crash,"From: Bryce McKinlay <bryce@albatross.co.nz>To: java-gnats@sourceware.cygnus.com, apbianco@cygnus.comCc:  Subject: Re: gcj/293Date: Fri, 20 Oct 2000 23:23:51 +1300 > Empty inner class initializer crash >  Actually the initializer doesn't have to be empty. Any inner class that has both a default constructor and an initializer block will trigger this bug. eg:  class InnerInit {   int a = 5;    class Inner   {     int b;      {       b = a;     }      Inner()     {       System.out.println (b);     }   } }  regards    [ bryce ]   http://sources.redhat.com/cgi-bin/gnatsweb.pl?cmd=view&pr=293&database=java",RESOLVED          FIXED      
1316,Alexandre Petit-Bianco,"JC1 segfaults on qualified ""this"" expression",State-Changed-From-To: open->feedbackState-Changed-Why: I posted a patch yesterday:      http://gcc.gnu.org/ml/gcc-patches/2000-10/msg00629.html,RESOLVED          FIXED      
1332,Alexandre Petit-Bianco,gcj does not check exceptions for Object.clone(),Object.clone() can throw the checked exception CloneNotSupportException. It is thus illegal to call clone()without catching or throwing this exception. But gcj doesnot detect this error.class Clone{  Object a()  {    return super.clone();  }    Object b(Object obj)  {    return obj.clone();  }}Release:unknownEnvironment:anyHow-To-Repeat:compile,RESOLVED          FIXED      
1336,Alexandre Petit-Bianco,String constant concatenation error,State-Changed-From-To: open->feedbackState-Changed-Why: I attached a patch.,RESOLVED          FIXED      
1337,Alexandre Petit-Bianco,Bogus error from java/awt/Window.java,"From: Bryce McKinlay <bryce@albatross.co.nz>To: java-gnats@sourceware.cygnus.com, apbianco@cygnus.comCc:  Subject: Re: gcj/312Date: Mon, 30 Oct 2000 23:05:59 +1300 I'm also getting this error while trying to build ANTLR (from www.antlr.org):  antlr/HTMLCodeGenerator.java: In class `antlr.HTMLCodeGenerator': antlr/HTMLCodeGenerator.java: In method `antlr.HTMLCodeGenerator()': antlr/HTMLCodeGenerator.java:35: Incompatible type for `='. Can't convert `antlr.JavaCharFormatter' to `antlr.CharFormatter'.                 charFormatter = new JavaCharFormatter();                                  ^ 1 error antlr/JavaCodeGenerator.java: In method `antlr.JavaCodeGenerator()': antlr/JavaCodeGenerator.java:69: Incompatible type for `='. Can't convert `antlr.JavaCharFormatter' to `antlr.CharFormatter'.         charFormatter = new JavaCharFormatter();                          ^ 1 error   ""JavaCharFormatter"" implements the ""CharFormatter"" interface directly, so this is strange. This seems to be rather common error when building 3rd party sources.  regards    [ bryce ]   http://sources.redhat.com/cgi-bin/gnatsweb.pl?cmd=view&pr=312&database=java",RESOLVED          FIXED      
1341,Alexandre Petit-Bianco,Failure to resolve inner class defined in superclass of enclosing context which is itself an inner class,"From: Alexandre Petit-Bianco <apbianco@cygnus.com>To: bryce@albatross.co.nzCc: java-gnats@sourceware.cygnus.comSubject: Re: gcj/316: Failure to resolve inner class defined in superclass of enclosing context which is itself an inner classDate: Fri, 20 Oct 2000 21:40:46 -0700 (PDT) bryce@albatross.co.nz writes:  > While attempting to debug PR 283, I came across (and fixed) another > bug, in do_resolve_class().  This patch is fine. Please check it in.  ./A",RESOLVED          FIXED      
1342,Alexandre Petit-Bianco,static method can't have same name as base class,The following legal Java code does not compile with gcj:class Constructor {}class Sub extends Constructor{  static void Constructor() {}}$ gcj -C Constructor.java Constructor.java:8: Instance methods can't be overriden by a static method. Method `<init>()' is an instance method in class `Constructor'.  static void Constructor() {}              ^1 errorRelease:current,RESOLVED          FIXED      
1348,Alexandre Petit-Bianco,Overloaded method resolution should not cross contexts,"gcj goes to some lengths to try and resolve calls to overloaded methods where methods in an outer context sharethe same name (see find_most_specific_methods_list etc). However this is unneccessary (and wrong), as demonstrated by the following example.class Overload{  void p(String s) {}  class A  {    void p(int i) {}        void a()    {      p(""One"");    }  }}Here gcj will patch the call through to p(String) in theouter context. But both jikes and javac reject this codebecause overload resolution should stop at the first contextin which an appropriatly named method is discovered.Jikes's error message is particularly intelligent here:$ jikes Overload.java Found 1 semantic error compiling ""Overload.java"":    11.       p(""One"");              <------>*** Error: The method ""void p(java.lang.String s);"" contained in the enclosing type ""Overload"" is a perfect match for this method call. However, it is not visible in this nested class because a method with the same name in an intervening class is hiding it.Release:current",RESOLVED          FIXED      
1368,Alexandre Petit-Bianco,Static array initializer link failure with -O,"From: Bryce McKinlay <bryce@albatross.co.nz>To: java-gnats@sourceware.cygnus.comCc:  Subject: Re: gcj/340: Static array initializer link failure with -ODate: Mon, 09 Oct 2000 14:30:26 +1300 bryce@albatross.co.nz wrote:  > $ gcj ArrayInit.java -o ai --main=ArrayInit -O > /tmp/ccmJthip.o: In function `ArrayInit::_003cclinit_003e(unsigned)': > /tmp/ccmJthip.o(.text+0x99): undefined reference to `LJv0' > collect2: ld returned 1 exit status  This bug is still present in the current compiler.  Here is my workaround:  Index: expr.c =================================================================== RCS file: /cvs/gcc/egcs/gcc/java/expr.c,v retrieving revision 1.87 diff -u -r1.87 expr.c --- expr.c      2000/10/05 07:17:34     1.87 +++ expr.c      2000/10/09 01:27:02 @@ -2328,6 +2328,7 @@         tree init = TREE_OPERAND (exp, 0);         tree array_decl;  +#if 0         /* See if we can generate the array statically.  */         if (TREE_CONSTANT (init) && TREE_STATIC (exp)             && JPRIMITIVE_TYPE_P (element_type)) @@ -2361,6 +2362,7 @@             pop_obstacks ();             return r;           } +#endif          array_decl = build_decl (VAR_DECL, NULL_TREE, TREE_TYPE (exp));         expand_decl (array_decl);      [ bryce ]",RESOLVED          FIXED      
1386,Alexandre Petit-Bianco,private method overloading when inner class extends its enclosing class,"If an inner class extends its enclosing class and""overloads"" a private method declared in the enclosing class,which method gets called?In class files compiled with javac, it depends on the declared type of the variable (see test code below):$ java InnerPvtInnerPvtAAInnerPvtAInnerPvtInnerPvtWith gcj however, the outer method is always called from the outer class (but calls from the inner class behavecorrectly):$ ./ipInnerPvtInnerPvtInnerPvtInnerPvtAInnerPvtInnerPvtRelease:gcc version 2.97 20001015 (experimental)Environment:*How-To-Repeat:class InnerPvt{  private void a()  {    System.out.println (""InnerPvt"");  }  public static void main(String[] args)  {    InnerPvt ip = new InnerPvt().new A();    ip.a();    InnerPvt.A ipa = new InnerPvt().new A();    ipa.a();    ipa = (InnerPvt.A) ip;    ipa.a();        ip = ipa;    ip.a();    ipa.b();      }  class A extends InnerPvt  {    private void a()    {      System.out.println (""A"");        }        void b()    {            this.a();      InnerPvt ip = this;      ip.a();      InnerPvt.this.a();    }  }}",RESOLVED          FIXED      
4007,Alexandre Petit-Bianco,can't find inner class,"Compiling the following (to either native or bytecode) results in...XercesBug.java:5: Type `Entry' not found in declaration of field `fEntries'.           private Entry[] fEntries = null;                   ^This code is from Xerces, and presumably compiles with javac.public final class XercesBug{    static final class OrderedHashtable    {        private Entry[] fEntries = null;         public static final class Entry  {     int x;        }    }}Release:3.1 20010806 (experimental)Environment:System: Linux peach.cygnus.co.uk 2.2.17pre20-ben3 #2 Wed Sep 6 01:14:01 CEST 2000 ppc unknownArchitecture: ppc host: powerpc-unknown-linux-gnubuild: powerpc-unknown-linux-gnutarget: powerpc-unknown-linux-gnuconfigured with: /peach/green/net/trunk/gcc/configure --prefix=/peach/green/net/trunk/i --enable-threads --enable-language=c,c++,java --enable-languages=c,c++,java --disable-multilibs --disable-multilib : (reconfigured)How-To-Repeat:Compile the code above with ""gcj -C"".",RESOLVED          FIXED      
5733,Alexandre Petit-Bianco,Segmentation fault of the java compiler,"compilation produces a segmentation fault. It only occurs whenI add an import of classes which are neither standard java classes, norclasses in the same directory.Release:3.0.3Environment:System: Linux azure 2.4.13 #8 SMP Wed Nov 21 10:52:00 CET 2001 i686 unknownArchitecture: i686 host: i686-pc-linux-gnubuild: i686-pc-linux-gnutarget: i686-pc-linux-gnuconfigured with: ./configure --prefix=/usrHow-To-Repeat:I have this file tree :root -+- Main_class.java      |      +- Graph -- Sommet.javaSommet.java :import Graph.*;public class Sommet {    String s;    public Sommet(String $name) {        s=$name;    }    public String toString() {        return s;    }}-----Main_class.java :import Graph.*;public class Main_class {    public static void main(String args[]) {        Sommet s=new Sommet(""sommet"");        System.out.println(s);    }}In the root directory, I launch% gcj --main=Main_class Main_class.java Main_class.java:0: Internal error: Segmentation faultPlease submit a full bug report,with preprocessed source if appropriate.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.",RESOLVED          FIXED      
1044,Alexandre Petit-Bianco,Building gcc(from cvs) crashes with internal error #20000409,"Building gcc from the cvs tree crashes with an internal error when it trys to compilethe prims.cc (libjava) file:make[2]: Entering directory `/home/mmatus/srcs/gcc/comp/i586-pc-linux-gnu/libjava'/.....                 from ../../../gcc/libjava/java/lang/Class.h:18,                 from ../../../gcc/libjava/gcj/cni.h:17,                 from ../../../gcc/libjava/prims.cc:30:../../../gcc/libjava/gcj/array.h:59: Internal error #20000409.../../../gcc/libjava/gcj/array.h:59: Internal compiler error in   write_builtin_type, at cp/mangle.c:1483Please submit a full bug report.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.make[2]: *** [prims.lo] Error 1make[2]: Leaving directory `/home/mmatus/srcs/gcc/comp/i586-pc-linux-gnu/libjava'make[1]: *** [all-recursive] Error 1Release:2.97 20001211  (from the last cvs tree update at Dec/12/00 10:00pm)Environment:Configured with: ../gcc/configure --prefix=/usr/local/gcc-cvsUsing gcc-2.95.2 as the base compiler on a Amd K6-300MHz, Linux Suse 6.4.How-To-Repeat:Try to compile the cvs tree (Dec/12/00 10:00pm) andwatch when 'make' enters the libjava subdirectory.",RESOLVED          FIXED      
1074,Alexandre Petit-Bianco,jv-scan fails on ArrayClass.java,I get this error:creche. jv-scan --list-class ArrayClass.java ArrayClass.java: 6: parse errorArrayClass.java comes from libjava/testsuite/libjava.compile/It is syntactically correct.  It appears that parse-scan.ydoesn't correctly handle `.class' syntax.Release:unknown,RESOLVED          FIXED      
1105,Alexandre Petit-Bianco,"really last test this time, I mean it.","From: Jason Molenda <jsm@cygnus.com>To: java-bugs@sourceware.cygnus.comCc:  Subject: Re: gcj/10: really last test this time, I mean it.Date: Mon, 12 Jul 1999 13:35:48 -0700 See if a follow-up goes to apbianco and the list.",RESOLVED          FIXED      
1108,Alexandre Petit-Bianco,crashes when compiling try block from java source,State-Changed-From-To: open->feedbackState-Changed-Why: A patch is available.,RESOLVED          FIXED      
1113,Alexandre Petit-Bianco,Bad array or type conversion bug when compiling bytecode,State-Changed-From-To: open->feedbackState-Changed-Why: I've attached a patch.  Please try it and let me know if    it works for you.,RESOLVED          FIXED      
1115,Alexandre Petit-Bianco,Source parser; break causes incorrect exit in some nested for-loops,State-Changed-From-To: open->feedbackState-Changed-Why: This appears to be fixed in recent snapshots.    I've added a test case for this just in case it shows up    again. libgcj/testsuite/libjava.lang/pr109.java.,RESOLVED          FIXED      
1117,Alexandre Petit-Bianco,don't exclude private methods from method table when optimizing,"State-Changed-From-To: open->feedbackState-Changed-Why: The patch looks OK to me. Does it work for you? I'd like    to close this PR (I'll check the patch in and write a    Changelog entry on behalf of Per Bothner, unless Per wants    to do it himself.)",RESOLVED          FIXED      
1119,Alexandre Petit-Bianco,bug in compiler,State-Changed-From-To: open->closedState-Changed-Why: Godmar Back pointed out that the last gcc update made the    bug go away.,RESOLVED          FIXED      
1121,Alexandre Petit-Bianco,gcj rejects legal assignments to final variables in private methods,Please refer tohttp://sourceware.cygnus.com/ml/java-discuss/1999-q4/msg00221.htmlRelease:CVSEnvironment:Linux,RESOLVED          FIXED      
1130,Alexandre Petit-Bianco,SP mismatch error from certain code constructs,"From: Alexandre Petit-Bianco <apbianco@cygnus.com>To: java-gnats@sourceware.cygnus.comCc:  Subject: Re: gcj/122: SP mismatch error from certain code constructsDate: Mon, 3 Jan 2000 22:44:09 -0800 (PST) jmacnish@ideaforge.net writes: > When compiling a test java program (included), GCJ bails out with: >  > internal error - SP mismatch  Thanks for the bug report. Warren Levy already reported the bug to me a few weeks ago. I came up with a Q&D patch that I later refined and had reviewed by Per Bothner, who suggested a better fix that I still have to work on.  I'll keep Gnats posted.  ./A",RESOLVED          FIXED      
1134,Alexandre Petit-Bianco,Incompatible inherited throws clause are not catched by gcj,State-Changed-From-To: open->closedState-Changed-Why: Bug appears to be fixed in recent cvs compilers. Joerg has     verified this.,RESOLVED          FIXED      
1135,Alexandre Petit-Bianco,gcj dumps core on method invocation on a primitive type,"From: Bryce McKinlay <bryce@albatross.co.nz>To: joerg.brunsmann@fernuni-hagen.deCc: java-gnats@sourceware.cygnus.comSubject: Re: gcj/127: gcj dumps core on method invocation on a primitive typeDate: Wed, 24 May 2000 00:23:06 +1200 This is a multi-part message in MIME format. --------------08B5E1309CA34344A4E98C68 Content-Type: text/plain; charset=us-ascii Content-Transfer-Encoding: 7bit  I wrote a patch for this.  regards    [ bryce ]   --------------08B5E1309CA34344A4E98C68 Content-Type: text/plain; charset=us-ascii;  name=""gcj-prim_invoke.patch"" Content-Transfer-Encoding: 7bit Content-Disposition: inline;  filename=""gcj-prim_invoke.patch""  2000-05-23  Bryce McKinlay  <bryce@albatross.co.nz>  	* parse.y (patch_method_invocation): Don't try to lookup methods 	in primitive types.  Index: parse.y =================================================================== RCS file: /cvs/gcc/egcs/gcc/java/parse.y,v retrieving revision 1.168 diff -u -r1.168 parse.y --- parse.y	2000/05/20 22:38:05	1.168 +++ parse.y	2000/05/23 12:15:44 @@ -9322,6 +9322,16 @@          type = GET_SKIP_TYPE (resolved);        resolve_and_layout (type, NULL_TREE); +       +      if (JPRIMITIVE_TYPE_P (type)) +        { +	  parse_error_context +	    (identifier_wfl, +	    ""Can't invoke a method on primitive type `%s'"", +	    IDENTIFIER_POINTER (DECL_NAME (TYPE_NAME (type)))); +	  PATCH_METHOD_RETURN_ERROR ();	    	 +	}       +              list = lookup_method_invoke (0, identifier_wfl, type, identifier, args);        args = nreverse (args);    --------------08B5E1309CA34344A4E98C68--",RESOLVED          FIXED      
1136,Alexandre Petit-Bianco,weak error message when expecting final modifier,State-Changed-From-To: open->closedState-Changed-Why: Joern's patch has been checked in:          http://gcc.gnu.org/ml/gcc-patches/2000-01/msg00621.html,RESOLVED          FIXED      
1137,Alexandre Petit-Bianco,Static array length access bug in gcj,State-Changed-From-To: open->analyzedState-Changed-Why: This is reproducable even in recent compilers and    on IA-32 as well as PPC.      I've added test code to the libgcj testsuite for this.,RESOLVED          FIXED      
1139,Alexandre Petit-Bianco,Class verification error with GCJ -C / Bad code produced,"State-Changed-From-To: open->closedState-Changed-Why: This has been fixed in the current CVS compiler. I have tested    ""gcj -C"" output from the test case on both JDK 1.2.2 and JDK 1.3     and it works fine.",RESOLVED          FIXED      
1140,Alexandre Petit-Bianco,final field initialized with cast expression not treated as constant,"From: Pekka Nikander <pekka.nikander@hut.fi>To: java-gnats@sourceware.cygnus.com, apbianco@cygnus.com, gcb@gnu.orgCc:  Subject: Re: gcj/131Date: Thu, 23 Mar 2000 13:14:48 +0200 http://sourceware.cygnus.com/cgi-bin/gnatsweb.pl?cmd=view&pr=131&database=java  I think this bug is related to a subtle code generator bug. If you define a static final field that doesn't use casts, the compiler generates a compile time constant.  However, if you add a cast to the definition, without any other changes, the compiler does not any more recognize the  initializer as a constant but produces code into <clinit>.  Test code:    package main;   class dummy {      static final byte b0 = 0;      static final byte b1 = (byte)0;   }  Resulting assembler code (for Hitachi H8/300):  	.section .text 	.align 1 	.global __003cclinit_003e__Q24main5dummyU __003cclinit_003e__Q24main5dummyU: 	mov.w	#__CL_Q24main5dummy,r6 	jsr	@_initClass__Q34java4lang5Class 	sub.b	r0l,r0l 	mov.b	r0l,@__Q24main5dummy$b1 	rts 	.global __Q24main5dummy$b0 	.section .data __Q24main5dummy$b0: 	.byte 0 	.global __Q24main5dummy$b1 	.section .bss __Q24main5dummy$b1: 	.space 2  The bug seems to be in parse.y around line 14300 (YMMV, I have a custom version)    if (TREE_TYPE (node) != NULL_TREE && code != VAR_DECL && code != FIELD_DECL)     return NULL_TREE;  Integer constants etc are handled before; CONVERT_EXPR (which does have a TREE_TYPE defined) trips on this; e.g. PLUS_EXPR doesn't have a type defined, and it passes.  Maybe this whole test is more or less bogus?  --Pekka Nikander",RESOLVED          FIXED      
1144,Alexandre Petit-Bianco,Can't convert `java.lang.SecurityManager' to `java.lang.Object',Responsible-Changed-From-To: tromey->apbiancoResponsible-Changed-Why: Compiler bug.,RESOLVED          FIXED      
1148,Alexandre Petit-Bianco,internal compiler error: program jc1,"State-Changed-From-To: open->suspendedState-Changed-Why: I can't reproduce this problem.  Checker.java refers    to many classes that were not included.        Here are a couple of ideas:        	1- Try a recent snapshot of the compiler    	   instead of 2.95.2        	2- Try to create a minimal test case.        Thanks,  AG",RESOLVED          FIXED      
1151,Alexandre Petit-Bianco,gcj doesn't search non listed packages.,State-Changed-From-To: open->feedbackState-Changed-Why: There is a patch available.,RESOLVED          FIXED      
1155,Alexandre Petit-Bianco,can not build libgcj (internal error - SP mismatch),State-Changed-From-To: open->feedbackState-Changed-Why: Can you verified that the following patch is in place:          http://gcc.gnu.org/ml/gcc-patches/2000-01/msg01111.html,RESOLVED          FIXED      
1157,Alexandre Petit-Bianco,gcj -Wunused prints spurious warning,"I compiled this program with gcj -Wunused:public class HelloWorld {        public static void main(String [] args) {                char ch;                System.out.println(""Hello"");        }}I get this output:HelloWorld.java: In class `HelloWorld':HelloWorld.java: In method `main(java.lang.String[])':HelloWorld.java:2: warning: value computed is not usedHelloWorld.java: In method `<init>()':HelloWorld.java:1: warning: value computed is not usedI believe the message about the <init> method isin incorrect and should not appear in the output.Release:current cvs",RESOLVED          FIXED      
1170,Alexandre Petit-Bianco,gcj crashes with inner classes/interfaces invokation/usage.,State-Changed-From-To: open->closedState-Changed-Why: The already checked in patch fixes the problem (and the    test case runs correctly:)          http://gcc.gnu.org/ml/gcc-patches/2000-04/msg01001.html,RESOLVED          FIXED      
1173,Alexandre Petit-Bianco,can not build libgcj (internal error - SP mismatch) -- PR#155 not fixed,"From: ""Phil Hargett"" <hargettp@mindspring.com>To: ""Bryce McKinlay"" <bryce@albatross.co.nz>Cc: <java-gnats@sourceware.cygnus.com>Subject: RE: gcj/189: can not build libgcj (internal error - SP mismatch) -- PR#155 not fixedDate: Thu, 30 Mar 2000 18:53:21 -0500 Actually, that's how I did try to create libgcj: download gcc from CVS, build it using my RH installed compiler (egcs-1.1.2), then using the new compiler (2.95.2), compile libgcj.  If I had received some other bug, I would have imagined that it was just shame on me for using a new, unstable release, but it's the same bug that's been around for a month.  Thanks!    -----Original Message----- From: bryce@havoc.albatross.co.nz [mailto:bryce@havoc.albatross.co.nz]On Behalf Of Bryce McKinlay Sent: Thursday, March 30, 2000 5:25 PM To: hargettp@mindspring.com Cc: java-gnats@sourceware.cygnus.com Subject: Re: gcj/189: can not build libgcj (internal error - SP mismatch) -- PR#155 not fixed   Hi Phil,  You cannot build the current cvs libgcj with gcc 2.95.2. Please checkout the latest gcc from cvs and try it with that, or take a look at http://sourceware.cygnus.com/java/download.html for other options. We know this is a sub-optimal situation, but we're bound by gcc release schedules as to when we can release a new stable gcj/libgcj combination.  regards    [ bryce ]   hargettp@mindspring.com wrote:  > >Originator:     Phil Hargett > >Release:        2.95.2 - updated from CVS on 3/30/00 > >Organization: > >Environment: > RH Linux 6.0, i686, gcc -v 2.95.2 > >Description: > The same problem reported in PR#155 is happening on my machine.  Apologies > >How-To-Repeat: > 1. Download gcc 2.95.2 (core + c++ and java files) > 2. ./configure --prefix=/home/phil, to avoid overwriting the installed compiler > 2. make -- Compile gcc using default compiler on RH 6.0 (egcs-1.1.2, which reports egcs-2.91.66 on gcc -v) > 3. make install (puts gcc in /home/phil/bin, other support files relative to that as appropriate) > 4. change $PATH to put /home/phil/bin ahead of /usr/bin, to ensure that invoking gcc will invoke gcc 2.95.2, not the egcs-1.1.2 in /usr/bin > 5. checkout libgcj (latest as of 3/30/00) > 6. libgcj/configure --prefix=/home/phil (again to install in user directory) > 7. make -- after a *lot* of work, reports same error as PR#155 in isNegative() method of BigInteger.java",RESOLVED          FIXED      
1176,Alexandre Petit-Bianco,gcj does not look in superclass scope for inner classes,State-Changed-From-To: open->feedbackState-Changed-Why: Can you try this patch?,RESOLVED          FIXED      
1181,Alexandre Petit-Bianco,Internal compiler failure,State-Changed-From-To: open->feedbackState-Changed-Why: There is a patch.,RESOLVED          FIXED      
1182,Alexandre Petit-Bianco,Compiler failure,State-Changed-From-To: open->feedbackState-Changed-Why: There is a patch.,RESOLVED          FIXED      
1183,Alexandre Petit-Bianco,Type botch with static final ints.,State-Changed-From-To: open->feedbackState-Changed-Why: There is a patch.,RESOLVED          FIXED      
1186,Alexandre Petit-Bianco,Compiler generates incorrect array initialization code,"From: Tom Tromey <tromey@cygnus.com>To: jsturm@sigma6.comCc: java-gnats@sourceware.cygnus.comSubject: Re: gcj/214: Compiler generates incorrect array initialization codeDate: Sat, 22 Apr 2000 14:46:55 -0700 (PDT) Jeff> (Is there any good reason static arrays are initialized at Jeff> runtime instead of generating an initialized data object?)  Nobody has done the work. Other than that, no -- it is a good idea.  Tom",RESOLVED          FIXED      
1191,Alexandre Petit-Bianco,gcj incorrectly allows access to private inner interfaces,"From: Mo DeJong <mdejong@cygnus.com>To: Bryce McKinlay <bryce@albatross.co.nz>Cc: java-gnats@sourceware.cygnus.comSubject: Re: gcj/224Date: Sun, 7 May 2000 23:53:07 -0700 (PDT) We might not want to do that just yet. I have been talking with alex about a new compiler regression test system that I would like to see used. The good this about my approach is that we would be able to share compiler regresion tests with the Jikes and Kaffe Java projects.  The bad thing is that it is different than what is currently being used (but I see that as a bug and not a feature). So what is my point? Dont worry about checking my test cases into your current bug system. I already incorporated them into my system, so they are not going to be lost or anything. We can always add them to the existing system later.  Mo Dejong Red Hat Inc.  On Mon, 8 May 2000, Bryce McKinlay wrote:  > I checked in your test case for this one to our test suite. > Unfortunately, for the other PRs (223 & 225) its not easy because they > need to build multiple files in one command across different > directories, and there is no way to specify that given the current > architecture of the testsuite. >  > http://sourceware.cygnus.com/cgi-bin/gnatsweb.pl?cmd=view&pr=224&database=java",RESOLVED          FIXED      
1192,Alexandre Petit-Bianco,gcj incorrectly checks access on protected inner interfaces,"From: Bryce McKinlay <bryce@albatross.co.nz>To: mdejong@cygnus.comCc: java-gnats@sourceware.cygnus.comSubject: Re: gcj/225: gcj incorrectly checks access on protected inner interfacesDate: Mon, 08 May 2000 17:50:30 +1200 mdejong@cygnus.com wrote:  > I don't think the following code is legal. The > ProtectedInnerInterface class is in the global > package and it has a protected member Inter > that should not be accessible.  I agree, the same problem applies to a ""protected static"" inner class, which javac (1.3) fails but gcj and jikes accept.  However, cases like this, where gcj compiles technically illegal code, should perhaps be assigned a lower priority than bugs where gcj fails to compile legal code.  regards    [ bryce ]",RESOLVED          FIXED      
1197,Alexandre Petit-Bianco,"Failure to compile various classes in the ""Jetty"" http server package","From: Fred Gray <fegray@uiuc.edu>To: bryce@albatross.co.nz (Bryce McKinlay)Cc: fegray@uiuc.edu, java-gnats@sourceware.cygnus.comSubject: Re: gcj/232: segmentation violation at except.c:2180Date: Sun, 21 May 2000 21:33:53 -0500 (CDT) > If I compile the jetty package from source code, I get: >  > ./com/mortbay/Base/CodeException > ./com/mortbay/Base/DateCache > ./com/mortbay/Base/Code.java:93: Type `java.applet.Applet' not found in the > declaration of the argument `appl' of method `initParamsFromApplet'. >     public static void initParamsFromApplet(java.applet.Applet appl) >                                             ^ > gcj: Internal compiler error: program jc1 got fatal signal 11  Actually, I modified this part of the source code to strip out the references to java.applet.  I can't find my modified version of the source code right  at the moment (I think that it's on a disk that's currently inaccessible), but you'll notice that a grep for ""applet"" in these class files doesn't show any references.   Really, I am 100% positive that these same class files compiled with 2.95.2.  Here is a much cleaner, simpler test case that fails, taken from Code.java:  // ======================================================================== // Copyright (c) 1997 MortBay Consulting, Sydney // $Id: Code.java,v 2.8 1999/10/09 15:07:24 gregw Exp $ // ========================================================================  public class Code {     /*-------------------------------------------------------------------*/     private static final String __lock=""LOCK"";     private static Code __instance=null;     /*-------------------------------------------------------------------*/      static Code instance()     {            if (__instance==null)         {             synchronized(__lock)             {                 if (__instance==null)                     new Code();             }         }         return __instance;     } };  nplvx1> gcj -c Code.java gcj: Internal compiler error: program jc1 got fatal signal 11  -- Fred",RESOLVED          FIXED      
1203,Alexandre Petit-Bianco,Problem parsing comments,State-Changed-From-To: open->feedbackState-Changed-Why: I think I have a patch. See the attached patch file.,RESOLVED          FIXED      
1204,Alexandre Petit-Bianco,Definite assignment problem,"From: Anthony Green <green@cygnus.com>To: bryce@albatross.co.nzCc: java-gnats@sourceware.cygnus.com, apbianco@cygnus.comSubject: gcj/148: Definite assignment problemDate: Wed, 16 Feb 2000 09:48:02 -0800 Hi Bryce -  > I narrowed the cause of this down to Anthony's Class Initialization > Optimization patch. Removing the patch makes the problem go away.  Are you saying the toolchain you found the problem in was 20000215+my patch?  I don't think I committed it (although I was so tired at the end, maybe I did by mistake?)  Thanks,  AG  --  Anthony Green                                                        Red Hat                                                        Sunnyvale, California",RESOLVED          FIXED      
1213,Alexandre Petit-Bianco,gcj should check for incorrect CLASSPATH,"State-Changed-From-To: open->feedbackState-Changed-Why: I have a patch, which rather relies on gcj setting a special    attribute ""gnu.gcj.gcj-compiled"" in Object.class and then    checking for it when java.lang.Object is read.         The check isn't done if gcj is used to generate classfiles,    unless the flag `-fforce-classes-archive-check' is used.",RESOLVED          FIXED      
1215,Alexandre Petit-Bianco,Internal error: segfault on import-classname clash,"State-Changed-From-To: open->closedState-Changed-Why: The problem is fixed, and a patch is available. See    http://egcs.cygnus.com/ml/gcc-patches/1999-08/msg00550.html",RESOLVED          FIXED      
1220,Alexandre Petit-Bianco,Inner class expansion order needs to be fixed.,State-Changed-From-To: open->feedbackState-Changed-Why: There is a patch.,RESOLVED          FIXED      
1221,Alexandre Petit-Bianco,Internal error: segfault on invalid cast,State-Changed-From-To: open->suspendedState-Changed-Why: Waiting for the source code to be sent.,RESOLVED          FIXED      
1223,Alexandre Petit-Bianco,gcj crashes on inner classes/interfaces definition/usage.,State-Changed-From-To: open->feedbackState-Changed-Why: There is an attached patch.,RESOLVED          FIXED      
1224,Alexandre Petit-Bianco,gcj crashes on inner classes/interfaces definitions/usage.,State-Changed-From-To: open->closedState-Changed-Why: The already checked in patch fixes the problem (and the    compiler exhibits the right behavior:)          http://gcc.gnu.org/ml/gcc-patches/2000-04/msg01001.html,RESOLVED          FIXED      
1233,Alexandre Petit-Bianco,gcj crashes when trying to compile this code!,"From: Mo DeJong <mdejong@cygnus.com>To: java-gnats@sourceware.cygnus.com, apbianco@cygnus.comCc:  Subject: Re: gcj/198: gcj crashes when trying to compile this code!Date: Sun, 9 Apr 2000 05:50:37 -0700 (PDT) I was able to trim the gcj crasher described in pr 198 to the following. Could the download like I put up originally be replaced by this? I did not see any way to change anything in gnats once it was submitted.   // File Regexp.java  import java.util.*; import java.io.*;  public class Regexp {     public interface Filter     { 	public boolean filter(Object rs, StringBuffer sb);     }      private static class SubspecFilter implements Filter     { 	public boolean 	filter(Object rs, StringBuffer sb) 	{ 	    return true; 	}     }      static class Compiler {}      static class Match { 	// Whats odd is that the core dump changes location 	// if you coment out the following method! 	void regtry(int off) {}     } }     The GDB info is the same.  (gdb) bt #0  lookup_do (searched_class=0x8272ba8, searched_interface=0x82919b4,      method_name=0x8291be4, signature=0x8291d04,      signature_builder=0x8079fac <build_java_argument_signature>)     at ../../../egcs/gcc/java/typeck.c:784 #1  0x807a448 in lookup_argument_method2 (searched_class=0x82919b4,      method_name=0x8291be4, method_signature=0x8291d04)     at ../../../egcs/gcc/java/typeck.c:733 #2  0x805b578 in java_check_regular_methods (class_decl=0x8291a70) at ./parse.y:5927 #3  0x805d870 in java_layout_classes () at ./parse.y:7159 #4  0x805f65d in java_expand_classes () at ./parse.y:8245 #5  0x807fdc2 in yyparse () at ../../../egcs/gcc/java/jcf-parse.c:897 #6  0x8089312 in compile_file (name=0xbffff8f4 ""Regexp.java"")     at ../../egcs/gcc/toplev.c:2391 #7  0x808c254 in main (argc=2, argv=0xbffff794) at ../../egcs/gcc/toplev.c:4667  (gdb) list 779 780           for (i = interface_len; i > 0; i--) 781            { 782              tree child =  783                TREE_VEC_ELT (TYPE_BINFO_BASETYPES (searched_interface), i); 784              tree iclass = BINFO_TYPE (child); 785 786              /* If the superinterface hasn't been loaded yet, do so now.  */ 787              if (CLASS_FROM_SOURCE_P (iclass)) 788                safe_layout_class (iclass);  (gdb) print child $1 = (union tree_node *) 0x0    Mo Dejong Red Hat Inc.",RESOLVED          FIXED      
1234,Alexandre Petit-Bianco,Internal compiler error building Input_UTF8.java,"State-Changed-From-To: open->closedState-Changed-Why: Fixed in the current cvs compiler, thanks to this patch:    http://gcc.gnu.org/ml/gcc-patches/2000-04/msg00338.html",RESOLVED          FIXED      
1239,Alexandre Petit-Bianco,Internal compiler failure in find_basic_blocks_1,"State-Changed-From-To: open->analyzedState-Changed-Why: This seems to be a transient bug, most likely with the    gcc middle and/or back end. I can't reproduce it with a    `jc1' built of the current CVS tree. Can you confirm this?",RESOLVED          FIXED      
1241,Alexandre Petit-Bianco,Internal Compiler Error. Can't build libgcj,"From: Bryce McKinlay <bryce@albatross.co.nz>To: torsten.rueger@firsthop.comCc: java-gnats@sourceware.cygnus.comSubject: Re: gcj/210: Internal Compiler Error. Can't build libgcjDate: Tue, 18 Apr 2000 23:33:58 +1200 torsten.rueger@firsthop.com wrote:  > RedHat 6.1 on PC > >Description: > gcj -fassume-compiled -g -L/var/tmp/build/i686-pc-linux-gnu/libjava -ffloat-store -c  -fPIC ../../../libgcj/libjava/gnu/gcj/convert/Input_UTF8.java -o gnu/gcj/convert/.libs/Input_UTF8.lo > ../../../libgcj/libjava/gnu/gcj/convert/Input_UTF8.java: In class `gnu.gcj.convert.Input_UTF8': > ../../../libgcj/libjava/gnu/gcj/convert/Input_UTF8.java: In method `read(char[],int,int)': > ../../../libgcj/libjava/gnu/gcj/convert/Input_UTF8.java:112: Unrecognizable insn: > (insn 135 133 136 (set (reg:SI 51) >         (UnKnown Unknown)) -1 (nil) >     (nil)) > ../../../libgcj/libjava/gnu/gcj/convert/Input_UTF8.java:112: Internal compiler error in `extract_insn', at recog.c:2044 > Please submit a full bug report.  Hi Torsten,  This is a known bug that was fixed recently (about 5 days ago) in the compiler. I have just checked out and built the latest libgcj and gcc from cvs and I do not see this bug anymore. (There is currently a problem with java.sql.Date but this goes away on the second time you type 'make').  Please check that you are using the latest compiler, and try again. If you still have problems, I suggest trying my patch for gcc-2.95.2 which will allow you to use it with the latest libgcj. see http://waitaki.otago.ac.nz/~bryce/gcj  regards    [ bryce ]",RESOLVED          FIXED      
1251,Alexandre Petit-Bianco,libgcj build fails when -O2 is used,State-Changed-From-To: open->closedState-Changed-Why: This problem is fixed by the following patch:    http://gcc.gnu.org/ml/gcc-patches/2000-05/msg01303.html        Which has been checked into cvs.,RESOLVED          FIXED      
1252,Alexandre Petit-Bianco,methods inheirited from base class are not resolved to interface,"From: Tom Tromey <tromey@cygnus.com>To: fegray@uiuc.eduCc: java-gnats@sourceware.cygnus.comSubject: Re: gcj/234: methods inheirited from base class are not resolved to interfaceDate: Sun, 21 May 2000 22:10:44 -0700 (PDT) I'm checking this test case in.  I've also written a compiler patch. If Alex ok's it, I'll tell you.  Tom",RESOLVED          FIXED      
1258,Alexandre Petit-Bianco,internal compiler error in libgcj/libjava/jni.cc,"From: Tom Tromey <tromey@cygnus.com>To: warnes@biostat.washington.eduCc: java-gnats@sourceware.cygnus.comSubject: Re: gcj/240: internal compiler error in libgcj/libjava/jni.ccDate: Tue, 23 May 2000 09:13:33 -0700 (PDT) Greg> ../../../libgcj/libjava/jni.cc: In function `void Greg> *_Jv_JNI_GetPrimitiveArrayCritical (JNIEnv *, __JArray *, jboolean *)': Greg> ../../../libgcj/libjava/jni.cc:1412: Internal compiler error in Greg> `verify_local_live_at_start', at flow.c:2671 Greg> Please submit a full bug report. Greg> See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.  Hi Greg.  This is almost certainly a bug in the C++ compiler. Could you submit a bug report to the compiler developers, like the error message says?  Thanks. Tom",RESOLVED          FIXED      
1266,Alexandre Petit-Bianco,Several bugs in optimization,"* If libgcj.a is built with optimization, gij and jv-convert won't link:   Affected files:    java/lang/Class.java     -> if -O3 or higher is used, hackTrampoline and checkMemberAccess are no        longer present in the object file.     Probable cause: -O3 turns on -finline-functions, and the Java compiler      treats incorrectly inlines them.    java/util/GregorianCalendar.java    java/util/TimeZone.java    java/util/zip/ZipEntry.java     -> These miss LJv0, LJv1, ... entries if optimizing; -O0 is required.   <This bug has also been submitted to the gcc-bugs list>Release:gcj 2.95.2Environment:i386-pc-msdosdjgppHow-To-Repeat:Try to build the affected files with optimization.",RESOLVED          FIXED      
1269,Alexandre Petit-Bianco,getClass() freezes program,"From: Tom Tromey <tromey@cygnus.com>To: Bryce McKinlay <bryce@albatross.co.nz>Cc: apbianco@cygnus.com, java-gnats@sourceware.cygnus.comSubject: Re: gcj/250: getClass() freezes programDate: Mon, 29 May 2000 20:06:08 -0700 (PDT) Bryce>  Thanks for your bug report. This is, unfortunatly, a known Bryce>  problem with the java.lang.Class vtable - calling several Bryce>  methods on instances of java.lang.Class from java code will Bryce>  result in crashing. It has been reported that static linking Bryce>  will work around this problem.  We believe this is an ld.so bug. I think we'll know soon.  Tom",RESOLVED          FIXED      
1271,Alexandre Petit-Bianco,Initialized arrays of double produce incorrect data,"From: Bryce McKinlay <bryce@albatross.co.nz>To: jsturm@sigma6.comCc: java-gnats@sourceware.cygnus.comSubject: Re: gcj/252: Initialized arrays of double produce incorrect dataDate: Tue, 06 Jun 2000 13:45:30 +1200 jsturm@sigma6.com wrote:  > >Synopsis:       Initialized arrays of double produce incorrect data  The same occurs for an array of longs, btw. Is it possible that this is also related to PR 160, which is corruption of array data when doing a System.arraycopy() on arrays of longs or doubles?  regards    [ bryce ]",RESOLVED          FIXED      
1278,Alexandre Petit-Bianco,segmentation fault,"From: Alexandre Petit-Bianco <apbianco@cygnus.com>To: frank.braun@rz.uni-regensburg.deCc: java-gnats@sourceware.cygnus.comSubject: Re: gcj/259: segmentation faultDate: Wed, 14 Jun 2000 07:11:56 -0700 (PDT) frank.braun@rz.uni-regensburg.de writes:  > but after starting these programs are crashing with segmentation > fault error.  Have you considered 5.1?  ./A",RESOLVED          FIXED      
1279,Alexandre Petit-Bianco,gcj produces wrong stack size in byte compiled classes,"State-Changed-From-To: open->feedbackState-Changed-Why: Can you try this patch and see how it works for you? I'm    having troubles building egcs/libgcj after the major update    I did recently.        Thu Sep  9 12:19:53 1999  Alexandre Petit-Bianco  <apbianco@cygnus.com>        	* jcf-write.c (generate_classfile): Fixed max_locals.        Index: jcf-write.c    ===================================================================    RCS file: /cvs/egcs/egcs/gcc/java/jcf-write.c,v    retrieving revision 1.34    diff -u -p -r1.34 jcf-write.c    --- jcf-write.c 1999/08/28 05:33:02     1.34    +++ jcf-write.c 1999/09/09 21:15:09    @@ -2875,7 +2875,7 @@ generate_classfile (clas, state)                }              PUT4 (i); /* attribute_length */              PUT2 (state->code_SP_max);  /* max_stack */    -         PUT2 (localvar_max);  /* max_locals */    +         PUT2 (localvar_max == 1 ? 1 : locavar_max - 1);  /* max_locals */              PUT4 (state->code_length);                   /* Emit the exception table. */",RESOLVED          FIXED      
1283,Alexandre Petit-Bianco,jc1 fatal signal when compiling jikes-compiled class,"Compiling the code below with jikes, thenwith gcj -c, gives the following error:Test1.java: In class `Test1':Test1.java: In method `foo()':Test1.java:5: warning: Unreachable bytecode from 14 to before 19.gcj: Internal compiler error: program jc1 got fatal signal 11Release:gcj 2.96 20000612Environment:Debian GNU/Linux potatoHow-To-Repeat:public class Test1 {	public void foo() {		synchronized(this) {			int dummy = 0;		}	}}",RESOLVED          FIXED      
1285,Alexandre Petit-Bianco,get error when compiling libgcj/libjava/java/io/Reader.java,"From: Alexandre Petit-Bianco <apbianco@cygnus.com>To: a1tv86@yahoo.comCc: java-gnats@sourceware.cygnus.comSubject: Re: gcj/265: get error when compiling libgcj/libjava/java/io/Reader.javaDate: Tue, 20 Jun 2000 18:59:30 -0700 (PDT) a1tv86@yahoo.com writes:  > /export/home/cecilia/source/libgcj-snapshot-2000-06-20/libjava/java/io/Reader.java:44: Tree check: expected class 'e', have 'c' (integer_cst)  Yes. I'm working on a fix:    http://sourceware.cygnus.com/ml/java-discuss/2000-06/msg00048.html  ./A",RESOLVED          FIXED      
1292,Alexandre Petit-Bianco,.java files are not compiled on demand (alt. unclear error),"From: Alexandre Petit-Bianco <apbianco@cygnus.com>To: osk@hem.passagen.seCc: java-gnats@sourceware.cygnus.comSubject: Re: gcj/271: .java files are not compiled on demand (alt. unclear error)Date: Sat, 1 Jul 2000 21:13:04 -0700 (PDT) osk@hem.passagen.se writes:  > This is caused by the fact that no UncompiledSub.class/.o > is available. I think that the error message printed should > indicate that the ""unexpected type"" is actually > UncompiledSub.  A bug in the handling of the `instanceof' bytecode. Here's a patch.  ./A  2000-07-01  Alexandre Petit-Bianco  <apbianco@cygnus.com>  	* expr.c (build_instanceof): Layout type after it's loaded.  Index: expr.c =================================================================== RCS file: /cvs/gcc/egcs/gcc/java/expr.c,v retrieving revision 1.79 diff -u -p -r1.79 expr.c --- expr.c      2000/06/29 21:11:13     1.79 +++ expr.c      2000/07/02 04:06:33 @@ -1073,6 +1073,7 @@ build_instanceof (value, type)    if (CLASS_P (type) && ! CLASS_LOADED_P (type))      {        load_class (type, 1); +      safe_layout_class (type);        if (! TYPE_SIZE (type) || TREE_CODE (TYPE_SIZE (type)) == ERROR_MARK)         return error_mark_node;      }",RESOLVED          FIXED      
1293,Alexandre Petit-Bianco,gcj -c breaks class initialization,"From: Alexandre Petit-Bianco <apbianco@cygnus.com>To: osk@hem.passagen.seCc: java-gnats@sourceware.cygnus.comSubject: Re: gcj/272: gcj -c breaks class initializationDate: Sat, 1 Jul 2000 22:18:45 -0700 (PDT) osk@hem.passagen.se writes:  > Test.java: In method `<clinit>()': > Test.java:0: verification error at PC=0 > Test.java:0: PC not at instruction start  This is a regression because of a modification made to fix a problem unraveled by ENABLE_TREE_CHECKING:    http://gcc.gnu.org/ml/gcc-patches/2000-06/msg00737.html  Here's a fix.  ./A  2000-07-01  Alexandre Petit-Bianco  <apbianco@cygnus.com>          * parse.y (maybe_generate_pre_expand_clinit): Don't build a         debugable statement with empty_stmt_node.  Index: parse.y =================================================================== RCS file: /cvs/gcc/egcs/gcc/java/parse.y,v retrieving revision 1.188 diff -u -p -r1.188 parse.y --- parse.y     2000/06/30 02:22:15     1.188 +++ parse.y     2000/07/02 05:06:26 @@ -7461,7 +7461,7 @@ maybe_generate_pre_expand_clinit (class_        /* We build the assignment expression that will initialize the          field to its value. There are strict rules on static          initializers (8.5). FIXME */ -      if (TREE_CODE (stmt) != BLOCK) +      if (TREE_CODE (stmt) != BLOCK && stmt != empty_stmt_node)         stmt = build_debugable_stmt (EXPR_WFL_LINECOL (stmt), stmt);        java_method_add_stmt (mdecl, stmt);      }",RESOLVED          FIXED      
1295,Alexandre Petit-Bianco,"bogus error for inner class ""Class.this.method""","State-Changed-From-To: open->closedState-Changed-Why: This has been fixed in the current cvs.     Compiling your test case, I get:        $ gcj -c Component.java     Component.java: In class `Test$1':    Component.java: In method `paint()':    Component.java:15: Can't use variable `Canvas.this': type `Canvas' isn't an outer type of type `Test$1'.                          int foo2 = Canvas.this.getSize();                                     ^    Component.java:16: Can't use variable `Component.this': type `Component' isn't an outer type of type `Test$1'.                          int foo3 = Component.this.getSize();                                     ^    2 errors        which I believe is the correct error.",RESOLVED          FIXED      
1296,Alexandre Petit-Bianco,wrong output filename for static inner interfaces in interfaces,"From: Alexandre Petit-Bianco <apbianco@cygnus.com>To: osk@hem.passagen.seCc: java-gnats@sourceware.cygnus.comSubject: Re: gcj/275: wrong output filename for static inner interfaces in interfacesDate: Sat, 1 Jul 2000 23:31:38 -0700 (PDT) osk@hem.passagen.se writes:  > Inner static interfaces in interfaces should be compiled into a java > bytecode file named 'Outer$Inner.class', but is compiled into > 'Inner.class'.  Indeed. Here's a patch.  ./A  2000-07-01  Alexandre Petit-Bianco  <apbianco@cygnus.com>          * parse.y (parser_qualified_classname): Removed parameter         `is_static'.         (create_interface): Removed first passed parameter to         parser_qualified_classname.         (create_class): Likewise. Don't install alias on static inners.  Index: parse.y =================================================================== RCS file: /cvs/gcc/egcs/gcc/java/parse.y,v retrieving revision 1.188 diff -u -p -r1.188 parse.y --- parse.y     2000/06/30 02:22:15     1.188 +++ parse.y     2000/07/02 06:21:04 @@ -81,7 +81,7 @@ static tree  find_field PARAMS ((tree, t  static tree lookup_field_wrapper PARAMS ((tree, tree));  static int   duplicate_declaration_error_p PARAMS ((tree, tree, tree));  static void  register_fields PARAMS ((int, tree, tree)); -static tree parser_qualified_classname PARAMS ((int, tree)); +static tree parser_qualified_classname PARAMS ((tree));  static int  parser_check_super PARAMS ((tree, tree, tree));  static int  parser_check_super_interface PARAMS ((tree, tree, tree));  static void check_modifiers_consistency PARAMS ((int)); @@ -3649,7 +3649,7 @@ create_interface (flags, id, super)       tree id, super;  {    tree raw_name = EXPR_WFL_NODE (id); -  tree q_name = parser_qualified_classname (flags & ACC_STATIC, raw_name); +  tree q_name = parser_qualified_classname (raw_name);    tree decl = IDENTIFIER_CLASS_VALUE (q_name);      EXPR_WFL_NODE (id) = q_name; /* Keep source location, even if refined. */ @@ -3784,7 +3784,7 @@ create_class (flags, id, super, interfac    tree class_id, decl;    tree super_decl_type;  -  class_id = parser_qualified_classname (0, raw_name); +  class_id = parser_qualified_classname (raw_name);    decl = IDENTIFIER_CLASS_VALUE (class_id);    EXPR_WFL_NODE (id) = class_id;   @@ -3840,13 +3840,6 @@ create_class (flags, id, super, interfac    CLASS_COMPLETE_P (decl) = 1;    add_superinterfaces (decl, interfaces);   -  /* If the class is a top level inner class, install an alias. */ -  if (INNER_CLASS_DECL_P (decl) && CLASS_STATIC (decl)) -    { -      tree alias = parser_qualified_classname (1, raw_name); -      IDENTIFIER_GLOBAL_VALUE (alias) = decl; -    } -    /* Add the private this$<n> field, Replicate final locals still in       scope as private final fields mangled like val$<local_name>.       This doesn't not occur for top level (static) inner classes. */ @@ -4785,15 +4778,13 @@ unresolved_type_p (wfl, returned)  /* From NAME, build a qualified identifier node using the     qualification from the current package definition. */   -static tree -parser_qualified_classname (is_static, name) -     int is_static; +tree +parser_qualified_classname (name)       tree name;  {    tree nested_class_name;   -  if (!is_static  -      && (nested_class_name = maybe_make_nested_class_name (name))) +  if ((nested_class_name = maybe_make_nested_class_name (name)))      return nested_class_name;      if (ctxp->package)",RESOLVED          FIXED      
1299,Alexandre Petit-Bianco,full hiearchy of interfaces not checked?,"From: Bryce McKinlay <bryce@albatross.co.nz>To: osk@hem.passagen.seCc: java-gnats@sourceware.cygnus.comSubject: Re: gcj/278: full hiearchy of interfaces not checked?Date: Mon, 03 Jul 2000 22:47:35 +1200 This is a multi-part message in MIME format. --------------9BAB4FC556DE4E9507B0F7D1 Content-Type: text/plain; charset=us-ascii Content-Transfer-Encoding: 7bit  osk@hem.passagen.se wrote:  > If BorderLayout only extends LayoutManager and not LayoutManager2, everything > is fine. So it seems that the class hierarchy of interfaces are not checked > in arguments.  This seems to be a case of gcj behaving differently depending on whethere the classes referenced exist as .class files or .java files. When the LayoutManager interfaces exist as class files, interface_of_p will return false (when it should return true), but if they exist as java files it works okay.  Here is a proposed patch.  regards    [ bryce ]    --------------9BAB4FC556DE4E9507B0F7D1 Content-Type: text/plain; charset=us-ascii;  name=""gcj-PR278.patch"" Content-Transfer-Encoding: 7bit Content-Disposition: inline;  filename=""gcj-PR278.patch""  2000-07-03  Bryce McKinlay  <bryce@albatross.co.nz>  	* class.c (interface_of_p): Call load_class on arguments if they're 	not loaded.  Index: class.c =================================================================== RCS file: /cvs/gcc/egcs/gcc/java/class.c,v retrieving revision 1.70 diff -u -r1.70 class.c --- class.c	2000/06/27 04:30:18	1.70 +++ class.c	2000/07/03 10:40:51 @@ -432,6 +432,11 @@    int n, i;    tree basetype_vec;   +  if (! CLASS_LOADED_P (type1)) +    load_class (type1, 1); +  if (! CLASS_LOADED_P (type2)) +    load_class (type2, 1); +    if (!(basetype_vec = TYPE_BINFO_BASETYPES (type2)))      return 0;    n = TREE_VEC_LENGTH (basetype_vec);  --------------9BAB4FC556DE4E9507B0F7D1--",RESOLVED          FIXED      
1302,Alexandre Petit-Bianco,gcj can't compile classes generated with ibm:s compiler jikes,"From: Tom Tromey <tromey@cygnus.com>To: magnus.persson@thephonepages.comCc: java-gnats@sourceware.cygnus.comSubject: Re: gcj/281: gcj can't compile classes generated with ibm:s compiler jikesDate: Thu, 6 Jul 2000 23:13:43 -0700 (PDT) >> taks a large program and compile with jikes, compile classfiles >> with gcj. (sorry for not sending any source)  Could you send us either:  * A standalone class file that fails, or * A stack trace from the compiler?  The more specific the bug report, the better chance it has of being addressed.  Also, you might consider using ""gcj -C"" instead of either jikes or javac.  Tom",RESOLVED          FIXED      
1304,Alexandre Petit-Bianco,GCJ fails to compile inner classes which extend another inner class,"From: Mark Wielaard <mark@klomp.org>To: idstewart@softhome.netCc: java-gnats@sourceware.cygnus.comSubject: Re: gcj/283: GCJ fails to compile inner classes which extend another inner classDate: Fri, 14 Jul 2000 14:11:31 +0200 Hi,  You might want to try the patch attached to gcj/256 <http://sources.redhat.com/cgi-bin/gnatsweb.pl?cmd=view&pr=256&database=java> That solves the problem for me.  Note that in your example you try to extend InnerB from a non static innerclass InnerA which is not legal. Making InnerA a public static class would be a valid example.  Mark",RESOLVED          FIXED      
1309,Alexandre Petit-Bianco,Cannot refer to inner static class,"From: Tom Tromey <tromey@cygnus.com>To: osk@hem.passagen.seCc: java-gnats@sourceware.cygnus.com, ""a. pbianco"" <apbianco@cygnus.com>Subject: Re: gcj/288: Cannot refer to inner static classDate: Wed, 19 Jul 2000 05:20:02 -0700 (PDT) Alex, this is the primary bug I'm seeing with my AWT patch. Tom",RESOLVED          FIXED      
1312,Alexandre Petit-Bianco,can't able access private fields in inner class,State-Changed-From-To: open->closedState-Changed-Why: This has been fixed in the current cvs compiler.,RESOLVED          FIXED      
1317,Alexandre Petit-Bianco,semicolon may follow inner class or interface definitions,State-Changed-From-To: open->feedbackState-Changed-Why: This is all about empty declarations. They are deprecated. I    added a flag to report them if desired. Check the attached    patch.,RESOLVED          FIXED      
1319,Alexandre Petit-Bianco,internal error when compiling static inner class code,State-Changed-From-To: open->feedbackState-Changed-Why: I attached a patch.,RESOLVED          FIXED      
1320,Alexandre Petit-Bianco,inner class $finit$ compilation error,"From: Alexandre Petit-Bianco <apbianco@cygnus.com>To: java-gnats@sourceware.cygnus.comCc:  Subject: Re: gcj/298Date: Thu, 19 Oct 2000 21:03:41 -0700 (PDT) Bryce McKinlay writes:  > I think this one is a variant on PR 285. With the 285 fix applied it > doesn't happen.  Yes. I checked in your patch and I'm closing this PR:    http://gcc.gnu.org/ml/gcc-patches/2000-10/msg00646.html  ./A",RESOLVED          FIXED      
1321,Alexandre Petit-Bianco,wrong error message when trying to access outer field from inner static class,State-Changed-From-To: open->closedState-Changed-Why: Fixed in the current cvs tree:    $ gcj -c LinkedList.java     LinkedList.java: In class `LinkedList$Iter':    LinkedList.java: In method `LinkedList$Iter()':    LinkedList.java:5: Can't make a static reference to nonstatic variable `modCount' in class `LinkedList$Iter'.                          int dumb = modCount;                                     ^    1 error,RESOLVED          FIXED      
1323,Alexandre Petit-Bianco,gcj not reporting unimplemented methods,State-Changed-From-To: open->closedState-Changed-Why: There is a patch available. See    http://egcs.cygnus.com/ml/gcc-patches/1999-08/msg00603.html,RESOLVED          FIXED      
1324,Alexandre Petit-Bianco,wrong field is accessed from inner class,State-Changed-From-To: open->closedState-Changed-Why: This is fixed in current cvs:        $ gcj Super.java -o super --main=Test    $ ./super    Test: modCount=0    foo: modCount=0,RESOLVED          FIXED      
1344,Alexandre Petit-Bianco,builderror libgcj-snapshot-2000-08-15,"From: Tom Tromey <tromey@cygnus.com>To: j_duin@hotmail.comCc: java-gnats@sourceware.cygnus.comSubject: Re: gcj/319: builderror libgcj-snapshot-2000-08-15Date: 16 Aug 2000 16:26:21 -0600 >>>>> ""joop"" == j duin <j_duin@hotmail.com> writes:  joop> linker error when building libgcj  joop> /usr/src/libgcj-snapshot-2000-08-15/libjava/java/lang/natClass.cc(.data+0x4): multiple definition of `java::lang::Class virtual table' joop> java/lang/Class.lo:/usr/src/libgcj-snapshot-2000-08-15/libjava/java/lang/Class.java:124: first defined here joop> java/lang/natObject.lo: In function `java::lang::Object::getClass(void)': joop> /usr/src/libgcj-snapshot-2000-08-15/libjava/java/lang/natObject.cc:52: multiple definition of `java::lang::Object virtual table' joop> java/lang/Object.lo:/usr/src/libgcj-snapshot-2000-08-15/libjava/java/lang/Object.java:50: first defined here   We've seen this before. By some chance did gcjh generate a `Class.h' and an `Object.h' in your build directory?  If so then that is the problem.  Did you configure in the source tree?  (You shouldn't be able to do that.)  What version of `make' are you using?  Tom",RESOLVED          FIXED      
1345,Alexandre Petit-Bianco,A boolean expression containing two qualified expressions makes jc1 die.,"State-Changed-From-To: open->feedbackState-Changed-Why: Can you try the following patch?        Index: parse.y    ===================================================================    RCS file: /cvs/egcs/egcs/gcc/java/parse.y,v    retrieving revision 1.104    diff -u -p -r1.104 parse.y    --- parse.y     1999/08/22 18:38:07     1.104    +++ parse.y     1999/08/24 02:43:35    @@ -7854,9 +7863,14 @@ qualify_ambiguous_name (id)            qual = TREE_CHAIN (qual);            qual_wfl = QUAL_WFL (qual);            again = 1;    +      }    +    +    name = EXPR_WFL_NODE (qual_wfl);    +    if (!name)    +      {    +       qual = EXPR_WFL_QUALIFICATION (qual_wfl);    +       again = 1;           }    -    else     -      name = EXPR_WFL_NODE (qual_wfl);                  /* If we have a THIS (from a primary), we set the context accordingly */         if (name == this_identifier_node)",RESOLVED          FIXED      
1346,Alexandre Petit-Bianco,resolving name when there are multiple choices,"From: Alexandre Petit-Bianco <apbianco@cygnus.com>To: magnus.persson@thephonepages.comCc: java-gnats@sourceware.cygnus.comSubject: Re: gcj/320: resolving name when there are multiple choicesDate: Wed, 16 Aug 2000 12:27:37 -0700 (PDT) magnus.persson@thephonepages.com writes:  > try to make an instance of a TreeSet-object with sun:s > collection-classes. (collections.jar) for use with jdk1.1 >  > stock/Stock.java: In class `stock.Stock': > stock/Stock.java: In method `fixSortOrder()': > stock/Stock.java:519: Can't find method `toArray()' in type `com.sun.java.util.collections.TreeSet'. Candidates are: >   `toArray()' in `com.sun.java.util.collections.Set' >   `toArray()' in `com.sun.java.util.collections.AbstractCollection'. >       Object[] o=quotes.toArray(); >                        ^  [I'm assuming this is using Sun's code, tell me if I'm wrong.]  If this is using Sun's code, we won't look into the bug in order to avoid exposure to their code. But if you think you could write a test case that replicates the bug without using any of Sun's code, I would be more than happy to work on the case.  ./A",RESOLVED          FIXED      
1347,Alexandre Petit-Bianco,Bytecode parser fails on 64-bit systems,"From: Anthony Green <green@cygnus.com>To: ""'java-gnats@sourceware.cygnus.com'""	 <java-gnats@sourceware.cygnus.com>,        ""'apbianco@cygnus.com'""	 <apbianco@cygnus.com>,        ""'jsturm@detroit.appnet.com'""	 <jsturm@detroit.appnet.com>Cc:  Subject: re: gcj/321Date: Wed, 16 Aug 2000 15:59:57 -0700 I noticed the same thing the other day on IA-64.  The test_long.java test  case fails because int32 is actually 64-bits on 64-bit hosts.  http://sources.redhat.com/cgi-bin/gnatsweb.pl?cmd=view%26pr=321%26database   =java",RESOLVED          FIXED      
1349,Alexandre Petit-Bianco,Gcj doesn't check for static final assigned twice.,State-Changed-From-To: open->feedbackState-Changed-Why: See fix for gcj/163.,RESOLVED          FIXED      
1350,Alexandre Petit-Bianco,"Tree check: expected tree_list, have pointer_type","Compiling the program below gives:$ gcj -C test.java test.java: In class `test':test.java: In method `main(java.lang.String[])':test.java:3: Tree check: expected tree_list, have pointer_typetest.java:3: Internal compiler error in find_as_inner_class_do, at ../gcc/java/parse.y:3516Please submit a full bug report.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.Well, it should generate an error like""Attempt to reference field lengths in java.lang.String[]"".Release:unknownEnvironment:egcs 2.96 20000814How-To-Repeat:class test {  public static void main(String[] args) {    int a = args.lengths;  }}",RESOLVED          FIXED      
1357,Alexandre Petit-Bianco,no result execution with W98 and last Cygwin tools,"I just download the last version of cygwin with W98 on a new computer. What a nice set of tools!! Everything seems to work fine.        I attempt to use gcj. My last try is made with:libgcj-2.95.1-win32-0.3.tar.bz2, libgcj.spec and Helloworld.java (Test.java) downloaded from http://www.cs.bris.ac.uk/~jb7216/libgcj/Install and compile :bunzip2 -c libgcj-2.95.1-win32-0.3.tar.bz2 | tar xfv -export LIBRARY_PATH=$LIBRARY_PATH:/usr/local/libexport CLASSPATH=/usr/local/share/libgcj.ziplibgcj file :## This spec file is read by gcj when linking.# It is used to specify the standard libraries we need in order# to link with libgcj.#*lib: -lgcj -lm -lzgcj -lgcgcj -lmingw32  -lgccgcj   -lcrtdll -lwsock32 -luser32 -lkernel32 *libgcc: %{}*jc1:  ## libgcc should really be a shared library.  This is a design flaw# that causes no end of mysterious problems.  If we are using the# GNU linker, force parts of libgcc into the program file rather# than picking bits up from various shared libraries.#%rename startfile startfileorig*startfile: %(startfileorig) -u data_start -lgcjdata -u __rethrow -lgcc  $ cat Test.javapublic class Test {        public static void main(String[] args) {                System.out.println(""Hello world"");        }}gcj -mno-cygwin --main=Test -o Test Test.javaAll seems to be OK .When execute, the result:Windows Box : Abnormal termination program ... TEST a cause une defaillance de page dans (page default ...) le module CYGWIN1.DLL à 0167:610011a3.Registres :EAX=00000000 CS=0167 EIP=610011a3 EFLGS=00010202EBX=00000004 SS=016f ESP=0287fdd0 EBP=0287fdd8ECX=00000001 DS=016f ESI=00000000 FS=4cb7EDX=00000000 ES=016f EDI=00000000 GS=0000Octets à CS : EIP :8b 13 85 d2 75 f7 83 eb 04 39 f3 76 0b 8b 03 83 Etat de la pile : (stack)00850560 8175a250 0287fdf8 61002924 00000000 00000000 7fc0100c 0040101f 00470000 00470004 0287fe08 00401347 8175a250 00850060 0287fe28 004011e1 The program is very big, isnt'it? ls -lotal 3771rwxr-xr-x   1 standard unknown   3839385 Aug 23 17:19 Test.exerw-r--r--   1 standard unknown       210 Aug 23 17:18 Test.javaWithout -mno-cygwin option, nothing is printed after execute.Somebody can help me? Thanks a lotRelease:unknownEnvironment:W98, cygwin and gcj",RESOLVED          FIXED      
1359,Alexandre Petit-Bianco,Hashtable.toString() segmentation fault,"From: Alexandre Petit-Bianco <apbianco@cygnus.com>To: pascal.forget@videotron.caCc: java-gnats@sourceware.cygnus.com, pascalforget@netscape.netSubject: Re: java.util/332: Hashtable.toString() segmentation faultDate: Thu, 24 Aug 2000 19:55:16 -0700 (PDT) pascal.forget@videotron.ca writes:  > The program sent as attachment run fine with the RPM dated July 3, > 2000, but seg faults when I try to do a Hashtable.toString() using > the libgcj and gcc extracted from CVS on August 23.  We already encountered this bug. It looks like a compiler bug, I'm precisely working on it at the moment (as a side effect of reviewing Bryce's patch to gcj/285.)  ./A",RESOLVED          FIXED      
1360,Alexandre Petit-Bianco,"incorrect error message ""Source file for class `dummy' ...""",State-Changed-From-To: open->feedbackState-Changed-Why: Thank you. Here's a patch.,RESOLVED          FIXED      
1375,Alexandre Petit-Bianco,compiler error when compiling from cvs,"From: Alexandre Petit-Bianco <apbianco@cygnus.com>To: magnus.persson@thephonepages.comCc: java-gnats@sourceware.cygnus.com, gcc-bugs@gcc.gnu.orgSubject: Re: gcj/347: compiler error when compiling from cvsDate: Tue, 12 Sep 2000 23:06:02 -0700 (PDT) magnus.persson@thephonepages.com writes:  > >Synopsis:       compiler error when compiling from cvs  > ../../../libgcj/libjava/interpret.cc:253: Internal error #19991113. > ../../../libgcj/libjava/interpret.cc:253: Internal compiler error in  >    copy_body_r, at optimize.c:272 >    Please submit a full bug report. >    See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.  Could be a C++ compiler fluctuation. Maybe we should alert the C++ people about this problem (it's been on for 24 hours. This mail should do it.) Magnus, could you please send the pre-processor output to the gcc-bugs list? I since updated my tree and libtool got on the way, I can't reach the stage you're stuck in.  ./A",RESOLVED          FIXED      
1378,Alexandre Petit-Bianco,Only one result with Helloworld program under cygwin and W98,"From: Jeff Sturm <jeff.sturm@commerceone.com>To: cormier@u-picardie.frCc: java-gnats@sourceware.cygnus.comSubject: Re: gcj/350: Only one result with Helloworld program under cygwin and  W98Date: Tue, 19 Sep 2000 17:21:55 -0400 cormier@u-picardie.fr wrote: > $ cat Hello.java > public class Hello{ >         public static void main(String[] args){ >                 System.out.println(""Hello \n""); >         } > }  System.out is currently broken for Win32.  There is a fairly old patch if you are interested in the details... though it might not help if you are building libgcj today:  http://sources.redhat.com/ml/java-patches/2000-q2/msg00056.html  > $ ./hello > // Nothing is printed !!!!!!!!!!!!!!!!!!!!  That's what I expected.  You can work around it by assigning System.out explicitly before you use it:  try {   System.setOut(new PrintStream(new FileOutputStream(""CONOUT$""))); } catch (Throwable t) {} System.out.println(""Hello!"");  -- Jeff Sturm jeff.sturm@commerceone.com",RESOLVED          FIXED      
1383,Alexandre Petit-Bianco,gcj: command not found (during make),"From: Alexandre Petit-Bianco <apbianco@cygnus.com>To: mech20@home.comCc: java-gnats@sourceware.cygnus.comSubject: Re: gcj/355: gcj: command not found (during make)Date: Tue, 10 Oct 2000 23:25:58 -0700 (PDT) mech20@home.com writes:  > I really don't know what to do from this point, so I'm trying here, > it may just be some misconfiguration on my system, I don't know, but > any help would be great, thanks. =)  Short answer: Gcc and Libgcj are still two separate trees and they need to be built, installed (and eventually pointed at) separately. This should change fairly soon.  Long answer: I think I see what's wrong. You haven't built gcc yet (you have a gcc installed on your system, but it most likely doesn't feature gcj.) So first, get the gcc source tree (you could start by downloading a snapshot: http://gcc.gnu.org/snapshots.html), build and install it (http://gcc.gnu.org/install/index.html), tell your system where gcj should be found (that is where you specified things should be installed during the configuration of gcc, suffixed by bin -- if you specified --prefix=<something> as an argument to `configure' then gcj will be install under <something>/bin after you did a `make install') by adjusting and properly exporting PATH and then you can configure and build libgcj, gcj will be picked up when needed if your PATH is right. As a sanity check, try `which gcj' first before configuring and building libgcj.  ./A",RESOLVED          FIXED      
1387,Alexandre Petit-Bianco,"final executable  file outputs ""Aborted"" and exits","From: Bryce McKinlay <bryce@albatross.co.nz>To: java-gnats@sourceware.cygnus.comCc:  Subject: Re: gcj/359Date: Mon, 23 Oct 2000 12:36:03 +1300 What version of gcj/libgcj are you running?. If you have 2.95, you should consider upgrading to a recent CVS/snapshot version - it is most likely that this problem has been fixed already.  In any case, this is not a useful bug report. Please run your program in gdb and send a stack trace.    [ bryce ]  http://sources.redhat.com/cgi-bin/gnatsweb.pl?cmd=view&pr=359&database=java",RESOLVED          FIXED      
1388,Alexandre Petit-Bianco,Header generation incorrect with duplicate namespace names,"State-Changed-From-To: open->feedbackState-Changed-Why: I checked in a fix for this on the gcc trunk.    Can you try it out?  If so, please do and get back to me.    If not, tell me and I will just close this PR.",RESOLVED          FIXED      
1403,Alexandre Petit-Bianco,interface inner classes are implicitly static,State-Changed-From-To: open->feedbackState-Changed-Why: I submitted a patch for this:    http://gcc.gnu.org/ml/gcc-patches/2000-12/msg00829.html,RESOLVED          FIXED      
1409,Alexandre Petit-Bianco,Failure compiling `WeakHashMap',WeakHashMap doesn't build due to a finit$ problem:  http://sources.redhat.com/ml/java-patches/2000-q4/msg00229.htmlRelease:current cvsEnvironment:x86/LinuxHow-To-Repeat:Enable WeakHashMap.java in a recent libgcj check-out.,RESOLVED          FIXED      
1412,Alexandre Petit-Bianco,gcj miscompiles some loops with -O2,"From: Jeff Sturm <jeff.sturm@appnet.com>To: Bryce McKinlay <bryce@albatross.co.nz>Cc: java-gnats@sourceware.cygnus.comSubject: Re: gcj/381: gcj miscompiles some loops with -O2Date: Mon, 11 Dec 2000 18:26:10 -0500 Bryce McKinlay wrote: > >> Synopsis:       gcj miscompiles some loops with -O2 > Yeah. This has always been a problem, even pre-2.95. Its the reason why > we can't turn on -O2 for compiling libgcj. It happens when you use > ""continue"" in a loop.  I didn't find the existing PR.  Thanks.  It seems to me this is pretty important to get good performance out of libgcj.  In the meantime I'll stick to compiling from bytecode, which seems to work fine.  -- Jeff Sturm jeff.sturm@commerceone.com",RESOLVED          FIXED      
1413,Alexandre Petit-Bianco,Internal compiler error in expand_end_case,"Tds.java:1139: Internal compiler error in expand_end_case, at stmt.c:5265I have to compile other files before I can get error:[pj@ssl freetds_jdbc]$ makegcj -c  -O -d .   Logger.javagcj -c  -O -d .   HexDump.javagcj -c  -O -d .   DriverVersion.javagcj -c  -O -d .   TdsUtil.javagcj -c  -O -d .   TdsException.javagcj -c  -O -d .   TdsConfused.javagcj -c  -O -d .   TdsNotImplemented.javagcj -c  -O -d .   TdsUnknownPacketSubType.javagcj -c  -O -d .   TdsUnknownPacketType.javagcj -c  -O -d .   UniqueId.javagcj -c  -O -d .   TdsAsciiInputStream.javagcj -c  -O -d .   EscapeProcessor.javagcj -c  -O -d .   MSSqlServerEscapeProcessor.javagcj -c  -O -d .   SybaseEscapeProcessor.javagcj -c  -O -d .   Column.javagcj -c  -O -d .   Columns.javagcj -c  -O -d .   ParameterListItem.javagcj -c  -O -d .   SqlMessage.javagcj -c  -O -d .   PacketResult.javagcj -c  -O -d .   PacketMsgResult.javagcj -c  -O -d .   PacketErrorResult.javagcj -c  -O -d .   SQLWarningChain.javagcj -c  -O -d .   EncodingHelper.javagcj -c  -O -d .   TdsDefinitions.javagcj -c  -O -d .   TdsComm.javagcj -c  -O -d .   CancelController.javagcj -c  -O -d .   PacketUnknown.javagcj -c  -O -d .   PacketRetStatResult.javagcj -c  -O -d .   PacketEndTokenResult.javagcj -c  -O -d .   PacketDoneInProcResult.javagcj -c  -O -d .   PacketTabNameResult.javagcj -c  -O -d .   PacketColumnNamesResult.javagcj -c  -O -d .   PacketColumnInfoResult.javagcj -c  -O -d .   PacketColumnOrderResult.javagcj -c  -O -d .   PacketRowResult.javagcj -c  -O -d .   PacketControlResult.javagcj -c  -O -d .   Context.javagcj -c  -O -d .   Tds.javaTds.java: In class `com.internetcds.jdbc.tds.Tds':Tds.java: In method `processEnvChange()':Tds.java:1139: Internal compiler error in expand_end_case, at stmt.c:5265Please submit a full bug report.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.make: *** [com/internetcds/jdbc/tds/Tds.class] Error 1You can get Nov 24 freetds_jdbc.snapshot.tgz fromftp://freetds.internetcds.com/pub/freetds_jdbcdiff -c Makefile Makefile.orig *** Makefile    Mon Dec 11 17:02:49 2000--- Makefile.orig       Mon Dec 11 16:51:40 2000****************** 11,18 ****  # CLASSPATH=.;c:/jdk1.2.2/lib/classes.zip  # CLASSPATH=.:/usr/local/share/java/lib/classes.java  # CLASSPATH=.;c:/jdk1.1.8/lib/classes.zip! # CLASSPATH=/usr/local/jdk1.1.8/lib/classes.zip:.!  CLASSPATH=.    # RUNPATH=%CLASSPATH%;.\freetds_jdbc.jar;.\unittests;.  RUNPATH=$$CLASSPATH:`pwd`/freetds_jdbc.jar:./unittests:.--- 11,18 ----  # CLASSPATH=.;c:/jdk1.2.2/lib/classes.zip  # CLASSPATH=.:/usr/local/share/java/lib/classes.java  # CLASSPATH=.;c:/jdk1.1.8/lib/classes.zip! CLASSPATH=/usr/local/jdk1.1.8/lib/classes.zip:.! # CLASSPATH=.    # RUNPATH=%CLASSPATH%;.\freetds_jdbc.jar;.\unittests;.  RUNPATH=$$CLASSPATH:`pwd`/freetds_jdbc.jar:./unittests:.****************** 20,36 ****      # JAVAC = c:\\jdk1.2.2\\bin\\javac! JAVAC = gcj -c ! JFLAGS += -O -d .! #JFLAGS += -classpath $(CLASSPATH)    # JAVAC=jikes  # JIKESPATH=.;c:\jdk1.1.8\lib\classes.zip  # JFLAGS += +D +E -g -d .    ! #JDBC_VER=1_0!  JDBC_VER=2_0      # JAR = c:\\jdk1.2.2\\bin\\jar--- 20,36 ----      # JAVAC = c:\\jdk1.2.2\\bin\\javac! JAVAC = javac! JFLAGS += -g -d .! JFLAGS += -classpath $(CLASSPATH)    # JAVAC=jikes  # JIKESPATH=.;c:\jdk1.1.8\lib\classes.zip  # JFLAGS += +D +E -g -d .    ! JDBC_VER=1_0! # JDBC_VER=2_0      # JAR = c:\\jdk1.2.2\\bin\\jarPleas ask if you like to get more informationRelease:RH7Environment:Reading specs from /usr/lib/gcc-lib/i386-redhat-linux/2.96/specsReading specs from /usr/lib/gcc-lib/i386-redhat-linux/2.96/libgcj.specrename spec lib to liborigrename spec startfile to startfileoriggcc version 2.96 20000731 (Red Hat Linux 7.0)",RESOLVED          FIXED      
1426,Alexandre Petit-Bianco,Compiler fails to catch constructor problem,From: Tom Tromey <tromey@cygnus.com>To: Java Gnats Server <java-gnats@sourceware.cygnus.com> Cc:  Subject: gcj/48Date: 21 Sep 1999 15:53:52 -0600 Note that PR #50 refers to the java.io side of this problem. The patch that was checked in was reverted due to incorrectness :-(.  Tom,RESOLVED          FIXED      
1434,Alexandre Petit-Bianco,jc1 dies on implicit String conversion,"From: Tom Tromey <tromey@cygnus.com>To: kuipers@cwi.nlCc: java-gnats@sourceware.cygnus.comSubject: Re: gcj/55: jc1 dies on implicit String conversionDate: Wed, 29 Sep 1999 16:09:58 -0700 The current gcj doesn't crash when given this code.  However, the resulting executable doesn't work correctly, either.  It prints nothing when run.  I'm checking the test program in to the libgcj test suite. It is called ""PR55.java"".  Tom",RESOLVED          FIXED      
1435,Alexandre Petit-Bianco,jc1 segfaults on assignment combined with method call or field access,"From: Tom Tromey <tromey@cygnus.com>To: Java Gnats Server <java-gnats@sourceware.cygnus.com>Cc: ashe@qms.comSubject: gcj/56Date: Fri, 1 Oct 1999 17:37:55 -0700 I'm adding the code from this PR to the libjava test suite. T",RESOLVED          FIXED      
1439,Alexandre Petit-Bianco,This is a test PR.,State-Changed-From-To: open->analyzedState-Changed-Why: See who gets this e-mail notification.,RESOLVED          FIXED      
1441,Alexandre Petit-Bianco,Error when attempting to run a gcj-compile program.,"From: Alexandre Petit-Bianco <apbianco@cygnus.com>To: java-gnats@sourceware.cygnus.comCc:  Subject: Re: gcj/61: Error when attempting to run a gcj-compile program.Date: Mon, 4 Oct 1999 13:22:53 -0700 (PDT) mabdelma@uwaterloo.ca writes:  > I can compile java source code to .class files, and then use=20 a > java VM to run these programs.  However, when I create the > executable and try to run them, I get the error:  Have you read the FAQ? Can you please make sure that  	http://sourceware.cygnus.com/java/faq.html#4_1  doesn't apply to you?  ./A",RESOLVED          FIXED      
1444,Alexandre Petit-Bianco,SEGV in jc1 (99-10-04) using optimizations,"State-Changed-From-To: open->analyzedState-Changed-Why: I can't reproduce this failure without GaloisField, Polynomial    and RSCode.  Could you please provide them?  Or maybe    even just try to trim them out of the test code.        Thanks!",RESOLVED          FIXED      
1453,Alexandre Petit-Bianco,Test PR,State-Changed-From-To: open->closedState-Changed-Why: test worked,RESOLVED          FIXED      
1454,Alexandre Petit-Bianco,jc1 dumps core when compiling java/lang/Object.java,"From: Tom Tromey <tromey@cygnus.com>To: Pekka.Nikander@hut.fiCc: java-gnats@sourceware.cygnus.comSubject: Re: gcj/74: jc1 dumps core when compiling java/lang/Object.javaDate: Fri, 22 Oct 1999 11:08:11 -0700 java.lang.Object and java.lang.Class are special and belong to the implementation.  You can't make your own versions of them.  Why are you trying to do this?  I agree the compiler shouldn't crash.  It should print some nice error.  However, I don't think this is very important, either, since people shouldn't do this.  Tom",RESOLVED          FIXED      
1455,Alexandre Petit-Bianco,gcjh barfs on legal java name usage,"From: Tom Tromey <tromey@cygnus.com>To: Java Gnats Server <java-gnats@sourceware.cygnus.com> Cc:  Subject: gcj/75Date: 04 Nov 1999 22:20:24 -0700 Thanks for the report.  This is a known bug.  The problem is that C++ can't have a method and a field with the same name.  For now, the workaround is ""don't do that"".  Later, we'd like to change the C++ compiler so we can have an attribute which will effectively rename one of the fields.  This attribute will also be useful when we want to represent fields with non-ASCII characters in their names (there might be another way to do that already, but I haven't studied UCN's enough to know if they are the right solution for us).  Tom",RESOLVED          FIXED      
1459,Alexandre Petit-Bianco,Problem creating static arrays,"From: Anthony Green <green@cygnus.com>To: tromey@cygnus.comCc: java-gnats@sourceware.cygnus.comSubject: Re: gcj/79Date: Sun, 31 Oct 1999 21:50:58 -0800 (PST) > I'm running a circa-Oct 21 gcc and an up-to-date libgcj.  I'm using new code for everything:  btw, 134479921 = 0x80489eb which sure looks like an address in .text.  Breakpoint 4, GC_generic_malloc (lb=134479921, k=4)     at ../../../libgcj/boehm-gc/malloc.c:118 118         GC_INVOKE_FINALIZERS(); (gdb) where #0  GC_generic_malloc (lb=134479921, k=4)     at ../../../libgcj/boehm-gc/malloc.c:118 #1  0x400e75a9 in _Jv_AllocObj (size=134479921)     at ../../../libgcj/libjava/boehm.cc:313 #2  0x40088d53 in _Jv_NewPrimArray (eltype=0x40194220, count=134479909)     at ../../../libgcj/libjava/prims.cc:372 #3  0x40088e0d in JvNewByteArray (length=134479909)     at ../../../libgcj/libjava/prims.cc:402 #4  0x40088f7d in _Jv_NewArray (type=8, size=134479909)     at ../../../libgcj/libjava/prims.cc:444 #5  0x80489eb in z1._003cclinit_003e () at z1.java:3 #6  0x400d2be8 in java::lang::Class::hackRunInitializers (this=0x8049ca0)     at ../../../libgcj/libjava/java/lang/natClass.cc:381 #7  0x400d02ba in java.lang.Class.hackTrampoline (this=0x8049ca0, what=1,      old_exception=0x0) at ../../../libgcj/libjava/java/lang/Class.java:165 #8  0x400d2d3d in java::lang::Class::initializeClass (this=0x8049ca0)     at ../../../libgcj/libjava/java/lang/natClass.cc:466 #9  0x400d3192 in _Jv_InitClass (klass=0x8049ca0)     at ../../../libgcj/libjava/java/lang/natClass.cc:610 #10 0x8048a33 in z1.main (args=0x8069ff0) at z1.java:5 #11 0x400d474d in java::lang::FirstThread::run (this=0x8061f90)     at ../../../libgcj/libjava/java/lang/natFirstThread.cc:52 #12 0x400a98b5 in java.lang.Thread.run_ (this=0x8061f90)     at ../../../libgcj/libjava/java/lang/Thread.java:119 #13 0x400d8e6e in java::lang::Thread::run__ (obj=0x8061f90)     at ../../../libgcj/libjava/java/lang/natThread.cc:288 #14 0x400e7d8a in really_start (x=0x805cf30)     at ../../../libgcj/libjava/posix-threads.cc:348 #15 0x401c202c in GC_start_routine (arg=0x807cff8)     at ../../../libgcj/boehm-gc/linux_threads.c:517 #16 0x401d8367 in __pthread_manager () from /lib/libpthread.so.0  AG  --  Anthony Green                                               Cygnus Solutions                                                        Sunnyvale, California",RESOLVED          FIXED      
1463,Alexandre Petit-Bianco,code generation for jvm IRETURN fails on boolean/byte/short methods if INT_TYPE_SIZE < 32,State-Changed-From-To: open->feedbackState-Changed-Why: Patch reviewed and altered.,RESOLVED          FIXED      
1464,Alexandre Petit-Bianco,Failure to compile try/finally?,"From: Alexandre Petit-Bianco <apbianco@cygnus.com>To: gback@cs.utah.eduCc: java-gnats@sourceware.cygnus.comSubject: Re: gcj/83: Failure to compile try/finally?Date: Fri, 18 Feb 2000 16:23:37 -0800 (PST) gback@cs.utah.edu writes:  > The following program produces incorrect results when > compiled from the java source. > ... > gcj cannot compile the .class file it generates with -C.  This PR actually exposes two problems. The first one has to do with gcj not enforcing a correct order of evaluation for something like:  	foo (a+b);  With `a' and `b' being of type String or returning something of type String.  `b' is currently evaluated before `a', if `a' modifies `b', its new value won't be used to construct the string. I believe this is fixed with the patch below.  The second problem is a gcj verifier problem. I think we should file a second PR with it.  On thing. I tried to rebuild libgcj with the patch, and I think it exposes an other problem in check_init (I might have a patch for that.) So, before I get a definite answer, I'm not checking anything in.  Here's the patch to fix the order of evaluation problem. I'm filing an other PR for the gcj's generated class to native.  ./A  Fri Feb 18 16:18:04 2000  Alexandre Petit-Bianco  <apbianco@cygnus.com>  	* parse.y (patch_string): Call force_evaluation_order on the  	completed string concatenation tree. 	* expr.c (force_evaluation_order): Call force_evaluation_order on 	function's arguments too.  Index: parse.y =================================================================== RCS file: /cvs/gcc/egcs/gcc/java/parse.y,v retrieving revision 1.135 diff -u -p -r1.135 parse.y --- parse.y	2000/02/15 22:54:21	1.135 +++ parse.y	2000/02/19 00:19:06 @@ -10272,6 +10272,8 @@ patch_string (node)        /* Temporary disable forbid the use of `this'. */        ctxp->explicit_constructor_p = 0;        ret = java_complete_tree (make_qualified_primary (node, invoke, 0)); +      /* String concatenation arguments must be evaluated in order too. */ +      ret = force_evaluation_order (ret);        /* Restore it at its previous value */        ctxp->explicit_constructor_p = saved;        return ret; Index: expr.c =================================================================== RCS file: /cvs/gcc/egcs/gcc/java/expr.c,v retrieving revision 1.59 diff -u -p -r1.59 expr.c --- expr.c	2000/02/18 18:17:37	1.59 +++ expr.c	2000/02/19 00:19:06 @@ -2694,7 +2694,7 @@ force_evaluation_order (node)        for (cmp = NULL_TREE, arg = TREE_OPERAND (node, 1);   	   arg; arg = TREE_CHAIN (arg))  	{ -	  tree saved = save_expr (TREE_VALUE (arg)); +	  tree saved = save_expr (force_evaluation_order (TREE_VALUE (arg)));  	  cmp = (cmp == NULL_TREE ? saved :  		 build (COMPOUND_EXPR, void_type_node, cmp, saved));  	  TREE_VALUE (arg) = saved;",RESOLVED          FIXED      
1473,Alexandre Petit-Bianco,can't byte-compile a file,"State-Changed-From-To: open->analyzedState-Changed-Why: The patch that I submitted for the PR #55 fixes this     problem, I just verified it:         Thu Nov  4 16:27:01 1999  Alexandre Petit-Bianco  <apbianco@cygnus.com>                 * parse.y (resolve_qualified_expression_name): Handle PLUS_EXPR.            (qualify_ambiguous_name): Likewise.                 Index: parse.y     ===================================================================     RCS file: /cvs/gcc/egcs/gcc/java/parse.y,v     retrieving revision 1.117     diff -u -p -r1.117 parse.y     --- parse.y    1999/11/02 07:51:19     1.117     +++ parse.y    1999/11/04 22:34:53     @@ -6714,6 +6714,15 @@ resolve_qualified_expression_name (wfl,               type = QUAL_DECL_TYPE (decl);              continue;           +      case PLUS_EXPR:     +        if ((decl = java_complete_tree (qual_wfl)) == error_mark_node)     +          return 1;     +        if ((type = patch_string (decl)))     +          decl = type;     +        *where_found = QUAL_RESOLUTION (q) = decl;     +        *type_found = type = TREE_TYPE (decl);     +        break;     +            default:              /* Fix for -Wall Just go to the next statement. Don't                   continue */     @@ -7885,7 +7894,8 @@ qualify_ambiguous_name (id)                 TREE_CODE (TREE_OPERAND (qual_wfl, 0)) == EXPR_WITH_FILE_LOCATION)            name = EXPR_WFL_NODE (TREE_OPERAND (qual_wfl, 0));           -    else if (code == STRING_CST || code == CONDITIONAL_EXPR)     +    else if (code == STRING_CST || code == CONDITIONAL_EXPR      +           || code == PLUS_EXPR)            {            qual = TREE_CHAIN (qual);            qual_wfl = QUAL_WFL (qual);",RESOLVED          FIXED      
1479,Alexandre Petit-Bianco,Internal compiler error,"From: Alexandre Petit-Bianco <apbianco@cygnus.com>To: joerg.brunsmann@fernuni-hagen.de, java-gnats@sourceware.cygnus.comCc:  Subject: Re: gcj/97: Internal compiler errorDate: Thu, 11 Nov 1999 02:00:26 -0800 (PST) joerg.brunsmann@fernuni-hagen.de writes:  > Access to the length attribute via method call gives:  Oops. How about this patch?  ./A  Thu Nov 11 01:57:14 1999  Alexandre Petit-Bianco  <apbianco@cygnus.com>  	* parse.y (lookup_method_invoke): Use lang_printable_name to build 	the type name during error report.  Index: parse.y =================================================================== RCS file: /cvs/gcc/egcs/gcc/java/parse.y,v retrieving revision 1.118 diff -u -p -r1.118 parse.y --- parse.y     1999/11/09 20:30:57     1.118 +++ parse.y     1999/11/11 09:56:20 @@ -7549,6 +7549,7 @@ lookup_method_invoke (lc, cl, class, nam    tree atl = end_params_node;          /* Arg Type List */    tree method, signature, list, node;    const char *candidates;              /* Used for error report */ +  char *dup;      /* Fix the arguments */    for (node = arg_list; node; node = TREE_CHAIN (node)) @@ -7598,14 +7599,13 @@ lookup_method_invoke (lc, cl, class, nam    method = make_node (FUNCTION_TYPE);    TYPE_ARG_TYPES (method) = atl;    signature = build_java_argument_signature (method); -  parse_error_context (cl, ""Can't find %s `%s(%s)' in class `%s'%s"", +  dup = strdup (lang_printable_name (class, 0)); +  parse_error_context (cl, ""Can't find %s `%s(%s)' in type `%s'%s"",                        (lc ? ""constructor"" : ""method""), -                      (lc ?  -                       IDENTIFIER_POINTER (DECL_NAME (TYPE_NAME (class))) : -                       IDENTIFIER_POINTER (name)), -                      IDENTIFIER_POINTER (signature), -                      IDENTIFIER_POINTER (DECL_NAME (TYPE_NAME (class))), +                      (lc ? dup : IDENTIFIER_POINTER (name)), +                      IDENTIFIER_POINTER (signature), dup,                        (candidates ? candidates : """")); +  free (dup);    return NULL_TREE;  }",RESOLVED          FIXED      
1682,Alexandre Petit-Bianco,internal error during compilation of public final static String members,"A base class (Test1.java) contains: public final static String ID = ""|"";A derived class accesses it as 'ID'.Compilation:GNU Java version 2.97 20001218 (experimental) (i686-pc-linux-gnu) compiled by GNU C version 2.97 20001218 (experimental).Test2.java: In class `Test2':Test2.java: In method `main(java.lang.String[])':Test2.java:8: Internal error: Segmentation fault.Release:2.97 ss-gcc_ss_20001218Environment:Linux 2.2.16-22 #1 Tue Aug 22 16:49:06 EDT 2000 i686 unknownHow-To-Repeat:The complete testcase has been attached.The java files are Test1.java and Test2.java.It's important to first create .class files. If not thenthe error doesnot happen!",RESOLVED          FIXED      
1763,Alexandre Petit-Bianco,bad error report for failed `import',"Consider this one-line .java file:   import java.security.KeyStore;We currently don't implement this class.If I try to compile this file I get:creche. gcj --syntax-only imp.java imp.java:1: Class or interface `java' not found in import.   import java.security.KeyStore;I think the error message should mention `java.security.KeyStore',not just `java'.Release:unknown",RESOLVED          FIXED      
1828,Alexandre Petit-Bianco,error if function arg list erronously followed by a semi-colon,"Given the code below gcj gives an incomprehensable errormessage and a compiler error eg$ gcj -c ~/Test.java /home/paul/Test.java:6: Tree check: expected class 'e', have 'x' (identifier_node)/home/paul/Test.java:6: Internal compiler error in finish_method_declaration, at parse.y:4589Please submit a full bug report, with preprocessed source if appropriate.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.Note the ""extra"" semi-colon after the getString method,this is quite common when cut-n-pasting definitionsfrom interfacespublic class Test {    public Test() {    }    public String getString();    {	return """";    }}Release:unknownEnvironment:linuxHow-To-Repeat:as above",RESOLVED          FIXED      
31264,Andrew Haley,"internal compiler error: in build_int_cst_wide, at tree.c:886","imac20:/tmp/javolution mohanembar$ i686-apple-darwin8-gcj -v -save-temps -c -O2 javolution.jarUsing built-in specs.Reading specs from /datal/gcc/i686-apple-darwin8/bin/../lib/gcc/i686-apple-darwin8/4.3.0/../../../libgcj.specrename spec startfile to startfileorigrename spec lib to liborigTarget: i686-apple-darwin8Configured with: /datal/gcc/gcc/configure --build=i686-apple-darwin8 --target=i686-apple-darwin8 --disable-shared --enable-static --disable-multilib --disable-checking --disable-gconf-peer --disable-plugin --prefix=/datal/gcc/i686-apple-darwin --enable-languages=c,java,objc --with-gmp=/opt/local --with-mpfr=/opt/localThread model: posixgcc version 4.3.0 20070311 (experimental) /datal/gcc/i686-apple-darwin8/bin/../libexec/gcc/i686-apple-darwin8/4.3.0/jc1 javolution.jar -fhash-synchronization -fuse-divide-subroutine -fcheck-references -fuse-boehm-gc -fkeep-inline-functions -fPIC -mmacosx-version-min=10.4 -quiet -dumpbase javolution.jar -mtune=generic -march=nocona -auxbase javolution -O2 -version -fbootclasspath=./:/datal/gcc/i686-apple-darwin8/bin/../lib/gcc/../../share/java/libgcj-4.3.0.jar -faux-classpath javolution.zip -o javolution.sGNU Java version 4.3.0 20070311 (experimental) (i686-apple-darwin8)        compiled by GNU C version 4.3.0 20070311 (experimental).GGC heuristics: --param ggc-min-expand=100 --param ggc-min-heapsize=131072Class path starts here:    javolution.zip/ (zip)    ./ (system)    /datal/gcc/i686-apple-darwin8/bin/../lib/gcc/../../share/java/libgcj-4.3.0.jar/ (system) (zip)javolution/lang/MathLib.java: In class 'javolution.lang.MathLib':javolution/lang/MathLib.java: In method 'javolution.lang.MathLib.toLongPow2(double,int)':javolution/lang/MathLib.java:0: internal compiler error: in build_int_cst_wide, at tree.c:886Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.",RESOLVED          FIXED      
13130,Andrew Haley,GC shouldn't have to scan .data section,"Right now the GC has to scan all the data sections.We should change this so that roots unrelated toclasses must be registered.  This should greatlyimprove GC performance, seehttp://gcc.gnu.org/ml/java/2003-11/msg00207.htmlThis is an incompatible change, we should make it alongwith our other ABI-breaking changes.",RESOLVED          FIXED      
30742,Andrew Haley,ResourceBundle regression,ResourceBundle on svn head has a regression.It doesn't find the correct class loader from the stack.I'll attach a test case.  To see the bug:cd Failgij -cp main.jar F,RESOLVED          FIXED      
28663,Andrew Haley,[4.2/4.3 regression] gcj fails to binary-compile eclipse's javac,"gcj -O2 -fomit-frame-pointer -fweb -frename-registers -fPIC -fjni -shared -Wl,-O2,--as-needed,--enable-new-dtags,-soname,libecj.so.3 -o libecj.so.3 ecj.jarorg/eclipse/jdt/internal/compiler/lookup/Scope.java: In class 'org.eclipse.jdt.internal.compiler.lookup.Scope':org/eclipse/jdt/internal/compiler/lookup/Scope.java: In method 'org.eclipse.jdt.internal.compiler.lookup.Scope.getType(char[])':org/eclipse/jdt/internal/compiler/lookup/Scope.java:2256: error: verification failed at PC=18: incompatible return typeorg/eclipse/jdt/internal/compiler/lookup/Scope.java: In method 'org.eclipse.jdt.internal.compiler.lookup.Scope.getType(char[][],int)':org/eclipse/jdt/internal/compiler/lookup/Scope.java:2296: error: verification failed at PC=77: incompatible return typeorg/eclipse/jdt/internal/compiler/ast/QualifiedTypeReference.java: In class 'org.eclipse.jdt.internal.compiler.ast.QualifiedTypeReference':org/eclipse/jdt/internal/compiler/ast/QualifiedTypeReference.java: In method 'org.eclipse.jdt.internal.compiler.ast.QualifiedTypeReference.getTypeBinding(org.eclipse.jdt.internal.compiler.lookup.Scope)':org/eclipse/jdt/internal/compiler/ast/QualifiedTypeReference.java:59: error: verification failed at PC=34: incompatible return typeWorks as expected in 4.1.1.",RESOLVED          FIXED      
21624,Andrew Haley,java source files cannot be compiled to bcabi [indirect dispatch],"The simplest crash that I found is this:public class AAA{  static final Object cm = new Integer (2);}This is blocking 20155, which could easily be fixed now that libjava is built adirectory at a time.",RESOLVED          FIXED      
18796,Andrew Haley,[4.0/4.1/4.2/4.3 Regression] gcj imports wrong superclass,"gcj -c -o bla.o sancho/view/transfer/AbstractDetailDialog.javasancho/view/transfer/AbstractDetailDialog.java: In class'sancho.view.transfer.AbstractDetailDialog':sancho/view/transfer/AbstractDetailDialog.java: In constructor '(int)':sancho/view/transfer/AbstractDetailDialog.java:11: error: Can't find constructor'org.eclipse.swt.widgets.Dialog(I)' in type 'org.eclipse.swt.widgets.Dialog'.       super(i); gcc version 4.0.0 20041130 (experimental) doesn't work.gcc version 3.3.2 20031022 works fine.It is due to the""import org.eclipse.swt.widgets.*"" in sancho/view/transfer/downloads/DownloadTableTreeView.javaChanging AbstractDetailDialog.java to explicitly import the correct Dialog classfixes it:public abstract class AbstractDetailDialog extendsorg.eclipse.jface.dialogs.Dialog {(will attach small zip file)",RESOLVED          FIXED      
12257,Andrew Haley,Inner classes with same name causes crash.,"/* The following code causes gcj-3.3.1 to segfault. * * Two overloaded methods with the same name, each containing an inner * class with the same name.$ cat /etc/redhat-releaseRaw Hide 20030906$ rpm -q gcc-javagcc-java-3.3.1-3$ gcj --versiongcj (GCC) 3.3.1 20030903 (Red Hat Linux 3.3.1-3)Copyright (C) 2003 Free Software Foundation, Inc.This is free software; see the source for copying conditions.  There is NOwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.$ gcj -C E.javaE.java: In class `S.E':E.java: In method `S.E.C()':E.java:13: internal compiler error: Segmentation faultPlease submit a full bug report,with preprocessed source if appropriate.See <URL:http://bugzilla.redhat.com/bugzilla> for instructions. */package S;class E {    void C ()    {	class I { };	new I();    }    void C (final int J)    { 	class I { };    }}",RESOLVED          FIXED      
27754,Andrew Haley,Stack overflow in gcj,"Compile the attached file withgcj -c -findirect-dispatch parser.class -O2This compiles successfully with gcc 4.1, although it consumes a lot of memory.With 4.2 it fails with a stack overflow.",RESOLVED          FIXED      
19505,Andrew Haley,[4.0 Regression] java bytecode to native ICE in remove_unreachable_regions,"As per final comment in PR18931, I'm opening a new PR.  For additional commentsand a test case, see comments >= 2005-01-05 23:53 in PR18931.Using Jakub's gcc4 RPMs from Fedora rawhide (on Fedora Core 3), I'm getting:gcj4 -O2 -fPIC -fjni -findirect-dispatch -shared -o jsch-0.1.17.so \jsch-0.1.17.jarcom/jcraft/jsch/ChannelSftp.java: In method'com.jcraft.jsch.ChannelSftp.ls(java.lang.String)':com/jcraft/jsch/ChannelSftp.java:0: internal compiler error: inremove_unreachable_regions, at except.c:694This does not happen with no -O flag.gcj4 --version:gcj4 (GCC) 4.0.0 20041228 (Red Hat 4.0.0-0.17)target:  i686-pc-linuxFile:http://dev.eclipse.org/viewcvs/index.cgi/org.eclipse.team.cvs.ssh2/jsch-0.1.17.jarA similar error happens with jsch-0.1.16.jar.",RESOLVED          FIXED      
27756,Andrew Haley,"ICE in update_aliases, at java/decl.c:192","Compile the attached bytecode to see the ICE:opsy. gcj -c -findirect-dispatch ./bin/org/eclipse/jdt/internal/core/NameLookup.classorg/eclipse/jdt/internal/core/NameLookup.java: In class 'org.eclipse.jdt.internal.core.NameLookup':org/eclipse/jdt/internal/core/NameLookup.java: In method 'org.eclipse.jdt.internal.core.NameLookup.seekTypesInBinaryPackage(java.lang.String,org.eclipse.jdt.core.IPackageFragment,boolean,int,org.eclipse.jdt.internal.core.IJavaElementRequestor)':org/eclipse/jdt/internal/core/NameLookup.java:980: internal compiler error: in update_aliases, at java/decl.c:192Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.This happens for me with 4.1 and svn head.The bytecode is a class generated by ecj;the corresponding source code also comes from ecj.",RESOLVED          FIXED      
25265,Andrew Haley,linking BC-compiled classes with incompatible changes,"Imagine the following situation:class T {  void test(){       M.staticMethod(); // a       new M().method(); // b       M.staticField = ""FOO""; // c       new M().field = ""FOO""; // d  }}class M{   static void staticMethod(){}   void method(){}   static String staticField;   String field;}Compile this and then replace the class file of M with the compiled code of this class: class M{}The JDK has no problems loading the T class and when running each the statement *on its own* it would throw a NoSuchMethodError (case a & b) or a NoSuchFieldError (case c & d).GIJ should do the same.",RESOLVED          FIXED      
27352,Andrew Haley,SecurityManager.checkPermission() called unnecessarily,"With the attached testcase, SecurityManager.checkPermission() is called three times when it should only be called once.  In genral, we make far too many invocations of SecurityManager.checkPermission().",RESOLVED          FIXED      
26858,Andrew Haley,NullPointerException not generated for large classes...,"When running on some Linux kernels, the heap is mapped into memory low in the address space.  Dereferencing a null pointer for class with a lot of fields an erroneously access the heap instead of throwing a NullPointerException.",RESOLVED          FIXED      
26138,Andrew Haley,Lots of warnings with gcj .jar -> .so,"When natively-compiling the Eclipse jars, I get lots of warnings similar to this:org/eclipse/swt/internal/SWTEventObject.java:0: warning: '_otable_syms_org_eclipse_swt_internal_SWTEventObject' defined but not usedorg/eclipse/swt/internal/SWTEventObject.java:0: warning: '_itable_syms_org_eclipse_swt_internal_SWTEventObject' defined but not usedI am compiling this jar like this:/usr/bin/gcj -c -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m32 -march=i386 -mtune=pentium4 -fasynchronous-unwind-tables -fPIC -findirect-dispatch -fjni /var/tmp/eclipse-3.1.2-1jpp_4fc-buildroot/usr/lib/gcj/eclipse/org.eclipse.swt.gtk.linux.x86_3.1.1.jar.1.jar -o /var/tmp/eclipse-3.1.2-1jpp_4fc-buildroot/usr/lib/gcj/eclipse/org.eclipse.swt.gtk.linux.x86_3.1.1.jar.1.jar.o$ gcj --versiongcj (GCC) 4.1.0 20060131 (Red Hat 4.1.0-0.20)i386",RESOLVED          FIXED      
25535,Andrew Haley,gcj broken on 64-bit big-endian systems,BC-compiled code doesn't work on a big-endian 64-bit box because of asilly mistake initializing entries in the constant pool.  In all casesthe initializer must appear as the first 32-bit integer of a machineword stored in memory.,RESOLVED          FIXED      
26192,Andrew Haley,ICE while compiling jar or class file (azureus),"public class poo{  Object bar (boolean[] bb)  {    return bb.clone();  }}ecj generates:  1: invokevirtual <Method java.lang.Object.clone ()java.lang.Object>BEA generates (with -source 1.5):  1: invokevirtual <Method [Z.clone ()java.lang.Object>and with -source 1.4:  1: invokevirtual <Method java.lang.Object.clone ()java.lang.Object>gcj can only cope with the Object.clone() form, not the boolean[].clone() form.Fixing gcj to generate boolean[].clone() casues a fault in the runtime library.",RESOLVED          FIXED      
25366,Andrew Haley,ICE in do_resolve_class,"redhat/gcc-4_1-branch GCC as well as trunk ICEs on:/usr/src/gcc/obj3/gcc/jc1 \ org/eclipse/jdt/internal/compiler/problem/AbortCompilationUnit.java -quiet \ -dumpbase AbortCompilationUnit.java -mtune=k8 -auxbase-strip NONE -g1 \ -Wno-deprecated -version -fsyntax-only -femit-class-files -o /dev/null \ -fclasspath=.:usr/share/java/libgcj-4.1.0.jarGNU Java version 4.2.0 20051212 (experimental) (x86_64-unknown-linux-gnu)        compiled by GNU C version 4.0.2 20051125 (Red Hat 4.0.2-8).GGC heuristics: --param ggc-min-expand=30 --param ggc-min-heapsize=4096Class path starts here:    ./    usr/share/java/libgcj-4.1.0.jar/ (zip)    /usr/local/share/java/libgcj-4.2.0.jar/ (system) (zip)./org/eclipse/jdt/internal/compiler/codegen/Label.java:263: internal compiler error: Segmentation faultPlease submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.I'll attach the .java files.",RESOLVED          FIXED      
25429,Andrew Haley,can't see private static final int CREATE = 1,"[cagney@eclipse_1 jdom-1.0]$ gcj4 -C -I src/java src/java/org/jdom/ContentList.javasrc/java/org/jdom/ContentList.java: In class 'C$I':src/java/org/jdom/ContentList.java: In method 'C$I.f()':src/java/org/jdom/ContentList.java:7: error: Constant expression required.               case CONST:               ^src/java/org/jdom/ContentList.java: In class 'C':src/java/org/jdom/ContentList.java: In method '<clinit>()':src/java/org/jdom/ContentList.java:3: error: final field ‘CONST’ may not havebeen initializedsrc/java/org/jdom/ContentList.java:1: confused by earlier errors, bailing outclass C{    private static final int CONST  = 0;    class I {        public void f () {            switch(0) {            case CONST:            }        }    }}",RESOLVED          FIXED      
25016,Andrew Haley,Integer overflow in _Jv_CondWait,"_Jv_CondWait makes no allowances for the possibility of an integeroverflow, and this means we can return too early.This causes very hard to track down bugs.  See https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=161483",RESOLVED          FIXED      
24251,Andrew Haley,[4.0 Regression] BC-compiled interfaces in libgcj can't be called from non-BC code,"Hi!As discussed on the mailing list ( http://gcc.gnu.org/ml/java/2005-10/msg00025.html ), there is a segmentation fault problem using org.w3c.dom.* packages.Verified on debian SID (me, gcj version 4.0.2) and on FC3 (David Daney, CVS head) using the small test program what was wirtten to demonstrate the segfault.Here is the test program:http://khiraly.4242.hu/tmp/saxsux/SaxSux.javahttp://khiraly.4242.hu/tmp/saxsux/config.xmlQuick quide:khiraly@elite:~/saxsux$ javac SaxSux.javakhiraly@elite:~/saxsux$ java SaxSux config.xmlTeszttruekhiraly@elite:~/saxsux$ gcj-4.0 --main=SaxSux SaxSux.javakhiraly@elite:~/saxsux$ ./a.out config.xmlAbortedkhiraly@elite:~/saxsux$gdb output (CVS HEAD):#0  0xb7fe8402 in __kernel_vsyscall ()#1  0x00b887d5 in raise () from /lib/tls/libc.so.6#2  0x00b8a149 in abort () from /lib/tls/libc.so.6#3  0xb74f81c7 in _Jv_Throw (value=0x17b7b0)     at ../../../gcccvsmain/gcc/libjava/exception.cc:111#4  0xb74ec0ea in catch_segv (_dummy=Could not find the frame base for ""catch_segv"".) at ../../../gcccvsmain/gcc/libjava/prims.cc:152#5  <signal handler called>#6  0x0804a508 in org::w3c::dom::Node::class$ ()#7  0x08049340 in SaxSux.getStringElement(java.lang.String) ()#8  0x0804906e in SaxSux.main(java.lang.String[]) ()#9  0xb75189d3 in gnu::java::lang::MainThread::call_main (this=0x62f18)     at ../../../gcccvsmain/gcc/libjava/gnu/java/lang/natMainThread.cc:47#10 0xb7559a07 in gnu.java.lang.MainThread.run() (this=0x62f18) at MainThread.java:105#11 0xb75277eb in _Jv_ThreadRun (thread=0x62f18)     at ../../../gcccvsmain/gcc/libjava/java/lang/natThread.cc:299#12 0xb74ed03d in _Jv_RunMain (vm_args=0x0, klass=0x804a2c0, name=0x0, argc=2,     argv=0xbf8e5bd4, is_jar=false) at ../../../gcccvsmain/gcc/libjava/prims.cc:1386#13 0xb74ed1a2 in _Jv_RunMain (klass=0x804a2c0, name=0x0, argc=2, argv=0xbf8e5bd4,     is_jar=false) at ../../../gcccvsmain/gcc/libjava/prims.cc:1397#14 0xb74ed1e7 in JvRunMain (klass=0x804a2c0, argc=2, argv=0xbf8e5bd4)     at ../../../gcccvsmain/gcc/libjava/prims.cc:1403#15 0x08048fc4 in main ()Best regards,  Khiraly",RESOLVED          FIXED      
22460,Andrew Haley,GCJ produces mis-match (non compatible) types in MODIFY_EXPR (from byte-code),compile the following to byte-code and then to native (and use the patch in 22368 to see the ICE):public class t{  t(){}},RESOLVED          FIXED      
23182,Andrew Haley,instanceof sometimes fails if compiled with -findirect-dispatch,"I'm compiling Rhino 1.5R5<ftp://ftp.mozilla.org/pub/mozilla.org/js/rhino1_5R5.zip> with the followingcommand:gcj --main=org.mozilla.javascript.tools.shell.Main -findirect-dispatch js.jar -orhinoThe resulting Rhino JavaScript shell throws exceptions on some String functions:js> ""foo"".charAt(0);js: ""<stdin>"", line 1: Primitive type expected (had java.lang.String instead)The code that throws the exception is in classsrc/org/mozilla/javascript/ScriptRuntime.java, static method toString(Object) atline 522:    public static String toString(Object val) {        for (;;) {            if (val == null)                return ""null"";            if (val instanceof Scriptable) {                val = ((Scriptable) val).getDefaultValue(StringClass);                if (val != Undefined.instance && val instanceof Scriptable) {                    throw errorWithClassName(""msg.primitive.expected"", val);                }                continue;            }            ...The val argument first refers to an instance oforg.mozilla.javascript.NativeString, so instanceof Scriptable rightly evaluatesto true. However, after the assignment val refers to an instance ofjava.lang.String, yet the second instanceof Scriptable still evaluates to true,and the exception is thrown.The String class actually looks ok (i.e. it doesn't contain Scriptable in thearray returned by Class.getInterfaces(), so I guess this might be a caching bugin the implementation of instanceof.This only happens if the code is compiled with -findirect-dispatch. It stillexists in gcj (GCC) 4.0.1 20050701 (prerelease), so chances are it is stillpresent in the final 4.0.1 release.",RESOLVED          FIXED      
21362,Andrew Haley,"ICE in make_edges, at cfgbuild.c:327","Compiling the attached jarfile with optimisation fails with gcj (GCC) 4.0.020050423 (Red Hat 4.0.0-2).$ gcj -findirect-dispatch -shared bork.jar # works$ gcj -findirect-dispatch -shared -O bork.jarorg/apache/catalina/session/FileStore.java: In class'org.apache.catalina.session.FileStore':org/apache/catalina/session/FileStore.java: In method'org.apache.catalina.session.FileStore.save(org.apache.catalina.Session)':org/apache/catalina/session/FileStore.java:0: internal compiler error: inmake_edges, at cfgbuild.c:327",RESOLVED          FIXED      
18812,Andrew Haley,[4.0 Regression] ICE in catalina/common/lib/naming-resources.jar,gcj crashes with a SEGV when compiling this file.All previous gcj releases were fine.,RESOLVED          FIXED      
13743,Andrew Haley,Debug Info for Java breaks inferior calls,"From: Jeff Johnston <jjohnstn at redhat.com>  In doing some more testing with java inferior call, I found a key difference between the java and C++ debug info files that is causing gdb some grief.  We can't make inferior calls to non-static java members as we can't find the vtable.  In C++, the vtable is being represented by a special member called _vptr.class.  In the DW_AT_structure_type for the class, it has a special DW_AT_containing_type tag which points to the class that contains this _vptr member.  In this case, Property has the _vptr entry so it points to itself.  Gdb is specifically looking for this _vptr entry and if it can't find it, gives up trying to resolve a virtual member function.  In java, the DW_AT_containing_type tag is missing from the DW_AT_structure_type and there isn't a _vptr member entry.  I did find a vtable member in java.lang.Object but I don't know if that is the same.  It might be possible just to point the containing_type to the java.lang.Object and then have gdb understand and use the vtable entry.  Any thoughts?  We're kind of in unchartered ground here.  I have included a better C++ example for you to look at with the debug info from readelf -wi.  The member function dothat() in the Property class is comparable from java to C++.",RESOLVED          FIXED      
14381,Andrew Haley,"[3.3/3.4/4.0 Regression] sched2 moving ""may throw"" instructions into epilogue","g++ is compiling------------------------------------------------------------------------typedef struct kkclass;typedef struct kkclass *jclass;struct _Jv_VTable{  jclass clas;};jclassgetClass (void *p){  _Jv_VTable **dt = (_Jv_VTable **) p;  return (*dt)->clas;}------------------------------------------------------------------------into _Z8getClassPv:.LFB2:        pushl   %ebp.LCFI0:        movl    %esp, %ebp.LCFI1:        movl    8(%ebp), %edx        popl    %ebp        movl    (%edx), %eax        movl    (%eax), %eax        ret.LFE2:where, as you can see, the code for the memory access is moved afterthe stack adjustment in the epilogue.This is despite the fact that this code was compiled with-fnon-call-exceptions and -fno-omit-frame-pointer.This causes a runtime failure to catch a null pointer exception.Insns that may trap must not be move into the epilogue, because stackunwinding when throwing exceptions will not work correctly.g++ 3.2.2 does this, which is correct:_Z8getClassPv:.LFB2:        pushl   %ebp.LCFI0:        movl    %esp, %ebp.LCFI1:        movl    8(%ebp), %eax        movl    (%eax), %eax        movl    (%eax), %eax        leave        ret.LFE2:The movement of the popl %ebp instruction seems to be in sched2.Compiler options used were -O3 -fno-omit-frame-pointer -fnon-call-exceptions.",RESOLVED          FIXED      
17586,Andrew Haley,[4.0 regression] kawa build fails with ICE,"cvs trunk gcj fails with ICE while building cvs kawa: gcj -g -I../../.. -I../../../../kawa/gnu/kawa/functions/../../.. -c../../../../kawa/gnu/kawa/functions/AddOp.java../../../../kawa/gnu/kawa/functions/AppendValues.java../../../../kawa/gnu/kawa/functions/Apply.java../../../../kawa/gnu/kawa/functions/Arrays.java../../../../kawa/gnu/kawa/functions/ArrayRef.java../../../../kawa/gnu/kawa/functions/ArraySet.java../../../../kawa/gnu/kawa/functions/BaseUri.java../../../../kawa/gnu/kawa/functions/ConstantFunction0.java../../../../kawa/gnu/kawa/functions/Convert.java../../../../kawa/gnu/kawa/functions/CountValues.java../../../../kawa/gnu/kawa/functions/DisplayFormat.java../../../../kawa/gnu/kawa/functions/DivideOp.java../../../../kawa/gnu/kawa/functions/IntegerFormat.java../../../../kawa/gnu/kawa/functions/IsEq.java../../../../kawa/gnu/kawa/functions/IsEqual.java../../../../kawa/gnu/kawa/functions/IsEqv.java../../../../kawa/gnu/kawa/functions/MakeList.java../../../../kawa/gnu/kawa/functions/MakeProcedure.java ../../.. /../kawa/gnu/kawa/functions/MultiplyOp.java../../../../kawa/gnu/kawa/functions/NumberCompare.java../../../../kawa/gnu/kawa/functions/Setter.java../../../../kawa/gnu/kawa/functions/ValuesMap.java../../../../kawa/gnu/kawa/functions/ObjectFormat.java../../../../kawa/gnu/kawa/functions/LispFormat.java../../../../kawa/gnu/kawa/functions/ParseFormat.java../../../../kawa/gnu/kawa/functions/Format.java  -fPIC -o../../../bin/.libs/gnu-kawa-functions.o../../../../kawa/gnu/kawa/functions/ObjectFormat.java: In class`gnu.kawa.functions.ObjectFormat':../../../../kawa/gnu/kawa/functions/ObjectFormat.java: In method`gnu.kawa.functions.ObjectFormat.print(java.lang.Object,gnu.mapping.OutPort,boolean)':../../../../kawa/gnu/kawa/functions/ObjectFormat.java:75: internal compilererror: in size_binop, at fold-const.c:1617Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.",RESOLVED          FIXED      
17733,Andrew Haley,class read for the second time,I just tried to compile a jar archive to a native library inside the source tree where the jar got built. This resulted in the following error message:  gcj-4.0 -g -c jipsi-gcj.jar de/lohndirekt/print/attribute/DefaultAttribute.java:0: fatal error: reading class de.lohndirekt.print.attribute.DefaultAttribute for the second time from ./de/lohndirekt/print/attribute/DefaultAttribute.class compilation terminated.  My guess is that gcj reads the class once from the jar archive and once directly from the build tree. strace confirms that its at least read from file system. I guess this is wrong.,RESOLVED          FIXED      
18036,Andrew Haley,Bad interaction between interpreter and Class.forName(),"The following code creates a user defined classloader which is then used to loada simple class C from byte code. An instance of this class is created and fromthis instance Class.forName(""C"") is called. This should result in the same classobject from the same (user defined) classloader.It does work when compiled to native code. But it fails when compiled to bytecode and run with gij.With gij 3.4 it works correctly.Current CVS gcj (GCC) 4.0.0 20041016 (experimental) failsExpected output:truetruetrue",RESOLVED          FIXED      
18362,Andrew Haley,"[4.0/4.1 Regression] internal compiler error: in size_binop, at fold-const.c:1598","The pagehttp://java.sun.com/developer/earlyAccess/adding_generics/has a zip file adding_generics-2_4-ea.zip, which containts gjc-rt.jar. Compilingit by1) gcj --main=com.sun.tools.javac.Main gjc-rt.jar2) gcj --main=com.sun.tools.javac.Main com/sun/tools/*/*.classgives the internal compiler error in both cases.",RESOLVED          FIXED      
20522,Andrew Haley,"ICE in update_aliases, at java/decl.c:163","Found while building rhino's js.jar.Grab js.jar from http://spindazzle.org/js.jar (sources from JPackage.org).Try....$ gcj -O1 -shared -o js.jar.so js.jarI get an ICE in update_aliases, at java/decl.c:163",RESOLVED          FIXED      
19285,Andrew Haley,Interfaces not initialized by static field access,"Consider the following test case:public class Test implements RuntimeConstants{  public static void main(String[] args)  {    System.out.println(foo[0]);  }}interface RuntimeConstants {  static int foo[] = {1};    }Older bytecode compilers would implement the access to ""foo"" like so:  3: getstatic <Field RuntimeConstants.foo int[]>However, presumably for reasons of binary compatibility, bytecode produced bysome modern Java compilers (javac 1.5.0 with ""-target"" >= 1.3) does the following:  3: getstatic <Field Test.foo int[]>When ""foo"" is actually in an interface, there is a problem for GCJ because wehave no way to ensure that the interface gets initialized when it is accessed.Initialization of a class does not itself cause initialization of itssuperinterfaces.",RESOLVED          FIXED      
21022,Andrew Haley,[4.0 only] ICE while compiling GdkFontMetrics.class with stabs debugging,"I get the following bus error when I compile libgcj with awt support on darwin:gnu/java/awt/peer/gtk/GdkFontMetrics.java: In class'gnu.java.awt.peer.gtk.GdkFontMetrics':gnu/java/awt/peer/gtk/GdkFontMetrics.java: In constructor '(java.awt.Font)':gnu/java/awt/peer/gtk/GdkFontMetrics.java:0: internal compiler error: Bus errorPlease submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.The backtrace of in gdb of the error looks like this:Program received signal EXC_BAD_ACCESS, Could not access memory.fold_convert (type=0x4160c380, arg=0x0) at/Volumes/src/gcc/gcc-cvs/gcc/gcc/fold-const.c:18851885      tree orig = TREE_TYPE (arg);(gdb) bt#0  fold_convert (type=0x4160c380, arg=0x0) at/Volumes/src/gcc/gcc-cvs/gcc/gcc/fold-const.c:1885#1  0x002636dc in bit_from_pos (offset=0x2636dc, bitpos=0x1f5d18) at/Volumes/src/gcc/gcc-cvs/gcc/gcc/stor-layout.c:538#2  0x002636dc in bit_from_pos (offset=0x2636dc, bitpos=0x1f5d18) at/Volumes/src/gcc/gcc-cvs/gcc/gcc/stor-layout.c:538#3  0x000f0d0c in dbxout_type (type=0x41640c00, full=0) at/Volumes/src/gcc/gcc-cvs/gcc/gcc/dbxout.c:1406#4  0x000f033c in dbxout_type (type=0x41640e00, full=1) at/Volumes/src/gcc/gcc-cvs/gcc/gcc/dbxout.c:2102#5  0x000f2f68 in dbxout_symbol (decl=0x41640f00, local=0) at/Volumes/src/gcc/gcc-cvs/gcc/gcc/dbxout.c:2570#6  0x00144a84 in debug_flush_symbol_queue () at/Volumes/src/gcc/gcc-cvs/gcc/gcc/final.c:3825#7  0x000f3d1c in dbxout_function_decl (decl=0x41643980) at/Volumes/src/gcc/gcc-cvs/gcc/gcc/dbxout.c:3391#8  0x0028af98 in rest_of_compilation () at/Volumes/src/gcc/gcc-cvs/gcc/gcc/passes.c:330#9  0x0005dc7c in execute_pass_list (pass=0x48efd8) at/Volumes/src/gcc/gcc-cvs/gcc/gcc/tree-optimize.c:552#10 0x0005dff4 in tree_rest_of_compilation (fndecl=0x0) at/Volumes/src/gcc/gcc-cvs/gcc/gcc/tree-optimize.c:695#11 0x002b85e0 in cgraph_expand_function (node=0x41657a00) at/Volumes/src/gcc/gcc-cvs/gcc/gcc/cgraphunit.c:931#12 0x002b86d4 in cgraph_assemble_pending_functions () at/Volumes/src/gcc/gcc-cvs/gcc/gcc/cgraphunit.c:364#13 0x002b8e44 in cgraph_finalize_function (decl=0x41643980, nested=0 '\0') at/Volumes/src/gcc/gcc-cvs/gcc/gcc/cgraphunit.c:456#14 0x00031c90 in end_java_method () at/Volumes/src/gcc/gcc-cvs/gcc/gcc/java/decl.c:2025#15 0x0004a8c8 in parse_class_file () at/Volumes/src/gcc/gcc-cvs/gcc/gcc/java/jcf-parse.c:935#16 0x0004d14c in java_parse_file (set_yydebug=1096860544) at/Volumes/src/gcc/gcc-cvs/gcc/gcc/java/jcf-parse.c:1288#17 0x0026a60c in toplev_main (argc=1078961420, argv=0xbffffa40) at/Volumes/src/gcc/gcc-cvs/gcc/gcc/toplev.c:1000#18 0x00002754 in _start (argc=25, argv=0xbffff924, envp=0xbffff98c) at/SourceCache/Csu/Csu-47/crt.c:267#19 0x8fe1a558 in __dyld__dyld_start ()(gdb) I can reproduce this on 4.0.x branch too. Unfortunately the error is not as easyto reproduce for others. It requires that you have a gtk installation withshared libgcc. All in all about half a day or more of compilation work.Anyway.The error appears since Tom Tromey checked in findirect-dispatch compilation forthe awt-peer sources around 2005-04-05.The error does also happen on tiger.Further analysis has showed, if I remove the debug switch -g from thecompilation command, I do not get the bus error.Note, darwin still uses stabs as preferred dbg format. I was not able to build agcc on darwin with dwarf2 as default. Neither was I able to reproduce thefailure on linuxppc -with-stabs.Andrew Pinski noted on IRC that it might be a java fe bug. For me the question is now, how can I continue to debug this error?The sooner or later (29 of April) the libgcj awt issue will come since then thenew darwin release can really run gtk-awt java based apps.",RESOLVED          FIXED      
21115,Andrew Haley,false boolean argument passed from pre-compiled to interpreted method is true,"This is reduced from the eclipse problem I was seeing.Compile the following Test.java with gcj --main=Test Test.javapublic abstract class Test{  public static void main(String[] args) throws Exception  {    Class c = Class.forName(""Invoke"");    Object o = c.newInstance();    Test t = (Test) o;    t.test(""FALSE"", false);    t.test(""TRUE"", true);  }  public abstract boolean test(String s, boolean b);}Compile the Invoke.java class with gcj -C:public class Invoke extends Test{  public boolean test(String s, boolean b)  {    if (b)      System.out.println(s + "": TRUE!"");    else      System.out.println(s + "": FALSE!"");    return b;  }}Then run the expected output is:FALSE: FALSE!TRUE: TRUE!But when running ./a.out you will get:FALSE: TRUE!TRUE: TRUE!Running this completely interpreted (gcj -C Test.java; gij Test) produces thecorrect output. It also works correctly on powerpc-unknown-linux-gnu (eitherpartly pre-compiled or fully interpreted).",RESOLVED          FIXED      
20768,Andrew Haley,[4.0 only] Bytecode -> native code doesn't handle exception properly,"With the test case I will attach, I get different behaviour if I compile itfirst to bytecode *with ecj* and then natively compile it versus interpretingthe bytecode (I have also tried going directly from source to native and that'sthe same behaviour as interpreted).The error does not happen with bytecode generated by gcj -C or Sun's javac.To duplicate (note:  javac == ecj in case 1 and Sun's javac in case 2)1.javac TestExceptionBug.javagcj -fPIC -fjni -findirect-dispatch --main=TestExceptionBug -o TestExceptionBug*.classgcj -fPIC -fjni -findirect-dispatch --main=TestExceptionBug -onativeTestExceptionBug TestExceptionBug.javaecho ""==== interpreted ====""; gij TestExceptionBugecho ""==== native (from source) ====""; ./nativeTestExceptionBugecho ""==== native (from bytecode) ====""; ./TestExceptionBugOutput:==== interpreted ====Finally! It's happened to me -- Ce Ce PennistonHi==== native (from source) ====Finally! It's happened to me -- Ce Ce PennistonHi==== native (from bytecode) ====Finally! It's happened to me -- Ce Ce PennistonException in thread ""main"" TestExceptionBug$IndexedStoreException   at TestExceptionBug.getIndex(java.lang.String) (Unknown Source)   at TestExceptionBug.getIndex() (Unknown Source)   at TestExceptionBug.main(java.lang.String[]) (Unknown Source)   at gnu.java.lang.MainThread.call_main() (/usr/lib/libgcj.so.6.0.0)   at gnu.java.lang.MainThread.run() (/usr/lib/libgcj.so.6.0.0)2.javac TestExceptionBug.javagcj -fPIC -fjni -findirect-dispatch --main=TestExceptionBug -o TestExceptionBug*.classgcj -fPIC -fjni -findirect-dispatch --main=TestExceptionBug -onativeTestExceptionBug TestExceptionBug.javaecho ""==== interpreted ====""; gij TestExceptionBugecho ""==== native (from source) ====""; ./nativeTestExceptionBugecho ""==== native (from bytecode) ====""; ./TestExceptionBugOutput:==== interpreted ====Finally! It's happened to me -- Ce Ce PennistonHi==== native (from source) ====Finally! It's happened to me -- Ce Ce PennistonHi==== native (from bytecode) ====Finally! It's happened to me -- Ce Ce PennistonHi$ gcj --versiongcj (GCC) 4.0.0 20050402 (Red Hat 4.0.0-0.39)$ javac -versionEclipse Java Compiler 0.537, pre-3.1.0 milestone-5, Copyright IBM Corp 2000,2005. All rights reserved.",RESOLVED          FIXED      
18931,Andrew Haley,Java bytecode ICE in except.c remove_unreachable_regions,"When natively compiling Eclipse jars with -O2, I get a compiler error:$ gcj -fnew-verifier -fPIC -fjni -findirect-dispatch -shared -O2 -oeclipse/startup.jar.so eclipse/startup.jarorg/eclipse/core/launcher/Main.java: In class 'org.eclipse.core.launcher.Main':org/eclipse/core/launcher/Main.java: In method'org.eclipse.core.launcher.Main.adjustTrailingSlash(java.net.URL,boolean)':org/eclipse/core/launcher/Main.java:0: internal compiler error: incopy_to_mode_reg, at explow.c:635Compiling without -O2 (exact same other arguments) gives no errors.startup.jar can be found here: http://dev.eclipse.org/viewcvs/index.cgi/~checkout~/org.eclipse.releng.basebuilder/$ gcj --versiongcj (GCC) 4.0.0 20041130 (experimental)",RESOLVED          FIXED      
14070,Andrew Haley,gij and -jar argument should set the manifest Class-path recursively,"I was trying something (to prepare my talk with Dalibor at the FOSDEM;))and the way IBM's JDK (1.4.1) does it is perfect for me!.. But kaffedoes not do it the same way.$ java -jar test1.jargreatgreat$ gij -jar test1.jarException in thread ""main"" java.lang.NoClassDefFoundError: while resolvingclass: test.Test1   at java.lang.ClassLoader.resolveClass0(java.lang.Class)(/usr/lib/libgcj.so.4.0.0)   at java.lang.Class.initializeClass() (/usr/lib/libgcj.so.4.0.0)   at java.lang.Class.forName(java.lang.String, boolean, java.lang.ClassLoader)(/usr/lib/libgcj.so.4.0.0)   at java.lang.Class.forName(java.lang.String) (/usr/lib/libgcj.so.4.0.0)   at gnu.gcj.runtime.FirstThread.run() (/usr/lib/libgcj.so.4.0.0)   at _Jv_ThreadRun(java.lang.Thread) (/usr/lib/libgcj.so.4.0.0)   at _Jv_RunMain(java.lang.Class, byte const, int, byte const, boolean)(/usr/lib/libgcj.so.4.0.0)   at __libc_start_main (/lib/libc-2.3.2.so)Caused by: java.lang.ClassNotFoundException: test2.Test2 not found in[file:test1.jar, core:/]   at java.net.URLClassLoader.findClass(java.lang.String) (/usr/lib/libgcj.so.4.0.0)   at gnu.gcj.runtime.VMClassLoader.findClass(java.lang.String)(/usr/lib/libgcj.so.4.0.0)   at java.lang.ClassLoader.loadClass(java.lang.String, boolean)(/usr/lib/libgcj.so.4.0.0)   at _Jv_FindClass(_Jv_Utf8Const, java.lang.ClassLoader) (/usr/lib/libgcj.so.4.0.0)   at java.lang.Class.forName(java.lang.String, boolean, java.lang.ClassLoader)(/usr/lib/libgcj.so.4.0.0)   at _Jv_BytecodeVerifier.verify_instructions_0() (/usr/lib/libgcj.so.4.0.0)   at _Jv_VerifyMethod(_Jv_InterpMethod) (/usr/lib/libgcj.so.4.0.0)   at _Jv_PrepareClass(java.lang.Class) (/usr/lib/libgcj.so.4.0.0)   at java.lang.ClassLoader.linkClass0(java.lang.Class) (/usr/lib/libgcj.so.4.0.0)   at java.lang.ClassLoader.resolveClass0(java.lang.Class)(/usr/lib/libgcj.so.4.0.0)   ...7 moreWhat was I trying to do?You probably know that you can specify a classpath in a manifestfile. If you run java with -jar theapplication.jar, java will search forMain-Class field to execute the class and also to the Class-Path fieldto 'dynamically' set the classpath.I was wondering if a jar depends of a jar that depends of another, whathappens? With IBM runtime, if the second library has a correctClass-Path field in its manifest file, then, the dependency isresolved. But in kaffe, it's not the case.Would it be possible to change the behavior of kaffe to make it resolvethe classpath with the -jar argument recursively?I hope the explanation was correct...Many thanks for your attention and time, cheers,You can have the files I did use to make the test here:http://www.kaffe.org/pipermail/kaffe/2004-February/045189.html",RESOLVED          FIXED      
19907,Andrew Haley,Incorrect code generated for ManifestElement.java,The bytecode compiler generates incorrect code for the attached .class file.,RESOLVED          FIXED      
18811,Andrew Haley,"[4.0 Regression] rhug build problem, regression?","I just noticed that building rhug from cvs fails with the current gcc from cvs.I'm reporting this here because gcc 3.4.2 seems to build the problematic file sothis might be regression.$ CVS_RSH=ssh cvs -d:pserver:anoncvs@sources.redhat.com:/cvs/rhug -z9 co rhug$ cd rhug$ export LD_LIBRARY_PATH=$INSTALLDIR/gcc/lib$ PATH=$INSTALLDIR/gcc/bin:$PATH ./configure --prefix=$INSTALLDIR/rhug$ PATH=$INSTALLDIR/gcc/bin:$PATH make...gcj --encoding=ISO-8859-1 -Wno-deprecated--classpath=upstream/src:upstream:./upstream/src:./upstream -fassume-compiled -g-O2 -c upstream/junit/tests/runner/AllTests.java -MTupstream/junit/tests/runner/AllTests.lo -MD -MP -MF.deps/upstream/junit/tests/runner/AllTests.TPlo  -fPIC -oupstream/junit/tests/runner/.libs/AllTests.oupstream/junit/tests/runner/AllTests.java:19: error: cannot find file for classjunit.runner.Sorter$Swappermake[1]: *** [upstream/junit/tests/runner/AllTests.lo] Error 1make[1]: Leaving directory `/home/lindi/src-2004-11-27/rhug/junit'make: *** [all-recursive] Error 1Next I managed to reproduce the issue with[lindi@protu rhug]$ cd junit/[lindi@protu junit]$ PATH=$INSTALLDIR/gcc/bin:$PATH gcj --encoding=ISO-8859-1-Wno-deprecated --classpath=upstream/src:upstream:./upstream/src:./upstream-fassume-compiled -g -O2 -c upstream/junit/tests/runner/AllTests.java -MTupstream/junit/tests/runner/AllTests.lo -MD -MP -MF.deps/upstream/junit/tests/runner/AllTests.TPlo  -fPIC -oupstream/junit/tests/runner/.libs/AllTests.o[lindi@protu junit]$ PATH=$INSTALLDIR/gcc/bin:$PATH gcj --versiongcj (GCC) 4.0.0 20041127 (experimental)...and noticed that the an older gcc handles the situation without errors[lindi@protu junit]$ gcj --encoding=ISO-8859-1 -Wno-deprecated--classpath=upstream/src:upstream:./upstream/src:./upstream -fassume-compiled -g-O2 -c upstream/junit/tests/runner/AllTests.java -MTupstream/junit/tests/runner/AllTests.lo -MD -MP -MF.deps/upstream/junit/tests/runner/AllTests.TPlo  -fPIC -oupstream/junit/tests/runner/.libs/AllTests.o[lindi@protu junit]$ gcj --versiongcj (GCC) 3.4.2 20041017 (Red Hat 3.4.2-6.fc3)...Is this regression in gcc, a bug in rhug or something else?",RESOLVED          FIXED      
18697,Andrew Haley,[4.0 Regression] Miscompilation of GtkMenuItemPeer.setParent(MenuItem),"The setParent(MenuItem) method in gnu/java/awt/peer/gtk/GtkMenuItemPeer.javagets miscompiled which makes Menu related tests in the Mauve Visual Test Engineand the AWT demo from GNU Classpath examples crash.Example (from GNU Classpath 0.12 examples):  gij -cp examples.zip gnu.classpath.examples.awt.Demo  AbortedA gdb shows the following (impossible!) backtrace:#0  0x0eee3144 in Java_gnu_java_awt_peer_gtk_GtkMenuPeer_delItem (env=Variable""env"" is not available.)    at/home/mark/src/gcc40/gcc/libjava/jni/gtk-peer/gnu_java_awt_peer_gtk_GtkMenuPeer.c:164#1  0x0eee3140 in Java_gnu_java_awt_peer_gtk_GtkMenuPeer_delItem (env=Variable""env"" is not available.)    at/home/mark/src/gcc40/gcc/libjava/jni/gtk-peer/gnu_java_awt_peer_gtk_GtkMenuPeer.c:164#2  0x0eecddf4 ingnu.java.awt.peer.gtk.GtkMenuItemPeer.setParent(java.awt.MenuItem)(this=Variable ""this"" is not available.)    at/home/mark/src/gcc40/gcc/libjava/gnu/java/awt/peer/gtk/GtkMenuItemPeer.java:78#3  0x0eecdc30 ingnu.java.awt.peer.gtk.GtkMenuItemPeer.GtkMenuItemPeer(java.awt.MenuItem)(this=Variable ""this"" is not available.)    at/home/mark/src/gcc40/gcc/libjava/gnu/java/awt/peer/gtk/GtkMenuItemPeer.java:60#4  0x0eece410 in gnu.java.awt.peer.gtk.GtkMenuPeer.GtkMenuPeer(java.awt.Menu)(this=Variable ""this"" is not available.)    at /home/mark/src/gcc40/gcc/libjava/gnu/java/awt/peer/gtk/GtkMenuPeer.java:58#5  0x0eed3ab8 in gnu.java.awt.peer.gtk.GtkToolkit.createMenu(java.awt.Menu)(this=Variable ""this"" is not available.)    at /home/mark/src/gcc40/gcc/libjava/gnu/java/awt/peer/gtk/GtkToolkit.java:446[...]This has nothing to do with the recent gui-merge patch. It works fine whencompiled with the gui branch compiler and fails in exactly the same why beforeand after the gui-branch-merge-patch in the trunk.It fails in the same way on i686-pc-linux-gnu and powerpc-unknown-linux-gnu(both configured with --enable-java-awt=gtk,xlib)gij (GNU libgcj) version 4.0.0 20041127 (experimental)The following rewrite of the method makes everything work fine.--- gnu/java/awt/peer/gtk/GtkMenuItemPeer.java  2 Sep 2004 05:10:11 -0000    1.5+++ gnu/java/awt/peer/gtk/GtkMenuItemPeer.java  26 Nov 2004 04:47:09 -0000@@ -74,8 +97,10 @@       }     else // parent instanceof Menu       {-       ((GtkMenuPeer)((Menu)parent).getPeer ()).addItem (this,-                                                         item.getShortcut ());+       Menu m = (Menu) parent;+       GtkMenuPeer gmp = (GtkMenuPeer) m.getPeer();+       MenuShortcut ms = item.getShortcut();+       gmp.addItem(this, ms);       }   }See also http://gcc.gnu.org/ml/java-patches/2004-q4/msg00736.html",RESOLVED          FIXED      
13606,Andrew Haley,need extra runtime verification of compiled code,"With the new binary compatibility ABI, it is possible forcompiled code to be loaded into an environment where dependentclasses are different from the classes visible to the compilerat bytecode verification time.This can be used to circumvent type safety in some situations.One potential fix is for the compiler to emit ""verifier assertions""that must be checked at runtime.  For example these could be checkedat class preparation time.It isn't completely clear what assertions will need checking.It might suffice to check extends/implements requirementsimplied by the bytecode (and checked by the verifier).It could also be worthwhile to look at the JSR relating to""split verification"".  I haven't done this yet due to the strangelicense on this JSR.  Beware of this before downloading.",RESOLVED          FIXED      
1478,Andrew Haley,_Jv_PrepareCompiledClass throws exception,"_Jv_PrepareCompiledClass throws an exception.However, it also expects to be called with theclass mutex held.  See Class::initializeClass foran example.  These two things are contradictory.Release:current cvs",RESOLVED          FIXED      
14581,Andrew Haley,[3.3/3.4/4.0 Regression] gcj  internal error: Segmentation fault involving switch to a final var,"Larry Morell (morell@cs.atu.edu)From Bugzilla Helper:User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.2.1)Gecko/20030225Description of problem:Compiling:class BugToken {   public void oops () {       final char eofSym;       switch (7) {          case eofSym    : ;       }   }}yields:javac BugToken.javaBugToken.java: In class `BugToken':BugToken.java: In method `BugToken.oops()':BugToken.java:4: internal error: Segmentation faultPlease submit a full bug report,with preprocessed source if appropriate.See <URL:http://bugzilla.redhat.com/bugzilla/> for instructions.Removing 'final' yields:BugToken.java: In class `BugToken':BugToken.java: In method `BugToken.oops()':BugToken.java:5: Constant expression required.             case eofSym    : ;             ^1 erroras hoped.Version-Release number of selected component (if applicable):gcc-3.2.2-5How reproducible:AlwaysSteps to Reproduce:1. Using javac script supplied with Redhat 9 compile the program:classBugToken {   public void oops () {       assinal char eofSym;       switch (7) {          case eofSym    : ;       }   }}   Actual Results:  javac BugToken.javaBugToken.java: In class `BugToken':BugToken.java: In method `BugToken.oops()':BugToken.java:4: internal error: Segmentation faultPlease submit a full bug report,with preprocessed source if appropriate.See <URL:http://bugzilla.redhat.com/bugzilla/> for instructions.Expected Results:  Should have compiled.",RESOLVED          FIXED      
17007,Andrew Haley,Inconsistent builtin attributes set by Java front end,"The Java front end is not consistent in setting attributes for builtinfunctions.  We rely on TREE_SIDE_EFFECTS and the ECF_* flags to determinewhether a function call will clobber all call-clobbered variables.Applying the following patch to the operand scanner, will trigger several abortsin libjava because of this.  It seems to me that neither TREE_SIDE_EFFECTS norECF_* flags are correct out of the Java front end.I am not familiar enough with the language to determine when it would be safe toset these attributes.  Some seem obvious, but I'd rather leave this to someonein Java land.Index: tree-ssa-operands.c===================================================================RCS file: /cvs/gcc/gcc/gcc/tree-ssa-operands.c,vretrieving revision 2.29diff -d -c -p -r2.29 tree-ssa-operands.c*** tree-ssa-operands.c 12 Aug 2004 14:33:59 -0000      2.29--- tree-ssa-operands.c 12 Aug 2004 16:55:59 -0000*************** get_call_expr_operands (tree stmt, tree*** 1373,1383 ****        /* A 'pure' or a 'const' functions never call clobber anything.         A 'noreturn' function might, but since we don't return anyway         there is no point in recording that.  */!       if (TREE_SIDE_EFFECTS (expr)!         && !(call_flags & (ECF_PURE | ECF_CONST | ECF_NORETURN)))!       add_call_clobber_ops (stmt);        else if (!(call_flags & (ECF_CONST | ECF_NORETURN)))!       add_call_read_ops (stmt);      }  }--- 1373,1397 ----        /* A 'pure' or a 'const' functions never call clobber anything.         A 'noreturn' function might, but since we don't return anyway         there is no point in recording that.  */!       if (!(call_flags & (ECF_PURE | ECF_CONST | ECF_NORETURN)))!       {! #if defined ENABLE_CHECKING!         /* If this is a clobbering call, it should have side-effects.  */!         if (!TREE_SIDE_EFFECTS (expr))!           abort ();! #endif!         add_call_clobber_ops (stmt);!       }        else if (!(call_flags & (ECF_CONST | ECF_NORETURN)))!       {! #if defined ENABLE_CHECKING!         /* If this is not a clobbering call, it should not have!            side-effects.  */!         if (TREE_SIDE_EFFECTS (expr))!           abort ();! #endif!         add_call_read_ops (stmt);!       }      }  }",RESOLVED          FIXED      
15223,Andrew Haley,gcj ICE when compiling pizza-1.1.jar,"GCJ 3.4.0 produces an ICE when trying to compile the pizza compiler version 1.1. HP of the pizza:   http://pizzacompiler.sourceforge.net/Download Mirrors for version 1.1:  http://prdownloads.sourceforge.net/pizzacompiler/pizza-1.1.jar?downloadThe following transript shows how the error manifests: =begin=marco@gontscharow:~/tmp/piz$ /opt/gcc-3.4.0/bin/gcj -vReading specs from /opt/gcc-3.4.0/lib/gcc/i386-slackware-linux/3.4.0/specsReading specs from/opt/gcc-3.4.0/lib/gcc/i386-slackware-linux/3.4.0/../../../libgcj.specrename spec lib to liborigConfigured with: ../source/gcc-3.4.0/configure --prefix=/opt/gcc-3.4.0--enable-shared --enable-threads=posix --enable-__cxa_atexit --disable-checking--with-gnu-ld --verbose --target=i386-slackware-linux --host=i386-slackware-linuxThread model: posixgcc version 3.4.0marco@gontscharow:~/tmp/piz$ /opt/gcc-3.4.0/bin/gcj pizza-1.1.jar -o pizzaC:\pizza\main\src\net\sf\pizzacompiler\compiler\ClassReader.pizza: In class`net.sf.pizzacompiler.compiler.ClassReader$$closures':C:\pizza\main\src\net\sf\pizzacompiler\compiler\ClassReader.pizza: In method`net.sf.pizzacompiler.compiler.ClassReader$$closures.$apply(java.lang.Object)':C:\pizza\main\src\net\sf\pizzacompiler\compiler\ClassReader.pizza:27: internalcompiler error: in size_binop, at fold-const.c:1598Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.=end=",RESOLVED          FIXED      
17689,Andrew Haley,[4.0 Regression] New testsuite failures indicate signal unwinding is broken, ,RESOLVED          FIXED      
16927,Andrew Haley,[4.0 regression] assert statement fails at -O1 and above,"The following class cannot be compiled at optimization levels -O1 and above:public class AssertBug {    public void bug(Integer i) {        assert(i.intValue() == 0):            i.toString() + ""!"";    }}/tmp/AssertBug.java: In class `AssertBug':/tmp/AssertBug.java: In method `AssertBug.bug(java.lang.Integer)':/tmp/AssertBug.java:3: internal compiler error: Segmentation faultPlease submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.The crash occurs at /home/fw/src/gnu/gcc/gcc/java/check-init.c:879:874         case EXPR_WITH_FILE_LOCATION:875           {876             location_t saved_location = input_location;877             tree saved_wfl = wfl;878             tree body = EXPR_WFL_NODE (exp);879             if (IS_EMPTY_STMT (body))880               break;881             wfl = exp;882             input_filename = EXPR_WFL_FILENAME (exp);883             input_line = EXPR_WFL_LINENO (exp);The tree at exp seems to look like this: <expr_with_file_location 0x403e2528 side-effects tree_2 tree_5    arg 1 <identifier_node 0x4037b118 /tmp/AssertBug.java tree_4 tree_5>    arg 2 <tree_list 0x403db5a0        purpose <new_class_expr 0x403e24d8 side-effects            arg 0 <expr_with_file_location 0x4037c258                arg 0 <identifier_node 0x4037c230 gnu.gcj.runtime.StringBuffertree_2>>>        chain <tree_list 0x403db5b8            purpose <call_expr 0x403e2500 side-effects                arg 0 <expr_with_file_location 0x4037c208                    arg 0 <identifier_node 0x4037c1e0 append>>                arg 1 <tree_list 0x403db588                    value <compound_expr 0x40329480 type <pointer_type 0x403313a0>                        side-effects tree_6                        arg 0 <cond_expr 0x403e2460 type <pointer_type 0x4037e0e8>                            side-effects arg 0 <eq_expr 0x40329438> arg 1<call_expr 0x403e2438> arg 2 <save_expr 0x403c88e0>>                        arg 1 <save_expr 0x403c8980 type <pointer_type 0x403313a0>                            side-effects readonly invariant arg 0 <compound_expr0x4032945c>>>>>            chain <tree_list 0x403db5e8                purpose <call_expr 0x403e2550 side-effects arg 0<expr_with_file_location 0x4037c208>                    arg 1 <tree_list 0x403db5d0                        value <nop_expr 0x403c89c0 type <pointer_type 0x403313a0>                            constant invariant arg 0 <array_ref 0x403e1c80>>>>>>>>",RESOLVED          FIXED      
16431,Andrew Haley,[4.0 Regression] Bytecode compiler silently generates incorrect code,"With some oddly formed class files, the bytecode compiler can spuriouslygenerate additional DECLs for local variable slots, and these DECLs haveundefined initial values.  This is a regression caused by the tree-SSA merge.The problem arises when there are two different types put onto the stack atdifferent points in the execution.  This generates two DECLs, one for each type. Later code that refers to that stack item can do so with a type that is acommon superclass of the two types, but we have generated two separate DECLs.The only way properly to fix this is to change the way that stack items aremapped on to DECLs.",RESOLVED          FIXED      
14296,Andrew Haley,[3.4/4.0 Regression] 3.4 regression: Method.Invoke,"gcj 3.4 is broken because of a change to natMethod.cc inhttp://gcc.gnu.org/ml/java-patches/2003-q4/txt00009.txt.  A test caseis attached.It seems like _Jv_isVirtualMethod is wrong, and has always been wrong.Here is the logic in the runtime:// Determine if METH gets an entry in a VTable.static inline jboolean _Jv_isVirtualMethod (_Jv_Method *meth){  using namespace java::lang::reflect;  return (((meth->accflags & (Modifier::STATIC | Modifier::PRIVATE)) == 0)          && meth->name->data[0] != '<');}and here is the corresponding logic in the compiler:     if (super_method != NULL_TREE && ! METHOD_PRIVATE (super_method))	{	  DECL_VINDEX (method_decl) = DECL_VINDEX (super_method);	  if (DECL_VINDEX (method_decl) == NULL_TREE 	      && !CLASS_FROM_SOURCE_P (this_class))	    error (""%Jnon-static method '%D' overrides static method"",                   method_decl, method_decl);	}      else if (! METHOD_FINAL (method_decl)	       && ! METHOD_PRIVATE (method_decl)	       && ! CLASS_FINAL (TYPE_NAME (this_class))	       && dtable_count)	{	  DECL_VINDEX (method_decl) = dtable_count;	  dtable_count = fold (build (PLUS_EXPR, integer_type_node,				      dtable_count, integer_one_node));	}The important thing to note here is that the compiler doesn't allocatea new vtable entry for a method if the whole class is final.  Thisseems reasonable enough, but the runtime doesn't know that and ittries to use the vtable index.  Which is -1.  Bang.",RESOLVED          FIXED      
14231,Andrew Haley,[3.4/4.0 Regression]Incorrect interface method called when compiling against .class files,"$ mipsel-linux-gcj --versionmipsel-linux-gcj (GCC) 3.4.0 20040214 (prerelease)Configured as:../gcccvsw/gcc/configure  --host=i686-pc-linux-gnu --target=mipsel-linux--enable-languages=c,c++,java--with-headers=/home/mipsel-linux/mipsel-linux/include --with-arch=mips32--with-float=soft --prefix=/home/testcvsWith the attached test case method calls via an interface call the wrong methodwhen the code is compiled against class files generated bu Sun's javac program.When the code is compiled against only source file the correct methods are called.Here is the output of my test program:bash-2.04# goodm8(String)m6(int)bash-2.04# badm7(int)m5(void)I suspect that the same problem exists on i686-linux target as well, but I don'thave that built and thus cannot test it.",RESOLVED          FIXED      
14551,Andrew Haley,Switch w sign-extended byte and >16 labels causes error in tree.c,"I found a bug in gcj-3.3. It looks like this from the command line:$ gcj-3.3 -c GcjBug.javaGcjBug.java: In class `GcjBug':GcjBug.java: In method `GcjBug.getPacketTypeName(int)':GcjBug.java:62: internal compiler error: in tree_low_cst, at tree.c:3255Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.I've included a test case as an attachment called GcjBug.java. It is derivedfrom a file in my application that caused this problem, but strips code thatisn't necessary to show the bug.I've done some analyses in the Java source to find out what might trigger thebug in particular, and also discovered a workaround.The bug occurs when there is a switch statement, in which the expression is oftype 'int', and all case labels are constants of type 'byte'.I've found two requirements to trigger the bug:- there must be at least 17 case labels (I had plenty more in the originalsource, but less than 17 labels doesn't trigger the bug)- at least one of the case labels must have a negative value as a byte, such as'(byte) 202'.The workaround is: cast the expression of the switch statement to type byte,i.e. change 'switch (type)' to 'switch ((byte)type)' in the GcjBug.java source code.Hopefully this report is useful enough to fix the bugP.s.GCJ version information:$ gcj-3.3 -vReading specs from /usr/lib/gcc-lib/i486-linux/3.3.3/specsReading specs from /usr/lib/gcc-lib/i486-linux/3.3.3/../../../libgcj.specrename spec lib to liborigConfigured with: ../src/configure -v--enable-languages=c,c++,java,f77,pascal,objc,ada,treelang --prefix=/usr--mandir=/usr/share/man --infodir=/usr/share/info--with-gxx-include-dir=/usr/include/c++/3.3 --enable-shared --with-system-zlib--enable-nls --without-included-gettext --enable-__cxa_atexit--enable-clocale=gnu --enable-debug --enable-java-gc=boehm--enable-java-awt=xlib --enable-objc-gc i486-linuxThread model: posixgcc version 3.3.3 (Debian 20040306)",RESOLVED          FIXED      
12890,Andrew Haley,[3.3 Regression] ICE on compilation of class with throwing method,"to reproduce:(1) put files M.java and E.java in cwd(2) execute gcj M.javaI get:   M.java:0: internal compiler error: Segmentation fault   Please submit a full bug report,   with preprocessed source if appropriate.   See <URL:http://gcc.gnu.org/bugs.html> for instructions.Error show up with GCC 3.3, does not show up with GCC 3.2.2==> M.java START <==import E;public class M {        void fun (M q) throws E        {        }};==> M.java END <====> E.java START <==public class E extends Throwable {}==> E.java END <==",RESOLVED          FIXED      
13273,Andrew Haley,[3.4 regression] gcj generates call to abstract method,"This is a regression from 3.3.First, compile the attached source with jikes.The problem isn't visible if you compile to .class with""gcj -C"", as gcj generates the wrong invokespecial callfor ""super.dispose()"".(I'll also attach a .jar file containing the classes ascompiled with jikes).Then compile FieldEditorPreferencePage.class with ""gcj -c"".gcj generates a call to this method:         U IPreferencePage.dispose()However, this is an interface method, so this call isclearly wrong.gcj 3.3 emits a call to:         U DialogPage.dispose()This is still wrong, but less so -- at least it will work.Really we should emit a call to PreferencePage.dispose().(This is especially true for binary compatibility.)",RESOLVED          FIXED      
4914,Andrew Haley,"Internal compiler error in emit_move_insn, at expr.c:2713","Gcj emits an internal error while compiling the following class.The code is not generated by javac but nicec (a differentlanguage compiling to bytecodes), but AFAIK it is valid.Therefore I cannot provide a java source file.Release:3.0.2 20010922 (Debian prerelease)Environment:Linux 2.4.10-686 #1 Sat Sep 29 19:30:50 EST 2001 i686 unknowHow-To-Repeat:~/tmp/buggcj/rep/buggcj gcj -v package.class                                       [05:39 20/11/01]Reading specs from /usr/lib/gcc-lib/i386-linux/3.0.2/specsReading specs from /usr/lib/gcc-lib/i386-linux/3.0.2/../../../libgcj.specrename spec lib to liborigrename spec startfile to startfileorigConfigured with: ../src/configure -v --enable-languages=c,c++,java,f77,proto,objc --prefix=/usr --infodir=/share/info --mandir=/share/man --enable-shared --with-gnu-as --with-gnu-ld --with-system-zlib --enable-long-long --enable-nls --without-included-gettext --disable-checking --enable-threads=posix --enable-java-gc=boehm --with-cpp-install-dir=bin --enable-objc-gc i386-linuxThread model: posixgcc version 3.0.2 20010922 (Debian prerelease) /usr/lib/gcc-lib/i386-linux/3.0.2/jc1 package.class -fuse-divide-subroutine -fuse-boehm-gc -fnon-call-exceptions -quiet -dumpbase package.class -g1 -version -o /tmp/ccAOi1ch.sGNU Java version 3.0.2 20010922 (Debian prerelease) (i386-linux)        compiled by GNU C version 3.0.2 20010922 (Debian prerelease).buggcj/package.java: In class `buggcj.package':buggcj/package.java: In method `buggcj.package.test_numeric$0()':buggcj/package.java:16: Internal compiler error in emit_move_insn, at expr.c:2713Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.",RESOLVED          FIXED      
11045,Andrew Haley,int cast bug,"Using gcc3.3 on linux, I get a :internal compiler error: Segmentation faultwhen I compile a java file containing :>>>>>>>>>>private static final int foo = 100;private static final int bar = (int)((double) foo * 0.9);<<<<<<<<<<Compiling the same file without this int-double casting works with gcj.The java class compile with sun jdk 1.4.",RESOLVED          FIXED      
11533,Andrew Haley,Inlining drops static initialization of inner class,"Compile/run the following with -O3.  Note this is broken in 3.3 also; I haven'ttested earlier versions.public class Log {  private static class Singleton {static final Log __instance = new Log();}  public static Log instance() {    return Singleton.__instance;  }  public String toString() {    return ""Log"";  }  public static void main(String[] args) {        System.out.println(Log.instance());  }}",RESOLVED          FIXED      
1111,Andrew Haley,Order matters for inline candidates,Inline candidates have to be seen as such before being inlined when used.Release:CurrentEnvironment:AllHow-To-Repeat:Use an inline candidate before and after declaration. Noticethat the candidate's symbol still exists when the candidateis declared after having been used.,RESOLVED          FIXED      
6729,Andrew Haley,Compiler error causing break of java.lang.Character.isWhitespace,"I tracked down the reason, why java.io.StreamTokenizer can't parsenumbers any longer. The testcase is narrowed fromjava.lang.Character.isWhitespace, which is returning true on digitsbecause of this bug.I consider this to be of high priority.Release:3.2 20020516 (experimental)Environment:System: Linux isabella 2.4.18-4GB #1 Wed Mar 27 13:57:05 UTC 2002 i586 unknownArchitecture: i586	host: i586-pc-linux-gnubuild: i586-pc-linux-gnutarget: i586-pc-linux-gnuconfigured with: /home/roland/gcc/configure --enable-threads=posix --enable-languages=c,c++,javaHow-To-Repeat:# gcj -g --main=HelloWorld HelloWorld.java# ./a.out this should be false: truepublic class HelloWorld {    static int attr = 0x9;    public static void main(String [] args) {	boolean res = ( ( 1 << attr ) & 0x1000 ) != 0	;     	System.out.println(""this should be ""+res+"": ""+isWhite());    }    public static boolean isWhite() {	return ( ( 1 << attr ) & 0x1000 ) != 0 ;    }}",RESOLVED          FIXED      
9170,Andrew Haley,"gcj regression: ICE in walk_tree, at tree-inline.c:1692","I stumbled across a gcj problem that was previously reportedas PR 8138.  However, in running the test case from 8138, I found acompletely different problem....src/org/xwt/HTTP.java:610: internal compiler error: in walk_tree, at tree-inline.c:1692	This is a regression, as older versions of gcj can build this code.Release:3.3 20030102 (prerelease)Environment:System: Linux escape 2.4.18-18.8.0 #1 Thu Nov 14 00:10:29 EST 2002 i686 i686 i386 GNU/LinuxArchitecture: i686	host: i686-pc-linux-gnubuild: i686-pc-linux-gnutarget: i686-pc-linux-gnuconfigured with: ../gcc/configure --prefix=/home/green/net/i --enable-threads --enable-languages=c,c++,javaHow-To-Repeat:	Follow the How-To-Repeat steps from PR 8138.",RESOLVED          FIXED      
1198,Andrew Haley,StreamTokenizer doesn't scan mixed token types correctly,From: green@sourceware.cygnus.comTo: java-gnats@sourceware.cygnus.comCc:  Subject: java.io/141Date: 6 Mar 2000 03:48:34 -0000 CVSROOT:	/cvs/java Module name:	libgcj Changes by:	green@sourceware.cygnus.com	00/03/05 19:48:34  Modified files: 	libjava/testsuite: ChangeLog  Added files: 	libjava/testsuite/libjava.lang: PR141.java PR141.out   Log message: 	2000-03-05  Anthony Green  <green@redhat.com> 	 	* libjava.lang/PR141.java: New file. 	* libjava.lang/PR141.out: New file. 	For PR java.io/141.  Patches: http://gcc.gnu.org/cgi-bin/gcc/libjava/testsuite/ChangeLog.diff?cvsroot=java&r1=1.58&r2=1.59 http://gcc.gnu.org/cgi-bin/gcc/libjava/testsuite/libjava.lang/PR141.java.diff?cvsroot=java&r1=NONE&r2=1.1 http://gcc.gnu.org/cgi-bin/gcc/libjava/testsuite/libjava.lang/PR141.out.diff?cvsroot=java&r1=NONE&r2=1.1,RESOLVED          FIXED      
1307,Andrew Haley,Throwable.fillInStackTrace dumps core if backtrace fails,Responsible-Changed-From-To: tromey->aphResponsible-Changed-Why: Andrew handles backtraces.    FWIW I think a runtime check would be best.,RESOLVED          FIXED      
4269,Andrew Haley,[sparc-unknown-netbsdeld1.5] HAVE_NL_LANGINFO doesn't ensure that CODESET is available,"Some files include the following:#ifdef HAVE_ICONV#ifdef HAVE_LANGINFO_CODESET  setlocale (LC_CTYPE, """");  if (current_encoding == NULL)    current_encoding = nl_langinfo (CODESET);#endif /* HAVE_LANGINFO_CODESET */#endif /* HAVE_ICONV */The problem is that NetBSD/sparc-1.5 has a/usr/include/langinfo.h that doesn't define CODESET.Release:gcc-3.0.1Environment:sparc-unknown-netbsdelf1.5 with the patch from  http://gcc.gnu.org/ml/gcc-patches/2001-07/msg02242.htmlHow-To-Repeat:stage1/xgcc -Bstage1/ -B/usr/local/sparc-unknown-netbsdelf1.5/bin/ -c  -DIN_GCC    -g -O2 -W -Wall -Wwrite-strings -Wstrict-prototypes -Wmissing-prototypes   -DHAVE_CONFIG_H    -I. -Ijava -I../../gcc -I../../gcc/java -I../../gcc/config -I../../gcc/../include ../../gcc/java/jcf-parse.c -o java/jcf-parse.o../../gcc/java/jcf-parse.c: In function `parse_source_file_1':../../gcc/java/jcf-parse.c:876: `CODESET' undeclared (first use in this function)../../gcc/java/jcf-parse.c:876: (Each undeclared identifier is reported only once../../gcc/java/jcf-parse.c:876: for each function it appears in.)make[2]: *** [java/jcf-parse.o] Error 1make[2]: Leaving directory `/aux.old/gcc-3.0.1/compile/gcc'make[1]: *** [stage2_build] Error 2make[1]: Leaving directory `/aux.old/gcc-3.0.1/compile/gcc'make: *** [bootstrap] Error 2",RESOLVED          FIXED      
8025,Andrew Haley,ICE when bytecode does array access on null,"The java .class file verifier is croaking when accessing arrayelements of a null-typed local variable. This affects the 16instructions [abcsilfd]a{load|store}.Further analysis: In .java source code, no variable can have the nulltype. But in .class bytecode, aconst_null is legal and has its owntype. The null type can therefore appear as the arrayref argument forarray stores and array loads - this must generate aNullPointerException at runtime, but it is legal code and must passthe verifier.Release:3.1 20020501 (prerelease)Environment:System: Linux quaffle 2.4.9-31smp #1 SMP Tue Feb 26 06:55:00 EST 2002 i686 unknownArchitecture: i686	host: i686-pc-linux-gnubuild: i686-pc-linux-gnutarget: i686-pc-linux-gnuconfigured with: ../gcc/configure --enable-languages=c,c++,java --prefix=/fpga3/users/eblake/gccHow-To-Repeat:	Compile this program (which demonstrates the bug for iaload; the other15 bytecodes with problems are similar) to bytecode, then frombytecode to native.$ cat Foo.javaclass Foo{  void m()  {    int[] a = null;    int i = a[0];  }}$ gcj -C Foo.java$ gcj -o Foo --main=Foo Foo.classFoo.java: In class `Foo':Foo.java: In method `Foo.m()':Foo.java:6: Internal compiler error in build_java_check_indexed_type, at java/expr.c:890Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.$",RESOLVED          FIXED      
8063,Andrew Haley,"Compiler chokes with -O3, ""fatal error reading class for second time""","Tried this:cuddles.cambridge.redhat.com /tmp > gcj -Isrc/ -O3 -c src/org/xwt/HTTP.java -o HTTP.ocuddles.cambridge.redhat.com /tmp > gcj --versiongcj (GCC) 3.3 20020925 (experimental)Copyright (C) 2002 Free Software Foundation, Inc.This is free software; see the source for copying conditions.  There is NOwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.Release:unknownEnvironment:LinuxHow-To-Repeat:wget http://www.megacz.com/src.tgztar xvzf src.tgzgcj -Isrc/ -O3 -c src/org/xwt/HTTP.java -o HTTP.o",RESOLVED          FIXED      
8138,Andrew Haley,"Compiler chokes with -O3, ""fatal error reading class for second time""","gnu/gcj/runtime/StringBuffer.java:0: fatal error: reading class gnu.gcj.runtime.StringBuffer for the second time from /usr/local/gcc/share/java/libgcj-3.3.jarcompilation terminated.Release:unknownEnvironment:LinuxHow-To-Repeat:Try this; the first compile will fail if you used gcc 2.95 to build your compiler.  If you used gcc 3.x, the second will fail.wget http://www.megacz.com/src.tgztar xvzf src.tgzgcj -fCLASSPATH= -Isrc/ -O3 -c src/org/xwt/HTTP.java -o HTTP.ogcj -fCLASSPATH= -Isrc/ -O3 -c src/org/xwt/Trap.java -o Trap.o",RESOLVED          FIXED      
8457,Andrew Haley,"[3.2/3.3 regression] ICE in generate_bytecode_insns, at java/jcf-write.c:1850","[alik@explorer poic]$ ./poibuild/tmp/ccyMAAQPjx: In class `org.apache.poi.util.BinaryTree$11':/tmp/ccyMAAQPjx: In method `access$0(org.apache.poi.util.BinaryTree$11)':/tmp/ccyMAAQPjx:0: Internal compiler error in generate_bytecode_insns, at java/jcf-write.c:1850Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.Release:gcc 3.2Environment:RH Linux 7.1How-To-Repeat:gcj -C BinaryTree.java (attached)",RESOLVED          FIXED      
8741,Andrew Haley,[3.2/3.3 regression] gcj crashes when compiling the attached file,"gcj crashes with the following message when compiling the attached file:| DoubleOrderedMap.java: In class `org.apache.commons.collections.DoubleOrderedMap$11':| DoubleOrderedMap.java: In method `access$0(org.apache.commons.collections.DoubleOrderedMap$11)':| DoubleOrderedMap.java:2052: internal error: Segmentation fault| Please submit a full bug report,| with preprocessed source if appropriate.Release:gcc 3.2Environment:Red Hat Linux 8.0How-To-Repeat:gunzip DoubleOrderedMap.java.gz # attachedgcj DoubleOrderedMap.java",RESOLVED          FIXED      
28039,Bud Davis,Warn when ignoring extra characters in the format specification,"Assume the following case:One had somewhere '(3(a,....),f)', now one copies this and realizes that one does not need the 3(..) anymore. Result:'(a,....),f)'Ups, the "",f)"" is ignored.Currently, gfortran does not warn in such a case.Expected: gfortran warns at compile timeIfort (9.1) even default warns in such a case:fortcom: Warning: test.f90, line 5: The extra characters in the format specification will be ignored   ['(a),f)']  write(*,'(a),f)') 'Hello', r--------------^Test case:--------------program test  implicit none  real :: r  r = 1.0  write(*,'(a),f)') 'Hello', rend program test--------------",RESOLVED          FIXED      
41152,Bud Davis,"[4.5 Regression] Spurious diagnostic ""Extraneous characters in format""","gfortran now warns for trailing characters in format statements. However, it does not properly work as the following test case (extracted from FLEUR, www.flapw.de) shows: 7182 FORMAT (a3)                      1Warning: Extraneous characters in format at (1)Due to committal:URL: http://gcc.gnu.org/viewcvs?root=gcc&view=rev&rev=151021Log:2009-08-22      Bud Davis <bdavis9659@sbcglobal.net>        PR fortran/28093        * io.c : added variable to store original len of fmt        * io.c (check_format): Consume H items using next_char        in both modes to handle consecutive single quotes.        Test for extra characters in fmt, issue warning.Test case:      SUBROUTINE rw_inp()      CHARACTER(len=100) :: line      READ(*,FMT=""(4x,a)"") line 7182 FORMAT (a3) 7130 FORMAT (i3)      END SUBROUTINE rw_inp",RESOLVED          FIXED      
28974,Bud Davis,Extremely slow compilation of enumerated DATA statements.,"Compilation of enumerated DATA statements is extremely slow. Related PR:  * http://gcc.gnu.org/bugzilla/show_bug.cgi?id=13465Related threads on ML:  * http://gcc.gnu.org/ml/fortran/2004-08/msg00131.html * http://gcc.gnu.org/ml/fortran/2006-09/msg00025.htmlShell script to generate example data:$> cat datagen.sh#! /bin/bashoutfile=data.f90dim1=50dim2=1000echo ""MODULE appdata""                              >  ${outfile}echo ""INTEGER :: thedata(${dim1}, ${dim2})""        >> ${outfile}for i in `seq 1 ${dim1}` ; do  for j in `seq 1 ${dim2}` ; do    echo ""DATA thedata(${i}, ${j}) / $((i*j)) /""   >> ${outfile}  donedoneecho ""END MODULE""                                  >> ${outfile}P4 3.2 GHz, 2GB RAM:$> bash datagen.sh$> time gfortran-4.2 -c data.f90real    3m31.646suser    3m29.545ssys     0m0.172s",RESOLVED          FIXED      
21130,Bud Davis,38822 lines of Fortran 90 takes more than 10 minutes to compile on a dual 3GHz P4 Linux box with lots of RAM,"I work on a language interoperability tool called Babel. It generates F90 codethat wraps up objects written in other languages. I have an example with 38822lines in 22 files. The last file is 4967 lines long, and it takes roughly 10minutes to compile with a snapshot of GCC 4.0 on an essentially idle dual 3GHzP4 Linux box. gfortran does ultimately compile the file, so I will understand ifyou don't consider this a bug.Here are the details about the version and build of gfortran:[epperly@tux163 gfortran_issue]$ /usr/casc/babel/apps/linux_el/gcc40_pre0/bin/gcc -vUsing built-in specs.Target: i686-pc-linux-gnuConfigured with: ../gcc-4.0-20050319/configure--with-gmp=/usr/casc/babel/apps/linux_el/gcc40_pre0--prefix=/usr/casc/babel/apps/linux_el/gcc40_pre0 --enable-languages=c,c++,java,f95Thread model: posixgcc version 4.0.0 20050319 (prerelease)I know that tar files are not preferred, but it seems like the only reasonablemeans of providing all the required files. I include a compile.sh shell scriptto compile the files in the correct order. Each file is compiled with ""gfortran-c file.f90"". This shows the timing output from running ""sh copmile.sh"".[epperly@tux163 gfortran_issue]$ sh compile.shWed Apr 20 15:27:16 PDT 2005The following file will take roughly 10 minutes to compileWed Apr 20 15:27:25 PDT 2005Wed Apr 20 15:39:18 PDT 2005",RESOLVED          FIXED      
15115,Bud Davis,scaling factor on F format not applied,"from NIST test FM405.FOR$ cat e.f        CHARACTER B381K(4)*38        B381K(1) = '   23   23.345     T ENDS             '        B381K(2) = ' 23.456     F    98 YOURS PROGRAMS    '        B381K(3) = ' 13.1234  13.1234E0 1312.34           '        B381K(4) = '   5.2345   56    5.2345 T TRUE 5.2345'        READ(B381K(3),39036) AVS, BVS, CVS        PRINT*,'AVS = ',AVS        PRINT*,'BVS = ',BVS        PRINT*,'CVS = ',CVS39036   FORMAT(F9.5, 1X, E9.3, 1X, 2PF7.4)        END $ gfortran e.f$ ./a.outAVS =     13.12340BVS =     13.12340CVS =     1312.340           ^^^           wrong, should be 13.12340$ g77 e.f$ ./a.out AVS =   13.1233997 BVS =   13.1233997 CVS =   13.1233997",RESOLVED          FIXED      
16935,Bud Davis,Segmentation fault of compiler with unsupported control items in OPEN,"!G77 complains that this is an unsupported control item.!GFORTRAN compiles OK put program gives segmentation fault!I have not checked the other control items but strongly urge a G77 style!error message for standard but unsupported items.!distilled from Meissner text book example       program bug2       implicit none       character*(500)  String       open( 1 , file = ""str_500.txt"", position = ""REWIND"" )       read( 1 , * ) String       close( 1 )        stop       endstr_500.txt contains""A character string consists of zero or more characters. Even though it is madeup of individual characters, a character string is considered to be a scalar. Aswith any data type, it is possible to declare an array of character strings, allthe same length. A substring is a contiguous portion of a character string thathas a starting point and an ending point within the character string. It ispossible to reference a substring of a character scalar variable or constant.""",RESOLVED          FIXED      
14897,Bud Davis,'T' edit descriptor output incorrect,"A small example to demonstrate:       WRITE(*,'(20H12345678901234567890)')      WRITE(*,'(T5,A,T10,A,T15,A)')'AA','BB','CC'      WRITE(*,'(20H    AA   BB   CC    )')      END$ gfortran aa.f$ ./a.out12345678901234567890     AA   BB   CC    AA   BB   CCand from g77:$ g77 aa.f$ ./a.out12345678901234567890    AA   BB   CC    AA   BB   CCusing :$ gfortran --versionGNU Fortran 95 (GCC 3.5-tree-ssa 20040407 (merged 20040331))",RESOLVED          FIXED      
15755,Bud Davis,gfortran: backspace call causes bus error,"OS:  Freebsd 5.2.1-RELEASE-p4G95 snapshot version:  gcc-3.5-20040530gfortran: backspace call causes bus errorThe problem was reported fixed(may24) at the www.g95.org site but hasnot shown up here.------ Test program      program test2c      integer  nin      character*72 dummy1, dummy2, section_headerc      nin=10      section_header=""global control parameters""      open(nin,file='cpu.dat',status='old')c  rewind unit nout from previous read-procedure in main routine      rewind nin      write(6,*) ninc  read and write procedure 100  continue      read(nin,*,end=400) dummy1      write(6,*) dummy1      if (dummy1.eq.section_header) then        write(6,*) "" found header"" 200    continue        read(nin,*) dummy1        write(6,*) ""d1 "",dummy1c appears with these two lines one gets a Bus error        backspace(nin)        read(nin,'(a)') dummy2c        write(6,*) ""d2 "",dummy2c        if (dummy1(1:4).eq.'done') then           write(6,*) ""got done ""           rewind nin           goto 400        endif        goto 200      endif      goto 100 400  continue      write(6,*) "" finished ""      write(6,*) dummy1      stop      end---------------(cpu.dat file)'global control parameters''north haven tce oxidation'.true.                        ;varsat_flow.false.                       ;steady_flow.false.                       ;fully_saturated.true.                        ;reactive_transport'density dependent flow''done'",RESOLVED          FIXED      
14067,Andrew Pinski,no warning when character data statement overflows declared size,"A character string provided in a data statement that is larger than declaredvariable size causes an ICE.This code is not standard conforming.  gfortran should either:a> Issue an error that the character string in the data statement cannot belarger than the variable size.  { is smaller OK? or does it have to be exact forcharacter variables ? i dunno but it seems reasonable }b> Issue a warning and truncate the string.g77 does half of option (b). g77 misses the warning, but does not do any harm.To duplicate:$ cat bigstring.f      PROGRAM GNEXDATA      CHARACTER*31 GNCRMESSC                             1         2         3         4C                    1234567890123456789012345678901234567890      DATA GNCRMESS/'   *** COASTAL RADAR    NOT LOADED *** '/      PRINT*,GNCRMESS      RETURN      END$ /usr/local/bin/gfortran -static bigstring.ff951: ../../gcc/gcc/fortran/trans-const.c:109: gfc_conv_string_init: Assertion`len >= slen' failed.bigstring.f: In function `MAIN__':bigstring.f:8: internal compiler error: AbortedPlease submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.$ g77 bigstring.f$ ./a.out    *** COASTAL RADAR    NOT LOA$ /usr/local/bin/gfortran --versionGNU Fortran 95 (GCC 3.5-tree-ssa 20040207 (merged 20040126))Copyright (C) 2003 Free Software Foundation, Inc.",RESOLVED          FIXED      
15472,Andrew Pinski,implicit open for unformatted file causes run-time error,"this from NIST test FM411.FOR$ cat a.f      READ (UNIT=9, END = 0023)  I      STOP 0023 CONTINUE      END$ gfortran a.f$ ./a.outAt line 1 of file a.fFortran runtime error: Missing format for FORMATTED data transfer$ g77 a.f$ ./a.out$ gfortran --versionGNU Fortran 95 (GCC 3.5.0 20040515 (experimental))",RESOLVED          FIXED      
12839,Joost VandeVondele,incorrect IO of Inf,"The following program should print Inf(or similar) not+++++++   REAL a,b   a=0.0   b=1.0/a   ! b=inf   write(6,*) b   write(6,'(G12.5)') b   END",RESOLVED          FIXED      
15311,Victor Leikehman,Incorrect handling of A edit descriptor,"The draft standard says: (10.6.3 Character editing)""If the specified field width w for an A edit descriptor corresponding toan output item is greater than len, the output field will consist of w-lenblanks followed by the len characters from the internal value"".Currently, the behaviour is such that the blanks are printed after thevalue.This defects causes miscompare in SPEC FP benchmark 189.lucas.% cat foo.f90program main  character*100 s  write(s,'(a18)') ""hello world""  if (s.eq.""       hello world"") print*, ""Ok""  if (s.eq.""hello world       "") print*, ""Wrong!""end",RESOLVED          FIXED      
15204,kargl@c-67-168-59-70.client.comcast.net,ADJUSTR intrinsic accesses corrupted pointer,"Compile the following program with ""gfortran -static -o adjustr adjustr.f90""Then try to execute the generated binray.  program test_adjustr  implicit none  character(len=10) s1, s2       !0123456789  s1 = 'Steve'  s2 = adjustr(s1)  print*, 's1          = ""', s1, '""'  print*, 'adjustr(s1) = ""', s2, '""'       !0123456789  s1 = '  Steve'  s2 = adjustr(s1)  print*, 's1          = ""', s1, '""'  print*, 'adjustr(s1) = ""', s2, '""'       !0123456789  s1 = '     Steve'  s2 = adjustr(s1)  print*, 's1          = ""', s1, '""'  print*, 'adjustr(s1) = ""', s2, '""'  end program test_adjustrkargl[262] valgrind adjustr==14500== Memcheck, a memory error detector for x86-linux.==14500== Copyright (C) 2002-2004, and GNU GPL'd, by Julian Seward.==14500== Using valgrind-2.1.0, a program supervision framework for x86-linux.==14500== Copyright (C) 2000-2004, and GNU GPL'd, by Julian Seward.==14500== Estimated CPU clock rate is 1219 MHz==14500== For more details, rerun with: -v==14500== ==14500== Conditional jump or move depends on uninitialised value(s)==14500==    at 0x804D9EA: _gfortran_adjustr (in adjustr)==14500==    by 0x8048201: MAIN__ (adjustr.f90:20)==14500==    by 0x80484B3: main (in adjustr)s1          = ""Steve     ""==14500== ==14500== Syscall param write(buf) contains uninitialised or unaddressable byte(s)==14500==    at 0x8051E53: (within adjustr)==14500==    by 0x804985C: _gfortran_next_record (in adjustr)==14500==    by 0x804A6AE: finalize_transfer (in adjustr)==14500==    by 0x804A78A: _gfortran_st_write_done (in adjustr)==14500==  Address 0x8078083 is not stack'd, malloc'd or free'dadjustr(s1) = ""@G3""==14500== ==14500== ERROR SUMMARY: 5 errors from 3 contexts (suppressed: 0 from 0)==14500== malloc/free: in use at exit: 0 bytes in 0 blocks.==14500== malloc/free: 0 allocs, 0 frees, 0 bytes allocated.Environment:System: FreeBSD c-67-168-59-70.client.comcast.net 5.2-CURRENT FreeBSD 5.2-CURRENT #2: Sat Apr 24 10:33:08 PDT 2004 kargl@c-67-168-59-70.client.comcast.net:/usr/obj/usr/src/sys/HOTRATS i386	host: i386-unknown-freebsd5.2build: i386-unknown-freebsd5.2target: i386-unknown-freebsd5.2configured with: ../gcc/configure --prefix=/home/kargl/gcc/work --disable-libmudflap --enable-languages=c,f95 --with-gmp=/usr/localHow-To-Repeat:	See above.",RESOLVED          FIXED      
15149,Joost VandeVondele,problem computing Pi,"Trying to verify the claim in http://gcc.gnu.org/ml/fortran/2004-04/msg00203.htmlI keep getting (incorrectly) 0.0 as an approximate value for Pi, whereas 3.14...is returned using other compilers.TYPE point_type SEQUENCE REAL :: pos(2)END TYPEINTEGER, PARAMETER :: N=1000000TYPE(point_type)     :: points(N)REAL, DIMENSION(2*N) :: scratchEQUIVALENCE(points,scratch)CALL RANDOM_NUMBER(scratch)scratch=2.0*scratch-1.0count=0DO i=1,N  IF (SUM(points(i)%pos**2)<1.0) THEN     count=count+1  ENDIFENDDOwrite(6,*) 4.0*REAL(count)/REAL(N)ENDwith the latest version of gfortran, i.e.gfortran -v mytest.f90Driving: gfortran -v mytest.f90 -lgfortranbegin -lgfortran -lm -shared-libgccReading specs from /data1/vondele/gcc-g95/bin/../lib/gcc/i686-pc-linux-gnu/3.5-tree-ssa/specsConfigured with: /data1/vondele/gcc-g95/gcc/configure --prefix=/data1/vondele/gcc-g95/ --with-gmp-dir=/data1/vondele/gmp-4.1.2/ --enable-languages=c,f95Thread model: posixgcc version 3.5-tree-ssa 20040426 (merged 20040414) /data1/vondele/gcc-g95/bin/../libexec/gcc/i686-pc-linux-gnu/3.5-tree-ssa/f951 mytest.f90 -quiet -dumpbase mytest.f90 -mtune=pentiumpro -auxbase mytest -version -o /tmp/ccwcrrYe.sGNU F95 version 3.5-tree-ssa 20040426 (merged 20040414) (i686-pc-linux-gnu)        compiled by GNU C version 3.5-tree-ssa 20040426 (merged 20040414).GGC heuristics: --param ggc-min-expand=30 --param ggc-min-heapsize=4096 as -V -Qy -o /tmp/ccaWH9Uk.o /tmp/ccwcrrYe.sGNU assembler version 2.12.90.0.1 (i386-linux) using BFD version 2.12.90.0.1 20020307 Debian/GNU Linux /data1/vondele/gcc-g95/bin/../libexec/gcc/i686-pc-linux-gnu/3.5-tree-ssa/collect2 --eh-frame-hdr -m elf_i386 -dynamic-linker /lib/ld-linux.so.2 /usr/lib/crt1.o /usr/lib/crti.o /data1/vondele/gcc-g95/bin/../lib/gcc/i686-pc-linux-gnu/3.5-tree-ssa/crtbegin.o -L/data1/vondele/gcc-g95/bin/../lib/gcc/i686-pc-linux-gnu/3.5-tree-ssa -L/data1/vondele/gcc-g95/bin/../lib/gcc -L/data1/vondele/gcc-g95//lib/gcc/i686-pc-linux-gnu/3.5-tree-ssa -L/data1/vondele/gcc-g95/bin/../lib/gcc/i686-pc-linux-gnu/3.5-tree-ssa/../../.. -L/data1/vondele/gcc-g95//lib/gcc/i686-pc-linux-gnu/3.5-tree-ssa/../../.. /tmp/ccaWH9Uk.o -lgfortranbegin -lgfortran -lm -lgcc_s -lgcc -lc -lgcc_s -lgcc /data1/vondele/gcc-g95/bin/../lib/gcc/i686-pc-linux-gnu/3.5-tree-ssa/crtend.o /usr/lib/crtn.o",RESOLVED          FIXED      
45847,Tejas Belagod,ICE in supportable_widening_operation,"The following sample causes gcc ICE on armint decode_subframe_lpc(int channel, int pred_order){    int i, j;    int qlevel;    int coeffs[pred_order];    int *decoded = channel;    long long sum;    for (i = pred_order; i < channel; i++) {        for (j = 0; j < pred_order; j++)            sum += (long long)coeffs[j] * decoded[i-j-1];        decoded[i] += sum >> qlevel;    }    return 0;}here is the commandline to reproduce it, it only happens at O3arm-none-linux-gnueabi-gcc-4.6.0 -march=armv7-a -mtune=cortex-a8 -mfpu=neon -mfloat-abi=softfp flacdec.i -c -O3here is backtraceAnalyzing compilation unitPerforming interprocedural optimizations <*free_lang_data> <visibility> <early_local_cleanups> <increase_alignment> <whole-program> <ipa-profile> <cp> <inline> <pure-const> <static-var>Assembling functions: decode_subframe_lpcProgram received signal SIGSEGV, Segmentation fault.0x085bfa6a in supportable_widening_operation (code=WIDEN_MULT_EXPR,     stmt=0xb7f942d8, vectype_out=0x0, vectype_in=0xb7de8660, decl1=0xbffff26c,     decl2=0xbffff26c, code1=0xbffff268, code2=0xbffff268,     multi_step_cvt=0xbffff264, interm_types=0xbffff260)    at /home/kraj/work/cross/arm-none-linux-gnueabi/../../gcc-trunk/gcc/tree-vect-stmts.c:51935193	  if (insn_data[icode1].operand[0].mode != TYPE_MODE (wide_vectype)here is the compiler configure$ arm-none-linux-gnueabi-gcc-4.6.0 -vUsing built-in specs.COLLECT_GCC=arm-none-linux-gnueabi-gcc-4.6.0COLLECT_LTO_WRAPPER=/home/kraj/work/cross/arm-none-linux-gnueabi/tools/libexec/gcc/arm-none-linux-gnueabi/4.6.0/lto-wrapperTarget: arm-none-linux-gnueabiConfigured with: /home/kraj/work/cross/arm-none-linux-gnueabi/../../gcc-trunk/configure --target=arm-none-linux-gnueabi --prefix=/home/kraj/work/cross/arm-none-linux-gnueabi/tools --with-sysroot=/home/kraj/work/cross/arm-none-linux-gnueabi/sysroot --enable-__cxa_atexit --disable-libssp --disable-libgomp --disable-libmudflap --enable-languages=c,c++Thread model: posixgcc version 4.6.0 20100927 (experimental) (GCC)",RESOLVED          FIXED      
45805,Tejas Belagod,"VFP/Neon double precision register expected -- `vmovl.s16 q2,s8","Created attachment 21892 [details]testcaseThe attached testcase does not compile with gcc trunk when using vectorizer and neon on arm.arm-oe-linux-gnueabi-gcc -mfpu=neon -mfloat-abi=softfp -O3 -c test.cIt works fine if I add -mvectorize-with-neon-quad optionhere is my gcc configurationUsing built-in specs.COLLECT_GCC=arm-none-linux-gnueabi-gccCOLLECT_LTO_WRAPPER=/home/kraj/work/cross/arm-none-linux-gnueabi/tools/libexec/gcc/arm-none-linux-gnueabi/4.6.0/lto-wrapperTarget: arm-none-linux-gnueabiConfigured with: /home/kraj/work/cross/arm-none-linux-gnueabi/../../gcc-trunk/configure --target=arm-none-linux-gnueabi --prefix=/home/kraj/work/cross/arm-none-linux-gnueabi/tools --with-sysroot=/home/kraj/work/cross/arm-none-linux-gnueabi/sysroot --enable-__cxa_atexit --disable-libssp --disable-libgomp --disable-libmudflap --enable-languages=c,c++Thread model: posixgcc version 4.6.0 20100927 (experimental) (GCC)",RESOLVED          FIXED      
29726,Serge Belyshev,"[4.2 regression] invalid folding of ((X >> C1) & C2) != 0 or ""M-x is undefined"" in emacs",fix for bug 21137 causes a regression:/* { dg-do run } */void abort (void);int main (void){  int k = -1;  if (((unsigned int) k >> 3) & 134217728)    return 0;  abort ();}This bug is also known as miscompilation of emacs' keymap.c at -O0:http://lists.gnu.org/archive/html/emacs-devel/2006-09/msg00276.html,RESOLVED          FIXED      
80210,Peter Bergner,"ICE in in extract_insn, at recog.c:2311 on ppc64 for with __builtin_pow","Following test-case ICEs:$ cat /tmp/ice.cdoubledo_pow_0_5_default (double a){  return __builtin_pow (a, 0.5);	/* should generate fsqrt */}#pragma GCC target ""no-powerpc-gpopt,no-powerpc-gfxopt""#pragma GCC reset_options$ ppc64-linux-gnu-gcc -Ofast /tmp/ice.c/tmp/ice.c: In function ‘do_pow_0_5_default’:/tmp/ice.c:5:1: error: unrecognizable insn: } ^(insn 6 3 10 2 (set (reg:DF 155 [ <retval> ])        (sqrt:DF (reg/v:DF 156 [ a ]))) ""/tmp/ice.c"":4 -1     (nil))/tmp/ice.c:5:1: internal compiler error: in extract_insn, at recog.c:23110xb0d1d8 _fatal_insn(char const*, rtx_def const*, char const*, int, char const*)	.././../gcc/rtl-error.c:1080xb0d209 _fatal_insn_not_found(rtx_def const*, char const*, int, char const*)	.././../gcc/rtl-error.c:1160xade5f1 extract_insn(rtx_insn*)	.././../gcc/recog.c:23110x8a1ee3 instantiate_virtual_regs_in_insn	.././../gcc/function.c:15890x8a1ee3 instantiate_virtual_regs	.././../gcc/function.c:19570x8a1ee3 execute	.././../gcc/function.c:2006",CLOSED          FIXED      
72804,Peter Bergner,Poor code gen with -mvsx-timode,"The option -mvsx-timode generates very poor code in some circumstances.  The following two test cases show the problem:bergner@genoa:~/gcc/BUGS/$ cat t.i __int128_tfoo (__int128_t *p){  return p[1];}With -O2 -mcpu=power7 -mno-vsx-timode, we get:foo:	ld 4,24(3)	ld 3,16(3)	blrWith -O2 -mcpu=power7 -mvsx-timode, we get:foo:	li 9,16	add 3,3,9	ld 4,8(3)	ld 3,0(3)	blrFor bool3-p7.c:ptr4() from the test suite, we see even worse code gen:bergner@genoa:~/gcc/BUGS/$ cat ptr4.i void ptr4 (__int128_t *p){  __int128_t a = p[1];  __int128_t b;  __asm__ (""# gpr reg %0"" : ""+r"" (a));  b = ~a;  __asm__ (""# gpr reg %0"" : ""+r"" (b));  p[0] = b;}bergner@genoa:~/gcc/BUGS/$ /home/bergner/gcc/build/gcc-fsf-mainline-vsx-timode-debug/gcc/xgcc -B/home/bergner/gcc/build/gcc-fsf-mainline-vsx-timode-debug/gcc/ -O2 -mcpu=power7 -mno-vsx-timode -S ptr4.i ptr4:	ld 8,16(3)	ld 9,24(3)	# gpr reg 8	not 10,8	not 11,9	# gpr reg 10	std 10,0(3)	std 11,8(3)	blrbergner@genoa:~/gcc/BUGS/$ /home/bergner/gcc/build/gcc-fsf-mainline-vsx-timode-debug/gcc/xgcc -B/home/bergner/gcc/build/gcc-fsf-mainline-vsx-timode-debug/gcc/ -O2 -mcpu=power7 -mvsx-timode -S ptr4.i bergner@genoa:~/gcc/BUGS/$ cat ptr4.s ptr4:	li 9,16	std 23,-72(1)	lxvd2x 0,3,9	std 24,-64(1)	std 25,-56(1)	std 26,-48(1)	std 27,-40(1)	std 28,-32(1)	std 29,-24(1)	std 30,-16(1)	xxpermdi 0,0,0,2	std 31,-8(1)	stdu 1,-368(1)	xxpermdi 0,0,0,2	addi 9,1,144	addi 23,1,272	stxvd2x 0,0,9	addi 9,1,272	addi 8,1,48	xxpermdi 0,0,0,2	addi 7,1,64	addi 6,1,80	addi 5,1,96	addi 4,1,112	addi 12,1,128	addi 31,1,144	xxpermdi 0,0,0,2	addi 30,1,160	addi 29,1,176	addi 28,1,192	addi 27,1,208	addi 26,1,224	addi 25,1,240	stxvd2x 0,0,9	addi 24,1,256	ori 2,2,0	ld 10,0(9)	ld 11,8(9)	addi 9,1,32	# gpr reg 10	std 10,0(23)	std 11,8(23)	ori 2,2,0	lxvd2x 0,0,23	xxpermdi 0,0,0,2	xxlnor 0,0,0	xxpermdi 0,0,0,2	stxvd2x 0,0,23	ori 2,2,0	ld 10,0(23)	ld 11,8(23)	# gpr reg 10	std 10,0(23)	std 11,8(23)	ori 2,2,0	lxvd2x 0,0,23	stxvd2x 0,0,24	stxvd2x 0,0,25	stxvd2x 0,0,26	stxvd2x 0,0,27	stxvd2x 0,0,28	stxvd2x 0,0,29	stxvd2x 0,0,30	stxvd2x 0,0,31	stxvd2x 0,0,12	stxvd2x 0,0,4	stxvd2x 0,0,5	stxvd2x 0,0,6	stxvd2x 0,0,7	stxvd2x 0,0,8	stxvd2x 0,0,9	addi 1,1,368	ld 23,-72(1)	ld 24,-64(1)	ld 25,-56(1)	ld 26,-48(1)	ld 27,-40(1)	ld 28,-32(1)	ld 29,-24(1)	ld 30,-16(1)	ld 31,-8(1)	stxvd2x 0,0,3	blr",CLOSED          FIXED      
81564,Peter Bergner,ICE in group_case_labels_stmt(),"Yet another fallout from the switch changes.bergner@pike:~/gcc/BUGS/$ cat bug.istruct a {    int b;    int c;};voidfoo (void){  struct a *e;  switch (e->c)  {    case 7:    case 3:      if (__builtin_expect(!0, 0))	__builtin_unreachable();  }}bergner@pike:~/gcc/BUGS/$ /home/bergner/gcc/build/gcc-fsf-mainline-debug/gcc/xgcc -B/home/bergner/gcc/build/gcc-fsf-mainline-debug/gcc -O2 -S bug.iduring GIMPLE pass: cfgbug.i: In function ‘foo’:bug.i:7:1: internal compiler error: Segmentation fault foo (void) ^~~0x10e70e77 crash_signal	/home/bergner/gcc/gcc-fsf-mainline-base/gcc/toplev.c:3380x10ee1508 group_case_labels_stmt(gswitch*)	/home/bergner/gcc/gcc-fsf-mainline-base/gcc/tree-cfg.c:17400x10edf98b end_recording_case_labels()	/home/bergner/gcc/gcc-fsf-mainline-base/gcc/tree-cfg.c:12550x10f0b9af cleanup_tree_cfg_1	/home/bergner/gcc/gcc-fsf-mainline-base/gcc/tree-cfgcleanup.c:7480x10f0bdab cleanup_tree_cfg_noloop	/home/bergner/gcc/gcc-fsf-mainline-base/gcc/tree-cfgcleanup.c:8430x10f0bfcf cleanup_tree_cfg()	/home/bergner/gcc/gcc-fsf-mainline-base/gcc/tree-cfgcleanup.c:8990x10edcbcf execute_build_cfg	/home/bergner/gcc/gcc-fsf-mainline-base/gcc/tree-cfg.c:4050x10edcca7 execute	/home/bergner/gcc/gcc-fsf-mainline-base/gcc/tree-cfg.c:434Please submit a full bug report,with preprocessed source if appropriate.Program received signal SIGSEGV, Segmentation fault.0x0000000010ee1508 in group_case_labels_stmt (stmt=0x3fffb59e7940)    at /home/bergner/gcc/gcc-fsf-mainline-pr72804-base/gcc/tree-cfg.c:17401740	      if (EDGE_COUNT (base_bb->succs) == 0(gdb) p base_bb$2 = (basic_block) 0x0(gdb) p base_case$1 = (tree) 0x3fffb5a80000(gdb) ptree base_case <case_label_expr 0x3fffb5a80000    type <void_type 0x3fffb58d0f18 void VOID        align 8 symtab 0 alias set -1 canonical type 0x3fffb58d0f18        pointer_to_this <pointer_type 0x3fffb58d1068>>    side-effects    arg 0 <integer_cst 0x3fffb57f9750 type <integer_type 0x3fffb58d05e8 int> constant 7>    arg 2 <label_decl 0x3fffb5a50380 L.5 type <void_type 0x3fffb58d0f18 void>        ignored VOID file (null) line 0 col 0        align 1 context <function_decl 0x3fffb5a13400 foo>>    bug.i:12:5 start: bug.i:12:5 finish: bug.i:12:8>(gdb) p CASE_LABEL(base_case)$3 = (tree) 0x3fffb5a50380(gdb) ptree $3 <label_decl 0x3fffb5a50380 L.5    type <void_type 0x3fffb58d0f18 void VOID        align 8 symtab 0 alias set -1 canonical type 0x3fffb58d0f18        pointer_to_this <pointer_type 0x3fffb58d1068>>    ignored VOID file (null) line 0 col 0    align 1 context <function_decl 0x3fffb5a13400 foo>>(gdb) pcfg;; basic block 2, loop depth 0;;  pred:       ENTRY;;  succ:       5;; basic block 5, loop depth 0;;  pred:       2;;  succ:       EXIT(gdb) pbb 2;; basic block 2, loop depth 0;;  pred:       ENTRY_1 = e->c;switch (_1) <default: <L3> [INV] [count: INV], case 3: <L5>, case 7: <L5>>;;  succ:       5(gdb) pbb 5;; basic block 5, loop depth 0;;  pred:       2<L3> [0.00%] [count: INV]:return;;;  succ:       EXITSo it seems the block that the case labels point to has been deleted, which is confirmed in the bug.i.011t.cfg dump file:Removing basic block 3;; basic block 3, loop depth 0;;  pred:      <L0> [0.00%] [count: INV]:;;  succ:       4Removing basic block 4;; basic block 4, loop depth 0;;  pred:       2<L5> [0.00%] [count: INV]:__builtin_unreachable ();;;  succ:      EMERGENCY DUMP:foo (){  struct a * eD.2678;;;   basic block 2, loop depth 0, freq 0, maybe hot;;    prev block 0, next block 5, flags: (NEW, REACHABLE);;    pred:       ENTRY (FALLTHRU)  _1 = eD.2678->cD.2674;  switch (_1) <default: <L3> [INV] [count: INV], case 3: <L5>, case 7: <L5>>;;    succ:       5;;   basic block 5, loop depth 0, freq 0, maybe hot;;    prev block 2, next block 1, flags: (NEW, REACHABLE);;    pred:       2<L3> [0.00%] [count: INV]:  return;;;    succ:       EXIT}In this base, we should probably discard these case statements similarly to how we discard cases that have the same label as the default case.",CLOSED          FIXED      
80775,Peter Bergner,[8 Regression] -O3 produces ice in group_case_labels_stmt,Created attachment 41362 [details]C source codeThe attached code and flag -O3 does this with recent trunk:XmL.c:599:1: internal compiler error: Segmentation fault0xc3ddcf crash_signal	../../trunk/gcc/toplev.c:3370xc810ac group_case_labels_stmt(gswitch*)	../../trunk/gcc/tree-cfg.c:16840xc81b5a group_case_labels()	../../trunk/gcc/tree-cfg.c:17550xc8f766 execute_cleanup_cfg_post_optimizing	../../trunk/gcc/tree-cfgcleanup.c:1203I'll have a go at reducing the code and providing a range ofrevisions where I think the gcc bug is.,CLOSED          FIXED      
81194,Peter Bergner,[8 Regression] ICE during RTL pass: expand,"Created attachment 41622 [details]compressed preprocessed sourceduring RTL pass: expandIn file included from /home/marc/Qt/qt5-build/qtbase/include/QtQml/5.10.0/QtQml/private/qv4isel_util_p.h:1:0,                 from /home/marc/Qt/qt5/qtdeclarative/src/qml/jit/qv4isel_masm_p.h:56,                 from /home/marc/Qt/qt5/qtdeclarative/src/qml/jit/qv4isel_masm.cpp:40:/home/marc/Qt/qt5-build/qtbase/include/QtQml/5.10.0/QtQml/private/../../../../../../../qt5/qtdeclarative/src/qml/compiler/qv4isel_util_p.h: In member function ‘void QV4::JIT::InstructionSelection<JITAssembler>::run(int) [with JITAssembler = QV4::JIT::Assembler<QV4::JIT::AssemblerTargetConfiguration<JSC::MacroAssemblerARMv7, (QV4::JIT::TargetOperatingSystemSpecialization)0> >]’:/home/marc/Qt/qt5-build/qtbase/include/QtQml/5.10.0/QtQml/private/../../../../../../../qt5/qtdeclarative/src/qml/compiler/qv4isel_util_p.h:215:9: internal compiler error: Segmentation fault         switch (s->stmtKind) {         ^~~~~~0xb21a6f crash_signal        ../../gcc/gcc/toplev.c:3380xb1391c expand_case(gswitch*)        ../../gcc/gcc/stmt.c:11570x7bab17 expand_gimple_stmt_1        ../../gcc/gcc/cfgexpand.c:35690x7bab17 expand_gimple_stmt        ../../gcc/gcc/cfgexpand.c:37410x7bc2bf expand_gimple_basic_block        ../../gcc/gcc/cfgexpand.c:57450x7c171e execute        ../../gcc/gcc/cfgexpand.c:6354Please submit a full bug report,with preprocessed source if appropriate.Please include the complete backtrace with any bug report.",CLOSED          FIXED      
80823,Peter Bergner,[8 Regression] ICE: verify_flow_info failed,"trippels@gcc2-power8 linux % cat book3s_pr_papr.iint a, c;int b[1];int fn1() {  switch (a)  case 0:  case 2:    return 1;  return 0;}void fn2() {  int i;  for (;; ++i) {    c = b[i];    int d = !fn1();    if (d)      __asm__("""");  }}trippels@gcc2-power8 linux % gcc -c -O3 book3s_pr_papr.ibook3s_pr_papr.i: In function ‘fn2’:book3s_pr_papr.i:10:6: error: missing edge 2->4 void fn2() {      ^~~book3s_pr_papr.i:10:6: internal compiler error: verify_flow_info failed0x10359553 verify_flow_info()        ../../gcc/gcc/cfghooks.c:2600x1094081b checking_verify_flow_info        ../../gcc/gcc/cfghooks.h:1980x1094081b cleanup_tree_cfg_noloop        ../../gcc/gcc/tree-cfgcleanup.c:8370x1094081b cleanup_tree_cfg()        ../../gcc/gcc/tree-cfgcleanup.c:8830x107bbfc7 execute_function_todo        ../../gcc/gcc/passes.c:19220x107bcd53 do_per_function        ../../gcc/gcc/passes.c:16530x107bcfd3 execute_todo        ../../gcc/gcc/passes.c:2023",CLOSED          FIXED      
80707,Peter Bergner,[8 Regression] r247844 causes error: extra outgoing edge,Since r247844:trippels@gcc2-power8 ~ % cat tzfmt.iistruct A {  int m_fn1(int &) const;};int A::m_fn1(int &p1) const {  int a[6];  int b = 0;  for (int i;; i++) {    if (a[i])      break;    b++;  }  while (b) {    int c;    switch (b) {    case 1:      c = 0;      break;    case 5:      c = a[0];    }    if (c)      p1 = 0;    b--;  }}trippels@gcc2-power8 ~ % g++ -c -O3 tzfmt.iitzfmt.ii: In member function ‘int A::m_fn1(int&) const’:tzfmt.ii:4:5: error: extra outgoing edge 43->33 int A::m_fn1(int &p1) const {     ^tzfmt.ii:4:5: error: extra outgoing edge 44->33tzfmt.ii:4:5: internal compiler error: verify_flow_info failed0x105d8db3 verify_flow_info()        ../../gcc/gcc/cfghooks.c:2600x10bb613b checking_verify_flow_info        ../../gcc/gcc/cfghooks.h:1980x10bb613b cleanup_tree_cfg_noloop        ../../gcc/gcc/tree-cfgcleanup.c:8370x10bb613b cleanup_tree_cfg()        ../../gcc/gcc/tree-cfgcleanup.c:8830x10a3c147 execute_function_todo        ../../gcc/gcc/passes.c:19210x10a3ced3 do_per_function        ../../gcc/gcc/passes.c:16520x10a3d153 execute_todo        ../../gcc/gcc/passes.c:2018,CLOSED          FIXED      
80246,Peter Bergner,Builtin's for POWER's dxex[q] and diex[q] use the wrong types,"The DFP builtins for extract exponent (dxex and dxexq) return a decimal float type when the actual value returned by the hardware instructions is a 64-bit signed binary integer (albeit in a FP register).  The return type of the builtins should match the type of the value returned and not register type it is returned in, since moving the return value when it's in a FP variable to an integer variable produces bad and/or incorrect code.A similar issue affects the DFP insert exponent builtins (diex, diexq), but this time it is related to using the wrong type for the input argument that represents the exponent.",CLOSED          FIXED      
78516,Peter Bergner,[7 Regression] ICE in lra_assign for e500v2,"Running gcc and g++ tests for powerpc-linux-gnuspe --enable-e500-double shows the following ICE (177 times in the logs, but the output of each such failing test appears more than once in the logs; this appears to be the biggest group of failures in the test results).  Compile the following reduced test (which compiles OK with GCC 6 branch) with -O0 or -O1 to see the ICE.extern void exit (int);extern void abort (void);volatile double inf_cst = __builtin_inf ();volatile double neg0 = -0.0, one = 1.0;intmain (void){  volatile double r;  if (!__builtin_isinf (inf_cst))    abort ();  r = __builtin_copysign (one, neg0);  exit (0);}ice.i: In function 'main':ice.i:15:1: internal compiler error: in lra_assign, at lra-assigns.c:1612 } ^0x9bdfb8 lra_assign()        /scratch/jmyers/glibc/many7/src/gcc/gcc/lra-assigns.c:16120x9b8b9d lra(_IO_FILE*)        /scratch/jmyers/glibc/many7/src/gcc/gcc/lra.c:24220x96deb1 do_reload        /scratch/jmyers/glibc/many7/src/gcc/gcc/ira.c:53810x96deb1 execute        /scratch/jmyers/glibc/many7/src/gcc/gcc/ira.c:5565Please submit a full bug report,with preprocessed source if appropriate.Please include the complete backtrace with any bug report.See <http://gcc.gnu.org/bugs.html> for instructions.",RESOLVED          FIXED      
77416,Peter Bergner,[7 Regression] LRA rematerializing use of CA reg across function call,"Created attachment 39521 [details]reduced testcaseCPU2006 benchmark 445.gobmk started failing verification of output starting with r239105 (switch rs6000 port to LRA). I tracked it down to code where LRA is rematerializing the use of the CA reg across a function call, which is not valid since a call can clobber it.Before the switch to LRA we saw the following code:        addic 9,9,-1        addze 9,16        stw 9,492(1)... code with function call(s)        lwz 9,492(1)After LRA switch the code looks like this:        addic 9,9,-1        addze 9,16        stw 9,492(1)... code with function call(s)        addze 9,16Compile options for reduced testcase: gcc -S -O2 -m32 -mcpu=power7",RESOLVED          FIXED      
77289,Peter Bergner,"[7 Regression] ICE in extract_constrain_insn, at recog.c:2212 on powerpc64","Following ICE hit while building 456.hmmer from cpu2006. Bisected to r239105.[pthaugen@igoo delta]$ cat modelmakers.ctypedef struct msa_struct{  int alen;  int nseq;}MSA;extern int Alphabet_size;double log (double);float FDot (float *, float *, int);void free (void *);voidP7Maxmodelmaker (MSA * msa, float *null){  int idx;  int i, j;  int x;  float **matc;  float cij[8], tij[8];  float insp[20];  float insc[20];  float *sc;  int first, last;  float new, bestsc;  int code;  for (x = 0; x < Alphabet_size; x++)    insp[x] =      ((insp[x] / null[x]) >       0 ? log (insp[x] / null[x]) * 1.44269504 : -9999.);  for (last = msa->alen; i > 0; i--)    {      for (idx = 0; idx < msa->nseq; j++)	{	  if (code == 1)	    {	      new =		sc[j] + FDot (tij, cij, 7) + FDot (insp, insc, Alphabet_size);	    }	}    }  for (i = 1; i <= msa->alen; i++)    free (matc[i]);}[pthaugen@igoo delta]$ ~/install/gcc/trunk/bin/gcc -c -m32 -O3 -mcpu=power7 -funroll-loops -ffast-math modelmakers.cmodelmakers.c: In function 'P7Maxmodelmaker':modelmakers.c:42:1: error: insn does not satisfy its constraints: } ^(insn 452 451 453 3 (parallel [            (set (reg:SF 61 29 [orig:258 MEM[base: _68, offset: 0B] ] [258])                (mem:SF (plus:SI (reg/f:SI 1 1)                        (const_int 88 [0x58])) [1 MEM[base: _68, offset: 0B]+0 S4 A32]))            (set (reg:SI 31 31 [orig:328 ivtmp.25 ] [328])                (plus:SI (reg/f:SI 1 1)                    (const_int 88 [0x58])))        ]) modelmakers.c:27 617 {*movsf_update1}     (nil))modelmakers.c:42:1: internal compiler error: in extract_constrain_insn, at recog.c:22120x107ce193 _fatal_insn(char const*, rtx_def const*, char const*, int, char const*)	/home/pthaugen/src/gcc/trunk/gcc/gcc/rtl-error.c:1080x107ce1eb _fatal_insn_not_found(rtx_def const*, char const*, int, char const*)	/home/pthaugen/src/gcc/trunk/gcc/gcc/rtl-error.c:1190x10792daf extract_constrain_insn(rtx_insn*)	/home/pthaugen/src/gcc/trunk/gcc/gcc/recog.c:22120x1066d10b check_rtl	/home/pthaugen/src/gcc/trunk/gcc/gcc/lra.c:21080x106710bb lra(_IO_FILE*)	/home/pthaugen/src/gcc/trunk/gcc/gcc/lra.c:25160x10615317 do_reload	/home/pthaugen/src/gcc/trunk/gcc/gcc/ira.c:53850x10615317 execute	/home/pthaugen/src/gcc/trunk/gcc/gcc/ira.c:5569Please submit a full bug report,with preprocessed source if appropriate.Please include the complete backtrace with any bug report.See <http://gcc.gnu.org/bugs.html> for instructions.",RESOLVED          FIXED      
71733,Peter Bergner,ICE in vmx test cases with -mcpu=power9,"Created attachment 38817 [details]preprocessed test casetested against 237922:genoa 8839 -> /home/sawdey/src/gcc/trunk2/build/gcc/xgcc -B/home/sawdey/src/gcc/trunk2/build/gcc/ vmx_1b-04.i -mcpu=power9 -fno-diagnostics-show-caret -fdiagnostics-color=never -O0 -maltivec -mabi=altivec -std=gnu99 -mno-vsx -lm -o ./1b-04.exe/home/sawdey/src/gcc/trunk/gcc/gcc/testsuite/gcc.dg/vmx/1b-04.c: In function âmainâ:/home/sawdey/src/gcc/trunk/gcc/gcc/testsuite/gcc.dg/vmx/1b-04.c:7:1: error: insn does not satisfy its constraints:(insn 20 5 31 (set (mem/c:V16QI (plus:DI (reg/f:DI 31 31)                (const_int 64 [0x40])) [0  S16 A128])        (reg:V16QI 77 0 [157])) /home/sawdey/src/gcc/trunk/gcc/gcc/testsuite/gcc.dg/vmx/1b-04.c:5 1205 {*altivec_movv16qi}     (nil))/home/sawdey/src/gcc/trunk/gcc/gcc/testsuite/gcc.dg/vmx/1b-04.c:7:1: internal compiler error: in extract_constrain_insn_cached, at recog.c:22230x10833bf3 _fatal_insn(char const*, rtx_def const*, char const*, int, char const*)        ../../trunk/gcc/rtl-error.c:1080x10833c57 _fatal_insn_not_found(rtx_def const*, char const*, int, char const*)        ../../trunk/gcc/rtl-error.c:1190x107fa273 extract_constrain_insn_cached(rtx_insn*)        ../../trunk/gcc/recog.c:22230x10e15327 insn_default_length(rtx_insn*)        ../../trunk/gcc/config/rs6000/rs6000.md:64240x104da113 shorten_branches(rtx_insn*)        ../../trunk/gcc/final.c:11840x104da3d3 rest_of_handle_shorten_branches        ../../trunk/gcc/final.c:45370x104da3d3 execute        ../../trunk/gcc/final.c:4566",RESOLVED          FIXED      
71656,Peter Bergner,ICE in reload when generating code for -mcpu=power9 -mpower9-dform-vector,"The following test case ICEs when generating code for POWER9 vector dform addressing and reload.  It compiles fine when using LRA:bergner@genoa:~/gcc/BUGS/RELOAD$ cat bug.i typedef __attribute__((altivec(vector__))) int type_t;type_tfn1 (type_t *src){  asm volatile (""# force the base reg on the load below to be spilled""                   : /* no outputs */                   : /* no inputs */                   : ""r0"", ""r1"", ""r3"", ""r4"", ""r5"", ""r6"", ""r7"",                     ""r8"", ""r9"", ""r10"", ""r11"", ""r12"", ""r13"", ""r14"", ""r15"",                     ""r16"", ""r17"", ""r18"", ""r19"", ""r20"", ""r21"", ""r22"", ""r23"",                     ""r24"", ""r25"", ""r26"", ""r27"", ""r28"", ""r29"", ""r30"", ""r31"");  return src[1];}bergner@genoa:~/gcc/BUGS/RELOAD$ /home/bergner/gcc/build/gcc-fsf-mainline-vec-dform-base/gcc/xgcc -B/home/bergner/gcc/build/gcc-fsf-mainline-vec-dform-base/gcc -S -O1 -mcpu=power9 -mpower9-dform-vector -mno-lra bug.i bug.i:1:0: warning: -mpower9-dform-vector might need -mlra typedef __attribute__((altivec(vector__))) int type_t; bug.i: In function ‘fn1’:bug.i:13:1: error: insn does not satisfy its constraints: } ^(insn 12 7 13 2 (set (reg/i:V4SI 79 2)        (mem:V4SI (plus:DI (mem/c:DI (plus:DI (reg/f:DI 113 sfp)                        (const_int 32 [0x20])) [2 %sfp+32 S8 A64])                (const_int 16 [0x10])) [1 MEM[(type_t *)src_2(D) + 16B]+0 S16 A128])) bug.i:13 946 {*vsx_movv4si_64bit}     (nil))bug.i:13:1: internal compiler error: in extract_constrain_insn, at recog.c:2211The problem is that rs6000_legitimize_reload_address() does not have any support for POWER9 vector dform addresses.",RESOLVED          FIXED      
71698,Peter Bergner,ICE related to decimal float when compiling with -mcpu=power9,"There are a number of these that fell out when running a make check with -mcpu=power9. The common pattern seems to involve decimal float and looks like this:Executing on host: /home/sawdey/src/gcc/build-regtest/gcc/xgcc -B/home/sawdey/src/gcc/build-regtest/gcc/  -mcpu=power9 -Wl,-rpath=/tmp/lib64 -fno-diagnostics-show-caret -fdiagnostics-color=never    -c -o c_compat_x_tst.o /home/sawdey/src/gcc/trunk/gcc/gcc/testsuite/gcc.dg/compat//scalar-by-value-dfp_x.c    (timeout = 3600)spawn /home/sawdey/src/gcc/build-regtest/gcc/xgcc -B/home/sawdey/src/gcc/build-regtest/gcc/ -mcpu=power9 -Wl,-rpath=/tmp/lib64 -fno-diagnostics-show-caret -fdiagnostics-color=never -c -o c_compat_x_tst.o /home/sawdey/src/gcc/trunk/gcc/gcc/testsuite/gcc.dg/compat//scalar-by-value-dfp_x.c/home/sawdey/src/gcc/trunk/gcc/gcc/testsuite/gcc.dg/compat//scalar-by-value-dfp_x.c: In function 'testitd128':/home/sawdey/src/gcc/trunk/gcc/gcc/testsuite/gcc.dg/compat//scalar-by-value-dfp_x.c:149:1: internal compiler error: Segmentation fault0x108b93f3 crash_signal        ../../trunk/gcc/gcc/toplev.c:3350x1047445c mark_label_nuses        ../../trunk/gcc/gcc/emit-rtl.c:36120x1047456f mark_label_nuses        ../../trunk/gcc/gcc/emit-rtl.c:36200x1047eaeb try_split(rtx_def*, rtx_insn*, int)        ../../trunk/gcc/gcc/emit-rtl.c:38090x107efe97 split_insn        ../../trunk/gcc/gcc/recog.c:28870x107f7357 split_all_insns_noflow()        ../../trunk/gcc/gcc/recog.c:3026Please submit a full bug report,with preprocessed source if appropriate.Please include the complete backtrace with any bug report.See <http://gcc.gnu.org/bugs.html> for instructions.testsuite/gcc.dg/compat//scalar-return-dfp_x.c:88:1In file included from /home/sawdey/src/gcc/build-regtest/gcc/testsuite/gcc/gcc.dg-struct-layout-1//t001_y.c:8:0:/home/sawdey/src/gcc/build-regtest/gcc/testsuite/gcc/gcc.dg-struct-layout-1//t001_test.h: In function 'check5':/home/sawdey/src/gcc/trunk/gcc/gcc/testsuite/gcc.dg/compat/struct-layout-1_y1.h:48:8: internal compiler error: Segmentation fault/home/sawdey/src/gcc/trunk/gcc/gcc/testsuite/gcc.dg/compat/struct-layout-1.h:777:27: note: in expansion of macro 'TX'/home/sawdey/src/gcc/build-regtest/gcc/testsuite/gcc/gcc.dg-struct-layout-1//t001_test.h:6:1: note: in expansion of macro 'T'In file included from /home/sawdey/src/gcc/build-regtest/gcc/testsuite/gcc/gcc.dg-struct-layout-1//t002_y.c:8:0:/home/sawdey/src/gcc/build-regtest/gcc/testsuite/gcc/gcc.dg-struct-layout-1//t002_test.h: In function 'check351':/home/sawdey/src/gcc/trunk/gcc/gcc/testsuite/gcc.dg/compat/struct-layout-1_y1.h:48:8: internal compiler error: Segmentation fault/home/sawdey/src/gcc/trunk/gcc/gcc/testsuite/gcc.dg/compat/struct-layout-1.h:777:27: note: in expansion of macro 'TX'/home/sawdey/src/gcc/build-regtest/gcc/testsuite/gcc/gcc.dg-struct-layout-1//t002_test.h:52:1: note: in expansion of macro 'T'In file included from /home/sawdey/src/gcc/build-regtest/gcc/testsuite/gcc/gcc.dg-struct-layout-1//t028_y.c:8:0:/home/sawdey/src/gcc/build-regtest/gcc/testsuite/gcc/gcc.dg-struct-layout-1//t028_test.h: In function 'check2828':/home/sawdey/src/gcc/trunk/gcc/gcc/testsuite/gcc.dg/compat/struct-layout-1_y1.h:48:8: internal compiler error: Segmentation fault/home/sawdey/src/gcc/trunk/gcc/gcc/testsuite/gcc.dg/compat/struct-layout-1.h:777:27: note: in expansion of macro 'TX'/home/sawdey/src/gcc/build-regtest/gcc/testsuite/gcc/gcc.dg-struct-layout-1//t028_test.h:29:1: note: in expansion of macro 'T'/home/sawdey/src/gcc/trunk/gcc/gcc/testsuite/c-c++-common/dfp/func-vararg-dfp.c:95:1/home/sawdey/src/gcc/trunk/gcc/gcc/testsuite/c-c++-common/dfp/func-vararg-mixed.c:102:1/home/sawdey/src/gcc/trunk/gcc/gcc/testsuite/c-c++-common/dfp/pr36800.c:32:1/home/sawdey/src/gcc/trunk/gcc/gcc/testsuite/g++.dg/compat/decimal//pass_x.h: In function 'void testitd128()':/home/sawdey/src/gcc/trunk/gcc/gcc/testsuite/g++.dg/compat/decimal//pass_x.h:145:1: internal compiler error: Segmentation fault/home/sawdey/src/gcc/trunk/gcc/gcc/testsuite/g++.dg/compat/decimal//pass_x.h:149:1: note: in expansion of macro 'T'In file included from /home/sawdey/src/gcc/trunk/gcc/gcc/testsuite/g++.dg/compat/decimal//pass-2_x.C:1:0:/home/sawdey/src/gcc/trunk/gcc/gcc/testsuite/g++.dg/compat/decimal//decimal-dummy.h: In function 'std::decimal::decimal128 std::decimal::operator+(std::decimal::decimal128, std::decimal::decimal128)':/home/sawdey/src/gcc/trunk/gcc/gcc/testsuite/g++.dg/compat/decimal//decimal-dummy.h:50:3: internal compiler error: Segmentation faultIn file included from /home/sawdey/src/gcc/trunk/gcc/gcc/testsuite/g++.dg/compat/decimal//pass-2_y.C:1:0:/home/sawdey/src/gcc/trunk/gcc/gcc/testsuite/g++.dg/compat/decimal//decimal-dummy.h: In function 'std::decimal::decimal128 std::decimal::operator+(std::decimal::decimal128, std::decimal::decimal128)':/home/sawdey/src/gcc/trunk/gcc/gcc/testsuite/g++.dg/compat/decimal//decimal-dummy.h:50:3: internal compiler error: Segmentation faultIn file included from /home/sawdey/src/gcc/trunk/gcc/gcc/testsuite/g++.dg/compat/decimal//pass-3_x.C:5:0:/home/sawdey/src/gcc/trunk/gcc/gcc/testsuite/g++.dg/compat/decimal//pass_x.h: In function 'void testitd128()':/home/sawdey/src/gcc/trunk/gcc/gcc/testsuite/g++.dg/compat/decimal//pass_x.h:145:1: internal compiler error: Segmentation fault/home/sawdey/src/gcc/trunk/gcc/gcc/testsuite/g++.dg/compat/decimal//pass_x.h:149:1: note: in expansion of macro 'T'In file included from /home/sawdey/src/gcc/trunk/gcc/gcc/testsuite/g++.dg/compat/decimal//pass-3_y.C:1:0:/home/sawdey/src/gcc/trunk/gcc/gcc/testsuite/g++.dg/compat/decimal//decimal-dummy.h: In function 'std::decimal::decimal128 std::decimal::operator+(std::decimal::decimal128, std::decimal::decimal128)':/home/sawdey/src/gcc/trunk/gcc/gcc/testsuite/g++.dg/compat/decimal//decimal-dummy.h:50:3: internal compiler error: Segmentation fault0",RESOLVED          FIXED      
67281,Peter Bergner,HTM builtins aren't treated as compiler barriers on powerpc,"Depending on the level of optimization, GCC moves a memory access outside a transaction which breaks the atomicity of the transaction.This is a small testcase that reproduces this behavior:$ cat tbegin-barrier.clongfoo (long dest, long src0, long src1, long tries){  long i;  for (i = 0; i < tries; i++)    {      __builtin_tbegin (0);      dest = src0 + src1;      __builtin_tend (0);    }  return dest;}compiling using: -O2 -S -mcpu=power8 tbegin-barrier.cgivesfoo:        cmpdi 0,6,0        blelr 0        mtctr 6        add 3,4,5        .p2align 4,,15.L3:        tbegin. 0        tend. 0        bdnz .L3        blr",CLOSED          FIXED      
68872,Peter Bergner,#NAME?,"This results in failures assembling ""mfcr r,mask"" and also wrong ""at"" branch hints.  See https://sourceware.org/bugzilla/show_bug.cgi?id=19359 for a testcase.",CLOSED          FIXED      
67808,Peter Bergner,LRA ICEs on simple double to long double conversion test case,"During a conversion from double to long double, LRA ends up going into a infinite loop spilling things until it hits a threshold and quits with an ICE.  The simplest test case I have at the moment is:bergner@genoa:~/gcc/BUGS/LRA/20011123-1$ cat bug2.ivoidfoo (long double *ldb1, double *db1){  *ldb1 = *db1;}bergner@genoa:~/gcc/BUGS/LRA/20011123-1$ /home/bergner/gcc/build/gcc-fsf-mainline-bootstrap-lra-default-debug/gcc/xgcc -B/home/bergner/gcc/build/gcc-fsf-mainline-bootstrap-lra-default-debug/gcc/ -S -O1 -mvsx -S bug2.ibug2.i: In function âfooâ:bug2.i:5:1: internal compiler error: Max. number of generated reload insns per insn is achieved (90) } ^0x10962903 lra_constraints(bool)	/home/bergner/gcc/gcc-fsf-mainline-bootstrap-lra-default/gcc/lra-constraints.c:43510x10942af7 lra(_IO_FILE*)	/home/bergner/gcc/gcc-fsf-mainline-bootstrap-lra-default/gcc/lra.c:22980x108c0ac7 do_reload	/home/bergner/gcc/gcc-fsf-mainline-bootstrap-lra-default/gcc/ira.c:53910x108c1183 execute	/home/bergner/gcc/gcc-fsf-mainline-bootstrap-lra-default/gcc/ira.c:5562After IRA, things are pretty simple, with just the following one insn which needsa reload/spill, since we don't have memory to memory ops on POWER:(insn 7 4 10 2 (parallel [            (set (mem:TF (reg:DI 3 3 [ ldb1 ]) [0 *ldb1_5(D)+0 S16 A128])                (float_extend:TF (mem:DF (reg:DI 4 4 [ db1 ]) [0 *db1_2(D)+0 S8 A64])))            (use (const_double:DF 0.0 [0x0.0p+0]))        ]) bug2.i:4 445 {*extenddftf2_internal}     (expr_list:REG_DEAD (reg:DI 4 4 [ db1 ])        (expr_list:REG_DEAD (reg:DI 3 3 [ ldb1 ])            (nil))))In LRA, comes along and gives us the following which looks good:(insn 7 4 11 2 (parallel [            (set (reg:TF 159)                (float_extend:TF (mem:DF (reg:DI 4 4 [ db1 ]) [0 *db1_2(D)+0 S8 A64])))            (use (const_double:DF 0.0 [0x0.0p+0]))        ]) bug2.i:4 445 {*extenddftf2_internal}     (expr_list:REG_DEAD (reg:DI 4 4 [ db1 ])        (expr_list:REG_DEAD (reg:DI 3 3 [ ldb1 ])            (nil))))(insn 11 7 10 2 (set (mem:TF (reg:DI 3 3 [ ldb1 ]) [0 *ldb1_5(D)+0 S16 A128])        (reg:TF 159)) bug2.i:4 435 {*movtf_64bit_dm}     (nil))But reg 159 was allocated to a VSX_REG and we don't have a TFmode mov* pattern for vsx_reg -> fp_reg copy so we try to copy thru memory which is where we started, so we loop forever until we hit the reload limit and ICE.",CLOSED          FIXED      
64579,Peter Bergner,__TM_end __builtin_tend failed to return transactional state,Created attachment 34433 [details]simple testcase__TM_end returns the transactional state before the instruction tend but the attached testcase fails.It is the same if we use __builtin_tend instead of the XL macro.,RESOLVED          FIXED      
61415,Peter Bergner,PowerPC test gcc.target/powerpc/tfmode_off.c fails if -mlong-double-64,"The gcc.target/powerpc/tfmode_off.c test fails if long doubles are not 128-bit (i.e. -mlong-double-64 was used, or the compiler was not configured with the --with-long-double-128 option).  The test should have an #ifdef test so that it doesn't fail if long double default to 64-bits.",RESOLVED          FIXED      
58139,Peter Bergner,PowerPC volatile VSX register live across call,"void tightness3_intrinsics2(double* A, double* B, int N) { __vector double * vA = (__vector double*)A; __vector double * vB = (__vector double*)B; __vector double va0, va1; double b0, b1, b2, b3; va0 = vA[0]; va1 = vA[1]; b0 = log(vec_extract(va0, 0)); b1 = log(vec_extract(va0, 1)); b2 = log(vec_extract(va1, 0)); b3 = log(vec_extract(va1, 1)); __vector double vb0 = {b0, b1}; __vector double vb1 = {b2, b3}; vB[0] = vb0; vB[1] = vb1;}         xxpermdi 1,63,63,2         xxpermdi 30,30,29,0         bl log         nop         addi 1,1,192         li 0,-80         stxvd2x 30,0,30GCC should not expect VSX 30 to be preserved across the call to log().",RESOLVED          FIXED      
61193,Peter Bergner,ABI incompatibility between POWER and Z HTM builtins and intrinsics,"An ABI incompatibility between POWER and Z HTM builtins and intrinsics has been found.  The incompatibility is on mainline, 4.9 and 4.8.  We're still waiting to hear what the XL team has implemented for their return status.  Does the XL on POWER and Z match the POWER or Z sematics?  Does XL on POWER match GCC on POWER and XL on Z match GCC on Z?  We're tracking that answer down now.  The intent was that common code on all platforms and compilers would have the same ABI.",RESOLVED          FIXED      
54036,Peter Bergner,Negating a DFP NAN in C++ produces NAN not -NAN,"When negating a DFP NaN, we produce another NaN and not a -NaN like we do when using a C test case or with binary floating point (C or C++).  This happens on both my power64-linux and x86_64-linux systems.bergner@bns:~> cat dfp-nan.C #include <stdio.h>#include <decimal/decimal>using namespace std;decimal::decimal64my_nan (void){  decimal::decimal64 z = 0.0DD;  decimal::decimal64 v = z/z;  return v;}intmain (void){  decimal::decimal64 v;  v = my_nan ();  printf (""value is %Dg\n"", v);  v = -v;  printf (""-value is %Dg\n"", v);  return 0;}bergner@bns:~> g++ dfp-nan.C -ldfpbergner@bns:~> ./a.out value is nan-value is nanThe problem seems to be due to the following lines in libstdc++-v3/include/decimal/decimal.h:#define _DEFINE_DECIMAL_UNARY_OP(_Op, _Tp)      \  inline _Tp operator _Op(_Tp __rhs)            \  {                                             \    _Tp __tmp;                                  \    __tmp.__setval(0 _Op __rhs.__getval());     \    return __tmp;                               \  }  _DEFINE_DECIMAL_UNARY_OP(+, decimal32)  _DEFINE_DECIMAL_UNARY_OP(+, decimal64)  _DEFINE_DECIMAL_UNARY_OP(+, decimal128)  _DEFINE_DECIMAL_UNARY_OP(-, decimal32)  _DEFINE_DECIMAL_UNARY_OP(-, decimal64)  _DEFINE_DECIMAL_UNARY_OP(-, decimal128)This causes us to compute a ""0 - nan"" rather than a ""-nan"" and ""0 - nan"" will not produce a -nan.  The following change fixes the problem for me:-    __tmp.__setval(0 _Op __rhs.__getval());	\+    __tmp.__setval(_Op __rhs.__getval());	\",RESOLVED          FIXED      
52497,Peter Bergner,libffi doesn't build on powerpc64-linux after latest upstream merge,"libffi/powerpc/ffi.c fails to build on powerpc64-linux with the following errors:libtool: compile:  /home/bergner/gcc/build/gcc-mainline-libffi/./gcc/xgcc -B/home/bergner/gcc/build/gcc-mainline-libffi/./gcc/ -B/home/bergner/gcc/install/gcc-mainline-libffi/powerpc64-linux/bin/ -B/home/bergner/gcc/install/gcc-mainline-libffi/powerpc64-linux/lib/ -isystem /home/bergner/gcc/install/gcc-mainline-libffi/powerpc64-linux/include -isystem /home/bergner/gcc/install/gcc-mainline-libffi/powerpc64-linux/sys-include -DHAVE_CONFIG_H -I. -I/home/bergner/gcc/gcc-mainline-testsuite-base/libffi -I. -I/home/bergner/gcc/gcc-mainline-testsuite-base/libffi/include -Iinclude -I/home/bergner/gcc/gcc-mainline-testsuite-base/libffi/src -Wall -g -fexceptions -g -O2 -m32 -fPIC -mstrict-align -MT src/powerpc/ffi.lo -MD -MP -MF src/powerpc/.deps/ffi.Tpo -c /home/bergner/gcc/gcc-mainline-testsuite-base/libffi/src/powerpc/ffi.c  -fPIC -DPIC -o src/powerpc/.libs/ffi.o/home/bergner/gcc/gcc-mainline-testsuite-base/libffi/src/powerpc/ffi.c: In function ‘ffi_prep_args_SYSV’:/home/bergner/gcc/gcc-mainline-testsuite-base/libffi/src/powerpc/ffi.c:199:4: error: ‘double_tmp’ undeclared (first use in this function)/home/bergner/gcc/gcc-mainline-testsuite-base/libffi/src/powerpc/ffi.c:199:4: note: each undeclared identifier is reported only once for each function it appears in/home/bergner/gcc/gcc-mainline-testsuite-base/libffi/src/powerpc/ffi.c:215:6: error: label ‘soft_double_prep’ used but not defined/home/bergner/gcc/gcc-mainline-testsuite-base/libffi/src/powerpc/ffi.c: In function ‘ffi_closure_helper_SYSV’:/home/bergner/gcc/gcc-mainline-testsuite-base/libffi/src/powerpc/ffi.c:1135:8: error: ‘temp’ undeclared (first use in this function)make[7]: *** [src/powerpc/ffi.lo] Error 1The double_tmp and temp bugs are easy to fix with the following patch, but without knowing more about the missing label, I don't feel confident on where to place it.I checked the upstream libffi source and it fails the exact same way, so another merge won't help yet.Index: libffi/src/powerpc/ffi.c===================================================================--- libffi/src/powerpc/ffi.c	(revision 184944)+++ libffi/src/powerpc/ffi.c	(working copy)@@ -146,6 +146,7 @@ ffi_prep_args_SYSV (extended_cif *ecif,   gpr_base.u = stacktop.u - ASM_NEEDS_REGISTERS - NUM_GPR_ARG_REGISTERS;   intarg_count = 0; #ifndef __NO_FPRS__+  double double_tmp;   fpr_base.d = gpr_base.d - NUM_FPR_ARG_REGISTERS;   fparg_count = 0;   copy_space.c = ((flags & FLAG_FP_ARGUMENTS) ? fpr_base.c : gpr_base.c);@@ -1132,7 +1133,7 @@ ffi_closure_helper_SYSV (ffi_closure *cl  	  if (nf < 8) 	    {-	      temp = pfr->d;+	      double temp = pfr->d; 	      pfr->f = (float) temp; 	      avalue[i] = pfr; 	      nf++;",RESOLVED          FIXED      
52457,Peter Bergner,Wrong VSX code generation bug when compiled with -O1 -m32 -mcpu=power7,"The following test case aborts when compiled with -O1 and -O2, but runs successfully when compiled with -O0 and -O3.  The wrong code generation occurs in the function buggy_func().  The bug is caused by a typo in the rs600/vsx.md's vsx_set_<mode> pattern.bergner@igoo:~> cat bug.c extern void abort (void);typedef long long T;typedef T vl_t __attribute__((vector_size(2 * sizeof (T))));vl_tbuggy_func (T x){  vl_t w;  T *p = (T *)&w;  p[0] = p[1] = x;  return w;}intmain(void){  vl_t rval;  T *pl;  pl = (T *) &rval;  rval = buggy_func (2);  if (pl[0] != 2 || pl[1] != 2)    abort ();  return 0;}bergner@igoo:~> /home/bergner/gcc/build/gcc-mainline-testsuite/gcc/xgcc -B/home/bergner/gcc/build/gcc-mainline-testsuite/gcc/ -O0 -m32 -mcpu=power7 bug.c bergner@igoo:~> ./a.out bergner@igoo:~> /home/bergner/gcc/build/gcc-mainline-testsuite/gcc/xgcc -B/home/bergner/gcc/build/gcc-mainline-testsuite/gcc/ -O1 -m32 -mcpu=power7 bug.c bergner@igoo:~> ./a.out Aborted",RESOLVED          FIXED      
52140,Peter Bergner,Libdfp testcase encounters ICE when compiled with soft-dfp (no -mcpu).,"The following Libdfp test-case produces an ICE on PowerPC when compiled w/o -mcpu (implies soft-dfp) and -O1 or greater optimization:#ifndef __STDC_WANT_DEC_FP__#define __STDC_WANT_DEC_FP__#endifintfoo (_Decimal64 x, _Decimal64 y){  /* This is known to cause a GCC ICE when libdfp is compiled w/o -mcpu and -O1     optimization level or greater.  */  return (x < y) || (x > y);}int main(void){  int ret = -1;  _Decimal64 a = 12.45DD;  _Decimal64 b = 12.43DD;  ret = foo (a,b);  return 0;}/opt/at4.0/bin/gcc -v:Using built-in specs.COLLECT_GCC=/opt/at4.0/bin/gccCOLLECT_LTO_WRAPPER=/opt/at4.0/libexec/gcc/powerpc64-linux/4.5.4/lto-wrapperTarget: powerpc64-linuxConfigured with: /home/cseo/at4.0/at4.0-5/src/gcc/configure --build=powerpc64-linux --host=powerpc64-linux --target=powerpc64-linux --with-cpu=default64 --prefix=/opt/at4.0 --with-long-double-128 --enable-decimal-float --enable-secureplt --enable-threads=posix --enable-languages=c,c++,fortran --enable-__cxa_atexit --enable-shared --enable-checking --enable-lto --enable-gnu-indirect-function --with-gmp-include=/opt/at4.0/include --with-gmp-lib=/opt/at4.0/lib64 --with-mpfr-include=/opt/at4.0/include --with-mpfr-lib=/opt/at4.0/lib64 --with-mpc-include=/opt/at4.0/include --with-mpc-lib=/opt/at4.0/lib64 --with-ppl-include=/opt/at4.0/include --with-ppl-lib=/opt/at4.0/lib64 --with-cloog-include=/opt/at4.0/include --with-cloog-lib=/opt/at4.0/lib64 --with-libelf-include=/opt/at4.0/include --with-libelf-lib=/opt/at4.0/lib64 --with-host-libstdcxx='-L/opt/at4.0/lib64 -lstdc++ -lsupc++ -lppl -lppl_c -lpwl -lgmp -lgmpxx' --with-cpu=power4 --with-tune=power6Thread model: posixgcc version 4.5.4 20110524 (Advance-Toolchain-4.0-5) [ibm/gcc-4_5-branch revision 179810] (GCC)/opt/at4.0/bin/gcc  -DSHARED -O2 -fpic -g -m32   -c ../tests/test-GCC-PR.c -D__STDC_DEC_FP__=200704L -D__STDC_WANT_DEC_FP__=1 -DOPTION_EGLIBC_LOCALE_CODE=1 -D_POSIX_C_SOURCE=200809L -std=gnu99 -D_SVID_SOURCE -W -Wall -Wwrite-strings -Wstrict-prototypes -Wmissing-prototypes -Wold-style-definition -Wmissing-format-attribute -Wno-long-long -include ../include/libdfp-symbols.h -include ./config.h  -I../include  -I../dfp  -I../dfp/decimal  -I../libdecnumber/dpd  -I../libdecnumber  -I../sysdeps/powerpc/powerpc32  -I../sysdeps/powerpc/fpu/bits  -I../sysdeps/powerpc/fpu  -I../sysdeps/powerpc  -I../sysdeps/soft-dfp/dpd  -I../sysdeps/soft-dfp  -I../sysdeps/dpd  -I../decNumberMath/  -I../ieee754/  -I../base-math/  -I..  -I.  -o test-GCC-PR.os../tests/test-GCC-PR.c:30:1: warning: no previous prototype for 'foo'../tests/test-GCC-PR.c: In function 'foo':../tests/test-GCC-PR.c:34:3: internal compiler error: in prepare_float_lib_cmp, at optabs.c:4414I've attached the test-GCC-PR.i and test-GCC-PR.s files generated with --save-temps.",CLOSED          FIXED      
48053,Peter Bergner,"ICE in in build_int_cst_wide, when building cpu2000 galgel/equake/ammp/fma3d/sixtrack","Created attachment 23609 [details]reduced testcaseThe following ICE just showed up on my nightly spec runs.$ /home/pthaugen/install/gcc/trunk_debug/bin/gcc -c -m64 -O3 -mcpu=power7 -funroll-loops quake.c quake.c: In function ‘main’:quake.c:24:1: internal compiler error: in build_int_cst_wide, at tree.c:1226$ /home/pthaugen/install/gcc/trunk_debug/bin/gcc -vUsing built-in specs.COLLECT_GCC=/home/pthaugen/install/gcc/trunk_debug/bin/gccCOLLECT_LTO_WRAPPER=/home/pthaugen/install/gcc/trunk_debug/libexec/gcc/powerpc64-linux/4.6.0/lto-wrapperTarget: powerpc64-linuxConfigured with: /home/pthaugen/src/gcc/trunk/gcc/configure --prefix=/home/pthaugen/install/gcc/trunk_debug --target=powerpc64-linux --host=powerpc64-linux --build=powerpc64-linux --enable-secureplt --enable-threads=posix --enable-shared --enable-__cxa_atexit --with-long-double-128 --enable-decimal-float --disable-alsa --enable-checking --with-as=/opt/gcc-nightly/binutils-2.20/bin/as --with-ld=/opt/gcc-nightly/binutils-2.20/bin/ld --with-lto --with-libelf=/opt/gcc-nightly/gcc-host-libs --with-gmp=/opt/gcc-nightly/gcc-host-libs --with-mpfr=/opt/gcc-nightly/gcc-host-libs --with-mpc=/opt/gcc-nightly/gcc-host-libs --enable-languages=c --disable-bootstrapThread model: posixgcc version 4.6.0 20110309 (experimental) [trunk revision 170818] (GCC) Breakpoint 1, build_int_cst_wide (type=0xfffb0f011b8, low=18446744073709551615, hi=-1)    at /home/pthaugen/src/gcc/trunk/gcc/gcc/tree.c:12261226          gcc_unreachable ();(gdb) prt type <real_type 0xfffb0f011b8 double sizes-gimplified DF    size <integer_cst 0xfffb0e10780 type <integer_type 0xfffb0f000a8 bit_size_type> constant 64>    unit size <integer_cst 0xfffb0e107a8 type <integer_type 0xfffb0f00000 long unsigned int> constant 8>    align 64 symtab 0 alias set 2 canonical type 0xfffb0f011b8 precision 64    pointer_to_this <pointer_type 0xfffb0f013b0>>(gdb) p /x low$2 = 0xffffffffffffffff(gdb) p /x hi$3 = 0xffffffffffffffff(gdb) p TREE_CODE(type)$4 = REAL_TYPE(gdb) bt#0  build_int_cst_wide (type=0xfffb0f011b8, low=18446744073709551615, hi=-1)    at /home/pthaugen/src/gcc/trunk/gcc/gcc/tree.c:1226#1  0x00000000103c4120 in make_tree (type=0xfffb0f011b8, x=0xfffb0e70460)    at /home/pthaugen/src/gcc/trunk/gcc/gcc/expmed.c:4960#2  0x00000000103c4268 in make_tree (type=0xfffb10ceb98, x=0xfffb0e79430)    at /home/pthaugen/src/gcc/trunk/gcc/gcc/expmed.c:4991#3  0x0000000010bc5d7c in force_const_mem (mode=V2DFmode, x=0xfffb0e79430)    at /home/pthaugen/src/gcc/trunk/gcc/gcc/varasm.c:3543#4  0x00000000103d7230 in emit_move_insn (x=0xfffb0edba40, y=0xfffb0e79430)    at /home/pthaugen/src/gcc/trunk/gcc/gcc/expr.c:3368#5  0x0000000010bea40c in rs6000_expand_vector_init (target=0xfffb0edba40, vals=0xfffb0e79420)    at /home/pthaugen/src/gcc/trunk/gcc/gcc/config/rs6000/rs6000.c:5299#6  0x0000000010e20898 in gen_vec_initv4si (operand0=0xfffb0edba40, operand1=0xfffb0e79420)    at /home/pthaugen/src/gcc/trunk/gcc/gcc/config/rs6000/vector.md:658#7  0x0000000010e2630c in gen_split_2212 (curr_insn=0xfffb10097e0, operands=0x1160a8b8)    at /home/pthaugen/src/gcc/trunk/gcc/gcc/config/rs6000/altivec.md:246#8  0x0000000010f3e460 in split_14 (x0=0xfffb0e99930, insn=0xfffb10097e0)    at /home/pthaugen/src/gcc/trunk/gcc/gcc/config/rs6000/altivec.md:229#9  0x0000000010f404f0 in split_insns (x0=0xfffb0e99930, insn=0xfffb10097e0)    at /home/pthaugen/src/gcc/trunk/gcc/gcc/config/rs6000/dfp.md:480#10 0x000000001038c980 in try_split (pat=0xfffb0e99930, trial=0xfffb10097e0, last=1)    at /home/pthaugen/src/gcc/trunk/gcc/gcc/emit-rtl.c:3415#11 0x00000000106dcf9c in split_insn (insn=0xfffb10097e0)    at /home/pthaugen/src/gcc/trunk/gcc/gcc/recog.c:2781#12 0x00000000106dd5bc in split_all_insns ()    at /home/pthaugen/src/gcc/trunk/gcc/gcc/recog.c:2870#13 0x00000000106e0700 in rest_of_handle_split_before_sched2 ()    at /home/pthaugen/src/gcc/trunk/gcc/gcc/recog.c:3811...",RESOLVED          FIXED      
47525,Peter Bergner,DCE fails to eliminate a dead call to a pure function when compiled with -maltivec,"The dead code eliminator is failing to eliminate a call to a dead pure function when compiled with -maltivec.  The test case looks like (it's a slightly modified pr42461.c, so that older compilers that don't support __builtin_unreachable() can compile it):bergner@igoo:~/> cat pr42461-2.cextern int link_failure (int) __attribute__ ((pure));extern void no_return (void) __attribute__ ((noreturn,pure));intmain (void){  if (link_failure (0) < 1)    no_return ();  return 0;}This compiles fine with GCC 4.3, but fails with GCC 4.4, 4.5 and trunk with the following error message:bergner@igoo:~/> gcc -O2 -maltivec pr42461-2.c/tmp/ccUy2BCz.o:(.text+0x10): undefined reference to `link_failure'collect2: ld returned 1 exit status",RESOLVED          FIXED      
44195,Peter Bergner,[4.6 regression] gcc.dg/lto/20100518 c_lto_20100518_0.o,"On Linux/ia64,gcc.dg/lto/20100518 c_lto_20100518_0.o failedwithExecuting on host: /export/gnu/import/svn/gcc-test/bld/gcc/xgcc -B/export/gnu/import/svn/gcc-test/bld/gcc/  -O0 -fwhopr  -c  -o c_lto_20100518_0.o /export/gnu/import/svn/gcc-test/src-4.5/gcc/testsuite/gcc.dg/lto/20100518_0.c    (timeout = 300)/tmp/cc4SDnj1.s: Assembler messages:^M/tmp/cc4SDnj1.s:109: Error: Unknown opcode `decl [r14]'^M/tmp/cc4SDnj1.s:109: Error: Unknown opcode `jnz .L2'^Mcompiler exited with status 1They aren't ia64 instructions.",RESOLVED          FIXED      
42427,Peter Bergner,[4.5 Regression] invalid assembly code for 301.apsi for -fnon-call-exceptions,"GCC trunk gets a ICE when building SPEC CPU2000 test 301.apsi with ""-O2 -fnon-call-exceptions -fpeel-loops -fexceptions"", as demonstrated by this minimized testcase:      SUBROUTINE TEST(HELP,WM,NZ)      IMPLICIT REAL*8 (A-H, O-Z)      REAL*8 HELP(NZ)      COMPLEX*16 WM(NZ)      DO K=1,NZ         ZNEW=ABS(WM(K))         ZOLD=HELP(K)         HELP(K)=ZNEW      ENDDO      RETURN      ENDelm3b149% /home/janis/tools/gcc-trunk-anonsvn/bin/gfortran -c -O2 -fexceptions -fnon-call-exceptions -fpeel-loops bug.f/tmp/ccZKTZkM.s: Assembler messages:/tmp/ccZKTZkM.s:38: Error: syntax error; found `,' but expected `('/tmp/ccZKTZkM.s:38: Error: junk at end of line: `,3The assembly code here is:        lwz 4,4(9)        lwz 3,9,3           <---- line 38        lwz 5,8(9)        lwz 6,12(9)        bl cabsThe failure begins with this patch:    http://gcc.gnu.org/viewcvs?view=rev&rev=154688    r154688 | bernds | 2009-11-26 21:41:42 +0000 (Thu, 26 Nov 2009)I ran into this by running CPU2000 with a number of sets of options generated by a tool called allpairs.",RESOLVED          FIXED      
35373,Peter Bergner,[4.4 Regression] bootstraping on powerpc with 128bit long double fails with revision 132578,"As reported in http://gcc.gnu.org/ml/gcc-patches/2008-02/msg01134.html, bootstraping on powerpc-apple-darwin9 fails with revision 132578:...libtool: compile:  /opt/gcc/darwin_buildw/./gcc/xgcc -B/opt/gcc/darwin_buildw/./gcc/ -B/opt/gcc/gcc4.4w/powerpc-apple-darwin9/bin/ -B/opt/gcc/gcc4.4w/powerpc-apple-darwin9/lib/ -isystem /opt/gcc/gcc4.4w/powerpc-apple-darwin9/include -isystem /opt/gcc/gcc4.4w/powerpc-apple-darwin9/sys-include -DHAVE_CONFIG_H -I. -I../../../gcc-4.4-work/libgfortran -I. -iquote../../../gcc-4.4-work/libgfortran/io -I../../../gcc-4.4-work/libgfortran/../gcc -I../../../gcc-4.4-work/libgfortran/../gcc/config -I../.././gcc -D_GNU_SOURCE -std=gnu99 -Wall -Wstrict-prototypes -Wmissing-prototypes -Wold-style-definition -Wextra -Wwrite-strings -g -O2 -MT maxloc1_4_r16.lo -MD -MP -MF .deps/maxloc1_4_r16.Tpo -c ../../../gcc-4.4-work/libgfortran/generated/maxloc1_4_r16.c  -fno-common -DPIC -o .libs/maxloc1_4_r16.o../../../gcc-4.4-work/libgfortran/generated/maxloc1_4_r16.c: In function 'mmaxloc1_4_r16':../../../gcc-4.4-work/libgfortran/generated/maxloc1_4_r16.c:220: internal compiler error: in memory_address, at explow.c:492Please submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.make[3]: *** [maxloc1_4_r16.lo] Error 1make[2]: *** [all] Error 2make[1]: *** [all-target-libgfortran] Error 2make: *** [all] Error 2The build completes if I remove the line 492 in explow.c.",RESOLVED          FIXED      
28690,Peter Bergner,[4.2 Regression] Performace problem with indexed load/stores on powerpc,"On some powerpc processors, it is very desirable for performance reasons, to have the base pointer for an indexed load/store insn to be in the rA position rather than the rB position (example insn shown below).    lwzx rD,rA,rBFor some test cases, we get this right, but for the following test case, we get it wrong (regardless of -m32 or -m64):int indexedload (int *x, int i){  return x[i];}Results in the following powerpc asm:indexedload:        slwi r4,r4,2        lwzx r3,r4,r3   # We want r3,r3,r4        blrDan Berlin tracked one problem down to the reassociation pass ignoring non integral types like pointers.  His patch (I'll let Dan attach it here) fixed the ordering of the address calc at the end of tree-ssa, but the rtl expanders seem to be undoing this change so we still end up with the wrong ordering on the lwzx insn.",RESOLVED          FIXED      
35867,Peter Bergner,[4.4 Regression]: gcc.target/i386/addr-sel-1.c,"With revision134001 , I gotExecuting on host: /export/build/gnu/gcc/build-x86_64-linux/gcc/xgcc -B/export/build/gnu/gcc/build-x86_64-linux/gcc/ /export/gnu/src/gcc/gcc/gcc/testsuite/gcc.target/i386/addr-sel-1.c   -O2 -mtune=i686 -fno-show-column -S  -m32 -o addr-sel-1.s    (timeout = 300)PASS: gcc.target/i386/addr-sel-1.c (test for excess errors)FAIL: gcc.target/i386/addr-sel-1.c scan-assembler a\\+1FAIL: gcc.target/i386/addr-sel-1.c scan-assembler b\\+1Revision 133981 is OK.",RESOLVED          FIXED      
35907,Peter Bergner,[4.3/4.4 Regression] 64-bit power6 glibc miscompilation,"build_trtable function from posix/regex.c is miscompiled on ppc64-linux with -mcpu=power6.  The $v31 register is used within the function and is therefore saved in prologue and restored in epilogue, but as the function uses alloca,it is restored from different memory slot than it was saved into.Options used:-fpreprocessed -quiet -m64 -mcpu=power6 -mno-minimal-toc -mnew-mnemonics -mlong-double-128 -g -O3 -std=gnu99 -fgnu89-inline -fasynchronous-unwind-tables -fmerge-all-constants -fpicThe interesting lines in the assembly are:.build_trtable:...        li 0,320...        stdu 1,-496(1)        stvx 31,1,0        mfvrsave 0        mr 31,1...        ld 0,0(1)...        stdu 0,-12304(1)...        li 0,320        lvx 31,1,0        ld 1,0(1)...        blrThe above is with the trunk gcc, but 4.3 is similar.Unlike this, gcc 4.1 saved the vector register early:        li 0,-176        stvx 31,1,0as first two insns in the routine, before first stdu, and restored after incrementing stack pointer back:        ld 1,0(1)        mr 3,0        li 0,-176        lwz 12,-148(1)        lvx 31,1,0So, with 4.1.x this works, but with 4.3/trunk $v31 will get the value of a memory slot 12304 bytes (i.e. the size of alloca) below where it was actually saved.",RESOLVED          FIXED      
35371,Peter Bergner,Missing REG_POINTER attribute causes bad indexed load/store operand ordering,"We fail to correctly order the operands for the indexed store within the loop below. This seems to be caused by a missing REG_POINTER attribute, so the code added for PR28690 doesn't have a chance of getting the ordering correct. An interesting thing is that if we replace the global array with an ""extern int *reg_values;"", then we get the ordering correct.bergner@etna:~/gcc/tests> cat a2-loop.c int reg_values[1024];voidclear_table (unsigned int n){  unsigned int i;  for (i = 0; i < n; i++)    reg_values[i] = 0;}The ""bad"" code gen looks like (using -O2 -S):clear_table:        cmpwi 0,3,0        beqlr- 0        lis 9,reg_values@ha        slwi 3,3,2        la 9,reg_values@l(9)        li 11,0        li 0,0        .p2align 4,,15.L3:        stwx 0,11,9        addi 11,11,4        cmpw 7,11,3        bne+ 7,.L3        blrIt's another question on why this isn't using an update form store and branch on count loop, to halve the size of the loop.  The loop size is particularly glaring when you use -O2 -funroll-loops, then we get 8 indexed stores (all with the wrong operand order) and 8 addi's...but I guess that's for another bugzilla.",RESOLVED          FIXED      
34814,Peter Bergner,SDmode function args not passed according to ABI specification,"Currently, SDmode (_Decimal32) types are not passed to and returned from functions in FP registers as mandated by the ABI.  Instead, they are passed via the integer registers.  This bugzilla will be used for tracking my work on fixing this.",RESOLVED          FIXED      
33796,Peter Bergner,valgrind error with -O2 for linux kernel code,"I just tried to compile the Linux kernel 2.6.23.1with the GNU C compiler version 4.3 snapshot 20071012under valgrind.valgrind said  gcc -Wp,-MD,scripts/genksyms/.genksyms.o.d -Wall -Wstrict-prototypes -O2 -fomit-frame-pointer     -c -o scripts/genksyms/genksyms.o scripts/genksyms/genksyms.c==22718== Conditional jump or move depends on uninitialised value(s)==22718==    at 0xA7ECC3: global_conflicts (sparseset.h:90)==22718==    by 0xA52856: rest_of_handle_global_alloc (global.c:533)==22718==    by 0x643328: execute_one_pass (passes.c:1117)==22718==    by 0x6434FF: execute_pass_list (passes.c:1170)==22718==    by 0x643514: execute_pass_list (passes.c:1171)==22718==    by 0x71EA9F: tree_rest_of_compilation (tree-optimize.c:404)==22718==    by 0x89B7E1: cgraph_expand_function (cgraphunit.c:1060)==22718==    by 0x89DC4B: cgraph_optimize (cgraphunit.c:1123)==22718==    by 0x4160CD: c_write_global_declarations (c-decl.c:8077)==22718==    by 0x6C41DF: toplev_main (toplev.c:1052)==22718==    by 0x52BAAE3: (below main) (in /lib64/libc-2.5.so)==22718==Preprocessed source code attached. Flag -O2 required.",RESOLVED          FIXED      
30191,Peter Bergner,"[4.3 Regression] GCC error: in eliminate_regs_in_insn, at reload1.c:3126","/test/gnu/gcc/objdir/./prev-gcc/xgcc -B/test/gnu/gcc/objdir/./prev-gcc/ -B/opt/gnu/gcc/gcc-4.3.0/hppa2.0w-hp-hpux11.11/bin/ -c -g -O2 -mdisable-indexing     -gnatpg -gnata -I- -I. -Iada -I../../gcc/gcc/ada ../../gcc/gcc/ada/nlists.adb -o ada/nlists.o+===========================GNAT BUG DETECTED==============================+| 4.3.0 20061212 (experimental) (hppa2.0w-hp-hpux11.11) GCC error:         || in eliminate_regs_in_insn, at reload1.c:3126                             || Error detected at namet.adb:1375:1                                       |",RESOLVED          FIXED      
70123,Bernd Schmidt,[5 Regression] Miscompilation of cfitsio testcase on s390x-linux starting with r222144,"The following testcase is miscompiled on s390x-linux with -O2 -m64 -march=z9-109 -mtune=z10 -fPIC starting with r222144.It works with -mno-lra, so suspect either a LRA bug or machine description bug.  The effect is that the 186	      for (h = 0; h < g; h++)187		baz ("" %2d"", t[h]);loop iterates until &t[h] is unaccessible.  But g should be at most 20, so h certainly shouldn't be almost 5000.-fsanitize=undefined,address and valgrind is clean on this on x86_64-linux.__attribute__ ((noinline, noclone)) intbar (int flag, const char *__restrict format, ...){  asm volatile ("""" : : ""r"" (flag), ""r"" (format) : ""memory"");  return 0;}extern inline __attribute__ ((__always_inline__, __gnu_inline__, __artificial__)) intbaz (const char *__restrict fmt, ...){  return bar (1, fmt, __builtin_va_arg_pack ());}__attribute__ ((noinline, noclone)) intf1 (void **a, const char *b, int *c){  *a = 0;  *c = 0;  asm volatile ("""" : : ""r"" (&a), ""r"" (b), ""r"" (&c) : ""memory"");  return 0;}__attribute__ ((noinline, noclone)) intf2 (void *a, int b, int c, long d[], int *e){  asm volatile ("""" : : ""r"" (a), ""r"" (b), ""r"" (c), ""r"" (d), ""r"" (e) : ""memory"");  return 1;}__attribute__ ((noinline, noclone)) intf3 (void *a, int *b){  asm volatile ("""" : : ""r"" (a), ""r"" (b) : ""memory"");  return 0;}__attribute__ ((noinline, noclone)) intf4 (void *a, const char *b, int c, int d, double *e, int f, char **g, int *h){  asm volatile ("""" : : ""r"" (a), ""r"" (b), ""r"" (c), ""r"" (d) : ""memory"");  asm volatile ("""" : : ""r"" (e), ""r"" (f), ""r"" (g), ""r"" (h) : ""memory"");  return 0;}__attribute__ ((noinline, noclone)) intf5 (void *a, long long b, int c, char **d, char **e, char **f, const char *g, long long h, int *i){  asm volatile ("""" : : ""r"" (a), ""r"" (b), ""r"" (c), ""r"" (d) : ""memory"");  asm volatile ("""" : : ""r"" (e), ""r"" (f), ""r"" (g), ""r"" (h) : ""memory"");  asm volatile ("""" : : ""r"" (i) : ""memory"");  return 0;}__attribute__ ((noinline, noclone)) intf6 (void *a, int b, int *c, int *d){  asm volatile ("""" : : ""r"" (a), ""r"" (b), ""r"" (c), ""r"" (d) : ""memory"");  return 0;}__attribute__ ((noinline, noclone)) intf7 (void *a, int b, long long c, long long d, long long e, double *f, int *g){  asm volatile ("""" : : ""r"" (a), ""r"" (b), ""r"" (c), ""r"" (d) : ""memory"");  asm volatile ("""" : : ""r"" (e), ""r"" (f), ""r"" (g) : ""memory"");  return 0;}__attribute__ ((noinline, noclone)) intf8 (void *a, int b, long long c, long long d, long long e, char *f, const char **g, int *h, int *i){  asm volatile ("""" : : ""r"" (a), ""r"" (b), ""r"" (c), ""r"" (d) : ""memory"");  asm volatile ("""" : : ""r"" (e), ""r"" (f), ""r"" (g), ""r"" (h) : ""memory"");  asm volatile ("""" : : ""r"" (i) : ""memory"");  return 0;}__attribute__ ((noinline, noclone)) intf9 (void *a, int b, long long c, long long d, long long e, char *f, int *g){  asm volatile ("""" : : ""r"" (a), ""r"" (b), ""r"" (c), ""r"" (d) : ""memory"");  asm volatile ("""" : : ""r"" (e), ""r"" (f), ""r"" (g) : ""memory"");  return 0;}__attribute__ ((noinline, noclone)) intf10 (void *a, int b, long long c, long long d, long long e, unsigned char f, unsigned char *g, int *h, int *i){  asm volatile ("""" : : ""r"" (a), ""r"" (b), ""r"" (c), ""r"" (d) : ""memory"");  asm volatile ("""" : : ""r"" (e), ""r"" (f), ""r"" (g), ""r"" (h) : ""memory"");  asm volatile ("""" : : ""r"" (i) : ""memory"");  return 0;}__attribute__ ((noinline, noclone)) intf11 (void *a, int b, long long c, long long d, long long e, long f, long *g, int *h, int *i){  asm volatile ("""" : : ""r"" (a), ""r"" (b), ""r"" (c), ""r"" (d) : ""memory"");  asm volatile ("""" : : ""r"" (e), ""r"" (f), ""r"" (g), ""r"" (h) : ""memory"");  asm volatile ("""" : : ""r"" (i) : ""memory"");  return 0;}__attribute__ ((noinline, noclone)) intf12 (void *a, int b, long long c, long long d, long long e, float f, float *g, int *h, int *i){  asm volatile ("""" : : ""r"" (a), ""r"" (b), ""r"" (c), ""r"" (d) : ""memory"");  asm volatile ("""" : : ""r"" (e), ""r"" (f), ""r"" (g), ""r"" (h) : ""memory"");  asm volatile ("""" : : ""r"" (i) : ""memory"");  return 0;}__attribute__ ((noinline, noclone)) intf13 (void *a, int b, long long c, long *d, long *e, int *f){  asm volatile ("""" : : ""r"" (a), ""r"" (b), ""r"" (c), ""r"" (d) : ""memory"");  asm volatile ("""" : : ""r"" (e), ""r"" (f) : ""memory"");  return 0;}__attribute__ ((noinline, noclone)) intf14 (void *a, int b, int *c, int *d){  asm volatile ("""" : : ""r"" (a), ""r"" (b), ""r"" (c), ""r"" (d) : ""memory"");  return 0;}volatile int a;intmain (){  int b, c, d = 0, e, f = 0;  long g, h;  int j = 0;  long k, l;  int m;  unsigned char n[21];  long o[21];  float p[21];  double q[21];  long r[3], s = 0;  char t[42];  char u[21];  char *v[3];  const char *w[21];  double x[3] = { 15.1515151515151515, 16.1616161616161616, 17.1717171717171717 };  char y[40], z[81];  void *a2;  char *b2[10], *c2[10], *d2[10];  char e2[] = ""abcdefghijklm"";  for (g = 0; g < 21; g++)    w[g] = """";  f1 (&a2, y, &b);  if (b)    goto lab;  c = 32;  if (f2 (a2, c, d, r, &b) > 0)    __builtin_strcat (z, ""12345678901234567890123478901234567"");  if (f3 (a2, &b) > 0)    goto lab;  if (f4 (a2, ""abcdefg"", 1, j, x, 14, v, &b) > 0)    goto lab;  for (g = 0; g < a; g++)    goto lab;  f5 (a2, s, f, b2, c2, d2, e2, 0L, &b);  if (f6 (a2, -1, &e, &b) > 0)    goto lab;  if (b > 0)    goto lab;  if (f6 (a2, 1, &e, &b) > 0)    goto lab;  f7 (a2, 8, g, 1, g, q, &b);  for (g = 1; g <= 20; g++)    {      for (h = 0; h < g; h++)	{	  t[h] = 0;	  q[h] = 0;	}      f8 (a2, 1, g, 1, 1, u, w, &m, &b);      for (h = 0; h < g; h++)	baz ("" %2d"", t[h]);      baz ("" %d\nX"", b);      f9 (a2, 3, g, 1, g, t, &b);      for (h = 0; h < g; h++)	baz ("" %2d"", t[h]);      f10 (a2, 4, g, 1, g, 99, n, &m, &b);      f11 (a2, 6, g, 1, g, 99, o, &m, &b);      f12 (a2, 7, g, 1, g, 99., p, &m, &b);      f13 (a2, 8, g, &k, &l, &b);    }  f14 (a2, 1, &e, &b);lab:  return 0;}",RESOLVED          FIXED      
69824,Bernd Schmidt,[5 Regression] internal compiler error in unshare_body,"int bar() { return foo(); }void baz(int c[foo()]) { return; }$ ./cc1 -quiet x.cx.c: In function ‘bar’:x.c:1:23: warning: implicit declaration of function ‘foo’ [-Wimplicit-function-declaration]    int bar() { return foo(); }                       ^~~x.c: In function ‘baz’:x.c:2:9: internal compiler error: Segmentation fault    void baz(int c[foo()]) { return; }         ^~~0xb1cd1f crash_signal	/home/marek/src/gcc/gcc/toplev.c:3350x8bb931 contains_struct_check(tree_node*, tree_node_structure_enum, char const*, int, char const*)	/home/marek/src/gcc/gcc/tree.h:31190x8bb931 unshare_body	/home/marek/src/gcc/gcc/gimplify.c:8760x8bb9c8 unshare_body	/home/marek/src/gcc/gcc/gimplify.c:8830x8c8e67 gimplify_body(tree_node*, bool)	/home/marek/src/gcc/gcc/gimplify.c:112780x8c9516 gimplify_function_tree(tree_node*)	/home/marek/src/gcc/gcc/gimplify.c:114500x74cd77 cgraph_node::analyze()	/home/marek/src/gcc/gcc/cgraphunit.c:6250x74ffa5 analyze_functions	/home/marek/src/gcc/gcc/cgraphunit.c:10800x750d1c symbol_table::finalize_compilation_unit()	/home/marek/src/gcc/gcc/cgraphunit.c:2534Please submit a full bug report,with preprocessed source if appropriate.Please include the complete backtrace with any bug report.See <http://gcc.gnu.org/bugs.html> for instructions.",RESOLVED          FIXED      
79910,Bernd Schmidt,[7 Regression] wrong code with -O -fweb,"Created attachment 40892 [details]reduced testcaseOutput:$ x86_64-pc-linux-gnu-gcc -O -fweb testcase.c$ ./a.out Aborted$ x86_64-pc-linux-gnu-gcc -vUsing built-in specs.COLLECT_GCC=/repo/gcc-trunk/binary-latest-amd64/bin/x86_64-pc-linux-gnu-gccCOLLECT_LTO_WRAPPER=/repo/gcc-trunk/binary-trunk-245841-checking-yes-rtl-df-extra-nographite-amd64/bin/../libexec/gcc/x86_64-pc-linux-gnu/7.0.1/lto-wrapperTarget: x86_64-pc-linux-gnuConfigured with: /repo/gcc-trunk//configure --enable-languages=c,c++ --enable-valgrind-annotations --disable-nls --enable-checking=yes,rtl,df,extra --without-cloog --without-ppl --without-isl --build=x86_64-pc-linux-gnu --host=x86_64-pc-linux-gnu --target=x86_64-pc-linux-gnu --with-ld=/usr/bin/x86_64-pc-linux-gnu-ld --with-as=/usr/bin/x86_64-pc-linux-gnu-as --disable-libstdcxx-pch --prefix=/repo/gcc-trunk//binary-trunk-245841-checking-yes-rtl-df-extra-nographite-amd64Thread model: posixgcc version 7.0.1 20170302 (experimental) (GCC) There seems to be a problem in the combine pass.Before .combine, there is:...(insn 16 14 17 2 (parallel [            (set (reg/v:DI 100 [ bD.1802 ])                (lshiftrt:DI (reg:DI 107)                    (reg:QI 110)))            (clobber (reg:CC 17 flags))        ]) ""testcase.c"":11 544 {*lshrdi3_1}     (expr_list:REG_DEAD (reg:QI 110)        (expr_list:REG_DEAD (reg:DI 107)            (expr_list:REG_UNUSED (reg:CC 17 flags)                (nil)))))...(insn 28 27 30 2 (parallel [            (set (reg:DI 128 [ _6 ])                (minus:DI (reg:DI 111 [ p1D.1798 ])                    (reg:DI 119)))            (clobber (reg:CC 17 flags))        ]) ""testcase.c"":12 272 {*subdi_1}     (expr_list:REG_DEAD (reg:DI 119)        (expr_list:REG_DEAD (reg:DI 111 [ p1D.1798 ])            (expr_list:REG_UNUSED (reg:CC 17 flags)                (nil)))))(insn 30 28 31 2 (parallel [            (set (reg:SI 120)                (and:SI (subreg:SI (reg/v:DI 100 [ bD.1802 ]) 0)                    (const_int 31 [0x1f])))            (clobber (reg:CC 17 flags))        ]) ""testcase.c"":13 389 {*andsi_1}     (expr_list:REG_UNUSED (reg:CC 17 flags)        (nil)))(insn 31 30 32 2 (set (reg:SI 121)        (const_int 4 [0x4])) ""testcase.c"":13 82 {*movsi_internal}     (nil))(insn 32 31 33 2 (parallel [            (set (reg/v:SI 106 [ p2D.1799 ])                (lshiftrt:SI (reg:SI 121)                    (subreg:QI (reg:SI 120) 0)))            (clobber (reg:CC 17 flags))        ]) ""testcase.c"":13 542 {*lshrsi3_1}     (expr_list:REG_DEAD (reg:SI 121)        (expr_list:REG_DEAD (reg:SI 120)            (expr_list:REG_UNUSED (reg:CC 17 flags)                (expr_list:REG_EQUAL (lshiftrt:SI (const_int 4 [0x4])                        (subreg:QI (reg:SI 120) 0))                    (nil))))))...But .combine shows:...Trying 27, 28 -> 33:...Successfully matched this instruction:(set (reg:QI 128 [ _6 ])    (plus:QI (subreg:QI (reg:DI 111 [ p1D.1798 ]) 0)        (subreg:QI (reg/v:DI 100 [ bD.1802 ]) 0)))Successfully matched this instruction:(set (reg:QI 123 [ p1D.1798 ])    (plus:QI (reg:QI 128 [ _6 ])        (subreg:QI (reg:DI 92 [ _6 ]) 0)))allowing combination of insns 27, 28 and 33...Trying 16, 32 -> 35:...Successfully matched this instruction:(set (reg/v:DI 100 [ bD.1802 ])    (lshiftrt:DI (reg:DI 107)        (reg:QI 110)))Successfully matched this instruction:(set (reg:SI 125 [ p2D.1799 ])    (const_int 0 [0]))allowing combination of insns 16, 32 and 35...So after .combine, there is:...(insn 28 27 30 2 (parallel [            (set (reg:QI 128 [ _6 ])                (plus:QI (subreg:QI (reg:DI 111 [ p1D.1798 ]) 0)                    (subreg:QI (reg/v:DI 100 [ bD.1802 ]) 0)))            (clobber (reg:CC 17 flags))        ]) ""testcase.c"":12 219 {*addqi_1}     (expr_list:REG_UNUSED (reg:CC 17 flags)        (expr_list:REG_DEAD (reg:DI 111 [ p1D.1798 ])            (nil))))(note 30 28 31 2 NOTE_INSN_DELETED)(note 31 30 32 2 NOTE_INSN_DELETED)(insn 32 31 33 2 (parallel [            (set (reg/v:DI 100 [ bD.1802 ])                (lshiftrt:DI (reg:DI 107)                    (reg:QI 110)))            (clobber (reg:CC 17 flags))        ]) ""testcase.c"":13 544 {*lshrdi3_1}     (expr_list:REG_UNUSED (reg:CC 17 flags)        (expr_list:REG_DEAD (reg:DI 107)            (expr_list:REG_DEAD (reg:QI 110)                (nil)))))...--> reg 100 is used in insn 28 before it is set in insn 32.",RESOLVED          FIXED      
79728,Bernd Schmidt,"[7 Regression] ICE in setup_pressure_classes, at ira.c:912","The following two lines of code:$ more bug340.cregister a __asm__(""xmm0"");fn1() {}$ does this with a build of gcc trunk from revision 245750.bug340.c:2:1: internal compiler error: in setup_pressure_classes, at ira.c:912 fn1() {} ^~~0x9ed9e8 setup_pressure_classes	../../trunk/gcc/ira.c:9120x9ed9e8 setup_allocno_and_important_classes	../../trunk/gcc/ira.c:10680x9ed9e8 find_reg_classes	../../trunk/gcc/ira.c:14280x9ed9e8 ira_init()	../../trunk/gcc/ira.c:1727This seems to have been going wrong since sometime before revision 236961.",RESOLVED          FIXED      
79194,Bernd Schmidt,"[7 Regression] ICE in rtl_verify_bb_insns, at cfgrtl.c:2661 (error: flow control insn inside a basic block)","gcc-7.0.0-alpha20170122 snapshot ICEs when compiling the following snippet w/ -O3:int iw, vr;voidd9 (unsigned int j3, long long int f5, int kp){  int *qb = &kp;  if (kp != 0)    {      long long int oq;      unsigned int tl = 0;      for (j3 = 0; j3 < 1; ++j3)        qb = &tl;      goto ed; l7:      oq = 1;      while (oq < 2)        oq *= j3; ed:      do        {          oq -= *qb;          if (oq != 0)            {              long long int ie = j3 & f5;              int ws = (j3 != 0 && kp != 0);              tl = ie > ws;              iw = vr = tl;            }          else            tl = (kp != 0 && (0 % 0) != 0);        }      while (tl != 0);    }  goto l7;}% powerpc-e300c3-linux-gnu-gcc-7.0.0-alpha20170122 -O3 -w -c rrypxrpr.crrypxrpr.c: In function 'd9':rrypxrpr.c:40:1: error: in basic block 47: } ^rrypxrpr.c:40:1: error: flow control insn inside a basic block(insn 508 347 353 47 (trap_if (const_int 1 [0x1])        (const_int 0 [0])) 824 {trap}     (nil))rrypxrpr.c:40:1: internal compiler error: in rtl_verify_bb_insns, at cfgrtl.c:26610x3177d0db745 _fatal_insn(char const*, rtx_def const*, char const*, int, char const*)	/var/tmp/portage/cross-powerpc-e300c3-linux-gnu/gcc-7.0.0_alpha20170122/work/gcc-7-20170122/gcc/rtl-error.c:1080x3177cc9d1e7 rtl_verify_bb_insns	/var/tmp/portage/cross-powerpc-e300c3-linux-gnu/gcc-7.0.0_alpha20170122/work/gcc-7-20170122/gcc/cfgrtl.c:26610x3177cc9d1e7 rtl_verify_flow_info_1	/var/tmp/portage/cross-powerpc-e300c3-linux-gnu/gcc-7.0.0_alpha20170122/work/gcc-7-20170122/gcc/cfgrtl.c:27470x3177cc8933d verify_flow_info()	/var/tmp/portage/cross-powerpc-e300c3-linux-gnu/gcc-7.0.0_alpha20170122/work/gcc-7-20170122/gcc/cfghooks.c:2580x3177cca26d7 checking_verify_flow_info	/var/tmp/portage/cross-powerpc-e300c3-linux-gnu/gcc-7.0.0_alpha20170122/work/gcc-7-20170122/gcc/cfghooks.h:1980x3177cca26d7 commit_edge_insertions()	/var/tmp/portage/cross-powerpc-e300c3-linux-gnu/gcc-7.0.0_alpha20170122/work/gcc-7-20170122/gcc/cfgrtl.c:20950x3177d7f62a8 bypass_conditional_jumps	/var/tmp/portage/cross-powerpc-e300c3-linux-gnu/gcc-7.0.0_alpha20170122/work/gcc-7-20170122/gcc/cprop.c:17420x3177d7f62a8 one_cprop_pass	/var/tmp/portage/cross-powerpc-e300c3-linux-gnu/gcc-7.0.0_alpha20170122/work/gcc-7-20170122/gcc/cprop.c:18660x3177d7f62a8 execute_rtl_cprop	/var/tmp/portage/cross-powerpc-e300c3-linux-gnu/gcc-7.0.0_alpha20170122/work/gcc-7-20170122/gcc/cprop.c:19180x3177d7f62a8 execute	/var/tmp/portage/cross-powerpc-e300c3-linux-gnu/gcc-7.0.0_alpha20170122/work/gcc-7-20170122/gcc/cprop.c:1956",RESOLVED          FIXED      
78559,Bernd Schmidt,[7 Regression] wrong code due to tree if-conversion?,"The testcase:int g = 20;int d = 0; shortfn2 (int p1, int p2){  return p2 >= 2 || 5 >> p2 ? p1 : p1 << p2;} intmain (){  int result = 0;lbl_2582:  if (g)    {      for (int c = -3; c; c++)        result = fn2 (1, g);    }  else    {      for (int i = 0; i < 2; i += 2)        if (d)          goto lbl_2582;    }  if (result != 1)    __builtin_abort ();  return 0;}used to (erroneously) abort on aarch64-none-linux-gnu with -O3 after r235808 but stopped aborting with r242550. It still passes after the fix r242689 but I'm not sure if the bug has just gone latent.To reproduce on aarch64 you'll have to revert r242689 and r242550.",RESOLVED          FIXED      
79125,Bernd Schmidt,"[7 Regression] ICE in rtl_verify_bb_insns, at cfgrtl.c:2661 (error: flow control insn inside a basic block)",gcc-7.0.0-alpha20170115 snapshot ICEs when compiling the following snippet w/ -O2 or -O3:int za;voidhl (void){  short int o8 = 0;  short int m6 = 1;  short int *ni = &m6;  for (;;)    {      int af;      short int *fd = (short int *)&ni;      if (ni != 0)        {          if (m6 != 0)            *ni = 0;          else            za = 0;          af = (o8 * o8) || o8;          if (af == 0)            m6 /= 0;          while (za != 0)            {            }        }      *fd = &o8;      for (af = 0; af < 2; ++af)        af = za;    }}% powerpc-e300c3-linux-gnu-gcc-7.0.0-alpha20170115 -O2 -w -c aqluuplt.c,RESOLVED          FIXED      
78727,Bernd Schmidt,"[7 Regression] ICE in rtl_verify_bb_insns, at cfgrtl.c:2656 (error: flow control insn inside a basic block)","gcc-7.0.0-alpha20161204 snapshot ICEs when compiling the following snippet w/ -O2:intdd (int gj, unsigned int o7){  long long int e8 = gj;  e8 |= gj + 1u;  if (e8 != 0)    {      short int *mn = (short int *)&e8;      int pv;      e8 &= e8 > gj;      gj = o7 > e8;      pv = ((gj != 0) ? gj : *mn) && e8;      gj |= *mn / pv;    }  return gj;}% powerpc-e300c3-linux-gnu-gcc-7.0.0-alpha20161204 -O2 -c hvquiakt.chvquiakt.c: In function 'dd':hvquiakt.c:19:1: error: in basic block 5: } ^hvquiakt.c:19:1: error: flow control insn inside a basic block(insn 121 61 135 5 (trap_if (const_int 1 [0x1])        (const_int 0 [0])) 823 {trap}     (nil))hvquiakt.c:19:1: internal compiler error: in rtl_verify_bb_insns, at cfgrtl.c:26560x2b36917ec35 _fatal_insn(char const*, rtx_def const*, char const*, int, char const*)	/var/tmp/portage/cross-powerpc-e300c3-linux-gnu/gcc-7.0.0_alpha20161204/work/gcc-7-20161204/gcc/rtl-error.c:1080x2b368d45117 rtl_verify_bb_insns	/var/tmp/portage/cross-powerpc-e300c3-linux-gnu/gcc-7.0.0_alpha20161204/work/gcc-7-20161204/gcc/cfgrtl.c:26560x2b368d45117 rtl_verify_flow_info_1	/var/tmp/portage/cross-powerpc-e300c3-linux-gnu/gcc-7.0.0_alpha20161204/work/gcc-7-20161204/gcc/cfgrtl.c:27420x2b368d3131d verify_flow_info()	/var/tmp/portage/cross-powerpc-e300c3-linux-gnu/gcc-7.0.0_alpha20161204/work/gcc-7-20161204/gcc/cfghooks.c:2580x2b36985cdc6 checking_verify_flow_info	/var/tmp/portage/cross-powerpc-e300c3-linux-gnu/gcc-7.0.0_alpha20161204/work/gcc-7-20161204/gcc/cfghooks.h:1980x2b36985cdc6 try_optimize_cfg	/var/tmp/portage/cross-powerpc-e300c3-linux-gnu/gcc-7.0.0_alpha20161204/work/gcc-7-20161204/gcc/cfgcleanup.c:29880x2b36985cdc6 cleanup_cfg(int)	/var/tmp/portage/cross-powerpc-e300c3-linux-gnu/gcc-7.0.0_alpha20161204/work/gcc-7-20161204/gcc/cfgcleanup.c:31520x2b3698488aa execute	/var/tmp/portage/cross-powerpc-e300c3-linux-gnu/gcc-7.0.0_alpha20161204/work/gcc-7-20161204/gcc/bb-reorder.c:2571",RESOLVED          FIXED      
77309,Bernd Schmidt,[5/6 Regression] wrong code at -Os and above on x86_64-linux-gnu (in the 64-bit mode),"It also affects 4.8.x and later, and is a regression from 4.7.x. $ gcc-trunk -vUsing built-in specs.COLLECT_GCC=gcc-trunkCOLLECT_LTO_WRAPPER=/usr/local/gcc-trunk/libexec/gcc/x86_64-pc-linux-gnu/7.0.0/lto-wrapperTarget: x86_64-pc-linux-gnuConfigured with: ../gcc-source-trunk/configure --enable-languages=c,c++,lto --prefix=/usr/local/gcc-trunk --disable-bootstrapThread model: posixgcc version 7.0.0 20160821 (experimental) [trunk revision 239642] (GCC) $ $ gcc-trunk -O1 small.c; ./a.out$ gcc-4.7 -Os small.c; ./a.out$ $ gcc-trunk -Os small.c$ ./a.outAborted (core dumped)$ -----------------------------------int a, b;int main (){  long c = 1 % (2 ^ b);  c = -c & ~(~(b ^ ~b) || a);  if (c >= 0)    __builtin_abort ();  return 0;}",RESOLVED          FIXED      
78120,Bernd Schmidt,[6/7 Regression] If conversion no longer performed,"For the following testcase, RTL if-conversion is no longer performed:--cut here--typedef unsigned long u64;typedef struct {  u64 hi, lo;} u128;static inline u128 add_u128 (u128 a, u128 b){  a.lo += b.lo;  if (a.lo < b.lo)    a.hi++;  return a;}extern u128 t1, t2, t3;void foo (void){  t1 = add_u128 (t1, t2);  t1 = add_u128 (t1, t3);}--cut here--gcc-7 compiles (-O2) to:--cut here--foo:        movq    t1+8(%rip), %rax        addq    t2+8(%rip), %rax        movq    t1(%rip), %rdx        jc      .L12.L4:        addq    t3+8(%rip), %rax        jc      .L13.L7:        movq    %rdx, t1(%rip)        movq    %rax, t1+8(%rip)        ret.L12:        addq    $1, %rdx        jmp     .L4.L13:        addq    $1, %rdx        jmp     .L7--cut here--gcc-5 is able to perform if-conversion in _r.ce1 pass, resulting in:--cut here--foo:        movq    t2+8(%rip), %rax        addq    t1+8(%rip), %rax        movq    t1(%rip), %rdx        adcq    $0, %rdx        addq    t3+8(%rip), %rax        adcq    $0, %rdx        movq    %rax, t1+8(%rip)        movq    %rdx, t1(%rip)        ret--cut here--",RESOLVED          FIXED      
44281,Bernd Schmidt,[4.9/5/6/7 Regression] Global Register variable pessimisation,"I am aware developers WONTFIX GCC being a pessimising compiler with respect to some global register variable issues: <http://gcc.gnu.org/bugzilla/show_bug.cgi?id=42596>GCC is copying registers for no good reason whatsoever. Below is a very simple example where gcc 3.3.6 does a better job of optimising the code. Unnecessary copying of registers may also occur with local register variables.#include <stdint.h>register uint64_t global_flag_stack __asm__(""rbx"");void push_flag_into_global_reg_var(uint64_t a, uint64_t b) {  uint64_t flag = (a==b);  global_flag_stack <<= 8;  global_flag_stack  |= flag;}uint64_t push_flag_into_local_var(uint64_t a, uint64_t b,				  uint64_t local_flag_stack) {  uint64_t flag = (a==b);  local_flag_stack <<= 8;  return local_flag_stack | flag;}int main() {}gcc-3.3 (GCC) 3.3.6 (Debian 1:3.3.6-15):$ gcc-3.3 -Os flags.c && objdump -d -m i386:x86-64:intel a.out|less...0000000000400478 <push_flag_into_global_reg_var>:  400478:       31 c0                   xor    eax,eax  40047a:       48 39 f7                cmp    rdi,rsi  40047d:       0f 94 c0                sete   al  400480:       48 c1 e3 08             shl    rbx,0x8  400484:       48 09 c3                or     rbx,rax  400487:       c3                      ret    0000000000400488 <push_flag_into_local_var>:  400488:       31 c0                   xor    eax,eax  40048a:       48 39 f7                cmp    rdi,rsi  40048d:       0f 94 c0                sete   al  400490:       48 c1 e2 08             shl    rdx,0x8  400494:       48 09 d0                or     rax,rdx  400497:       c3                      ret  ...gcc-4.1 (GCC) 4.1.3 20080704 (prerelease) (Debian 4.1.2-29):$ gcc-4.1 -Os flags.c && objdump -d -m i386:x86-64:intel a.out|less...0000000000400448 <push_flag_into_global_reg_var>:  400448:       48 89 da                mov    rdx,rbx  40044b:       31 c0                   xor    eax,eax  40044d:       48 c1 e2 08             shl    rdx,0x8  400451:       48 39 f7                cmp    rdi,rsi  400454:       0f 94 c0                sete   al  400457:       48 89 d3                mov    rbx,rdx  40045a:       48 09 c3                or     rbx,rax  40045d:       c3                      ret    000000000040045e <push_flag_into_local_var>:  40045e:       48 c1 e2 08             shl    rdx,0x8  400462:       31 c0                   xor    eax,eax  400464:       48 39 f7                cmp    rdi,rsi  400467:       0f 94 c0                sete   al  40046a:       48 09 d0                or     rax,rdx  40046d:       c3                      ret ...gcc-4.5 (Debian 4.5.0-1) 4.5.0:$ gcc-4.5 -Os flags.c && objdump -d -m i386:x86-64:intel a.out|less...0000000000400494 <push_flag_into_global_reg_var>:  400494:       31 d2                   xor    edx,edx  400496:       48 39 f7                cmp    rdi,rsi  400499:       48 89 d8                mov    rax,rbx  40049c:       0f 94 c2                sete   dl  40049f:       48 c1 e0 08             shl    rax,0x8  4004a3:       48 89 d3                mov    rbx,rdx  4004a6:       48 09 c3                or     rbx,rax  4004a9:       c3                      ret    00000000004004aa <push_flag_into_local_var>:  4004aa:       48 89 d0                mov    rax,rdx  4004ad:       31 d2                   xor    edx,edx  4004af:       48 c1 e0 08             shl    rax,0x8  4004b3:       48 39 f7                cmp    rdi,rsi  4004b6:       0f 94 c2                sete   dl  4004b9:       48 09 d0                or     rax,rdx  4004bc:       c3                      ret   ...The object code that current GCC is generating is embarrassing compared with GCC 3.3.6. Is it also necessary to increase the code footprint of push_flag_into_local_var when optimising for size (-Os) when compared to gcc 3.3.6 and 4.1.3?",RESOLVED          FIXED      
69650,Bernd Schmidt,"[6 Regression] ICE in linemap_line_start, at libcpp/line-map.c:803","Hello.During reduction of another ICE, I observed the following one:$ cat Unified_cpp_js_src35.iinamespace js {}# 9 """" 2namespace js {int a;}$ c++ -flto Unified_cpp_js_src35.iiline-map.c: file ""<stdin>"" left but not enteredlto1: internal compiler error: in linemap_line_start, at libcpp/line-map.c:8030x17b4ebc linemap_line_start(line_maps*, unsigned int, unsigned int)	../../libcpp/line-map.c:8030xbadeb3 lto_location_cache::apply_location_cache()	../../gcc/lto-streamer-in.c:1930x7a3399 lto_read_decls	../../gcc/lto/lto.c:17880x7a3c38 lto_file_finalize	../../gcc/lto/lto.c:20430x7a3c8c lto_create_files_from_ids	../../gcc/lto/lto.c:20530x7a3db8 lto_file_read	../../gcc/lto/lto.c:20940x7a7632 read_cgraph_and_symbols	../../gcc/lto/lto.c:28040x7a86bf lto_main()	../../gcc/lto/lto.c:3304Martin",RESOLVED          FIXED      
47992,Bernd Schmidt,ICE: SIGSEGV in ira_reuse_stack_slot (ira-color.c:2887) with -fweb,Created attachment 23546 [details]reduced testcase (from gfortran.dg/g77/pr9258.f)Compiler output:$ gfortran -O -fno-dce -fgcse -fno-tree-ccp -fno-tree-dominator-opts -fweb testcase.fTested revisions:r170674 - crash4.5 r170113 - OK,RESOLVED          FIXED      
70083,Bernd Schmidt,"[6 Regression] ICE: in assign_stack_local_1, at function.c:409 with -fschedule-insns -mavx512* @ i686","Created attachment 37868 [details]reduced testcaseI am getting this ICE with various testcases and compiler flags, and -O2 -fschedule-insns seems to be the common subset.Compiler output:$ i686-pc-linux-gnu-gcc -O2 -fno-dce -fschedule-insns -fno-sched-critical-path-heuristic -mavx512dq --param=max-cse-insns=1 testcase.ctestcase.c: In function 'foo':testcase.c:17:1: internal compiler error: in assign_stack_local_1, at function.c:409 } ^0x897928 assign_stack_local_1(machine_mode, long, int, int)        /repo/gcc-trunk/gcc/function.c:4060xa1ef81 assign_mem_slot        /repo/gcc-trunk/gcc/lra-spills.c:1590xa1ef81 lra_spill()        /repo/gcc-trunk/gcc/lra-spills.c:5900x9f6397 lra(_IO_FILE*)        /repo/gcc-trunk/gcc/lra.c:23760x99def9 do_reload        /repo/gcc-trunk/gcc/ira.c:53960x99def9 execute        /repo/gcc-trunk/gcc/ira.c:5580Please submit a full bug report,with preprocessed source if appropriate.Please include the complete backtrace with any bug report.See <http://gcc.gnu.org/bugs.html> for instructions.$ i686-pc-linux-gnu-gcc -vUsing built-in specs.COLLECT_GCC=/repo/gcc-trunk/binary-latest-i686/bin/i686-pc-linux-gnu-gccCOLLECT_LTO_WRAPPER=/repo/gcc-trunk/binary-trunk-233940-checking-yes-rtl-df-nographite-i686/bin/../libexec/gcc/i686-pc-linux-gnu/6.0.0/lto-wrapperTarget: i686-pc-linux-gnuConfigured with: /repo/gcc-trunk//configure --enable-languages=c,c++ --enable-checking=yes,rtl,df --without-cloog --without-ppl --without-isl --build=x86_64-pc-linux-gnu --host=x86_64-pc-linux-gnu --target=i686-pc-linux-gnu --with-ld=/usr/bin/i686-pc-linux-gnu-ld --with-as=/usr/bin/i686-pc-linux-gnu-as --with-sysroot=/usr/i686-pc-linux-gnu --disable-libstdcxx-pch --prefix=/repo/gcc-trunk//binary-trunk-233940-checking-yes-rtl-df-nographite-i686Thread model: posixgcc version 6.0.0 20160303 (experimental) (GCC)",RESOLVED          FIXED      
69941,Bernd Schmidt,bogus zero_extend transformation in postreload on aarch64,"Consider the code:#include <stdio.h> int a = 0;int b = 0;int c = 0;int e = 0;int f = 0;int *g = &e; int fn1() { return b ? a : b; } int main() {  int h = fn1() <= 0x8000000000000000ULL; // h = 1;   int k = f; // k = 0;   long i = h ? k : k / h; // i = 0;   long l = (unsigned short)(i - 0x1800); // l = 0xe800   i = l ? l : c; // i = 0xe800;   *g = i; // *g = 0xe800; e = 0xe800;   unsigned char result = e >> 9; // result = 0x74;   printf(""checksum = %x\n"", (int)result);  return 0;}This is supposed to print 74.Before r232540 which rejigged the aarch64 add expander, splitters and peepholes this was miscompiled and actually printed f4.I think r232540 made a but in the rtl optimisers go latent.If we take a revision before and after Richard's patch the difference between the bad and the good code is:-	mov	w0, -6144-	add	w0, w0, w1+	sub	w0, w1, #4096+	sub	w0, w0, #2048+	uxth	x0, w0So in the bad code we miss a zero_extend from HImode after the subtraction.Looking at the RTL dumps this gets lost in postreload.Immediately after reload we have:(insn 24 22 25 4 (set (reg:SI 0 x0 [94])        (const_int -6144 [0xffffffffffffe800])) file.c:31 47 {*movsi_aarch64}     (expr_list:REG_EQUIV (const_int -6144 [0xffffffffffffe800])        (nil)))(insn 25 24 26 4 (set (reg:SI 0 x0 [93])        (plus:SI (reg:SI 0 x0 [94])            (reg:SI 1 x1 [orig:73 iftmp.2_1 ] [73]))) file.c:31 96 {*addsi3_aarch64}     (nil))(insn 26 25 27 4 (set (reg/v:DI 0 x0 [orig:74 l ] [74])        (zero_extend:DI (reg:HI 0 x0 [93]))) file.c:31 91 {*zero_extendhidi2_aarch64}     (nil))but after postreload we have:(insn 24 22 26 4 (set (reg:SI 0 x0 [94])        (const_int -6144 [0xffffffffffffe800])) file.c:31 47 {*movsi_aarch64}     (expr_list:REG_EQUIV (const_int -6144 [0xffffffffffffe800])        (nil)))(insn 26 24 27 4 (set (reg/v:DI 0 x0 [orig:74 l ] [74])        (zero_extend:DI (plus:SI (reg:SI 0 x0 [94])                (reg:SI 1 x1 [orig:73 iftmp.2_1 ] [73])))) file.c:31 97 {*addsi3_aarch64_uxtw}The zero_extend in insn 26 lost the HImode inner mode.As I said, this bug doesn't reproduce anymore on trunk after r232540 because we  carry the plus-immediate as a single insn for longer and split it via peephole later on.",RESOLVED          FIXED      
50099,Bernd Schmidt,"ICE: internal compiler error: in extract_insn, at recog.c:2113 while building lttng-ust","Created attachment 25022 [details]preprocessed sources (ust-0.15/snprintf/vfprintf.c)$ arm-linux-gnueabi-gcc -march=armv7-a /tmp/x2.c -c -O1/tmp/x2.c: In function ‘ust_safe_vfprintf’:/tmp/x2.c:4533:1: error: unrecognizable insn:(insn 3114 3113 3115 139 (set (subreg:SI (reg/v:DI 153 [ _umax ]) 0)        (sign_extend:SI (mem:QI (plus:SI (mult:SI (reg/v:SI 159 [ nextarg ])                        (const_int 8 [0x8]))                    (reg/f:SI 347 [ argtable.7 ])) [0 *D.5277_569+0 S1 A32]))) /tmp/x2.c:4325 -1     (nil))/tmp/x2.c:4533:1: internal compiler error: in extract_insn, at recog.c:2113Please submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.$ arm-linux-gnueabi-gcc -vUsing built-in specs.COLLECT_GCC=arm-linux-gnueabi-gccCOLLECT_LTO_WRAPPER=$P/sysroots/x86_64-oe-linux/usr/libexec/armv5te-linux-gnueabi/gcc/arm-linux-gnueabi/4.6.1/lto-wrapperTarget: arm-linux-gnueabiConfigured with: $P/work-shared/gcc-4.6.1+svnr175454/gcc-4_6-branch/configure --build=x86_64-oe-linux --host=x86_64-oe-linux --target=arm-linux-gnueabi --prefix=$P/sysroots/x86_64-oe-linux/usr --exec_prefix=$P/sysroots/x86_64-oe-linux/usr --bindir=$P/sysroots/x86_64-oe-linux/usr/bin/armv5te-linux-gnueabi --sbindir=$P/sysroots/x86_64-oe-linux/usr/bin/armv5te-linux-gnueabi --libexecdir=$P/sysroots/x86_64-oe-linux/usr/libexec/armv5te-linux-gnueabi --datadir=$P/sysroots/x86_64-oe-linux/usr/share --sysconfdir=$P/sysroots/x86_64-oe-linux/etc --sharedstatedir=$P/sysroots/x86_64-oe-linux/com --localstatedir=$P/sysroots/x86_64-oe-linux/var --libdir=$P/sysroots/x86_64-oe-linux/usr/lib/armv5te-linux-gnueabi --includedir=$P/sysroots/x86_64-oe-linux/usr/include --oldincludedir=$P/sysroots/x86_64-oe-linux/usr/include --infodir=$P/sysroots/x86_64-oe-linux/usr/share/info --mandir=$P/sysroots/x86_64-oe-linux/usr/share/man --disable-silent-rules --with-libtool-sysroot=$P/sysroots/x86_64-oe-linux --with-gnu-ld --enable-shared --enable-languages=c,c++ --enable-threads=posix --disable-multilib --enable-c99 --enable-long-long --enable-symvers=gnu --enable-libstdcxx-pch --program-prefix=arm-linux-gnueabi- --enable-target-optspace --enable-lto --enable-libssp --disable-bootstrap --disable-libgomp --disable-libmudflap --enable-cheaders=c_global --with-abi=aapcs-linux --with-float=soft --with-local-prefix=$P/sysroots/toradex-colibri320/usr --with-gxx-include-dir=/usr/include/c++ --with-sysroot=$P/sysroots/toradex-colibri320 --with-build-sysroot=$P/sysroots/toradex-colibri320 --enable-poison-system-directories --with-headers=$P/sysroots/toradex-colibri320/usr/include --disable-libunwind-exceptions --with-mpfr=$P/sysroots/x86_64-oe-linux/usr --with-system-zlib --enable-nls --enable-__cxa_atexit --enable-__cxa_atexitThread model: posixgcc version 4.6.1 20110627 (prerelease) (GCC) (it is the gcc-4.6 from OpenEmbedded Core)",RESOLVED          FIXED      
57676,Bernd Schmidt,[4.9/5/6 Regression] ICE: Maximum number of LRA constraint passes is achieved (30),"Using GCC 4.9.0 as of 20130622 :$ cat lra.cint a, b, c;void f(p1){    for(;;)    {        if(p1 ? : (c /= 0))        {            int d;            for(; d; d++)            {                for(b = 0; b < 4; b++)                    p1 /= p1;lbl:                while(a);            }        }        if((c &= 1))            goto lbl;    }}$ xgcc -w -O2 -funroll-loops lra.clra.c: In function ‘f’:lra.c:23:1: internal compiler error: Maximum number of LRA constraint passes is achieved (30) } ^Please submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.",RESOLVED          FIXED      
69522,Bernd Schmidt,[4.9/5 Regression] gcc hangs on valid code on x86_64-linux-gnu,"The current gcc trunk hangs on the following valid code snippets on x86_64-linux-gnu in both 32-bit and 64-bit modes.I assume the code snippets are valid since both gcc-4.4 and clang-trunk compile them. gcc-4.4 and clang-trunk generate no warning for the first code snippet. The second one is essentially the same as the first one having the line control removed.I tested them for gcc-4.6, gcc-4.8, gcc-4.9, gcc-5.1, gcc-5.2 and gcc-5.3. Only gcc-4.8 got an ICE for ""abc2.c"", the others were just hanging.$ gcc-4.4 -Wall -Wextra abc1.c -c$ clang-trunk -Wall -Wextra -Wpedantic abc1.c -c$ gcc-trunk -vUsing built-in specs.COLLECT_GCC=gcc-trunkCOLLECT_LTO_WRAPPER=/home/absozero/trunk/root-gcc/libexec/gcc/x86_64-pc-linux-gnu/6.0.0/lto-wrapperTarget: x86_64-pc-linux-gnuConfigured with: ../gcc/configure --prefix=/home/absozero/trunk/root-gcc --enable-languages=c,c++ --disable-werror --enable-multilibThread model: posixgcc version 6.0.0 20160127 (experimental) [trunk revision 232874] (GCC) $ time gcc-trunk abc1.c^Creal	21m50.378suser	0m0.000ssys	0m0.002s$ cat abc1.c# 1 """" 3struct str {};struct {  struct str b;  float c[4];  int d;  float e[2];  int f;} a = {{}, 0, 0, 0, 0, {0.5}, 0, 0, {0}};================$ time gcc-trunk abc2.cabc.c:8:1: warning: braces around scalar initializer } a = {{}, 0, 0, 0, 0, {0.5}, 0, 0, {0}}; ^abc.c:8:1: note: (near initialization for ‘a.d’)abc.c:8:1: warning: braces around scalar initializerabc.c:8:1: note: (near initialization for ‘a.f’)^Creal	14m22.631suser	0m0.000ssys	0m0.002s$ gcc-4.8 abc2.cabc.c:8:1: warning: braces around scalar initializer [enabled by default] } a = {{}, 0, 0, 0, 0, {0.5}, 0, 0, {0}}; ^abc.c:8:1: warning: (near initialization for ‘a.d’) [enabled by default]abc.c:8:1: internal compiler error: Segmentation faultPlease submit a full bug report,with preprocessed source if appropriate.See <file:///usr/share/doc/gcc-4.8/README.Bugs> for instructions.Preprocessed source stored into /tmp/ccVkQrfE.out file, please attach this to your bugreport.$cat abc2.cstruct str {};struct {  struct str b;  float c[4];  int d;  float e[2];  int f;} a = {{}, 0, 0, 0, 0, {0.5}, 0, 0, {0}};",RESOLVED          FIXED      
69752,Bernd Schmidt,Reload removing instruction with side-effect,"This behavior was caught when debugging the following fail for -mcpu=cortex-m0:FAIL: g++.dg/torture/vshuf-v2di.C -O2 execution testAfter some debugging I noticed that reload would remove an insn that contained a post_inc which would cause the shuffle to be off by 4 (the value of the post increase).Using the exact same sources as the testsuite, if you compile with -fdump-rtl-all you can observe that pre reload (ira) you encounter the following sequence of RTL:(insn 455 191 213 6 (set (reg/f:SI 267)        (reg/f:SI 379)) 748 {*thumb1_movsi_insn}     (nil))(insn 213 455 216 6 (set (reg:SI 266)        (mem/u/c:SI (post_inc:SI (reg/f:SI 267)) [4  S4 A32])) 748 {*thumb1_movsi_insn}     (expr_list:REG_EQUIV (const_int -1044200508 [0xffffffffc1c2c3c4])        (expr_list:REG_INC (reg/f:SI 267)            (nil))))(insn 216 213 218 6 (set (reg:SI 268)        (mem/u/c:SI (reg/f:SI 267) [4  S4 A64])) 748 {*thumb1_movsi_insn}     (expr_list:REG_DEAD (reg/f:SI 267)        (nil)))Where pseudo register 267 is post_incremented in insn 213 and used in insn 216 right after.After reload:...Removing equiv init insn 443 (freq=107)  443: r381:SI=sfp:SI+0x10      REG_EQUIV sfp:SI-0x40deleting insn with uid = 443....(insn 455 191 213 6 (set (reg/f:SI 5 r5 [267])        (reg/f:SI 2 r2 [379])) 748 {*thumb1_movsi_insn}     (nil))(note 213 455 216 6 NOTE_INSN_DELETED)(insn 216 213 521 6 (set (reg:SI 5 r5 [268])        (mem/u/c:SI (reg/f:SI 5 r5 [267]) [4  S4 A64])) 748 {*thumb1_movsi_insn}     (nil))As you see pseudo register 268 (now in r5), will be loaded from mem (r5) which is still pointing to the old value of 267 and not the increased one, causing an offset error of 4. I checked and pseudo register 748 is the same in both cases. Also adding -fno-auto-inc to the test will yield a PASS result.",RESOLVED          FIXED      
68730,Bernd Schmidt,[5 Regression] wrong code at -O3 on x86_64-linux-gnu (in 32-bit mode),"The current gcc trunk miscompiles the following code on x86_64-linux-gnu at -O3 in the 32-bit mode (but not in the 64-bit mode). This is a regression from 5.3.x. -fno-tree-vrp makes the miscompilation disappear. $ gcc-trunk -vUsing built-in specs.COLLECT_GCC=gcc-trunkCOLLECT_LTO_WRAPPER=/usr/local/gcc-trunk/libexec/gcc/x86_64-pc-linux-gnu/6.0.0/lto-wrapperTarget: x86_64-pc-linux-gnuConfigured with: ../gcc-trunk/configure --prefix=/usr/local/gcc-trunk --enable-languages=c,c++ --disable-werror --enable-multilibThread model: posixgcc version 6.0.0 20151204 (experimental) [trunk revision 231299] (GCC) $ $ gcc-trunk -m32 -O2 small.c; ./a.out-28479-284791$ gcc-trunk -m64 -O3 small.c; ./a.out-28479-284791$ gcc-5.3 -m32 -O3 small.c; ./a.out-28479-284791$ $ gcc-trunk -m32 -O3 -fno-tree-vrp small.c; ./a.out-28479-284791$ $ gcc-trunk -m32 -O3 small.c$ timeout -s 9 10 ./a.out-28479-28479-32319Killed$ ---------------------------------------------------int printf (const char *, ...);int b, d, e;unsigned long long c = 4100543410106915;voidfn1 (){  short f, g = 4 % c;  int h = c;  if (h)    {      int i = ~c;      if (~c)	i = 25662;      f = g = i;      h = c - g + ~-f;      c = ~(c * h - f);    }  f = g;  unsigned long long k = g || c;  short l = c ^ g ^ k;  if (g > 25662 || c == 74074520320 || !(g < 2))    {      k = c;      l = g;      c = ~((k && c) + ~l);      f = ~(f * (c ^ k) | l);      if (c > k)	printf (""%d\n"", f);    }  short m = -f;  unsigned long long n = c;  c = m * f | n % c;  if (n)    printf (""%d\n"", f);  while (f < -31807)    ;  c = ~(n | c) | f;  if (n < c)    printf (""%lld\n"", (long long) f);  for (; d;)    for (; e;)      for (;;)	;  c = h;  c = l % c;}intmain (){  for (; b < 2; b++)    fn1 ();  return 0;}",RESOLVED          FIXED      
69714,Bernd Schmidt,[5/6 Regression] ffmpeg crc.c test miscompiled,"Created attachment 37622 [details]Preprocessed sourceThe attached preprocessed source file is miscompiled without '-fno-expensive-optimizations'.  Compile command is:gcc -S -fpreprocessed crc.i -dumpbase crc.c -g -g -O2 -O3 -Wdate-time -Wformat=1 -Werror=format-security -Wdeclaration-after-statement -Wall -Wdisabled-optimization -Wpointer-arith -Wredundant-decls -Wwrite-strings -Wtype-limits -Wundef -Wmissing-prototypes -Wno-pointer-to-int-cast -Wstrict-prototypes -Wempty-body -Wno-parentheses -Wno-switch -Wno-format-zero-length -Wno-pointer-sign -Werror=format-security -Werror=implicit-function-declaration -Werror=missing-prototypes -Werror=return-type -Werror=vla -Wformat=1 -Wno-maybe-uninitialized -std=c99 -fno-strict-overflow -fstack-protector-all -fomit-frame-pointer -fPIC -fno-optimize-sibling-calls -fno-math-errno -fno-signed-zeros -fno-tree-vectorize -fdiagnostics-color=auto -o crc.sMain assembly difference is:dave@mx3210:~/crc$ diff -u crc.s-expensive-opt crc.s-no-expensive-opt|less--- crc.s-expensive-opt 2016-02-07 19:25:52.859388388 -0500+++ crc.s-no-expensive-opt      2016-02-07 19:03:10.848495110 -0500@@ -340,16 +340,15 @@ .LVL54: .L42:        .loc 1 367 0-       ldw 0(%r31),%r21-       zdep %r21,23,8,%r28-       extru %r21,16+8-1,8,%r21-       ldh 2(%r31),%r20-       or %r28,%r21,%r28+       ldw 0(%r31),%r20        extru %r20,16+8-1,8,%r21+       zdep %r20,23,8,%r28+       or %r28,%r21,%r28+       extru %r20,7,8,%r21        zdep %r28,15,16,%r28-       zdep %r20,23,24,%r22+       extru %r20,15,16,%r22+       zdep %r22,23,8,%r22        or %r22,%r21,%r20-       extru %r20,31,16,%r20        or %r28,%r20,%r20        xor %r20,%r25,%r28This bug is also believed to affect mips:https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=813858",RESOLVED          FIXED      
65702,Bernd Schmidt,"[5 Regression] ICE (tree check: expected ssa_name, have var_decl in expand_gimple_basic_block, at cfgexpand.c:5506) on arm-linux-gnueabihf","seen with r221867 on arm-linux-gbueabihf$cat palette.iiclass A {  int m_fn1() const;};int a[1];int b;int A::m_fn1() const {  register int c asm("""");  while (b)    if (a[5])      c = b;  return c;}$ g++ -c -g -O2 -std=gnu++11 palette.ii palette.ii: In member function 'int A::m_fn1() const':palette.ii:7:16: error: invalid register name for 'c'   register int c asm("""");                ^palette.ii:6:5: internal compiler error: tree check: expected ssa_name, have var_decl in expand_gimple_basic_block, at cfgexpand.c:5506 int A::m_fn1() const {     ^0x8243dd tree_check_failed(tree_node const*, char const*, int, char const*, ...)        ../../src/gcc/tree.c:92970x39e455 tree_check(tree_node*, char const*, int, char const*, tree_code)        ../../src/gcc/tree.h:28460x39e455 expand_gimple_basic_block        ../../src/gcc/cfgexpand.c:55060x39ec81 execute        ../../src/gcc/cfgexpand.c:6127Please submit a full bug report,with preprocessed source if appropriate.$ g++ -vUsing built-in specs.COLLECT_GCC=g++COLLECT_LTO_WRAPPER=/usr/lib/gcc/arm-linux-gnueabihf/5/lto-wrapperTarget: arm-linux-gnueabihfConfigured with: ../src/configure -v --with-pkgversion='Ubuntu 5-20150404-0ubuntu11' --with-bugurl=file:///usr/share/doc/gcc-5/README.Bugs --enable-languages=c,ada,c++,java,go,fortran,objc,obj-c++ --prefix=/usr --program-suffix=-5 --enable-shared --enable-linker-build-id --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --libdir=/usr/lib --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --with-default-libstdcxx-abi=c++98 --enable-gnu-unique-object --disable-libitm --disable-libquadmath --enable-plugin --with-system-zlib --disable-browser-plugin --enable-java-awt=gtk --enable-gtk-cairo --with-java-home=/usr/lib/jvm/java-1.5.0-gcj-5-armhf/jre --enable-java-home --with-jvm-root-dir=/usr/lib/jvm/java-1.5.0-gcj-5-armhf --with-jvm-jar-dir=/usr/lib/jvm-exports/java-1.5.0-gcj-5-armhf --with-arch-directory=arm --with-ecj-jar=/usr/share/java/eclipse-ecj.jar --enable-objc-gc --enable-multiarch --enable-multilib --disable-sjlj-exceptions --with-arch=armv7-a --with-fpu=vfpv3-d16 --with-float=hard --with-mode=thumb --disable-werror --enable-multilib --enable-checking=yes --build=arm-linux-gnueabihf --host=arm-linux-gnueabihf --target=arm-linux-gnueabihfThread model: posixgcc version 5.0.0 20150404 (experimental) [trunk revision 221867] (Ubuntu 5-20150404-0ubuntu11)",RESOLVED          FIXED      
66178,Bernd Schmidt,"[4.9/5/6 Regression] Another label as values ICE in gen_reg_rtx, at emit-rtl.c:1059",c and c++ compiler crashes. Testcase:void bar(int);int test(void) {    static int test =  ((char *)&&l2-(char *)&&l3)+((char *)&&l1-(char *)&&l2);l1:l2:l3:    bar(test);    return 0;},RESOLVED          FIXED      
66208,Bernd Schmidt,macro location not detected,"From: https://gcc.gnu.org/ml/gcc-help/2015-05/msg00082.htmlvoid foox (char*, ...) __attribute__ ((nonnull (1)));#define foo(p) foox (p, ""p is null"")#define bar(p) _Static_assert (p, ""p is null"")void baz (void) {  foox (0, ""p is null"");  foo (0);  bar (0);}This should print:test.c:2:16: warning: null argument where non-null required (argument 1) [-Wnonnull] #define foo(p) foox (p, ""p is null"")                ^test.c:7:3: note: in expansion of macro ‘foo’   foo (0);   ^but for some reason, the input_location at the time of warning is not a virtual location coming from a macro map. It seems that input_location is not adjusted correctly before giving this warning test.c:6:3: warning: null argument where non-null required (argument 1) [-Wnonnull]   (foox (0, ""p is null""));   ^test.c:7:3: warning: null argument where non-null required (argument 1) [-Wnonnull]   (foo (0));   ^and it always points to the first location given in the line, which was never updated to be a macro location.",RESOLVED          FIXED      
66206,Bernd Schmidt,Address of stack memory associated with local variable returned to caller,"Clang static analyzer reported this potential bug.File:	gcc/bt-load.cLocation:	line 234, column 6Description:	Address of stack memory associated with local variable 'x' returned to caller220	static rtx *221	find_btr_use (rtx x, rtx *excludep = 0)222	{223	subrtx_ptr_iterator::array_type array;224	FOR_EACH_SUBRTX_PTR (iter, array, &x, NONCONST)225	{226	rtx *loc = *iter;227	if (loc == excludep)228	iter.skip_subrtxes ();229	else230	{231	const_rtx x = *loc;232	if (REG_P (x)233	&& overlaps_hard_reg_set_p (all_btrs, GET_MODE (x), REGNO (x)))234	return loc; // <-----	Address of stack memory associated with local variable 'x' returned to caller235	}236	}237	return 0;238	}",RESOLVED          FIXED      
47612,Bernd Schmidt,[4.6 regression] RTL crash when cc0 setter moved away from cc0 user,"Consider this C file:extern void e (int) __attribute__ ((noreturn));voidf (char *p, int a, int b, int c){  int i, j;  j = 0;  for (i = 0; i < 10; ++i)    {      switch (a)	{	case 0:	  p[i] = 0;	  break;	case 1:	  if (c == 1)	    {	      if (j < 0 | b <= j)		e (0);	      p[j] = 0;	    }	  else	    {	      if (j < 0 | b <= j)		e (0);	      p[j] = 0;	    }	  j++;	}    }}When I use a compiler built for the m68k-rtems4.11 target, the compiler crashes when I compile this file with the options -O2 -mcpu=5206 -fwrapv./home/iant/gcc/m68k-rtems-objdir/./gcc/xgcc -B/home/iant/gcc/m68k-rtems-objdir/./gcc/ -O2 -mcpu=5206 -S -fwrapv foo.cfoo.c: In function 'f':foo.c:31:1: internal compiler error: in maybe_add_or_update_dep_1, at sched-deps.c:845Please submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.I will describe what I think is happening, although I have not proved it.  The crash occurs because try_head_merge_bb in cfgcleanup.c moves a CC0-setter away from the CC0-user.  It finds a common sequence in two basic blocks--I believe it is the finding of this common sequence which makes this test requires the -mcpu=5206 -fwrapv options.  Finding the common sequence respects CC0 requirements.  However, it then calls can_move_insns_across.  That returns false, because there is a register conflict--d0 is used by the predecessor block and the common sequence.  However, can_move_insns_across also returns move_upto, indicating which insns may be moved.  can_move_insns_across does not check for cc0 when setting move_upto, and try_head_merge_bb doesn't check for it when using move_upto.  The effect is that the cc0 setter is moved, leaving the cc0 user behind.  This leads to the later crash.",RESOLVED          FIXED      
52997,Bernd Schmidt,[4.8 Regression] FAIL: gcc.dg/c99-intconst-1.c (internal compiler error),"Compiler generates a segmentation fault in reload1.c:Program received signal SIGSEGV, Segmentation fault.0x004ac200 in calculate_elim_costs_all_insns () at ../../gcc/gcc/reload1.c:16361636			  && reg_renumber[REGNO (SET_DEST (set))] < 0(gdb) bt#0  0x004ac200 in calculate_elim_costs_all_insns ()    at ../../gcc/gcc/reload1.c:1636#1  0x003eaca0 in ira_costs () at ../../gcc/gcc/ira-costs.c:2061#2  0x003e5604 in ira_build () at ../../gcc/gcc/ira-build.c:3076#3  0x003df6a8 in ira (f=<optimized out>) at ../../gcc/gcc/ira.c:4142#4  rest_of_handle_ira () at ../../gcc/gcc/ira.c:4315#5  0x00459764 in execute_one_pass (pass=0x15cccd8)    at ../../gcc/gcc/passes.c:2079#6  0x004599e8 in execute_pass_list (pass=0x0) at ../../gcc/gcc/passes.c:2134#7  0x004599fc in execute_pass_list (pass=0xa25410)    at ../../gcc/gcc/passes.c:2135#8  0x001ca47c in tree_rest_of_compilation (node=<optimized out>)    at ../../gcc/gcc/cgraphunit.c:1806#9  0x001ca888 in cgraph_expand_function (node=0x4076b500)    at ../../gcc/gcc/cgraphunit.c:1876#10 0x001ccd28 in cgraph_output_in_order () at ../../gcc/gcc/cgraphunit.c:2041#11 cgraph_optimize () at ../../gcc/gcc/cgraphunit.c:2629#12 0x001cd08c in cgraph_finalize_compilation_unit ()    at ../../gcc/gcc/cgraphunit.c:2720#13 0x001cd08c in cgraph_finalize_compilation_unit ()    at ../../gcc/gcc/cgraphunit.c:2720(gdb) disass $pc-16,$pc+16Dump of assembler code from 0x4ac1f0 to 0x4ac210:   0x004ac1f0 <calculate_elim_costs_all_insns+360>:	cmpb,<>,n r20,r21,0x4ac388 <calculate_elim_costs_all_insns+768>   0x004ac1f4 <calculate_elim_costs_all_insns+364>:	ldw 4(r19),r4   0x004ac1f8 <calculate_elim_costs_all_insns+368>:	addil L%2a800,dp,r1   0x004ac1fc <calculate_elim_costs_all_insns+372>:	ldw 308(r1),r19=> 0x004ac200 <calculate_elim_costs_all_insns+376>:	ldh,s r4(r19),r19   0x004ac204 <calculate_elim_costs_all_insns+380>:	extrw,s r19,31,16,r19   0x004ac208 <calculate_elim_costs_all_insns+384>:	cmpib,<= 0,r19,0x4ac388 <calculate_elim_costs_all_insns+768>   0x004ac20c <calculate_elim_costs_all_insns+388>:	addil L%7c000,dp,r1End of assembler dump.(gdb) p/x $r19$1 = 0x4061a008(gdb) p/x $r4$2 = 0x20ffc(gdb) p/x reg_renumber$4 = 0x4061a008(gdb) p debug_rtx (set)(set (reg:SI 135164 [3982])    (const_int 16384 [0x4000]))$5 = void(gdb) p/x 135164$6 = 0x20ffc(gdb) p/x &reg_renumber[135164]$7 = 0x4065c000(gdb) p reg_renumber[135164]Cannot access memory at address 0x4065c000Apr 15 13:21:44 mx3210 kernel: do_page_fault() pid=14445 command='cc1' type=15 address=0x4065c000Apr 15 13:21:44 mx3210 kernel: vm_start = 0x4051a000, vm_end = 0x4065c000The register number causes an access beyond the region allocated forreg_renumber.The bug was introduced in r186378.",RESOLVED          FIXED      
50249,Bernd Schmidt,ira marks wrong value for inheriting,"Using an approved-for-commit middle-end patch for bug 43864, I hit the followingerror in ira:Before ira, insn 320 defines r588, which is used in identical loads insn 321 andinsn 329.10.cc.188r.asmcons:...(insn 320 318 321 20 (set (reg/f:SI 588)        (plus:SI (reg/f:SI 166)            (const_int -12))) 5 {*thumb1_addsi3}     (nil))(insn 321 320 322 20 (set (reg:SI 379)        (mem:SI (reg/f:SI 588))) 177 {*thumb1_movsi_insn}     (nil))(insn 322 321 326 20 (set (mem/s/f:SI (plus:SI (reg/f:SI 329)		(reg:SI 379)))        (reg/f:SI 170)) 177 {*thumb1_movsi_insn}     (expr_list:REG_DEAD (reg:SI 379)        (nil)))(insn 326 322 329 20 (set (mem/s/c:SI (plus:SI (reg/f:SI 329)                (const_int 4)))        (reg:SI 338)) 177 {*thumb1_movsi_insn}     (expr_list:REG_DEAD (reg:SI 338)        (nil)))(insn 329 326 330 20 (set (reg:SI 386)        (mem:SI (reg/f:SI 588) )) 177 {*thumb1_movsi_insn}     (nil))(insn 330 329 331 20 (set (reg:SI 385)        (plus:SI (reg/f:SI 329)            (reg:SI 386))) 5 {*thumb1_addsi3}     (expr_list:REG_DEAD (reg:SI 386)        (nil)))...After ira, r588 is defined by insn 1140, insn 1141 an insn 320 in r10.It is then copied to r1 by insn 1143, before being used in the first load,insn 1144. This first load also overwrites r1.The second load, insn 1146 however uses r1 as if is was still a copy of r10.10.cc.191r.ira:...(insn 1140 1139 1141 20 (set (reg/f:SI 10 sl [588])        (reg:SI 1 r1)) 177 {*thumb1_movsi_insn}     (nil))(insn 1141 1140 320 20 (set (reg:SI 2 r2)        (const_int -12)) 177 {*thumb1_movsi_insn}     (nil))(insn 320 1141 321 20 (set (reg/f:SI 10 sl [588])        (plus:SI (reg/f:SI 10 sl [588])            (reg:SI 2 r2))) 5 {*thumb1_addsi3}     (nil))(note 321 320 1145 20 NOTE_INSN_DELETED)(insn 1145 321 1142 20 (set (reg:SI 0 r0)        (mem/c:SI (plus:SI (reg/f:SI 13 sp)                (const_int 12))))      177 {*thumb1_movsi_insn}     (nil))(insn 1142 1145 1143 20 (set (reg:SI 2 r2)        (plus:SI (reg/f:SI 13 sp)            (const_int 336))) 5 {*thumb1_addsi3}     (nil))(insn 1143 1142 1144 20 (set (reg:SI 1 r1)        (reg/f:SI 10 sl [588])) 177 {*thumb1_movsi_insn}     (nil))(insn 1144 1143 322 20 (set (reg:SI 1 r1)        (mem:SI (reg:SI 1 r1)))      177 {*thumb1_movsi_insn}     (nil))(insn 322 1144 326 20 (set (mem/s/f:SI (plus:SI (reg:SI 2 r2)                (reg:SI 1 r1)))        (reg:SI 0 r0)) 177 {*thumb1_movsi_insn}     (nil))(insn 326 322 329 20 (set (mem/s/c:SI (plus:SI (reg/f:SI 13 sp)	        (const_int 340)))        (reg:SI 3 r3 [338])) 177 {*thumb1_movsi_insn}     (nil))(note 329 326 1146 20 NOTE_INSN_DELETED)(insn 1146 329 330 20 (set (reg:SI 1 r1)        (mem:SI (reg:SI 1 r1)))      177 {*thumb1_movsi_insn}     (nil))(insn 330 1146 332 20 (set (reg:SI 0 r0 [385])        (plus:SI (reg:SI 2 r2)            (reg:SI 1 r1))) 5 {*thumb1_addsi3}     (nil))...The reloads for insn 322 are visible in the ira dump. Reload 1 is the copy fromr10 to r1. Reload 2 is the first load.10.cc.191r.ira:...Reloads for insn # 322Reload 0: reload_in (SI) = (plus:SI (reg/f:SI 13 sp)                                                    (const_int 336))        LO_REGS, RELOAD_FOR_OPERAND_ADDRESS (opnum = 0)        reload_in_reg: (plus:SI (reg/f:SI 13 sp)                                                    (const_int 336))        reload_reg_rtx: (reg:SI 2 r2)Reload 1: reload_in (SI) = (reg/f:SI 10 sl [588])        BASE_REGS, RELOAD_FOR_OPERAND_ADDRESS (opnum = 0)        reload_in_reg: (reg/f:SI 10 sl [588])        reload_reg_rtx: (reg:SI 1 r1)Reload 2: reload_in (SI) = (mem:SI (reg/f:SI 10 sl [588]))        LO_REGS, RELOAD_FOR_OPERAND_ADDRESS (opnum = 0), can't combine	reload_in_reg: (reg:SI 379)        reload_reg_rtx: (reg:SI 1 r1)Reload 3: LO_REGS, RELOAD_FOR_OPERAND_ADDRESS (opnum = 0), optional, can't          combine, secondary_reload_pReload 4: reload_out (SI) = (mem/s/f:SI (plus:SI (plus:SI (reg/f:SI 13 sp)                                                            (const_int 336))                                                        (reg:SI 379 )))	NO_REGS, RELOAD_FOR_OUTPUT (opnum = 0), optional        reload_out_reg: (mem/s/f:SI (plus:SI (plus:SI (reg/f:SI 13 sp)	                                                    (const_int 336))                                                        (reg:SI 379)))        secondary_out_reload = 3Reload 5: reload_in (SI) = (reg/f:SI 170)        LO_REGS, RELOAD_FOR_INPUT (opnum = 1)        reload_in_reg: (reg/f:SI 170)        reload_reg_rtx: (reg:SI 0 r0)...in emit_reload_insns, ira determines which reloads can be inherited by laterinstructions, by testing reload_reg_reaches_end_p (and reload_regs_reach_end_p).These tests return true for both reload 1 and reload 2, since they call thefunctions with the same arguments.  It seems that the functionsmark_reload_reg_in_use and reload_reg_reaches_end_p and the underlying adminstration do not distinguish between the 2 reloads. They have the sameregno, opnum, type and mode.So we end up setting reg_reloaded_contents twice, once for each reload. Since wedo this in reload_order, we first handle reload 2 and then reload 1. So theeffective reg_reloaded_contents is the one of reload 1, while it should be the one of reload 2.",RESOLVED          FIXED      
49900,Bernd Schmidt,"[4.7 regression] ICE in advance_target_bb, at sched-ebb.c:691","/bin/sh ./libtool --tag=GCJ   --mode=compile /usr/local/gcc/gcc-20110729/Build/./gcc/gcj -B/usr/local/gcc/gcc-20110729/Build/ia64-suse-linux/libjava/ -B/usr/local/gcc/gcc-20110729/Build/./gcc/ -B/usr/ia64-suse-linux/bin/ -B/usr/ia64-suse-linux/lib/ -isystem /usr/ia64-suse-linux/include -isystem /usr/ia64-suse-linux/sys-include    -funwind-tables -fclasspath= -fbootclasspath=../../../libjava/classpath/lib --encoding=UTF-8 -Wno-deprecated -fbootstrap-classes -g -O2  -c -o java/lang/ref.lo -fsource-filename=/usr/local/gcc/gcc-20110729/Build/ia64-suse-linux/libjava/classpath/lib/classes -MT java/lang/ref.lo -MD -MP -MF java/lang/ref.deps @java/lang/ref.listlibtool: compile:  /usr/local/gcc/gcc-20110729/Build/./gcc/gcj -B/usr/local/gcc/gcc-20110729/Build/ia64-suse-linux/libjava/ -B/usr/local/gcc/gcc-20110729/Build/./gcc/ -B/usr/ia64-suse-linux/bin/ -B/usr/ia64-suse-linux/lib/ -isystem /usr/ia64-suse-linux/include -isystem /usr/ia64-suse-linux/sys-include -funwind-tables -fclasspath= -fbootclasspath=../../../libjava/classpath/lib --encoding=UTF-8 -Wno-deprecated -fbootstrap-classes -g -O2 -c -fsource-filename=/usr/local/gcc/gcc-20110729/Build/ia64-suse-linux/libjava/classpath/lib/classes -MT java/lang/ref.lo -MD -MP -MF java/lang/ref.deps @java/lang/ref.list  -fPIC -o java/lang/.libs/ref.o/usr/local/gcc/gcc-20110729/libjava/classpath/java/lang/ref/ReferenceQueue.java: In class 'java.lang.ref.ReferenceQueue':/usr/local/gcc/gcc-20110729/libjava/classpath/java/lang/ref/ReferenceQueue.java: In method 'java.lang.ref.ReferenceQueue.enqueue(java.lang.ref.Reference)':In file included from /usr/local/gcc/gcc-20110729/libjava/java/lang/ref/Reference.java:202:0,                 from /usr/local/gcc/gcc-20110729/libjava/classpath/java/lang/ref/PhantomReference.java:75,                 from <built-in>:6:/usr/local/gcc/gcc-20110729/libjava/classpath/java/lang/ref/ReferenceQueue.java:97:0: internal compiler error: in advance_target_bb, at sched-ebb.c:691",RESOLVED          FIXED      
45063,Bernd Schmidt,[4.6 Regression] ICE: Segmentation fault (cc1) compiling matmul_i1.c,"libtool: compile:  /home2/dave/gcc-4.6/objdir/./gcc/xgcc -B/home2/dave/gcc-4.6/objdir/./gcc/ -B/home2/dave/opt/gnu/gcc/gcc-4.6.0/hppa-linux/bin/ -B/home2/dave/opt/gnu/gcc/gcc-4.6.0/hppa-linux/lib/ -isystem /home2/dave/opt/gnu/gcc/gcc-4.6.0/hppa-linux/include -isystem /home2/dave/opt/gnu/gcc/gcc-4.6.0/hppa-linux/sys-include -DHAVE_CONFIG_H -I. -I../../../gcc/libgfortran -iquote../../../gcc/libgfortran/io -I../../../gcc/libgfortran/../gcc -I../../../gcc/libgfortran/../gcc/config -I../.././gcc -D_GNU_SOURCE -std=gnu99 -Wall -Wstrict-prototypes -Wmissing-prototypes -Wold-style-definition -Wextra -Wwrite-strings -fcx-fortran-rules -ffunction-sections -fdata-sections -ftree-vectorize -funroll-loops -g -O2 -MT matmul_i1.lo -MD -MP -MF .deps/matmul_i1.Tpo -c ../../../gcc/libgfortran/generated/matmul_i1.c  -fPIC -DPIC -o .libs/matmul_i1.o../../../gcc/libgfortran/generated/matmul_i1.c: In function 'matmul_i1':../../../gcc/libgfortran/generated/matmul_i1.c:374:1: internal compiler error: Sdave@gsyprf11:~/gcc-4.6/objdir/gcc$ ./xgcc -B./ -vReading specs from ./specsCOLLECT_GCC=./xgccCOLLECT_LTO_WRAPPER=./lto-wrapperTarget: hppa-linuxConfigured with: ../gcc/configure --with-gnu-as --with-gnu-ld --enable-shared --enable-nls --prefix=/home2/dave/opt/gnu/gcc/gcc-4.6.0 --with-local-prefix=/home2/dave/opt/gnu --enable-threads=posix --enable-__cxa_atexit --build=hppa-linux --enable-clocale=gnu --enable-java-gc=boehm --enable-java-awt=xlib --enable-languages=c,c++,objc,fortran,obj-c++,java,adaThread model: posixgcc version 4.6.0 20100722 (experimental) [trunk revision 162433] (GCC) 162392 was ok.",RESOLVED          FIXED      
44973,Bernd Schmidt,SH: libjava failed to build with 'flow control insn inside a basic block',"On sh4-unknown-linux-gnu,r162270 | bernds | 2010-07-17 08:47:46 +0900 (Sat, 17 Jul 2010) | 26 linescaused a build failure during compiling libjava:../trunk/libjava/verify.cc: In member function 'void _Jv_BytecodeVerifier::merge_into(int, _Jv_BytecodeVerifier::state*)':../trunk/libjava/verify.cc:1527:3: error: in basic block 200:../trunk/libjava/verify.cc:1527:3: error: flow control insn inside a basic block(insn 1318 1315 1309 200 ../trunk/libjava/verify.cc:686 (set (reg:SI 1 r1 [orig:447 D.22193 ] [447])        (mem/s:SI (plus:SI (reg/v/f:SI 9 r9 [orig:452 from_state ] [452])                (const_int 24 [0x18])) [45 MEM[(const struct type &)from_state_22(D) + 16].pc+0 S4 A32])) 176 {movsi_ie} (expr_list:REG_EH_REGION (const_int 3 [0x3])        (nil)))../trunk/libjava/verify.cc:1527:3: internal compiler error: in rtl_verify_flow_info_1, at cfgrtl.c:2030P../trunk/libjava/verify.cc: In member function 'void _Jv_BytecodeVerifier::merge_into(int, _Jv_BytecodeVerifier::state*)':../trunk/libjava/verify.cc:1527:3: error: in basic block 200:../trunk/libjava/verify.cc:1527:3: error: flow control insn inside a basic block(insn 1318 1315 1309 200 ../trunk/libjava/verify.cc:686 (set (reg:SI 1 r1 [orig:447 D.22193 ] [447])        (mem/s:SI (plus:SI (reg/v/f:SI 9 r9 [orig:452 from_state ] [452])                (const_int 24 [0x18])) [45 MEM[(const struct type &)from_state_22(D) + 16].pc+0 S4 A32])) 176 {movsi_ie} (expr_list:REG_EH_REGION (const_int 3 [0x3])        (nil)))../trunk/libjava/verify.cc:1527:3: internal compiler error: in rtl_verify_flow_info_1, at cfgrtl.c:2030It seems that the patch below restores the build on SH, thoughI'm not sure if it's the right thing to do.diff -up ORIG/trunk/gcc/postreload.c trunk/gcc/postreload.c--- ORIG/trunk/gcc/postreload.c	2010-07-17 10:31:33.000000000 +0900+++ trunk/gcc/postreload.c	2010-07-17 23:07:42.000000000 +0900@@ -924,6 +924,9 @@ reload_combine_recognize_const_pattern ( 	  if (must_move_add && use_ruid < last_jump_ruid) 	    break; +	  if (find_reg_note (use_insn, REG_EH_REGION, NULL))+	    break;+ 	  /* If the add clobbers another hard reg in parallel, don't move 	     it past a real set of this hard reg.  */ 	  if (must_move_add && clobbered_regno >= 0",RESOLVED          FIXED      
8049,Bernd Schmidt,SSE unaligned vector stores crash with -O0,"I have encountered several cases at optimization level zero (-O0) wherein the app seg faults on a movaps instruction just prior to calling _mm_store_ps().gcc -O0 -msse -g main.cmain.c:-------#include <xmmintrin.h>#include <stdlib.h>void MatrixMultiply( float A[16], float B[16], float C[16] );int main( void ){    float 	A[16] __attribute__ ((aligned (16) ) );    float	B[16] __attribute__ ((aligned (16) ) );    float	C[16] __attribute__ ((aligned (16) ) );    int i;         for( i = 0; i < 16; i++ )    {        A[i] = (double) (rand() - RAND_MAX/2) / (double) (RAND_MAX );        B[i] = (double) (rand() - RAND_MAX/2) / (double) (RAND_MAX );        C[i] = 0.0;    }        MatrixMultiply( A, B, C );  //the crasher     return 0;}void MatrixMultiply( float A[16], float B[16], float C[16] ){    __m128 A1 = _mm_load_ps( A );    __m128 A2 = _mm_load_ps( A + 4 );    __m128 A3 = _mm_load_ps( A + 8 );    __m128 A4 = _mm_load_ps( A + 12 );    __m128 B1 = _mm_load_ps( B );    __m128 B2 = _mm_load_ps( B + 4 );    __m128 B3 = _mm_load_ps( B + 8 );    __m128 B4 = _mm_load_ps( B + 12 );    __m128 C1 = _mm_mul_ps( _mm_shuffle_ps( A1, A1, _MM_SHUFFLE(0,0,0,0) ), B1 );    __m128 C2 = _mm_mul_ps( _mm_shuffle_ps( A2, A2, _MM_SHUFFLE(0,0,0,0) ), B2 );    __m128 C3 = _mm_mul_ps( _mm_shuffle_ps( A3, A3, _MM_SHUFFLE(0,0,0,0) ), B3 );    __m128 C4 = _mm_mul_ps( _mm_shuffle_ps( A4, A4, _MM_SHUFFLE(0,0,0,0) ), B4 );    __m128 D1 = _mm_mul_ps( _mm_shuffle_ps( A1, A1, _MM_SHUFFLE(1,1,1,1) ), B1 );    __m128 D2 = _mm_mul_ps( _mm_shuffle_ps( A2, A2, _MM_SHUFFLE(1,1,1,1) ), B2 );    __m128 D3 = _mm_mul_ps( _mm_shuffle_ps( A3, A3, _MM_SHUFFLE(1,1,1,1) ), B3 );    __m128 D4 = _mm_mul_ps( _mm_shuffle_ps( A4, A4, _MM_SHUFFLE(1,1,1,1) ), B4 );    C1 = _mm_add_ps( C1, D1 );    C2 = _mm_add_ps( C2, D2 );    C3 = _mm_add_ps( C3, D3 );    C4 = _mm_add_ps( C4, D4 );    D1 = _mm_mul_ps( _mm_shuffle_ps( A1, A1, _MM_SHUFFLE(2,2,2,2) ), B1 );    D2 = _mm_mul_ps( _mm_shuffle_ps( A2, A2, _MM_SHUFFLE(2,2,2,2) ), B2 );    D3 = _mm_mul_ps( _mm_shuffle_ps( A3, A3, _MM_SHUFFLE(2,2,2,2) ), B3 );    D4 = _mm_mul_ps( _mm_shuffle_ps( A4, A4, _MM_SHUFFLE(2,2,2,2) ), B4 );    C1 = _mm_add_ps( C1, D1 );    C2 = _mm_add_ps( C2, D2 );    C3 = _mm_add_ps( C3, D3 );    C4 = _mm_add_ps( C4, D4 );    D1 = _mm_mul_ps( _mm_shuffle_ps( A1, A1, _MM_SHUFFLE(3,3,3,3) ), B1 );    D2 = _mm_mul_ps( _mm_shuffle_ps( A2, A2, _MM_SHUFFLE(3,3,3,3) ), B2 );    D3 = _mm_mul_ps( _mm_shuffle_ps( A3, A3, _MM_SHUFFLE(3,3,3,3) ), B3 );    D4 = _mm_mul_ps( _mm_shuffle_ps( A4, A4, _MM_SHUFFLE(3,3,3,3) ), B4 );    C1 = _mm_add_ps( C1, D1 );    C2 = _mm_add_ps( C2, D2 );    C3 = _mm_add_ps( C3, D3 );    C4 = _mm_add_ps( C4, D4 );    _mm_store_ps( C +  0, C1 );	//Crashes here on movaps that reads C1 into xmm0 prior to call _mm_store_ps if -O0    _mm_store_ps( C +  4, C2 );    _mm_store_ps( C +  8, C3 );    _mm_store_ps( C + 12, C4 );}Release:gcc 3.3 20020925 (experimental)Environment:Red Hat Linux 7.3 (P4/2530)",RESOLVED          FIXED      
2396,Bernd Schmidt,ARM/thumb 5th function argument access problem,"gcc 2.95.2 for ARM/thumb (thumb-coff) target, solaris host.When using default optimization (-O), leaf functionswith moderate complexity and more than four word-size arguments are coded such that the fifth and successivearguments are accessed at the wrong place in the stack(specifically, 4 bytes too high).The problem goes away if optimization is turned off entirely or if -fno-omit-frame-pointer is used.This problem also appears in 2.7-armT-980223 which weobtained a few years ago (but we didn't used to useso many arguments to functions).Release:2.95.2Environment:solaris 2 host, ARM/thumb (thumb-coff) targetHow-To-Repeat:Compile with -O and -S .... and note how the argument""a4"" is accessed.int f;int bar( int a0, int a1, int a2, int a3, int a4 ) {    // Bug: the following gets accessed at [sp,#4] instead of [sp,#0]    return ( f ? a4 : 0 );}// For reference, here is something that calls barint foo(void) {    return bar(0,1,2,3,4);}The generated code accesses ""a4"" as	ldr  r1, [sp, #4]however, it was passed as [sp] and the stack pointeris not modified in this optimized leaf function.",RESOLVED          FIXED      
7693,Bernd Schmidt,Typo in i386 mmintrin.h header,"The functions in gcc/config/i386/mmintrin.h for shifting 64 bit values don'tmatch the names in the Intel x86 instruction set documentation, or what theIntel compiler accepts. In all 4 relevant functions, the pi64 extension inthe gcc mmintrin.h names should be si64. For example, _mm_sll_pi64() shouldbe _mm_sll_si64().Problem is in 3.2 and current cvs HEAD.Release:3.2Environment:System: Linux sherlock.localdomain 2.2.21 #1 Sun Aug 18 11:20:19 PDT 2002 i686 unknownArchitecture: athlon	host: athlon-pc-linux-gnubuild: athlon-pc-linux-gnutarget: athlon-pc-linux-gnuconfigured with: ../gcc-3.2/configure --prefix=/usr/local --target=athlon-pc-linux-gnu --with-arch=athlon --enable-threads=posix --disable-nls --with-system-zlib --enable-languages=c,c++,f77 --enable-__cxa_atexit --enable-shared",RESOLVED          FIXED      
8212,Bernd Schmidt,Re: SSE arguments alignment,"> On Fri, 11 Oct 2002, Richard Henderson wrote: >  > > On Fri, Oct 11, 2002 at 02:48:15PM +0200, Jan Hubicka wrote: > > > Yes, that is the bug - outgoing operands are always aligned to 32bit > > > only as ia32 ABI mandates.  I am not quite sure how this should be > > > hanled, as we need to increase the alignment of only SSE operands > > > (probably structure containing SSE operand too, but structure containing > > > other 128bit or 64bit aligned field should not get aligned). > >  > > Err, this was already handled, I thought.  Apparently not. > > Bernd, did that stuff get left on a branch somewhere? >  > More likely it got broken in one of the many code rearrangements since this > stuff was written.  ix86_function_arg_boundary looks like it has a bogus > test for !TARGET_64BIT at the start.  It looks like the ix86_function_arg_boundary is different version added by me while porting to x86-64.  I remember I saw the alignment code on the patches list, and I think it didn't went it as it has been packed into dynamic stacxk alignment code that also didn't get mermged.  Since it would be nice to have this issue fixed in 3.3 release, I can take a look at it if you don't have time anytime soon.  Honza > Sigh.  I'll look into it, eventually. >  >  > BerndRelease:unknown",RESOLVED          FIXED      
15951,Bernardo Innocenti,m68k-*-elf doesn't allow --with-cpu= in the configure script,"$ ../combined/configure --target=m68k-elf --prefix=`pwd`/../install--with-newlib --with-gnu-as --with-gnu-ld --enable-languages=c--disable-multilib --with-cpu=cpu32  [ omitted ]$ make  [ omitted ]This target does not support --with-cpu.make: *** [configure-gcc] Error 1I noticed m68k-*-linux has with-cpu support, would it be difficult to allow itfor m68k-*-elf too?",RESOLVED          FIXED      
19293,Bernardo Innocenti,avr-gcc crashes when using shifts with negative shift count,"avr-gcc crashes with an internal compiler error when shift operations with negative shift count are used, e.g. a >> -13. Error message is ""negative instruction length"", probably since the expression used for calculating the instruction length (c-code) assumes the shift count to be a positive number. Test cases known to fail are, e.g. .  gcc.c-torture/compile/20020710-1                       20021119-1                       20021123-4                       920626-1                       930621-1  Problem is present in 4.0 and I expect it to exist in all the previous releases. (compare the test report in gcc-testreports@gcc.gnu.org.  Björn.",RESOLVED          FIXED      
18421,Bernardo Innocenti,"ICE in reload_cse_simplify_operands, at postreload.c:391","Hello,I tried to compile the newlib with -O1. I gotm68k-elf-gcc-B/home/bwalle/src/packages/BUILD/newlib-1.12.0/m68k-elf/m5307/newlib/ -isystem/home/bwalle/src/packages/BUILD/newlib-1.12.0/m68k-elf/m5307/newlib/targ-include-isystem /home/bwalle/src/packages/BUILD/newlib-1.12.0/newlib/libc/include -m5307 -DPACKAGE=\""newlib\"" -DVERSION=\""1.12.0\""  -I.-I../../../../.././newlib/libc/locale  -O2 -DCOMPACT_CTYPE-DMISSING_SYSCALL_NAMES -fno-builtin    -O2 -O1  -O2 -O1  -m5307 -c../../../../.././newlib/libc/locale/fix_grouping.c../../../../.././newlib/libc/locale/fix_grouping.c: In function`__fix_locale_grouping_str':../../../../.././newlib/libc/locale/fix_grouping.c:82: Fehler: Befehl erfülltnicht seine Bedingungen:(insn 217 106 107 12 (set (reg:QI 13 %a5)        (mem:QI (reg/v/f:SI 9 %a1 [orig:32 src ] [32]) [0 S1 A8])) 33{*m68k.md:826} (nil)    (nil))../../../../.././newlib/libc/locale/fix_grouping.c:82: interner Compiler-Fehler:in reload_cse_simplify_operands, bei postreload.c:391Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.It's newlib 1.12.0, so you should have the source. There are no errors withdefault -O2 or -O0.",RESOLVED          FIXED      
14018,Bernardo Innocenti,m68k backend: -malign-loops/-malign-jumps broken,"The m68k backend has -malign-loops, -malign-jumps and -malign-functionstarget options. The i386 backend has them too but warns when they are usedand suggest to use the corresponding -falign- option. Furthermore a commentof i386.c states these options are scheduled for removal.Then usage of m68k_align_loops and m68k_align_jumps is broken since bothvalues are passed as-is. However, the macros that use them as argumentsexpect log2 arguments as stated in final.c for LABEL_ALIGN_AFTER_BARRIERand LOOP_ALIGN.How-To-Repeat:Check m68k/m68k.h, m68k/m68k.c and final.c",RESOLVED          FIXED      
13292,Bernardo Innocenti,[3.4/4.0 Regression] -msoft-float seems to corrupt builtin defines,"Whilst compiling my application I noticed some of the buildin defines where not as expected.  Some basic tests showed that the -msoft-float flag seemed to be changing the builtin defines.  See results belowCompiler versions$ m68k-rtems-gcc -v -c -m68040 -save-temps test.cReading specs from /home/john/H-i686-pc-cygwin/lib/gcc/m68k-rtems/3.4/specsConfigured with: /home/john/gnu-cvs/gcc-latest/configure -v --prefix=/home/john/H-i686-pc-cygwin --target=m68k-rtems --enable-languages=c,c++,java --enable-threads=rtems --with-newlibThread model: rtemsgcc version 3.4 20031125 (experimental)Test Program$ cat test.c#ifdef __mc68000__int is__mc68000__;#endif#ifdef __mc68020__int is__mc68020__;#endif#ifdef __mc68030__int is__mc68030__;#endif#ifdef __mc68040__int __ismc68040__;#endif#ifdef __mc68060__int is__mc68060__;#endif#ifdef mc68000int ismc68000;#endif#ifdef mc68020int ismc68020;#endif#ifdef mc68030int ismc68030;#endif#ifdef mc68040int ismc68040;#endif#ifdef mc68060int ismc68060;#endifResults with m68k-rtems-gcc -save-temps -m68040, as expected$ cat test.040# 1 ""<built-in>""# 1 ""<command line>""# 1 ""test.c""int is__mc68000__;# 14 ""test.c""int __ismc68040__;int ismc68000;# 34 ""test.c""int ismc68040;Results with m68k-rtems-gcc -save-temps -m68040 -msoft-float in error seems to define other symbols$ cat test.040.soft# 1 ""<built-in>""# 1 ""<command line>""# 1 ""test.c""int is__mc68000__;int is__mc68020__;int is__mc68030__;int __ismc68040__;int ismc68000;int ismc68020;int ismc68030;int ismc68040;",RESOLVED          FIXED      
13803,Bernardo Innocenti,[3.4 Regression] movqi operand constraints too restrictivefor TARGET_COLDFIRE,"Please reopen this bug for 3.4.0. The summary should readsomething like ""movqi operand constraints too restrictivefor TARGET_COLDFIRE""This ICE was already present in 3.0.4 (PR c/5753), butkeeps appearing intermittently, probably triggered bymiddle-end changes.The ICE can be triggered on 3.3-branch and it wasapparently latent in mainline until after the 20030107snapshot.  Both 20030114 and 20030121 consistently showit.The problem has also been discussed shortly here:  http://gcc.gnu.org/ml/gcc/2004-01/msg00458.htmlIt seems this bug could be fixed by adding a newinsn for TARGET_COLDFIRE with relaxed constraintsand perhaps a longer/slower instruction sequence.m68k-uclinux-gcc  -Wall -Wstrict-prototypes -Wno-trigraphs -fno-strict-aliasing -Os  -Wa,--bitwise-or -I/usr/local/src/uclinux-tools/linux-2.6.x/include -m5200  -msoft-float -fno-builtin -nostdinc -D_LIBC -I../../include -I.-I/usr/local/lib/gcc/m68k-uclinux/3.4.0/include -DNDEBUG -DL__fpmaxtostrprintf.c -c -o _fpmaxtostr.oprintf.c: In function `_fpmaxtostr':printf.c:2454: error: insn does not satisfy its constraints:(insn 1378 536 537 38 (set (reg:QI 8 %a0)        (mem:QI (plus:SI (reg/f:SI 14 %a6)                (const_int -209 [0xffffff2f])) [0 mode+0 S1 A8])) 33{*m68k.md:825} (nil)    (nil))printf.c:2454: internal compiler error: in reload_cse_simplify_operands, atpostreload.c:378This is the offending pattern:(define_expand ""movqi""  [(set (match_operand:QI 0 ""nonimmediate_operand"" """")        (match_operand:QI 1 ""general_src_operand"" """"))]  """"  """")(define_insn """"  [(set (match_operand:QI 0 ""nonimmediate_operand"" ""=d,*a,m"")        (match_operand:QI 1 ""general_src_operand"" ""dmSi*a,di*a,dmSi""))]  ""!TARGET_COLDFIRE""  ""* return output_move_qimode (operands);"")(define_insn """"  [(set (match_operand:QI 0 ""nonimmediate_operand"" ""=d<Q>,dm,d*a"")        (match_operand:QI 1 ""general_src_operand"" ""dmi,d<Q>,di*a""))]  ""TARGET_COLDFIRE""  ""* return output_move_qimode (operands);"")",RESOLVED          FIXED      
12968,Bernardo Innocenti,doc m68k -mshort,"In the manual, ""M680x0 Options"" says that -mshort makes int 16-bitsthe same as short.  But if I'm not mistaken it also changes to just16-bit alignment for parameters passed on the stack (instead of32-bits for a normal SVR4 style system).Perhaps ""short"" is an ABI I'm not familiar with or something, but it'dbe good if the stack alignment could be mentioned too, so it doesn'tread like the option is merely a type size change.Environment:System: NetBSD lax.swox.se 1.4.1 NetBSD 1.4.1 (GENERIC) #0: Wed Aug 11 04:56:57 CDT 1999 fredb@corwin.home:/usr/src/sys/arch/mac68k/compile/GENERIC mac68khost: m68k-unknown-netbsd1.4.1build: m68k-unknown-netbsd1.4.1target: m68k-unknown-netbsd1.4.1configured with: /u/gcc/gcc-3.2.1/configure --enable-languages=c,c++How-To-Repeat:.",RESOLVED          FIXED      
15782,Bernardo Innocenti,[3.4 only] m68k_output_mi_thunk emits wrong code for ColdFire,"m68k_output_mi_thunk generats an adjustment of the first parameter on the stackand calls off to the target function.  This adjustment is done using addq/subqfor values in the range of 1-8, but fo values outside that range, it generates'add.l #<imm>,4(%sp)' which is valid for m68k, but invalid for ColdFire.  Thesuggested fix for ColdFire is to load the value into %d0, and *then* emit 'add.l%d0,4(%sp)'.The following code triggers this bug when compiled with:m68k-elf-g++ -m5307 -O     class FooA {     public:       virtual ~FooA () = 0;       int data[100];     };     class FooB {     public:       virtual void foo1 () = 0;               void fooB () {foo1 ();}       int data[100];     };     class FooC : public FooA, public FooB {     public:       virtual void foo1 () {}     };     FooC* Test ()     {       FooC* foc = new FooC;       foc->fooB ();     }",RESOLVED          FIXED      
11784,Bernardo Innocenti,atomic __exchange_and_add() broken for ColdFire and 68000 targets.,"User apps linking with libstdc++ segfault on ColdFire targets because __exchange_and_add() for vxWorks/__embedded__ targets tries to disable interrupts with the ""move #0,%sr"" privileged opcode.  Patch attached.",RESOLVED          FIXED      
16292,David Billinghurst,Test power.f90 fails on irix6.5 for complex**real,"Test power.f90 fails on irix6.5 for complex**real.The reduced test case is! Program to test the power (**) operatorprogram testpow   implicit none   real(kind=4) r, s, two   complex(kind=4) :: c, z   real, parameter :: del = 0.0001   c = (2.0, 3.0)   z = c ** 2   print *, 'z = ', z   two = 2.0   c = c ** two   print *, 'c = ',cend programwith output z =  ( -5.000000    ,  12.00000    ) c =  (  1.000000    ,  0.000000    )",RESOLVED          FIXED      
36211,David Billinghurst,__iconv_adaptor chooses char** where const char** is required,"libstdc++ testsuite cases which require libiconv fail on account of trying the wrong choice in __iconv_adaptor:/cygdrive/c/gnu/gcc-4.4-20080509/xp/i686-pc-cygwin/libstdc++-v3/include/ext/codecvt_specializations.h:302: undefined reference to `_libiconv'^M#ifndef LIBICONV_PLUG#define iconv libiconv#endifextern size_t iconv (iconv_t cd, const char* * inbuf, size_t *inbytesleft, char* * outbuf, size_t *outbytesleft);",RESOLVED          FIXED      
38956,David Billinghurst,"tests gfortran.dg/chmod_{1,2,3}.f90 fails on i686-pc-cygwin","Test gfortran.dg/chmod_1.f90 fails on i686-pc-cygwin.  The part of the test that fails is:  call chmod (n, ""a-w"", i  if (i == 0 .and. getuid() /= 0) then    if (access(n,""w"") == 0 .or. access(n,""W"") == 0) call abort  end ifn = ""foobar_file"", and after the test we have$ ls -l foobar_file-r-xr-xr-x 1 DABilling Domain_Users 0 Jan 24 13:58 foobar_fileso it appears thet the chmod function works.",RESOLVED          FIXED      
38955,David Billinghurst,testsuite/gfortran.dg/array_constructor_24.f  fails due to floating point comparison,"With recent trunk (4.4.0 20090107), test gfortran.dg/array_constructor_24.f fails on i686-pc-cygwin for the four -O3 execution tests.  The failure is in subroutine FA6013.      program try_fa6013      call fa6013 (10, 1, -1)      call fa6077 (10, 1, -1, (/1,2,3,4,5,6,7,8,9,10/))      call fa2083      end program      subroutine  FA6013 (nf10, nf1, mf1)      integer, parameter :: kv = 4      REAL(KV) DDA1(10)      REAL(KV) DDA2(10)      REAL(KV) DDA(10), dval      dda = (/1,2,3,4,5,6,7,8,9,10/)      DDA1 = ATAN2 ((/(REAL(J1,KV),J1=1,10)/),     $                 REAL((/(J1,J1=nf10,nf1,mf1)/), KV))   !fails      DDA2 = ATAN2 (DDA, DDA(10:1:-1))      if (any (abs(DDA1-DDA2) .gt. 1.0e-6)) call abort ()      ENDOn investigation, I found that all the components of arrays DDA1 and DDA2 were equal, but the test ""(any (DDA1 .ne. DDA2))"" fails.  It looks like a typical ix86 excess precision problem when comparing floating point number for equality.  The following patch allows the test to pass.--- array_constructor_24.f.orig 2009-01-24 13:14:35.828125000 +1100+++ array_constructor_24.f      2009-01-24 12:43:50.203125000 +1100@@ -19,7 +19,7 @@       DDA1 = ATAN2 ((/(REAL(J1,KV),J1=1,10)/),      $                 REAL((/(J1,J1=nf10,nf1,mf1)/), KV))   !fails       DDA2 = ATAN2 (DDA, DDA(10:1:-1))-      if (any (DDA1 .ne. DDA2)) call abort ()+      if (any (abs(DDA1-DDA2) .gt. 1.0e-6)) call abort ()       END        subroutine FA6077 (nf10,nf1,mf1, ida)",RESOLVED          FIXED      
16322,David Billinghurst,C99 complex math functions not implemented for irix6.5,"The C99 complex math functions aren't implemented for irix6.5.  This blocks gfortran complex math functions.Recent versions of the native C library support them, so it should be possible with some header hacking.",RESOLVED          FIXED      
27366,David Billinghurst,ada build fails as cygwin does not have clearenv,"cygwin does not have the clearenv function, so ada compliation dies in ada/env.c.  Testing a patch to use unsetenv path.",RESOLVED          FIXED      
26588,David Billinghurst,gfortran -fopenmp passes unrecognised -pthread,"On cygwin, gfortran -fopenmp gives the warning  gfortran: unrecognized option '-pthread'which gives a heap of failures in the testsuite.This is set in gcc.c:/* Adding -fopenmp should imply pthreads.  This is particularly important   for targets that use different start files and suchlike.  */#ifndef GOMP_SELF_SPECS#define GOMP_SELF_SPECS ""%{fopenmp: -pthread}""#endifI think the fix is to override it, as is done in gcc/config/darwin.h/* Every program on darwin links against libSystem which contains the pthread   routines, so there's no need to explicitly call out when doing threaded   work.  */#undef GOMP_SELF_SPECS#define GOMP_SELF_SPECS """"I'll prepare a patch at some stage.",RESOLVED          FIXED      
25193,David Billinghurst,libstdc++ testsuite fails on cygwin,"The libstdc++ testsuite fails on cygwin with the messageFAIL: 27_io/basic_filebuf/seekoff/char/1-io.cc execution testERROR: tcl error sourcing /usr/local/src/gcc/libstdc++-v3/testsuite/libstdc++-dg/normal.exp.ERROR: rm: cannot remove \`./1-io.exe': Permission deniedThis probably has the same root cause as PR testsuite/21945, which had a one line fix.  I'll investigate.",RESOLVED          FIXED      
16287,David Billinghurst,Test csqrt_1.f90 fails on irix6.5,"Test execute/csqrt_1.f90 fails on irix6.5Test SQRT(complex) FAILED Got  (  0.000000    ,  0.000000    )  expected  (  2.000000    ,  0.000000    )Test CSQRT(complex) FAILED Got  (  0.000000    ,  0.000000    )  expected  (  2.000000    ,  0.000000    )Test CSQRT FAILED Got  (  0.000000    ,  0.000000    )  expected  (  2.000000    ,  0.000000    )Abort (core dumped)Will follow up as time permits",RESOLVED          FIXED      
16289,David Billinghurst,Test intrinsic_nearest.f90 not portable?,"test execute/intrinsic_nearest.f90 is failing on irixReduced test case is:program test_nearest  real min  integer mini  equivalence (min,mini)  mini = 1  call test_up(0, min)endsubroutine test_up(s, e)  real s, e, x  integer xi  equivalence (x,xi)  x = nearest(s, 1.0)  if (x .ne. e) then    write(6,*) 's= ', s    write(6,*) 'e= ', e    write(6,*) 'x= ', x    write(6,*) 'xi= ', xi       call abort()  end ifendand output from this is  s=    0.000000     e=    0.000000     x=   1.1754943E-38     xi=      8388608Looks to me like the representation of min using the equivalenceis wrong for irix, and therefore the test is not portable.Using the tiny() intrinsic works for me.  I will submit a patch.",RESOLVED          FIXED      
16290,David Billinghurst,Test intrinsic_set_exponent.f90 fails on irix6.5,"Test intrinsic_set_exponent.f90 execute fails on irix6.5 with N32 and 64 ABIs.For the N32 ABI, the very first test fails.  I see n = -148 x = 1024.000     y = set_exponent(x,n) = 0.000000     exponent(y)= 0I will follow up as time permits.",RESOLVED          FIXED      
21945,David Billinghurst,gfortran testsuite dies on cygwin (again),The gfortran testsuite fails on cygwin with FAIL: gfortran.dg/forall_1.f90 execution testERROR: tcl error sourcing /usr/local/src/gcc/gcc/testsuite/gfortran.dg/dg.exp.ERROR: rm: cannot remove `./forall_1.exe': Permission deniedI have seen this before.  It seems that dejagnu tries to delete the file before the OS has finished with it.  The last case was fixed with the patch below.  Good chance something similar will fix this one.  I'll look into it.2005-04-29  David Billinghurst (David.Billinghurst@riotinto.com)	* lib/fortran-torture.exp (fortran-torture.exp): Catch	error if file cannot be deleted.,RESOLVED          FIXED      
16043,David Billinghurst,"[3.4 only] gcc version not reported with ""enable-version-specific-runtime-libs"" to gcc-testresults","The test_summary script is not reporting the GCC version in my mail to gcc-testresults.  I think I have tracked down the problem and am testing a fix.The problem appears to be in gcc/testsuite/gcc.exp (and the other tool.exp routines).  The regexp to print and report the version is   regexp ""version\[^\n\r\]*"" $output versionHowever ""/usr/local/obj/gcc/gcc/xgcc -B/usr/local/obj/gcc/gcc/ -v"" givesReading specs from /usr/local/obj/gcc/gcc/specsConfigured with: /usr/local/src/gcc/configure --prefix=/usr/local/gcc-3_5 --enable-threads=posix --enable-languages=c,c++,f95,java,objc --disable-libgcj --enable-sjlj-exceptions --with-system-zlib --enable-nls --disable-libmudflap --disable-libstdcxx-pch --enable-version-specific-runtime-libs --without-included-gettext --disable-sharedThread model: posixgcc version 3.5.0 20040617 (experimental)and the regexp finds --enable-version-specific-runtime-libs flag.",RESOLVED          FIXED      
15930,David Billinghurst,[irix6.5] gfortran libraries not built,"The gfortran testsuite cannot find -lgfortranbegin, so many tests fail withExecuting on host: /disk4/billingd/obj/gcc-f/gcc/testsuite/../gfortran -B/disk4/billingd/obj/gcc-f/gcc/testsuite/../ /disk4/billingd/src/gcc/gcc/testsuite/gfortran.fortran-torture/execute/a_edit_1.f90  -w  -O0   -L/disk4/billingd/obj/gcc-f/mips-sgi-irix6.5/./libiberty  -lm   -o /disk4/billingd/obj/gcc-f/gcc/testsuite/a_edit_1.x    (timeout = 300)ld32: FATAL   9  : I/O error (-lgfortranbegin): No such file or directorycollect2: ld returned 32 exit statuscompiler exited with status 1output is:I have seen this before.  I think the fix can be taken across from the g++ testsuite harness.  Assigned to self.",RESOLVED          FIXED      
16291,David Billinghurst,F2003 formatting of Inf /Nan on irix6.5,"Test nan_inf_fmt.f90 fails on irix6.5 with N32 and 64 ABIs.The failure occurs when writing to a string with a fieldwidth of 3.  With the lines commented out (below) the testpasses and the two write(6,fmt=fmt) lines I inserted produce""Inf"" as desired.  ! check a field width = 3       print *, 3       fmt = '(F3.0)'       write(6,fmt=fmt)pos_inf!       write(l,fmt=fmt)pos_inf!       if (l.ne.'Inf') call abort       write(6,fmt=fmt)neg_inf!       write(l,fmt=fmt)neg_inf!       if (l.ne.'Inf') call abort       write(l,fmt=fmt)nan       write(l,fmt=fmt)nan       if (l.ne.'NaN') call abortWill follow up as time permits.",RESOLVED          FIXED      
16444,David Billinghurst,gfortran.dg test harness barfs on multilibs,"The new gfortran.dg test harness barfs on multilibs.  I tested it on two platforms, but didn't test multiple ABIs.  It doesn't seem to do any damage (other than not running tests) so I won't revert the patch.  I will look into it.gfortran.log shows:Running target unix/-mabi=64Running /disk4/billingd/src/gcc-f/gcc/testsuite/gfortran.dg/dg.exp ...ERROR: tcl error sourcing /disk4/billingd/src/gcc-f/gcc/testsuite/gfortran.dg/dg.exp.ERROR: couldn't compile regular expression pattern: parentheses () not balanced    while executing""regexp ""$pattern"" $lower""    (procedure ""search_for"" line 5)    invoked from within""search_for $test ""for*(""""    (procedure ""gcc-dg-runtest"" line 14)    invoked from within""gcc-dg-runtest $testcases ${default-extra-flags}""    (procedure ""gfortran-dg-runtest"" line 2)    invoked from within""gfortran-dg-runtest [lsort [glob -nocomplain $srcdir/$subdir/g77/*.f ] ] \	$DEFAULT_FFLAGS""    (file ""/disk4/billingd/src/gcc-f/gcc/testsuite/gfortran.dg/dg.exp"" line 35)    invoked from within""source /disk4/billingd/src/gcc-f/gcc/testsuite/gfortran.dg/dg.exp""    (""uplevel"" body line 1)    invoked from within""uplevel #0 source /disk4/billingd/src/gcc-f/gcc/testsuite/gfortran.dg/dg.exp""    invoked from within""catch ""uplevel #0 source $test_file_name""""",RESOLVED          FIXED      
2620,David Billinghurst,Filenames differ only in case,"This summarizes discussion on gcc@gcc.gnu.org on/about 11 April 2001.  It is a minor annoyance that should be fixed one day.In the source tree we have *	libffi/src/mips/n32.S*	libffi/src/mips/n32.s*	libffi/src/mips/o32.S*	libffi/src/mips/o32.sThe *.s just include the *.SThis causes some warnings when using CVS on cygwin, but fortunately the files aren't used on cygwin.  There is the potential to cause problems building a cross compiler, etc.Tom Tromey suggested a fixRelease:gcc 3.xEnvironment:all",RESOLVED          FIXED      
3392,David Billinghurst,"ICE in function_arg, at config/mips/mips.c:4007","A number of g77 tests fail on mips-sgi-irix6.5 using -mabi=64.  The error is Internal compiler error in function_arg, at config/mips/mips.c:4007The tests that fail are: g77.f-torture/compile/20000511-2.f g77.f-torture/compile/980310-3.f g77.f-torture/compile/19990905-2.f g77.f-torture/execute/19981119-0.f g77.f-torture/execute/20010116.fThe failures occur at all levels of optimisation.  The failures were introduced between 20010501 and 20010507.  I have not been able to narrow the interval as gcc would not bootstrap on irix in over this period.Release:gcc-3.1Environment:mips-sgi-irix6.5How-To-Repeat:bootstrap and run testsuite with -mabi=64",RESOLVED          FIXED      
3393,David Billinghurst,"ICE in extract_insn, at recog.c:2173","Test g77.f-torture/execute/labug1.f compilation fails for mips-sgi-irix6.5 -mabi=64 with -O2 and -O3.  This is a regression from gcc-3.0.The failure was introduced between 20010501 and 20010507.  It may be related to PR fortran/3392.Compiler output is:labug1.f: In program `labug1':labug1.f:42: Unrecognizable insn:(insn 670 276 367 (set (reg:DI 254)        (plus:DI (reg:DI 254)            (sign_extend:DI (const_int 50 [0x32])))) -1 (nil)    (nil))labug1.f:42: Internal compiler error in extract_insn, at recog.c:2173Release:gcc-3.1Environment:mips-sgi-irix6.5How-To-Repeat:bootstrap and run g77 testsuite with -mabi=64",RESOLVED          FIXED      
4479,David Billinghurst,can't build under cygwin,"libiberty fails to build:make[1]: Entering directory `/cygdrive/e/gcc-src/build2/libiberty'if [ x"""" != x ]; then \  gcc -c -DHAVE_CONFIG_H -g -O2 -I. -I../../gcc/libiberty/../include  -W -Wall -Wtraditional -pedantic  ../../gcc/libiberty/strerror.c -o pic/strerror.o; \else true; figcc -c -DHAVE_CONFIG_H -g -O2 -I. -I../../gcc/libiberty/../include  -W -Wall -Wtraditional -pedantic ../../gcc/libiberty/strerror.c../../gcc/libiberty/strerror.c:465: warning: static declaration for `sys_nerr' follows non-static../../gcc/libiberty/strerror.c:466: conflicting types for `sys_errlist'/usr/include/sys/errno.h:23: previous declaration of `sys_errlist'make[1]: *** [strerror.o] Error 1make[1]: Leaving directory `/cygdrive/e/gcc-src/build2/libiberty'make: *** [all-libiberty] Error 2Release:gcc_3_0_1_releaseEnvironment:latest cygwin release as of 5 Oct 2001How-To-Repeat:1. install fresh copy of latest cygwin release2. get gcc_3_0_1_release from CVS3. configure --with-languages=c,c++4. make bootstrap",RESOLVED          FIXED      
4514,David Billinghurst,"Internal compiler error in `calculate_giv_inc', at unroll.c:1604","g77  -i686 -march=i686 -O3 -malign-loops=2 -malign-jumps=2 -malign-functions=2    -finit-local-zero -fomit-frame-pointer -fno-f2c -malign-double -funroll-loops -c cr.f   cr.f: In subroutine `cr06':cr.f:3515: Internal compiler error:cr.f:3515: Internal compiler error in `calculate_giv_inc', at unroll.c:1604Please submit a full bug report.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.incidentally cr.f:3515 is the return statement at end ofsubroutine.g77 version 2.95.4 20010902 (Debian prerelease) (from FSF-g77 version 0.5.25 20010319 (prerelease))Driving: f77 -v -c -xf77-version /dev/null -xnoneReading specs from /usr/lib/gcc-lib/i386-linux/2.95.4/specsgcc version 2.95.4 20010902 (Debian prerelease) /usr/lib/gcc-lib/i386-linux/2.95.4/cpp0 -lang-c -v -D__GNUC__=2 -D__GNUC_MINOR__=95 -D__ELF__ -D__unix__ -D__i386__ -D__linux__ -D__unix -D__linux -Asystem(posix) -D_LANGUAGE_FORTRAN -traditional -Acpu(i386) -Amachine(i386) -Di386 -D__i386 -D__i386__ /dev/null /dev/nullGNU CPP version 2.95.4 20010902 (Debian prerelease) (i386 Linux/ELF)#include ""..."" search starts here:#include <...> search starts here: /usr/lib/gcc-lib/i386-linux/2.95.4/include /usr/includeEnd of search list.The following default directories have been omitted from the search path: /usr/lib/gcc-lib/i386-linux/2.95.4/../../../../include/g++-3 /usr/local/include /usr/lib/gcc-lib/i386-linux/2.95.4/../../../../i386-linux/includeEnd of omitted list. /usr/lib/gcc-lib/i386-linux/2.95.4/f771 -fnull-version -quiet -dumpbase g77-version.f -version -fversion -o /tmp/ccP2avtE.s /dev/nullGNU F77 version 2.95.4 20010902 (Debian prerelease) (i386-linux) compiled by GNU C version 2.95.4 20010902 (Debian prerelease).GNU Fortran Front End version 0.5.25 20010319 (prerelease) as -V -Qy -o /tmp/ccs8GmR7.o /tmp/ccP2avtE.sGNU assembler version 2.11.90.0.31 (i386-linux) using BFD version 2.11.90.0.31 ld -m elf_i386 -dynamic-linker /lib/ld-linux.so.2 -o /tmp/cc1XB8RC /tmp/ccs8GmR7.o /usr/lib/crt1.o /usr/lib/crti.o /usr/lib/gcc-lib/i386-linux/2.95.4/crtbegin.o -L/usr/lib/gcc-lib/i386-linux/2.95.4 -lg2c -lm -lgcc -lc -lgcc /usr/lib/gcc-lib/i386-linux/2.95.4/crtend.o /usr/lib/crtn.o /tmp/cc1XB8RC__G77_LIBF77_VERSION__: 0.5.25 20010319 (prerelease)@(#)LIBF77 VERSION 19990503__G77_LIBI77_VERSION__: 0.5.25 20010319 (prerelease)@(#) LIBI77 VERSION pjw,dmg-mods 19990503__G77_LIBU77_VERSION__: 0.5.25 20010319 (prerelease)@(#) LIBU77 VERSION 19980709Release:g77 version 2.95.4 20010902 (Debian prerelease)Environment:Debian i686 woodyHow-To-Repeat:compile with options as in description",RESOLVED          FIXED      
5145,David Billinghurst,[cygwin] Failure of test 23_containers/map_operators.cc,"Test 23_containers/map_operators.cc fails with attached error message about no    match for `std::_Rb_tree_iterator<std::pair<const unsigned int, int>,    std::pair<const unsigned int, int>&, std::pair<const unsigned int, int>*>&    != std::_Rb_tree_iterator<std::pair<const std::string, unsigned int>,    std::pair<const std::string, unsigned int>&, std::pair<const std::string,    unsigned int>*>' operatorBenjamin Kosnik <bkoz@redhat.com> writes:both libstdc++/5145 and libstdc++/5146 are the same issue.These tests should fail, if they don't it's an error. You'd think that this is just a question of doing dg-error on the line in question, but it doesn't seem too work with multi-line C++ errors or something, sothe ""excess errors"" part was put in.If you can think of a better way to do this, and or one that eliminates the excess errors markings in these twofiles I'm all ears.-benjaminRelease:gcc 3.1 2001-12-17Environment:i686-pc-cygwinHow-To-Repeat:${srcdir}/configure --host=i686-pc-cygwin --enable-threads=posix --disable-libgcj --enable-sjlj-exceptions --with-system-zlib --disable-nls --disable-sharedmakemake check",RESOLVED          FIXED      
5146,David Billinghurst,[cygwin] Failure of test 23_containers/set_operators.cc,"Test 23_containers/set_operators.cc fails on cygwin.  This may be related to PR libstdc++/5145.The warning is /usr/local/src/gcc/libstdc++-v3/testsuite/23_containers/set_operators.cc:40: no    match for `std::_Rb_tree_iterator<unsigned int, const unsigned int&, const    unsigned int*>& != std::_Rb_tree_iterator<std::string, const std::string&,    const std::string*>' operatorFull output attachedBenjamin Kosnik <bkoz@redhat.com> writes:both libstdc++/5145 and libstdc++/5146 are the same issue.These tests should fail, if they don't it's an error. You'd think that this is just a question of doing dg-error on the line in question, but it doesn't seem to work with multi-line C++ errors or something, sothe ""excess errors"" part was put in.If you can think of a better way to do this, and or one that eliminates the excess errors markings in these twofiles I'm all ears.-benjaminRelease:gcc 3.1 2001-12-17Environment:i686-pc-cygwinHow-To-Repeat:${srcdir}/configure --host=i686-pc-cygwin --enable-threads=posix --disable-libgcj --enable-sjlj-exceptions --with-system-zlib --disable-nls --disable-sharedmakemake check",RESOLVED          FIXED      
5148,David Billinghurst,libstdc++-v3 testsuite does not delete executables on cygwin,The libstdc++-v3 testsuite does not delete executable files on cygwin.  The problem arises since cygwin ld automatically converts foo to foo.exeA similar problem was fixed somewhere in the gcc testsuite by unconditionally adding .exe to all executable files.  I will try and prepare a patch.  (I am on a roll with dejagnu this week)Release:gcc 3.1 2001-12-18Environment:i686-pc-cygwin,RESOLVED          FIXED      
5150,David Billinghurst,[cygwin] Failure of test g++.dg/ext/align1.C,"Test g++.dg/ext/align1.C fails on cygwin with<..>/gcc/testsuite/g++.dg/ext/align1.C:9: warning: alignment of `volatile float a1[15][4][4]' is greater than maximum object file alignment. Using 16<..>/gcc/testsuite/g++.dg/ext/align1.C:11: warning: alignment of `float f1' is greater than maximum object file alignment. Using 16I suspect this should be marked as XFAIL, but I haven't worked out how (yet).Release:gcc 3.1 2001-12-18Environment:i686-pc-cygwin",RESOLVED          FIXED      
5151,David Billinghurst,[cygwin] Failure of test g++.old-deja/g++.ext/attrib5.C,Test g++.old-deja/g++.ext/attrib5.C fails on cygwin with:<..>/gcc/testsuite/g++.old-deja/g++.ext/attrib5.C:5: warning: weak declaration of `void f()' not supportedAs cygwin does not support weak symbols I guess this should be either XFAIL or UNSUPPORTED.  I haven't worked out how to do this (yet).Release:gcc 3.1 2001-12-18Environment:i686-pc-cygwin,RESOLVED          FIXED      
6277,David Billinghurst,Failure of test gcc.dg/i386-387-1.c on cygwin,"gcc.dg/i386-387-1.c fails on cygwin with:FAIL: gcc.dg/i386-387-1.c scan-assembler call	sinFAIL: gcc.dg/i386-387-1.c scan-assembler call	cosFAIL: gcc.dg/i386-387-1.c scan-assembler call	sqrtInspection of the assembler shows lines ""call  _sin"" etcIf this is the desired outcome then the scan-assemblerregex needs patching (below)Release:unknownEnvironment:i686-pc-cygwinHow-To-Repeat:bootstrap and run testsuite",RESOLVED          FIXED      
6751,David Billinghurst,SGI6.5 build environment difficulties in libstdc++,"using ""./configure --prefix=<dir>"" followed by ""make"" (gnu, not native), the build breaks in mips-sgi-irix-6.5/mabi=6.4/libstdc++v3/ with an error that it cannot make ""all"" (due to Makefile not existing; Makefile.am and Makefile.in do exist).Interspersed with this, install.sh fails to be found while working in this directory and the subdirectory include/.I got around these build environemnt problems by sym-linking each of config.* into the mips-sgi-irix-6.5/ directory and sym-linking install.sh to both mips-sgi-irix-6.5 and its mabi=6.4 subdirectory.  I do not know *which* of config.* were necessary; however, atleast two were.This appears to be systemic in the build environment.  I am experienced with autoconf and vaguely familiar with automake.Release:3.1.0Environment:SGI6.5",RESOLVED          FIXED      
10965,David Billinghurst,g77 compiles illegal code in testsuite,"Steve Kargl reported a problem with 20000601-2.f.  The test is one of mine. I will check over my notes and come up with a fix.I'm running the Fortran 77 code in gcc-testsuite-3.3.tar.bz2through g95 and I've found that 20000601-2.f containsillegal code for Fortran 95 and probably Fortran 77.  I don'thave the Fortran 77 standard handy, but I believe the code isillegal; yet g77 compiles the code without warning or error. kargl[303] f77 -v -c 20000601-2.fUsing built-in specs.Configured with: FreeBSD/i386 system compilerThread model: posixgcc version 3.2.2 [FreeBSD] 20030205 (release)kargl[305] f95 -V -fixed -dusty 20000601-2.fNAGWare Fortran 95 compiler Release 4.2(468)Copyright 1990-2002 The Numerical Algorithms Group Ltd., Oxford, U.K.f95comp version is 4.2(468)Warning: 20000601-2.f, line 27: Unused symbol WORK31         detected at END@<end-of-statement>Warning: 20000601-2.f, line 27: Unused symbol WORK13         detected at END@<end-of-statement>[f95 continuing despite warning messages]Obsolescent: 20000601-2.f, line 1: Fixed source formError: 20000601-2.f, line 21: Inconsistent argument data types to intrinsic MAXkargl[318] ../../../../bin/g95 -ffixed-form -c -x f95 20000601-2.f In file 20000601-2.f:21            JP = MAX( KM+1, AB( KV+1, JJ ) )                          1Error: 'a2' argument of 'max' intrinsic at (1) must be INTEGER(4)-- Stevehttp://troutmask.apl.washington.edu/~kargl/",RESOLVED          FIXED      
26933,Ben Elliston,Volatile member in struct member accessed/written implicitly,"This actually occurs on 3.3.3 and 4.0.3 (haven't tried others).When a structure contains a 32 bit int, and because of alignement, it is not located on a 64 bit boundary *and* (apparently) the compiler aligns a bitfield int on the first fullword, operations on that bitfield implicitly access the volatile member.For exemple, the following structure is affected :struct foo{    long long A;    int B:1;    volatile int C;};In this case, storing into foo.b triggers a load and a store from foo.C.The following code sample demonstrates that :struct _test1{        long long A;        int B:1;        volatile int C;};unsigned int foo(struct _test1 *data){        data->B=1;        return data->C;}Generating assembler output with ""gcc -m64 foo.c -S"" shows the following for function ""foo"" (comments are my own)        ld 9,112(31) * Get ""data""        ld 11,8(9) * get data->B 64 bit value - including data->C        li 0,-1 * Set        rldicr 0,0,0,0 * The Right         or 0,11,0 * Bit and        std 0,8(9) * Store 64 bit value Including data->C        ld 9,112(31) * get data again         lwz 0,12(9) * get C for returnIf data->C is altered somewhere else (thread for exemple) or if read or writing C has a side affect (I/O area) then although the code has never explicitly accessed or stored data in the code, the program will implictly access or store in that field - thus defeating the purpose of the 'volatile' type specifier.Note that this occurs EVEN without optimization.This problem may or may not affect other 64 bit platforms (this depends whether it is insns generation related or backend related or both).*Possible Workaround*If feasable - align serializable 32 bit ints manually to ensure 64 bit alignement.Note that I also have a 'working' program that demonstrates the volatile variable being altered without being accessed explicitly... I can provide it if necessary.--Ivan",RESOLVED          FIXED      
41173,Ben Elliston,[LTO] internal error: builtin function to __builtin_spe_mtspefscr already processed,$ ./xgcc -vUsing built-in specs.COLLECT_GCC=./xgccTarget: powerpc-e500v2-linux-gnuspeConfigured with: ../configure --target=powerpc-e500v2-linux-gnuspe --prefix=/home/ryan/x-tools/powerpc-e500v2-linux-gnuspe --with-sysroot=/home/ryan/x-tools/powerpc-e500v2-linux-gnuspe/powerpc-e500v2-linux-gnuspe/sys-root --enable-languages=c --disable-multilib --with-cpu=8548 --with-tune=8548 --enable-__cxa_atexit --with-local-prefix=/home/ryan/x-tools/powerpc-e500v2-linux-gnuspe/powerpc-e500v2-linux-gnuspe/sys-root --disable-nls --enable-threads=posix --enable-symvers=gnu --enable-c99 --enable-long-long --enable-target-optspace --enable-e500_double --with-long-double-128Thread model: posixgcc version 4.5.0 20090824 (experimental) [lto revision 151111] (lto merged with rev 150842)$ touch empty.c$ ./xgcc -B. -shared -flto empty.c -fpiclto1: fatal error: internal error: builtin function to __builtin_spe_mtspefscr already processed.compilation terminated.lto-wrapper: ././xgcc returned 1 exit statuscollect2: lto-wrapper returned 1 exit status,RESOLVED          FIXED      
39316,Ben Elliston,[lto] revision 144454 - Configure should check for elf support (similar to gmp/mpfr/PPL/CLooG),"It is my Request for Enhancement that the 'Configury' detect ifthere is enough elf support to build gcc - in a similar manner thatgmp, mpfr, PPL and CLooG are tested for.The configury is waiting until it gets past configuring the gcc directory,and even detecting that gelf.h is not present, before the build fails. This Operating System (Debian GNU/Linux) does have ""/usr/include/elf.h""in a default installation but is 'lacking enough elf' to build withoutfailing. This should be checked in ../lto_trunk/configure .# make...Configuring stage 1 in ./gccconfigure: creating cache ./config.cachechecking build system type... x86_64-unknown-linux-gnu...checking for pthread.h... yeschecking for libelf.h... nochecking for libelf/libelf.h... nochecking for gelf.h... nochecking for libelf/gelf.h... nochecking for CHAR_BIT... yes...make[3]: Entering directory `/usr/src/lto_build/lto-plugin'if /bin/sh ./libtool --tag=CC --mode=compile gcc -DPACKAGE_NAME=\""LTO\ plugin\ for\ ld\"" -DPACKAGE_TARNAME=\""lto-plugin\"" -DPACKAGE_VERSION=\""0.1\"" -DPACKAGE_STRING=\""LTO\ plugin\ for\ ld\ 0.1\"" -DPACKAGE_BUGREPORT=\""\"" -DPACKAGE=\""lto-plugin\"" -DVERSION=\""0.1\"" -DSTDC_HEADERS=1 -DHAVE_SYS_TYPES_H=1 -DHAVE_SYS_STAT_H=1 -DHAVE_STDLIB_H=1 -DHAVE_STRING_H=1 -DHAVE_MEMORY_H=1 -DHAVE_STRINGS_H=1 -DHAVE_INTTYPES_H=1 -DHAVE_STDINT_H=1 -DHAVE_UNISTD_H=1 -DHAVE_DLFCN_H=1 -DLT_OBJDIR=\"".libs/\"" -I. -I../../lto_trunk/lto-plugin  -I../../lto_trunk/lto-plugin/../include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64  -Wall -Werror -g -fkeep-inline-functions -MT lto-plugin.lo -MD -MP -MF "".deps/lto-plugin.Tpo"" -c -o lto-plugin.lo ../../lto_trunk/lto-plugin/lto-plugin.c; \	then mv -f "".deps/lto-plugin.Tpo"" "".deps/lto-plugin.Plo""; else rm -f "".deps/lto-plugin.Tpo""; exit 1; filibtool: compile:  gcc ""-DPACKAGE_NAME=\""LTO plugin for ld\"""" -DPACKAGE_TARNAME=\""lto-plugin\"" -DPACKAGE_VERSION=\""0.1\"" ""-DPACKAGE_STRING=\""LTO plugin for ld 0.1\"""" -DPACKAGE_BUGREPORT=\""\"" -DPACKAGE=\""lto-plugin\"" -DVERSION=\""0.1\"" -DSTDC_HEADERS=1 -DHAVE_SYS_TYPES_H=1 -DHAVE_SYS_STAT_H=1 -DHAVE_STDLIB_H=1 -DHAVE_STRING_H=1 -DHAVE_MEMORY_H=1 -DHAVE_STRINGS_H=1 -DHAVE_INTTYPES_H=1 -DHAVE_STDINT_H=1 -DHAVE_UNISTD_H=1 -DHAVE_DLFCN_H=1 -DLT_OBJDIR=\"".libs/\"" -I. -I../../lto_trunk/lto-plugin -I../../lto_trunk/lto-plugin/../include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -Wall -Werror -g -fkeep-inline-functions -MT lto-plugin.lo -MD -MP -MF .deps/lto-plugin.Tpo -c ../../lto_trunk/lto-plugin/lto-plugin.c  -fPIC -DPIC -o .libs/lto-plugin.o../../lto_trunk/lto-plugin/lto-plugin.c:56:4: error: #error ""gelf.h not available""../../lto_trunk/lto-plugin/lto-plugin.c:170: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token...../../lto_trunk/lto-plugin/lto-plugin.c:619: error: ‘EV_NONE’ undeclared (first use in this function)make[3]: *** [lto-plugin.lo] Error 1make[3]: Leaving directory `/usr/src/lto_build/lto-plugin'make[2]: *** [all-stage1-lto-plugin] Error 2make[2]: Leaving directory `/usr/src/lto_build'make[1]: *** [stage1-bubble] Error 2make[1]: Leaving directory `/usr/src/lto_build'make: *** [all] Error 2# ls -l /usr/include/elf.h -rw-r--r-- 1 root root 110896 2009-01-04 10:10 /usr/include/elf.h# ls -l /usr/include/gelf.h ls: cannot access /usr/include/gelf.h: No such file or directory# locate gelf.h(Nothing printed)# locate elf.h/usr/include/elf.h/usr/include/linux/elf.h/usr/include/sys/elf.h# gcc/xgcc -vUsing built-in specs.COLLECT_GCC=gcc/xgccTarget: x86_64-unknown-linux-gnuConfigured with: ../lto_trunk/configure --prefix=/usr/local/lto --enable-languages=lto,c++ --enable-stage1-checking=all --enable-checking=releaseThread model: posixgcc version 4.4.0 20090218 (experimental) [lto revision 144454] (lto merged with rev 144262)",RESOLVED          FIXED      
39279,Ben Elliston,[lto] - Werror in ../lto_trunk/gcc/lto/lto.c,"# cat stage_current stage2# gcc/xgcc -vUsing built-in specs.COLLECT_GCC=gcc/xgccTarget: i386-pc-solaris2.11Configured with: ../lto_trunk/configure --prefix=/usr/local/lto --enable-languages=lto,c++ --enable-shared --disable-static --enable-multilib --with-gnu-as --with-as=/usr/local/bin/as --with-gnu-ld --with-ld=/usr/local/bin/ld --with-gmp=/usr/local --with-mpfr=/usr/local --without-ppl --with-demangler-in-ld --enable-clocale=gnu --with-system-libunwind --with-libelf=/usr/local CPPFLAGS=-I/usr/local/includeThread model: posixgcc version 4.4.0 20090218 (experimental) [lto revision 144375] (lto merged with rev 144262) /usr/share/src/lto_build/./prev-gcc/xgcc -B/usr/share/src/lto_build/./prev-gcc/ -B/usr/local/lto/i386-pc-solaris2.11/bin/ -c  -g -O2 -DIN_GCC   -W -Wall -Wwrite-strings -Wstrict-prototypes -Wmissing-prototypes -Wcast-qual -Wold-style-definition -Wc++-compat -Wmissing-format-attribute -pedantic -Wno-long-long -Wno-variadic-macros -Wno-overlength-strings -Werror -fno-common  -DHAVE_CONFIG_H -I. -Ilto -I../../lto_trunk/gcc -I../../lto_trunk/gcc/lto -I../../lto_trunk/gcc/../include -I../../lto_trunk/gcc/../libcpp/include -I/usr/local/include -I/usr/local/include -I../../lto_trunk/gcc/../libdecnumber -I../../lto_trunk/gcc/../libdecnumber/dpd -I../libdecnumber    ../../lto_trunk/gcc/lto/lto.c -o lto/lto.occ1: warnings being treated as errors../../lto_trunk/gcc/lto/lto.c: In function ‘free_section_data’:../../lto_trunk/gcc/lto/lto.c:497: error: request for implicit conversion from ‘void *’ to ‘caddr_t’ not permitted in C++gmake[3]: *** [lto/lto.o] Error 1gmake[3]: Leaving directory `/usr/share/src/lto_build/gcc'gmake[2]: *** [all-stage2-gcc] Error 2gmake[2]: Leaving directory `/usr/share/src/lto_build'gmake[1]: *** [stage2-bubble] Error 2gmake[1]: Leaving directory `/usr/share/src/lto_build'gmake: *** [all] Error 2Rob",RESOLVED          FIXED      
39042,Ben Elliston,[LTO] LTO tests don't cleanup temporary files,"I have 10GB free space in /tmp. But it isn't enough to run""make check"" because LTO tests don't cleanup after run. Itleads to many false alarms and make my machine unusable.",RESOLVED          FIXED      
39301,Ben Elliston,"ICE in register_overhead, at bitmap.c:115","With this compiler:[lucier@descartes gambc-v4_4_1-devel]$ /pkgs/gcc-mainline/bin/gcc -vUsing built-in specs.Target: powerpc64-unknown-linux-gnuConfigured with: ../../mainline/configure --prefix=/pkgs/gcc-mainline --enable-languages=c --enable-gather-detailed-mem-stats --with-cpu=default64Thread model: posixgcc version 4.4.0 20090224 (experimental) [trunk revision 144414] (GCC) with compiler.i found athttp://www.math.purdue.edu/~lucier/bugzilla/8and this command line:[lucier@descartes gambc-v4_4_1-devel]$ gdb /pkgs/gcc-mainline/libexec/gcc/powerpc64-unknown-linux-gnu/4.4.0/cc1(gdb) run  -I../include -Wall -W -Wno-unused -O1 -fno-math-errno -fschedule-insns2 -O1 -fno-math-errno -fschedule-insns2 -fno-trapping-math -fno-strict-aliasing -fwrapv -fomit-frame-pointer -fPIC -fno-common  compiler.ione gets an ICE Starting program: /pkgs/gcc-mainline/libexec/gcc/powerpc64-unknown-linux-gnu/4.4.0/cc1 -I../include -Wall -W -Wno-unused -O1 -fno-math-errno -fschedule-insns2 -O1 -fno-math-errno -fschedule-insns2 -fno-trapping-math -fno-strict-aliasing -fwrapv -fomit-frame-pointer -fPIC -fno-common  compiler.i btowc wctob mbrlen {GC 5504k -> 3345k} {GC 5325k -> 4387k} code_size ___H__20_compiler_2e_o1 {GC 202396k -> 113348k} ___init_proc ____20_compiler_2e_o1Analyzing compilation unit {GC 182571k -> 135708k}Performing interprocedural optimizations <visibility> <early_local_cleanups> {GC 237987k -> 236439k} <summary generate> <inline> <static-var> <pure-const>Assembling functions: code_size ___init_proc ____20_compiler_2e_o1 ___H__20_compiler_2e_o1 {GC 349654k -> 288661k} {GC 406235k -> 272087k}compiler.c: In function ‘___H__20_compiler_2e_o1’:compiler.c:322876: internal compiler error: in register_overhead, at bitmap.c:115I'm sorry the test case is enormous, but it runs in about a GB of RAM. I also haven't been able to figure out how to use gdb properly in this mixed ppc32/ppc64 environment.",RESOLVED          FIXED      
40035,Ben Elliston,ICE when cross-compiling with -Os,"When cross-compiling the attached test case with -Os, the x86_64 cross-compiler produces an ICE:/home/bje/44bug/main.c: In function ‘unknown_bootoption’:/home/bje/44bug/main.c:34: internal compiler error: in simplify_subreg, at simplify-rtx.c:4975Please submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.",RESOLVED          FIXED      
5267,Ben Elliston,"invoke.texi ""RS/6000 and PowerPC Options"" list needs cleanup","In the ""RS/6000 and PowerPC Options"" node in invoke.texi, the descriptionsof the various -mcall-* options are somewhat misleading.  That is,they say ""On System V.4 and embedded PowerPC systems ..."" when in factthese options are available on other (all?) PowerPC configurations.The -mcall-solaris option is documented in that table but does not exist.In ""Option Summary"", only some of the -mcall-* options are listed.Release:3.1 20011028 (experimental)Environment:System: Linux redhat.sf.frob.com 2.4.9-6smp #1 SMP Thu Oct 18 09:22:57 EDT 2001 i686 unknownArchitecture: i686	host: i686-pc-linux-gnubuild: i686-pc-linux-gnutarget: powerpc-unknown-linux-gnuconfigured with: ../../gcc/configure --host=i686-linux --target=ppc-linux : (reconfigured) ../../gcc/configure --host=i686-linux --target=ppc-linux : (reconfigured) ../../gcc/configure --host=i686-linux --target=ppc-linuxHow-To-Repeat:Read it.",RESOLVED          FIXED      
36800,Ben Elliston,va_arg for _Decimal128 on 32-bit Power mishandled in certain cases,"The following fails on 32-bit hard-float powerpc*-*-linux* (tested for trunk,code inspection indicates present for 4.3 as well).#include <stdarg.h>extern void abort (void);voidf (int a, ...){  va_list ap;  if (a != 0)    abort ();  va_start (ap, a);  if (va_arg (ap, _Decimal128) != 1.2DL)    abort ();  if (va_arg (ap, _Decimal128) != 2.34DL)    abort ();  if (va_arg (ap, _Decimal128) != 3.456DL)    abort ();  if (va_arg (ap, _Decimal128) != 4.567DL)    abort ();  if (va_arg (ap, double) != 5.125)    abort ();  va_end (ap);}intmain (void){  f (0, 1.2DL, 2.34DL, 3.456DL, 4.567DL, 5.125);  return 0;}Suppose some arguments are passed in floating-point registers using all butf8 and maybe f7 of the registers available for floating-point arguments.Suppose the next argument is _Decimal128, so is passed on the stack becausean aligned pair of registers is not available, and that this _Decimal128argument is one of the variable arguments in a call to a variadic function,and that a following argument is one that would fit in a single floating-pointregister if the _Decimal128 argument hadn't forced all subsequentfloating-point arguments to go on the stack.Then the code to ensure that subsequent va_arg calls after the one gettingthat _Decimal128 argument do not look in the saved floating-pointregisters      if ((n_reg == 2 && !regalign) || n_reg > 2)        {          /* Ensure that we don't find any more args in regs.             Alignment has taken care of for special cases.  */          t = build_gimple_modify_stmt (reg,                                        build_int_cst (TREE_TYPE (reg), 8));          gimplify_and_add (t, pre_p);        }does not trigger because regalign is set.  But unlike the alignment forpairs of GPRs, the alignment here sets fpr to 7 leaving a subsequent va_argcall thinking it can take a value from f8.I think the fix is simply not to set regalign in this case, but I haven'ttested this.",RESOLVED          FIXED      
31635,Ben Elliston,#NAME?,"The -mno-vrsave switch as well as the old -mvrsave=no is ignored on 64bit target.Testcase is an empty file.Results with powerpc64-unknown-linux-gnu-gcc -o a.s -c b.c -maltivec -mno-vrsave -S -fverbose-asm -m64 into:  # rs6000/powerpc options: -msdata=none     .section    "".toc"",""aw""     .section    "".text""  # GNU C version 4.1.2 (Gentoo 4.1.2) (powerpc64-unknown-linux-gnu)  #  compiled by GNU C version 4.1.1 (Gentoo 4.1.1-r3).  # GGC heuristics: --param ggc-min-expand=44 --param ggc-min-heapsize=27672  # options passed:  -D__unix__ -D__gnu_linux__ -D__linux__ -Dunix -D__unix  # -Dlinux -D__linux -Asystem=linux -Asystem=unix -Asystem=posix  # -msecure-plt -maltivec -mno-vrsave -m64 -auxbase-strip -fverbose-asm  # options enabled:  -falign-loops -fargument-alias -fbranch-count-reg  # -fcommon -fearly-inlining -feliminate-unused-debug-types -ffunction-cse  # -fgcse-lm -fident -finline-functions-called-once -fivopts  # -fkeep-static-consts -fleading-underscore -floop-optimize2 -fmath-errno  # -fpeephole -freg-struct-return -fsched-interblock -fsched-spec  # -fsched-stalled-insns-dep -fshow-column -fsplit-ivs-in-unroller  # -ftrapping-math -ftree-loop-im -ftree-loop-ivcanon -ftree-loop-optimize  # -ftree-vect-loop-version -fverbose-asm -fzero-initialized-in-bss -m64  # -maix-struct-return -maltivec -mbig -mbig-endian -mfp-in-toc  # -mfused-madd -mhard-float -mnew-mnemonics -mpowerpc -mpowerpc-gfxopt  # -mpowerpc64 -msched-prolog -msecure-plt -mupdate -mvrsave   # Compiler executable checksum: 9f98a4867284f64c17c8db6425da4d5f      .ident  ""GCC: (GNU) 4.1.2 (Gentoo 4.1.2)""Somehow -mvrsave comes into ""option enabled""-m32 does not pass this.",RESOLVED          FIXED      
38462,Ben Elliston,test libmudflap.c/fail27-frag.c fails output pattern test for ppc64,"Test libmudflap.c/fail27-frag.c has failed an output pattern test on powerpc64-linux with -m64 since before GCC 4.0 was released.  I don't know enough about mudflap to know if this is an actual bug for that target or if the test is written incorrectly.Output for powerpc64-linux with -m32, and for i686-linux, is something like:    *******1   mudflap violation 1 (check/write): time=1228849502.371858 ptr=0xffaf5e91 size=1    pc=0xfefeaa0 location=`fail27-frag.c:17:1 (main)'            /home/janis/tools/gcc-trunk-patches/lib/libmudflap.so.0              (__mf_check+0x50) [0xfefeaa0]          ./a.out(main+0xc0) [0x10000944]                  /home/janis/tools/gcc-trunk-patches/lib/libmudflap.so.0              (__wrap_main+0x1f8) [0xfefe2d8]2   Nearby object 1: checked region begins 771B before and ends 771B before3   mudflap object 0x100911e8: name=`argv[]'    bounds=[0xffaf6194,0xffaf619b] size=8 area=static check=0r/0w liveness=0    alloc time=1228849502.371747 pc=0xfefe0b0    Nearby object 2: checked region begins 779B before and ends 779B before    mudflap object 0x10092d88: name=`environ[]'    bounds=[0xffaf619c,0xffaf62a7] size=268 area=static check=0r/0w liveness=0    alloc time=1228849502.371826 pc=0xfefe0b0    Nearby object 3: checked region begins 5B into and ends 5B into3   mudflap dead object 0x10092fb0: name=`fail27-frag.c:9:17 (foo) buffer'    bounds=[0xffaf5e8c,0xffaf5e95] size=10 area=stack check=0r/0w liveness=03   alloc time=1228849502.371836 pc=0xfefe0b03   dealloc time=1228849502.371845 pc=0xfefdb88    number of nearby objects: 3The numbers at the left are mine to show what is matched by1   /* { dg-output ""mudflap violation 1.*"" } */2   /* { dg-output ""Nearby object.*"" } */3   /* { dg-output ""mudflap object.*buffer.*alloc.*dealloc"" } */Output for powerpc64-linux with -m64 is:*******mudflap violation 1 (check/write): time=1228849632.611370 ptr=0xfffff8109dd size=1pc=0x400000493dc location=`fail27-frag.c:17:1 (main)'      /home/janis/tools/gcc-trunk-patches/lib64/libmudflap.so.0(__mf_check-0x2367c) [0x400000493dc]      ./lmf64(main-0x10744) [0x10000b9c]      /home/janis/tools/gcc-trunk-patches/lib64/libmudflap.so.0(__wrap_main-0x23df8) [0x40000048c30]Nearby object 1: checked region begins 5B into and ends 5B intomudflap dead object 0x10015a60: name=`fail27-frag.c:9:17 (foo) buffer'bounds=[0xfffff8109d8,0xfffff8109e1] size=10 area=stack check=0r/0w liveness=0alloc time=1228849632.611335 pc=0x400000489dcdealloc time=1228849632.611347 pc=0x400000484a4number of nearby objects: 1 Here there is only one nearby object; argv[] and environ[] are missing.  The third output pattern fails because there is no earlier ""mudflap object"".  In both cases the line with ""buffer"" starts with ""mudflap dead object"", not ""mudflap object"".Should the objects argv and environ be reported in the -m64 output, or is the test right in just looking for any non-dead mudflap object, and then ""buffer"" sometime later?  Would it be correct for the test to instead look for ""mudflap dead object"" before ""buffer""?",RESOLVED          FIXED      
39558,Ben Elliston,Bad interaction of decls named 'vector' and -maltivec vector support,"Adding -maltivec to the PowerPC compiler turns on the altivec vector support.  Part of the vector support is to add conditional expansion of the vector keyword if it looks like vector is part of a type declaration (i.e. vector float would declare a single precision floating point 4 element vector, or V4SF).  If the next thing after vector is a macro that expands to __attribute__((__unused__)), the compiler will realize that it should expand vector to vector, and then glue it with the __attribute__.  I discovered this when doing a bootstrap of the compiler with the power7 VSX instructions enabled (VSX includes Altivec).This is the declaration in fortran/iresolve.c that shows the problem: voidgfc_resolve_pack (gfc_expr *f, gfc_expr *array, gfc_expr *mask,		  gfc_expr *vector ATTRIBUTE_UNUSED){   /* ... */}If we change the argument to something other than vector, it will allow the code to be compiled with -maltivec, but the underlying problem should be fixed.",RESOLVED          FIXED      
30451,Ben Elliston,incorrect attributes in *movti_ppc64 of rs6000.md,"I found the following problem in rs6000.md:(define_insn ""*movti_ppc64""  [(set (match_operand:TI 0 ""nonimmediate_operand"" ""=r,o<>,r"")        (match_operand:TI 1 ""input_operand"" ""r,r,m""))]  ""TARGET_POWERPC64 && (gpc_reg_operand (operands[0], TImode)   || gpc_reg_operand (operands[1], TImode))""  ""#""  [(set_attr ""type"" ""*,load,store"")])It appears that the order of the load and store attributes in the set_attr expression is incorrect. If operand 0 is memory (o<>) and operand 1 is a register (r), the instruction should be a store, not a load. Similarly, if operand 0 is a register (""r"") and operand 1 memory (""m""), the instruction should be load, not a store.I think either the constraint order or the attribute order need to be reversed to make constraints and attributes match.",RESOLVED          FIXED      
32542,Ben Elliston,"When -msdata is set, gcc sent -memb to gas.","I have a question about the behavior of gcc for powerpc.I think the arguments -msdata and -msdata=default have same effect to gcc.But gcc sent different argument to gas.When -msdata is set, gcc sent -memb to gas.When -msdata=default is set, gcc doesn't send -memb to gas.I think `specs' has an error. Is it correct?Environment:  gcc version 4.1.1    Configured with: ../gcc-4.1.1/configure --prefix=/work/te/tool/Linux-i686         --target=powerpc-unknown-linux --with-gnu-as --with-gnu-ld          --disable-threads --enable-languages=c          --enable-version-specific-runtime-libs --disable-libstdcxx-pch          --disable-shared  GNU assembler version 2.17 (powerpc-unknown-linux) using BFD version 2.17  host: i686-pc-linux-gnuExample$ /work/te/tool/Linux-i686/bin/powerpc-unknown-linux-gcc -save-temps -v -msdata -c -o main.o main.c                    .                    . /work/te/tool/Linux-i686/powerpc-unknown-linux/bin/as -mppc -many -V -Qy -memb -o main.o main.s$ /work/te/tool/Linux-i686/bin/powerpc-unknown-linux-gcc -save-temps -v -msdata=default -c -o main.o main.c                    .                    . /work/te/tool/Linux-i686/powerpc-unknown-linux/bin/as -mppc -many -V -Qy -o main.o main.sRegards.",RESOLVED          FIXED      
32948,Ben Elliston,five warnings and a patch,"I just tried to bootstrap the GNU C compiler version 4.3 snapshot 20070720with the Intel C compiler. The Intel compiler said../../../src/gcc-4.3-20070720/fixincludes/fixincl.c(1049): remark #593: variable ""name_len"" was set but never used../../src/gcc-4.3-20070720/gcc/c-decl.c(4708): remark #593: variable ""type_as_written"" was set but never used../../src/gcc-4.3-20070720/gcc/c-decl.c(3984): remark #593: variable ""typedef_type"" was set but never used../../src/gcc-4.3-20070720/gcc/bb-reorder.c(1227): remark #593: variable ""has_hot_blocks"" was set but never used../../src/gcc-4.3-20070720/gcc/bb-reorder.c(1528): remark #593: variable ""prev_bb"" was set but never usedHere is a patch to shut up the compiler*** gcc-4.3-20070720/fixincludes/fixincl.c.sav	2007-07-23 19:27:23.000000000 +0100--- gcc-4.3-20070720/fixincludes/fixincl.c	2007-07-23 19:27:35.000000000 +0100****************** 1046,1056 ****      if (pz_scan != (char *) NULL)      {-       size_t name_len;-         while ((pz_fname[0] == '.') && (pz_fname[1] == '/'))          pz_fname += 2;-       name_len = strlen (pz_fname);          for (;;)          {--- 1046,1053 ----*** gcc-4.3-20070720/gcc/c-decl.c.sav	2007-07-23 19:30:25.000000000 +0100--- gcc-4.3-20070720/gcc/c-decl.c	2007-07-23 19:33:21.000000000 +0100****************** 3981,3987 ****    int volatilep;    int type_quals = TYPE_UNQUALIFIED;    const char *name, *orig_name;-   tree typedef_type = 0;    bool funcdef_flag = false;    bool funcdef_syntax = false;    int size_varies = 0;--- 3981,3986 ----****************** 4055,4061 ****        type = integer_type_node;      }  -   typedef_type = type;    size_varies = C_TYPE_VARIABLE_SIZE (type);      /* Diagnose defaulting to ""int"".  */--- 4054,4059 ----****************** 4705,4711 ****        if (decl_context == PARM)        {- 	tree type_as_written;  	tree promoted_type;    	/* A parameter declared as an array of T is really a pointer to T.--- 4703,4708 ----****************** 4739,4746 ****  	else if (type_quals)  	  type = c_build_qualified_type (type, type_quals);  - 	type_as_written = type;-   	decl = build_decl (PARM_DECL, declarator->u.id, type);  	if (size_varies)  	  C_DECL_VARIABLE_SIZE (decl) = 1;--- 4736,4741 ----*** gcc-4.3-20070720/gcc/bb-reorder.c.sav	2007-07-23 19:35:22.000000000 +0100--- gcc-4.3-20070720/gcc/bb-reorder.c	2007-07-23 19:36:44.000000000 +0100****************** 1224,1230 ****  						      int *max_idx)  {    basic_block bb;-   bool has_hot_blocks = false;    edge e;    int i;    edge_iterator ei;--- 1224,1229 ----****************** 1238,1244 ****        else  	{  	  BB_SET_PARTITION (bb, BB_HOT_PARTITION);- 	  has_hot_blocks = true;  	}      }  --- 1237,1242 ----****************** 1525,1531 ****    basic_block new_bb;    basic_block last_bb;    basic_block dest;-   basic_block prev_bb;    edge succ1;    edge succ2;    edge crossing_edge;--- 1523,1528 ----****************** 1606,1612 ****  		  new_bb = create_basic_block (NULL, NULL, last_bb);  		  new_bb->aux = last_bb->aux;  		  last_bb->aux = new_bb;- 		  prev_bb = last_bb;  		  last_bb = new_bb;  		  /* Put appropriate instructions in new bb.  */  --- 1603,1608 ----",RESOLVED          FIXED      
12618,Ben Elliston,core not cleaned up by 'make distclean',"After 'make distclean', I see these file in objdir/libiberty/testsuite:core",RESOLVED          FIXED      
32959,Ben Elliston,msgfmt fails on file libcpp/po/fr.po,"My build of gcc fails with an error running msgfmt.  If I do/usr/bin/msgfmt --statistics libcpp/po/fr.po -o /dev/nullI get failure with the current gcc (rev 127119) but if I use the file fr.po from rev 111982 the command works.  Does the fix need to happen to fr.po or to my msgfmt binary?  I have Fedora Core 6 installed, with gettext RPM 0.14.6-4.",RESOLVED          FIXED      
22232,Ben Elliston,"Bug in ""fixproto"" (missing escape)","A bug in the fixproto script makes it get the wrong dir name when:a) on Darwin, with a different ""find"" commandb) short directories are present in include dirThis is because a period was not escaped in a sed script within.i.e. sed -e 's|^./||'`Suppose to only change ./ beginnings, but wiped my d/ as well...",RESOLVED          FIXED      
25701,Ben Elliston,gcc.texi missing @direntry for g++,"If you go to the top-level info node, you will see that thereis no direct menu entry for the ""g++"" command.  I think we shouldhave one, which means adding an @direntry for it.(See gcc/java/gcj.texi for an example of per-command @direntry use)More generally I think we should have an @direntry for eachprogram we install in $bindir.  I haven't looked to see what otherones might be missing.",RESOLVED          FIXED      
31385,Ben Elliston,gcc fails to find spill register for decimal arithmetic,"In compilation of a large library of code for decimal floating-pointarithmetic, I found that compilations with -g would succeed, but mostwould fail with -O1, -O2, or -O3 on IA-32.  I've taken a single exampleand chopped away extraneous code to produce a standalone filethat exhibits the compiler error:% cat bug002.ctypedef _Decimal32 fp_t;extern fp_t g(fp_t);fp_tbug(fp_t x){    fp_t result;    int n;    fp_t f, f3, y, z;    n = 0;    y = 1.DF;    f = g(x);    if (f < 0.DF)        f = -f;    f3 = 2.DF;    z = (y + y + f / (y * y));    y = (z + z) / (9.DF) + f3 / (z * z);    result = y;    return (result);}% gcc --versiongcc (GCC) 4.3.0 20070316 (experimental)% gcc -c -O1 bug002.cbug002.c: In function 'bug':bug002.c:27: error: unable to find a register to spill in class 'GENERAL_REGS'bug002.c:27: error: this is the insn:(insn 25 24 26 3 (set (subreg:SI (reg/v:SD 59 [ f ]) 0)        (plus:SI (subreg:SI (reg/v:SD 59 [ f ]) 0)            (const_int -2147483648 [0x80000000]))) 144 {*lea_1} (nil)    (nil))bug002.c:27: internal compiler error: in spill_failure, at reload1.c:1944",RESOLVED          FIXED      
30992,Ben Elliston,Scaling error in decimal floating-point arithmetic blows conversions to integers,"The function DFP_TO_INT() in gcc/config/dfp-bit.c has the job of convertingdecimal floating point values to integers.  It does this by calling thedecNumberFromString() function from the IBM decnumber library, but with anincorrect argument.  Fortunately, the patch is just one character:% diff -c gcc-4.3-20070209/gcc/config/dfp-bit.c /local/build/gcc/gcc-4.3-20070209/gcc/config*** gcc-4.3-20070209/gcc/config/dfp-bit.c       Mon Jan 29 16:01:35 2007--- /local/build/gcc/gcc-4.3-20070209/gcc/config/dfp-bit.c      Thu Feb 15 12:41:12 2007****************** 450,456 ****    /* Rescale if the exponent is less than zero.  */    decNumberToIntegralValue (&n2, &n1, &context);    /* Get a value to use for the quantize call.  */!   decNumberFromString (&qval, (char *) ""1.0"", &context);    /* Force the exponent to zero.  */    decNumberQuantize (&n1, &n2, &qval, &context);    /* Get a string, which at this point will not include an exponent.  */--- 450,456 ----    /* Rescale if the exponent is less than zero.  */    decNumberToIntegralValue (&n2, &n1, &context);    /* Get a value to use for the quantize call.  */!   decNumberFromString (&qval, (char *) ""1."", &context);    /* Force the exponent to zero.  */    decNumberQuantize (&n1, &n2, &qval, &context);    /* Get a string, which at this point will not include an exponent.  */Without this patch, the range of numbers that can be correctly convertedto integers is sharply reduced: most conversions of large values arewrong.  For example, the value x = 1048576.0DF is exactly representableas a _Decimal32 value and as a 32-bit int, but the bad code converts it to an int value of 2147483647, and a long int value of 9223372036854775807.  With the patch, integer conversions are now correct for all floating-point values for which exact integer counterparts exist.The bug exists in all versions of dfp-bit.c in gcc-4.2 and gcc-4.3distributions.As an aside, I now have a complete C99 library for decimal arithmeticworking under gcc-4.2 and gcc-4.3 on AMD64, thanks to the prototypesupport for decimal arithmetic in gcc.  I look forward to the decimalsupport working on other platforms.",RESOLVED          FIXED      
1607,Ben Elliston,[3.3 only] Format attributes on methods undocumented,"In <URL:http://gcc.gnu.org/ml/gcc-bugs/1998-12/msg00022.html> it wasreported that format attributes didn't work on methods.  The examplegiven now works, but it isn't documented that argument numbers must beincreased in this case to allow for a hidden argument 1 (as discussedin that message).Release:2.97 20010110 (experimental)Environment:System: Linux decomino 2.2.18 #1 Sun Jan 7 21:04:55 UTC  2001 i686 unknownArchitecture: i686	host: i686-pc-linux-gnubuild: i686-pc-linux-gnutarget: i686-pc-linux-gnuconfigured with: ../gcc-cvs/configure --prefix=/opt/gcc/snapshot --disable-shared --enable-threads=posix --with-system-zlibHow-To-Repeat:See example in the indicated message.",RESOLVED          FIXED      
16792,Ben Elliston,"[4.0 regression] ICE in gen_subprogram_die, at dwarf2out.c:11267","The following program compiled with g++ -g gives internal compiler error: in gen_subprogram_die, at dwarf2out.c:11267  struct S { S(); };  int foo (S b, double j) { }; int main () {   int foo (S, double);   S v; }",RESOLVED          FIXED      
16286,Ben Elliston,Compile errors on altivec ops after #undef vector,"The Altivec PIM says that programs may #undef vector and/or pixel if desired.However, doing that with the current <altivec.h> leads to compile errors.This test program:#include <altivec.h>#undef vectorvoid test(void){        __vector unsigned int a, b;        a = vec_and(a, b);}gives the error:vb2.c: In function `test':vb2.c:8: error: parse error before ""vector""when compiled with gcc -c -maltivec.  If I take out the #undef vector thenthe error doesn't occur.",RESOLVED          FIXED      
17716,Ben Elliston,[4.0 Regression] ICE in tree-ssa-dom,"/* { dg-do compile } *//* { dg-options ""-O2"" } */long x;voidf3 (int i, ...){  __builtin_va_list aps[10];  __builtin_va_start(aps[4],i);  x = __builtin_va_arg(aps[4],long);  __builtin_va_end(aps[4]);}ICEs e.g. on powerpc (and on s390* I think as well, maybe others) in dom pass.The problem seems that cprop propagates:D.1144_7 = &aps[4];...addr.0_15 = D.1144_7->overflow_arg_area;into:addr.0_15 = (&aps[4])->overflow_arg_area;(cprop_operand/propagate_value), but nothing verifies the result is reallygimple.",RESOLVED          FIXED      
17900,Ben Elliston,[4.0 Regression] GCC's source path in ICE is wrong,"I noticed this while confirming some bugs lately, I don't know when this changed but it has to be recently.An example comes from PR 17899:fred.f95: In function 'MAIN__':fred.f95:12: internal compiler error: in gfc_conv_ss_descriptor, at/fortran/trans-array.c:1264",RESOLVED          FIXED      
17761,Ben Elliston,[4.0 Regression] sh-elf doesn't build after merge from edge-vector-branch,configure --target=sh-elf && make all-gccproduces:/Network/Servers/hills/Volumes/capanna/gkeating/co/gcc-1/gcc/gcc/lcm.c: In function 'optimize_mode_switching':/Network/Servers/hills/Volumes/capanna/gkeating/co/gcc-1/gcc/gcc/lcm.c:1028: error: 'struct basic_block_def' has no member named 'succ'/Network/Servers/hills/Volumes/capanna/gkeating/co/gcc-1/gcc/gcc/lcm.c:1032: error: 'struct basic_block_def' has no member named 'pred'/Network/Servers/hills/Volumes/capanna/gkeating/co/gcc-1/gcc/gcc/lcm.c:1032: warning: value computed is not used/Network/Servers/hills/Volumes/capanna/gkeating/co/gcc-1/gcc/gcc/lcm.c:1032: error: 'struct edge_def' has no member named 'pred_next',RESOLVED          FIXED      
14440,Ben Elliston,[4.0 regression] no sib calling with _Bool types,"Here is a regression from the mainline:_Bool t();_Bool f(int i){ return t();}t should be sibcalled but is not because the return type of f is really still int for some reason by the front-end (both the C and C++ front-ends, you have to #define _Bool bool for the C++ front-end to work though).",RESOLVED          FIXED      
16155,Ben Elliston,Altivec compilation fails with -ansi,"Compilation of a simple altivec test program fails if the -ansi flag isgiven to gcc.  When compiled withgcc -maltivec -c -ansi foo.cI get the error:foo.c: In function `foo':foo.c:6: error: parse error before ""typeof""foo.c contains:#include <altivec.h>void foo(void){        vector unsigned short a, b;        a = vec_splat(b, 0);}Without the -ansi flag the compilation succeeds.",RESOLVED          FIXED      
80,Ben Elliston,g++ enum and attributed __packed__,"Original-Message-ID: <3882F04F.44C58C89@or.uni-bonn.de> Date: Mon, 17 Jan 2000 11:34:55 +0100 Hello, I run into some very essential problem with g++: The g++ Compiler does not support the attribute (packed) on enum declarations. The following line of code compiles with gcc but not with g++: enum numbers { zero, one, two, three } __attribute__ ((packed)) ; The documentation says: packed      This attribute, attached to an enum, struct, or union type   definition, specified that the minimum required memory be used to   represent the type. Specifying this attribute for struct and union   types is equivalent to specifying the packed attribute on each of   the structure or union members.  Specifying the `-fshort-enums'   flag on the line is equivalent to specifying the packed attribute   on all enum definitions.  You may only specify this attribute after   a closing curly brace on an enum definition, not in a typedef   declaration, unless that declaration also contains the definition   of the enum. The command ""g++ -v --save-temps enum.C"" returns: Reading specs from /usr/lib/gcc-lib/i486-linux/egcs-2.91.66/specs gcc version egcs-2.91.66 19990314 (egcs-1.1.2 release)  /usr/lib/gcc-lib/i486-linux/egcs-2.91.66/cpp -lang-c++ -v -undef -D__GNUC__=2 -D__GNUG__=2 -D__cplusplus -D__GNUC_MINOR__=91 -D__ELF__ -Dunix -Di386 -D__i386__ -Dlinux -D__ELF__ -D__unix__ -D__i386__ -D__i386__ -D__linux__ -D__unix -D__i386 -D__linux -Asystem(posix) -D__EXCEPTIONS -Asystem(unix) -Acpu(i386) -Amachine(i386) -Di386 -D__i386 -D__i386__ -Di486 -D__i486 -D__i486__ enum.C enum.ii GNU CPP version egcs-2.91.66 19990314 (egcs-1.1.2 release) (i386 Linux/ELF) #include ""..."" search starts here: #include <...> search starts here:  /usr/include/g++  /usr/lib/g++-include  /usr/local/include  /usr/i486-linux/include  /usr/lib/gcc-lib/i486-linux/egcs-2.91.66/include  /usr/include End of search list.  /usr/lib/gcc-lib/i486-linux/egcs-2.91.66/cc1plus enum.ii -quiet -dumpbase enum.cc -version -o enum.s GNU C++ version egcs-2.91.66 19990314 (egcs-1.1.2 release) (i486-linux) compiled by GNU C version egcs-2.91.66 19990314 (egcs-1.1.2 release). enum.C:4: semicolon missing after declaration of `numbers' The file enum.ii (6 lines): # 1 ""enum.C"" enum numbers { zero, one, two, three } __attribute__ ((packed))  ; -- end of file -- I found nothing about this under ""well known bugs"" and I hope you can fix this. Thanks, Karsten MuussRelease:2.95.2",RESOLVED          FIXED      
14730,Ben Elliston,[tree-ssa] ICE on a switch statement with a case which is bigger than the type of switcher,int t(char i){  switch (i)  {    case 1:    case 7:    case 10:    case 14:    case 9:    case 256:      return 0;  }  return 0;},RESOLVED          FIXED      
3414,Ben Elliston,Inaccurate documentation of __attribute__((malloc)),"From @item malloc, @node Function Attributes:        ""The `malloc' attribute is used to tell the compiler that a        function may be treated as if it were the malloc function.""	The compiler could assume several things about that; e.g.	that the return value will be aligned for any data type.	However, the rest of the paragraph is:	""The compiler assumes that calls to malloc result in a	pointers that cannot alias anything.  This will often	improve optimization.""	Is this the *only* assumption __attribute__((malloc)) causes?	Incidentally, it also assumes that the program uses malloc	correctly - here is a malloc which _can_ alias something:	  free(x = malloc(10));	  if (x == (y = malloc(10))) { ... }	(BTW, typo: ""a pointers"" should be ""a pointer"".Release:3.0Environment:System: SunOS bombur.uio.no 5.8 Generic_108528-03 sun4u sparc SUNW,Ultra-5_10Architecture: sun4	host: sparc-sun-solaris2.8build: sparc-sun-solaris2.8target: sparc-sun-solaris2.8configured with: ./configure --quiet --enable-version-specific-runtime-libs --prefix=/usit/bombur/hbf --program-suffix=-3.0",RESOLVED          FIXED      
856,Ben Elliston,configure fails to detect linux i686 system,config.guess fails to determine the targetin a seemingly standard environmentRelease:gcc-2.95-2Environment:Linux pcalice9.pd.infn.it 2.2.16-3smp #1 SMP Mon Jun 19 19:00:35 EDT 2000 i686 unknown,RESOLVED          FIXED      
674,Ben Elliston,#NAME?,anthonyu@original:~/dentist-0.7[1]$ ls magic a.out/bin/ls: magic: No such file or directory/bin/ls: a.out: No such file or directoryanthonyu@original:~/dentist-0.7[1]$ gcc -omagic magic.canthonyu@original:~/dentist-0.7[0]$ ls magic a.out/bin/ls: magic: No such file or directorya.out*anthonyu@original:~/dentist-0.7[1]$ rm a.out anthonyu@original:~/dentist-0.7[0]$ gcc -o magic magic.canthonyu@original:~/dentist-0.7[0]$ ls magic a.out/bin/ls: a.out: No such file or directorymagic*Release:2.95.1Environment:i586-pc-linux-gnuHow-To-Repeat:-omagic and/or -o magic,RESOLVED          FIXED      
898,Ben Elliston,libstdc++-v3 configuration sets @EXEEXT@ incorrectly on cygwin,"In configure.status in the libstdc++-v3 build directory hass%@EXEEXT@%%gIt should bes%@EXEEXT@%.exe%gAlternatively, it should set host_exeext and build_exeextRelease:20001125 cvsEnvironment:CYGWIN_NT-4.0 1.1.5(0.30/3/2)",RESOLVED          FIXED      
903,Ben Elliston,gcc compiler cannot find log10 function,"gcc does not compile programs containing references to the log10 function.  (g++ successfully compiles the programs.Following messages produced by command:gcc -o bug -v -save-temps bug.cwhere the program is simply:#include <math.h>int main() { float a; a = log10(10.0);}gcc version egcs-2.91.66 19990314/Linux (egcs-1.1.2 release) /usr/lib/gcc-lib/i386-redhat-linux/egcs-2.91.66/cpp -lang-c -v -undef -D__GNUC__=2 -D__GNUC_MINOR__=91 -D__ELF__ -Dunix -Di386 -D_iGNU CPP version egcs-2.91.66 19990314/Linux (egcs-1.1.2 release) (i386 Linux/ELF)#include ""..."" search starts here:#include <...> search starts here: /usr/local/include /usr/i386-redhat-linux/include /usr/lib/gcc-lib/i386-redhat-linux/egcs-2.91.66/include /usr/includeEnd of search list. /usr/lib/gcc-lib/i386-redhat-linux/egcs-2.91.66/cc1 bug.i -quiet -dumpbase bug.c -version -o bug.sGNU C version egcs-2.91.66 19990314/Linux (egcs-1.1.2 release) (i386-redhat-linux) compiled by GNU C version egcs-2.91.66 19990314/. as -V -Qy -o bug.o bug.sGNU assembler version 2.9.1 (i386-redhat-linux), using BFD version 2.9.1.0.23 /usr/lib/gcc-lib/i386-redhat-linux/egcs-2.91.66/collect2 -m elf_i386 -dynamic-linker /lib/ld-linux.so.2 -o bug /usr/lib/crt1.o /usobug.o: In function `main':bug.o(.text+0xe): undefined reference to `log10'collect2: ld returned 1 exit statusRelease:gcc version egcs-2.91.66 19990314/Linux (egcs-1.1.2 release)Environment:RedHat linux 6.0 running on a Pentium III processor.How-To-Repeat:all compiles with log10 fail",RESOLVED          FIXED      
1028,Ben Elliston,unable to use config.guess after installing gcc 2.95.2,"I compiled succesfully, and was able to install 2.95.2 after removing the egcs-1.1.2 package of Slackware 7.1 by means of pkgtoolafterwards I was unable to make use of config.guess...it outputs nothingI used the default /usr/local installation for gcc-2.95.2 and not the --prefix=/usrwhich seems to be what was used by slackware for egcs-1.1.2Release:2.95.2Environment:i686-pc-Linux-gnuit is a Slackware 7.1 installationHow-To-Repeat:on a i686-pc installation of Slackware 7.1build gcc-2.95.2 as described in http://egcs.cygnus.com/install/use and objdir and don't give any options to ./configureuse pkgtool (a slackware thing) to remove the previouslyinstalled egcs package (as it as the old binaries in /usr/bin and the new ones are gonna be in /usr/local/bin)then make install for gcc-2.95.2now it should be inpossible to get anything out of GNUsconfig.guess there are some other minor problems which arose with xkbcompin the case of xdm...",RESOLVED          FIXED      
5634,Ben Elliston,../configure --prefix=~/... doesn't work,"Configuring with --prefix=~/somewhere --program-suffix=something gives a built version which does not install properly.Specifically, ""make install"" fails with an error in installing libiberty.a, and leaves directories called ""~"" lying around.Release:gcc-3.1-{20011231, 20020204} at leastEnvironment:SuSE 7.3; bash 2.05 as shipped by SuSEHow-To-Repeat:make two copies of the gcc distribution, configure one with --prefix=~/foo and one with --prefix=/home/twomack/foo, build both; the first won't install, the second will.",RESOLVED          FIXED      
7107,Ben Elliston,[CR16C] GCC crashes when compiling function calls,Release:3.0.1Environment:System: Linux supratik.cse.iitkgp.ernet.in 2.2.16-22 #1 Tue Aug 22 16:49:06 EDT 2000 i686 unknownArchitecture: i686	host: i686-pc-linux-gnubuild: i686-pc-linux-gnutarget: cr16c-unknown-noneconfigured with: ./configure --target=cr16c --enable-languages=c --with-as=/usr/local/cr16c/bin/crasm --with-ld=/usr/local/cr16c/bin/gnu-crlink --program-suffix=cr16c,RESOLVED          FIXED      
7350,Ben Elliston,'shoud' typos,Two cases of 'should' being misspelled as 'shoud' incomments.Release:gcc anoncvs of 2002/07/18Environment:irrelevantHow-To-Repeat:grep -r shoud,RESOLVED          FIXED      
8269,Ben Elliston,Failure to:  Add <directory> to the compiler's search paths,"When asked to  Add <directory> to the compiler's search paths gcc does nothing: katze@linux:~ > gcc -print-search-dirsinstall: /usr/lib/gcc-lib/i486-suse-linux/2.95.3/programs: /usr/lib/gcc-lib/i486-suse-linux/2.95.3/:/usr/lib/gcc-lib/i486-suse-linux/:/usr/lib/gcc/i486-suse-linux/2.95.3/:/usr/lib/gcc/i486-suse-linux/:/usr/i486-suse-linux/bin/i486-suse-linux/2.95.3/:/usr/i486-suse-linux/bin/libraries: /usr/lib/gcc-lib/i486-suse-linux/2.95.3/:/usr/lib/gcc/i486-suse-linux/2.95.3/:/usr/i486-suse-linux/lib/i486-suse-linux/2.95.3/:/usr/i486-suse-linux/lib/:/usr/lib/i486-suse-linux/2.95.3/:/usr/lib/:/lib/i486-suse-linux/2.95.3/:/lib/:/usr/lib/i486-suse-linux/2.95.3/:/usr/lib/katze@linux:~ > gcc -B /home/katze/palm/sdk-5/include/gcc: No input fileskatze@linux:~ > gcc -print-search-dirsinstall: /usr/lib/gcc-lib/i486-suse-linux/2.95.3/programs: /usr/lib/gcc-lib/i486-suse-linux/2.95.3/:/usr/lib/gcc-lib/i486-suse-linux/:/usr/lib/gcc/i486-suse-linux/2.95.3/:/usr/lib/gcc/i486-suse-linux/:/usr/i486-suse-linux/bin/i486-suse-linux/2.95.3/:/usr/i486-suse-linux/bin/libraries: /usr/lib/gcc-lib/i486-suse-linux/2.95.3/:/usr/lib/gcc/i486-suse-linux/2.95.3/:/usr/i486-suse-linux/lib/i486-suse-linux/2.95.3/:/usr/i486-suse-linux/lib/:/usr/lib/i486-suse-linux/2.95.3/:/usr/lib/:/lib/i486-suse-linux/2.95.3/:/lib/:/usr/lib/i486-suse-linux/2.95.3/:/usr/lib/As you can see the path ""/home/katze/palm/sdk-5/include/"" has not been added!Release:gcc version 2.95.3 20010315 (SuSE)",RESOLVED          FIXED      
8428,Ben Elliston,[ssa branch] Segmentation fault while building a c++ file,"When i try to compile the libsupc++ , cc1plus give a segfault error on the compilation of del_op.cc file.This makes impossible to bootstrap the compiler with -fdump-translation-unit turned on.I've reported here the output of the 2 compilation i made:( see how to repeat for command line )--------------------------------------------------------------------------------------------------Build that fails with a segmentation fault (*tree-ssa branch*)--------------------------------------------------------------------------------------------------GNU C++ version 3.4-tree-ssa 20021021 (experimental) (i686-pc-linux-gnu)        compiled by GNU C version 3.2.options passed:  -fpreprocessed -auxbase-strip -g -g -O2 -Wall -Wno-format -W -Wwrite-strings -Winline -fno-implicit-templates -fdiagnostics-show-location=once -ffunction-sections -fdata-sections -fdump-translation-unitoptions enabled:  -fdefer-pop -foptimize-sibling-calls -fcse-follow-jumps -fcse-skip-blocks -fexpensive-optimizations -fthread-jumps -fstrength-reduce -fpeephole -fforce-mem -ffunction-cse -fkeep-static-consts -fcaller-saves -fpcc-struct-return -fgcse -fgcse-lm -fgcse-sm -floop-optimize -fcrossjumping -fif-conversion -fif-conversion2 -frerun-cse-after-loop -frerun-loop-opt -fdelete-null-pointer-checks -fschedule-insns2 -fsched-interblock -fsched-spec -fbranch-count-reg -fexceptions -freorder-blocks -freorder-functions -fcprop-registers -fcommon -ffunction-sections -fdata-sections -fgnu-linker -fregmove -foptimize-register-move -fargument-alias -fstrict-aliasing -fmerge-constants -fzero-initialized-in-bss -fident -fpeephole2 -fguess-branch-probability -fmath-errno -ftrapping-math -m80387 -mhard-float -mno-soft-float -mieee-fp -mfp-ret-in-387 -maccumulate-outgoing-args -mcpu=pentiumpro -march=i386 std::exception::exception() std::exception::exception() std::exception::exception() std::bad_exception::bad_exception() std::bad_exception::bad_exception() std::bad_exception::bad_exception() std::bad_alloc::bad_alloc() std::bad_alloc::bad_alloc() std::bad_alloc::bad_alloc() void* operator new(unsigned int, void*) void* operator new [](unsigned int, void*) void operator delete(void*, void*) void operator delete [](void*, void*) void operator delete(void*) void operator delete(void*)del_op.cc: At global scope:del_op.cc:40: internal compiler error: Segmentation faultPlease submit a full bug report,with preprocessed source if appropriate.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.------------------------------------------------------------------------------------------    Build that work fine ( *ast-optimizer branch* ) ------------------------------------------------------------------------------------------GNU C++ version 3.2 (ast-optimizer-branch) (i686-pc-linux-gnu)        compiled by GNU C version 3.2.options passed:  -fpreprocessed -g -g -O2 -Wall -Wno-format -W -Wwrite-strings -Winline -fno-implicit-templates -fdiagnostics-show-location=once -ffunction-sections -fdata-sections -fdump-translation-unitoptions enabled:  -fdefer-pop -fomit-frame-pointer -foptimize-sibling-calls -fcse-follow-jumps -fcse-skip-blocks -fexpensive-optimizations -fthread-jumps -fstrength-reduce -fpeephole -fforce-mem -ffunction-cse -fkeep-static-consts -fcaller-saves -fpcc-struct-return -fgcse -fgcse-lm -fgcse-sm -floop-optimize -fcrossjumping -fif-conversion -fif-conversion2 -frerun-cse-after-loop -frerun-loop-opt -fdelete-null-pointer-checks -fschedule-insns2 -fsched-interblock -fsched-spec -fbranch-count-reg -fexceptions -freorder-blocks -freorder-functions -fcprop-registers -fcommon -ffunction-sections -fdata-sections -fgnu-linker -fregmove -foptimize-register-move -fargument-alias -fstrict-aliasing -fmerge-constants -fzero-initialized-in-bss -fident -fpeephole2 -fguess-branch-probability -fmath-errno -ftrapping-math -ftree-ssa -m80387 -mhard-float -mno-soft-float -mieee-fp -mfp-ret-in-387 -momit-leaf-frame-pointer -mcpu=pentiumpro -march=i386 std::exception::exception() std::exception::exception() std::exception::exception() std::bad_exception::bad_exception() std::bad_exception::bad_exception() std::bad_exception::bad_exception() std::bad_alloc::bad_alloc() std::bad_alloc::bad_alloc() std::bad_alloc::bad_alloc() void* operator new(unsigned int, void*) void* operator new [](unsigned int, void*) void operator delete(void*, void*) void operator delete [](void*, void*) void operator delete(void*) void operator delete(void*)Execution times (seconds) cfg cleanup      :   0.01 ( 1%) usr   0.00 ( 0%) sys   0.00 ( 0%) wall life analysis       :   0.01 ( 1%) usr   0.00 ( 0%) sys   0.01 ( 0%) wall preprocessing   :   0.00 ( 0%) usr   0.02 (10%) sys   0.00 ( 0%) wall lexical analysis  :   0.02 ( 2%) usr   0.01 ( 5%) sys   0.00 ( 0%) wall parser         :   0.18 (14%) usr   0.01 ( 5%) sys   0.27 (14%) wall expand            :   0.01 ( 1%) usr   0.01 ( 5%) sys   0.01 ( 0%) wall varconst       :   0.61 (46%) usr   0.08 (38%) sys   1.05 (55%) wall integration     :   0.04 ( 3%) usr   0.01 ( 5%) sys   0.05 ( 3%) wall CSE              :   0.01 ( 1%) usr   0.01 ( 5%) sys   0.02 ( 1%) wall branch prediction : 0.01 ( 1%) usr   0.00 ( 0%) sys   0.01 ( 0%) wall combiner        :   0.00 ( 0%) usr   0.00 ( 0%) sys   0.01 ( 0%) wall mode switching  :   0.00 ( 0%) usr   0.01 ( 5%) sys   0.00 ( 0%) wall local alloc         :   0.00 ( 0%) usr   0.00 ( 0%) sys   0.02 ( 1%) wall global alloc      :   0.01 ( 1%) usr   0.00 ( 0%) sys   0.01 ( 0%) wall flow 2             :   0.01 ( 1%) usr   0.00 ( 0%) sys   0.00 ( 0%) wall rename registers:  0.01 ( 1%) usr   0.00 ( 0%) sys   0.01 ( 0%) wall scheduling 2   :   0.01 ( 1%) usr   0.00 ( 0%) sys   0.02 ( 1%) wall final               :   0.00 ( 0%) usr   0.00 ( 0%) sys   0.01 ( 0%) wall symout         :   0.03 ( 2%) usr   0.01 ( 5%) sys   0.04 ( 2%) wall rest of compilation:0.02 ( 2%) usr   0.00 ( 0%) sys   0.01 ( 0%) wall TOTAL       :   1.32             0.21             1.92Release:gcc 3.2 tree-ssa branchHow-To-Repeat:Build the tree-ssa branch from cvs. Then try the following compilation (adjust the path to just built cc1plus ) from the ./i686-pc-linux-gnu/libstdc++-v3/libsupc++ directory :/CurrentWorks/cvs/gcc/tree-ssa-branch/gcc/gcc/cc1plus -fpreprocessed del_op.ii -quiet -dumpbase del_op.cc -auxbase-strip del_op.o -g -O2 -Wall -Wno-format -W -Wwrite-strings -Winline -version -fno-implicit-templates -fdiagnostics-show-location=once -ffunction-sections -fdata-sections -fdump-translation-unit -o del_op.sThe same compilation with a cc1plus compiled from the ast-optimizer branch will go fine.I've attached the del_op.ii file for preprocessing.",RESOLVED          FIXED      
9406,Ben Elliston,Documentation suggestion,"A slight lack of clarity wrt how to link with non-Ada mains: suggested patch..--- gcc/ada/gnat_ug.texi        28 Dec 2002 21:38:51 -0000      1.6+++ gcc/ada/gnat_ug.texi        22 Jan 2003 20:50:34 -0000@@ -2409,7 +2409,7 @@  @cindex Binder output file @noindent-If the main program is in some language other than Ada, Then you may+If the main program is in some language other than Ada, you may have more than one entry point in the Ada subsystem. You must use a special option of the binder to generate callable routines to initialize and finalize the Ada units (@pxref{Binding with Non-Ada Main Programs}).@@ -2440,7 +2440,7 @@ @end smallexample  @item-Run the Ada binder on the Ada main program. For instance:+Run the Ada binder on the Ada entry units. For instance: @smallexample gnatbind ^-n^/NOMAIN^ entry_point1.ali entry_point2.ali @end smallexampleRelease:gcc version 3.3 20021130 (experimental)Environment:i686-pc-linux-gnuHow-To-Repeat:n/a",RESOLVED          FIXED      
11029,Ben Elliston,pentiumiii/pentium3/pentiumiv/pentium4 aren't recognized,I can't use pentiumiii/pentium3/pentiumiv/pentium4-linux toconfigure gcc.,RESOLVED          FIXED      
28811,Benjamin Kosnik,--with-pic vs static libraries and libstdc++,"i've configured my gcc with -with-pic option and tryingto build statically linked shared c++ library.$ makeg++ -O2 -g0 -Wall -z defs test.cpp -o libtest.so -fPIC -shared \                -nodefaultlibs \                -Wl,-Bstatic -lstdc++ -Wl,-Bdynamic \                -lc -lgcc_eh/usr/bin/ld: libtest.so: undefined versioned symbol name_ZNKSt14basic_ifstreamIcSt11char_traitsIcEE7is_openEv@GLIBCXX_3.4/usr/bin/ld: failed to set dynamic section sizes: Bad valuecollect2: ld returned 1 exit status",RESOLVED          FIXED      
4458,Benjamin Kosnik,std::ctype<char>::is doesn't call do_is as required by ISO 14882,"std::ctype<char>::is doesn't call the virtual functiondo_is, as required by the standard.  This means thatthe programmer cannot derive from std::ctype<char>::isin order to create his own locales (or, since the existingimplementation of the function doesn't work, to provide onethat does).Release:g++ 3.0Environment:    dxcs8h@~/tmp/gcc (164): uname -a    SunOS dxcs8h 5.7 Generic_106541-12 sun4u sparc SUNW,Ultra-60    dxcs8h@~/tmp/gcc (165): /opt/global/pkg/gcc-3.0.0_threads/bin/g++ --version    3.0     dxcs8h@~/tmp/gcc (166): env | egrep LC_    LC_MESSAGES=C    LC_TIME=en_US    LC_NUMERIC=en_US    LC_CTYPE=iso_8859_1    LC_MONETARY=en_US    LC_COLLATE=en_USHow-To-Repeat:Compile, then look at the output under ""Private CType"".",CLOSED          FIXED      
6702,Benjamin Kosnik,requirements for wchar_t support are too restrictive for Solaris pre 10,"The requirements before libstdc++ will build with supportfor wchar_t are too restrictive.Changing cwchar and cwctype to not try import the missingfunctions into std namespace and changing config.h and c++config.h to define _GLIBCPP_USE_WCHAR_T and rebuilding libstdc++ works without problem on solaris 8, although autoconf had decided that this wasn't possible.Support for wchar_t is mandated by the C++ standard - gcc should make more extensive efforts to support it on any platform that it reasonably can (i.e. supports the set of functions used by libstdc++).Release:3.1 20020510 (prerelease)Environment:solaris 8",RESOLVED          FIXED      
55028,Benjamin Kosnik,_GLIBCXX_DEBUG is broken when using v7 namespace,"I've just hit an issue when using _GLIBCXX_DEBUG together with gcc 4.7.2 built using --enable-symvers=gnu-versioned-namespace flag. The issue is specific to unordered_mulimap and can be reproduced using the following:struct MyType{};#if 1using MyMap = std::multimap<std::string, MyType *>;    // works#elseusing MyMap = std::unordered_multimap<std::string, MyType *>;  // fails to link#endifMyMap m;m.insert({""blah""}, new MyType});The latter variant fails to link with the following message:misc/libmisc.a(statmgr.o): In function `__gnu_debug::_Safe_unordered_container_base::~_Safe_unordered_container_base()':statmgr.cc:(.text._ZN11__gnu_debug30_Safe_unordered_container_baseD2Ev[_ZN11__gnu_debug30_Safe_unordered_container_baseD5Ev]+0x15): undefined reference to `__gnu_debug::_Safe_unordered_container_base::_M_detach_all()'The compiler was configured as follows:Configured with: ../gcc-4.7.2/configure --prefix=/opt/gcc-4.7-v7 --enable-languages=c,c++,lto --with-mpfr=/opt/gcc-4.6-rbt --with-cloog=/opt/gcc-4.6-rbt --with-mpc=/opt/gcc-4.6-rbt --with-gmp=/opt/gcc-4.6-rbt --with-system-zlib --disable-multilib --enable-lto --with-build-config=bootstrap-lto --with-fpmath=sse --enable-build-with-cxx --enable-gold=yes --enable-cloog-backend=isl --disable-cloog-version-check --enable-symvers=gnu-versioned-namespace CFLAGS=-O3 CXXFLAGS=-O3Thread model: posixgcc version 4.7.2 (GCC)",RESOLVED          FIXED      
54102,Benjamin Kosnik,generated html vs. utf8,this is just a reminder to fix up the geneated HTML pages.See:http://gcc.gnu.org/ml/gcc/2012-07/msg00224.htmlandSee http://gcc.gnu.org/ml/gcc/2012-04/msg00597.html andhttp://gcc.gnu.org/ml/gcc/2012-06/msg00125.html,RESOLVED          FIXED      
51811,Benjamin Kosnik,[C++0x] Incorrect increment/decrement of atomic pointers,"Incrementation (decrementation) of atomic pointers does not work correctly. On an x86-64 machine the piece of code given below produces the following output (or something similar):0x7fffbe6d082c0x7fffbe6d082d0x7fffbe6d08300x7fffbe6d082dThere are two problems here: Firstly, the pointer is incremented by 1 and not by sizeof(int). Secondly, the last two lines of the output should be the same. Note that the second problem seems to be fixed in gcc-4.7-20120107, while the first one still occurs. Thanks for your help!----------------------------#include <iostream>#include <atomic>using namespace std;int main(int argc, char* argv[]) {  int value = 42;  atomic<int*> my_pointer;  my_pointer = &value;  cout << my_pointer++ << endl;  cout << my_pointer << endl;  my_pointer = &value;  cout << ++my_pointer << endl;  cout << my_pointer << endl;}",RESOLVED          FIXED      
49445,Benjamin Kosnik,"[C++0x] Undefined reference to std::atomic<float> ""operator float""","Hello,It looks like std::atomic<float> does is not fully implemented. I get an undefined reference to its operator float:libtool: link: g++ -Wall -I/usr/include -I../../src -I../../src -g -O2 -std=c++0x -DNDEBUG -o .libs/psynth_unit_test psynth_unit_test-psynth_unit_test.o [... a big list of object files ...] -L/usr/lib64 -lboost_unit_test_framework-mt -lboost_filesystem-mt -lboost_signals-mt -lboost_system-mt ../psynth/.libs/libpsynth.so -Wl,-rpath -Wl,/home/raskolnikov/usr/lib../psynth/.libs/libpsynth.so: undefined reference to    `atomic<float>::operator float() const'A similar bug happened when I tried std::atomic<my_enum> with ""my_enum"" being a ""enum class my_enum : int"", I got an undefined reference to the ""store ()"" method instead.I am using GCC 4.6 as included in Debian Sid:  g++ --version  g++ (Debian 4.6.0-13) 4.6.1 20110611 (prerelease)  apt-cache show libstdc++6-4.6-dev  Package: libstdc++6-4.6-dev  Source: gcc-4.6  Version: 4.6.0-13Anyways, thanks a lot for your hard work implementing C++11 :)JP",RESOLVED          FIXED      
52689,Benjamin Kosnik,static linking with libstdc++ fails,"$ cat x.cc #include <iostream>int main(){  std::cout << ""hello\n"";}$ gcc x.cc -Wl,-Bstatic -lstdc++ -Wl,-Bdynamic/usr/bin/ld: a.out: No symbol version section for versioned symbol `_ZSt15future_category@@GLIBCXX_3.4.14'/usr/bin/ld: final link failed: Nonrepresentable section on outputcollect2: error: ld returned 1 exit statusor$ g++ x.cc -static-libstdc++/usr/bin/ld: a.out: No symbol version section for versioned symbol `_ZSt15future_category@@GLIBCXX_3.4.14'/usr/bin/ld: final link failed: Nonrepresentable section on outputcollect2: error: ld returned 1 exit status$ ld --versionGNU ld (GNU Binutils for Ubuntu) 2.21.53.20110810",RESOLVED          FIXED      
53543,Benjamin Kosnik,[unordered_map] conflict with __is_convertible clang intrinsic,"The trunk implementation of unordered_map uses the following alias template at class scope:template<typename _Pair>using __is_convertible = std::is_convertible<_Pair, value_type>;Clang cannot compile this because __is_convertible is a clang intrinsic (much like how __is_base_of is a gcc intrinsic).I asked on the clang mailing list what can be done about this, and they suggested:""Since GCC 4.8 is not yet released, and Clang versions with the __is_convertible intrinsic are, the best solution would be to politely ask the libstdc++ maintainers to change this name.""Would it be possible to entertain this request?",RESOLVED          FIXED      
52191,Benjamin Kosnik,abi_check should flag additions to released versions,"When regenerating the Solaris libstdc++ baselines, I noticed that there wereseveral additions to already release/closed symbol versions:  http://gcc.gnu.org/ml/gcc-patches/2012-01/msg01163.htmlProvided that the baselines for the various targets are updated immediately beforereleases, abi_check should be able to flag such additions since they are obviouslynot supposed to happen.  This is certainly far better than noticing the problemonly by accident/manual inspection or, even worse, only after another majorrelease has happened.Ben, do you think this is feasible?Thanks.  Rainer",RESOLVED          FIXED      
50349,Benjamin Kosnik,/usr/bin/ld: warning: wildcard match appears in both version 'GLIBCXX_3.4' and 'CXXABI_1.3' in script,"during native gcc-4.6 bootstrap the linker reports few warningson libstdc++-symbols.ver script:(...)/usr/bin/ld: warning: wildcard match appears in both version 'GLIBCXX_3.4' and 'CXXABI_1.3' in script/usr/bin/ld: warning: using 'GLIBCXX_3.4' as version for 'std::basic_stringbuf<wchar_t, std::char_traits<wchar_t>, std::allocator<wchar_t> >::str() const' which is also named in version 'GLIBCXX_3.4.6' in script/usr/bin/ld: warning: using 'GLIBCXX_3.4' as version for 'std::basic_string<char, std::char_traits<char>, std::allocator<char> >::_M_disjunct(char const*) const' which is also named in version 'GLIBCXX_3.4.5' in script/usr/bin/ld: warning: using 'GLIBCXX_3.4' as version for 'std::basic_string<wchar_t, std::char_traits<wchar_t>, std::allocator<wchar_t> >::_M_disjunct(wchar_t const*) const' which is also named in version 'GLIBCXX_3.4.5' in script",RESOLVED          FIXED      
51368,Benjamin Kosnik,libstdc++ python pretty printers should use --with-python-dir just like libjava,"the libjava code already has a useful configure flag for controlling where its python code is installed (--with-python-dir).  the libstdc++-v3 should use this same flag so package maintainers need not set the same path in multiple places.libjava/configure.ac:default_python_dir=""/share/gcc-`cat ${srcdir}/../gcc/BASE-VER`/python/libjava""libstdc++-v3/python/Makefile.am:pythondir = $(datadir)/gcc-$(gcc_version)/python",RESOLVED          FIXED      
17922,Benjamin Kosnik,[3.3/3.4 regression] Spurious warnings about std::ios_base::seekdir,"$ cat bug.cc#include <istream>void f(std::ios_base::seekdir dir){  switch (dir) {  case std::ios_base::beg:    break;  case std::ios_base::cur:    break;  case std::ios_base::end:    break;  }}$ LANG=C g++-3.4.2 -Wall -c bug.cc bug.cc: In function `void f(std::_Ios_Seekdir)':bug.cc:12: warning: enumeration value `_S_ios_seekdir_end' not handled in switchbug.cc:12: warning: case value `0' not in enumerated type `_Ios_Seekdir'bug.cc:12: warning: case value `1' not in enumerated type `_Ios_Seekdir'bug.cc:12: warning: case value `2' not in enumerated type `_Ios_Seekdir'These warnings are not very usefull: the code cover all the standardvalues and only them but the compiler complaim about missing value and valuesnot in the type.Yours,-- Jean-Marc",RESOLVED          FIXED      
18185,Benjamin Kosnik,[3.4 only] Unhandled exceptions leak,"When a thread is terminated from within an exception handling block, exceptionobject(s) (__cxa_exeption) are leaked, as the TSD destructor for __cxa_eh_globalsinstance does delete them.  The following program demonstrates the leak.  A patchand a ChangeLog entry follows.#include <pthread.h>static void *foo (void *p){  try    {      throw 0;    }  catch (int)    {      pthread_exit (0);    }}intmain (){  pthread_t t;  void *p;  pthread_create (&t, 0, foo, 0);  pthread_join (t, &p);  return 0;}--- /home/velco/src/gcc-4.0/libstdc++-v3/libsupc++/eh_globals.cc.~1.6.~	Tue Aug 3 09:45:54 2004+++ /home/velco/src/gcc-4.0/libstdc++-v3/libsupc++/eh_globals.cc	Wed Oct 2720:50:17 2004@@ -48,7 +48,19 @@ get_globals_dtor (void *ptr) {   if (ptr)-    std::free (ptr);+    {+      __cxa_exception *exn, *next;++      exn = ((__cxa_eh_globals *) ptr)->caughtExceptions;+      while (exn)+	{+	  next = exn->nextException;+	  _Unwind_DeleteException (&exn->unwindHeader);+	  exn = next;+	}++      std::free (ptr);+    } }  static void2004-10-27  Momchil Velikov  <velco@fadata.bg>	* libsupc++/eh_globals.cc (get_globals_dtor): Delete unhandled	exceptions.",RESOLVED          FIXED      
15412,Benjamin Kosnik,[3.4/4.0 Regression] _GLIBCXX_ symbols symbols defined and used in different namespaces,"This short program cannot build:------------------------------------------------------------------#include <memory>#include <ext/pool_allocator.h>int main(){   void* ptr = __gnu_cxx::__pool_alloc<true,0>::allocate(10);   __gnu_cxx::__pool_alloc<true,0>::deallocate(ptr, 10);}------------------------------------------------------------------A number of link errors will appear:d:/mingw-gcc3.4/bin/../lib/gcc/mingw32/3.4.0/../../../libstdc++.a(allocator.o)(.text$_ZN9__gnu_cxx12__pool_allocILb1ELi0EE5_LockC1Ev+0x31):allocator.cc: undefined reference to `__gnu_cxx::_GLIBCXX_mutex_address'd:/mingw-gcc3.4/bin/../lib/gcc/mingw32/3.4.0/../../../libstdc++.a(allocator.o)(.text$_ZN9__gnu_cxx12__pool_allocILb1ELi0EE5_LockC1Ev+0x4c):allocator.cc: undefined reference to `__gnu_cxx::_GLIBCXX_mutex'd:/mingw-gcc3.4/bin/../lib/gcc/mingw32/3.4.0/../../../libstdc++.a(allocator.o)(.text$_ZN9__gnu_cxx12__pool_allocILb1ELi0EE5_LockC1Ev+0x84):allocator.cc: undefined reference to `__gnu_cxx::_GLIBCXX_once'd:/mingw-gcc3.4/bin/../lib/gcc/mingw32/3.4.0/../../../libstdc++.a(allocator.o)(.text$_ZN9__gnu_cxx12__pool_allocILb1ELi0EE5_LockC1Ev+0x89):allocator.cc: undefined reference to `__gnu_cxx::_GLIBCXX_mutex_init()'...The cause is that libstdc++-v3/include/bits/stl_threads.h references these symbols in namespace `__gnu_cxx', and libstdc++-v3/src/globals_io.cc defines them in namespace `__gnu_internal'.  It seems to affect all platforms.",RESOLVED          FIXED      
13658,Benjamin Kosnik,[testcase] namespace association vs. templates part one,"#include <vector>int main(){  // Should use vector specialization for swap, and does not.  {    std::vector<int> A;    std::vector<int> B;    std::swap(A, B);   }  // Should use vector specialization for swap, and does.  {    using namespace std;    vector<int> A;    vector<int> B;    swap(A, B);   }  return 0;}",RESOLVED          FIXED      
17780,Benjamin Kosnik,std::allocator vs. static init,"Real QoI issue. First reported here:http://gcc.gnu.org/ml/libstdc++/2004-07/msg00038.htmlSeeing other reports in Red Hat's bugzilla.This is not a libsupc++ issue, but rather an issue with the default allocator.For 3.4.0, this is fixed because std::allocator uses new_allocator. However,current incarnations of __mt_alloc and __pool_alloc have issues.Working on a fix.-benjamin",RESOLVED          FIXED      
17937,Benjamin Kosnik,Critical ~__pool troubles,"Michael Matz distilled this simple testcase from KDE arts:#include <string> #include <list> using namespace std; static list<string> modulePath; int main() {   modulePath.push_back(""hallo"");   return 0; }The attached valgrind output clearly shows that ~__pool is still not ok,unfortunately.",RESOLVED          FIXED      
17259,Benjamin Kosnik,One more _S_leaf incorrectly qualified with _RopeRep:: in ropeimpl.h,"After the committing of reversion 1.23.4.5 ofgcc/libstdc++-v3/include/ext/ropeimpl.h on Fri Jun 18 10:28:08 2004 UTC,_S_leaf, _S_function, etc have been qualified with _Rope_constants:: instead of_RopeRep.However, there is one left out. Searching for _RopeRep::_S_leaf in ropeimpl.hand there is one match. This causes sources which include ext/ropeimpl.h fail tobuild.",RESOLVED          FIXED      
16248,Benjamin Kosnik,[4.0 Regression] recent concurrence.h chanes breaks mingw bootstrap,"The problem is that we get this case in concurrence.h:// Implies __GTHREAD_MUTEX_INIT_FUNCTION#  define __glibcxx_mutex_define_initialized(NAME) \__gthread_mutex_t NAME; \__gthread_once_t NAME ## _once = __GTHREAD_ONCE_INIT; \void NAME ## _init() { __GTHREAD_MUTEX_INIT_FUNCTION(&NAME); }# define __glibcxx_mutex_lock(NAME) \__gthread_once(&NAME ## _once, NAME ## _init); \__gthread_mutex_lock(&NAME)The class lock uses the macro __glibcxx_mutex_lock.This makes reference to device_once and device_init./home/bothner/GNU/MinGW/build/crossgcc_build/gcc/xgcc -shared-libgcc-B/home/bothner/GNU/MinGW/build/crossgcc_build/gcc/ -nostdinc++-L/home/bothner/GNU/MinGW/build/crossgcc_build/i686-pc-mingw32/libstdc++-v3/src-L/home/bothner/GNU/MinGW/build/crossgcc_build/i686-pc-mingw32/libstdc++-v3/src/.libs-B/home/bothner/GNU/MinGW/build/crossgcc/i686-pc-mingw32/bin/-B/home/bothner/GNU/MinGW/build/crossgcc/i686-pc-mingw32/lib/ -isystem/home/bothner/GNU/MinGW/build/crossgcc/i686-pc-mingw32/include -isystem/home/bothner/GNU/MinGW/build/crossgcc/i686-pc-mingw32/sys-include-I/home/bothner/GNU/MinGW/build/crossgcc_build/i686-pc-mingw32/libstdc++-v3/include/i686-pc-mingw32-I/home/bothner/GNU/MinGW/build/crossgcc_build/i686-pc-mingw32/libstdc++-v3/include-I/home/bothner/GNU/MinGW/gcc/libstdc++-v3/libsupc++ -O2 -g -g-fno-implicit-templates -Wall -Wextra -Wwrite-strings -Wcast-qual-fdiagnostics-show-location=once -c/home/bothner/GNU/MinGW/gcc/libstdc++-v3/src/allocator.cc -o allocator.oIn file included from/home/bothner/GNU/MinGW/build/crossgcc_build/i686-pc-mingw32/libstdc++-v3/include/ext/pool_allocator.h:54,                 from /home/bothner/GNU/MinGW/gcc/libstdc++-v3/src/allocator.cc:37:/home/bothner/GNU/MinGW/build/crossgcc_build/i686-pc-mingw32/libstdc++-v3/include/bits/concurrence.h:In constructor `__gnu_cxx::lock::lock(__gthread_mutex_t&)':/home/bothner/GNU/MinGW/build/crossgcc_build/i686-pc-mingw32/libstdc++-v3/include/bits/concurrence.h:76:error: `device_once' was not declared in this scope/home/bothner/GNU/MinGW/build/crossgcc_build/i686-pc-mingw32/libstdc++-v3/include/bits/concurrence.h:76:error: `device_init' was not declared in this scope/home/bothner/GNU/MinGW/build/crossgcc_build/i686-pc-mingw32/libstdc++-v3/include/bits/concurrence.h:76:warning: unused variable 'device_once'/home/bothner/GNU/MinGW/build/crossgcc_build/i686-pc-mingw32/libstdc++-v3/include/bits/concurrence.h:76:warning: unused variable 'device_init'make[3]: *** [allocator.lo] Error 1The problem is these are never defined, as there is noinvocation of the macro __glibcxx_mutex_define_initialized.I don't see how to fix the lock class to invoke the macro,since the macro needs to define a C-style function - foreach lock *instance*, which isn't easy to do. The problem would be for any target that defines __GTHREADSbut not __GTHREAD_MUTEX_INIT - i.e. that uses__GTHREAD_MUTEX_INIT_FUNCTION.",RESOLVED          FIXED      
10246,Benjamin Kosnik,[3.4/4.0 regression] libsupc++ needs to be independent (again) of libstdc++,"In the FAQ in docs/html/faq, $2.4 says:   If the only functions from libstdc++.a which you need are language   support functions (those listed in [73]clause 18 of the standard,   e.g., new and delete), then try linking against libsupc++.a (usually   specifying -lsupc++ when calling g++ for the final link step will do   it). This library contains only those support routines, one per object   file. But if you are using anything from the rest of the library, such   as IOStreams or vectors, then you'll still need pieces from   libstdc++.a.Thus, given a test that does very little, you'd expect that compiling it with    gcc test.cpp -lsupc++would succeed.  However, with the attached test that does a call to std::terminate(), the current devo tree (don't know about 3.3's branch) will fail to link with/home/brendan/gcc/libstdc++-v3/libsupc++/vterminate.cc:66: undefined reference to `__cxa_demangle'This added the use of demangling in terminate:	2002-04-01 Phil Edwards <pme@gcc.gnu.org>        * config/linker-map.gnu:  Export __verbose_terminate_handler.        * libsupc++/Makefile.am (sources):  Add cxa_demangle.c, dyn-string.c.        Make new LTCOMPILE variable, use it in new special build rules.        * libsupc++/Makefile.in:  Rebuild.        * src/vterminate.cc (__verbose_terminate_handler):  Enable use of        runtime __cxa_demangle.And then vterminate moved to libsupc++ as well:	2002-12-25  Phil Edwards  <pme@gcc.gnu.org>	* src/vterminate.cc:  Move to...	* libsupc++/vterminate.cc:  ...here.  New file.  Replace fprintf with	writestr macro.  Slight reword to explanatory text.	...And recently, demangle moved out of libsupc++:	2003-02-27  Benjamin Kosnik  <bkoz@redhat.com>        * src/Makefile.am (sources): Add demangle.cc.        (demangle.o): Add.        (demangle.lo): Add.             * src/Makefile.in: Regenerate.        * libsupc++/Makefile.am: Remove old __cxa_demangle bits.        * libsupc++/Makefile.in: Regenerate.I believe that demangling has to go back into libsupc++ in order for  __verbose_terminate_handler to be able to use __cxa_demangle.Release:CVS tree 2003-03-27Environment:n/aHow-To-Repeat:Build & link the test with gcc 3.2 doing just  gcc call-terminate.cpp -o t -lsupc++You can then run ./t and see it call abort() from terminate().But then build and link it with a source tree checked out since late February, and you'll get the error that the linker can't resolve __cxa_terminate.",RESOLVED          FIXED      
7219,Benjamin Kosnik,_GLIBCPP_DEPRECATED on (ios_base::streamoff and ios_base::streampos types),"C++ standard (D.6 1,5,6) obliges to define ios_base::streamoff and ios_base::streampos types.You don't do it. Try to compile attached sample.Release:gcc3-c++-3.0.1-3Environment:Linux RedHat 7.2(Enigma)gcc3-c++-3.0.1-3libstdc++3-3.0.1-3How-To-Repeat:Try to compile attached sample.",RESOLVED          FIXED      
12658,Benjamin Kosnik,Thread safety problems in locale::global() and locale::locale(),"1)locale::global(const locale&) is defined so:  locale  locale::global(const locale& __other)  {    _S_initialize();    // XXX MT    _Impl* __old = _S_global;    __other._M_impl->_M_add_reference();    _S_global = __other._M_impl;     if (_S_global->_M_check_same_name()         && (std::strcmp(_S_global->_M_names[0], ""*"") != 0))      setlocale(LC_ALL, __other.name().c_str());    // Reference count sanity check: one reference removed for the    // subsition of __other locale, one added by return-by-value. Net    // difference: zero. When the returned locale object's destrutor    // is called, then the reference count is decremented and possibly    // destroyed.    return locale(__old);  }If two threads run locale::global() at the same time, such that:1) thread 1 begins and executes      _Impl* __old = _S_global;and then yields.2) thread 2 runs locale::global() completely.3) thread 1 resumes executions and completes.Then the reference count of __old is decremented twice, although _S_globalonly holds 1 reference. To compensate, the reference count of the localeassigned to _S_global in thread 2 is incremented, but no reference to itis stored so is leaked.2)locale::locale is defined so:  locale::locale() throw()  {     _S_initialize();     (_M_impl = _S_global)->_M_add_reference();   }If1) thread 1 runs locale::locale() and yields after executing_M_impl = _S_global but before calling _M_add_reference(), andthe reference count of _S_global is 1.2) thread 2 runs locale::global() completely and decrements thereference count of _S_global.3) thread 1 resumes execution and calls _M_impl->_M_add_reference()The last reference to _S_global is removed in 2), so_M_add_reference() in 3) is called on an object that has already beendeleted.",RESOLVED          FIXED      
16678,Benjamin Kosnik,warning: suggest parentheses around assignment used as truth value,"Compiling the code snippet========================================#include<iostream>void foo(std::istream &s){    int i;    s >> i;}========================================with ""g++ -O3 -Wall"" on mainline, I get the warning:/Work/reichelt/GCC/FARM/gcc-3.5-20040722/bin/../lib/gcc/i686-pc-linux-gnu/3.5.0/../../../../include/c++/3.5.0/bits/locale_facets.tcc:In member function `_InIter std::num_get<_CharT,_InIter>::_M_extract_int(_InIter, _InIter, std::ios_base&, std::_Ios_Iostate&,_ValueT&) const [with _ValueT = long int, _CharT = char, _InIter =std::istreambuf_iterator<char, std::char_traits<char> >]':/Work/reichelt/GCC/FARM/gcc-3.5-20040722/bin/../lib/gcc/i686-pc-linux-gnu/3.5.0/../../../../include/c++/3.5.0/bits/locale_facets.tcc:693:  instantiated from `_InIter std::num_get<_CharT, _InIter>::do_get(_InIter,_InIter, std::ios_base&, std::_Ios_Iostate&, long int&) const [with _CharT =char, _InIter = std::istreambuf_iterator<char, std::char_traits<char> >]'/Work/reichelt/GCC/FARM/gcc-3.5-20040722/bin/../lib/gcc/i686-pc-linux-gnu/3.5.0/../../../../include/c++/3.5.0/bits/locale_facets.h:2014:  instantiated from `_InIter std::num_get<_CharT, _InIter>::get(_InIter, _InIter,std::ios_base&, std::_Ios_Iostate&, long int&) const [with _CharT = char,_InIter = std::istreambuf_iterator<char, std::char_traits<char> >]'/Work/reichelt/GCC/FARM/gcc-3.5-20040722/bin/../lib/gcc/i686-pc-linux-gnu/3.5.0/../../../../include/c++/3.5.0/bits/istream.tcc:195:  instantiated from `std::basic_istream<_CharT, _Traits>&std::basic_istream<_CharT, _Traits>::operator>>(int&) [with _CharT = char,_Traits = std::char_traits<char>]'bug.cc:6:   instantiated from here/Work/reichelt/GCC/FARM/gcc-3.5-20040722/bin/../lib/gcc/i686-pc-linux-gnu/3.5.0/../../../../include/c++/3.5.0/bits/locale_facets.tcc:537:warning: suggest parentheses around assignment used as truth value/Work/reichelt/GCC/FARM/gcc-3.5-20040722/bin/../lib/gcc/i686-pc-linux-gnu/3.5.0/../../../../include/c++/3.5.0/bits/locale_facets.tcc:580:warning: suggest parentheses around assignment used as truth valueIn fact line 580 in locale_facets.tcc reads:            else if (__q = __traits_type::find(__lit_zero, __len, __c))Grepping with the command  egrep -nH ""if \([_a-zA-Z0-9]+ = ""through mainline's sources there some more instances of such deprecated coding:gcc/fixinc/procopen.c:95:  if (pz_cmd = *pp_args,gcc/local-alloc.c:1359:           if (r1 = XEXP (note, 0), REG_P (r1)gcc/tlink.c:605:      else if (p = strchr (oldq, '""'), p)libjava/java/lang/dtoa.c:325:      if (j = 11 - hi0bits (word0 (d2) &Frac_mask))libjava/java/lang/mprec.c:388:      if (y = *xb++)libjava/java/lang/mprec.c:815:  if (y = d1)libjava/java/lang/mprec.c:817:      if (k = lo0bits (&y))libstdc++-v3/include/bits/locale_facets.tcc:371:          else if (__q =__traits_type::find(__lit_zero, 10, __c))libstdc++-v3/include/bits/locale_facets.tcc:537:            else if (__q =__traits_type::find(__lit_zero, __len, __c))libstdc++-v3/include/bits/locale_facets.tcc:580:            else if (__q =__traits_type::find(__lit_zero, __len, __c))libstdc++-v3/include/bits/locale_facets.tcc:1123:      if (__p =char_traits<_CharT>::find(__ws, __len, __cdec))libstdc++-v3/include/bits/locale_facets.tcc:1359:             if (__q =__traits_type::find(__lit_zero, 10, *__beg))This should be fixed.",RESOLVED          FIXED      
13598,Benjamin Kosnik,enc_filebuf doesn't work,"Although enc_filebuf now compiles (PR 13189), it's not possible to do anyactual IO with it.The problem seems to be that basic_filebuf assumes that state_type isassignable, but __enc_traits isn't. Although operator= is defined for__enc_traits, t = u doesn't result in t being equivalent to u, sinceit doesn't copy the iconv_t members (_M_*_desc):    // Need assignment operator as well.    __enc_traits&    operator=(const __enc_traits& __obj)    {      strncpy(_M_int_enc, __obj._M_int_enc, _S_max_size);      strncpy(_M_ext_enc, __obj._M_ext_enc, _S_max_size);      _M_in_desc = 0;      _M_out_desc = 0;      _M_ext_bom = __obj._M_ext_bom;      _M_int_bom = __obj._M_int_bom;      return *this;    }(Note that there is a memory leak here if _M_in_desc or _M_out_desc arenon-null.)",RESOLVED          FIXED      
15074,Benjamin Kosnik,g++ -lsupc++ still links against libstdc++,The FAQ says that using g++ and -lsupc++ together will link against libsupc++instead of libstdc++.  This doesn't work on GNU/Linux:                                                                                jim@squirrel:~/test $ g++ -o sizeof sizeof.cc -lsupc++jim@squirrel:~/test $ ldd sizeof        libstdc++.so.5 => /usr/lib/libstdc++.so.5 (0x7002c000)        libm.so.6 => /lib/libm.so.6 (0x700f0000)        libgcc_s.so.1 => /usr/local/lib/libgcc_s.so.1 (0x70184000)        libc.so.6 => /lib/libc.so.6 (0x701a0000)        /lib/ld-linux.so.2 => /lib/ld-linux.so.2 (0x70000000)jim@squirrel:~/test $ gcc -o sizeof sizeof.cc -lsupc++jim@squirrel:~/test $ ldd sizeof        libc.so.6 => /lib/libc.so.6 (0x7002c000)        /lib/ld-linux.so.2 => /lib/ld-linux.so.2 (0x70000000),RESOLVED          FIXED      
14720,Benjamin Kosnik,"Undefined reference to `std::basic_ios<char, std::char_traits<char> >::_M_setstate(std::_Ios_Iostate)","Here is the output of: ""gcc -v -save-temps all-your-options source-file""Compile command:g++ -v -save-temps -I/home/schoen/src/projects/meprosCpp/trunk/3rdparty/smartAssert -I/home/schoen/src/projects/meprosCpp/trunk/3rdparty/boost/linux  Main.cppCompiler Output:Reading specs from /usr/lib/gcc-lib/i586-mandrake-linux-gnu/3.3.2/specsConfigured with: ../configure --prefix=/usr --libdir=/usr/lib--with-slibdir=/lib --mandir=/usr/share/man --infodir=/usr/share/info--enable-shared --enable-threads=posix --disable-checking --enable-long-long--enable-__cxa_atexit --enable-clocale=gnu--enable-languages=c,c++,ada,f77,objc,java,pascal --host=i586-mandrake-linux-gnu--with-system-zlibThread model: posixgcc version 3.3.2 (Mandrake Linux 10.0 3.3.2-6mdk) /usr/lib/gcc-lib/i586-mandrake-linux-gnu/3.3.2/cc1plus -E -D__GNUG__=3 -quiet-v -I /home/schoen/src/projects/meprosCpp/trunk/3rdparty/smartAssert -I/home/schoen/src/projects/meprosCpp/trunk/3rdparty/boost/linux -D__GNUC__=3-D__GNUC_MINOR__=3 -D__GNUC_PATCHLEVEL__=2 -D_GNU_SOURCE Main.cpp Main.iiignoring nonexistent directory ""/usr/i586-mandrake-linux-gnu/include""#include ""..."" search starts here:#include <...> search starts here: /home/schoen/src/projects/meprosCpp/trunk/3rdparty/smartAssert /home/schoen/src/projects/meprosCpp/trunk/3rdparty/boost/linux /usr/include/c++/3.3.2 /usr/include/c++/3.3.2/i586-mandrake-linux-gnu /usr/include/c++/3.3.2/backward /usr/local/include /usr/lib/gcc-lib/i586-mandrake-linux-gnu/3.3.2/include /usr/includeEnd of search list. /usr/lib/gcc-lib/i586-mandrake-linux-gnu/3.3.2/cc1plus -fpreprocessed Main.ii-quiet -dumpbase Main.cpp -auxbase Main -version -o Main.sGNU C++ version 3.3.2 (Mandrake Linux 10.0 3.3.2-6mdk) (i586-mandrake-linux-gnu)        compiled by GNU C version 3.3.2 (Mandrake Linux 10.0 3.3.2-6mdk).GGC heuristics: --param ggc-min-expand=64 --param ggc-min-heapsize=64306 as -V -Qy -o Main.o Main.sGNU assembler version 2.14.90.0.7 (i586-mandrake-linux-gnu) using BFD version2.14.90.0.7 20031029 /usr/lib/gcc-lib/i586-mandrake-linux-gnu/3.3.2/collect2 --eh-frame-hdr -melf_i386 -dynamic-linker /lib/ld-linux.so.2/usr/lib/gcc-lib/i586-mandrake-linux-gnu/3.3.2/../../../crt1.o/usr/lib/gcc-lib/i586-mandrake-linux-gnu/3.3.2/../../../crti.o/usr/lib/gcc-lib/i586-mandrake-linux-gnu/3.3.2/crtbegin.o-L/usr/lib/gcc-lib/i586-mandrake-linux-gnu/3.3.2-L/usr/lib/gcc-lib/i586-mandrake-linux-gnu/3.3.2/../../.. Main.o -lstdc++ -lm-lgcc_s -lgcc -lc -lgcc_s -lgcc/usr/lib/gcc-lib/i586-mandrake-linux-gnu/3.3.2/crtend.o/usr/lib/gcc-lib/i586-mandrake-linux-gnu/3.3.2/../../../crtn.oMain.o(.gnu.linkonce.t._ZSt7getlineIcSt11char_traitsIcEN5boost12smart_assert7Private18smart_assert_allocIcEEERSt13basic_istreamIT_T0_ESB_RSbIS8_S9_T1_ES8_+0x18f):In function `std::basic_istream<char, std::char_traits<char> >&std::getline<char, std::char_traits<char>,boost::smart_assert::Private::smart_assert_alloc<char>>(std::basic_istream<char, std::char_traits<char> >&, std::basic_string<char,std::char_traits<char>, boost::smart_assert::Private::smart_assert_alloc<char>>&, char)':: undefined reference to `std::basic_ios<char, std::char_traits<char>>::_M_setstate(std::_Ios_Iostate)'collect2: ld returned 1 exit statusAdditional Information:The problem also occurs on Gentoo Linux with gcc 3.3.2, and also with gcc 3.3.3on Mandrake 10.0.The problem does NOT occur with gcc 3.3.1 on Mandrake 10.0 (I didn't test gcc3.3.1 on Gentoo).The problem does NOT occur when additionally linking against the static library:libstdc++.a.",RESOLVED          FIXED      
10063,Benjamin Kosnik,[3.4 Regression] stdio_filebuf broken,stdio_filebuf on current mainline now bypasses the FILE* used to construct it and uses the underlying file descriptor. This breaks any program that does I/O on a FILE* before constructing a stdio_filebuf from it.Release:gcc 3.4 cvs from 20030312Environment:Red Hat Linux 8.0How-To-Repeat:See attachment.,RESOLVED          FIXED      
10093,Benjamin Kosnik,[3.3/3.4 Regression] [L DR 61] Setting failbit in exceptions doesn't work,Setting ios_base::failbit in basic_ios::exceptions does not cause basic_istream::operator>>(int&) to throw an exception.This appears to have been caused by the recent patch for PR libstdc++/9561.Release:gcc version 3.3 20030310 (prerelease)Environment:Red Hat Linux 8.0How-To-Repeat:See attachment.,RESOLVED          FIXED      
10276,Benjamin Kosnik,"[3.4 regression] ABI, memory issues with __locale_cache","The following code snippet leaks memory:  for (int i = 0; i < 1000; ++i)  {    std::ostringstream s;  }this results in 1000 undeleted allocations that madewith 'new' in respectively ios.cc and basic_ios.tccat:ios.cc:  void  ios_base::register_callback(event_callback __fn, int __index)  { _M_callbacks = new _Callback_list(__fn, __index, _M_callbacks); }andbits/basic_ios.tcc:      if (!pword(0)) {        pword(0) = auto_ptr<__cache_t>(new __cache_t()).release();        register_callback(__cache_t::_S_callback, 0);      }Can someone please make this high priority?Its a regression and I really think that itMUST be fixed before 3.3 is released.Release:3.3 branch, mainlineEnvironment:i686-gnu-linux",RESOLVED          FIXED      
7076,Benjamin Kosnik,[3.3/3.4 regression] iostreams very slow compared with earlier gcc versions,"'cout' is very slow in g++ 3.1 compared with g++ 2.95.4 (Debian prerelease).My results with 'time', gcc 2.95.4:mbp:~/testcode$ time ./stream > /dev/nullreal    0m1.886suser    0m0.940ssys     0m0.000sMy results with gcc 3.1.0:mbp:~/testcode$ time ./stream-3.1 > /dev/nullreal    0m37.636suser    0m18.520ssys     0m0.010sRelease:gcc-3.1How-To-Repeat:#include <iostream>int main(int argc, char** argv) {    for(int i=0; i< 1500000; i++)        std::cout << i << '\n';}",RESOLVED          FIXED      
9269,Benjamin Kosnik,[3.4 regression] libstdc++ headers: explicit specialization of function must precede its first use,"https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=79694this fix cannot be applied on mainline, due to this error:/mnt/hd/ahimsa/bld-x86-gcc/gcc/xgcc -shared-libgcc -B/mnt/hd/ahimsa/bld-x86-gcc/gcc/ -nostdinc++ -L/mnt/hd/ahimsa/bld-x86-gcc/i686-pc-linux-gnu/libstdc++-v3/src -L/mnt/hd/ahimsa/bld-x86-gcc/i686-pc-linux-gnu/libstdc++-v3/src/.libs -B/mnt/hd/ahimsa/H-x86-gcc/i686-pc-linux-gnu/bin/ -B/mnt/hd/ahimsa/H-x86-gcc/i686-pc-linux-gnu/lib/ -isystem /mnt/hd/ahimsa/H-x86-gcc/i686-pc-linux-gnu/include -nostdinc++ -I/mnt/hd/ahimsa/bld-x86-gcc/i686-pc-linux-gnu/libstdc++-v3/include/i686-pc-linux-gnu -I/mnt/hd/ahimsa/bld-x86-gcc/i686-pc-linux-gnu/libstdc++-v3/include -I/mnt/hd/bliss/src.gcc/gcc/libstdc++-v3/libsupc++ -I/mnt/hd/bliss/src.gcc/gcc/libstdc++-v3/libmath -g -O2 -D_GNU_SOURCE -fno-implicit-templates -Wall -Wno-format -W -Wwrite-strings -Winline -fdiagnostics-show-location=once -ffunction-sections -fdata-sections -c /mnt/hd/bliss/src.gcc/gcc/libstdc++-v3/src/fstream.cc  -fPIC -DPIC -o .libs/fstream.oIn file included from /mnt/hd/ahimsa/bld-x86-gcc/i686-pc-linux-gnu/libstdc++-v3/include/ext/stdio_filebuf.h:38,                 from /mnt/hd/bliss/src.gcc/gcc/libstdc++-v3/src/ext-inst.cc:35:/mnt/hd/ahimsa/bld-x86-gcc/i686-pc-linux-gnu/libstdc++-v3/include/fstream:448: error: expected   function-definition/mnt/hd/ahimsa/bld-x86-gcc/i686-pc-linux-gnu/libstdc++-v3/include/fstream:453: error: expected   function-definitionIn file included from /mnt/hd/bliss/src.gcc/gcc/libstdc++-v3/src/fstream.cc:35:/mnt/hd/ahimsa/bld-x86-gcc/i686-pc-linux-gnu/libstdc++-v3/include/fstream:448: error: expected   function-definition/mnt/hd/ahimsa/bld-x86-gcc/i686-pc-linux-gnu/libstdc++-v3/include/fstream:453: error: expected   function-definitionmake[3]: *** [fstream.lo] Error 1make[3]: *** Waiting for unfinished jobs....make[3]: *** [ext-inst.lo] Error 1make[3]: Leaving directory `/mnt/hd/ahimsa/bld-x86-gcc/i686-pc-linux-gnu/libstdc++-v3/src'make[2]: *** [all-recursive] Error 1make[2]: Leaving directory `/mnt/hd/ahimsa/bld-x86-gcc/i686-pc-linux-gnu/libstdc++-v3'make[1]: *** [all-recursive-am] Error 2make[1]: Leaving directory `/mnt/hd/ahimsa/bld-x86-gcc/i686-pc-linux-gnu/libstdc++-v3'make: *** [all-target-libstdc++-v3] Error 2<bkoz@fillmore> /mnt/hd/ahimsa/bld-x86-gcc                                      %Release:gcc-3.2.x, gcc-3.3.c, gccEnvironment:x86 linux",RESOLVED          FIXED      
7111,Benjamin Kosnik,cout of null pointer causes core dump,Trying to print a null character pointer causes this program to core dump.  This works fine under GCC 2.95.  I know null pointers are sensitive and am not completely sure if this is truly a bug or what the correct way of handling this is.Release:gcc version 3.1Environment:Sun SunOS 5.8How-To-Repeat:Compile it and run it.  If I change the char* to be void* it works fine.,RESOLVED          FIXED      
9073,Benjamin Kosnik,"Can __STL_ASSERTIONS come back, but with more than rope?","[ Reported to the Debian BTS as report #128993.  Please CC 128993@bugs.debian.org on replies.  Log of report can be found at http://bugs.debian.org/128993 ] It'd be nice to have __STL_ASSERTIONS or equivelant come back to dothings like bounds-check vector accesses (yes, I know about at()) fordebugging purposes.Release:3.0.4 (Debian) (Debian unstable)Environment:System: Debian GNU/Linux (unstable)Architecture: i686host: i386-linux",RESOLVED          FIXED      
9370,Benjamin Kosnik,Bad exception handling in formatted I/O functions,"Exception handling in the formatted I/O functions (istream::operator>> and ostream::operator<<) appears to be broken.1. Exceptions derived from std::exception are handled correctly, except that the original exception isn't rethrown if badbit is set in exceptions(), an ios_base::failure is thrown instead.2. Exceptions not derived from std::exception are not handled at all, badbit is not set in rdstate() and the exception is passed on to the caller even if badbit is not set in exceptions().Release:gcc-3.2.1Environment:Red Hat Linux 8.0How-To-Repeat:See attachment.",RESOLVED          FIXED      
9024,Benjamin Kosnik,"Input fails after call to basic_filebuf<>::pubsetbuf(0, 0)","It is not possible to use a basic_ifstream s for input if s.rdbuf()->pubsetbuf(0, 0) has been called.The call pubsetbuf(0, 0) is described in:Bjarne Stroustrup, The C++ Programing Language, 3rd edition,Section 21.6.4, page 647:""By default, setbuf(0, 0) means ""unbuffered""""Nicolai M. Josuttis, The C++ Standard Library, page 664:""...the use of [pubsetbuf] is only portable if it is calledbefore the first I/O operation is performed and it is called as pubsetbuf(0, 0)...""Release:gcc-3.2.1Environment:Redhat Linux 8.0 on i686; glibc-2.2.93How-To-Repeat:See attachment.",RESOLVED          FIXED      
5799,Benjamin Kosnik,streams reading from fifo,"Perhaps this is not a bug.if an ifstream reads from a named pipe, it sees the dataonly when the buffer is full or the pipe is closed, but notwhen the process writing to the pipe flushes.  Using<stdio.h> there is no such problem.e.g. compiling and running#include <fstream>#include <iostream>intmain(){  std::ifstream in(""/tmp/pipe"");  char          c;  while (in >> c)    std::cout << c;    return 0;}while in an other shell I$ mkfifo /tmp/pipe$ cat > /tmp/pipehelloworld^D$In the shell running the c++ programhelloworldonly appears after ^D.But compiling and running#include <stdio.h>intmain(){  FILE *in = fopen(""/tmp/pipe"", ""r"");  char c;  while ((c = fgetc(in)) != EOF)    putchar(c);  return 0;}After entering hello and pushing enter, hello appearson the output of the program.Is a special initialisation of the ifstream needed perhaps?Release:3.0.4Environment:SuSE linux 7.3 i686 libc 2.2.4",RESOLVED          FIXED      
11691,Benjamin Kosnik,"stdio_filebuf leaks FILE buffer when ""no close"" is requested","This bug (?) can be re-created on Red Hat Linux 9.0runnig GNUC > 3.If I compile the code below (must be GNUC > 3), run it andmonitor the VmSize shown using /proc/<pid>/status, itincreases by 4kB every time through the loop.I took a look at the source and it appears that fdopen iscalled in __basic_file (with the file descriptor passed in,stdout here for test purposes) and the resulting FILE* isassigned to private variable _M_cfile.If the third parameter in the stdio_filebuf ctor is set tofalse, fclose is never called for _M_cfile, but theFILE buffer/stream (_pointed to by _M_cfile) opened usingfdopen, isn't accessible, so the buffer is never freed.It seems to me that if I pass in a fd and tell stdio_filebufnot to close the file, it would still close the FILE bufferor at least provide some way for me to access it so I cancall fclose when I'm done.  Since all I have is the fdI passed in, all I can do is call close() ... which resultsin the leak I mentioned.Note that this was originally discover using fd's from apipe() call, I just used stdout to simplify the example.#include <unistd.h>#include <iostream>#include <ext/stdio_filebuf.h>int main(){  std::cout << ""pid = "" << getpid() << std::endl;  for (int i=0; i<50; ++i)  {     __gnu_cxx::stdio_filebuf<char> filebuf(1,std::ios_base::out,false,1024);     sleep(1);  }}",RESOLVED          FIXED      
9371,Benjamin Kosnik,Bad exception handling in i/ostream::operator>>/<<(streambuf*),"basic_istream<>::operator>>(basic_streambuf<>* sb) and basic_ostream<>::operator<<(basic_streambuf<>* sb) don't handle exceptions that occur during I/O correctly.1. Exceptions thrown during I/O cause failbit to be set in rdstate(), not badbit.2. The exception is not rethrown if badbit but not failbit is set in exceptions(). If failbit is set in exceptions(), an ios_base::failure is thrown.3. PR9370 mostly applies to these functions also.Release:gcc-3.2.1Environment:Red Hat Linux 8.0How-To-Repeat:See attachment.",RESOLVED          FIXED      
10095,Benjamin Kosnik,istream::operator>>(int&) sets ios::badbit when ios::failbit is set.,"When ios::failbit is set in exceptions, ios::badbit will be set in rdstate() whenever basic_istream::operator>>(int&) sets ios::failbit in rdstate().Release:gcc-3.2.2Environment:Red Hat Linux 8.0How-To-Repeat:See attachment.",RESOLVED          FIXED      
9546,Benjamin Kosnik,bad exception handling in ostream members,"All formatted and unformatted output functions must catch exceptions thrown from streambuf functions and set badbit. The program below fails (aborts) with 3.2.1. Looking at the code, at least the following functions are not properly dealing with exceptions: write(), flush(), tellp(), and seekp().RegardsMartinRelease:3.2.1How-To-Repeat:    #include <ostream>    #include <streambuf>    struct buf: std::streambuf    {        virtual std::streamsize        xsputn (const char_type*, std::streamsize) {            throw 0;            return 0;        }    };    int main ()    {        buf b;        std::ostream strm (&b);        strm.write (""foo"", 3);        return !(strm.bad ());    }",RESOLVED          FIXED      
8897,Benjamin Kosnik,Demangling of template conversion operators,"The symbol _ZN1AIfEcvT_IiEEv demangles asA<float>::operator float<int>()This is incorrect; float is not a template. Better would beA<float>::operator int()which is the C++ syntax, but could be mistaken for the non-template operator.PerhapsA<float>::operator T()[T=int]is appropriateRelease:3.2Environment:System: Linux mira 2.4.19-4GB #1 Fri Sep 13 13:14:56 UTC 2002 i686 unknownArchitecture: i686host: i486-suse-linux-gnubuild: i486-suse-linux-gnutarget: i486-suse-linux-gnuconfigured with: ../configure --enable-threads=posix --prefix=/usr --with-local-prefix=/usr/local --infodir=/usr/share/info --mandir=/usr/share/man --libdir=/usr/lib --enable-languages=c,c++,f77,objc,java,ada --enable-libgcj --with-gxx-include-dir=/usr/include/g++ --with-slibdir=/lib --with-system-zlib --enable-shared --enable-__cxa_atexit i486-suse-linux",RESOLVED          FIXED      
12297,Benjamin Kosnik,istream::sentry::sentry() handles eof() incorrectly.,"According to the resolution to DR 195:http://anubis.dkuug.dk/jtc1/sc22/wg21/docs/lwg-defects.html#195basic_istream::sentry::sentry() should call setstate(failbit | eofbit) ifis.rdbuf()->sgetc() or is.rdbuf()->sbumpc() return eof(). Currently, thesentry constructor calls is.setstate(eofbit) and later callsis.setstate(failbit). This means that failbit will not be set in is.rdstate()as it should if the call to setstate(eofbit) throws an exception.",RESOLVED          FIXED      
13109,Benjamin Kosnik,libstdc++-v3 bootstrap failure on Tru64 UNIX V4.0F: snprintf missing,"libstdc++-v3 fails to bootstrap on Tru64 UNIX V4.0F (which, unlike V5.x,lacks snprintf in libc):/vol/gcc/obj/gcc-3.4-20031117/4.0f-gcc/gcc/xgcc -shared-libgcc -B/vol/gcc/obj/gcc-3.4-20031117/4.0f-gcc/gcc/ -nostdinc++ -L/vol/gcc/obj/gcc-3.4-20031117/4.0f-gcc/alphaev67-dec-osf4.0f/libstdc++-v3/src -L/vol/gcc/obj/gcc-3.4-20031117/4.0f-gcc/alphaev67-dec-osf4.0f/libstdc++-v3/src/.libs -B/vol/gcc/share/alphaev67-dec-osf4.0f/bin/ -B/vol/gcc/share/alphaev67-dec-osf4.0f/lib/ -isystem /vol/gcc/share/alphaev67-dec-osf4.0f/include -isystem /vol/gcc/share/alphaev67-dec-osf4.0f/sys-include -I/vol/gcc/obj/gcc-3.4-20031117/4.0f-gcc/alphaev67-dec-osf4.0f/libstdc++-v3/include/alphaev67-dec-osf4.0f -I/vol/gcc/obj/gcc-3.4-20031117/4.0f-gcc/alphaev67-dec-osf4.0f/libstdc++-v3/include -I/vol/gnu/src/gcc/gcc/libstdc++-v3/libsupc++ -O2 -g -O2 -mieee -g -O2 -mieee -fno-implicit-templates -Wall -W -Wwrite-strings -Wcast-qual -fdiagnostics-show-location=once -c /vol/gnu/src/gcc/gcc/libstdc++-v3/src/debug.cc   -DPIC -o .libs/debug.o/vol/gnu/src/gcc/gcc/libstdc++-v3/src/debug.cc: In member function `void __gnu_debug::_Error_formatter::_Parameter::_M_print_field(const __gnu_debug::_Error_formatter*, const char*) const':/vol/gnu/src/gcc/gcc/libstdc++-v3/src/debug.cc:249: error: `snprintf' undeclared (first use this function)/vol/gnu/src/gcc/gcc/libstdc++-v3/src/debug.cc:249: error: (Each undeclared identifier is reported only once for each function it appears in.)/vol/gnu/src/gcc/gcc/libstdc++-v3/src/debug.cc: In member function `void __gnu_debug::_Error_formatter::_Parameter::_M_print_description(const __gnu_debug::_Error_formatter*) const':/vol/gnu/src/gcc/gcc/libstdc++-v3/src/debug.cc:356: error: `snprintf' undeclared (first use this function)/vol/gnu/src/gcc/gcc/libstdc++-v3/src/debug.cc: In member function `void __gnu_debug::_Error_formatter::_M_error() const':/vol/gnu/src/gcc/gcc/libstdc++-v3/src/debug.cc:438: error: `snprintf' undeclared (first use this function)/vol/gnu/src/gcc/gcc/libstdc++-v3/src/debug.cc: In member function `void __gnu_debug::_Error_formatter::_M_print_string(const char*) const':/vol/gnu/src/gcc/gcc/libstdc++-v3/src/debug.cc:543: error: `snprintf' undeclared (first use this function)make[4]: *** [debug.lo] Error 1Environment:System: OSF1 rimsky V4.0 1229 alphaMachine: alpha	host: alphaev67-dec-osf4.0fbuild: alphaev67-dec-osf4.0ftarget: alphaev67-dec-osf4.0fconfigured with: /vol/gnu/src/gcc/gcc/configure --prefix=/vol/gcc --with-local-prefix=/vol/gcc --disable-nls alphaev67-dec-osf4.0fHow-To-Repeat:Bootstrap as described above.",RESOLVED          FIXED      
10041,Benjamin Kosnik,HPUX 11.0 GCC 3.2.2 does not allow _GLIBCPP_USE_WCHAR_T to be defined,"I am trying to use 'wstring' class on HPUX. However it is not define. Looking at the header file 'include/bits/stringfwd.h', shows _GLIBCPP_USE_WCHAR_T is required to be defined. In file c++config.h it is not.HPUX 11.0 standard install does have NLS support. However, I am inclined to conclude the configure scripts is requiring additional header file which are not included in a 11.0 standard install. From what I can recall ( I could be wrong) not all of the standard w*.h files are present on HP. However, all of the standard w* api calls are supported.Release:gcc 3.2.2 on HPUX",RESOLVED          FIXED      
9858,Benjamin Kosnik,Extra virtual functions in ctype<char>,"ctype<char> has some non-standard virtual functions, for example bool do_is(mask, char).Release:gcc-3.2.1Environment:Red Hat Linux 8.0How-To-Repeat:See attachment.",RESOLVED          FIXED      
11065,Benjamin Kosnik,ctype<wchar_t>::do_is unimplemented,"This is a just a memo, in order not to forget about this issue pointed outby Ulrich:  http://gcc.gnu.org/ml/libstdc++/2003-03/msg00335.html",RESOLVED          FIXED      
2363,Benjamin Kosnik,objdir with colon causes bootstrap failure,"If the name of objdir contains a colon, bootstrap nearly succeeds but	at the end, during compilation of libstdc++, the following kind of	boostrap failure is encountered:	creating libstdc++.la	(cd .libs && rm -f libstdc++.la && ln -s ../libstdc++.la libstdc++.la)	gmake \	top_builddir=`CDPATH=:. && cd .. && pwd` \	top_srcdir=`CDPATH=:. && cd /sw/test/gcc/cvs-3.0/libstdc++-v3 && pwd` \	tmp-libstdc++.INC	gmake[5]: Entering directory `/files/pfeifer/O17:07/i386-unknown-freebsd4.2/libstdc++-v3/src'	Makefile:283: *** multiple target patterns.  Stop.	gmake[5]: Leaving directory `/files/pfeifer/O17:07/i386-unknown-freebsd4.2/libstdc++-v3/src'	gmake[4]: *** [libstdc++.INC] Error 2	gmake[4]: Leaving directory `/files/pfeifer/O17:07/i386-unknown-freebsd4.2/libstdc++-v3/src'Release:3.1 20010323 (experimental)Environment:System: FreeBSD taygeta.dbai.tuwien.ac.at 4.2-RELEASE FreeBSD 4.2-RELEASE #2: Thu Dec 28 19:02:47 CET 2000 root@taygeta.dbai.tuwien.ac.at:/usr/src/sys/compile/GERALDKERNEL i386	host: i386-unknown-freebsd4.2build: i386-unknown-freebsd4.2target: i386-unknown-freebsd4.2configured with: /sw/test/gcc/cvs/configure --prefix=/sw/test/gcc/FreeBSD --enable-languages=c,c++,objc,java : (reconfigured)",RESOLVED          FIXED      
12451,Benjamin Kosnik,missing(late) class forward declaration in cxxabi.h,"[forwarded from http://bugs.debian.org/209386]reported for 3.3.2 CVS 20030909The class declaration for __class_type_info is missing at line 184 incxxabi.h.Please apply following patch:=====================================================================--- /usr/include/c++/3.3/cxxabi.h	2003-08-31 13:36:42.000000000 +0200+++ cxxabi.h	2003-09-09 19:01:41.000000000 +0200@@ -175,6 +175,8 @@                                 unsigned __outer) const; }; +class __class_type_info;+ /* type information for a pointer to member variable */ class __pointer_to_member_type_info   : public __pbase_type_info@@ -201,8 +203,6 @@                                 unsigned __outer) const; }; -class __class_type_info;- /* helper class for __vmi_class_type */ class __base_class_type_info {=====================================================================",RESOLVED          FIXED      
9076,Benjamin Kosnik,Call Frame Instructions are not handled correctly during unwind operation..,"Based on DWARF2 Standard (6.4.2 Call Frame Instructions),The instructions ""DW_CFA_undefined"" & ""DW_CFA_same_value"" takes a single unsigned LEB128 argument that represents a register number. While executing these instructions, The runtime library is not treating the next data as operands to the ""DW_CFA_undefined"" & ""DW_CFA_same_value"" instructions. Instead, it treats them as opcodes and executes them. Due to this, the program behaviour changes and gives segmentation fault at runtime.  This is not a problem when I use gcc compiler and libraries. Because, gcc compiler may not be generating ""DW_CFA_undefined"" & ""DW_CFA_same_value"" instructions. But, This is an interoperability issue.I tried to compile the testcase with intel compiler and linked with gcc libraries. I got segmentation fault.  Fix for this problem may be simple. While handling ""DW_CFA_undefined"" & ""DW_CFA_same_value"" instructions (in file: gcc-3.2/gcc/unwind-dw2.c, function: execute_cfa_program), read the next LEB128 argument and ignore it.    Please let me know, if it is not correct.Thanks,-Sunil.Release:gcc-3.2Environment:$ g++ -vReading specs from /local/skdavasa/gcc321/lib/gcc-lib/i386-redhat-linux/3.2.1/specsConfigured with: gcc-3.2.1/configure --prefix=/local/skdavasa/gcc321 --enable-shared --enable-threads=posix --disable-checking --host=i386-redhat-linux --with-system-zlib --enable-__cxa_atexitThread model: posixgcc version 3.2.1cat /etc/issueRed Hat Linux release 8.0 (Psyche)Kernel \r on an \m",RESOLVED          FIXED      
2859,Benjamin Kosnik,Fix for smp ref-counted string bug on intel systems,See libstdc++/2837. The fix has now been used and confirmed to work by another user so this report wascreated to try and ensure it gets into the next release of the compiler. Also it should really have been raised as critical in the first report as itmakes the string library unusable on an intel smpsystem.Release:2.95.2/3,RESOLVED          FIXED      
2989,Benjamin Kosnik,ambiguous overload of strcpy when including iostream,"this code does no longer compile: === Cut ===#include <string.h>#include <iostream>using namespace std;int main() {  char foo[300];  char* bar = ""foo"";  strcpy(foo, bar);}=== Cut ===the error message is:  call of overloaded `strcpy(char[300], char*&)' is ambiguous/usr/include/string.h:78: candidates are: char* strcpy(char*, const char*)/usr/local/include/g++-v3/bits/std_cstring.h:104:                 char*    std::strcpy(char*, const char*)it worked fine with the gcc of a few days ago and with gcc 2.95.3 as allprevious releases (of course, as they didn't handle namespace conflicts)Release:3.0 20010529 (prerelease)Environment:System: Linux 2.4.4Architecture: i686host: i686-pc-linux-gnubuild: i686-pc-linux-gnutarget: i686-pc-linux-gnuconfigured with: ../configure --enable-languages=c,c++ --enable-shared --enable-threads --enable-c99 --enable-long-long",RESOLVED          FIXED      
3105,Benjamin Kosnik,bootstrap failure on i686-pc-linux-gnu,"boostrap failure on i686-pc-linux-gnuIn file included from /usr/src/gcc-cvs/gcc/libstdc++-v3/include/bits/fpos.h:40,                  from /usr/src/gcc-cvs/gcc/libstdc++-v3/include/bits/char_traits.h:40,                 from /usr/src/gcc-cvs/gcc/libstdc++-v3/include/bits/std_string.h:41,                 from /usr/src/gcc-cvs/gcc/libstdc++-v3/src/stdexcept.cc:34:/usr/src/gcc-cvs/gcc/libstdc++-v3/include/c_std/bits/std_cwchar.h:135: `fputwc'    not declared/usr/src/gcc-cvs/gcc/libstdc++-v3/include/c_std/bits/std_cwchar.h:136: `fputws'    not declared/usr/src/gcc-cvs/gcc/libstdc++-v3/include/c_std/bits/std_cwchar.h:137: `fwide'   not declared/usr/src/gcc-cvs/gcc/libstdc++-v3/include/c_std/bits/std_cwchar.h:138: `fwprintf'   not declared/usr/src/gcc-cvs/gcc/libstdc++-v3/include/c_std/bits/std_cwchar.h:139: `fwscanf'   not declared/usr/src/gcc-cvs/gcc/libstdc++-v3/include/c_std/bits/std_cwchar.h:140: `swprintf'   not declared/usr/src/gcc-cvs/gcc/libstdc++-v3/include/c_std/bits/std_cwchar.h:141: `swscanf'   not declared/usr/src/gcc-cvs/gcc/libstdc++-v3/include/c_std/bits/std_cwchar.h:142: `vfwprintf'   not declared/usr/src/gcc-cvs/gcc/libstdc++-v3/include/c_std/bits/std_cwchar.h:143: `vfwscanf'   not declared/usr/src/gcc-cvs/gcc/libstdc++-v3/include/c_std/bits/std_cwchar.h:144: `vswprintf'   not declared/usr/src/gcc-cvs/gcc/libstdc++-v3/include/c_std/bits/std_cwchar.h:145: `vswscanf'   not declared/usr/src/gcc-cvs/gcc/libstdc++-v3/include/c_std/bits/std_cwchar.h:146: `vwprintf'   not declared/usr/src/gcc-cvs/gcc/libstdc++-v3/include/c_std/bits/std_cwchar.h:147: `vwscanf'   not declared/usr/src/gcc-cvs/gcc/libstdc++-v3/include/c_std/bits/std_cwchar.h:148: `wprintf'   not declared/usr/src/gcc-cvs/gcc/libstdc++-v3/include/c_std/bits/std_cwchar.h:149: `wscanf'    not declared/usr/src/gcc-cvs/gcc/libstdc++-v3/include/c_std/bits/std_cwchar.h:150: `getwc'   not declared/usr/src/gcc-cvs/gcc/libstdc++-v3/include/c_std/bits/std_cwchar.h:151: `getwchar'   not declared/usr/src/gcc-cvs/gcc/libstdc++-v3/include/c_std/bits/std_cwchar.h:157: `putwc'   not declared/usr/src/gcc-cvs/gcc/libstdc++-v3/include/c_std/bits/std_cwchar.h:158: `putwchar'   not declared/usr/src/gcc-cvs/gcc/libstdc++-v3/include/c_std/bits/std_cwchar.h:159: `ungetwc'   not declared/usr/src/gcc-cvs/gcc/libstdc++-v3/include/c_std/bits/std_cwchar.h:181: `wcsftime'   not declaredmake[4]: *** [stdexcept.lo] Error 1make[4]: Leaving directory `/usr/src/gcc-cvs/BUILD/i686-pc-linux-gnu/libstdc++-v3/src'make[3]: *** [all-recursive] Error 1make[3]: Leaving directory `/usr/src/gcc-cvs/BUILD/i686-pc-linux-gnu/libstdc++-v3'make[2]: *** [all-recursive-am] Error 2make[2]: Leaving directory `/usr/src/gcc-cvs/BUILD/i686-pc-linux-gnu/libstdc++-v3'make[1]: *** [all-target-libstdc++-v3] Error 2make[1]: Leaving directory `/usr/src/gcc-cvs/BUILD'make: *** [bootstrap] Error 2bash-2.04#Release:CVS gcc-3_0-branch Sun Jun 10 07:00:06 CEST 2001Environment:SuSE 7.0; kernel 2.4.5-ac11, XFree86 4.1.0, gcc version 3.0 20010608 (prerelease)How-To-Repeat:make boostrap :-(",RESOLVED          FIXED      
3720,Benjamin Kosnik,Problems with num_get,"According to the book ""The C++ Standard Library"" by Josuttis on page707 the facet num_get is used to parse the textual representation ofnumbers. This works, unless I enter more than 56 decimals. Somehow asegmentation fault occurs. I believe libstdc++ should handle this gracefully.Release:3.1 20010716 (experimental)Environment:System: Linux kiste 2.4.6 #6 Wed Jul 11 02:21:23 CEST 2001 i686 unknownArchitecture: i686SuSE 7.1GNU ld version 2.11.90.0.23 (with BFD 2.11.90.0.23)host: i686-pc-linux-gnubuild: i686-pc-linux-gnutarget: i686-pc-linux-gnuconfigured with: ../gcc/configure --enable-shared --disable-nls --enable-threads=posix --enable-clocale=gnu --enable-languages=c,c++,f77,objcHow-To-Repeat:Source code n1.C#include <locale>#include <iostream>#include <iterator>int main(){    std::locale loc;    typedef std::istreambuf_iterator<char> ist_it;    ist_it beg = ist_it(std::cin);    ist_it end = ist_it();    std::ios_base& fmt = std::cin;    std::ios_base::iostate err = std::ios_base::goodbit;    double value;    std::num_get<char, ist_it> const& ng        = std::use_facet<std::num_get<char, ist_it> >(loc);    ng.get(beg, end, fmt, err, value);    std::cout << ""value: "" << value << std::endl;}Compiling n1.Cg++ -v -o n1 n1.C -W -Wall -gReading specs from /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1/specsConfigured with: ../gcc/configure --enable-shared --disable-nls --enable-threads=posix --enable-clocale=gnu --enable-languages=c,c++,f77,objcThread model: posixgcc version 3.1 20010716 (experimental) /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1/cc1plus -v -D__GNUC__=3 -D__GNUC_MINOR__=1 -D__GNUC_PATCHLEVEL__=0 -D__ELF__ -Dunix -Dlinux -D__ELF__ -D__unix__ -D__linux__ -D__unix -D__linux -Asystem=posix -D__NO_INLINE__ -D__STDC_HOSTED__=1 -W -Wall -D_GNU_SOURCE -Acpu=i386 -Amachine=i386 -Di386 -D__i386 -D__i386__ -D__tune_i686__ -D__tune_pentiumpro__ n1.C -D__GNUG__=3 -D__DEPRECATED -D__EXCEPTIONS -D__GXX_ABI_VERSION=100 -quiet -dumpbase n1.C -g -W -Wall -version -o /tmp/ccUe5GLI.sGNU CPP version 3.1 20010716 (experimental) (cpplib) (i386 Linux/ELF)GNU C++ version 3.1 20010716 (experimental) (i686-pc-linux-gnu)	compiled by GNU C version 3.1 20010716 (experimental).ignoring nonexistent directory ""/usr/local/i686-pc-linux-gnu/include""#include ""..."" search starts here:#include <...> search starts here: /usr/local/include/g++-v3 /usr/local/include/g++-v3/i686-pc-linux-gnu /usr/local/include/g++-v3/backward /usr/local/include /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1/include /usr/includeEnd of search list. /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1/../../../../i686-pc-linux-gnu/bin/as -V -Qy -o /tmp/ccp9xNWy.o /tmp/ccUe5GLI.sGNU assembler version 2.11.90.0.23 (i686-pc-linux-gnu) using BFD version 2.11.90.0.23 /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1/collect2 -m elf_i386 -dynamic-linker /lib/ld-linux.so.2 -o n1 /usr/lib/crt1.o /usr/lib/crti.o /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1/crtbegin.o -L/usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1 -L/usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1/../../../../i686-pc-linux-gnu/lib -L/usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1/../../.. /tmp/ccp9xNWy.o -lstdc++ -lm -lgcc_s -lgcc -lc -lgcc_s -lgcc /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1/crtend.o /usr/lib/crtn.oRunning n1./n11.2345678901234567890123456789012345678901234567890123456Segmentation fault (core dumped)Debugging n1GNU gdb 5.0Copyright 2001 Free Software Foundation, Inc.GDB is free software, covered by the GNU General Public License, and you arewelcome to change it and/or distribute copies of it under certain conditions.Type ""show copying"" to see the conditions.There is absolutely no warranty for GDB.  Type ""show warranty"" for details.This GDB was configured as ""i686-pc-linux-gnu""...(gdb) rStarting program: /home/peter/trans/vergleich/mein_stlport/i18n/n1 1.2345678901234567890123456789012345678901234567890123456Program received signal SIGSEGV, Segmentation fault.0x0804a861 in std::num_get<char, std::istreambuf_iterator<char, std::char_traits<char> > >::get(std::istreambuf_iterator<char, std::char_traits<char> >, std::istreambuf_iterator<char, std::char_traits<char> >, std::ios_base&, std::_Ios_Iostate&, double&) const (this=0x0, __in=      {<iterator<std::input_iterator_tag,char,long int,char*,char&>> = {<No data fields>}, _M_sbuf = 0x0, _M_c = 0}, __end=      {<iterator<std::input_iterator_tag,char,long int,char*,char&>> = {<No data fields>}, _M_sbuf = 0x0, _M_c = 0}, __io=@0x0, __err=@0x0, __v=@0x0)    at /usr/local/include/g++-v3/bits/locale_facets.h:637(gdb) l632	      { return do_get(__in, __end, __io, __err, __v); }633	634	      iter_type 635	      get(iter_type __in, iter_type __end, ios_base& __io,636		  ios_base::iostate& __err, double& __v) const637	      { return do_get(__in, __end, __io, __err, __v); }638	639	      iter_type 640	      get(iter_type __in, iter_type __end, ios_base& __io,641		  ios_base::iostate& __err, long double& __v) const(gdb) bt#0  0x0804a861 in std::num_get<char, std::istreambuf_iterator<char, std::char_traits<char> > >::get(std::istreambuf_iterator<char, std::char_traits<char> >, std::istreambuf_iterator<char, std::char_traits<char> >, std::ios_base&, std::_Ios_Iostate&, double&) const (this=0x0, __in=      {<iterator<std::input_iterator_tag,char,long int,char*,char&>> = {<No data fields>}, _M_sbuf = 0x0, _M_c = 0}, __end=      {<iterator<std::input_iterator_tag,char,long int,char*,char&>> = {<No data fields>}, _M_sbuf = 0x0, _M_c = 0}, __io=@0x0, __err=@0x0, __v=@0x0)    at /usr/local/include/g++-v3/bits/locale_facets.h:637(gdb)",RESOLVED          FIXED      
3992,Benjamin Kosnik,Build failures for all non-native mips targets,"Building libstdc++-v3 for a non-SGI MIPS target such asmips-tx39-elf results in a build failure such as:/home/jlarmour/sourceware/gcc/build/mipstx39-elf/mips-tx39-elf/libstdc++-v3/include/mips-tx39-elf/bits/atomicity.h:33:21: sgidefs.h: No such file or directoryThis is because config/cpu/mips/bits/atomicity.h includes<sgidefs.h> unconditionally. This file AFAIK only existson SGI systems. Not on newlib targets, nor probably Linux/MIPS.Release:gcc-3_0-branchEnvironment:linux host, mips-tx39-elf target, for example.All non-SGI MIPS targets would be affected.How-To-Repeat:configure --target mips-tx39-elfmake",RESOLVED          FIXED      
6511,Benjamin Kosnik,new libstdc++ v3 testsuite regressions on *-*-solaris2.8,"Between 3.1 20020412 and 20020426, several libstdc++ testsuite failuresstarted to occur on both Solaris 8/SPARC and Intel:+FAIL: 21_strings/inserters_extractors.cc execution test+FAIL: 24_iterators/istream_iterator.cc execution test+FAIL: 26_numerics/complex_inserters_extractors.cc execution test+FAIL: 27_io/instantiations.cc execution test+FAIL: 27_io/istream_extractor_char.cc execution test+FAIL: 27_io/istream_extractor_other.cc execution test+FAIL: 27_io/istream_manip.cc execution test+FAIL: 27_io/istream_seeks.cc execution test+FAIL: 27_io/istream_sentry.cc execution test+FAIL: 27_io/istream_unformatted.cc execution test+FAIL: 27_io/istringstream_members.cc execution test+FAIL: 27_io/ostream_inserter_arith.cc execution test+FAIL: 27_io/ostream_inserter_other.cc execution test+FAIL: 27_io/stringstream_members.cc execution testThose tests that existed in 3.0 passed there, so this is a regression.Running e.g. 24_iterators/istream_iterator.cc under gdb 5.2 (aftercompiling src/misc-inst.cc and test test proper with -g3 -gdwarf-2), I getthe following stack trace:Program received signal SIGSEGV, Segmentation fault.0x0002434c in sentry (this=0xffbef117, __in=@0xffbef488, __noskipws=82)    at ctype_inline.h:4040        { return _M_table[static_cast<unsigned char>(__c)] & __m; }(gdb) where#0  0x0002434c in sentry (this=0xffbef117, __in=@0xffbef488, __noskipws=82)    at ctype_inline.h:40#1  0x000244b4 in std::basic_istream<char, std::char_traits<char> >& std::operator>><char, std::char_traits<char> >(std::basic_istream<char, std::char_traits<char> >&, char&) (__in=@0xffbef118, __c=@0xffbef488) at istream.tcc:1021#2  0x0001cd10 in std::istream_iterator<char, char, std::char_traits<char>, int>::_M_read() (this=0xffbef480) at stream_iterator.h:96#3  0x0001caac in istream_iterator (this=0xffbef480, __s=@0xffbef488)    at stream_iterator.h:60#4  0x0001c4f4 in test02() ()    at /vol/gnu/src/gcc/gcc-3.1-branch-dist/libstdc++-v3/testsuite/24_iterators/istream_iterator.cc:65#5  0x0001c9d8 in main ()    at /vol/gnu/src/gcc/gcc-3.1-branch-dist/libstdc++-v3/testsuite/24_iterators/istream_iterator.cc:89Release:3.1 20020426 (prerelease)Environment:System: SunOS loge 5.8 Generic_108528-10 sun4u sparc SUNW,Ultra-250Architecture: sun4	host: sparc-sun-solaris2.8build: sparc-sun-solaris2.8target: sparc-sun-solaris2.8same problem onSystem: SunOS arenal 5.8 Generic_111920-01 i86pc i386 i86pcArchitecture: i86pc        host: i386-pc-solaris2.8build: i386-pc-solaris2.8target: i386-pc-solaris2.8configured with: /vol/gnu/src/gcc/gcc-3.1-branch-dist/configure --prefix=/vol/gcc --with-local-prefix=/vol/gcc --disable-nlsHow-To-Repeat:Bootstrap and test on sparc-sun-solaris2.8.",RESOLVED          FIXED      
2086,Benjamin Kosnik,"bootstrap error, libstdc++-v3/src/local.cc:  op -","Compiling here on a UnixWare 7.1.1 box, that's ani586-sco-sysv5uw7.1.1 using gnu-make and SCO's cc,not that it matters if I use gcc, becuase this is astage two or later error, when it's using xgcc.I throw in binutils, but I don't use glibc, for lackof a good reason.Here's the error that I see:----------------------------------------------------------../../../../gcc/libstdc++-v3/src/locale.cc: In function `static unsigned int   std::locale::_S_normalize_category(unsigned int)':../../../../gcc/libstdc++-v3/src/locale.cc:480: warning: `int __ret' might be   used uninitialized in this functionUX:as: WARNING: /var/tmp/cce3odFb.s:2940:section already defined: .text._ZNSt6locale21_S_normalize_categoryEjUX:as: ERROR: /var/tmp/cce3odFb.s:3025:defined relocatable values from the same section required, op -gmake[4]: *** [locale.lo] Error 1gmake[4]: Leaving directory `/home/matthew/Uber/CVS/objdir/i586-sco-sysv5uw7.1.1/libstdc++-v3/src'gmake[3]: *** [all-recursive] Error 1gmake[3]: Leaving directory `/home/matthew/Uber/CVS/objdir/i586-sco-sysv5uw7.1.1/libstdc++-v3'gmake[2]: *** [all-recursive-am] Error 2gmake[2]: Leaving directory `/home/matthew/Uber/CVS/objdir/i586-sco-sysv5uw7.1.1/libstdc++-v3'gmake[1]: *** [all-target-libstdc++-v3] Error 2gmake[1]: Leaving directory `/home/matthew/Uber/CVS/objdir'gmake: *** [bootstrap] Error 2------------------------------------------------------------------This did not occur in 2.95.2.1, but it's been happeningin 2.97 CVS and 3.1 CVS.I'm not sure what other information would be helpful, butthanks for whatever you can do on this.Release:CVS gcc 3.1 - checked out 2/24 1300 PST.Environment:Here's the environment variables:LD_LIBRARY_PATH=/usr/lib:/lib:/usr/local/lib:/usr/ccs/lib:/usr/local/BerkeleyDB/libLIBPATH=/usr/lib:/lib:/usr/local/lib:/usr/ccs/lib:/usr/local/BerkeleyDB/libPATH=/sbin:/usr/sbin:/etc:/usr/bin:/usr/local/bin:/usr/ccs/bin:/usr/local/kde/bin:/usr/X/binI used, SCO's ccgmake 3.79.1binutils 2.10.1m4-1.4pautoconf 2.13automake 1.4cI checkedout the latest CVS and built this in a seperateobjdir.I used the following to configure:------------------------------------------------------CC=cc ../gcc/configure --enable-shared --enable-threads --disable-nls --enable-languages=c++ --x-includes=/usr/X/include --x-libraries=/usr/X/lib --with-as=/usr/bin/as --with-gnu-ld --with-ld=/usr/local/bin/ld > con.log 2>&1-------------------------------------------------------------------Then I used gmake bootstrap > make.log 2>&1How-To-Repeat:It happends every time that I compile with that configure statement or if I get rid of the--disable-nls, which I didn't know if it had anythingto do with locales.",RESOLVED          FIXED      
2700,Benjamin Kosnik,Erroneous exception while constructing a derived class of ostream,"If I define a class which derives from ostream, I can construct and use it as an output stream without any problems.  However, if I also #include <fstream> in the same file, an exception gets thrown during the construction of my class.  The code given below demonstrates this.  The exception gets thrown on line 24 of /opt/gcc-3.0-010424/include/g++-v3/bits/basic_ios.tcc, during the call to use_facet<__numput_type>(_M_ios_locale) in basic_ios<_CharT, _Traits>::init(basic_streambuf<_CharT, _Traits>* __sb)Release:gcc 3.0 branch snapshot 4/24/2001Environment:powerpc-ibm-aix4.3.3.0as -vGNU assembler version 2.9-aix43-000718 (powerpc-ibm-aix4.3.3.0) using BFD version 2.9-aix43-000718How-To-Repeat:#include <iostream>// Uncomment this and an exception gets thrown when mystream gets// constructed// #include <fstream>using std::ostream;using std::cout;using std::endl;class NDumpContext : public ostream{public:		NDumpContext() : ostream(cout.rdbuf())	{	}	virtual ~NDumpContext()	{	}	NDumpContext(ostream& rhs)		: ostream(rhs.rdbuf())	{	}	virtual void Flush()	{		flush();	}};int main(){	NDumpContext mystream(cout);	cout << ""Output to cout"" << endl;	mystream << ""Output to mystream"" << endl;}",RESOLVED          FIXED      
3045,Benjamin Kosnik,global stream objects destructor semantics,"In libstdc++-v3/src/ios.cc, function ios_base::Init::_S_ios_destroy are these lines:	delete cout.rdbuf();	delete cin.rdbuf();	delete cerr.rdbuf();These are no doubt the counterpart to the following lines from ios_base::Init::_S_ios_create:	new (&cout) ostream(new filebuf(stdout, ios_base::out, __bufsize));	new (&cin) istream(new filebuf(stdin, ios_base::in, 1));	new (&cerr) ostream(new filebuf(stderr, ios_base::out, __bufsize));However, the use of the rdbuf() method is incorrect. (See previous bug report dealing with rdbuf()).  This use of rdbuf() could lead to badness if cout/cin/cerr/clog were to be redirected.Release:cvs 20010603Environment:sourceHow-To-Repeat:#include <fstream>#include <iostream>std::basic_filebuf b1;int main(){  b1.open(""foo"");  cout.rdbuf( b1 );  std::cout << ""hello"" << std::endl;  return 0;}// at program termination, b1 is deleted by // ios_base::Init::_S_ios_destroy,// and the streambuf created to handle output// to stdout is leaked.",RESOLVED          FIXED      
5166,Benjamin Kosnik,Segfault when using global std::string from dlopen,"Segmentation violation when a function in a dll writes to a global std::string in the same dll. This happens only when the dll is loaded with dlopen; dynamic linking of the same dll works fine. Also, if the string is local to the function, it works fine too.Note 1: Compiling with -Wall will produce ""aggregate has a partly bracketed initializer"" warnings similar to PR 3195 and PR  4594. pasted below. Seems to be related to threads.Note 2: Configuring with --enable-threads was not good enough, I needed to explicitly supply =posix, and now even hello world requires -lpthread to link.Note 3: I also tried using shl_load instead of dlopen: same problem.Simple reproducing code (main.cc, mydll.cc) is attached.gdb output and g++ warnings are pasted below:$ gdb main coreHP gdb 2.1Copyright 1986 - 1999 Free Software Foundation, Inc.Hewlett-Packard Wildebeest 2.1 (based on GDB 5.0-hpwdb-20000630)Wildebeest is free software, covered by the GNU General Public License, andyou are welcome to change it and/or distribute copies of it under certainconditions.  Type ""show copying"" to see the conditions.  There isabsolutely no warranty for Wildebeest.  Type ""show warranty"" for details.Wildebeest was built for PA-RISC 1.1 or 2.0 (narrow), HP-UX 11.00...Core was generated by `main'.Program terminated with signal 11, Segmentation fault.warning: The shared libraries were not privately mapped; setting abreakpoint in a shared library will not work until you rerun the program.#0  0xc0970940 in _ZNKSs4sizeEv (this=0xfffffff4)    at /users/chris/gccbig/install-test3/include/g++-v3/bits/basic_string.h:397397           size() const { return _M_rep()->_M_length; }(gdb) bt#0  0xc0970940 in _ZNKSs4sizeEv (this=0xfffffff4)    at /users/chris/gccbig/install-test3/include/g++-v3/bits/basic_string.h:397#1  0xc096d3e4 in _ZNKSs7_M_iendEv (this=0x7f7b2438)    at /users/chris/gccbig/install-test3/include/g++-v3/bits/basic_string.h:254#2  0xc096c920 in _ZNSs6assignIPKcEERSsT_S3_ (this=0x7f7b2438, __first=0x7f7b2444 """",     __last=0x7f7b2444 """")    at /users/chris/gccbig/install-test3/include/g++-v3/bits/basic_string.h:511#3  0xc096be30 in _ZNSs6assignEPKc (this=0x7f7b2438, __s=0x7f7b2444 """")    at /users/chris/gccbig/install-test3/include/g++-v3/bits/basic_string.h:502#4  0xc096b12c in _ZNSsaSEPKc (this=0xfffffff4, __s=0x0)    at /users/chris/gccbig/install-test3/include/g++-v3/bits/basic_string.h:350#5  0xc096a810 in func () at mydll.cc:10#6  0x4180 in main () at main.cc:20g++ -fPIC -Wall -g -c mydll.cc -o mydll.o/users/chris/gccbig/install-test3/include/g++-v3/bits/stl_alloc.h: In instantiation of `std::_STL_mutex_lock std::__default_alloc_template<true, 0>::_S_node_allocator_lock':/users/chris/gccbig/install-test3/include/g++-v3/bits/stl_alloc.h:316:   instantiated from `std::__default_alloc_template<threads, inst>::_Lock::_Lock() [with bool threads = true, int inst = 0]'/users/chris/gccbig/install-test3/include/g++-v3/bits/stl_alloc.h:365:   instantiated from `static void std::__default_alloc_template<threads, inst>::deallocate(void*, long unsigned int) [with bool threads = true, int inst = 0]'/users/chris/gccbig/install-test3/include/g++-v3/bits/stl_alloc.h:588:   instantiated from `void std::allocator<_Alloc>::deallocate(_Tp*, long unsigned int) [with _Tp = char]'/users/chris/gccbig/install-test3/include/g++-v3/bits/basic_string.tcc:256:   instantiated from `void std::basic_string<_CharT, _Traits, _Alloc>::_Rep::_M_destroy(const _Alloc&) [with _CharT = char, _Traits = std::char_traits<char>, _Alloc = std::allocator<char>]'/users/chris/gccbig/install-test3/include/g++-v3/bits/basic_string.h:180:   instantiated from `void std::basic_string<_CharT, _Traits, _Alloc>::_Rep::_M_dispose(const _Alloc&) [with _CharT = char, _Traits = std::char_traits<char>, _Alloc = std::allocator<char>]'/users/chris/gccbig/install-test3/include/g++-v3/bits/basic_string.h:344:   instantiated from `void std::basic_string<_CharT, _Traits, _Alloc>::basic_string() [with _CharT = char, _Traits = std::char_traits<char>, _Alloc = std::allocator<char>]'/users/chris/gccbig/install-test3/include/g++-v3/bits/locale_facets.tcc:172:   instantiated from `void std::_Format_cache<_CharT>::_M_populate(std::ios_base&) [with _CharT = char]'/users/chris/gccbig/install-test3/include/g++-v3/bits/locale_facets.tcc:226:   instantiated from `static std::_Format_cache<_CharT>* std::_Format_cache<_CharT>::_S_get(std::ios_base&) [with _CharT = char]'/users/chris/gccbig/install-test3/include/g++-v3/bits/ostream.tcc:490:   instantiated from `void std::__pad_char(std::basic_ios<_CharT, _Traits>&, _CharT*, const _CharT*, long int, long int) [with _CharT = char, _Traits = std::char_traits<char>]'/users/chris/gccbig/install-test3/include/g++-v3/bits/ostream.tcc:701:   instantiated from `std::basic_ostream<char, _Traits>& std::operator<<(std::basic_ostream<char, _Traits>&, const char*) [with _Traits = std::char_traits<char>]'mydll.cc:9:   instantiated from here/users/chris/gccbig/install-test3/include/g++-v3/bits/stl_alloc.h:523: warning: aggregate   has a partly bracketed initializer/users/chris/gccbig/install-test3/include/g++-v3/bits/stl_alloc.h:523: warning: aggregate   has a partly bracketed initializer/users/chris/gccbig/install-test3/include/g++-v3/bits/stl_alloc.h:523: warning: aggregate   has a partly bracketed initializer/users/chris/gccbig/install-test3/include/g++-v3/bits/stl_alloc.h:523: warning: aggregate   has a partly bracketed initializer/users/chris/gccbig/install-test3/include/g++-v3/bits/stl_alloc.h:523: warning: aggregate   has a partly bracketed initializer/users/chris/gccbig/install-test3/include/g++-v3/bits/stl_alloc.h:523: warning: aggregate   has a partly bracketed initializer/users/chris/gccbig/install-test3/include/g++-v3/bits/stl_alloc.h:523: warning: aggregate   has a partly bracketed initializerRelease:3.0.2Environment:System: HP-UX unknown B.11.00 U 9000/800 1111971557 unlimited-user licensehost: hppa2.0w-hp-hpux11.00build: hppa2.0w-hp-hpux11.00target: hppa2.0w-hp-hpux11.00configured with: /test/gcc-3.0.2/configure --prefix=/users/chris/gccbig/install-test3 --with-gnu-as --with-as=/test/gnu/bin/as --enable-languages=c++ --enable-threads=posixHow-To-Repeat:compile the attached code; main will segfault.",RESOLVED          FIXED      
5777,Benjamin Kosnik,3.0.4 w/ version-specific-runtimes installs g++ headers incorrectly,"The libstdc++ header files get installed under  $prefix/lib/gcc-lib/sparc-sun-solaris2.7/includeinstead of  $prefix/lib/gcc-lib/sparc-sun-solaris2.7/3.0.4/includeif --enable-version-specific-runtime-libs is usedRelease:3.0.4Environment:System: SunOS grover 5.7 Generic_106541-18 sun4u sparc SUNW,Ultra-4Architecture: sun4	host: sparc-sun-solaris2.7build: sparc-sun-solaris2.7target: sparc-sun-solaris2.7configured with: ./configure --prefix=/var/tmp/gca-gnu --enable-shared --enable-version-specific-runtime-libs --disable-nls --disable-libjava --disable-libobjc --enable-languages=c,c++,f77How-To-Repeat:The following script was used to configure:#!/bin/sh	CFLAGS=-O2 \	CXXFLAGS=-O2 \./configure \	--prefix=/var/tmp/gca-gnu \	--enable-shared \	--enable-version-specific-runtime-libs \	--disable-nls \	--disable-libjava \	--disable-libobjc \	--enable-languages=c++,f77After compile and install I find that   grover$ ./g++ -v  Reading specs from ./../lib/gcc-lib/sparc-sun-solaris2.7/3.0.4/specs  Configured with: ./configure --prefix=/var/tmp/gca-gnu --enable-shared    --enable-version-specific-runtime-libs --disable-nls --disable-libjava    --disable-libobjc --enable-languages=c,c++,f77  Thread model: posix  gcc version 3.0.4  grover$ pwd  /var/tmp/gca-gnu/lib/gcc-lib/sparc-sun-solaris2.7  grover$ ls  3.0.4/               libstdc++.la*        libstdc++.so.3.0.4*  include/             libstdc++.so@        libsupc++.a  libstdc++.a          libstdc++.so.3@      libsupc++.la*  grover$ ls include  g++/  grover$ ls 3.0.4/include  README            kcms@             regex.h           syslimits.h  X11@              kerberos/         root/             thread_db.h  Xm@               libintl.h         rpc/              tzfile.h  alloca.h          limits.h          setjmp.h          unistd.h  arpa/             math.h            stdarg.h          v7/  curses.h          netinet/          stdbool.h         varargs.h  fixed             proc_service.h    stddef.h          wchar.h  floatingpoint.h   prof.h            stdio.h  g2c.h             proto.h           stdlib.h  iso646.h          pthread.h         sys/",RESOLVED          FIXED      
6015,Benjamin Kosnik,3.1 pre libstdc++ number formatting is not mt-safe.,"libstdc++ was changed 2002-01-22 to use __convert_from_v to format numbers, and __convert_from_v basically does setlocale ""C""; sprintf; setlocale backUnfortunately this is completely not thread safe, since all the other threads will change locales too, thus giving completely unpredictable results.Release:3.1 20020320 (prerelease)Environment:all",RESOLVED          FIXED      
6450,Benjamin Kosnik,Using hex directive with insertion operator (<<) does not,"Using fstream or iostream for output to file or standardo out, the directive""hex"" should display the output as a hex number, but actually displays assome floating point junk.	This code works as expected with the 3.0.2compiler.Release:3.0.4Environment:System: SunOS sundevshared.engineering.netspeak.com 5.8 Generic_108528-13sun4u sparc SUNW,Ultra-4Architecture: sun4host: sparc-sun-solaris2.8build: sparc-sun-solaris2.8target: sparc-sun-solaris2.8configured with: ../gcc-3.0.4/configure --enable-threads=posix--with-as=/vobs/OEM/gnu/binutils/2.11.2/bin/as--with-ld=/vobs/OEM/gnu/binutils/2.11.2/bin/ld--prefix=/vobs/OEM/gnu/gcc/3.0.4 --exec-prefix=/vobs/OEM/gnu/gcc/3.0.4How-To-Repeat:#include <iostream>#include <fstream>using namespace std;main(){    long    i = 100;    ofstream des;    des.open(""/tmp/des.out.txt"");    des << hex << i << endl;    des << dec << i << endl;    cout << hex << i << endl;    cout << dec << i << endl;}Expect this code to print out ""64"" and then ""100"".  But actually outputs""2.14315e-312"" and ""100"".I have collected information available.Unformatted: work correctly.",RESOLVED          FIXED      
6549,Benjamin Kosnik,"std::getline(std::cin,s) work wrong at FreeBSD 4.5","Simple program output wrong result after compile with current mainline CVS gcc (also at 3.1 branch):--8X----------------------#include<iostream>#include<string>int main() {  std::cout << ""Please, enter 'test':"";  std::string s;  std::getline(std::cin,s,'\n');  std::cout<<s<<""\n"";};At enter 'test' text it print 'ttetsttt'--8X----------------------2 week old mainline CVS gcc doesn't have this problem.Also send .ii.gz fileRelease:gcc version 3.2 20020503 (experimental) and 3.1 20020503 (prerelease)Environment:FreeBSD 4.5-STABLE",RESOLVED          FIXED      
6553,Benjamin Kosnik,26_numerics/complex_inserters_extractors.cc fails in Tru64 UNIX V5.1,"Comparing testresults for Tru64 UNIX V4.0F	http://gcc.gnu.org/ml/gcc-testresults/2002-04/msg01129.htmland V5.1	http://gcc.gnu.org/ml/gcc-testresults/2002-04/msg01130.htmlthere's only a single difference: an additional failure in V5.1:FAIL: 26_numerics/complex_inserters_extractors.cc execution test.  In libstdc++.log,I findAssertion failed: flteq(z.imag(), y), file /amnt/zacatecas/volumes/d9/gnu/src/gcc/gcc-3.1-branch-dist/libstdc++-v3/testsuite/26_numerics/complex_inserters_extractors.cc, line 48This is 	VERIFY( flteq(z.imag(), y) );the first long double invocation of test_good() with ""(-1.1,3.7)#"" as inputstring, as can be seen in a stacktrace:#6  0x12001c9a8 in _Z9test_goodIeEiSsT_S0_ (str={      static npos = <incomplete type>,       _M_dataplus = {<allocator<char>> = {<No data fields>},         _M_p = 0x14000c818 ""(-1.1,3.7)#""}, static _S_empty_rep_storage = {0,         0, 0, 0}}, x=-1.1000000000000000888178419700125232,     y=3.7000000000000001776356839400250465)    at /vol/gnu/src/gcc/gcc-3.1-branch-dist/libstdc++-v3/testsuite/26_numerics/complex_inserters_extractors.cc:48#7  0x120019304 in _Z7testallIeEiv ()    at /vol/gnu/src/gcc/gcc-3.1-branch-dist/libstdc++-v3/testsuite/26_numerics/complex_inserters_extractors.cc:74#8  0x12000e9cc in main ()    at /vol/gnu/src/gcc/gcc-3.1-branch-dist/libstdc++-v3/testsuite/26_numerics/complex_inserters_extractors.cc:139139  testall<long double>();Unfortunately, print z in gdb 5.2 just yields$2 = {_M_value = Invalid C/C++ type code 20 in symbol table.so I cannot easily debug this further.Since this is a long double test failing and a primary difference betweenV4.0F and V5.1 is the support for 128-bit long double, this might well berelated to problems with long double argument passing.Release:3.1 20020426 (prerelease)Environment:System: OSF1 bartok V5.1 732 alphaMachine: alpha	host: alpha-dec-osf5.1build: alpha-dec-osf5.1target: alpha-dec-osf5.1configured with: /vol/gnu/src/gcc/gcc-3.1-branch-dist/configure --prefix=/vol/gcc --with-local-prefix=/vol/gcc --disable-nls alpha-dec-osf5.1How-To-Repeat:Bootstrap compiler and run testsuite.",RESOLVED          FIXED      
6736,Benjamin Kosnik,g++ 3.1 does not compile source code with istrstream,Parsing error when using istrstream class.  Version 3.0.4 compiles the same source just fine.Release:3.1Environment:Linux RedHat 7.2 on Intel i686How-To-Repeat:g++ -v -save-temps -o instest instest.cpp > verbose.txt 2>&1,RESOLVED          FIXED      
6750,Benjamin Kosnik,ofstream incorrectly sets failbit (severe regression),"Today I encountered a severe regression on the branch. When I ran thefollowing program tio, compiled by gcc 3.1 20020519, the contents ofthe file tio.dat is truncated. When I type a carriage return on thekeyboard as input for the second getline call the outputfile stream sets erroneously the fail bit when written to. Thefollowing writes are missing from the output file. This is a severeregression from gcc 2.95.3. I makes no difference whether the input is read from a file via filedescriptor redirection or typed on the keyboard.Release:3.1.1 20020519 (prerelease)Environment:System: Linux kiste 2.4.18 #8 Sat Mar 9 15:33:15 CET 2002 i686 unknownArchitecture: i686SuSE 7.3binutils 20020428host: i686-pc-linux-gnubuild: i686-pc-linux-gnutarget: i686-pc-linux-gnuconfigured with: ../gcc/configure --enable-shared --disable-nls --enable-threads=posix --enable-languages=c,c++,f77,objcHow-To-Repeat:source code tio.C#include <iostream>#include <fstream>#define OUTPUT_FILE	""tio.dat""#define BUFFSIZ		2048int main(){  using namespace std;   char buff[BUFFSIZ];  ofstream output(OUTPUT_FILE, ios::out);  if(!output) {    cerr << ""Cannot create "" << OUTPUT_FILE << endl;    exit(1);  }  cout << ""Output file will be '"" << OUTPUT_FILE << ""'."" << endl;  cout<<""rdstate before reading from cin: ""      << cin.rdstate() << endl;  cout<<""good eof fail bad ""      << ios::goodbit << "" ""      << ios::eofbit << "" ""      << ios::failbit << "" ""      << ios::badbit << endl;	  cout << ""Enter line 1 of 3: "";  cin.getline(buff, BUFFSIZ);  output << buff << endl;  cerr << ""cin state: "" << cin.rdstate() << endl;  cerr << ""output state: "" << output.rdstate() << endl;  cout << ""Enter line 2 of 3: "";  cin.getline(buff, BUFFSIZ);					         output << buff << endl;  cerr << ""cin state: "" << cin.rdstate() << endl;  cerr << ""output state: "" << output.rdstate() << endl;  cout << ""Enter line 3 of 3: "";  cin.getline(buff, BUFFSIZ);  output << buff << endl;  cerr << ""cin state: "" << cin.rdstate() << endl;  cerr << ""output state: "" << output.rdstate() << endl;}g++ -v -o tio tio.C -W -Wall Reading specs from /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1.1/specsConfigured with: ../gcc/configure --enable-shared --disable-nls --enable-threads=posix --enable-languages=c,c++,f77,objcThread model: posixgcc version 3.1.1 20020519 (prerelease)GNU CPP version 3.1.1 20020519 (prerelease) (cpplib) (i386 Linux/ELF)GNU C++ version 3.1.1 20020519 (prerelease) (i686-pc-linux-gnu)	compiled by GNU C version 3.1.1 20020519 (prerelease).ignoring nonexistent directory ""NONE/include""ignoring nonexistent directory ""/usr/local/i686-pc-linux-gnu/include""#include ""..."" search starts here:#include <...> search starts here: /usr/local/include/g++-v3 /usr/local/include/g++-v3/i686-pc-linux-gnu /usr/local/include/g++-v3/backward /usr/local/include /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1.1/include /usr/includeEnd of search list. /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1.1/../../../../i686-pc-linux-gnu/bin/as -V -Qy -o /tmp/ccSA70i7.o /tmp/ccQLkRS9.sGNU assembler version 020428 (i686-pc-linux-gnu) using BFD version 020428 20020428gcc 3.1./tioOutput file will be 'tio.dat'.rdstate before reading from cin: 0good eof fail bad 0 2 4 1Enter line 1 of 3: Hallocin state: 0output state: 0Enter line 2 of 3: //return key pressedcin state: 0output state: 1Enter line 3 of 3: Peter!cin state: 0output state: 1cat tio.datHallogcc 2.95.3./tioOutput file will be 'tio.dat'.rdstate before reading from cin: 0good eof fail bad 0 1 2 4Enter line 1 of 3: Hallocin state: 0output state: 0Enter line 2 of 3: cin state: 0output state: 0Enter line 3 of 3: Peter!cin state: 0output state: 0cat tio.datHalloPeter!",RESOLVED          FIXED      
6784,Benjamin Kosnik,SEGV using istream >> operator under gcc-3.1/sun-sparc-solaris2.6,"The following simple program:bug.cxx-----------------#include <string>#include <iostream>intmain(){    std::string tok;    std::cin >> tok;    return (0);}-----------------Causes a SEGV when compiled and run with the stock gcc-3.1/sun-sparc-solaris2.6on a Solaris2.6 machineThis does not occur fora) gcc-3.1/sun-sparc-solaris2.8b) gcc-3.1/i686-pc-linux-gnuc) gcc-3.0.4/sun-sparc-solaris2.6Release:3.1Environment:System: SunOS primo 5.6 Generic_105181-26 sun4u sparc SUNW,Ultra-4Architecture: sun4host: sparc-sun-solaris2.6build: sparc-sun-solaris2.6target: sparc-sun-solaris2.6configured with: /disks/arlene/gnu/gcc-3.1/configure --prefix=/disks/homes/andrewp/compilers/gcc-3.1-sun-sparc-solaris2.6 --with-gnu-as --with-gnu-ld --enable-threads=solaris --enable-version-specific-runtime-libs --disable-shared --enable-languages=c++binutils-2.12.1How-To-Repeat:% g++ -vReading specs from /disks/homes/andrewp/compilers/gcc-3.1-sun-sparc-solaris2.6/lib/gcc-lib/sparc-sun-solaris2.6/3.1/specsConfigured with: /disks/arlene/gnu/gcc-3.1/configure --prefix=/disks/homes/andrewp/compilers/gcc-3.1-sun-sparc-solaris2.6 --with-gnu-as --with-gnu-ld --enable-threads=solaris --enable-version-specific-runtime-libs --disable-shared --enable-languages=c++Thread model: solarisgcc version 3.1% g++ -g bug.cxx% ./a.out < bug.cxxSegmentation fault% gdb ./a.outGNU gdb 5.2Copyright 2002 Free Software Foundation, Inc.GDB is free software, covered by the GNU General Public License, and you arewelcome to change it and/or distribute copies of it under certain conditions.Type ""show copying"" to see the conditions.There is absolutely no warranty for GDB.  Type ""show warranty"" for details.This GDB was configured as ""sparc-sun-solaris2.6""...(gdb) run < bug.cxxStarting program: /disks/homes/andrewp/a.out < bug.cxxProgram received signal SIGSEGV, Segmentation fault.0x0002850c in std::istream::sentry::sentry(std::istream&, bool) (    this=0xeffffa27, __in=@0x50d40, __noskipws=35)    at /disks/primo4/workplaces/andrewp/gnu/gcc-3.1-standard-build/sparc-sun-solaris2.6/libstdc++-v3/include/sparc-sun-solaris2.6/bits/ctype_inline.h:4040        { return _M_table[static_cast<unsigned char>(__c)] & __m; }(gdb) where#0  0x0002850c in std::istream::sentry::sentry(std::istream&, bool) (    this=0xeffffa27, __in=@0x50d40, __noskipws=35)    at /disks/primo4/workplaces/andrewp/gnu/gcc-3.1-standard-build/sparc-sun-solaris2.6/libstdc++-v3/include/sparc-sun-solaris2.6/bits/ctype_inline.h:40#1  0x0002cb1c in std::basic_istream<char, std::char_traits<char> >& std::operator>><char, std::char_traits<char>, std::allocator<char> >(std::basic_istream<char, std::char_traits<char> >&, std::basic_string<char, std::char_traits<char>, std::allocator<char> >&) (__in=@0x50d40, __str=@0xeffffab8)    at /disks/primo4/workplaces/andrewp/gnu/gcc-3.1-standard-build/sparc-sun-solaris2.6/libstdc++-v3/include/bits/istream.tcc:1133#2  0x00011224 in main () at bug.cxx:8(gdb) quitWhereas on a Solaris2.8 system...% g++ -vReading specs from /disks/homes/andrewp/compilers/gcc-3.1-sun-sparc-solaris2.8/lib/gcc-lib/sparc-sun-solaris2.8/3.1/specsConfigured with: /disks/arlene/gnu/gcc-3.1/configure --prefix=/disks/homes/andrewp/compilers/gcc-3.1-sun-sparc-solaris2.8 --with-gnu-as --with-gnu-ld --enable-threads=solaris --enable-version-specific-runtime-libs --disable-shared --enable-languages=c++Thread model: solarisgcc version 3.1% g++ -g bug.cxx% ./a.out < bug.cxx%",RESOLVED          FIXED      
7097,Benjamin Kosnik,_GLIBCPP_HAVE_MBSTATE_T breaks non-GLIB systems,"The following change (and its related changes) prevents libstdc++	from being built on NetBSD since NetBSD does not use GLIBC but does	define its own mbstate_t.  Thus mbstate_t defined typedefed twice	and libstdc++ fails to build.libstdc++-v3/include/c/std_cwchar.hrevision 1.4date: 2002/06/19 15:19:39;  author: bkoz;  state: Exp;  lines: +21 -02002-06-18  Benjamin Kosnik  <bkoz@redhat.com>        * include/c/std_cwchar.h: Guard. Add mbstate_t bits.        * include/c/std_cwctype.h: Guard.        * libsupc++/eh_alloc.cc: Tweak include order.        * libsupc++/pure.cc: Use cstdio.        * libsupc++/new_op.cc: Remove malloc forward declaration, as        cstdlib brings it in. Use std::malloc.        * src/Makefile.am (sources): Remove cmath.cc.        * src/Makefile.in: Regenerate.        * src/cmath.cc: Remove.----------------------------Release:3.2 20020619 (experimental)Environment:System: NetBSD pilot.local 1.5ZC NetBSD 1.5ZC (PILOT) #59: Sat May 18 12:43:46 PDT 2002 matt@pilot.local:/export/i386/kobj/PILOT i386	host: i386-unknown-netbsdelf1.5ZCbuild: i386-unknown-netbsdelf1.5ZCtarget: vax-dec-netbsdelfconfigured with: /export/toolchain/gcc/configure --enable-static --disable-shared --target=vax-netbsdelf",RESOLVED          FIXED      
846,Benjamin Kosnik,stream types non-const members,"libstdc++-2.90.8is_open() member of stream types is const in some parts of the hierarchy but not others.When inheriting from fstream, is_open() is no longer a const member.It is obvious that it is an error in some places as is_open() merely calls another const member.ie. (bits/std_fstream.h)      bool       is_open(void) { return rdbuf()->is_open(); }Release:libstdc++-2.90.8Environment:i686-pc-linux-gnu (RH6.2 gcc2.95.2)How-To-Repeat:class A : private fstream{public:	bool isOpen() const	{ 	  return is_open() 	};}",RESOLVED          FIXED      
847,Benjamin Kosnik,templated operators in <iterator> conflict with rel_ops,stl_iterator.h defines templated operator!=() for iterator classes.This prevents the use of std::rel_ops in any scope that includes <iterator>.AlsoThere are logical errors in the operators. See operator<=() and operator>=()Release:stdlibc++-2.90.8Environment:i686-pc-linux-gnu (RH6.2 w/ gcc-2.95.2)How-To-Repeat:create a container class that defines its own iterators not based on std::iterator.Also use a normal STL class with it.If you define operator==() for the custom iterator then rel_ops is necessary to provide operator!=(). However ifrel_ops is visible then there is ambiguity between the templated operator!=() from iterator and from rel_ops.,RESOLVED          FIXED      
936,Benjamin Kosnik,gcc-2.95.2 would not compile,"streamoff and streampos are used interchangebly in mostlibio/* files, although streamoff is scalar whereasstreampos is a structure (first field is scalar).Look near line 75 in libio/streambuf.hand for example near line 75 in libio/indstream.cc (attached).NOTE: it is the release version I downloaded from gcc.gnu.org.Release:gcc-2.95.2Environment:linux RedHat 7.0 on a i686 machine.",RESOLVED          FIXED      
943,Benjamin Kosnik,Problems reading in complex numbers in a loop,"The following program reads complex numbers in a loop from cin. I thought that cin and cout are tied, i.e. the string ""Complex number c1""should be printed before the complex number is read in. This isnot the case for the first run of the while loop. The following loopswork as expected. It makes no difference if the the explicit flushing of cout by flush is removed. I apologize if this is a bogus bug report.Release:2.97 20001127 (experimental)Environment:System: Linux kiste 2.4.0-test10 #20 Thu Nov 2 03:02:57 CET 2000 i686 unknownArchitecture: i686GNU assembler 001002GLIBC 2.1.3g++ -vhost: i686-pc-linux-gnubuild: i686-pc-linux-gnutarget: i686-pc-linux-gnuReading specs from /usr/local/lib/gcc-lib/i686-pc-linux-gnu/2.97/specsConfigured with: ../gcc-20001127/configure -enable-shared --disable-nls --enable-threads=posix --enable-long-long --enable-libstdcxx-v3gcc version 2.97 20001127 (experimental)How-To-Repeat:cat tcaus.C#include <iostream>#include <complex>using namespace std;int main(){    complex<double> c1;    while (cin.peek() != ios::traits_type::eof())    {        cout << ""Complex number c1: "" << flush; //error        cin >> c1;    }}Transcript of the run of the program tcaus:peter@kiste:~/ > ./tcaus(1.3,3.4)                        Complex number c1: Complex number c1: (2.4,5.4) Complex number c1: (3.5,6.5)Complex number c1: // ^D Compiling the program tcaus.Cg++ -v -o tcaus tcaus.C -W -Wall -pedantic -save-tempsReading specs from /usr/local/lib/gcc-lib/i686-pc-linux-gnu/2.97/specsConfigured with: ../gcc-20001127/configure -enable-shared --disable-nls --enable-threads=posix --enable-long-long --enable-libstdcxx-v3gcc version 2.97 20001127 (experimental) /usr/local/lib/gcc-lib/i686-pc-linux-gnu/2.97/cpp0 -lang-c++ -v -D__GNUC__=2 -D__GNUC_MINOR__=97 -D__GNUC_PATCHLEVEL__=0 -D__ELF__ -Dunix -Dlinux -D__ELF__ -D__unix__ -D__linux__ -D__unix -D__linux -Asystem=posix -D__STDC_HOSTED__=1 -W -Wall -pedantic -Acpu=i386 -Amachine=i386 -Di386 -D__i386 -D__i386__ -D__tune_i686__ -D__tune_pentiumpro__ tcaus.C tcaus.iiGNU CPP version 2.97 20001127 (experimental) (cpplib) (i386 Linux/ELF)#include ""..."" search starts here:#include <...> search starts here: /usr/local/include/g++-v3 /usr/local/include /usr/local/lib/gcc-lib/i686-pc-linux-gnu/2.97/include /usr/local/i686-pc-linux-gnu/include /usr/includeEnd of search list. /usr/local/lib/gcc-lib/i686-pc-linux-gnu/2.97/cc1plus -fpreprocessed tcaus.ii -D__GNUG__=2 -D__GXX_ABI_VERSION=100 -quiet -dumpbase tcaus.C -W -Wall -pedantic -version -fnew-abi -o tcaus.sGNU C++ version 2.97 20001127 (experimental) (i686-pc-linux-gnu) compiled by GNU C version 2.97 20001127 (experimental). /usr/local/lib/gcc-lib/i686-pc-linux-gnu/2.97/../../../../i686-pc-linux-gnu/bin/as -V -Qy -o tcaus.o tcaus.sGNU assembler version 001002 (i686-pc-linux-gnu) using BFD version 001002 /usr/local/lib/gcc-lib/i686-pc-linux-gnu/2.97/collect2 -m elf_i386 -dynamic-linker /lib/ld-linux.so.2 -o tcaus /usr/lib/crt1.o /usr/lib/crti.o /usr/local/lib/gcc-lib/i686-pc-linux-gnu/2.97/crtbegin.o -L/usr/local/lib/gcc-lib/i686-pc-linux-gnu/2.97 -L/usr/local/lib/gcc-lib/i686-pc-linux-gnu/2.97/../../../../i686-pc-linux-gnu/lib -L/usr/local/lib/gcc-lib/i686-pc-linux-gnu/2.97/../../.. tcaus.o -lstdc++ -lm -lgcc -lc -lgcc /usr/local/lib/gcc-lib/i686-pc-linux-gnu/2.97/crtend.o /usr/lib/crtn.oGzipped and uuencoded preprocessor source follows:See attachments for tcaus.ii.gz",RESOLVED          FIXED      
1072,Benjamin Kosnik,Exception-unsafe code in locale,"This code is from libstdc++-v3/src/localename.cc:  locale::_Impl::  _Impl(const _Impl& __other, const string& __name, category __cat,         size_t __refs)    : _M_references(__refs - 1), _M_has_name(__other._M_name != ""*"")  {    __cat = _S_normalize_category(__cat);  // might throw    try       { _M_facets = new __vec_facet(*(__other._M_facets)); }    catch(...)       {        delete _M_facets;        throw;      }    try       { _M_category_names = new __vec_string(*(__other._M_category_names)); }    catch(...)       {        delete _M_category_names;        throw;      }These catch blocks are useless since the target pointersare never modified if either operator new or theconstructors throw an exception. In fact, they willprobably cause a crash since the pointers are notinitialized before the try block.Also, if an exception is thrown from the second try block,the object allocated in the first one is leaked.This problem appears in all constructors of locale::_ImplRelease:gcc version 2.97 20001211 (experimental)Environment:i586-pc-linux-gnu",RESOLVED          FIXED      
1089,Benjamin Kosnik,ios_base::_M_grow_words(int ix) SEGV's w/fix,"Attached test code, ofs.cc, SEGV's when run.Release:gcc version 2.97 20001213 (experimental)Environment:SuSE 7.0; glibc 2.1.3; linux 2.2.16How-To-Repeat:% c++ -O0 -g    ofs.cc   -o ofs% ./ofs",RESOLVED          FIXED      
1531,Benjamin Kosnik,libstdc++ is broken for -fno-exceptions,"The compiler complains about a catch() statement in the standard	header files when -fno-exceptions is turned on.Release:2.97 20001230 (experimental)Environment:System: Linux bessie 2.4.0-test12 #1 Thu Dec 14 22:47:50 EST 2000 i586 unknownArchitecture: i586	host: i586-pc-linux-gnubuild: i586-pc-linux-gnutarget: i586-pc-linux-gnuconfigured with: ../gcc/configure --prefix=/usr/local/home/jlnance/gcctemp --enable-languages=c,c++How-To-Repeat:	/usr/local/home/jlnance/gcctemp/bin/g++ -o regxpcom.o -c -fPIC -fno-rtti -fno-exceptions -fshort-wchar -pthread -O4 -g regxpcom.iiSee attachments for regxpcom.ii",RESOLVED          FIXED      
1605,Benjamin Kosnik,exception::what() declares no exception list,"The C++ Dec96 working paper (sec. 18.6.1), Stroustrup, andsome other compilers declare    virtual const char* what() const throw();in class exception, while gcc does    virtual const char* what() const;Release:unknownEnvironment:all",RESOLVED          FIXED      
1704,Benjamin Kosnik,Null output from Josuttis example,"The following code (by N. Josuttis, p.669- of his book) does not produce the expected output (i.e. 31 HEXADECIMAL: 1F):#include <iostream>#include <streambuf>#include <locale>#include <cstdio>class outbuf : public std::streambuf{  protected:    /* central output function     * - print characters in uppercase mode     */    virtual int_type overflow (int_type c) {        if (c != EOF) {            // convert lowercase to uppercase            c = std::toupper(c,getloc());            // and write the character to the standard output            if (std::putchar(c) == EOF) {                return EOF;            }        }        return c;    }};int main(){    outbuf ob;                // create special output buffer    std::ostream out(&ob);    // initialize output stream with that output buffer    out << ""31 hexadecimal: "" << std::hex << 31 << std::endl;}Release:gcc version 2.97 20010119 (experimental) or any snapshot in the last weeksEnvironment:Intel PII, GLIBC2.2.1How-To-Repeat:The next example in the book too (outbuf1x.cpp & outbuf1x.hpp) does not produce the expected outputP.S.: Thanks to Benjamin Kosnik for having fixed the bug I previously reported!",RESOLVED          FIXED      
1734,Benjamin Kosnik,Use of char_traits::_S_eos() in ostream manipulators will break with user-defined traits.,"The current implementation of the char_traits templatesin bits/char_traits.h each define a static member _S_eos() that returns the end-of-string value for the specific char_traits specialization.  This method is used to implement the eos output manipulator in bits/std_ostream.h.In sections 27.6.1.3 and 27.6.2.7 of the standard state thatthe eos manipulators shall use traits::eos() to determine theeos value, but this method is not defined in section 21.1.2,""Character Traits Requirements"".This discrepancy has been noted by the working group (seehttp://anubis.dkuug.dk/jtc1/sc22/wg21/docs/lwg-defects.html#13).This defect report recommends that the traits::eos() call bereplaced with traits::char_type(0), which adheres to therequirements of paragraph 17.2.2.1.3, ""Character Sequences"",which states that the terminating character of all strings isa null (zero) value.Release:2.97Environment:AllHow-To-Repeat:N/A",RESOLVED          FIXED      
1776,Benjamin Kosnik,misc-inst.cc causes ICE on mips-sgi-irix5.3,"during 'make bootstrap-lean' after successfully bootstrapingthe compiler, libstdc++-v3 fails to compile misc-inst.cc.Here's how the compiler was called:/usr/src/gcc_objdir/gcc/g++ -B/usr/src/gcc_objdir/gcc/ -nostdinc++-L/usr/src/gcc_objdir/mips-sgi-irix5.3/libstdc++-v3/src-L/usr/src/gcc_objdir/mips-sgi-irix5.3/libstdc++-v3/src/.libs -B/usr/local/gcc-2.97/mips-sgi-irix5.3/bin/-B/usr/local/gcc-2.97/mips-sgi-irix5.3/lib/ -isystem /usr/local/gcc-2.97/mips-sgi-irix5.3/include-nostdinc++ -I../../../../gcc/libstdc++-v3/include -I../../../../gcc/libstdc++-v3/include/std-I../../../../gcc/libstdc++-v3/include/c_std -I../include -I../../../../gcc/libstdc++-v3/libsupc++-I../libio -I../../../../gcc/libstdc++-v3/libio -I../../../../gcc/libstdc++-v3/libmath-g -O2 -fno-implicit-templates -Wall -Wno-format -W -Wwrite-strings -Winline-fdiagnostics-show-location=once -g -fimplicit-templates-c ../../../../gcc/libstdc++-v3/src/misc-inst.cc -DPIC -o .libs/misc-inst.oHere's the error message:../../../../gcc/libstdc++-v3/include/bits/stl_algo.h: In function   `_RandomAccessIter std::find_if(_RandomAccessIter, _RandomAccessIter,   _Predicate, std::random_access_iterator_tag) [with _RandomAccessIter = const   char*, _Predicate = char_match]':../../../../gcc/libstdc++-v3/src/misc-inst.cc:221:   instantiated from here../../../../gcc/libstdc++-v3/include/bits/stl_algo.h:190: Internal compiler   error in propagate_one_insn, at flow.c:3790Release:gcc version 2.97 20010122 (experimental)Environment:IRIX 5.3 IP20 mipsSGI ld Version 3.19binutils-2.9.1",RESOLVED          FIXED      
1805,Benjamin Kosnik,formated 'cout'-output is wrong,"Formating ""cout""-output doesn't work correct withstring-variables.what works is:Release:unknownEnvironment:gcc 2.95.2; libs from SuSE 7.0; Athlon;(Reading specs from /usr/lib/gcc-lib/i486-suse-linux/2.95.2/specsgcc version 2.95.2 19991024 (release))How-To-Repeat:Test File HW.cpp like follows:g++ -Wall HW.cpp -o hwhw",RESOLVED          FIXED      
1815,Benjamin Kosnik,basic_stringbuf<..>:seekpos has wrong signature in libstdc++,"The tiny test prog below gets a linkage erroron Linux 2.4.0/glibc-2.2.1undefined reference to  `std::basic_stringbuf<char, std::char_traits<char>,   std::allocator<char> >::seekpos(std::fpos<mbstate_t>, std::_Ios_Openmode)'                                            ^^^^^^^^^collect2: ld returned 1 exit statuscontained in  libstdc++.so.3 :0004c7e0 W std::basic_stringbuf<char, std::char_traits<char>,   std::allocator<char> >::seekpos(std::fpos<__mbstate_t>, std::_Ios_Openmode)                                            ^^^^^^^^^^^--------------------on IRIX 6.5.9Unresolved text symbol  ""std::basic_stringbuf<char, std::char_traits<char>,   std::allocator<char> >::seekpos(std::fpos<mbstate_t>, std::_Ios_Openmode)""                                            ^^^^^^^^^contained in  libstdc++.so.4 : std::basic_stringbuf<char, std::char_traits<char>,  std::allocator<char> >::seekpos(std::fpos<char>, std::_Ios_Openmode) (weak)                                           ^^^^Test program#include <string>using std::string;#include <sstream>using std::istringstream;int main() {  string Input1(""  word1 word2\n   word3"");  istringstream Inp(Input1);  string S;  Inp >> S;}Release:cvs 20010130Environment:Linux kernel 2.4.0  glibc 2.2.1and also withIRIX 6.5.9How-To-Repeat:g++  test.Cwhere test.C is:int main() {  string Input1(""  word1 word2\n   word3"");  istringstream Inp(Input1);  string S;  Inp >> S;}",RESOLVED          FIXED      
1822,Benjamin Kosnik,math function conflicts,"For the following source-------------------------------------------------#include <cmath>#include <math.h>double mag(double x) { return sqrt(x); }using std::sqrt;-------------------------------------------------gcc gives the error$ g++ -c y.ccy.cc:6: `double std::sqrt(double)' conflicts with used function/usr/include/bits/mathcalls.h:146: `double sqrt(double)' previously declared    hereOddly, this error goes away if the definition of the mag() functionis removed.  It also goes away if we use `std::sqrt' instead of `sqrt'in the body of mag().Release:2.97 20010129 (experimental)Environment:System: Linux karma 2.2.16-22 #1 Tue Aug 22 16:49:06 EDT 2000 i686 unknownArchitecture: i686	host: i686-pc-linux-gnubuild: i686-pc-linux-gnutarget: i686-pc-linux-gnuconfigured with: ../egcs/configure --prefix=/usr/local/egcs --enable-threads=posixHow-To-Repeat:  See above.",RESOLVED          FIXED      
1834,Benjamin Kosnik,istream manipulators and sentry,"Consider the following program:---------------------------------------------------------#include <iostream>int main (){  std::cin >> std::hex;  return 0;}---------------------------------------------------------I expect this program to exit without doing anything.However, when i run it with libstdc++, it blocks waiting for inputbefore it exits.  This is because the operator>> implementationsfor manipulators in istream.tcc construct sentry objects.However, this is incorrect. This conclusion is clarifiedby library issue #60.  A couple excerpts from it:   ... I   assume that 27.6.1.2.1 is intended to apply to the arithmetic   extractors (27.6.1.2.2), but I assume that it is not intended to apply   to extractors like    basic_istream& operator>>(basic_istream& (*pf)(basic_istream&));         and    basic_istream& operator>>(basic_streammbuf*);   ...   Comments from Judy Ward: It seems like the problem is that the    basic_istream and basic_ostream operator <<()'s that are used for the   manipulators and streambuf* are in the wrong section and should have     their own separate section or be modified to make it clear that the   ""Common requirements"" listed in section 27.6.1.2.1 (for basic_istream)   and section 27.6.2.5.1 (for basic_ostream) do not apply to them.   ...   Proposed Resolution:   ...   In 27.6.1.2.3, [lib.istream::extractors], before paragraph 1. Add an    effects clause. ""Effects: None. This extractor does not behave as a   formatted input function (as described in 27.6.1.2.1).   ...   etc.Release:2.97 20010129 (experimental)Environment:System: Linux karma 2.2.16-22 #1 Tue Aug 22 16:49:06 EDT 2000 i686 unknownArchitecture: i686	host: i686-pc-linux-gnubuild: i686-pc-linux-gnutarget: i686-pc-linux-gnuconfigured with: ../egcs/configure --prefix=/usr/local/egcs --enable-threads=posixHow-To-Repeat:  See above.",RESOLVED          FIXED      
1849,Benjamin Kosnik,"alpha-dec-osf4.0f: math/mycabsf.c ""hard register"" compile failure","From: Benjamin Kosnik <bkoz@cygnus.com>To: libstdc++-gnats@sourceware.cygnus.comCc:  Subject: Re: libstdc++/23: alpha-dec-osf4.0f: math/mycabsf.c ""hard register"" compile failure (fwd)Date: Mon, 10 Jan 2000 13:45:56 -0800 (PST) ---------- Forwarded message ---------- Date: Mon, 10 Jan 2000 13:37:35 -0800 From: Richard Henderson <rth@cygnus.com> To: Benjamin Kosnik <bkoz@cygnus.com> Subject: Re: libstdc++/23: alpha-dec-osf4.0f: math/mycabsf.c ""hard register""     compile failure (fwd)  On Mon, Jan 10, 2000 at 01:33:19PM -0800, Benjamin Kosnik wrote: > Hey man. This is the complex stuff I was talking about. You had said (if i > remember correctly) that this is now a hard failure, whereas before it was > just silently failing. . . is there an ETA for complex to work on alpha, > and/or a specific compiler release to use?? (v3 requires >= 2.95.1)  Some of this functions in current cvs.  Dunno about this specific case.  In no compiler do we properly follow the Alpha ABI wrt complex numbers. There is no ETA for this either.   r~",RESOLVED          FIXED      
1850,Benjamin Kosnik,"solaris/bits/ctype_base.h  incompatible with /usr/include/ctype.h, Solaris 7, SC5.0",Responsible-Changed-From-To: unassigned->bkozResponsible-Changed-Why: mine,RESOLVED          FIXED      
1851,Benjamin Kosnik,seg fault in global basic_string construction,Responsible-Changed-From-To: unassigned->ncmResponsible-Changed-Why: strings,RESOLVED          FIXED      
1852,Benjamin Kosnik,SUN 32bit apps using 64bit file offsets,Responsible-Changed-From-To: unassigned->bkozResponsible-Changed-Why: mine,RESOLVED          FIXED      
1854,Benjamin Kosnik,make error for Digital Unix 4.0D,Responsible-Changed-From-To: unassigned->bkozResponsible-Changed-Why: mine,RESOLVED          FIXED      
1855,Benjamin Kosnik,Bug in global map variables,Responsible-Changed-From-To: unassigned->bkozResponsible-Changed-Why: mine,RESOLVED          FIXED      
1856,Benjamin Kosnik,allocator::address declared twice,Responsible-Changed-From-To: unassigned->bkozResponsible-Changed-Why: mine,RESOLVED          FIXED      
1857,Benjamin Kosnik,bitset::operator<<= and >>= incorrect for multiples of 32,"From: Benjamin Kosnik <bkoz@cygnus.com>To: anders@ieee.orgCc: libstdc++-gnats@sourceware.cygnus.com, libstdc++-prs@sourceware.cygnus.comSubject: Re: libstdc++/40: bitset::operator<<= and >>= incorrect for multiples of 32Date: Fri, 10 Mar 2000 11:17:48 -0800 (PST) can you please send me a patch and change log entry?  thanks, benjamin   On 10 Mar 2000 anders@ieee.org wrote:  >  > >Number:         40 > >Category:       libstdc++ > >Synopsis:       bitset::operator<<= and >>= incorrect for multiples of 32 > >Confidential:   no > >Severity:       serious > >Priority:       medium > >Responsible:    unassigned > >State:          open > >Class:          sw-bug > >Submitter-Id:   net > >Arrival-Date:   Thu Mar 09 20:57:00 PST 2000 > >Closed-Date: > >Last-Modified: > >Originator:     Anders Johnson > >Release:        libstdc++-2.90.7 > >Organization: > >Environment: > SunOS thresher 5.6 Generic_105181-05 sun4u sparc SUMW,Ultra-60 > >Description: > The implementation of bitset relies on the behavior > of _WordT >> __BITS_PER_WORDT(_WordT), which is not > defined according to the C standard, and is equivalent > to _WordT >> 0 on the Sparc. This occurs whenever the > shift amount is a multiple of __BITS_PER_WORDT(_WordT). > >How-To-Repeat: >  > >Fix: > The expressions on lines 201 and 220 of stl/bits/std_bitset.h > should read (__offset ? ... : static_cast<_WordT>(0)) instead. > >Release-Note: > >Audit-Trail: > >Unformatted: >",RESOLVED          FIXED      
1884,Benjamin Kosnik,Some .tcc files not included because _GLIBCPP_NO_TEMPLATE_EXPORT macro is not defined,"From: Greg Bumgardner <bumgard@roguewave.com>To: ""'gcc-gnats@gcc.gnu.org'"" <gcc-gnats@gcc.gnu.org>, 	""'nobody@gcc.gnu.org'"" <nobody@gcc.gnu.org>Cc:  Subject: RE: libstdc++/1884: Some .tcc files not included because _GLIBCPP	_NO_TEMPLATE_EXPORT macro is not definedDate: Mon, 5 Feb 2001 21:51:34 -0800  Looks like this problem occurs under 2.96 not 2.97.  My latest snapshot of 2.97 doesn't seem to properly install the c++config.h file that likely provides the definition of this macro.  My problem may not be the result of a defect.  -g.b.  > -----Original Message----- > From: gcc-gnats@gcc.gnu.org [mailto:gcc-gnats@gcc.gnu.org] > Sent: Monday, February 05, 2001 9:56 PM > To: bumgard@roguewave.com > Subject: Re: libstdc++/1884: Some .tcc files not included because > _GLIBCPP_NO_TEMPLATE_EXPORT macro is not defined >  >  > Thank you very much for your problem report. > It has the internal identification `libstdc++/1884'. > The individual assigned to look at your > report is: unassigned.  >  > >Category:       libstdc++ > >Responsible:    unassigned > >Synopsis:       Some .tcc files not included because  > _GLIBCPP_NO_TEMPLATE_EXPORT macro is not defined > >Arrival-Date:   Mon Feb 05 21:56:00 PST 2001 >",RESOLVED          FIXED      
1885,Benjamin Kosnik,bits/basic_ios.h does not include bits/basic_ios.tcc,The definitions contained in bits/basic_ios.tcc are notavailable for instantiation in user code because the#include for this file has been commented out in bits/basic_ios.h.Release:2.97 (latest)Environment:N/AHow-To-Repeat:Instantiate the basic_ios<> class with a character typeother than char or wchar_t.,RESOLVED          FIXED      
1886,Benjamin Kosnik,Some .tcc files not includedImplementation missing for __basic_file<> template class.,"The instantiation of the std::basic_filebuf<> class producesan instantiation of the internal std::__basic_file<> class.However, no implementation of the std::__basic_file<> class isis included by the libstdc++ header files. This prevents theuser from defining new instantiations of the basic_filebuf<>class.The implementation does exist, but is located in the file:/gcc/libstdc++-v3/config/c_io_stdio.cc, which only existswithin in the library source tree.This seems strange, as there doesn't really seem to be a connection between this .cc file and the .h file of the same name.Release:2.97 (latest)Environment:N/AHow-To-Repeat:Instantiate the std::basic_filebuf using a character typeother than char or whar_t. A link will fail with unresolvedsymbols declared by the __basic_file class.",RESOLVED          FIXED      
1893,Benjamin Kosnik,References to ios_base::iostate not qualified in istream.tcc,"There are several unqualified references to the ios_base::iostate class in some of the basic_istream<> methods located in bits/istream.tcc.Since the definition of this typedef is separated fromios_base by the basic_ios<> template class, it must bequalified using the ios_base class name.Release:2.97 (as of 2001-02-06)Environment:N/AHow-To-Repeat:Instantiate the basic_istream<> class.I detected the problem when I compiled with -fno-inlineand -fno-default-inline.  The compiler failed to complainon compiles without these options.",RESOLVED          FIXED      
1894,Benjamin Kosnik,typename keyword missing on sentry decls in istream.tcc and ostream.tcc,Both bits/istream.tcc and bits/ostream.tcc contain operatorimplementations that declare a basic_istream<>::sentry orbasic_ostream<>::sentry objects without using the typename keyword to indicate that sentry is a type.Release:2.97Environment:N/AHow-To-Repeat:Instantiate either basic_istream<> or basic_ostream<> classes making sure that the implementation contained inthe .tcc files is parsed by the compiler.,RESOLVED          FIXED      
1897,Benjamin Kosnik,basic_ostream operators contain non-ISO-standard variable length arrays.,"The operator implementations contained in bits/ostream.tcc contain numerous declarations of variable-length arrays.The specific instances may be located by searching for thevariable ""__pads"".Variable-length arrays are a GCC extension that violate theISO language standard.This poses a problem for users who wish to compile theircode with -pedantic and -Werror.Release:2.97 (2000-02-06)Environment:N/AHow-To-Repeat:Instantiate basic_ostream<> operators while compiling with-pedantic.",RESOLVED          FIXED      
1967,Benjamin Kosnik,bits/localefwd.h incorrectly uses int instead of size_t in for loop.,One of the for-loops in bits/localefwd.h uses an int counterin a comparison with a size_t static class member therebyproducing warning.Release:gcc_3_0_branch as of 20010212Environment:N/AHow-To-Repeat:Use the locale template constructor that takes a facetinstance as its second argument.,RESOLVED          FIXED      
1968,Benjamin Kosnik,bits/std_fstream.h fails to define typedef for _ctype_type.,The basic_filebuf::imbue() functon in bits/fstream.tcc hasa call to use_facet<_ctype_type>() but _ctype_type has not been defined.Release:gcc_3_0_branch as of 20010212Environment:N/AHow-To-Repeat:Use imbue() function on an instantiation of basic_filebuf.,RESOLVED          FIXED      
1972,Benjamin Kosnik,Exceptions classes need to copy string argument.,"The new implementation of the standard exceptions use aconst string& reference to store the const string& __arg message parameter passed into the constructor.This means that the exception will be referencing aa string object that may be a temporary that will be destroyed when the exception is thrown.The exceptions must store a copy of the string or itsc_str() contents.Release:gcc-3_0-branch as of 20010213Environment:N/AHow-To-Repeat:Throw one of the standard exceptions passing in a temporarystring object for the ""what"" message.",RESOLVED          FIXED      
2037,Benjamin Kosnik,"ostrstream, string & vector delivers 'garbage' output with cout","Extra characters appear after an ostrstream converted to a string and sent to cout.Amount of ""garbage"" depends on elements added to a vector<> (intList in the sample code).It gives:** i4@ÈRs@îÿÿÿíÿÿÿìÿÿÿëÿÿÿêÿÿÿéÿÿÿèÿÿÿçÿÿÿæÿÿÿåÿÿÿäÿÿÿãÿÿÿâÿÿÿáÿÿÿàÿÿÿßÿÿÿÞÿÿÿÝÿÿÿÜÿÿÿÛÿÿÿÚÿÿÿÙÿÿÿØÿÿÿinstead of:**             i4Release:gcc 3.0, nightly built  2001-02-19, 2.95.2 19991024 (release)Environment:Suse 7.0How-To-Repeat:just compile with -lstdc++ and the execute.",RESOLVED          FIXED      
2038,Benjamin Kosnik,"struct used, int expected","I recently upgraded a slack7.1 box to binutils 2.1.10, gnu c lib 2.2.2 and gcc 2.95.2After this I get compile errors with wrong syntax (avifile-0.53.5 for example), even if I tried recompiling gcc again.It seems like the error is coming from /usr/include/g++-3 filesThe files in this dir are the ones coming from gcc-2.95.2 I previously installed.root@tube:/usr/src/gcc-2.95.2/i686-pc-linux-gnu/libio# /usr/src/gcc-2.95.2/gcc/xgcc -v -save-temps -B/usr/src/gcc-2.95.2/gcc/ -B/dritt/i686-pc-linux-gnu/bin/ -c -g -O2 -fvtable-thunks -D_GNU_SOURCE -fno-implicit-templates -I. -I. -nostdinc++ -D_IO_MTSAFE_IO indstream.ccReading specs from /usr/src/gcc-2.95.2/gcc/specsgcc version 2.95.2 19991024 (release)GNU CPP version 2.95.2 19991024 (release) (i386 Linux/ELF)#include ""..."" search starts here:#include <...> search starts here: . /usr/src/gcc-2.95.2/gcc/include /usr/includeEnd of search list.The following default directories have been omitted from the search path: /dritt/lib/gcc-lib/i686-pc-linux-gnu/2.95.2/../../../../include/g++-3 /dritt/include /dritt/lib/gcc-lib/i686-pc-linux-gnu/2.95.2/../../../../i686-pc-linux-gnu/include /dritt/lib/gcc-lib/i686-pc-linux-gnu/2.95.2/includeEnd of omitted list. /usr/src/gcc-2.95.2/gcc/cc1plus indstream.ii -quiet -dumpbase indstream.cc -g -O2 -version -fvtable-thunks -fno-implicit-templates -o indstream.sGNU C++ version 2.95.2 19991024 (release) (i686-pc-linux-gnu) compiled by GNU C version 2.95.2 19991024 (release).indstream.cc: In method `struct streampos indirectbuf::seekoff(long long int, ios::seek_dir, int = 3)':indstream.cc:82: `struct streampos' used where a `int' was expectedindstream.cc:85: `struct streampos' used where a `int' was expectedindstream.cc:87: `struct streampos' used where a `int' was expectedindstream.cc:89: conversion from `int' to non-scalar type `streampos' requestedindstream.cc: In method `struct streampos indirectbuf::seekpos(_G_fpos64_t, int = 3)':indstream.cc:99: `struct streampos' used where a `int' was expectedindstream.cc:102: `struct streampos' used where a `int' was expectedindstream.cc:104: `struct streampos' used where a `int' was expectedindstream.cc:106: conversion from `int' to non-scalar type `streampos' requested=============================avifile makemake[3]: Entering directory `/usr/src/avifile-0.53.5/lib/videocodec/DirectShow'/bin/sh ../../../libtool --silent --mode=compile c++ -DHAVE_CONFIG_H -I. -I. -I../../../include   -g  -march=i586 -I/usr/X11R6/include -I/usr/local/include -I/usr/local/include/SDL -D_REENTRANT -w  -I../../../include -march=i586 -c guids.cpp/bin/sh ../../../libtool --silent --mode=compile c++ -DHAVE_CONFIG_H -I. -I. -I../../../include   -g  -march=i586 -I/usr/X11R6/include -I/usr/local/include -I/usr/local/include/SDL -D_REENTRANT -w  -I../../../include -march=i586 -c inputpin.cpp/bin/sh ../../../libtool --silent --mode=compile c++ -DHAVE_CONFIG_H -I. -I. -I../../../include   -g  -march=i586 -I/usr/X11R6/include -I/usr/local/include -I/usr/local/include/SDL -D_REENTRANT -w  -I../../../include -march=i586 -c outputpin.cpp/bin/sh ../../../libtool --silent --mode=compile c++ -DHAVE_CONFIG_H -I. -I. -I../../../include   -g  -march=i586 -I/usr/X11R6/include -I/usr/local/include -I/usr/local/include/SDL -D_REENTRANT -w  -I../../../include -march=i586 -c allocator.cppIn file included from /usr/lib/gcc-lib/i686-pc-linux-gnu/2.95.2/../../../../include/g++-3/iostream.h:31,                 from /usr/lib/gcc-lib/i686-pc-linux-gnu/2.95.2/../../../../include/g++-3/stl_algobase.h:53,                 from /usr/lib/gcc-lib/i686-pc-linux-gnu/2.95.2/../../../../include/g++-3/list:30,                 from allocator.h:6,                 from allocator.cpp:2:/usr/lib/gcc-lib/i686-pc-linux-gnu/2.95.2/../../../../include/g++-3/streambuf.h: In method `struct streampos streambuf::pubseekoff(long long int, ios::seek_dir, int = 3)':/usr/lib/gcc-lib/i686-pc-linux-gnu/2.95.2/../../../../include/g++-3/streambuf.h:362: conversion from `__off64_t' to non-scalar type `streampos' requested/usr/lib/gcc-lib/i686-pc-linux-gnu/2.95.2/../../../../include/g++-3/streambuf.h: In method `struct streampos streambuf::pubseekpos(_G_fpos64_t, int = 3)':/usr/lib/gcc-lib/i686-pc-linux-gnu/2.95.2/../../../../include/g++-3/streambuf.h:364: `struct streampos' used where a `long long int' was expectedmake[3]: *** [allocator.lo] Error 1Release:linux-2.2.18+lids+ow+stealth+ipacct+freeswan+mosixEnvironment:BASH=/bin/bashBASH_VERSINFO=([0]=""2"" [1]=""04"" [2]=""0"" [3]=""1"" [4]=""release"" [5]=""i386-slackware-linux-gnu"")BASH_VERSION='2.04.0(1)-release'CLASSPATH='""/usr/local/java/bin:/usr/local/java/jre:/usr/local/java/src:""'COLUMNS=158DIRSTACK=()EUID=0GROUPS=()HISTFILE=/dev/nullHISTFILESIZE=500HISTSIZE=500HOME=/rootHOSTNAME=tube.ssc.netHOSTTYPE=i386HZ=100IFS='   'JAVA2_HOME=/usr/local/javaJAVA_HOME=/usr/local/javaLC_ALL=POSIXLESS=-MLESSOPEN='|lesspipe.sh %s'LINES=75LOGNAME=rootLS_COLORS='no=00:fi=00:di=01;34:ln=01;36:pi=40;33:so=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:ex=01;32:*.cmd=01;32:*.exe=01;32:*.com=01;32:*.btm=01;32:*.bat=01;32:*.tar=01;31:*.tgz=01;31:*.arj=01;31:*.taz=01;31:*.lzh=01;31:*.zip=01;31:*.bz2=01;31:*.rpm=01;31:*.deb=01;31:*.z=01;31:*.Z=01;31:*.gz=01;31:*.jpg=01;35:*.gif=01;35:*.bmp=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.mpg=01;37:*.avi=01;37:*.mov=01;37:'LS_OPTIONS=' --color=auto -F -b -T 0'MACHTYPE=i386-slackware-linux-gnuMAIL=/var/spool/mail/rootMAILCHECK=60MANPATH=/usr/local/man:/usr/man/preformat:/usr/man:/usr/X11R6/man:/usr/openwin/manMINICOM='-c on'MOZILLA_HOME=/usr/lib/netscapeOLDPWD=/usr/src/gcc-2.95.2/i686-pc-linux-gnuOPENWINHOME=/usr/openwinOPTERR=1OPTIND=1OSTYPE=linux-gnuPATH=/usr/local/sbin:/usr/sbin:/sbin:/usr/local/java/bin:/usr/local/bin:/usr/bin:/bin:/usr/X11R6/bin:/usr/openwin/bin:/usr/games:/usr/local/java/bin/:/usr/lib/gcc-lib/i686-pc-linux-gnu/2.95.2/PIPESTATUS=([0]=""127"")PPID=700PS1='\u@\h:\w\$ 'PS2='> 'PS4='+ 'PWD=/usr/src/gcc-2.95.2/i686-pc-linux-gnu/libioSHELL=/bin/bashSHELLOPTS=braceexpand:hashall:histexpand:monitor:ignoreeof:interactive-comments:emacsSHLVL=1TERM=xtermUID=0USER=root_=gccbugfile='/etc/profile.d/*.sh'ignoreeof=0",RESOLVED          FIXED      
2054,Benjamin Kosnik,"g++-3 rejects legal code, accepted by g++-2.95.2 (functors)","The source code ts.C is rejected by g++-3.0 20010221 but accepted byg++-2.95.2. The file ts.C is a stripped-down version of the filek8/thesaur.cc from the book ""Die C++ Standard Template Library"" byUlrich Breymann.Release:3.0 20010221 (prerelease)Environment:System: Linux kiste 2.4.1 #33 Thu Feb 15 12:51:39 CET 2001 i686 unknownArchitecture: i686SuSE 7.1GNU assembler version 2.10.91 (i686-pc-linux-gnu) using BFD version 2.10.1.0.4host: i686-pc-linux-gnubuild: i686-pc-linux-gnutarget: i686-pc-linux-gnuconfigured with: ../gcc/configure --enable-shared --disable-nls --enable-threads=posixHow-To-Repeat:source file ts.C#include<vector>#include<string>#include<algorithm>using namespace std;struct indirectCompare{    indirectCompare(const vector<string>& v) : V(v) {}    bool operator()( int x,  int y) const    {         return V[x] < V[y];    }    bool operator()( int x, const string& a) const    {         return V[x] < a;    }    const vector<string>& V;};int main( ){    const int Maxi = 1022;      vector<string> Words(Maxi);    vector<int> Index(Maxi);        for(size_t i = 0; i < Index.size(); i++)       Index[i] = i;    indirectCompare aComparison(Words);      sort(Index.begin(), Index.end(), aComparison);    string SearchTerm;    lower_bound(Index.begin(), Index.end(), SearchTerm, aComparison); }Compilation of ts.C by g++-v3g++ -o ts ts.C -W -Wall -save-temps/usr/local/include/g++-v3/bits/concept_checks.h: In static member function    `static void _STL_SAME_TYPE_ERROR<_TypeX,    _TypeY>::__type_X_not_same_as_type_Y(_TypeX, _TypeY) [with _TypeX = string,    _TypeY = int]':/usr/local/include/g++-v3/bits/stl_algo.h:1978:   instantiated from `_ForwardIter std::lower_bound(_ForwardIter, _ForwardIter, const _Tp&, _Compare) [with _ForwardIter = std::__normal_iterator<int*, std::vector<int, std::allocator<int> > >, _Tp = string, _Compare = indirectCompare]'ts.C:41:   instantiated from here/usr/local/include/g++-v3/bits/concept_checks.h:262: conversion from    `__check_equal<int>' to non-scalar type `__check_equal<string>' requested/usr/local/include/g++-v3/bits/concept_checks.h: In static member function    `static _Ret _STL_BINARY_FUNCTION_ERROR<_Func, _Ret, _First,    _Second>::__binary_function_requirement_violation(_Func&, const _First&,    const _Second&) [with _Func = indirectCompare, _Ret = bool, _First = string,    _Second = string]':/usr/local/include/g++-v3/bits/stl_algo.h:1980:   instantiated from `_ForwardIter std::lower_bound(_ForwardIter, _ForwardIter, const _Tp&, _Compare) [with _ForwardIter = std::__normal_iterator<int*, std::vector<int, std::allocator<int> > >, _Tp = string, _Compare = indirectCompare]'ts.C:41:   instantiated from here/usr/local/include/g++-v3/bits/concept_checks.h:308: no match for call to    `(indirectCompare) (const std::basic_string<char, std::char_traits<char>,    std::allocator<char> >&, const std::basic_string<char,    std::char_traits<char>, std::allocator<char> >&)'ts.C:12: candidates are: bool indirectCompare::operator()(int, int) constts.C:17:                 bool indirectCompare::operator()(int, const string&)    constCompilation by g++-2.95.2/usr/bin/g++ -v -o ts ts.C -W -Wall Reading specs from /usr/lib/gcc-lib/i486-suse-linux/2.95.2/specsgcc version 2.95.2 19991024 (release) /usr/lib/gcc-lib/i486-suse-linux/2.95.2/cpp -lang-c++ -v -D__GNUC__=2 -D__GNUG__=2 -D__GNUC_MINOR__=95 -D__cplusplus -D__ELF__ -Dunix -D__i386__ -Dlinux -D__ELF__ -D__unix__ -D__i386__ -D__linux__ -D__unix -D__linux -Asystem(posix) -D__EXCEPTIONS -W -Wall -Acpu(i386) -Amachine(i386) -Di386 -D__i386 -D__i386__ -Di486 -D__i486 -D__i486__ ts.C /tmp/ccVGbrjQ.iiGNU CPP version 2.95.2 19991024 (release) (i386 Linux/ELF)#include ""..."" search starts here:#include <...> search starts here: /usr/include/g++ /usr/local/include /usr/lib/gcc-lib/i486-suse-linux/2.95.2/include /usr/includeEnd of search list.The following default directories have been omitted from the search path: /usr/lib/gcc-lib/i486-suse-linux/2.95.2/../../../../i486-suse-linux/includeEnd of omitted list. /usr/lib/gcc-lib/i486-suse-linux/2.95.2/cc1plus /tmp/ccVGbrjQ.ii -quiet -dumpbase ts.cc -W -Wall -version -o /tmp/cc0jJfHD.sGNU C++ version 2.95.2 19991024 (release) (i486-suse-linux) compiled by GNU C version 2.95.2 19991024 (release). /usr/i486-suse-linux/bin/as -V -Qy -o /tmp/cct0h7a4.o /tmp/cc0jJfHD.sGNU assembler version 2.10.91 (i486-suse-linux) using BFD version 2.10.0.33 /usr/lib/gcc-lib/i486-suse-linux/2.95.2/collect2 -m elf_i386 -dynamic-linker /lib/ld-linux.so.2 -o ts /usr/lib/crt1.o /usr/lib/crti.o /usr/lib/gcc-lib/i486-suse-linux/2.95.2/crtbegin.o -L/usr/lib/gcc-lib/i486-suse-linux/2.95.2 -L/usr/i486-suse-linux/lib /tmp/cct0h7a4.o -lstdc++ -lm -lgcc -lc -lgcc /usr/lib/gcc-lib/i486-suse-linux/2.95.2/crtend.o /usr/lib/crtn.opreprocessed source file (g++-3)See attachments for ts.ii.bz2",RESOLVED          FIXED      
2064,Benjamin Kosnik,config/os/irix/bits/ctype_base.h incompatible with IRIX 5.3,"Trying to compile library gives following error:/usr/src/gcc_objdir/gcc/g++ -B/usr/src/gcc_objdir/gcc/ -nostdinc++  -L/usr/src/gcc_objdir/mips-sgi-irix5.3/libstdc++-v3/src  -L/usr/src/gcc_objdir/mips-sgi-irix5.3/libstdc++-v3/src/.libs  -B/usr/local/gcc-2.97/mips-sgi-irix5.3/bin/ -B/usr/local/gcc-2.97/mips-sgi-irix5.3/lib/  -isystem /usr/local/gcc-2.97/mips-sgi-irix5.3/include -nostdinc++  -I../../../../gcc/libstdc++-v3/include -I../../../../gcc/libstdc++-v3/include/std  -I../../../../gcc/libstdc++-v3/include/c_std -I../include  -I../../../../gcc/libstdc++-v3/libsupc++ -I../libio -I../../../../gcc/libstdc++-v3/libio  -I../../../../gcc/libstdc++-v3/libmath -g -O2 -fno-implicit-templates -Wall -Wno-format  -W -Wwrite-strings -Winline -fdiagnostics-show-location=once  -c ../../../../gcc/libstdc++-v3/src/ios.cc -DPIC -o .libs/ios.oIn file included from ../../../../gcc/libstdc++-v3/include/bits/locale_facets.h:51,                 from ../../../../gcc/libstdc++-v3/include/bits/std_locale.h:38,                 from ../../../../gcc/libstdc++-v3/include/bits/std_fstream.h:40,                 from ../../../../gcc/libstdc++-v3/src/ios.cc:37:../include/bits/ctype_base.h:44: `_ISupper' was not declared in this scope../include/bits/ctype_base.h:45: `_ISlower' was not declared in this scope../include/bits/ctype_base.h:46: `_ISalpha' was not declared in this scope../include/bits/ctype_base.h:47: `_ISdigit' was not declared in this scope../include/bits/ctype_base.h:48: `_ISxdigit' was not declared in this scope../include/bits/ctype_base.h:49: `_ISspace' was not declared in this scope../include/bits/ctype_base.h:50: `_ISprint' was not declared in this scope../include/bits/ctype_base.h:51: `_ISgraph' was not declared in this scope../include/bits/ctype_base.h:52: `_IScntrl' was not declared in this scope../include/bits/ctype_base.h:53: `_ISpunct' was not declared in this scope../include/bits/ctype_base.h:54: `_ISalnum' was not declared in this scopeThe problem is that config/os/irix/ctype_base.h is compatiblewith /usr/include/ctype.h of IRIX 6.5 but not with IRIX 5.3.I am not sure how config/os/irix/ctype_base.h should bemodified to be compatible with both, but I have attached/usr/include/ctype.h for IRIX 5.3.Release:gcc version 2.97 20010205 (experimental)Environment:IRIX 5.3 IP20 mips",RESOLVED          FIXED      
2067,Benjamin Kosnik,bootstrap failed: `alloca' undeclared,"I did:../gcc/configure --prefix=${PREFIX}  --with-cpu=ultrasparc --enable-languages='c++' && \make CFLAGS='-O' LIBCFLAGS='-g -O2' LIBCXXFLAGS='-g -O2 -fno-implicit-templates' bootstrapand got result:../../../../gcc/libstdc++-v3/include/bits/std_ostream.h: In function    `std::basic_ostream<char, _Traits>& std::operator<<(std::basic_ostream<char,    _Traits>&, char) [with _Traits = std::char_traits<char>]':../../../../gcc/libstdc++-v3/src/misc-inst.cc:121:   instantiated from here../../../../gcc/libstdc++-v3/include/bits/std_ostream.h:532: `alloca'    undeclared (first use this function)../../../../gcc/libstdc++-v3/include/bits/std_ostream.h:532: (Each undeclared    identifier is reported only once for each function it appears in.)../../../../gcc/libstdc++-v3/include/bits/basic_string.h: In function    `std::basic_istream<_CharT, _Traits>&    std::operator>>(std::basic_istream<_CharT, _Traits>&,    std::basic_string<_CharT, _Traits, _Alloc>&) [with _CharT = char, _Traits =    std::char_traits<char>, _Alloc = std::allocator<char>]':../../../../gcc/libstdc++-v3/src/misc-inst.cc:189:   instantiated from here../../../../gcc/libstdc++-v3/include/bits/basic_string.h:1133: warning: comparison   between signed and unsigned integer expressionsmake[4]: *** [misc-inst.lo] Error 1make[4]: Leaving directory `/export/home/ask/build/gcc-build/sparc-sun-solaris2.6/libstdc++-v3/src'make[3]: *** [all-recursive] Error 1make[3]: Leaving directory `/export/home/ask/build/gcc-build/sparc-sun-solaris2.6/libstdc++-v3'make[2]: *** [all-recursive-am] Error 2make[2]: Leaving directory `/export/home/ask/build/gcc-build/sparc-sun-solaris2.6/libstdc++-v3'make[1]: *** [all-target-libstdc++-v3] Error 2make[1]: Leaving directory `/export/home/ask/build/gcc-build'make: *** [bootstrap] Error 2Release:3.1 20010223 (CVS)Environment:SunOS iridium 5.6 Generic_105181-20 sun4u sparc SUNW,Ultra-5_10gcc version 2.95.2 19991024 (release)",RESOLVED          FIXED      
2089,Benjamin Kosnik,Problems with namespaces and exceptions (std::range_error),"The following legal source code re.C is compiled by g++-3.0 20010223 into abinary that generates a segmentation fault. The binary generated byg++-2.95 runs wihout a problem. Does the warning ""unused parameter `const    std::exception&_ctor_arg'"" from line 11 of the file /usr/local/include/g++-v3/exception indicate a problem?Release:3.0 20010223 (prerelease)Environment:System: Linux kiste 2.4.1 #33 Thu Feb 15 12:51:39 CET 2001 i686 unknownArchitecture: i686SuSE 7.1GNU assembler version 2.10.91 (i686-pc-linux-gnu) using BFD version 2.10.1.0.4host: i686-pc-linux-gnubuild: i686-pc-linux-gnutarget: i686-pc-linux-gnuconfigured with: ../gcc/configure --enable-shared --disable-nls --enable-threads=posix --enable-long-longHow-To-Repeat:Source file re.C#include <iostream>#include <exception>#include <stdexcept>  namespace fehler{  class error : public std::domain_error  {  public:     error() : std::domain_error(""hallo"") {}  };}int main (){  try    {      throw fehler::error();    }      catch (const fehler::error &e)    {      std::cout << ""Error: "" << e.what() << std::endl;    }}Compiling re.Cg++ -v -o re re.C -W -Wall -save-tempsReading specs from /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.0/specsConfigured with: ../gcc/configure --enable-shared --disable-nls --enable-threads=posix --enable-long-longgcc version 3.0 20010223 (prerelease) /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.0/cpp0 -lang-c++ -D_GNU_SOURCE -D__GNUG__=3 -D__EXCEPTIONS -D__GXX_ABI_VERSION=100 -v -D__GNUC__=3 -D__GNUC_MINOR__=0 -D__GNUC_PATCHLEVEL__=0 -D__ELF__ -Dunix -Dlinux -D__ELF__ -D__unix__ -D__linux__ -D__unix -D__linux -Asystem=posix -D__STDC_HOSTED__=1 -W -Wall -Acpu=i386 -Amachine=i386 -Di386 -D__i386 -D__i386__ -D__tune_i686__ -D__tune_pentiumpro__ re.C re.iiGNU CPP version 3.0 20010223 (prerelease) (cpplib) (i386 Linux/ELF)#include ""..."" search starts here:#include <...> search starts here: /usr/local/include/g++-v3 /usr/local/include/g++-v3/i686-pc-linux-gnu /usr/local/include /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.0/include /usr/local/i686-pc-linux-gnu/include /usr/includeEnd of search list. /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.0/cc1plus -fpreprocessed re.ii -quiet -dumpbase re.C -W -Wall -version -o re.sGNU CPP version 3.0 20010223 (prerelease) (cpplib) (i386 Linux/ELF)GNU C++ version 3.0 20010223 (prerelease) (i686-pc-linux-gnu)	compiled by GNU C version 3.0 20010221 (prerelease).re.C: In method `std::exception::exception(const std::exception&)':/usr/local/include/g++-v3/exception:41: warning: unused parameter `const    std::exception&_ctor_arg' /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.0/../../../../i686-pc-linux-gnu/bin/as -V -Qy -o re.o re.sGNU assembler version 2.10.91 (i686-pc-linux-gnu) using BFD version 2.10.1.0.4 /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.0/collect2 -m elf_i386 -dynamic-linker /lib/ld-linux.so.2 -o re /usr/lib/crt1.o /usr/lib/crti.o /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.0/crtbegin.o -L/usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.0 -L/usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.0/../../../../i686-pc-linux-gnu/lib -L/usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.0/../../.. re.o -lstdc++ -lm -lgcc_s -lc -lgcc_s /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.0/crtend.o /usr/lib/crtn.oRunning the program repeter@kiste:~ > ./reSegmentation fault (core dumped)Bzip2 compressed and uuencoded preprocessed source file re.ii.bzSee attachments for re.ii.bz2",RESOLVED          FIXED      
2148,Benjamin Kosnik,Strange warning while bootstrapping the libstc++ library,"While bootstrapping the libstdc++ library I get the warning:../../../../gcc/libstdc++-v3/include/bits/basic_string.h: In function    `std::basic_istream<_CharT, _Traits>&    std::operator>>(std::basic_istream<_CharT, _Traits>&,    std::basic_string<_CharT, _Traits, _Alloc>&) [with _CharT = char, _Traits =    std::char_traits<char>, _Alloc = std::allocator<char>]':../../../../gcc/libstdc++-v3/src/misc-inst.cc:189:   instantiated from here../../../../gcc/libstdc++-v3/include/bits/basic_string.h:1133: warning: comparison   between signed and unsigned integer expressionsThis is really strange since basic_string.h has only 1039 linesRelease:3.1 20010301 (experimental)Environment:System: Linux kiste 2.4.2 #34 Sun Feb 25 20:03:34 CET 2001 i686 unknownArchitecture: i686Suse 7.1glibc 2.2host: i686-pc-linux-gnubuild: i686-pc-linux-gnutarget: i686-pc-linux-gnuconfigured with: ../gcc/configure --enable-shared --disable-nls --enable-threads=posix --enable-long-longHow-To-Repeat:Bootstrap the current libstdc++ library.",RESOLVED          FIXED      
2181,Benjamin Kosnik,Problems with istringstream,"The following source code ra3.C, a stripped down version ofboost/libs/rational/rational_test.cpp, does not work as expected.The first check in line 73 fails, the second works, though. If I link versus STLport-4.1b5 both tests work. The first check fails regardless if the modulator std::noskipws isactive in function std::istream& operator>> or not. What bothers me is that the input stream in std::istream& operator>>is ok until the function exits. In the calling function the eof bitis set for iss but the fail bit is not. I do not know why. Also I haveproblems debugging the i(string)stream, gdb is doing strange things. The binary linked against stlport has the output:1: iss.rdstate: 42: iss.rdstate: 5,which is IMHO correct.Both implementations set fail = 2, bad = 1 and eof = 2. Gcc-3.0 has the same problems.Release:3.1 20010304 (experimental)Environment:System: Linux kiste 2.4.2 #34 Sun Feb 25 20:03:34 CET 2001 i686 unknownArchitecture: i686SuSE 7.1Glibc 2.2GNU ld version 2.10.91 (with BFD 2.10.1.0.4)host: i686-pc-linux-gnubuild: i686-pc-linux-gnutarget: i686-pc-linux-gnuconfigured with: ../gcc/configure --enable-shared --disable-nls --enable-threads=posix --enable-long-longHow-To-Repeat:Source file ra3.C#include <sstream>#include <iostream>    namespace boost {template <typename IntType>class rational {    typedef IntType param_type;public:    rational() : num(0), den(1) {}    rational& assign(param_type n, param_type d);private:    IntType num;    IntType den;};template <typename IntType>inline rational<IntType>& rational<IntType>::assign(param_type n, param_type d){    num = n;    den = d;    return *this;}template <typename IntType>std::istream& operator>> (std::istream& is, rational<IntType>& r){    IntType n = IntType(0), d = IntType(1);    char c = 0;    is >> n;    c = is.get();    if (c != '/')        is.clear(std::istream::badbit);      is >> std::noskipws >> d;    if (is)        r.assign(n, d);    return is;}} // namespace boostnamespace {void Check(bool ok, const char *s, int line){    if (!ok)    {        std::cout << ""Failed test "" << s << "" at line "" << line << std::endl;    }}#define CHECK(x) Check((x), #x, __LINE__)void run_tests(){    typedef boost::rational<long> rat;    rat r0;    {        std::istringstream iss(""1/ 2"");        iss >> r0;        std::cout << ""1: iss.rdstate: "" << iss.rdstate() << std::endl;        CHECK(( !iss ));    }    {        std::istringstream iss(""1 /2"");        iss >> r0;        std::cout << ""2: iss.rdstate: "" << iss.rdstate() << std::endl;        CHECK(( !iss ));    }}} // namespaceint main(){    run_tests();}Compiling ra3.Cg++ -v -o ra ra3.C -W -Wall -save-tempsReading specs from /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1/specsConfigured with: ../gcc/configure --enable-shared --disable-nls --enable-threads=posix --enable-long-longgcc version 3.1 20010304 (experimental) /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1/cpp0 -lang-c++ -D_GNU_SOURCE -D__GNUG__=3 -D__EXCEPTIONS -D__GXX_ABI_VERSION=100 -v -D__GNUC__=3 -D__GNUC_MINOR__=1 -D__GNUC_PATCHLEVEL__=0 -D__ELF__ -Dunix -Dlinux -D__ELF__ -D__unix__ -D__linux__ -D__unix -D__linux -Asystem=posix -D__STDC_HOSTED__=1 -W -Wall -Acpu=i386 -Amachine=i386 -Di386 -D__i386 -D__i386__ -D__tune_i686__ -D__tune_pentiumpro__ ra3.C ra3.iiGNU CPP version 3.1 20010304 (experimental) (cpplib) (i386 Linux/ELF)#include ""..."" search starts here:#include <...> search starts here: /usr/local/include/g++-v3 /usr/local/include/g++-v3/i686-pc-linux-gnu /usr/local/include /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1/include /usr/local/i686-pc-linux-gnu/include /usr/includeEnd of search list. /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1/cc1plus -fpreprocessed ra3.ii -quiet -dumpbase ra3.C -W -Wall -version -o ra3.sGNU CPP version 3.1 20010304 (experimental) (cpplib) (i386 Linux/ELF)GNU C++ version 3.1 20010304 (experimental) (i686-pc-linux-gnu)	compiled by GNU C version 3.1 20010304 (experimental)./usr/local/include/g++-v3/bits/stl_alloc.h: In method    `std::exception::exception(const std::exception&)':/usr/local/include/g++-v3/exception:41: warning: unused parameter `const    std::exception&_ctor_arg' /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1/../../../../i686-pc-linux-gnu/bin/as -V -Qy -o ra3.o ra3.sGNU assembler version 2.10.91 (i686-pc-linux-gnu) using BFD version 2.10.1.0.4 /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1/collect2 -m elf_i386 -dynamic-linker /lib/ld-linux.so.2 -o ra /usr/lib/crt1.o /usr/lib/crti.o /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1/crtbegin.o -L/usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1 -L/usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1/../../../../i686-pc-linux-gnu/lib -L/usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1/../../.. ra3.o -lstdc++ -lm -lgcc_s -lc -lgcc_s /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1/crtend.o /usr/lib/crtn.oRunning the program ra./ra31: iss.rdstate: 2Failed test ( !iss ) at line 732: iss.rdstate: 5Bzip2 compressed and uuencoded preprocessed source file ra3.ii.bz2See attachments for ra3.ii.bz2",RESOLVED          FIXED      
2190,Benjamin Kosnik,"abs(long), div(long,long) defined in <cmath> instead of <cstdlib>","libstdc++ defines the long versions of abs and div in cmath, ratherthan in cstdlib, as clause 26.5 of the standard seems to require.This causes the program below to be rejected with ambiguityerrors if the compiler is configured with --enable-long-long.Release:3.0 20010305 (prerelease)Environment:System: Linux karma 2.2.16-22 #1 Tue Aug 22 16:49:06 EDT 2000 i686 unknownArchitecture: i686	host: i686-pc-linux-gnubuild: i686-pc-linux-gnutarget: i686-pc-linux-gnuconfigured with: ../egcs/configure --prefix=/usr/local/egcs --enable-threads=posix --enable-long-longHow-To-Repeat:Configure the compiler with --enable-long-long.Then, compiling this source--------------------------------------------#include <cstdlib>int  main(){  long a = std::abs (1L);  ldiv_t b = std::div (2L, 1L);}--------------------------------------------gives the errors$ g++ -c x.ccx.cc: In function `int main()':x.cc:5: call of overloaded `abs(long int)' is ambiguous/usr/local/egcs/include/g++-v3/bits/std_cstdlib.h:123: candidates are: int    std::abs(int)/usr/local/egcs/include/g++-v3/bits/std_cstdlib.h:135:                 long    long int std::abs(long long int)x.cc:6: call of overloaded `div(long int, long int)' is ambiguous/usr/local/egcs/include/g++-v3/bits/std_cstdlib.h:125: candidates are: div_t    std::div(int, int)/usr/local/egcs/include/g++-v3/bits/std_cstdlib.h:142:                 lldiv_t    std::div(long long int, long long int)",RESOLVED          FIXED      
2209,Benjamin Kosnik,Diagnostic regression with respect to g++-2.95.2 ?,"The header fstream seem to include time.hSo that a diagnostic that time.h has not been declareddisappeared.I'm not sure this qualifies as a regression, but Gaby toldme to fill a gnat report so here it is...Release:unknownEnvironment:g++ mainline from 01/22/2001Linus redhat 6.2How-To-Repeat:mururoa->g++ test1.Cmururoa->/usr/local/bin/g++ test1.C # This is 2.95.2test1.C: In function `int main()':test1.C:5: implicit declaration of function `int time(...)'",RESOLVED          FIXED      
2211,Benjamin Kosnik,Performance regression for cin.read with respect to g++-2.95.2 ?,"I have a huge performance problem with a call to a libstdc++-v3 function. istream::read. This is true only for I/O done with cin.mururoa->ls -l toto-rw-r--r--   1 papadop  robotvis  1367160 Mar  7 11:38 totomururoa->cat toto toto | ./a.out ~/Robotvis++/Libs/Image/tests/images/scully.float.inrBefore ifstream::read: 983970673After ifstream::read: 983970673Before cin.read: 983970673After cin.read: 983970682Before fread: 983970682After fread: 983970682With g++-2.95.2, I get:mururoa->/usr/local/bin/g++ -g -pg -ftemplate-depth-30 -fPIC -DPIC Test.Cmururoa->cat toto toto | ./a.out ~/Robotvis++/Libs/Image/tests/images/scully.float.inrBefore ifstream::read: 983978303After ifstream::read: 983978303Before cin.read: 983978303After cin.read: 983978303Before fread: 983978303After fread: 983978303[regression 2.95.2 was cin.read(ing) as that as the other ways of reading]The crux of the problem seem to be (in fstream.tcc).	  // XXX So that istream::getc() will only need to get 1 char,	  // as opposed to BUF_SIZE.	  if (__fd == 0)	    _M_buf_size = 1;Consequently, characters are read one by one which is extremely costly.Release:unknownEnvironment:g++ mainline from 01/22/2001Linus redhat 6.2 on x86 (P III)",RESOLVED          FIXED      
2259,Benjamin Kosnik,istream::tellg/seekg cause character loss,istream::tellg causes character loss while using getline(string &).  istream::seekg with the saved value will result in one character beyond the saved position.Release:unknownEnvironment:~>gcc -vReading specs from /usr/lib/gcc-lib/i686-pc-cygwin/2.95.2-6/specsgcc version 2.95.2-6 19991024 (cygwin experimental)How-To-Repeat:This can be demostrated with the attach code and a file with the following 2 lines (the content seem to have an impact on the result):line1	aaaaaaaa	bbbbbbbb	cccccccccline2	ddddddddThe running result is as follows:0: line1        aaaaaaaa        bbbbbbbb        cccccccccgcount = 0remember 360: [ine2        dddddddd]restore 371: [ne2 dddddddd],RESOLVED          FIXED      
2272,Benjamin Kosnik,comparison between signed and unsigned integer expressions in sstream,The lineif(buf.size() - rpos != n) line 171 in /usr/include/g++-3/sstream causes a warningcomparison between signed and unsigned integer expressionsRelease:libstdc++-2.96Environment:gcc-c++-2.96-77.1 and libstdc++-2.96-77.1 RPMs on Red Hat 7.0How-To-Repeat:A shortened version of my Timestamp member function#include <sstream>string Timestamp::String(){  ostringstream os;  os << 1;  return os.str();},RESOLVED          FIXED      
2302,Benjamin Kosnik,Problems with toupper,"According to the book ""The C++ Standard Library"" by Josuttis, the call std::toupper(c, getloc()) is equivalent tostd::use_facet<std::ctype<char> >(getloc()).toupper(c), but this isnot the case for libstdc++-v3. If toupper(c, getloc()) is called,the program ttoup runs without output. Ifstd::use_facet<std::ctype<char> >(getloc()).toupper(c) is used, theoutput is correct but the conversion of the characters touppercase does not take place. IMHO both function calls should yieldthe same results.Release:3.1 20010315 (experimental)Environment:System: Linux kiste 2.4.2 #34 Sun Feb 25 20:03:34 CET 2001 i686 unknownArchitecture: i686SuSE 7.1Glibc 2.2GNU ld version 2.11.90.0.1 (with BFD 2.11.90.0.1)host: i686-pc-linux-gnubuild: i686-pc-linux-gnutarget: i686-pc-linux-gnuconfigured with: ../gcc/configure --enable-shared --disable-nls --enable-threads=posix --enable-long-long --enable-languages=c,c++,f77,objcHow-To-Repeat:Source file ttoup.C#include <iostream>#include <streambuf>#include <locale>#include <cstdio>struct outbuf : public std::streambuf{    virtual int_type overflow (int_type c)        {        if (c != traits_type::eof())        {//does not work at all (characters are discarded).           //            c = std::toupper(c, getloc());//does work but does not convert.                        std::use_facet<std::ctype<char> >(getloc()).toupper(c);                        if (putchar(c) == EOF) {                return traits_type::eof();            }        }        return c;    }};int main(){    outbuf ob;                    std::ostream out(&ob);        out << ""hello world!""<< std::endl;}Compiling the programm g++ -v -o ttoup ttoup.C -W -WallReading specs from /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1/specsConfigured with: ../gcc/configure --enable-shared --disable-nls --enable-threads=posix --enable-long-long --enable-languages=c,c++,f77,objcgcc version 3.1 20010315 (experimental) /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1/cc1plus -v -D__GNUC__=3 -D__GNUC_MINOR__=1 -D__GNUC_PATCHLEVEL__=0 -D__ELF__ -Dunix -Dlinux -D__ELF__ -D__unix__ -D__linux__ -D__unix -D__linux -Asystem=posix -D__STDC_HOSTED__=1 -W -Wall -Acpu=i386 -Amachine=i386 -Di386 -D__i386 -D__i386__ -D__tune_i686__ -D__tune_pentiumpro__ ttoup.C -D__GNUG__=3 -D_GNU_SOURCE -D__EXCEPTIONS -D__GXX_ABI_VERSION=100 -quiet -dumpbase ttoup.C -W -Wall -version -o /tmp/ccqAIahY.sGNU CPP version 3.1 20010315 (experimental) (cpplib) (i386 Linux/ELF)GNU C++ version 3.1 20010315 (experimental) (i686-pc-linux-gnu)	compiled by GNU C version 3.1 20010315 (experimental).#include ""..."" search starts here:#include <...> search starts here: /usr/local/include/g++-v3 /usr/local/include/g++-v3/i686-pc-linux-gnu /usr/local/include /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1/include /usr/local/i686-pc-linux-gnu/include /usr/includeEnd of search list. /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1/../../../../i686-pc-linux-gnu/bin/as -V -Qy -o /tmp/ccIu1CVH.o /tmp/ccqAIahY.sGNU assembler version 2.11.90.0.1 (i686-pc-linux-gnu) using BFD version 2.11.90.0.1 /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1/collect2 -m elf_i386 -dynamic-linker /lib/ld-linux.so.2 -o ttoup /usr/lib/crt1.o /usr/lib/crti.o /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1/crtbegin.o -L/usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1 -L/usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1/../../../../i686-pc-linux-gnu/lib -L/usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1/../../.. /tmp/ccIu1CVH.o -lstdc++ -lm -lgcc_s -lc -lgcc_s /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1/crtend.o /usr/lib/crtn.oRunning the programm ttoupstd::use_facet<std::ctype<char> >(getloc()).toupper(c);peter@kiste:~ > ./ttouphello world!peter@kiste:~ >std::toupper(c, getloc());peter@kiste:~ > ./ttouppeter@kiste:~ >",RESOLVED          FIXED      
2311,Benjamin Kosnik,"isnan(), isinf(), etc, not undefined","The following code snippet:#include <cmath>void isnan (int a, int b) { } does not compile. On the other hand, the following does:#include <cmath>void cos (int a, int b) { }Release:3.1 20010314 (experimental) and Codesourcery online testEnvironment:Glibc2.2.2, Linux2.2.18, i686How-To-Repeat:Due to this behavior, the current blitz snapshot (blitz-20001213) cannot be compiled.",RESOLVED          FIXED      
2346,Benjamin Kosnik,Problems with seekg (rewind)?,"After the program t1 has run, the file test.dat contains 100 lines, each isa copy of the string abcdefghijklmnopqrstuvwxyz. If the executable isbuilt by g++ 2.95.2, after the  program run, there are only tenlines, which is what I expected. Is that a flaw of the c++-library implementation or am I wrong? g++-3.1 shows the same behaviour as g++-3.0.Release:3.0 20010321 (prerelease)Environment:System: Linux kiste 2.4.2 #34 Sun Feb 25 20:03:34 CET 2001 i686 unknownArchitecture: i686GNU ld version 2.11.90.0.1 (with BFD 2.11.90.0.1)SuSE 7.1Glibc 2.2host: i686-pc-linux-gnubuild: i686-pc-linux-gnutarget: i686-pc-linux-gnuconfigured with: ../gcc/configure --enable-shared --disable-nls --enable-threads=posix --enable-long-long --enable-languages=c,c++,f77,objcHow-To-Repeat:Source code t1.C#include <iostream>#include <fstream>#include <cstdlib>static std::fstream file;static const char string[] = ""abcdefghijklmnopqrstuvwxyz"";const int times = 10;void write_rewind(){	std::streampos begin = file.tellg();	for(int i = 1; i <= times; i++)        {		file << string << ""\n"";	}	file.seekg(begin);//        file.seekg(0, std::ios::beg);}void open_file()				{	file.open(""test.dat"", std::ios::out);	if (!file)        {		std::cerr << ""Cannot open test.dat\n"";		abort();        }}int main(){	 	open_file();	for(int i = 1; i <= times; i++)             write_rewind();}Compiling the program t1g++ -v -o t1 t1.C -W -Wall -save-tempsReading specs from /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.0/specsConfigured with: ../gcc/configure --enable-shared --disable-nls --enable-threads=posix --enable-long-long --enable-languages=c,c++,f77,objcgcc version 3.0 20010321 (prerelease) /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.0/cpp0 -lang-c++ -D_GNU_SOURCE -D__GNUG__=3 -D__EXCEPTIONS -D__GXX_ABI_VERSION=100 -v -D__GNUC__=3 -D__GNUC_MINOR__=0 -D__GNUC_PATCHLEVEL__=0 -D__ELF__ -Dunix -Dlinux -D__ELF__ -D__unix__ -D__linux__ -D__unix -D__linux -Asystem=posix -D__STDC_HOSTED__=1 -W -Wall -Acpu=i386 -Amachine=i386 -Di386 -D__i386 -D__i386__ -D__tune_i686__ -D__tune_pentiumpro__ t1.C t1.iiGNU CPP version 3.0 20010321 (prerelease) (cpplib) (i386 Linux/ELF)#include ""..."" search starts here:#include <...> search starts here: /usr/local/include/g++-v3 /usr/local/include/g++-v3/i686-pc-linux-gnu /usr/local/include /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.0/include /usr/local/i686-pc-linux-gnu/include /usr/includeEnd of search list. /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.0/cc1plus -fpreprocessed t1.ii -quiet -dumpbase t1.C -W -Wall -version -o t1.sGNU CPP version 3.0 20010321 (prerelease) (cpplib) (i386 Linux/ELF)GNU C++ version 3.0 20010321 (prerelease) (i686-pc-linux-gnu)	compiled by GNU C version 3.0 20010321 (prerelease). /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.0/../../../../i686-pc-linux-gnu/bin/as -V -Qy -o t1.o t1.sGNU assembler version 2.11.90.0.1 (i686-pc-linux-gnu) using BFD version 2.11.90.0.1 /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.0/collect2 -m elf_i386 -dynamic-linker /lib/ld-linux.so.2 -o t1 /usr/lib/crt1.o /usr/lib/crti.o /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.0/crtbegin.o -L/usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.0 -L/usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.0/../../../../i686-pc-linux-gnu/lib -L/usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.0/../../.. t1.o -lstdc++ -lm -lgcc_s -lc -lgcc_s /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.0/crtend.o /usr/lib/crtn.oBzip2 compressed and uuencode preprocessed source  t1.iiSee attachments for t1.ii.bz2",RESOLVED          FIXED      
2505,Benjamin Kosnik,including hash_map.h fails under g++ 3.0,The g++ v3 stl headers have a broken hash_map.h:In file included from foo.cc:1:/usr/include/g++-v3/hash_map.h:31:32: bits/stl_hashtable.h: No such file or directoryRelease:unknownHow-To-Repeat:g++ -O2 -Wall foo.cc -o foo,RESOLVED          FIXED      
2517,Benjamin Kosnik,-O2 compilation appears to cause a memory leak when a string is added to a char[],"-O2 compilation appears to cause a memory leak when a string is added to a char[]Release:unknownEnvironment:mips-sgi-irix6.5How-To-Repeat:Compile the following with 'g++ -O2':#include <string>using namespace std;int main(){  string s1=""hi"",s2;  while(true",RESOLVED          FIXED      
2523,Benjamin Kosnik,cin polling for input,"When I run the following code#include <iostream>using namespace std;int main(){	int i;	cin >> i;	cout << ""i == "" << i << endl;}cin doesn't wait for input - the cout code gets executed with a random value for i.I'm using gcc from CVS, updated a few hours ago.When I run the same code under gcc 2.95.3 it works fine.Release:CVS gcc main branchEnvironment:Red Hat 6.2How-To-Repeat:build and run the code given in the description",RESOLVED          FIXED      
2568,Benjamin Kosnik,"libstdc++ build failure on sparcv9: ""character constant too long""","When configured withenv CC='cc -xarch=v9 -xildoff' ../configure --prefix=/pkgs/gcc-2.96 --enable-checking=no --enable-shared=no sparcv9-sun-solaris2.8and using Sun's as and ld, with the 04/16 CVS source,I get a good compare after stage2 of the bootstrap (cc isthe Sun compiler), but I get the following failures whentrying to build libstdc++ (as reported from amake -i installcommand):c++locale.cc: In member function `void    std::numpunct<_CharT>::_M_initialize_numpunct(int*) [with _CharT =    wchar_t]':c++locale.cc:66: character constant too longc++locale.cc:67: character constant too longc++locale.cc: In member function `void std::moneypunct<_CharT,    _Intl>::_M_initialize_moneypunct(int*) [with _CharT = wchar_t, bool _Intl =    false]':c++locale.cc:96: character constant too longc++locale.cc:97: character constant too longand../../../../libstdc++-v3/src/locale.cc: In constructor    `std::_Format_cache<_CharT>::_Format_cache() [with _CharT = wchar_t]':../../../../libstdc++-v3/src/locale.cc:624: character constant too long../../../../libstdc++-v3/src/locale.cc:624: character constant too longandc++locale.cc: In member function `void    std::numpunct<_CharT>::_M_initialize_numpunct(int*) [with _CharT =    wchar_t]':c++locale.cc:66: character constant too longc++locale.cc:67: character constant too longc++locale.cc: In member function `void std::moneypunct<_CharT,    _Intl>::_M_initialize_moneypunct(int*) [with _CharT = wchar_t, bool _Intl =    false]':c++locale.cc:96: character constant too longc++locale.cc:97: character constant too longand../../../../libstdc++-v3/src/locale.cc: In constructor    `std::_Format_cache<_CharT>::_Format_cache() [with _CharT = wchar_t]':../../../../libstdc++-v3/src/locale.cc:624: character constant too long../../../../libstdc++-v3/src/locale.cc:624: character constant too longwhich occurs in the following code:#ifdef _GLIBCPP_USE_WCHAR_T  template<>    _Format_cache<wchar_t>::_Format_cache()    : _M_valid(true),    _M_decimal_point(L'.'), _M_thousands_sep(L','), // <<<<<<<<<<<<<<<<<    _M_truename(L""true""), _M_falsename(L""false""), _M_use_grouping(false)    { }#endifAll the problem code is of the same form.This is the closest I've ever gottent to a successfulbootstrap that supports 64-bit code generation on Solaris,so if would be very nice if this could be fixed.BradRelease:gcc-3.1Environment:sparcv9-sun-solaris2.8",RESOLVED          FIXED      
2593,Benjamin Kosnik,#include <hash_map.h> fails.,"#include <hash_map.h> fails with these error messages:	In file included from t.cc:28:	/usr/include/g++-v3/hash_map.h:31:32: bits/stl_hashtable.h: No such file or directory	In file included from t.cc:28:	/usr/include/g++-v3/hash_map.h:35:31: bits/stl_hash_map.h: No such file or directory	In file included from t.cc:28:	/usr/include/g++-v3/hash_map.h:38: `hash' not declared	/usr/include/g++-v3/hash_map.h:39: `hashtable' not declared	/usr/include/g++-v3/hash_map.h:40: `hash_map' not declared	/usr/include/g++-v3/hash_map.h:41: `hash_multimap' not declaredRelease:3.0 20010416 (prerelease)Environment:System: Linux hellhound 2.4.3-ac5 #16 Fri Apr 13 17:04:13 CEST 2001 i686 unknownArchitecture: i686	host: i686-pc-linux-gnubuild: i686-pc-linux-gnutarget: i686-pc-linux-gnuconfigured with: ../gcc-20010320/configure --program-transform-name=s/^/e/ --prefix=/usr --enable-threads --enable-haifa --with-local-prefix=/usr/localHow-To-Repeat:	$ echo ""#include <hash_map.h>"" > t.cc	$ g++ -c t.cc",RESOLVED          FIXED      
2609,Benjamin Kosnik,no long long support in iostream.,"A lot of code (like sampeg-2, for example) does not link.Release:3.0 20010416 (prerelease)Environment:System: Linux hellhound 2.4.3-ac5 #16 Fri Apr 13 17:04:13 CEST 2001 i686 unknownArchitecture: i686	host: i686-pc-linux-gnubuild: i686-pc-linux-gnutarget: i686-pc-linux-gnuconfigured with: ../gcc-20010320/configure --program-transform-name=s/^/e/ --prefix=/usr --enable-threads --enable-haifa --with-local-prefix=/usr/localHow-To-Repeat:	compile sampeg-2.  I recall to have had similar problems with	libavifile.",RESOLVED          FIXED      
2619,Benjamin Kosnik,Link fail with seekpos symbol,"When compiling the following program:#include <sstream>using namespace std;int main (){   int val;   istringstream str_vector(string(""10""));   str_vector >> val;}I get a link error:/home/jm/tmp/ccJSFtbS.o(.gnu.linkonce.d._ZTVSt15basic_stringbufIcSt11char_traitsIcESaIcEE+0x1c): undefined reference to `std::basic_stringbuf<char, std::char_traits<char>, std::allocator<char> >::seekpos(std::fpos<__mbstate_t>, std::_Ios_Openmode)'collect2: ld returned 1 exit statusRelease:gcc version 3.0 20010423 (prerelease) (RPM download)Environment:Mandrake 8.0 (fresh install)How-To-Repeat:Any file that uses the stringstream class won't link.",RESOLVED          FIXED      
2627,Benjamin Kosnik,istreambuf_iterator fails to satisfy input iterator requirements,"An istreambuf_iterator should satisfy the requirements of an input iterator.  In particular, x++ and ++x should be equivalent if the return value is not  used.  But the test program shows this not to be the case.  the output should  be    a    b    c  Instead it is    a    a    b  It appears to be the postfix form that is in error.  Here's the program.  Since this is a library problem, I assume I shouldn't  bother with post-included source.#include <iostream>#include <iterator>#include <sstream>int main(){  std::string s(""abcde"");  std::istringstream in(s);  std::istreambuf_iterator<char> i(in);  std::cout << *i << std::endl;  ++i;  std::cout << *i << std::endl;  i++;  std::cout << *i << std::endl;}  Replacing the line 'i++;' by '++i' results in the expected output.Release:3.0 20010416 (prerelease)Environment:System: Linux mp-dhcp-4-40.attlabs.att.com 2.2.16-22 #1 Tue Aug 22 16:49:06 EDT 2000 i686 unknownArchitecture: i686	host: i686-pc-linux-gnubuild: i686-pc-linux-gnutarget: i686-pc-linux-gnuconfigured with: ../gcc/configureUnformatted: END-PR: doc-bug          The doumentation is incorrect.",RESOLVED          FIXED      
2634,Benjamin Kosnik,istrstream state not correct upon failed conversion,"The state of an istrstream is not set to fail() or bad()if the conversion from string to double fails. This is trueonly for strings starting with an ('i' || 'I') or a ('n' || 'N').Try out the stupid test prog, it's self explanatory.Release:GNU CPP version 2.95.3 20010315 (release) (i386 Linux/ELF)Environment:(i386 Linux/ELF) i686-pc-linux-gnugcc was build with --enable-shared --enable-threadsHow-To-Repeat:The test prog tries to convert all command line argumentsto double.Use for example:",RESOLVED          FIXED      
2647,Benjamin Kosnik,"ostringstream with ios::right,ios::adjustfield,setw","ostringstream ignores asetf(ios::right,ios::adjustfield) statement followed bya setw(20).Resulting string obtained from str() is incorrectlyaligned.Note: the correct result is obtained with Compaq C++V6.3-008,IBM VisualAge C++ 5, and KAI's KCC 3.4d compilers.Release:gcc version 2.96 20000731Environment:Linux 2.2.16-23 i686 (Red Hat Linux 7.0)How-To-Repeat:compile withg++ t.Cexecute with a.out",RESOLVED          FIXED      
2657,Benjamin Kosnik,ostream and namespace declarations conflict,"If there is an ostream<< declaration in a namespace,ostream << std::string doesn't get recognized.Release:gcc2.95.2 on Solaris 7, gcc2.95.3 on Linux 2.4Environment:Solaris, LinuxHow-To-Repeat:compile the file with the last lineuncommented.",RESOLVED          FIXED      
2691,Benjamin Kosnik,Compiled binary receives SIGSEGV when mbchar is enabled,"The binary that is compiled using the above g++ will abortreceiving signal SIGSEGV.No warning messages are shown when compiling the attachedtest program.The GDB output says:Program received signal SIGSEGV, Segmentation fault.0x40069dff in _IO_wdoallocbuf (fp=0x805045c)    at ../../../../gcc-20010423/libstdc++-v3/libio/wgenops.c:407407         if (_IO_DOALLOCATE (fp) != WEOF)Release:unknownEnvironment:i686-pc-linux-gnu, Linux kernel 2.4.0-test8, Glibc 2.2gcc -v:Reading specs from /usr/local/gcc014/lib/gcc-lib/i686-pc-linux-gnu/3.0/specsConfigured with: ../gcc-20010423/configure --prefix=/usr/local/gcc014 --enable-languages=c,c++ --enable-cstdio=libio --enable-c-mbchargcc version 3.0 20010423 (prerelease)How-To-Repeat:g++ test.ii -o test./test",RESOLVED          FIXED      
2694,Benjamin Kosnik,signedness warning in __advance,"When calling std::__advance(bidirectional_iterator) in some wayor other with an unsigned data type for _Distance, and using -W,the compiler complains that >=0 is always satisfied. Twoways to repeat the problem are to compile with -W thefollowing snippets:------------------#include <list>void g() {  std::list<int>::iterator i;  std::advance (i, 1U);};-----------------#include <vector>#include <map>void f() {  std::map<unsigned int, double> m;  std::vector<std::pair<unsigned int, double> > v;  v.insert (v.end(), m.begin(), m.end());};--------------------The first gives the messagestests/deal.II> ~/Config/gcc-ss-linux/bin/c++ -W -c a.cc /home/atlas2/wolf/Config/gcc-ss-linux/include/g++-v3/bits/stl_iterator_base.h: In   function `void std::__advance(_BidirectionalIterator&, _Distance,    std::bidirectional_iterator_tag) [with _BidirectionalIterator =    std::_List_iterator<int, int&, int*>, _Distance = unsigned int]':/home/atlas2/wolf/Config/gcc-ss-linux/include/g++-v3/bits/stl_iterator_base.h:356:   instantiated from `void std::advance(_InputIterator&, _Distance) [with _InputIterator = std::_List_iterator<int, int&, int*>, _Distance = unsigned int]'a.cc:4:   instantiated from here/home/atlas2/wolf/Config/gcc-ss-linux/include/g++-v3/bits/stl_iterator_base.h:336: warning: comparison   of unsigned expression >= 0 is always trueThe second snippet has an even higher ugliness factor.Release:unknownEnvironment:gcc 3.0 20010423 prereleaseHow-To-Repeat:Compile any of the code snippets above with -W",RESOLVED          FIXED      
2720,Benjamin Kosnik,"cin input truncated if istream.clear() used in cases on ""ind"" and ""ix"" only","Read a file and strings beginning with ""ind"" or ""Ind"" are truncated (e.g., ""Indigo"" is read as ""igo"") and strings beginning with ""ix"" where x is any letter except 'n', and the first two characters are dropped (e.g., ""Ivy"" is read as ""y"".  See attached source file and input file.  This only occurs on Linux 2.95.3 and 2.96-81.  This problem does not occur with cygwin 2.95.3-2.Also you can see that on the lines before the I* strings, the last value seems to be read twice if you compare the input with the output.Release:gcc 2.95-3 20010315 (release)Environment:RH 7.1, not standard RH7.1 gcc, that was 2.96-81, but rather the standard release as noted above.How-To-Repeat:$ g++ readnames.cpp -o readnames$ ./readnames < names.lst",RESOLVED          FIXED      
2767,Benjamin Kosnik,Problems with the new bits/std_cstring.h header,"After the lines    extern ""C"" const char* strchr(const char*, int);   inline char*  strchr(char* __s1, int __n)  {    return const_cast<char*>(strchr(const_cast<const char*>(__s1), __n));  }have been added to bits/std_cstring.h, the following source code td.C doesno longer compile. The same holds true, mutatis mutandis, for strstr, strrchr,strpbrk, and  memchr. If I explicitly qualify strchr with the prefixstd:: or :: the code does compile. Though this behaviour may be legal,it breaks a lot of code. Therefore, I kindly ask you to the fix the problem.I destilled the code td.C from a large, ~1 Mbyte,compilation unit from root which does compile with gcc 3.0.Release:3.1 20010428 (experimental)Environment:System: Linux kiste 2.4.3 #35 Sat Mar 31 22:08:25 CEST 2001 i686 unknownArchitecture: i686SuSE 7.1Glibc 2.2GNU ld version 2.11.90.0.4 (with BFD 2.11.90.0.4)host: i686-pc-linux-gnubuild: i686-pc-linux-gnutarget: i686-pc-linux-gnuconfigured with: ../gcc/configure --enable-shared --disable-nls --enable-threads=posix --enable-long-long --enable-languages=c,c++,f77,objcHow-To-Repeat:Source file td.C#include<cstring> //or #include<iostream> or #include <bits/std_cstring.h> using namespace std;void f(const char *name){    strchr(name,'/');}Compiling td.Cg++ -v -c td.C -W -Wall -save-temps Reading specs from /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1/specsConfigured with: ../gcc/configure --enable-shared --disable-nls --enable-threads=posix --enable-long-long --enable-languages=c,c++,f77,objcThread model: posixgcc version 3.1 20010428 (experimental) /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1/cpp0 -lang-c++ -D_GNU_SOURCE -D__GNUG__=3 -D__DEPRECATED -D__EXCEPTIONS -D__GXX_ABI_VERSION=100 -v -D__GNUC__=3 -D__GNUC_MINOR__=1 -D__GNUC_PATCHLEVEL__=0 -D__ELF__ -Dunix -Dlinux -D__ELF__ -D__unix__ -D__linux__ -D__unix -D__linux -Asystem=posix -D__STDC_HOSTED__=1 -W -Wall -Acpu=i386 -Amachine=i386 -Di386 -D__i386 -D__i386__ -D__tune_i686__ -D__tune_pentiumpro__ td.C td.iiGNU CPP version 3.1 20010428 (experimental) (cpplib) (i386 Linux/ELF)#include ""..."" search starts here:#include <...> search starts here: /usr/local/include/g++-v3 /usr/local/include/g++-v3/i686-pc-linux-gnu /usr/local/include/g++-v3/backward /usr/local/include /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1/include /usr/local/i686-pc-linux-gnu/include /usr/includeEnd of search list. /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1/cc1plus -fpreprocessed td.ii -quiet -dumpbase td.C -W -Wall -version -o td.sGNU CPP version 3.1 20010428 (experimental) (cpplib) (i386 Linux/ELF)GNU C++ version 3.1 20010428 (experimental) (i686-pc-linux-gnu)	compiled by GNU C version 3.1 20010428 (experimental).td.C: In function `void f(const char*)':td.C:6: call of overloaded `strchr(const char*&, char)' is ambiguous/usr/include/string.h:155: candidates are: char* strchr(const char*, int)/usr/local/include/g++-v3/bits/std_cstring.h:91:                 char*    std::strchr(char*, int) <near match>/usr/local/include/g++-v3/bits/std_cstring.h:88:                 const char*    std::strchr(const char*, int)Preprocessed source file td.ii# 1 ""td.C""# 1 ""/usr/local/include/g++-v3/cstring"" 1 3# 1 ""/usr/local/include/g++-v3/bits/std_cstring.h"" 1 3# 39 ""/usr/local/include/g++-v3/bits/std_cstring.h"" 3# 1 ""/usr/local/include/g++-v3/i686-pc-linux-gnu/bits/c++config.h"" 1 3# 34 ""/usr/local/include/g++-v3/i686-pc-linux-gnu/bits/c++config.h"" 3# 1 ""/usr/local/include/g++-v3/i686-pc-linux-gnu/bits/os_defines.h"" 1 3# 37 ""/usr/local/include/g++-v3/i686-pc-linux-gnu/bits/os_defines.h"" 3# 1 ""/usr/include/features.h"" 1 3# 283 ""/usr/include/features.h"" 3# 1 ""/usr/include/sys/cdefs.h"" 1 3# 284 ""/usr/include/features.h"" 2 3# 311 ""/usr/include/features.h"" 3# 1 ""/usr/include/gnu/stubs.h"" 1 3# 312 ""/usr/include/features.h"" 2 3# 38 ""/usr/local/include/g++-v3/i686-pc-linux-gnu/bits/os_defines.h"" 2 3# 35 ""/usr/local/include/g++-v3/i686-pc-linux-gnu/bits/c++config.h"" 2 3# 40 ""/usr/local/include/g++-v3/bits/std_cstring.h"" 2 3# 1 ""/usr/local/include/g++-v3/bits/std_cstddef.h"" 1 3# 40 ""/usr/local/include/g++-v3/bits/std_cstddef.h"" 3# 1 ""/usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1/include/stddef.h"" 1 3# 147 ""/usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1/include/stddef.h"" 3typedef int ptrdiff_t;# 199 ""/usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1/include/stddef.h"" 3typedef unsigned int size_t;# 41 ""/usr/local/include/g++-v3/bits/std_cstddef.h"" 2 3namespace std{  using ::ptrdiff_t;  using ::size_t;}# 41 ""/usr/local/include/g++-v3/bits/std_cstring.h"" 2 3# 43 ""/usr/local/include/g++-v3/bits/std_cstring.h"" 3# 1 ""/usr/include/string.h"" 1 3# 26 ""/usr/include/string.h"" 3# 1 ""/usr/include/features.h"" 1 3# 27 ""/usr/include/string.h"" 2 3extern ""C"" {# 1 ""/usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1/include/stddef.h"" 1 3# 34 ""/usr/include/string.h"" 2 3extern void *memcpy (void *__restrict __dest,                     __const void *__restrict __src, size_t __n) throw ();extern void *memmove (void *__dest, __const void *__src, size_t __n)     throw ();extern void *memccpy (void *__restrict __dest, __const void *__restrict __src,                      int __c, size_t __n)     throw ();extern void *memset (void *__s, int __c, size_t __n) throw ();extern int memcmp (__const void *__s1, __const void *__s2, size_t __n)     throw () __attribute__ ((__pure__));extern void *memchr (__const void *__s, int __c, size_t __n)      throw () __attribute__ ((__pure__));extern void *rawmemchr (__const void *__s, int __c) throw () __attribute__ ((__pure__));extern void *memrchr (__const void *__s, int __c, size_t __n)      throw () __attribute__ ((__pure__));extern char *strcpy (char *__restrict __dest, __const char *__restrict __src)     throw ();extern char *strncpy (char *__restrict __dest,                      __const char *__restrict __src, size_t __n) throw ();extern char *strcat (char *__restrict __dest, __const char *__restrict __src)     throw ();extern char *strncat (char *__restrict __dest, __const char *__restrict __src,                      size_t __n) throw ();extern int strcmp (__const char *__s1, __const char *__s2)     throw () __attribute__ ((__pure__));extern int strncmp (__const char *__s1, __const char *__s2, size_t __n)     throw () __attribute__ ((__pure__));extern int strcoll (__const char *__s1, __const char *__s2)     throw () __attribute__ ((__pure__));extern size_t strxfrm (char *__restrict __dest,                       __const char *__restrict __src, size_t __n) throw ();# 1 ""/usr/include/xlocale.h"" 1 3# 28 ""/usr/include/xlocale.h"" 3typedef struct __locale_struct{  struct locale_data *__locales[13];  const unsigned short int *__ctype_b;  const int *__ctype_tolower;  const int *__ctype_toupper;} *__locale_t;# 109 ""/usr/include/string.h"" 2 3extern int __strcoll_l (__const char *__s1, __const char *__s2, __locale_t __l)     throw () __attribute__ ((__pure__));extern size_t __strxfrm_l (char *__dest, __const char *__src, size_t __n,                           __locale_t __l) throw ();extern char *strdup (__const char *__s) throw () __attribute__ ((__malloc__));extern char *strndup (__const char *__string, size_t __n)     throw () __attribute__ ((__malloc__));# 155 ""/usr/include/string.h"" 3extern char *strchr (__const char *__s, int __c) throw () __attribute__ ((__pure__));extern char *strrchr (__const char *__s, int __c) throw () __attribute__ ((__pure__));extern char *strchrnul (__const char *__s, int __c) throw () __attribute__ ((__pure__));extern size_t strcspn (__const char *__s, __const char *__reject)     throw () __attribute__ ((__pure__));extern size_t strspn (__const char *__s, __const char *__accept)     throw () __attribute__ ((__pure__));extern char *strpbrk (__const char *__s, __const char *__accept)     throw () __attribute__ ((__pure__));extern char *strstr (__const char *__haystack, __const char *__needle)     throw () __attribute__ ((__pure__));extern char *strcasestr (__const char *__haystack, __const char *__needle)     throw () __attribute__ ((__pure__));extern char *strtok (char *__restrict __s, __const char *__restrict __delim)     throw ();extern char *__strtok_r (char *__restrict __s,                         __const char *__restrict __delim,                         char **__restrict __save_ptr) throw ();extern char *strtok_r (char *__restrict __s, __const char *__restrict __delim,                       char **__restrict __save_ptr) throw ();extern void *memmem (__const void *__haystack, size_t __haystacklen,                     __const void *__needle, size_t __needlelen)     throw () __attribute__ ((__pure__));extern void *__mempcpy (void *__restrict __dest,                        __const void *__restrict __src, size_t __n) throw ();extern void *mempcpy (void *__restrict __dest,                      __const void *__restrict __src, size_t __n) throw ();extern size_t strlen (__const char *__s) throw () __attribute__ ((__pure__));extern size_t strnlen (__const char *__string, size_t __maxlen)     throw () __attribute__ ((__pure__));extern char *strerror (int __errnum) throw ();extern char *__strerror_r (int __errnum, char *__buf, size_t __buflen) throw ();extern char *strerror_r (int __errnum, char *__buf, size_t __buflen) throw ();extern void __bzero (void *__s, size_t __n) throw ();extern void bcopy (__const void *__src, void *__dest, size_t __n) throw ();extern void bzero (void *__s, size_t __n) throw ();extern int bcmp (__const void *__s1, __const void *__s2, size_t __n)     throw () __attribute__ ((__pure__));extern char *index (__const char *__s, int __c) throw () __attribute__ ((__pure__));extern char *rindex (__const char *__s, int __c) throw () __attribute__ ((__pure__));extern int __ffs (int __i) throw () __attribute__ ((const));extern int ffs (int __i) throw () __attribute__ ((const));extern int ffsl (long int __l) throw () __attribute__ ((const));__extension__ extern int ffsll (long long int __ll)     throw () __attribute__ ((const));extern int strcasecmp (__const char *__s1, __const char *__s2)     throw () __attribute__ ((__pure__));extern int strncasecmp (__const char *__s1, __const char *__s2, size_t __n)     throw () __attribute__ ((__pure__));extern int __strcasecmp_l (__const char *__s1, __const char *__s2,                           __locale_t __loc) throw () __attribute__ ((__pure__));extern int __strncasecmp_l (__const char *__s1, __const char *__s2,                            size_t __n, __locale_t __loc)     throw () __attribute__ ((__pure__));extern char *strsep (char **__restrict __stringp,                     __const char *__restrict __delim) throw ();extern int strverscmp (__const char *__s1, __const char *__s2)     throw () __attribute__ ((__pure__));extern char *strsignal (int __sig) throw ();extern char *__stpcpy (char *__restrict __dest, __const char *__restrict __src)     throw ();extern char *stpcpy (char *__restrict __dest, __const char *__restrict __src)     throw ();extern char *__stpncpy (char *__restrict __dest,                        __const char *__restrict __src, size_t __n) throw ();extern char *stpncpy (char *__restrict __dest,                      __const char *__restrict __src, size_t __n) throw ();extern char *strfry (char *__string) throw ();extern void *memfrob (void *__s, size_t __n) throw ();extern char *basename (__const char *__filename) throw ();# 365 ""/usr/include/string.h"" 3}# 44 ""/usr/local/include/g++-v3/bits/std_cstring.h"" 2 3# 69 ""/usr/local/include/g++-v3/bits/std_cstring.h"" 3namespace std{  extern ""C"" void* memcpy(void*, const void*, size_t);  extern ""C"" void* memmove(void*, const void*, size_t);  extern ""C"" char* strcpy(char*, const char*);  extern ""C"" char* strncpy(char*, const char*, size_t);  extern ""C"" char* strcat(char*, const char*);  extern ""C"" char* strncat(char*, const char*, size_t);  extern ""C"" int memcmp(const void*, const void*, size_t);  extern ""C"" int strcmp(const char*, const char*);  extern ""C"" int strcoll(const char*, const char*);  extern ""C"" int strncmp(const char*, const char*, size_t);  extern ""C"" size_t strxfrm(char*, const char*, size_t);  extern ""C"" const void* memchr(const void*, int, size_t);  inline void*  memchr(void* __p, int __c, size_t __n)  {    return const_cast<void*>(memchr(const_cast<const void*>(__p), __c, __n));  }  extern ""C"" const char* strchr(const char*, int);  inline char*  strchr(char* __s1, int __n)  {    return const_cast<char*>(strchr(const_cast<const char*>(__s1), __n));  }  extern ""C"" size_t strcspn(const char*, const char*);  extern ""C"" const char* strpbrk(const char*, const char*);  inline char*  strpbrk(char* __s1, const char* __s2)  {    return const_cast<char*>(strpbrk(const_cast<const char*>(__s1), __s2));  }  extern ""C"" const char* strrchr(const char*, int);  inline char*  strrchr(char* __s1, int __n)  {    return const_cast<char*>(strrchr(const_cast<const char*>(__s1), __n));  }  extern ""C"" size_t strspn(const char*, const char*);  extern ""C"" const char* strstr(const char*, const char*);  inline char*  strstr(char* __s1, const char* __s2)  {    return const_cast<char*>(strstr(const_cast<const char*>(__s1), __s2));  }  extern ""C"" char* strtok(char*, const char*);  extern ""C"" void* memset(void*, int, size_t);  extern ""C"" char* strerror(int);  extern ""C"" size_t strlen(const char*);}# 3 ""/usr/local/include/g++-v3/cstring"" 2 3# 2 ""td.C"" 2using namespace std;void f(const char *name){    strchr(name,'/');}",RESOLVED          FIXED      
2772,Benjamin Kosnik,bind2nd(mem_fun1_ref) does not work,"The following code (the whole code is in the attatchment):    list<myclass> mylist;    for_each(mylist.begin(), mylist.end(),             bind2nd(mem_fun1_ref(&myclass::f), 2));where f = ""int f(int i)""produces this message:/usr/local/include/g++-v3/bits/stl_function.h: In member function `typename   _Operation::result_type std::binder2nd<_Operation>::operator()(typename   _Operation::first_argument_type&) const [with _Operation =   std::mem_fun1_ref_t<int, myclass, int>]':/usr/local/include/g++-v3/bits/stl_algo.h:90:   instantiated from `_Function std::for_each(_InputIter, _InputIter, _Function) [with _InputIter = std::_List_iterator<myclass, myclass&, myclass*>, _Function = std::binder2nd<std::mem_fun1_ref_t<int, myclass, int> >]'testaus.cpp:23:   instantiated from here/usr/local/include/g++-v3/bits/stl_function.h:224: no match for call to `(const   std::mem_fun1_ref_t<int, myclass, int>) (const myclass&, const int&)'/usr/local/include/g++-v3/bits/stl_function.h:578: candidates are: _Ret   std::mem_fun1_ref_t<_Ret, _Tp, _Arg>::operator()(_Tp&, _Arg) const [with   _Ret = int, _Tp = myclass, _Arg = int](See also bug #470, it seems to relate to this.)I have tried also an older gcc-snapshot and 2.95.2 (with its own library). They produce the same error.Release:gcc version 3.0 20010430 (prerelease)Environment:Debian gnu/linux potatoHow-To-Repeat:By trying to compile (g++ testaus.cpp).",RESOLVED          FIXED      
2830,Benjamin Kosnik,incorrect inserter for std::string,"At the end of bits/ostream.tcc I see:// 21.3.7.8 basic_string::operator<<...    { return (__out << __s.c_str()); }first, shouldn't this be 21.3.7.9? as 21.3.7.8 describes swap.second, this won't handle '\0's properly.Release:20010507 snapshotEnvironment:looking over the code",RESOLVED          FIXED      
2832,Benjamin Kosnik,rdbuf methods incorrect,"The rdbuf methods of the fstream and stringstream classes seem wrong.For each of these classes they return a casted version of _M_streambuf.The problem is that the fstream and stringstream classes shouldcontain a real stringbuf or filebuf member and that is what theirrdbuf() methods should return a pointer to.Calling rdbuf( std::streambuf* ) changes the _M_streambuf pointerlike it should, but this should not affect the return of therdbuf() methods of stringstream and fstream.What's worse is that because of this, the destructors andmember functions of fstream and stringstream treat the_M_streambuf as a pointer to their own internal buffer.The destuctors delete the buffer even though the buffer maynot be owned by the object.The member functions call methods on _M_streambuf that maynot exist.Release:20010507 snapshotHow-To-Repeat:#include <iostream>#include <ios>#include <iosfwd>#include <sstream>#include <cassert>void redirect( std::streambuf* new_buf, std::ios& stream ){  stream.rdbuf( new_buf );}int main(){  std::stringstream str1;  std::stringbuf* const buf = str1.rdbuf();  redirect( std::cout.rdbuf(), str1 );  str1 << ""hello\n""; // should send ""hello"" to stdout  assert( buf == str1.rdbuf() ); // this should never change  return 0;}",RESOLVED          FIXED      
2837,Benjamin Kosnik,Reference counted string is not smp safe,"The reference count increment in method ""Rep::grab"" of the ""basic_string"" template class in ""std/bastring.h"" is notsmp safe on an intel machine. The most common effect seemsto be that the static global nilRep structure ends up with a zero reference count and gets deleted, nasty things follow.Release:2.95.2 and 2.95.3",RESOLVED          FIXED      
2841,Benjamin Kosnik,#NAME?,"The new dejagnu based testsuite enforces the -static switch when linking thelibstdc++ v3 testsuite.  This causes all links to fail (currently on Tru64 UNIXV5.1, but there are other scenarios, see below):FAIL: 17_intro/header_cassert.cc (test for excess errors)WARNING: 17_intro/header_cassert.cc compilation failed to produce executableIn libstdc++-v3.log, I find!dc++-v3/testsuite -I/vol/gnu/src/gcc/gcc-3.0-branch/libstdc++-v3/include/backwards -I/vol/gnu/src/gcc/gcc-3.0-branch/libstdc++-v3/include/ext -static /amnt/zacatecas/volumes/d9/gnu/src/gcc/gcc-3.0-branch/libstdc++-v3/testsuite/17_intro/header_cassert.cc -DDEBUG_ASSERT -lm -o ./a.out/usr/bin/ld:Can't locate file for: -lmcollect2: ld returned 1 exit statuscompiler exited with status 1I could trace this down to the fact that -static is passed to all link commandsand the machine in question didn't have a static libm installed.This is an incompatible change from the old mkcheck-based testsuite, and wrongfor a couple of reasons:* The old testsuite used libtool to link, while the new dejagnu-based one uses  g++ directly.  While the old static tests used -static as well, this was the  libtool flag, which means `prefer a static library if there is a choice',  while gcc's -static flag means `enforce static linking, fail if a static  library cannot be found'.  This is equivalent to libtool's -all-static flag,  which was not used for good reason.* Namely, this doesn't test what a user of the installed g++/libstdc++ would  use: they would call g++ -static only in exceptional circumstances, since  this would create enormous binaries by default.  Instead, the testsuite should  test the version of libstdc++ which has been build during the configure run,   thus respecting either the default or any --enable-shared or --disable-shared  switches the user has specified when configuring the compiler.* Static libraries may not be available, so all tests spuriously fail.  This   may be due to an installers choice (like in the present Tru64 UNIX case), or  by OS design (like on 64-bit Solaris 8, where there are no static versions  of system libraries at all).Release:3.0 20010514 (prerelease)Environment:System: OSF1 bartok V5.1 732 alphaMachine: alpha	host: alpha-dec-osf5.1build: alpha-dec-osf5.1target: alpha-dec-osf5.1configured with: /vol/gnu/src/gcc/gcc-3.0-branch/configure --prefix=/vol/gcc --with-local-prefix=/vol/gcc --enable-shared --disable-nls alpha-dec-osf5.1How-To-Repeat:make check on systems that lack static libraries",RESOLVED          FIXED      
2877,Benjamin Kosnik,numeric_limits<wchar_t> specialization missing,"std::numeric_limits<> is not specialized for wchar_tRelease:gcc version 3.0 20010511 (prerelease)Environment:Linux 2.4.4 on x86, glibc 2.2.3How-To-Repeat:#include <limits>#include <iostream>int main(){  std::cout << std::numeric_limits<wchar_t>::is_specialized << std::endl;}",RESOLVED          FIXED      
2897,Benjamin Kosnik,Segmentation fault by calling methods of ifstream,"I have build a little program to so some wild stuff.In this routine I am using ifstream, such as seekg()and so on as given in several examples.And on my Linux it works quite well, but on Solaris 2.6 every call to such routines leads to a segmentation fault.The ddd tells:Program received signal SIGSEGV, Segmentation fault.0xff2c5934 in _malloc_unlocked ()and backtrace show me this:...in filebuf::seekoff () at fileops.c: 454in _IO_doallocbuf () at genops.c: 322in filebuf::doallocate () at filebuf.cc:151in _IO_file_doallocate () at  filedoalloc.c: 102in malloc ()in _malloc_unlocked ()Here follows he code snapshot:  ifstream eingabe(dateiname);  if (!eingabe) {    cerr << ""Datei '"" << dateiname << ""' konnte nicht geoeffnet werden!\n"";cerr.flush();    exit(5);  }  //cerr << ""Position: "" << eingabe.tellg() << ""\n""; cerr.flush();    // If you undocument the upper line you will get a segmentation fault!  links = 0;  eingabe.seekg(0,ios::end);    // Here also! Hope, you are able to fix this bug!Release:2.95.2Environment:sparc-sun-solaris2.6",RESOLVED          FIXED      
2931,Benjamin Kosnik,Link errors (undef. __gxx_personality_v0) during libstdc++-v3/configure,"During libstdc++-v3/configure many tests fail (i.e., strtoll, strtoull, llabs, lldiv, atoll, lldiv_t, wcstoll, wcstoull)due to a link error (undefined reference to `__gxx_personality_v0') and the support for long long ends up being (wrongly) disabled.For example:configure:3183: checking for strtollconfigure:3214: /home/paolo/Gcc-Test/gcc-build-20010521/gcc/xgcc -B/home/paolo/Gcc-Test/gcc-build-20010521/gcc/ -nostdinc++  -L/home/paolo/Gcc-Test/gcc-build-20010521/i686-pc-linux-gnu/libstdc++-v3/src -L/home/paolo/Gcc-Test/gcc-build-20010521/i686-pc-linux-gnu/libstdc++-v3/src/.libs -B/usr/local/gcc/i686-pc-linux-gnu/bin/ -B/usr/local/gcc/i686-pc-linux-gnu/lib/ -isystem /usr/local/gcc/i686-pc-linux-gnu/include -o conftest -g -O2 -fvtable-thunks -D_GNU_SOURCE   conftest.C  1>&5cc1plus: warning: -fvtable-thunks is no longer supported/tmp/ccwmt8Jq.o: In function `main':/home/paolo/Gcc-Test/gcc-build-20010521/i686-pc-linux-gnu/libstdc++-v3/configure:3211: undefined reference to `__gxx_personality_v0'collect2: ld returned 1 exit statusconfigure: failed program was:#line 3188 ""configure""#include ""confdefs.h""/* System header to define __stub macros and hopefully few prototypes,    which can conflict with char strtoll(); below.  */#include <assert.h>/* Override any gcc2 internal prototype to avoid an error.  */#ifdef __cplusplusextern ""C""#endif/* We use char because int might match the return type of a gcc2    builtin and then its argument prototype would still apply.  */char strtoll();int main() {/* The GNU C library defines this for functions which it implements    to always fail with ENOSYS.  Some functions are actually named    something starting with __ and the normal name is an alias.  */#if defined (__stub_strtoll) || defined (__stub___strtoll)choke me#elsestrtoll();#endif; return 0; }Release:gcc-20010521Environment:i686-linux2.4.4-glibc2.2.3-binutils2.11No special settings in configure beyond a --prefix=/usr/local/gcc.How-To-Repeat:gcc-2001514 positively checks for those functions.",RESOLVED          FIXED      
2970,Benjamin Kosnik,complex inserter with extraneous 'ends',"In the implementation of operator<< for complex<>, there appears to be an extraneous 'ends'.In line 86 of complex_io.cc is this line:__s << '(' << __x.real() << "","" << __x.imag() << ')' << ends;This will actually write ""(x,y)\0"" to the stringbuffer, then the same to the output stream.  This bug was most likely being hidden by bug #2830.Also note that this 'ends' does not appear in the Standard (or at least the last public draft) in 26.2.6.Release:cvs gcc 5-26-2001Environment:Looking at source code...How-To-Repeat:Observe line 86 of complex_io.cc",RESOLVED          FIXED      
2976,Benjamin Kosnik,problem with compiling std::getline,"gcc gives errors for the source below.Release:3.0 20010525 (prerelease)Environment:System: Linux karma 2.2.16-22 #1 Tue Aug 22 16:49:06 EDT 2000 i686 unknownArchitecture: i686	host: i686-pc-linux-gnubuild: i686-pc-linux-gnutarget: i686-pc-linux-gnuconfigured with: ../egcs/configure --prefix=/usr/local/egcs --enable-threads=posix --enable-long-longHow-To-Repeat:---------------------------------------------------------------------#include <string>#include <istream>void foo (std::istream& s){  std::string line;  std::getline (s, line);}---------------------------------------------------------------------",RESOLVED          FIXED      
2977,Benjamin Kosnik,string.h doesn't always inject names into std::,"The program below doesn't compile: it appears that when used afteran #include <cstring>, then #include <string.h> doesn't get thenames injected into std::, as required by the standard.gcc 2.95 compiles the example below without complaint, so thiscould be considered a regression.Reversing the order of the inclusions below makes the examplecompile, as does adding a `using namespace std;'.  (Note, however,that if one does _both_ of these, one gets a complaint about an ambiguouscall to strchr.)Release:3.0 20010525 (prerelease)Environment:System: Linux karma 2.2.16-22 #1 Tue Aug 22 16:49:06 EDT 2000 i686 unknownArchitecture: i686	host: i686-pc-linux-gnubuild: i686-pc-linux-gnutarget: i686-pc-linux-gnuconfigured with: ../egcs/configure --prefix=/usr/local/egcs --enable-threads=posix --enable-long-longHow-To-Repeat:--------------------------------------------------------------------------#include <cstring>#include <string.h>const char* foo (const char* s){  return strchr (s, 'a');}--------------------------------------------------------------------------$ g++ -c x.ccx.cc: In function `const char* foo(const char*)':x.cc:6: `strchr' undeclared (first use this function)x.cc:6: (Each undeclared identifier is reported only once for each function it    appears in.)",RESOLVED          FIXED      
2985,Benjamin Kosnik,inserter and extractor for std::complex can only be used on simple streams.,"The inserter and extractor for complex<> cannot be used for streams other then ostream (basic_ostream<char, char_traits<char> >) and istream (basic_istream<char, char_traits<char> >).The reason for this is that the template definition for these operators lives in the implementation file only, so these operators cannot be implicitly instantiated from another translation unit, resulting in final link errors due to unresolved references.Release:gcc-3_0-branch 2001-05-28Environment:online compilerHow-To-Repeat:#include <complex> // for std::complex#include <string> // for std::char_traits<char> definition#include <sstream> // for std::basic_ostringstream#include <iostream> // for std::coutstruct my_char_traits : public std::char_traits<char>{};typedef std::basic_ostringstream<char, my_char_traits> my_sstream;int main(){my_sstream sstr;std::complex<double> x( 3, 4 );sstr << x; // this should instantiate an inserter for writing to my_sstreamstd::cout << sstr.str().c_str();return 0;}",RESOLVED          FIXED      
2992,Benjamin Kosnik,3.0: string functions not always accessible,"Regression from 2.95.2.Accessibility of standard C string functions (strlen etc) depends on the include file order.If <string.h> is included before <cstring>, everythingworks fine, but if after, the compiler says that functionsare undeclared.It seems to happen only if the code using the string functions is in a namespace, like in the example code.Release:gcc version 3.0 20010525 (prerelease)Environment:i686-pc-linux-gnu (RedHat 6.2)How-To-Repeat:$ /usr/local/gcc3/bin/g++ -c -v bug.ccReading specs from /usr/local/gcc3/lib/gcc-lib/i686-pc-linux-gnu/3.0/specsConfigured with: ../gcc-3.0-branch/configure --with-gcc-version-trigger=/work/tot/gcc/3.0/gcc-3.0-branch/gcc/version.c --host=i686-pc-linux-gnu --prefix=/usr/local/gcc3 --enable-version-specific-runtime-libs --enable-long-longThread model: singlegcc version 3.0 20010525 (prerelease) /usr/local/gcc3/lib/gcc-lib/i686-pc-linux-gnu/3.0/cc1plus -v -D__GNUC__=3 -D__GNUC_MINOR__=0 -D__GNUC_PATCHLEVEL__=0 -D__ELF__ -Dunix -Dlinux -D__ELF__ -D__unix__ -D__linux__ -D__unix -D__linux -Asystem=posix -D__STDC_HOSTED__=1 -Acpu=i386 -Amachine=i386 -Di386 -D__i386 -D__i386__ -D__tune_i686__ -D__tune_pentiumpro__ bug.cc -D__GNUG__=3 -D_GNU_SOURCE -D__GXX_DEPRECATED -D__EXCEPTIONS -D__GXX_ABI_VERSION=100 -quiet -dumpbase bug.cc -version -o /tmp/ccpHgH6g.sGNU CPP version 3.0 20010525 (prerelease) (cpplib) (i386 Linux/ELF)GNU C++ version 3.0 20010525 (prerelease) (i686-pc-linux-gnu)	compiled by GNU C version 3.0 20010525 (prerelease).#include ""..."" search starts here:#include <...> search starts here: /usr/local/gcc3/lib/gcc-lib/i686-pc-linux-gnu/3.0/include/g++ /usr/local/gcc3/lib/gcc-lib/i686-pc-linux-gnu/3.0/include/g++/i686-pc-linux-gnu /usr/local/gcc3/lib/gcc-lib/i686-pc-linux-gnu/3.0/include/g++/backward /usr/local/include /usr/local/gcc3/lib/gcc-lib/i686-pc-linux-gnu/3.0/include /usr/local/gcc3/i686-pc-linux-gnu/include /usr/includeEnd of search list.bug.cc: In function `int bar::foo(const char*)':bug.cc:8: `strlen' undeclared (first use this function)bug.cc:8: (Each undeclared identifier is reported only once for each function    it appears in.)",RESOLVED          FIXED      
2997,Benjamin Kosnik,size_t missing std:: in bitset.cc,"bitset.cc uses size_t unqualified.Unlike all other implementation files under libstdc++-v3/src, this filedoes not live in namespace std, but instead defines each symbolby qualifying with std::.However, of the 7 uses of size_t, none are qualified.Release:cvs 05292001Environment:source codeHow-To-Repeat:look at libstdc++-v3/src/bitset.cc",RESOLVED          FIXED      
3017,Benjamin Kosnik,locale_facets.h is missing some methods,"Attached is a tweak to make locale_facets.h remember to declare some methods that are required to be present for the general ctype class.  The change isn't necessarily complete, however.This quiets down compile-time issues, yet at link time many of them come up as undefined due to their absence in the appropriate instantiation files.  That's probably the second half of really fixing this.  But this is at least a piece of the puzzle. :)BRelease:egcs3 src tree",RESOLVED          FIXED      
3052,Benjamin Kosnik,3.0 unresolved ref to sqrtf,"calling sqrt (float), gives an unresolved sqrtfReading specs from /local/nathan/devel/lib/gcc-lib/sparc-sun-solaris2.7/3.0/specsConfigured with: ../egcs/configure --prefix=/local/nathan/devel --program-transform-name=s,\\(.*\\),devel-\\1, --with-as=/usr/local/egcs/sparc-SunOS-5/bin/as --with-ld=/usr/local/egcs/sparc-SunOS-5/bin/ldThread model: posixgcc version 3.0 20010605 (prerelease) /local/nathan/devel/lib/gcc-lib/sparc-sun-solaris2.7/3.0/cpp0 -lang-c++ -D_GNU_SOURCE -D__GNUG__=3 -D__GXX_DEPRECATED -D__EXCEPTIONS -D__GXX_ABI_VERSION=100 -v -D__GNUC__=3 -D__GNUC_MINOR__=0 -D__GNUC_PATCHLEVEL__=0 -Dsparc -Dsun -Dunix -D__svr4__ -D__SVR4 -D__sparc__ -D__sun__ -D__unix__ -D__svr4__ -D__SVR4 -D__sparc -D__sun -D__unix -Asystem=unix -Asystem=svr4 -D__STDC_HOSTED__=1 -D_XOPEN_SOURCE=500 -D_LARGEFILE_SOURCE=1 -D_LARGEFILE64_SOURCE=1 -D__EXTENSIONS__ -D__GCC_NEW_VARARGS__ -Acpu=sparc -Amachine=sparc foo.cc foo.iiGNU CPP version 3.0 20010605 (prerelease) (cpplib) (sparc)#include ""..."" search starts here:#include <...> search starts here: /local/nathan/devel/include/g++-v3 /local/nathan/devel/include/g++-v3/sparc-sun-solaris2.7 /local/nathan/devel/include/g++-v3/backward /usr/local/include /local/nathan/devel/lib/gcc-lib/sparc-sun-solaris2.7/3.0/include /local/nathan/devel/sparc-sun-solaris2.7/include /usr/includeEnd of search list. /local/nathan/devel/lib/gcc-lib/sparc-sun-solaris2.7/3.0/cc1plus -fpreprocessed foo.ii -quiet -dumpbase foo.cc -version -o foo.sGNU CPP version 3.0 20010605 (prerelease) (cpplib) (sparc)GNU C++ version 3.0 20010605 (prerelease) (sparc-sun-solaris2.7)        compiled by GNU C version 3.0 20010605 (prerelease). /usr/local/egcs/sparc-SunOS-5/bin/as --traditional-format -V -Qy -s -o foo.o foo.sGNU assembler version 010604 (sparc-sun-solaris2.7) using BFD version 010604 /local/nathan/devel/lib/gcc-lib/sparc-sun-solaris2.7/3.0/collect2 -V -Y P,/usr/ccs/lib:/usr/lib -Qy /local/nathan/devel/lib/gcc-lib/sparc-sun-solaris2.7/3.0/crt1.o /local/nathan/devel/lib/gcc-lib/sparc-sun-solaris2.7/3.0/crti.o /usr/ccs/lib/values-Xa.o /local/nathan/devel/lib/gcc-lib/sparc-sun-solaris2.7/3.0/crtbegin.o -L/local/nathan/devel/lib/gcc-lib/sparc-sun-solaris2.7/3.0 -L/usr/ccs/bin -L/usr/ccs/lib -L/local/nathan/devel/lib/gcc-lib/sparc-sun-solaris2.7/3.0/../../.. foo.o -lstdc++ -lm -lgcc_s -lgcc -lc -lgcc_s -lgcc /local/nathan/devel/lib/gcc-lib/sparc-sun-solaris2.7/3.0/crtend.o /local/nathan/devel/lib/gcc-lib/sparc-sun-solaris2.7/3.0/crtn.ofoo.o: In function `std::sqrt(float)':foo.o(.gnu.linkonce.t._ZSt4sqrtf+0x30): undefined reference to `sqrtf'GNU ld version 010604 (with BFD 010604)  Supported emulations:   elf32_sparc   elf64_sparccollect2: ld returned 1 exit statusRelease:3.0 branch 20010605Environment:sparc-sun-solaris2.7",RESOLVED          FIXED      
3070,Benjamin Kosnik,unresolved fsqrt at link using sqrt and <cmath>,Error linking cpp modules that use <cmath> and sqrt./tmp/ccg374LU.o: In function `std::sqrt(double)':/tmp/ccg374LU.o(.gnu.linkonce.t._ZSt4sqrtd+0x2a): undefined reference to `fsqrt'collect2: ld returned 1 exit statusRelease:gcc version 3.1 20010605 (experimental)Environment:i686-pc-linux-gnuRed Hat 7.1How-To-Repeat:gcc test.cpp,RESOLVED          FIXED      
3094,Benjamin Kosnik,Including <string.h> fails to bring strlen() into global namespace,"If I #include <vector>, and then #include <string.h>(note: the order is important), strlen() is not brought into the global namespace.  In How-to-RepeatI give an example of a legal program that fails becauseof this.Release:Compiler: gcc version 3.0 20010608 (prerelease) . Library:  __GLIBCPP__ 20010517Environment:i686-pc-linux-gnu (Red Hat distribution)How-To-Repeat:[austern@isolde tmp]$ cat strlen.cc#include <vector>#include <string.h>int main(){  int n = strlen(""abc"");}[austern@isolde tmp]$ /opt/gcc3/bin/g++ strlen.ccstrlen.cc: In function `int main()':strlen.cc:6: `strlen' undeclared (first use this function)strlen.cc:6: (Each undeclared identifier is reported only once for each    function it appears in.)[austern@isolde tmp]$ I'm including the preprocessed source (compressedand uuencoded) as a file attachment.",RESOLVED          FIXED      
3111,Benjamin Kosnik,Demangler in libiberty.a is broken,"A qualifier 'K' results rather stupidly in a 'const'being appended to whatever the following type.  Thedemangler doesn't take into account that types existof a 'prefix' and a 'postfix' part, where the 'const'needs to be added in between.Example:/usr/src/gcc/gcc-cvs-3.0/libiberty>gcc-3.0 -DSTANDALONE_DEMANGLER -I../include cp-demangle.c dyn-string.c xmalloc.c xexit.c -o c++filtcp-demangle.c: In function `demangle_char':cp-demangle.c:968: warning: assignment makes pointer from integer without a cast/usr/src/gcc/gcc-cvs-3.0/libiberty>./c++filt _Z1fKPFiiEf(int (*)(int) const)Which should have beenf(int (* const)(int))This could be considered as a regression from 2.95.3as this does handle the 'C' qualifier correctly.For example:/usr/src/gcc/gcc-2.95.3/libiberty>../../gcc-2.95.3-objdir/gcc/c++filt __1ACPFi_iA::A(int (*const)(int))Release:3.0",RESOLVED          FIXED      
3113,Benjamin Kosnik,DR 109: missing binders for non-const sequence elements,see:http://anubis.dkuug.dk/jtc1/sc22/wg21/docs/lwg-active.html#109Release:cvs 20010610Environment:sourceHow-To-Repeat:look in include/bits/stl_functional.h lines 202 and 227,RESOLVED          FIXED      
3114,Benjamin Kosnik,DR 129: ostream::seekp() does not report an error,"see:http://anubis.dkuug.dk/jtc1/sc22/wg21/docs/lwg-defects.html#129Release:cvs 20010610Environment:sourceHow-To-Repeat:look at include/bits/ostream.tcc line 409, notice that no error reporting is done.",RESOLVED          FIXED      
3126,Benjamin Kosnik,DR 5: std::string::compare,seehttp://anubis.dkuug.dk/jtc1/sc22/wg21/docs/lwg-defects.html#5Release:20010604 snapshotEnvironment:sourceHow-To-Repeat:look at include/bits/basic_string.h line 846.,RESOLVED          FIXED      
3129,Benjamin Kosnik,std::ios_base::_M_grow_words vs. DR 41,"according to:http://anubis.dkhttp://anubis.dkuug.dk/jtc1/sc22/wg21/docs/lwg-defects.html#41uug.dk/jtc1/sc22/wg21/docs/lwg-defects.html#41iword/pword should set badbit if they fail and if*this is an object of type basic_ios<>.However, in include/bits/ios_base.h, iword and pword canonly fail if _M_grow_words fails.In src/ios.cc, _M_grow_words only returns an empty structurewhen it fails.There are comments suggesting that this issue was known, butthe implementation was not completed.Release:20010604 snapshotEnvironment:sourceHow-To-Repeat:look at line 223 of src/ios.cc.",RESOLVED          FIXED      
3137,Benjamin Kosnik,v3 build fails due to compile error in complex_io.cc,See <http://gcc.gnu.org/ml/gcc-patches/2001-06/msg00531.html>.Release:gcc 3.0 prereleaseEnvironment:hppa1.1-hp-hpux10.20How-To-Repeat:Build v3.,RESOLVED          FIXED      
3139,Benjamin Kosnik,DR 184: numeric_limits<bool> problems,see:http://anubis.dkuug.dk/jtc1/sc22/wg21/docs/lwg-defects.html#184Release:20010612 cvsEnvironment:sourceHow-To-Repeat:observe the speicialization on line 112 of include/bits/limits_generic.h,RESOLVED          FIXED      
3140,Benjamin Kosnik,DR 186: bitset::set() second parameter should be bool,seehttp://anubis.dkuug.dk/jtc1/sc22/wg21/docs/lwg-defects.html#186Release:20010612 cvsEnvironment:sourceHow-To-Repeat:observe line 561 in include/bits/std_bitset.h,RESOLVED          FIXED      
3141,Benjamin Kosnik,DR 243: basic_istream::get and getline when sentry reports failure,"seehttp://anubis.dkuug.dk/jtc1/sc22/wg21/docs/lwg-defects.html#243Release:20010612 cvsEnvironment:sourceHow-To-Repeat:observe istream::get(char_type* __s, streamsize __n, char_type __delim)in line 536 of include/bits/istream.tccnote that on line 573: *__s = char_type(NULL);observe istream::getline(char_type* __s, streamsize __n, char_type __delim)in line 627 of include/bits/istream.tccnote on line 673: *__s = char_type(NULL);",RESOLVED          FIXED      
3142,Benjamin Kosnik,DR 251: basic_stringbuf missing allocator_type,seehttp://anubis.dkuug.dk/jtc1/sc22/wg21/docs/lwg-defects.html#251Release:20010612 cvsEnvironment:sourceHow-To-Repeat:observe std::basic_stringbuf in line 45 of include/bits/std_sstream.hnotice the lack of typedef _Alloc allocator_type;,RESOLVED          FIXED      
3149,Benjamin Kosnik,Ready 275: Wrong type in num_get::get() overloads,see:http://anubis.dkuug.dk/jtc1/sc22/wg21/docs/lwg-active.html#275Release:20010605 cvsEnvironment:sourceHow-To-Repeat:observe include/bits/local_facets.h line 584.Note that the version for float& already exists on line 630.,RESOLVED          FIXED      
3150,Benjamin Kosnik,"Ready 266: ~bad_exception,~bad_cast, ~bad_alloc, ~bad_typeid",see:http://anubis.dkuug.dk/jtc1/sc22/wg21/docs/lwg-active.html#266Release:20010605 cvsEnvironment:sourceHow-To-Repeat:observe the declarations for these destructors inlibsupc++/typeinfo - line 119 and 126 (~bad_cast and ~bad_typeid)libsupc++/new - line 45 (~bad_alloc)libsupc++/exception - line 42 (~bad_exception)and the definitions inlibsupc++/tinfo.cc line 42 and 43 (~bad_cast and ~bad_typeid)libsupc++/new_handler.cc line 46 (~bad_alloc)libsupc++/eh_exception.cc line 36 (~bad_exception),RESOLVED          FIXED      
3151,Benjamin Kosnik,Ready 117: basic_ostream uses nonexistent num_put member functions,see:http://anubis.dkuug.dk/jtc1/sc22/wg21/docs/lwg-active.html#117Release:20010605 cvsEnvironment:sourceHow-To-Repeat:observe include/bits/std_ostream.hline 98: operator<<(short)line 109: operator<<(unsigned short)line 113: operator<<(int)line 124: operator<<(unsigned int)line 139: operator<<(float),RESOLVED          FIXED      
3174,Benjamin Kosnik,sparc-rtems (also seen on i386-rtems),"Configure fails to use just built compiler for CXXCPP,based on the output below, I think it is using the nativeinstall for CXXCPP instead of the just built cross.I added a ""set -x"" above the test in libstdc++-v3/configureand some echos and get this output:appending configuration tag ""CXX"" to libtoolchecking for GNU make... make+ echo cross_compiling=cross_compiling=+ echo CXXCPP=/lib/cppCXXCPP=/lib/cpp+ echo CPPFLAGS=CPPFLAGS=+ echo CXX=/usr3/ftp_archive/gnu/gcc/ss/b1/b-sparc/gcc/xgcc -B/usr3/ftp_archive/gnu/gcc/ss/b1/b-sparc/gcc/ -nostdinc++  -L/usr3/ftp_archive/gnu/gcc/ss/b1/b-sparc/sparc-rtems/libstdc++-v3/src -L/usr3/ftp_archive/gnu/gcc/ss/b1/b-sparc/sparc-rtems/libstdc++-v3/src/.libs -nostdinc -B/usr3/ftp_archive/gnu/gcc/ss/b1/b-sparc/sparc-rtems/newlib/ -isystem /usr3/ftp_archive/gnu/gcc/ss/b1/b-sparc/sparc-rtems/newlib/targ-include -isystem /usr3/ftp_archive/gnu/gcc/ss/b1/gcc-3.0-20010611/newlib/libc/include -B/opt/rtems/sparc-rtems/bin/ -B/opt/rtems/sparc-rtems/lib/ -isystem /opt/rtems/sparc-rtems/includeCXX=/usr3/ftp_archive/gnu/gcc/ss/b1/b-sparc/gcc/xgcc -B/usr3/ftp_archive/gnu/gcc/ss/b1/b-sparc/gcc/ -nostdinc++  -L/usr3/ftp_archive/gnu/gcc/ss/b1/b-sparc/sparc-rtems/libstdc++-v3/src -L/usr3/ftp_archive/gnu/gcc/ss/b1/b-sparc/sparc-rtems/libstdc++-v3/src/.libs -nostdinc -B/usr3/ftp_archive/gnu/gcc/ss/b1/b-sparc/sparc-rtems/newlib/ -isystem /usr3/ftp_archive/gnu/gcc/ss/b1/b-sparc/sparc-rtems/newlib/targ-include -isystem /usr3/ftp_archive/gnu/gcc/ss/b1/gcc-3.0-20010611/newlib/libc/include -B/opt/rtems/sparc-rtems/bin/ -B/opt/rtems/sparc-rtems/lib/ -isystem /opt/rtems/sparc-rtems/include+ test ! -f stamp-sanity-compiler+ echo -n checking for g++ that will successfully compile libstdc++-v3...checking for g++ that will successfully compile libstdc++-v3... + echo configure:2590: checking for g++ that will successfully compile libstdc++-v3+ ac_ext=C+ ac_cpp=$CXXCPP $CPPFLAGS+ ac_compile=${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5+ ac_link=${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5+ cross_compiling=+ cat+ egrep ok+ rm -rf conftest.C+ echo configure: error: please upgrade to GCC 3.0 or aboveconfigure: error: please upgrade to GCC 3.0 or aboveRelease:gcc-3.0-20010611Environment:RedHat GNU/Linux 6.2How-To-Repeat:Unfortunately, someone may have to have some patches butI believe that this can be compiled with the followingconfigure line:+ ../gcc-3.0-20010611/configure --target=sparc-rtems --with-gnu-as --with-gnu-ld --with-newlib --verbose --enable-threads --prefix=/opt/rtems",RESOLVED          FIXED      
3197,Benjamin Kosnik,Segfault in basic_ios<>::widen,"The attached program dies with an segmentation fault during	initialization (see call stack below).  The program works	with older gcc versions.	I have tried a compiler configured with --disable-c-mbchars and	have used different settings of LANG and LC_*, including unsetting	them without success.Call stack:#0  ?? ()#1  std::basic_ios<char, std::char_traits<char> >::widen(char) const ()  at /usr/local/include/g++-v3/bits/basic_ios.tcc:99#2  std::basic_ios<char, std::char_traits<char> >::init(std::basic_streambuf<char, std::char_traits<char> >*) ()#3  std::ios_base::Init::_S_ios_create(bool) (__sync=232)  at ../../../../gcc-3.0-20010614/libstdc++-v3/include/bits/std_ostream.h:67#4  std::ios_base::Init::Init() (this=0x32a54)  at ../../../../gcc-3.0-20010614/libstdc++-v3/src/ios.cc:203#5  __static_initialization_and_destruction_0(int, int) ()#6  _GLOBAL__I_verbose ()#7  __do_global_ctors_aux ()#8  _init ()(gdb) frame 1#1  0x18a78 in _ZNKSt9basic_iosIcSt11char_traitsIcEE5widenEc (this=0xff37fa3c,     __c=32 ' ') at /usr/local/include/g++-v3/bits/basic_ios.tcc:9999          { return _M_ios_fctype->widen(__c); }(gdb) print *_M_ios_fctype$1 = {<__ctype_abstract_base<char>> = {<facet> = {_vptr. = 0xff375c40,       _M_references = 0}, <ctype_base> = {static upper = 1, static lower = 2,       static alpha = 16384, static digit = 4, static xdigit = 128,       static space = 8, static print = 32768, static graph = 8192,       static cntrl = 32, static punct = 16,       static alnum = 16388}, <No data fields>}, _M_del = false,   _M_toupper = @0xff2b7268, _M_tolower = @0xff2b726c, _M_ctable = @0xffbeee84,   _M_table = 0xff2a05d8, static id = {_M_index = 2, static _S_highwater = 13},   static table_size = 256}Release:3.0 20010614 (prerelease)Environment:System: SunOS memorum 5.7 Generic_106541-08 sun4u sparc SUNW,Ultra-1Architecture: sun4	host: sparc-sun-solaris2.7build: sparc-sun-solaris2.7target: sparc-sun-solaris2.7configured with: ../gcc-3.0-20010614/configure --enable-languages=c,c++ --with-gnu-ld --with-ld=/usr/local/sparc-sun-solaris2.7/bin/ld --with-gnu-as --with-as=/usr/local/sparc-sun-solaris2.7/bin/as --disable-threads --disable-nlsHow-To-Repeat:	g++ -O0 -o makedep	./makedep",RESOLVED          FIXED      
3198,Benjamin Kosnik,Missing wide char functions crashes compile,"The current CVS refuses to compile on Debian 2.2, as a lotof functions are missing.  The attached patch hides theproblem by moving the missing functions into a #if 0 blockin libstdc++-v3/include/c_std/bits/std_cwchar.h.The missing symbols are: fgetwc, fgetws, fputwc, fputws,fwide, fwprintf, fwscanf, getwc, getwchar, putwc, putwcharswprintf, swscanf, ungetwc, vfwprintf, vfwscanf, vswprintfvswscanf, vwprintf, vwscanf, wcsftime, wprintf, wscanfRelease:gcc 3.0 2001-06-15Environment:Debian 2.2",RESOLVED          FIXED      
3269,Benjamin Kosnik,"Inefficient stream output, one 'write' call per character","When going from the 20010507 snapshot to gcc 3.0, I noticed a severe ostream performance degradation as chunks of characters are now being written individually, one syscall per char. I have not seen a previous report on this issue, but then I do not find my way around at all, so please bear with me if this has already been reported. Reading specs from /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.0/specsConfigured with: ../configure --enable-long-long --enable-threads --enable-languages=c++ --without-newlib (same result if --with-newlib)Thread model: posixgcc version 3.0$ cat a.cc#include <iostream>main (int argc, char** argv){   std::cerr << ""Hello world"" << std::endl;}   $ g++ a.cc$ strace a.out 2>&1 | egrep write\(2'write(2, ""H"", 1)                        = 1write(2, ""e"", 1)                        = 1write(2, ""l"", 1)                        = 1write(2, ""l"", 1)                        = 1write(2, ""o"", 1)                        = 1write(2, "" "", 1)                        = 1write(2, ""w"", 1)                        = 1write(2, ""o"", 1)                        = 1write(2, ""r"", 1)                        = 1write(2, ""l"", 1)                        = 1write(2, ""d"", 1)                        = 1write(2, ""\n"", 1$It worked better in the 20010507 snapshot:Reading specs from /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.0/specsConfigured with: ../configure --enable-long-long --enable-threads --enable-languages=c++ --without-newlibThread model: posixgcc version 3.0 20010507 (prerelease)$ g++ a.cc$ strace a.out 2>&1 | grep writewrite(5, ""Hello world"", 11)             = 11write(5, ""\n"", 1$Release:3.0Environment:Red Hat 7.0 and 7.1Reading specs from /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.0/specsConfigured with: ../configure --enable-long-long --enable-threads --enable-languages=c++ --without-newlibThread model: posixgcc version 3.0",RESOLVED          FIXED      
3272,Benjamin Kosnik,ostream::operator<<(streambuf*) sets EOFBIT to output stream,"ostream::operator<<(streambuf*) sets EOFBIT to output streamA more detailed description, with example and an excerptfrom the stdc++-v3 headers where the bug is locatedis attached (""this_file.cpp"").Release:3.0Environment:Linux linus 2.2.19 #7 SMP Tue Jun 5 10:28:30 EDT 2001 i686 unknownHow-To-Repeat:See instructions in the attached file",RESOLVED          FIXED      
3457,Benjamin Kosnik,enable-version-specific-runtime-libs vs. gxx-include-dir,"configure --enable-version-specific-runtime-libs --gxx-include-dir=PATHgenerates a Makefile where the value of --gxx-include-diris simply ignored. This causes make installto put all C++ include files to the libsubdir/include, whilethe prepocessor looks for them at the specified PATH.This contradicts the INSTALL docs and the behavior of formerreleases (such as 2.95.x)Release:3.0Environment:UltraSPARC, Solaris 2.8How-To-Repeat:configure and install gcc with both options mentioned above",RESOLVED          FIXED      
3593,Benjamin Kosnik,link error when using ofstream,"When I try compile and link a program that contains an std::ofstream object, the linking fails with an undefined reference:> g++ linktest.cxx/tmp/cct0UdsP.o: In function `std::codecvt<char, char, __mbstate_t> const& std::use_facet<std::codecvt<char, char, __mbstate_t> >(std::locale const&)':/tmp/cct0UdsP.o(.gnu.linkonce.t._ZSt9use_facetISt7codecvtIcc11__mbstate_tEERKT_RKSt6locale+0x7): undefined reference to `std::codecvt<char, char, __mbstate_t>::id'collect2: ld returned 1 exit statusI'm using binutils 2.11.2.Grepping nm output for libstdc++.so returns:00061468 B std::codecvt<char, char, mbstate_t>::idRelease:3.0Environment:i686-pc-linux-gnuHow-To-Repeat:#include <fstream>int main(){ std::ofstream ofs; }",RESOLVED          FIXED      
3646,Benjamin Kosnik,Re: [libstdc++/3052] 3.0 unresolved ref to sqrtf,"While the problem for the functions with floats has apparently been fixed with present 3.0.1 CVS, it persists for long double functions. For the appended small file I get linker errors complaining about missing functions sqrtl, cosl and sinl.  Fix: probably just like for sqrtf, cosf and sinf.  Regards   Wolfgang  var/gcc-bugs> cat b.cc #include <cmath> int main () {   long double d;   std::sqrt(d);   std::cos(d);   std::sin(d); };  var/gcc-bugs> c++ b.cc /var/tmp/cc0DGVwA.o: In function `std::cos(long double)': /var/tmp/cc0DGVwA.o(.gnu.linkonce.t._ZSt3cose+0x2c): undefined reference to `cosl' /var/tmp/cc0DGVwA.o: In function `std::sin(long double)': /var/tmp/cc0DGVwA.o(.gnu.linkonce.t._ZSt3sine+0x2c): undefined reference to `sinl' /var/tmp/cc0DGVwA.o: In function `std::sqrt(long double)': /var/tmp/cc0DGVwA.o(.gnu.linkonce.t._ZSt4sqrte+0xb8): undefined reference to `sqrtl' collect2: ld returned 1 exit status  var/gcc-bugs> c++ -v Reading specs from /home/people/wolf/Config/sparc-sun-solaris2.7/gcc-ss/lib/gcc-lib/sparc-sun-solaris2.7/3.0.1/specs Configured with: ../gcc/configure --prefix=/home/people/wolf/Config/sparc-sun-solaris2.7/gcc-ss --with-gnu-ld --with-gnu-as --with-ld=/usr/local/bin/ld --with-as=/usr/local/bin/as Thread model: posix gcc version 3.0.1 20010710 (prerelease)   ------------------------------------------------------------------------- Wolfgang Bangerth          email: wolfgang.bangerth@iwr.uni-heidelberg.de                              www: http://gaia.iwr.uni-heidelberg.de/~wolfRelease:unknown",RESOLVED          FIXED      
3655,Benjamin Kosnik,"Subject: stream bug with ""0xBlabla"" strings in internal mode","The bug was reproduced with the following g++ :gcc version 3.1 20010624 (experimental) - cvsgcc version 3.1 20010707 (experimental) - cvsgcc version 3.0 20010402 (Debian prerelease)i686-pc-linux-gnuand is not present ingcc version 2.95.4 20010319 (Debian prerelease)With the faulty compilers, the resulting string looks like :Trap!ZZZÜø(the 2 last chars vary, clearly comig from improper memory accesses)hth,-- SamRelease:3.0 and 3.1Environment:i686-pc-linux-gnuHow-To-Repeat:#include <cassert>#include <iostream>#include <sstream>int main(){  using namespace std;  stringstream oss;  oss.setf(std::ostream::internal, std::ostream::adjustfield);  oss.width(10);  oss.fill('Z');  oss << ""0xTrap!"";  cout << oss.str() << endl;  assert( oss.str() == ""ZZZ0xTrap!"" );}",RESOLVED          FIXED      
3679,Benjamin Kosnik,Problems with default locale,"According to Josuttis ""The C++ Standard Library"" page 696 -- 697passing an empty string as the name of the locale has a specialmeaning. The default locale from the users's environment is used(determined the environment variable LANG on Linux). But that does not workwith the current libstdc++ implementation. The value of LANG is ignored and the name of Locale1 in the program tgl is set to the emptystring which is wrong. Explicitly importing the German locale as inLocale2 works though.Release:3.1 20010710 (experimental)Environment:System: Linux kiste 2.4.6 #6 Wed Jul 11 02:21:23 CEST 2001 i686 unknownArchitecture: i686GNU ld version 2.11.90.0.23 (with BFD 2.11.90.0.23)SuSE 7.1host: i686-pc-linux-gnubuild: i686-pc-linux-gnutarget: i686-pc-linux-gnuconfigured with: ../gcc/configure --enable-shared --disable-nls --enable-threads=posix --enable-clocale=gnu --enable-languages=c,c++,f77,objcHow-To-Repeat:Source code tgl.C#include <iostream>#include <locale>using namespace std;int main(){    locale Locale1("""");    cout.imbue(Locale1);    cout << Locale1.name() << endl;    locale Locale2(""de_DE"");    cout.imbue(Locale2);    cout << Locale2.name() << endl;}Compiling tgl.Cg++ -v -o tgl tgl.C -W -WallReading specs from /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1/specsConfigured with: ../gcc/configure --enable-shared --disable-nls --enable-threads=posix --enable-clocale=gnu --enable-languages=c,c++,f77,objcThread model: posixgcc version 3.1 20010710 (experimental) /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1/cc1plus -v -D__GNUC__=3 -D__GNUC_MINOR__=1 -D__GNUC_PATCHLEVEL__=0 -D__ELF__ -Dunix -Dlinux -D__ELF__ -D__unix__ -D__linux__ -D__unix -D__linux -Asystem=posix -D__NO_INLINE__ -D__STDC_HOSTED__=1 -W -Wall -D_GNU_SOURCE -Acpu=i386 -Amachine=i386 -Di386 -D__i386 -D__i386__ -D__tune_i686__ -D__tune_pentiumpro__ tgl.C -D__GNUG__=3 -D__DEPRECATED -D__EXCEPTIONS -D__GXX_ABI_VERSION=100 -quiet -dumpbase tgl.C -W -Wall -version -o /tmp/ccMPOA3S.sGNU CPP version 3.1 20010710 (experimental) (cpplib) (i386 Linux/ELF)GNU C++ version 3.1 20010710 (experimental) (i686-pc-linux-gnu)	compiled by GNU C version 3.1 20010710 (experimental).ignoring nonexistent directory ""/usr/local/i686-pc-linux-gnu/include""#include ""..."" search starts here:#include <...> search starts here: /usr/local/include/g++-v3 /usr/local/include/g++-v3/i686-pc-linux-gnu /usr/local/include/g++-v3/backward /usr/local/include /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1/include /usr/includeEnd of search list. /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1/../../../../i686-pc-linux-gnu/bin/as -V -Qy -o /tmp/cc7kLbiW.o /tmp/ccMPOA3S.sGNU assembler version 2.11.90.0.23 (i686-pc-linux-gnu) using BFD version 2.11.90.0.23Running tglLANG=de_DE ./tglde_DE",RESOLVED          FIXED      
3740,Benjamin Kosnik,typo in ostringstream constructor,"in line 280 of bits/std_sstream.h I see:   basic_ostringstream(const __string_type __str,                                         ^^^but for istringstream and stringstream I see:   basic_stringstream(const __string_type& __str,   basic_istringstream(const __string_type& __str,Release:20010716 snapshotEnvironment:source codeHow-To-Repeat:observe line 280 in bits/std_sstream.h",RESOLVED          FIXED      
3860,Benjamin Kosnik,Writing wide string to wide stream segfaults,"attempting to output a wide string to a wide ofstream segfaults, e.g.    std::basic_ofstream<wchar_t> ws( ""t.out"" );    ws << L""hello"" << std::endl;Release:3.0Environment:System: Linux rock 2.2.17-4 #1 Mon Oct 23 15:19:13 EDT 2000 alpha unknownArchitecture: alpha	host: alphaev56-unknown-linux-gnubuild: alphaev56-unknown-linux-gnutarget: alphaev56-unknown-linux-gnuconfigured with: ../gcc-3.0/configure  : (reconfigured) ../gcc-3.0/configure --enable-threads",RESOLVED          FIXED      
3983,Benjamin Kosnik,basic_istringstream<unsigned xxx> causes segfault,"Using an unsigned template parameter with basic_istringstream<>(Eg. unsigned char, unsigned int) causes random program output and segfaults.Release:unknownEnvironment:gcc -vReading specs from /opt/gcc30/lib/gcc-lib/i486-suse-linux/3.0.1/specsConfigured with: ../configure --enable-threads=posix --enable-long-long --prefix=/opt/gcc30 --mandir=/opt/gcc30/man --infodir=/opt/gcc30/info --with-local-prefix=/usr/local --enable-languages=c,c++ --disable-nls --enable-shared --with-system-zlib --host=i486-suse-linux --build=i486-suse-linuxThread model: posixgcc version 3.0.1 20010807 (prerelease)SuSE-Linux-7.2/glibc-2.2.2/Linux-2.4.7How-To-Repeat:Compile and run the program below:----- snip ------#include <sstream>#include <iostream>using namespace std;int main ( ){  int v ;  unsigned char s[2] ;  s[0] = '1';  s[1] = 0;  basic_istringstream<unsigned char> strm(s);  strm >> v ;//  cerr << ""result: "" << v << endl ;  return 0;}----- snip -----g++ -Wall -g -o foo foo.cc./foofoo: (h!@x÷ÿ¿o?@foo: (h!@x÷ÿ¿o?@Speicherzugriffsfehler (core dumped)",RESOLVED          FIXED      
4071,Benjamin Kosnik,"""make install"" installs .../include/g++-v3/Makefile","[I couldn't work out which category/class problems like this should gounder ... there doesn't appear to be an ""install"" class.]Did ""make bootstrap"" as ""normal user"", and ""make install"" as root.I keep a list of all files installed (for later clean-up), and whencross-checking what needed keeping between gcc 3.0 and gcc 3.0.1noticed that    /usr/local/include/g++-v3/Makefileexisted in 3.0.1 and not 3.0.A quick check showed that this was a copy of    <builddir>/i686-pc-linux-gnu/libstdc++-v3/include/MakefileThe install-data-local: rule from that Makefile installs allfiles in the directory (except stamp-*) into .../include/g++-v3;this, of course, includes ""Makefile"".Release:3.0.1Environment:System: Linux derisoft.derived-software.demon.co.uk 2.4.5-5mdk #1 Sat Jun 16 08:08:07 EDT 2001 i686 unknownArchitecture: i686host: i686-pc-linux-gnubuild: i686-pc-linux-gnutarget: i686-pc-linux-gnuconfigured with: ../gcc-3.0.1/configure --prefix=/usr/local --enable-threadsHow-To-Repeat:[./configure in srcdir - you do not see this problemwhen configure is run in $objdir != $srcdir -ljrittle.]make bootstrapmake install(not double checked, but that's what I did to cause it!)",RESOLVED          FIXED      
4083,Benjamin Kosnik,input stream with field width()  set reads too much to std::string,"When I set the width of an input stream and when use operator >> to an std::string, one byte too many is read. I.e""ifs.width(8); ifs >> str;"" reads 8 bytes if str is an std::string but 7 bytes if it's a char *. gcc 2.96 (mandrake) and egcs-2.91.66 do now show this problem.Release:3.0.1Environment:Mandrake Cooker linux install, glibc 2.2.3How-To-Repeat:Compile and run the attached program.",RESOLVED          FIXED      
4145,Benjamin Kosnik,"codecvt<char, char, mbstate_t>::id on solaris, others",http://gcc.gnu.org/ml/gcc-bugs/2001-08/msg00839.htmlRelease:gcc-3Environment:solaris,RESOLVED          FIXED      
4146,Benjamin Kosnik,"input, num_get, regression from 2.95","http://gcc.gnu.org/ml/libstdc++/2001-08/msg00191.htmlIn general, making people wade through 4 files of code to fix a bug is a guarantee of a DOA bug report. If you can simplify this down to one file, or one function, or say 5 lines, your chances of getting it fixed in some sane time schedule go waaaaaaaay up.That being said, I'll try to look at this in the next month or so.-benjaminRelease:gcc-3.xEnvironment:linux",RESOLVED          FIXED      
4246,Benjamin Kosnik,"libstc++-v3 tests std::string::_Rep::_S_{terminal,max_size} undefined","57 of the 67 failing libstdc++-v3 tests on rs6000-ibm-aix4.2.0.0  areof the following formthat is undefined symbols std::string::_Rep::_S_{terminal,max_size}spawn /devel/tmp/gcc-20010903.obj/gcc/g++ -B/devel/tmp/gcc-20010903.obj/gcc/ -nostdinc++ -L/devel/tmp/gcc-20010903.obj/rs6000-ibm-aix4.2.0.0/libstdc++-v3/src -L/devel/tmp/gcc-20010903.obj/rs6000-ibm-aix4.2.0.0/libstdc++-v3/src/.libs -B/usr/local/rs6000-ibm-aix4.2.0.0/bin/ -B/usr/local/rs6000-ibm-aix4.2.0.0/lib/ ld: 0711-317 ERROR: Undefined symbol: std::string::_Rep::_S_terminalld: 0711-317 ERROR: Undefined symbol: std::string::_Rep::_S_max_sizeld: 0711-345 Use the -bloadmap or -bnoquiet option to obtain more information.collect2: ld returned 8 exit statuscompiler exited with status 1output is:ld: 0711-317 ERROR: Undefined symbol: std::string::_Rep::_S_terminalld: 0711-317 ERROR: Undefined symbol: std::string::_Rep::_S_max_sizeld: 0711-345 Use the -bloadmap or -bnoquiet option to obtain more information.collect2: ld returned 8 exit statusFAIL: 19_diagnostics/stdexceptions.cc (test for excess errors)ld: 0711-318 ERROR: Undefined symbols were found.        The following symbols are in error: Symbol                    Inpndx  TY CL Source-File(Object-File) OR Import-File{Shared-object}                              RLD: Address  Section  Rld-type Referencing Symbol ----------------------------------------------------------------------------------------------ld: 0711-317 ERROR: Undefined symbol: std::string::_Rep::_S_terminal std::string::_Rep::_S_terminal[110]   ER RW /devel/tmp/gcc-20010903/libstdc++-v3/testsuite/19_diagnostics/stdexceptions.cc(/tmp/cc67lZAN.o)                                   00004358 .data    R_POS    [1443]  <std::string::_Rep::_S_terminal>ld: 0711-317 ERROR: Undefined symbol: std::string::_Rep::_S_max_size std::string::_Rep::_S_max_size[114]   ER RW /devel/tmp/gcc-20010903/libstdc++-v3/testsuite/19_diagnostics/stdexceptions.cc(/tmp/cc67lZAN.o)                                   0000435c .data    R_POS    [1445]  <std::string::_Rep::_S_max_size>Release:gcc version 3.0.2 20010903 (prerelease)Environment:rs6000-ibm-aix4.2.0.0",RESOLVED          FIXED      
4354,Benjamin Kosnik,string::assign behaving unexpectedly when destination string == source string,"The following simple program prints ""merge"" instead of""mergesort_ap_variant.pl"", as it (probably) should:#include <iostream>#include <string>using namespace std;int main() {  string aux = ""../BenchCtiTr/apt/mergesort_ap_variant.pl"";  string::size_type i = aux.rfind(""/"");  if (i != string::npos)    aux.assign(aux, i+1, string::npos);  cout << aux.c_str() << endl;}Release:gcc-3.0.1 (current 3.1 and 3.0.2 snapshots too)Environment:x86, glibc-2.2.4, linux-2.4.8, binutils-2.11.2How-To-Repeat:The member function string::assign behaves unexpectedly whendealing with the same string as source and destination.",RESOLVED          FIXED      
4402,Benjamin Kosnik,Crash in std::ostream with bad values and std::fixed,"The following code causes a SEGV - I know it is a silly thing to do but bad values happen sometimes and it is easier to debug if the stack doesn't get trashed when trying to output some debugging information!Code test.cc:#include <iostream>#include <iomanip>int main ( int argc, char *argv[] ){    double value = 3.5e230;    std::cout << std::fixed << std::setprecision(3) << value << "" "" <<	std::setprecision(1) << value << std::endl;}Compile with:gcc test.cc -o test -lstdc++Release:gcc 3.0Environment:Reading specs from /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.0/specsConfigured with: ../gcc-3.0/configure --enable-threadsThread model: posixgcc version 3.0How-To-Repeat:Compile and run the code in the description.",RESOLVED          FIXED      
4433,Benjamin Kosnik,"strstream::{tellp,seekp} fail.","Writing strstream.Then two after 3 ::seeks(...)then ::tellp() returns wrong position.Release:3.0.1 (also 2.95.2 )Environment:LinuxHow-To-Repeat:just compile and run.In case Netscape failed to unload, here is seektell.cc:#include <iostream>#include <strstream>namespace std {}; using namespace std;static bool chekpos(const char* msg, std::iostream& strm, int expectedPos){   int  pos = strm.tellp();   bool  ok = (pos == expectedPos);   if (!ok)   {      cerr << msg << "" pos="" << pos <<               "" != "" << expectedPos << "" [expected]"" << endl;   }   return ok;}int main(int argc, int argv){   bool            ok = true;   std::strstream  strm;   const unsigned  l1 = 10;   char*           data = new char[l1];   for(unsigned i=0; i<l1; i++) data[i] = 'a'+i;   strm.write((const char*)data, l1);   // delete [] data;   strm.seekp(0, std::ios::end);   ok = chekpos(""check1: seek(0, end)"", strm, l1) && ok;   strm.seekp(-4, std::ios::cur);   ok = chekpos(""check2: seek(-4, cur)"", strm, l1-4) && ok;   strm.seekp(0, std::ios::end);   ok = chekpos(""check3: seek(0, end)"", strm, l1) && ok;   cout << ""ok="" << ok << endl;   return !ok;} // main",RESOLVED          FIXED      
4456,Benjamin Kosnik,Regression error in <locale.h>,"Results of functions in <ctype.h> is incorrect exceptin ""C"" locale.Release:g++ 3.0Environment:SunOS dxcs8h 5.7 Generic_106541-12 sun4u sparc SUNW,Ultra-60LC_CTYPE=iso_8859_1How-To-Repeat:Set LC_CTYPE (or LC_ALL) to iso_8859_1Compile program with -DOLD, both with 2.95.2 andwith 3.0.Compare the output: 2.95.2 is correct, 2.0 apparentlyalways uses the locale ""C"".",RESOLVED          FIXED      
4457,Benjamin Kosnik,std::ctype< char >::is gives random results for chars with bit 7 set,"std::ctype<char>::is gives apparently random resultsfor characters in the range 0x80-0xff (which have negativevalues in char).Release:g++ 3.0Environment:    dxcs8h@~/tmp/gcc (164): uname -a    SunOS dxcs8h 5.7 Generic_106541-12 sun4u sparc SUNW,Ultra-60    dxcs8h@~/tmp/gcc (165): /opt/global/pkg/gcc-3.0.0_threads/bin/g++ --version    3.0     dxcs8h@~/tmp/gcc (166): env | egrep LC_    LC_MESSAGES=C    LC_TIME=en_US    LC_NUMERIC=en_US    LC_CTYPE=iso_8859_1    LC_MONETARY=en_US    LC_COLLATE=en_USHow-To-Repeat:Just compile and look at the output.  To see the correctoutput, compile with g++ 2.95.2 using -DOLD (to suppressthe code using the new <locale>).   Two simple examples:it says that ä is a digit, and that ç is a space.",RESOLVED          FIXED      
4503,Benjamin Kosnik,__enc_traits destructor crashes if initialisation failed,"__enc_traits::~__enc_traits() calls iconv_close() on each of its iconv_t members.  On Solaris, iconv_close crashes if given the error value (iconv_t)(-1), rather than doing nothing (as one might expect). I'm unclear on what public functions utilise__enc_traits. The test programs 22_locale/codecvt_unicode_*.cc use it directly and crash on Solaris (after I apply kluges so that _GLIBCPP_USE_WCHAR_T is defined), so I've written a trivial test case based on that.Release:gcc-3.0.1Environment:Solaris 8 on SPARCHow-To-Repeat:Compile and run the attached file test.cc",RESOLVED          FIXED      
4522,Benjamin Kosnik,Improperly set eofbit in __copy_streambufs,"The following code raises EOF for cout, which is not correct:  // foo.cc  #include <iostream>  #include <strstream>  int  main(int argc, const char* argv[])  {    const char* data = ""first line # comment\n\second line\n\# commentary line\n\last line\n"";    std::istrstream iss(data);    std::cout << ""Original:"" << std::endl << iss.rdbuf();    short state = std::cout.rdstate();    std::cout.clear();    std::cout << ""flags: "" << std::hex << state << std::endl;  }Release:3.0.1Environment:System: SunOS max 5.8 Generic_108528-07 sun4u sparc SUNW,Sun-Blade-100Architecture: sun4	host: sparc-sun-solaris2.8build: sparc-sun-solaris2.8target: sparc-sun-solaris2.8configured with: ../gcc-3.0.1/configureHow-To-Repeat:Compiled using: g++ -g -o foo foo.cc",RESOLVED          FIXED      
4534,Benjamin Kosnik,vector<bool>::_M_range_check should throw out_of_range,"Section 23.1.1.13 of the standard says the member function at() of sequences should throw out_of_range if n >= a.size(), not range_error as is currently thrown in bits/stl_bvector.h's _M_range_check method.Release:CVS tree",RESOLVED          FIXED      
4536,Benjamin Kosnik,ostream seekp & istream seekg should scope failbit,ostream's seekp and istream's seekg methods need to use failbit as  `ios_base::failbit'.It may be worth noting that the setting of failbit goes in line with the change for library DR #129.  The standard pre-DR edits does not include the clause in $27.6.2.4(2) regarding the setting of failbit.Release:CVS tree,RESOLVED          FIXED      
4542,Benjamin Kosnik,_M_construct_name in locale_facets.tcc uses variable array size,"In bits/locale_facets.tcc, the method time_get<>::_M_extract_name has a definition of the array `__matches' using variable array size based on the method's __indexlen parameter.Release:CVS tree",RESOLVED          FIXED      
4545,Benjamin Kosnik,"basic_ostream op<< should set badbit, not failbit","I was mistaken in one piece that I submitted in PR libstdc++/4536.Rather, according to $27.6.2.5.3(6) the operator  basic_ostream::operator<<(streambuf*)should tset badbit, not failbit, if __sbin or __xtrct is set to 0.Release:CVS tree",RESOLVED          FIXED      
4559,Benjamin Kosnik,failing make check -- huge memory usage,"After what appears to be a successful bootstrap compile, the libstdc++-v3 tests immediately fail. A complete build log is attached. The lines preceded by '@@' are the commands I used to configure and compile. At the very beginning of the file is  all of the information I have regarding the build environment.In the minutes leading up to the 'FAIL' output, there is _huge_ memory usage: 500MB of physical memory and ~300MB of swap are used at some points.This built fine for me before; I'm not sure what changed. It's possible I didn't have 'expect' installed the first time around, and thus this particular test would have been skipped.Release:3.0.1Environment:Hardware: SMP PIII 866; OS: Linux; Environment: see belowHow-To-Repeat:Beats me; I can repeat it just by repeating the compile, but I not seen anyone else complaining.",RESOLVED          FIXED      
4617,Benjamin Kosnik,"/usr/ccs/bin/ld: Duplicate symbol ""std::__timepunct<char>::_M_put_helper(char*, unsigned, char const*, tm const*) const"" in files .libs/locale-inst.o and .libs/time.o","libstdc++ fails to build.  This is a regresion from 3.0.x.The following error occurs linking .libs/libstdc++.sl.4.0:/usr/ccs/bin/ld: Duplicate symbol ""std::__timepunct<char::_M_put_helper(char*, unsigned, char const*, tm const*) const"" in files .libs/locale-inst.o and .libs/time.o/usr/ccs/bin/ld: Duplicate symbols are not allowed in shared librariescollect2: ld returned 1 exit statusRelease:gcc-3.1 20011017 (experimental)Environment:hppa1.1-hp-hpux10.20",RESOLVED          FIXED      
4686,Benjamin Kosnik,Output disappearing after operator<<( streambuf* ),"Output using operator<<( streambuf * ) hasstrange behavior.  In the example, the followingoutput fails to occur.Release:g++ 3.0.0Environment:dxcs8h@~/tmp/gcc (66): uname -aSunOS dxcs8h 5.7 Generic_106541-12 sun4u sparc SUNW,Ultra-60dxcs8h@~/tmp/gcc (67): g++3 -vReading specs from /opt/global/pkg/gcc-3.0.0_threads/lib/gcc-lib/sparc-sun-solaris2.7/3.0/specsConfigured with: ./configure --prefix=/opt/global/pkg/gcc-3.0.0_threads --enable-threads=posixThread model: posixgcc version 3.0g++: No input filesHow-To-Repeat:Just compile and look at output.  The there isno trace of the second output statement.",RESOLVED          FIXED      
4701,Benjamin Kosnik,"imbue(locale(""de_DE"")) not working","named locales cause core:#include <iostream>#include <locale>using namespace std;int main(){    cout.imbue(locale(""de_DE""));}Release:x86-linux gcc-3.1",RESOLVED          FIXED      
4879,Benjamin Kosnik,std::ofstream failing to detect out of space?,"std::ofstream is not detecting an ""out of space""condition.  I would expect badbit to be set on thestream, but there is no indication of any problemsin the stream.Release:unknownEnvironment:Seen on x86 linux, redhat 6.2 & 7.1How-To-Repeat:To reproduce, compile & run the following program.     The named file (/boot/xxx) must be in a partition withno free space.  For my tests, I simply filled up the/boot partition of a linux machine(cat /dev/zero > /boot/foo) and ran this.-----------------------------------------#include <iostream>#include <fstream>int main(){    const char* data(""this is the text for the file\n"");    std::ofstream ofs(""/boot/xxx"");    for (unsigned i = 0; i < strlen(data); ++i)    {        ofs.put(data[i]);    }    ofs.close();    if (ofs.good())    {        std::cout << ""stream is good\n"";    }    if (ofs.bad())    {        std::cout << ""stream is bad\n"";    }    if (ofs.fail())    {        std::cout << ""stream is fail\n"";    }    return 0;}----------------     Running this, you will see that /boot/xxx gets created asa zero-length file, but the program prints out""stream is good"".",RESOLVED          FIXED      
5207,Benjamin Kosnik,DR 331: - ios_base::~failure,See:http://std.dkuug.dk/jtc1/sc22/wg21/docs/lwg-active.html#331Then check out:include/bits/ios_base.h line 158 and 159src/ios.cc line 137 and 138Release:20011224 snapshotEnvironment:sourceHow-To-Repeat:view source,RESOLVED          FIXED      
5268,Benjamin Kosnik,More fun with global stream destruction semantics,"Similar to PR 3045, in fact same example used.The problem is that in ios.cc lines [190, 192] and [197, 199]the flush method is called on the global stream objects cout, cerr, clog, etcThe reason this is a problem is that this will call methods on theunderlying stream buffer, which may no longer exist at this point.(e.g. is the stream were redirected)Release:cvs - probably also in 3.0Environment:sourceHow-To-Repeat:// mostly copied from PR 3045#include <fstream>#include <iostream>std::basic_filebuf b1;int main(){  b1.open(""foo"");  cout.rdbuf( b1 );  std::cout << ""hello\n"";  return 0;}// order of events://  magic std::ios_base::Init object is constructed causing//    std::buf_cout constructed - BTW should this even be in std?//    std::cout constructed to point at std::buf_cout//  b1 is created//  main begins//  std::cout is redirected to b1//  main ends//  b1 is destroyed//  magic std::ios_base::Init object destroyed causing//    std::cout.flush, which in turn calls pubsync on b1 - oops",RESOLVED          FIXED      
5280,Benjamin Kosnik,Problems with named locales and iostreams (gnulocale),"After updating my system libc I tried name locales again. They no longercrash but the call to the default named locale does only partly work. Forexample, consider the following code tl.C. Doubles are outputaccording to the default locale, the locale employed for input is readin by the program. When LANG is set to C, everything works asexpected. Doubles separated with a comma as decimal point aretransformed into doubles with a dot as a separator.  LANG=C ./tl de_DEcout locale: Ccin locale: de_DE1,21.21,31.3 ^D pressedUnfortunately, when LANG is set to de_DE this does no longer work. Thecomma is a not accepted as a valid separator as it should and the loopterminates with an error. If I set LANG to a different value, forexample fr_FR, the same problem occurs.LANG=de_DE ./tlde_DEcout locale: de_DEcin locale: de_DE1,3Release:3.1 20011229 (experimental)Environment:System: Linux kiste 2.4.17 #7 Thu Jan 3 17:21:51 CET 2002 i686 unknownArchitecture: i686SuSE 7.3glibc 2.2.4 + patcheshost: i686-pc-linux-gnubuild: i686-pc-linux-gnutarget: i686-pc-linux-gnuconfigured with: ../gcc/configure --enable-shared --disable-nls --enable-threads --enable-languages=c,c++,f77,objc --enable-concept-checksHow-To-Repeat:tl.C#include <iostream>#include <locale>#include <string>#include <cstdlib>using namespace std;int main(){  locale coutLocale("""");  cout.imbue(coutLocale);  string s;  cin >> s;  if (!cin) {    cerr << ""ERROR while reading the locale"" << endl;    return EXIT_FAILURE;  }  locale cinLocale(s.c_str());cin.imbue(cinLocale);cout << ""cout locale: "" << coutLocale.name() << endl;cout << ""cin locale: "" << cinLocale.name() << endl;double value;while (cin >> value) {  cout << value << endl;}}Compiling tl.C g++ -v -o tl tl.C -W -Wall Reading specs from /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1/specsConfigured with: ../gcc/configure --enable-shared --disable-nls --enable-threads --enable-languages=c,c++,f77,objc --enable-concept-checksThread model: posixgcc version 3.1 20011229 (experimental) /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1/cc1plus -v -D__GNUC__=3 -D__GNUC_MINOR__=1 -D__GNUC_PATCHLEVEL__=0 -D__ELF__ -Dunix -Dlinux -D__ELF__ -D__unix__ -D__linux__ -D__unix -D__linux -Asystem=posix -D__NO_INLINE__ -D__STDC_HOSTED__=1 -W -Wall -D_GNU_SOURCE -Acpu=i386 -Amachine=i386 -Di386 -D__i386 -D__i386__ -D__tune_i686__ -D__tune_pentiumpro__ tl.C -D__GNUG__=3 -D__DEPRECATED -D__EXCEPTIONS -D__GXX_ABI_VERSION=100 -quiet -dumpbase tl.C -W -Wall -version -o /tmp/cc8e37VS.sGNU CPP version 3.1 20011229 (experimental) (cpplib) (i386 Linux/ELF)GNU C++ version 3.1 20011229 (experimental) (i686-pc-linux-gnu)	compiled by GNU C version 3.1 20011229 (experimental).ignoring nonexistent directory ""NONE/include""ignoring nonexistent directory ""/usr/local/i686-pc-linux-gnu/include""#include ""..."" search starts here:#include <...> search starts here: /usr/local/include/g++-v3 /usr/local/include/g++-v3/i686-pc-linux-gnu /usr/local/include/g++-v3/backward /usr/local/include /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1/include /usr/includeEnd of search list. as -V -Qy -o /tmp/ccxwlGmA.o /tmp/cc8e37VS.sGNU assembler version 2.11.90.0.29 (i486-suse-linux) using BFD version 2.11.90.0.29 /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1/collect2 -m elf_i386 -dynamic-linker /lib/ld-linux.so.2 -o tl /usr/lib/crt1.o /usr/lib/crti.o /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1/crtbegin.o -L/usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1 -L/usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1/../../.. /tmp/ccxwlGmA.o -lstdc++ -lm -lgcc_s -lgcc -lc -lgcc_s -lgcc /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1/crtend.o /usr/lib/crtn.o",RESOLVED          FIXED      
5542,Benjamin Kosnik,libstdc++ fails to build when no msgfmt utility installed,"libstdc++-v3 fails to build when msgfmt not installed.  I get""msgfmt: Command not found"".  My understanding is that it should buildproperly in the absence of this utility, like gcc does. (I am using afresh Linux install with no gettext.  Installing gettext should fix for me.)Release:3.1 20020130 (experimental)Environment:System: Linux dhcppc2 2.4.9-21 #1 Thu Jan 17 14:16:30 EST 2002 i686 unknownArchitecture: i686	host: i686-pc-linux-gnubuild: i686-pc-linux-gnutarget: i686-pc-linux-gnuconfigured with: /home/green/trunk/gcc/configure --prefix=/home/green/trunk/i --enable-languages=c,c++,java --enable-threadsHow-To-Repeat:	Remove gettext or hide msgfmt, configure and build.",RESOLVED          FIXED      
5820,Benjamin Kosnik,EOF not handled correctly on input,"On all Unix variants I've tried, programs taking their input from aterminal consider two CTRL-D (this key can be changed with stty, butI'll use CTRL-D) in a row or one CTRL-D just at the beginning of aline as an end of file indication.With the C++ library furnished with gcc 3.0.2, executing:#include <iostream>#include <istream>#include <ostream>int main(){   int i;   char c;      std::cout << ""Enter an integer: "";   std::cin >> i;   if (!std::cin) {     std::cerr << ""Unexpected read problem\n"";     return 1;   }      std::cout << '\n' << ""std::cin.eof()="" << std::cin.eof() << '\n';   std::cout << ""The number was: "" << i << '\n';   std::cin >> c;   if (std::cin) {     std::cerr << ""Could read "" << c << "" after the number!\n"";   }   }on a Linux box with input and output directed to a terminal, I had totype 4 times CTRL-D after 5 to get the expected result:Enter an integer: 5std::cin.eof()=1The number was: 5If I type ""5"", two or three CTRL-D and ""a"", I get:Enter an integer: 5astd::cin.eof()=0The number was: 5Could read a after the number!Release:gcc-3.0.2Environment:Debian LinuxHow-To-Repeat:See description",RESOLVED          FIXED      
5994,Benjamin Kosnik,operator>>() produces incorrect value,"#include <string>#include <iostream>#include <strstream>void foo(std::string const & arg){}int main(){  std::string arg(""9"");  unsigned long level;  std::istrstream is(arg.c_str());  is >> level;    std::cout << level << '\n';  return 0;}Release:3.0.4Environment:System: SunOS kveikur 5.8 Generic_108528-05 sun4u sparc SUNW,Ultra-5_10Architecture: sun4	host: sparc-sun-solaris2.8build: sparc-sun-solaris2.8target: sparc-sun-solaris2.8configured with: ./configure --prefix=/opt/test --with-ld=/opt/test/bin/ld --with-gnu-ld --enable-languages=c,c++How-To-Repeat:	Compile and execute the program above.  When I run it the result	is 262144 instead of 9.",RESOLVED          FIXED      
6012,Benjamin Kosnik,"Crash in iostreams, AIX 4.3.3.0","I am encountering strange crashes in the libstdc++ code.The included program crashes in the first << operator giving a ""Illegal instruction (core dumped)""The callstack shows that it crashed in: bits/locale_facets.hAt line 778, which is one of the num_put::put() functions.It seems to be having an invalid virtual base pointer or something to do with the virtual table.This is a simple example created after a larger program encountered this problem, even with other stream types.Release:3.0.4Environment:powerpc-ibm-aix4.3.3.0How-To-Repeat:#include <iostream>#include <sstream>int main(int argc, char* argv[]){  std::basic_ostringstream<char> os;  os << 5.3;  std::cout << os.str() << std::endl;  return 0;}",RESOLVED          FIXED      
6062,Benjamin Kosnik,Coredump when use dlsym with C++ objects with gcc3,"Coredump when use dlsym with C++ objects.Same code work with gcc-2.95.3I test this on linux-sparc gcc-3.0.3, Bus error(Change for this os:lib = dlopen(""tc_lib2.so"", RTLD_NOW); and add -ldl flags).Release:gcc version 3.0.4Environment:OpenBSD saturne 3.0 GENERIC#94 i386How-To-Repeat:# This is a shell archive.  Save it in a file, remove anything before# this line, and then unpack it by entering ""sh file"".  Note, it may# create directories; files and directories will be owned by you and# have default permissions.## This archive contains:##       build.sh#       tc_lib2.cc#       tc_lib2.h#       tc_prog.cc#echo x - build.shsed 's/^X//' >build.sh << 'END-of-build.sh'Xc++ -v -save-temps -fPIC -ggdb -Wall -shared -o tc_lib2.so tc_lib2.ccXc++ -v -save-temps -fPIC -ggdb -Wall tc_lib2.so -o tc_prog tc_prog.ccEND-of-build.shecho x - tc_lib2.ccsed 's/^X//' >tc_lib2.cc << 'END-of-tc_lib2.cc'X#include <stdio.h>X#include ""tc_lib2.h""Xextern ""C"" {X  TestN::Interface *InstanceFactory()X  { return new TestN::Interface(); }X}X namespace TestN {Xvoid Interface::fcn2(void) {XX       printf(""in fcn2\n"");XX}}END-of-tc_lib2.ccecho x - tc_lib2.hsed 's/^X//' >tc_lib2.h << 'END-of-tc_lib2.h'X#ifdef __GNUG__X#pragma interfaceX#endif // __GNUG__X#include <stdio.h>X namespace TestN {X class Interface {X public:X   void Interface::fcn2(void); X};X}END-of-tc_lib2.hecho x - tc_prog.ccsed 's/^X//' >tc_prog.cc << 'END-of-tc_prog.cc'X#include <dlfcn.h>X#include <stdio.h>X#include <stdlib.h>X#include <iostream.h>X#include ""tc_lib2.h""Xint main() {XX       TestN::Interface* instance;X	void *lib;XX       cout << ""in fcn1, dlopening lib2..."" << endl;X       lib = dlopen(""tc_lib2.so"", DL_LAZY);X       if(!lib) {X               cout << ""can't dlopen lib2: "" << dlerror() << endl;X               exit(2);X       }XX       printf(""dlsymming instance...\n"");X       instance = (TestN::Interface*)dlsym(lib, ""_InstanceFactory"");X       if(dlerror()) {X               cout << ""can't dlsym instance: "" << dlerror() << endl;X               exit(2);X       }XX       printf(""calling fcn2...\n"");X       instance->fcn2();X       printf(""back from fcn2\n"");X	return 0;X}XEND-of-tc_prog.ccexit",RESOLVED          FIXED      
6214,Benjamin Kosnik,Problems with bitsets (3.0 regression),"The following file tb.C does no longer link, since the static symbolstd::_Bit_count<(bool)1>::_S_bit_count is not definded. Theprogram compiled and worked sucessfully when I used gcc 3.120020302 as compiler. Please fix this problem for the upcoming 3.1 release.Release:3.1 20020405 (prerelease)Environment:System: Linux kiste 2.4.18 #8 Sat Mar 9 15:33:15 CET 2002 i686 unknownArchitecture: i686SuSE 7.3glibc 2.2.4 + patchesGNU ld version 020305 20020305host: i686-pc-linux-gnubuild: i686-pc-linux-gnutarget: i686-pc-linux-gnuconfigured with: ../gcc/configure --enable-shared --disable-nls --enable-threads=posix --enable-languages=c,c++,f77,objcHow-To-Repeat:#include <bitset>extern int printf (const char *, ...);using namespace std;int main(){  enum Color { red, blue, white, black, numColors };  bitset<numColors> usedColors;  usedColors.set(red);  usedColors.set(blue);  printf(""number of used colors: %i\n"", usedColors.count());}g++ -v -o tb tb.C -W -Wall -save-tempsReading specs from /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1/specsConfigured with: ../gcc/configure --enable-shared --disable-nls --enable-threads=posix --enable-languages=c,c++,f77,objcThread model: posixgcc version 3.1 20020405 (prerelease) /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1/cpp0 -lang-c++ -D__GNUG__=3 -D__DEPRECATED -D__EXCEPTIONS -D__GXX_ABI_VERSION=100 -v -D__GNUC__=3 -D__GNUC_MINOR__=1 -D__GNUC_PATCHLEVEL__=0 -D__ELF__ -Dunix -Dlinux -D__ELF__ -D__unix__ -D__linux__ -D__unix -D__linux -Asystem=posix -D__NO_INLINE__ -D__STDC_HOSTED__=1 -D_GNU_SOURCE -Acpu=i386 -Amachine=i386 -Di386 -D__i386 -D__i386__ -D__tune_i686__ -D__tune_pentiumpro__ tb.C -W -Wall tb.iiGNU CPP version 3.1 20020405 (prerelease) (cpplib) (i386 Linux/ELF)ignoring nonexistent directory ""NONE/include""ignoring nonexistent directory ""/usr/local/i686-pc-linux-gnu/include""#include ""..."" search starts here:#include <...> search starts here: /usr/local/include/g++-v3 /usr/local/include/g++-v3/i686-pc-linux-gnu /usr/local/include/g++-v3/backward /usr/local/include /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1/include /usr/includeEnd of search list. /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1/cc1plus -fpreprocessed tb.ii -quiet -dumpbase tb.C -W -Wall -version -o tb.sGNU CPP version 3.1 20020405 (prerelease) (cpplib) (i386 Linux/ELF)GNU C++ version 3.1 20020405 (prerelease) (i686-pc-linux-gnu)	compiled by GNU C version 3.1 20020405 (prerelease). /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1/../../../../i686-pc-linux-gnu/bin/as -V -Qy -o tb.o tb.sGNU assembler version 020305 (i686-pc-linux-gnu) using BFD version 020305 20020305tb.o: In function `std::_Base_bitset<(unsigned)1>::_M_do_count() const':tb.o(.gnu.linkonce.t._ZNKSt12_Base_bitsetILj1EE11_M_do_countEv+0x2f): undefined reference to `std::_Bit_count<(bool)1>::_S_bit_count'collect2: ld returned 1 exit status",RESOLVED          FIXED      
6238,Benjamin Kosnik,ifstream::getline(...) has problems reading file after long line.,"When attempting to read a long line withifstream::getline(), the fist part of the line, up to the limit specified in the call, is correct.  Subsequent callsto getline return nothing.  The attached source code exposesthis bug on all gcc versions that I have tried it on onmy Linux box.  On other compilers (on Irix, OSF1, HP-UX,and AIX), this program runs as expected.(Returns chunks of the line until the file is finished.)Release:all stdlib++'s that I've testedEnvironment:Redhat 7.2, gcc 2.96 20000731 (Red Hat Linux 7.1 2.96-98), gcc 3.0.2 20010905 (Red Hat Linux 7.1 3.0.1-3), gcc version 3.1 20020325 (prerelease)How-To-Repeat:Compile the attached code with g++ (one of the versionslisted above).  Run the executable.  The input file namecan be changed to any file with long lines.",RESOLVED          FIXED      
6268,Benjamin Kosnik,_M_extract_buffer_length = 32 for double do_get,"In the ""double"" overloaded version of do_get()  (buried insidei686-pc-linux-gnu/libstdc++-v3/include/bits/locale_facets.tcc), the commentmakes reference to ""the size of 256"" (line 595 for 3.0.3), butthe array __xtrc is declared to be of length 32 (i.e.,_M_extract_buffer_length).  This is probably a bug.As far as I can tell, this is what causes failure forthis simple code ""double x; cin >> x"" and I input0.12345678901234567890123456789012345678901234567890Anything more than 30 digits past the decimal point breaks.I want it to gracefully round or truncate.Release:3.0.4Environment:i386 Linux (and others probably)",RESOLVED          FIXED      
6360,Benjamin Kosnik,Wrong workaround in char_traits.h - ignore stops on \0xff,"The default delimiter for Istream::ignore is EOF (-1).Several places in include/g++-v3/bits/istream.tcc the following is found:    const int_type __idelim = traits_type::to_int_type(__delim);calling the method in gcc/include/g++-v3/bits/char_traits.h:184 :        // To keep both the byte 0xff and the eof symbol 0xffffffff        // from ending up as 0xffffffff.        static int_type        to_int_type(const char_type& __c)        { return static_cast<int_type>(static_cast<unsigned char>(__c)); }- but then __idelim is set to 255, causing Istream::ignore to stop ignoring first time it meets a char value of 255.In this case the delimiter should be -1, so that ignorance only stops when a real negative unsigned char is found - and that hardly happens...Release:3.0.4Environment:Seen on RedHat linux 6.2 - and on Solaris 2.7How-To-Repeat:The following testcase is expected to do as it does when compiled with KAI:[mk@linux-tools IstreamIgnore]$ ./IstreamIgnore.KCC1st char is: aSkipping 8 chars (i.e. until after the digits)...The rest of the stream contains: 'abcd'But using gcc 3.0.4 we get:[mk@linux-tools IstreamIgnore]$ ./IstreamIgnore.gcc1st char is: aSkipping 8 chars (i.e. until after the digits)...The rest of the stream contains: '1234abcd'",RESOLVED          FIXED      
6410,Benjamin Kosnik,Trouble with non-Ascii monetary symbols and wchar_t,"Trying to fix the testsuite to work well with the new EURO localedata (present in glibc CVS, both 2.2 and mainline) exposed what seems to be a problem with non-Ascii monetary symbols and wchar_t.This is a testcase:#include <locale>#include <sstream>#include <cassert>int main(){  using namespace std;  typedef ostreambuf_iterator<wchar_t> iterator_type;  locale loc_de(""de_DE@euro"");  const wstring empty;  const wstring digits1(L""720000000000"");  wostringstream oss;  oss.imbue(loc_de);  const money_put<wchar_t>& mon_put = use_facet<money_put<wchar_t> >(oss.getloc());   oss.setf(ios_base::showbase);  oss.str(empty);  iterator_type os_it04 = mon_put.put(oss.rdbuf(), false, oss, ' ', digits1);  wstring result4 = oss.str();  assert( result4 == L""7.200.000.000,00 \244"");}Release:3.1 20020417Environment:x86-linux, glibc2.2.5 (gnu locale model)",RESOLVED          FIXED      
6518,Benjamin Kosnik,???,the <<  operator will crash when passing a null pointer to it (2.95 does not)Release:3.0.2Environment:System: Linux x10 2.4.9-31 #1 Tue Feb 26 06:53:37 EST 2002 i686 unknownArchitecture: i686	host: i686-pc-linux-gnubuild: i686-pc-linux-gnutarget: i686-pc-linux-gnuconfigured with: ../configure --enable-version-specific-runtime-libs --prefix=/usr/local --program-suffix=-3.0.2How-To-Repeat:	#include <string.h>#include <iostream.h>int main ( void ){char * pt = NULL;cout << pt << endl;return 0;},RESOLVED          FIXED      
6533,Benjamin Kosnik,[3.1 regression] libstdc++ broken on unsigned char platforms,"Current CVS shows these regressions on powerpc-linux-gnu since sometime yesterday:FAIL: 21_strings/inserters_extractors.cc execution testFAIL: 26_numerics/complex_inserters_extractors.cc execution testFAIL: 27_io/istream_extractor_arith.cc execution testFAIL: 27_io/istream_sentry.cc execution testFAIL: 27_io/istringstream_members.cc execution testFAIL: 27_io/ostream_inserter_arith.cc execution testFAIL: 27_io/stringstream_members.cc execution testIt is also reproducible on x86-linux-gnu if you bootstrap with:	make bootstrap CFLAGS=""-g -O2 -funsigned-char"" CXXFLAGS=""-g -O2 -funsigned-char"" BOOT_CFLAGS=""-g -O2 -funsigned-char""On x86-linux-gnu one testcase only fails if you only run the libstdc++ testsuite with -funsigned-charFAIL: 24_iterators/istreambuf_iterator.cc execution testRelease:current 3.1 CVSEnvironment:glibc-2.2.5binutils-2.12.90.0.7",RESOLVED          FIXED      
6582,Benjamin Kosnik,memory leaks in iostream  and locale,"Some static objects created by libstdc++, namely std::cin,std::cout, std::cerr, std::clog, and the classic locale, arenot destroyed at the program termination. Since they contain data members, such as strings, callback lists, etc., which hold dynamically allocated storage fragments, they look perfectly like memory leaks.These leaks do not constitute a problem as such; there are,though, two reasons for eliminating them:1. of systematical nature: why bother to delete filebufsbelonging to the streams but let other components out2. of practical nature: when hunting for real memory leaksin the application using some automated means, be that purify or a self-made drop-in for the STL allocator, these additional leaks really disturb: The allocationrequests do not come at predictable moments, so that it'srather difficult to filter them out.Release:3.0.4Environment:n/a",RESOLVED          FIXED      
6594,Benjamin Kosnik,strstreambuf leaks 16 bytes - gcc 3.0.x,"The default constructor for strstreambuf allocates abuffer of 16 bytes.  If you assign a user suppliedbuffer by calling setp(...), then the 16 byte buffer isnot released and the pointer is lost.I have verified this leak using the linux tool 'memprof'Sample code:( I am deriving a class from strstreambuf so I can control  where the output stream goes )class MyStreambuf : public strstreambuf {public:    MyStreambuf()    {       setp( _buffer, _buffer, _buffer+BUFSIZE );  // leak here!    ...    }private:    static const int BUFSIZE=256;    char _buffer[BUFSIZE];}Release:gcc 3.0.4Environment:Red Hat Linux 7.2 on x86 processor",RESOLVED          FIXED      
6605,Benjamin Kosnik,<deriving a class from std::fstream in a namespace>,"<G++ fails to compile this simple code:  #include <iostream>  #include <fstream>  namespace PIO {   class Tmp_file;  }  class PIO::Tmp_file : public std::fstream {};with the command line ""g++ -Wall aa.cc -c"".  The output is:  /home/mpiter/bin/../include/g++-v3/bits/std_streambuf.h: In instantiation of `std::basic_streambuf<char, std::char_traits<char> >':  /home/mpiter/bin/../include/g++-v3/bits/std_fstream.h:368:   instantiated from `std::basic_filebuf<char, std::char_traits<char> >'  /home/mpiter/bin/../include/g++-v3/bits/std_fstream.h:368:   instantiated from `std::basic_fstream<char, std::char_traits<char> >'  aa.cc:8:   instantiated from here  /home/mpiter/bin/../include/g++-v3/bits/std_streambuf.h:77: `__copy_streambufs'     was not declared in this scopeIt seems a header file problem.Release:3.0.4Environment:System: Linux eglantier 2.4.7-10enterprise #1 SMP Thu Sep 6 16:48:20 EDT 2001 i686 unknownArchitecture: i686 host: i686-pc-linux-gnubuild: i686-pc-linux-gnutarget: i686-pc-linux-gnuconfigured with: ../gcc-3.0.4/configure --prefix=/home/mpiter/softwares/gcc-3.0.4 --with-stabsHow-To-Repeat: <Just recompile the code>",RESOLVED          FIXED      
6701,Benjamin Kosnik,do_narrow on range is fubar,"The implementation of do_narrow in ctype.cc for a range:1) always changes the first character to the default char2) doesn't narrow the whole string if a non-ascii char is   found22.2.1.1.2 para 13 of the C++ standard states:The second form [range form] transforms each character *pin the range [low, high), placing the result (or dfault ifno simple transformation is readily available) in dest[p-low].Release:gcc 3.1 20020510 (prerelease)Environment:solaris 8How-To-Repeat:std::wstring wide(L""wibble"");std::vector<char> narrow_chars(wide.length() + 1);std::locale loc;std::use_facet<std::ctype<wchar_t> >(loc).narrow(   &wide[0], &wide[wide.length()], '?', &narrow_chars[0]);",RESOLVED          FIXED      
6732,Benjamin Kosnik,misaligned objects created by new,operator new produces misaligned objects when __attribute__((__aligned__(16)) is usedRelease:gcc version 3.1Environment:Cygwin 1.3.9/Windows XPHow-To-Repeat:compile attached program$ g++ bug.ii,RESOLVED          FIXED      
6745,Benjamin Kosnik,Sever io problems on branch rdbuf,"There are severe io related problems on the branch. I believe thoseproblems are related to the recent check-ins. For example, considerthe following code tc.C. When run interactively, typing ^D on thekeyboars has no effect, the program does not finish. When the inputand output file descriptors are redirected to files, the programm does notterminate either. There are other io related problems I have not yetinvestigated. For example, when running the boost regression suite,the output of the html status file, cs-linux.html, istruncated. ""libs/config/test/config_info.cpp run"" is the last line(the first test of the regression suite), though all tests pass.Release:3.1.1 20020519 (prerelease)Environment:System: Linux kiste 2.4.18 #8 Sat Mar 9 15:33:15 CET 2002 i686 unknownArchitecture: i686host: i686-pc-linux-gnubuild: i686-pc-linux-gnutarget: i686-pc-linux-gnuconfigured with: ../gcc/configure --enable-shared --disable-nls --enable-threads=posix --enable-languages=c,c++,f77,objcHow-To-Repeat:source code tc.C#include <iostream>int main (){    std::cout << std::cin.rdbuf();}g++ -v -o tc tc.C -W -WallReading specs from /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1.1/specsConfigured with: ../gcc/configure --enable-shared --disable-nls --enable-threads=posix --enable-languages=c,c++,f77,objcThread model: posixgcc version 3.1.1 20020519 (prerelease) /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1.1/cc1plus -v -D__GNUC__=3 -D__GNUC_MINOR__=1 -D__GNUC_PATCHLEVEL__=1 -D__ELF__ -Dunix -D__gnu_linux__ -Dlinux -D__ELF__ -D__unix__ -D__gnu_linux__ -D__linux__ -D__unix -D__linux -Asystem=posix -D__NO_INLINE__ -D__STDC_HOSTED__=1 -D_GNU_SOURCE -Acpu=i386 -Amachine=i386 -Di386 -D__i386 -D__i386__ -D__tune_i686__ -D__tune_pentiumpro__ tc.C -D__GNUG__=3 -D__DEPRECATED -D__EXCEPTIONS -D__GXX_ABI_VERSION=100 -quiet -dumpbase tc.C -W -Wall -version -o /tmp/ccPq221W.sGNU CPP version 3.1.1 20020519 (prerelease) (cpplib) (i386 Linux/ELF)GNU C++ version 3.1.1 20020519 (prerelease) (i686-pc-linux-gnu)	compiled by GNU C version 3.1.1 20020519 (prerelease).ignoring nonexistent directory ""NONE/include""ignoring nonexistent directory ""/usr/local/i686-pc-linux-gnu/include""#include ""..."" search starts here:#include <...> search starts here: /usr/local/include/g++-v3 /usr/local/include/g++-v3/i686-pc-linux-gnu /usr/local/include/g++-v3/backward /usr/local/include /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1.1/include /usr/includeEnd of search list. /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.1.1/../../../../i686-pc-linux-gnu/bin/as -V -Qy -o /tmp/ccd2RdDf.o /tmp/ccPq221W.sGNU assembler version 020428 (i686-pc-linux-gnu) using BFD version 020428 20020428./tc < tc.C > aus // does not finish./tc hallo^D^D^D^D^D^D^D //does not return to shell either!",RESOLVED          FIXED      
6746,Benjamin Kosnik,ifstream::readsome() always returns zero,"Calling ifstream::readsome() always yields a return value of zero (no bytes read).  No stream error flags are set.  This behaviour has been introduced in release gcc-3.1: it worked fine in gcc-3.0.4.The problem appears to be confined to the filebuf part of ifstream, not the istream part, since (for instance) istringstream::readsome() does not suffer from this problem.My installation of gcc-3.1 was configured with the following options (/home/to0001/ is my networked home directory):--prefix=/home/to0001/app/gcc-3.1--enable-languages=c,c++--disable-shared--verboseTrivial test program source code attached.Expected output (as output by gcc-3.0.4 version):308 (308)0 (308)Actual output:0 (0)0 (0)0 (0)... [forever]Release:gcc-3.1Environment:sparc-sun-solaris2.8Thread model: posixHow-To-Repeat:g++ -ansi -pedantic -Wall -o gcc-test gcc-test.c++gcc-test",RESOLVED          FIXED      
6776,Benjamin Kosnik,Build 3.1 Source - Build directory on another file system fails due to hard link creation.,"Building LibSTDC++ fails if the build directory is not in the same file system as the source directory.Release:3.1Environment:Linux, Redhat 7.0. GCC 3.0. Ext2 (/) file system. FAT 16 (/mnt/data) file system.How-To-Repeat:Install source code on one file system, or file system that doesn't support hard links, and create the build directory on another file system, or the same one if it doesn't support hard links.Configure and 'make bootstrap'. The build progresses fine until the LibSTDC++ make where it attempts to create a hard link from a header in /usr/local/include on Ext2 to LibSTDC++'s ""src/base_stdio.h"" in build directory on FAT16.",RESOLVED          FIXED      
6795,Benjamin Kosnik,stringbuf failure,"istringstream doesn't seem to work here since upgrading from 3.0.4.I didn't run the test suite (very tight on disk space).SEGV during operator >>, after first underflow() in bufferRelease:3.1Environment:System: SunOS zweistein 5.6 Generic_105181-20 sun4u sparc SUNW,Ultra-5_10Architecture: sun4	host: sparc-sun-solaris2.6build: sparc-sun-solaris2.6target: sparc-sun-solaris2.6configured with: ../gcc-3.1/configure --prefix=/opt/gcc-3.1How-To-Repeat:#include <sstream>int main (int argc, char** argv){    std::string mytext = ""hello \nworld"";    std::istringstream i(mytext);// alternative:   std::stringbuf buf(mytext, std::ios_base::in);// alternative:   std::istream i(&buf);    std::string word;    i >> word;    return word == ""hello"";}",RESOLVED          FIXED      
6827,Benjamin Kosnik,Unreasonable dependencies on ctype.h,libstdc++ assumes the following symbols are available from ctype.h:_N _L_X_U_P_S_B_C_ctype_I assume that these are not part of the ISO standard C ctype.h definition.This bug stops libstdc++ from being compilable with headers other than glibc'sRelease:unknownEnvironment:builing sh-elf cross compiler,RESOLVED          FIXED      
7012,Benjamin Kosnik,istringstream cannot read integers on Solaris 2.5.1,"istringstream cannot read integers on Solaris 2.5.1Release:3.1Environment:System: SunOS ultra 5.5.1 Generic_103640-37 sun4u sparc SUNW,Ultra-1Architecture: sun4	host: sparc-sun-solaris2.5.1build: sparc-sun-solaris2.5.1target: sparc-sun-solaris2.5.1configured with: ../gcc-3.1/configure --prefix=/home/software/GCC3.1 --exec-prefix=/home/software/GCC3.1/ULTRA --with-as=/usr/ccs/bin/as --with-ld=/usr/ccs/bin/ld --enable-languages=c++,f77 --disable-threads --enable-shared=libstdc++How-To-Repeat:$ cat t.cc#include <iostream>#include <sstream>using namespace std;int main(int argc,char *arv[]){ int i; istringstream offsets(""1   4   0""); offsets >> i; cout << i << endl; return 0;}$ g++ -o t t.cc$ ./tSegmentation fault",RESOLVED          FIXED      
7057,Benjamin Kosnik,Operator== on hashtables doesn't appear to work correctly (patch included),"The operator== on hashtables in stl_hashtable.h compares the two tables for exact equivalence - the list in each bin must have the same entries in the same order.  This will generally fail, because the keys in a hashtable aren't ordered by definition, so the lists are in an effectively random order.  The equality operator on x==y needs to check each element in x's list for being in y's list, and also check that there are the same number of elements in each (that's necessary and sufficient).I've included a patch for this, in file stl_hashtable_h_diff in archive gccbug3.tar.gz.  There's also a C++ file hashtest.cpp which shows the comparison failing under the library shipped with GCC 3.1, and shows it working with this patch.  The software that we're developing also works with this patch applied.  I can't post this patch directly, because (1) I don't have time to exhaustively it, although we've done some testing, and (2) my mail server is blocked from posting to GCC mailing lists. :-(Please email me if the attachment doesn't get added by the web page.Regards and thanks, SteevRelease:3.1Environment:Solaris 8How-To-Repeat:Create two hash-tables, one in the reverse order of the other, but with the same data.  Sometimes the == operator works on these, sometimes it doesn't.  File hashtest.cpp in the attached .tar.gz file shows this with 10 string->int hashmaps of 10 entries each.",RESOLVED          FIXED      
7216,Benjamin Kosnik,basic_iostream::traits_type is ambiguous issue,"When I try to compile my program:typedef std::char_traits<char> tCT;typedef std::basic_iostream<char,tCT> Iostr;int main(int,char*[]){    Iostr::traits_type * some;    return 0;}with g++3 & your library compiler produce following message:test.cpp:6: request for member `traits_type' is ambiguous/usr/include/g++-v3/bits/std_ostream.h:54: candidates are: typedef struct    std::char_traits<char> std::basic_ostream<char, std::char_traits<char>    >::traits_type/usr/include/g++-v3/bits/std_istream.h:54:                 typedef struct    std::char_traits<char> std::basic_istream<char, std::char_traits<char>    >::traits_typeI know that C++ standard 27.6.1.1 & 27.6.2.1 describes public types of classes basic_istream & basic_ostream such as: .......public:// Types (inherited from basic_ios (27.4.4)):typedef charT            char_type;typedef typename traits::int_type      int_type;typedef typename traits::pos_type      pos_type;typedef typename traits::off_type      off_type;typedef traits                         traits_type; .............But I believe that you can place this types in basic_ios only.Release:libstdc++3-3.0.1-3Environment:Linux RedHat 7.2libstdc++3-3.0.1-3gcc3-c++-3.0.1-3How-To-Repeat:Try to compile attached sample",RESOLVED          FIXED      
7220,Benjamin Kosnik,"g++ 3.1: basic_istream::ignore(0,delimiter) issue.","basic_istream::ignore(0,delimiter) extracts delimiter if it (delimiter) is at stream read position without regard to first parameter == 0. In case delimiter isn`t at read position ignore(0,delimiter) do nothing and this is correct.C++ ISO|IEC 27.6.1.3-24 declare that ignore(n,...) should extract n symbols in case n  != numeric_limits<int>::max(). This condition is true for n = 0;See testcase attached.Release:g++ 3.1Environment:Red Hat Linux release 7.2, g++ v3.1How-To-Repeat:Compile testcase with g++ 3.1 and run it. You`ll see some ""failed"" messages.",RESOLVED          FIXED      
7222,Benjamin Kosnik,"g++ 3.1: locale::operator ==() doesn`t work on std::locale("""") locales","Comparision of identical constructed as ("""") locales doesn`t work - return fail, but for default  (""C"") locales it works. See attached testcase.Release:g++ 3.1Environment:Red Hat Linux release 7.2, g++ v3.1How-To-Repeat:Compile testcase with g++ 3.1 and run it.",RESOLVED          FIXED      
7230,Benjamin Kosnik,<strstream> header file is missing (trunk),"The header file <strstream> was removed from the libstdc++ sources that areshipped with gcc 3.2. Is this an oversight or was it deliberate? Thisremoval breaks blitz, boost, etc. According to my understanding of thestandard, <strstream> is required for a conforming libstdc++ implementation,though it is retained only for backward compatibility.Release:3.2 20020707 (experimental)Environment:System: Linux kiste 2.4.18 #8 Sat Mar 9 15:33:15 CET 2002 i686 unknownArchitecture: i686	host: i686-pc-linux-gnubuild: i686-pc-linux-gnutarget: i686-pc-linux-gnuconfigured with: ../gcc/configure --enable-shared --disable-nls --enable-threads=posix --enable-languages=c,c++,f77,objc,treelangHow-To-Repeat:tstrstream.C#include <strstream>g++ -v tstrstream.CReading specs from /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.2/specsConfigured with: ../gcc/configure --enable-shared --disable-nls --enable-threads=posix --enable-languages=c,c++,f77,objc,treelangThread model: posixgcc version 3.2 20020707 (experimental) /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.2/cc1plus -quiet -v -D__GNUC__=3 -D__GNUC_MINOR__=2 -D__GNUC_PATCHLEVEL__=0 -D_GNU_SOURCE tstrstream.C -D__GNUG__=3 -D__DEPRECATED -D__EXCEPTIONS -D__GXX_ABI_VERSION=100 -quiet -dumpbase tstrstream.C -version -o /tmp/cc3ZdR3H.sGNU C++ version 3.2 20020707 (experimental) (i686-pc-linux-gnu)	compiled by GNU C version 3.2 20020707 (experimental).ignoring nonexistent directory ""NONE/include""ignoring nonexistent directory ""/usr/local/i686-pc-linux-gnu/include""#include ""..."" search starts here:#include <...> search starts here: /usr/local/include/c++/3.2 /usr/local/include/c++/3.2/i686-pc-linux-gnu /usr/local/include/c++/3.2/backward /usr/local/include /usr/local/lib/gcc-lib/i686-pc-linux-gnu/3.2/include /usr/includeEnd of search list.tstrstream.C:1:21: strstream: No such file or directoryCompilation exited abnormally with code 1 at Mon Jul  8 00:28:19",RESOLVED          FIXED      
7286,Benjamin Kosnik,placement operator delete issue,"libstdc++ doesn't define placement operators:void operator delete(void *ptr,void *) throw()void operator delete[](void *ptr,void *) throw()such desrcibed in C++ standard (18.4.1,18.4.1.3-6,7)Try to compile attached sampleRelease:gcc3-c++-3.0.1-3Environment:Linux RedHat 7.2(Enigma)gcc3-c++-3.0.1-3libstdc++3-3.0.1-3How-To-Repeat:Try to compile attached sample",RESOLVED          FIXED      
7413,Benjamin Kosnik,Solaris 2.6 ctype<char>::classic_table returns incorrect value,"The Solaris 2.6 function ctype<char>::classic_table() returns a null pointer instead of the __ctype_mask.This causes all users of the ctype facet with default args to dump core when accessing the ctype member array _M_table, e.g. in the ctype::is function.One such example where this is used is in all istream::operator>> functions, which currently dump core.Release:gcc-3.1Environment:Solaris 2.6, probably Solaris 2.5 (not verified)GCC 3.1How-To-Repeat:Just call operator>> on an istream.",RESOLVED          FIXED      
7422,Benjamin Kosnik,strstreambuf frees buffer when beeing in frozen state,"The attached sample program shows that strstreambuf frees his buffer also he was forced to frozen mode by calling the str() method. Because of that the generated string can be overwritten by code that reallocates this memory.This is a regression to gcc 3.1!I have not checked that, but possibly this is related to http://gcc.gnu.org/ml/gcc-patches/2002-05/msg01204.html and/or http://gcc.gnu.org/ml/libstdc++/2002-06/msg00089.html.Release:3.1.1Environment:System: independentArchitecture: independenthost: independentbuild: independenttarget: independentConfigured with: /home/schiele/gcccvs/gcc-3.1.1/configure --enable-threads=posix --prefix=/opt/Pkg/Linux/i686/gcc311 --enable-languages=c,c++,f77,objc --disable-libgcj --with-gxx-include-dir=/opt/Pkg/Linux/i686/gcc311/include/g++ --with-system-zlib --enable-shared --enable-__cxa_atexit i486-suse-linuxHow-To-Repeat:# g++ -o strstreambug strstreambug.cc[header warning]# ./strstreambugs(0x804a118):Texts(0x804a118):סעףפץצקרשתshould be (gcc-3.1):# ./strstreambugs(0x804a118):Texts(0x804a118):Text",RESOLVED          FIXED      
7442,Benjamin Kosnik,cxxabi.h does not match the C++ ABI,"There is a couple of discrepancies between G++ implementation of 'cxxabi.h' file and the C++ ABI.I. Member name difference-------------------------The C++ ABI defines that...2.9.5 RTTI Layout 9 The abi::__pointer_to_member_type_info type adds one field to abi::__pbase_type_info:       class __pointer_to_member_type_info : public __pbase_type_info {	public:	  const abi::__class_type_info *__context;      };G++ implementation is the following:--- cxxabi.h ------------------------------------------------------------class __pointer_to_member_type_info  : public __pbase_type_info{/* abi defined member variables */public:  __class_type_info *__context_class;   /* class of the member */-------------------------------------------------------------------------II. Class name difference-------------------------Class '__base_class_type_info' specifyed by the C++ ABI, declared with the name '__base_class_info' in the G++'s cxxabi.h file. Moreover, name of the member __base_type is different too.2.9.5 RTTI Layout 6. Three different types are used to represent user type information: __base_info[] is an array of base class descriptions -- one for every direct proper base. Each description is of the type:       struct abi::__base_class_type_info {	public:         const __class_type_info *__base_type;	 long __offset_flags;	 enum __offset_flags_masks {	   __virtual_mask = 0x1,	   __public_mask = 0x2,	   __offset_shift = 8	 };      };--- G++'s cxxabi.h ------------------------------------------------------class __base_class_info{/* abi defined member variables */public:  const __class_type_info *__base;    /* base class type */  long __offset_flags;            /* offset and info */-------------------------------------------------------------------------Release:3.1.1Environment:host: i686-pc-linux-gnubuild: i686-pc-linux-gnutarget: i686-pc-linux-gnuconfigured with: ./configure --enable-threads",RESOLVED          FIXED      
7461,Benjamin Kosnik,ctype<char>::classic_table() returns offset array on Cygwin,"For the Cygwin OS, the ctype mask array returned by ctype<char>::classic_table() is offset by 1.  This means that one cannot conveniently look up a character's mask simply referring to the character's integer offset itself,e.g.,	const ctype_base::mask* table = ctype<char>::classic_table();	bool is_space = table[' '] & ctype_base::space;Instead, you have to manually offset the index by 1 to get the correct character:	// For Cygwin, the ASCII space is actually stored	// in offset 33 in the array	bool is_space = table[' ' + 1] & ctype_base::space;The C++ standard 22.2.1.3.2 seems to imply that you should be able to do the former.  Even if current libstdc++ behavior is conformant, it is a nuissance and hinders portability.  This issue directly impacts a user when deriving from the ctype<char> class to change the default character mask (for instance, making an underscore appear as whitespace).  Not that this matters, but MSVC performs correctly on the first case.Release:gcc 3.1.1Environment:i686-pc-cygwin, Windows 2000How-To-Repeat:The attached program simply uses a derived class to access the protected ctype<char>::table() function and demonstrate the above behavior.  The is() function works as expected, but the direct table lookup of a space character does not work.The program will not abort if you replace table[' '] with table[' ' + 1] to account for the offset of classic_table().",RESOLVED          FIXED      
7636,Benjamin Kosnik,ofstream corrupts first 16k of text file output,"The following C++ program behaves incorrectly (see attached). Examining testio.txt reveals the first 16k bytes or so to be garbage, followed by valid data that would have ordinarily appeared at that point. Lower values for i's limit, like 16000, work fine.Looks like this is fixed in 3.0.4 (djgpp/v2gnu/gcc304b.zip) and also in 3.1 (djgpp/v2gnu/gcc31b.zip). Just wanted to mention it in case someone wanted to include it in the regression tests.Release:3.0.3Environment:DJGPP under Win2KHow-To-Repeat:#include <fstream>main(){    using namespace std;    ofstream tout(""testio.txt"");    for (int i = 0; i < 16500; i++)    {        if (i != 0 && i % 72 == 0)            tout << '\n';        tout << 'x';    }}",RESOLVED          FIXED      
7849,Benjamin Kosnik,libstdc++.so: undefined reference to std::messages<wchar_t>::do_get[...] causes failure during building of abi_check,"For the last 2 days, I have been unable to fully bootstrap the cvs HEAD sources.  Each time I build from a clean build dir, it fails when trying to build abi_check in libstdc++.  Specifically, g++ complains: [...]/libstdc++-v3/src/.libs/libstdc++.so: undefined reference to `std::messages<wchar_t>::do_get(int, int, int, std::basic_string<wchar_t, std::char_traits<wchar_t>, std::allocator<wchar_t> > const&) const'Release:20020907Environment:2.4.19-rc1-ac3-gentoo-r1 #3 Mon Aug 5 05:59:51 EDT 2002 i686 Pentium III (Katmai) GenuineIntel GNU/LinuxGNU ld version 2.13.90.0.4 20020814glibc-2.2.5How-To-Repeat:This is the configuration arguments I use to build the gcc suite:CFLAGS=""-march=pentium3 -mfpmath=sse -mmmx -msse -pipe"" \CXXFLAGS=""-march=pentium3 -mfpmath=sse -mmmx -msse -pipe -Wno-deprecated"" \../gcc/configure  --build=i686-pc-linux-gnu --host=i686-pc-linux-gnu --target=i686-pc-linux-gnu --prefix=/usr --srcdir=../../gcc/gcc --mandir=/usr/share/man --infodir=/usr/share/info --program-suffix=-3.3 --with-gcc-version-trigger=/usr/src/gcc/gcc/gcc/version.c --with-system-zlib --with-gxx-include-dir=/usr/include/g++-v33 --with-local-prefix=/usr/local --with-x --without-included-gettext --enable-shared --enable-languages=c,c++,ada,f77,objc,java --enable-threads=posix --enable-long-long --enable-objc-gc --enable-cstdio=stdio --enable-clocale=generic --enable-__cxa_atexit --enable-version-specific-runtime-libs --enable-shared --enable-interpreter --enable-nls --disable-checkingRun 'make bootstrap' from TLD of build dir after configuring.",RESOLVED          FIXED      
7926,Benjamin Kosnik,i486 instructions in header files make c++ programs crash on i386,"When configuring and building gcc 3.2 on a i386-linux machinec++ programs fail because you use 486 code in inline assemblerstatements in your atomicity headers (xadd, cmpxchg and others)libjava has the same problems. It would be nice if you couldrework the header files to use non-atomic i386 instructionsif such behaviour is required. A special configure optionwould do, too. If you need help how the appropriate headersfor i386 might look like, mail me, but I haven't got thefiles around here at the university, so it might take sometime to send them in...Release:gcc-3.2Environment:i388 running Linux 2.2.21 and glibc 2.2.5How-To-Repeat:You can't repeat it unless you still have an old i386 around...",RESOLVED          FIXED      
7986,Benjamin Kosnik,Problems with demangling (__cxa_demangle()),"I used a simple program which calls __cxa_demangle function. These mangled names were demangled wrong:_Z1fA37_iPS_ -> f(int[37], int[37]*), should be: f(int[37], int (*) [37])_Z1fM1AFivEPS0_ -> f(int (A::*)(), int ()()*), should be: f(int (A::*)(), int (*)())_Z1fPFPA1_ivE -> f(int (*) [1] (*)()), should be: f(int (*(*)()) [1])_Z1fPKM1AFivE -> f(int (A::*)() const*), should be: f(int (A::* const*)())_Z1jM1AFivEPS1_ -> j(int (A::*)(), int (A::*)()*), should be: j(int (A::*)(), int (A::**)())_Z1sPA37_iPS0_ -> s(int (*) [37], int (*) [37]*), should be: s(int (*) [37], int (**) [37])_Z3fooA30_A_i -> foo(int[][30]), should be: foo(int[30][])_Z3kooPA28_A30_i -> koo(int[30] (*) [28]), should be: koo(int (*) [28][30])_ZlsRKU3fooU4bart1XS0_ -> operator<<(foo bart X const&, bart X), should be: operator<<(X const foo bart&, X const foo bart)And in these cases __cxa_demangle() returned -2 (Invalid mangled name):_Z1fM1AKFivE -> _Z1fM1AKFivE, should be: f(int (A::*)() const)_Z3absILd1c1f1496f8a44219EEvv -> _Z3absILd1c1f1496f8a44219EEvv, should be: void abs<3.14159e-173>()_Z3absILd40092acd9e83e426EEvv -> _Z3absILd40092acd9e83e426EEvv, should be: void abs<3.1459>()_Z3absILe08042191a6cc56a2fe117becEEvv -> _Z3absILe08042191a6cc56a2fe117becEEvv, should be: void abs<1.234e-2345l>()_Z3absILe804bfff8000000000000000EEvv -> _Z3absILe804bfff8000000000000000EEvv, should be: void abs<-1l>()_Z3absILf4016147bEEvv -> _Z3absILf4016147bEEvv, should be: void abs<2.345f>()_Z3absILfc1800000EEvv -> _Z3absILfc1800000EEvv, should be: void abs<-16f>()Release:gcc 3.2, gcc 3.1Environment:Red Hat Linux 8.0betaHow-To-Repeat:Feed those mangled names to __cxa_demangle() function and check the results of demangling.",RESOLVED          FIXED      
8071,Benjamin Kosnik,basic_ostream::operator<<(streambuf*) loops forever if streambuf::underflow() leaves gptr() NULL,"According to my reading of the C++ standard, a subclass of std::basic_streambuf<> is allowed to declare its uflow() and underflow() functions such that they don't fill their buffers.  This is useful, for instance, if the streambuf is a wrapper around another type that does its own buffering.However, libstdc++'s basic_ostream::operator<<(streambuf*) operator loops forever when passed such a streambuf, repeatedly invoking underflow() and never actually extracting any data from the buffer.I've attached some code written by Matt Austern, and published in the C++ Users Journal.  This code creates a streambuf and istream that wraps a C FILE*, so I/O can safely be intermixed on the two types.  Using operator<< on the syncbuf this code declares illustrates the problem.Release:gcc-3.1Environment:sparc-sun-solaris2.8How-To-Repeat:Compile the attached code.  (It looks like gnats won't allow me to attach more than one file in the initial bug report, so I've just attached the header.  I'll attach the body momentarily.)",RESOLVED          FIXED      
8172,Benjamin Kosnik,undefined reference to operator+ for string,"The operator+ for string is missing when compiled with -fno-implicit-template.The error occurs at link time as follows:> /usr/apps/gcc/3.2/bin/g++ -o noplus noplus.o    noplus.o: In function `main':noplus.o(.text+0xd8): undefined reference to `std::basic_string<char, std::char_traits<char>, std::allocator<char> > std::operator+<char, std::char_traits<char>, std::allocator<char> >(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'collect2: ld returned 1 exit statusRelease:3.2Environment:System: Linux tux75.llnl.gov 2.4.9-31smp #1 SMP Tue Feb 26 06:55:00 EST 2002 i686 unknownArchitecture: i686	host: i686-pc-linux-gnubuild: i686-pc-linux-gnutarget: i686-pc-linux-gnuconfigured with: ../gcc-3.2/configure --prefix=/usr/apps/gcc/3.2How-To-Repeat:Program text:#include <string>#include <iostream>using namespace std;int main() {  string s1 = ""first"";  string s2 = ""second"";  string s3, s4;  // This will not link.  s3 = s1 + s2;  // This works.  s4 = s1;  s4 += s2;  cout << ""s1 = "" << s1 << endl;  cout << ""s2 = "" << s2 << endl;  cout << ""s3 = "" << s3 << endl;  cout << ""s4 = "" << s4 << endl;  return 0;}Compile command:g++ -fno-implicit-templates noplus.cc",RESOLVED          FIXED      
8197,Benjamin Kosnik,std::sin(float) causes undefined reference to sinf,"Compiling a very simple Program using std::sin(float)causes linker errors (undefined reference to sinf).See below for details.Release:gcc-3.2Environment:Sun sparc Solaris 9, GNU-ld 2.13+elf patch from cvsgcc passed all but a few test from make checkHow-To-Repeat:theseus$ cat m.cc#include <cmath>int main () {        float a; std::sin(a);}theseus$ g++ -Wall m.cc/tmp/ccOiTTC3.o: In function `std::sin(float)':/tmp/ccOiTTC3.o(.gnu.linkonce.t._ZSt3sinf+0xc): undefined reference to `sinf'collect2: ld returned 1 exit statustheseus$",RESOLVED          FIXED      
8230,Benjamin Kosnik,Buggy allocator behaviour,"std:allocator<T>::allocate(n) does not check for possible overflow before ""folding"" sizeof(T) * n.Release:all GCC releases.Environment:Plateform independent, though the program belowdisplays the buggy behaviour on IA32.",RESOLVED          FIXED      
8258,Benjamin Kosnik,basic_istream::readsome() with default buffer change stream state to ios_base::eofbit,"Possibly this is not a bug, but the g++ v3.1 version of basic_istream::readsome() don`t change the stream state in case of using default basic_streambuf constructor (zero length buffer). Here is an example:#include <istream>#include <cassert>using namespace std;class mybuf : public basic_streambuf <char> {	};int main ()  {    char arr[10];    mybuf sbuf;    basic_istream <char, char_traits<char> > istr(&sbuf);    assert (istr.rdstate() == ios_base::goodbit);    assert (istr.readsome(arr, 10) == 0);    assert (istr.rdstate() == ios_base::goodbit);  return 0; }  The result here is that the last assertion is failing with g++ v3.2.  I found in ISO/IEC 14882 C++ standard (27.6.1.3.30) only 2 possibilities of changing the stream state related to readsome():1. if !good() - setstate (failbit)2. if rdbuf()->in_avail() == -1 - setstate (eofbit)  The example above gives:1. good() == true2. rdbuf()->in_avail() == 0 (!= -1)so, I can expect that stream state will not change.  I made a diff for 3.1 and 3.2 versions of bits/istream.tcc and noted that here are the following changes which give such unexpected (for me) behavior:streamsize __num = this->rdbuf()->in_avail();3.1:if (__num != static_cast <streamsize>(__eof)) { ...read from buffer... }else this->setstate (ios_base::eofbit)3.2:if (__num > 0) { ...read from buffer... }else this->setstate (ios_base::eofbit)  Shure, changing the stream state in such case can be useful, but my opinion is that previous version was more standard conformant.Release:g++ v3.2Environment:Red Hat linux 8.0 releaseHow-To-Repeat:Compile attached testcaes with g++ v3.2 and run.",RESOLVED          FIXED      
8318,Benjamin Kosnik,Not all wide character based prototypes are included within #ifdef _GLIBCPP_USE_WCHAR_T,"The following files contain prototypes of wide characterobjects and functions that should be included in between#ifdef _GLIBCPP_USE_WCHAR_T ... #endif, so that when the compiler is compiled with --disable-c-mbchar that code is not included:include/c++/3.2/iosfwdinclude/c++/3.2/iomanipinclude/c++/3.2/bits/stringfwd.hinclude/c++/3.2/bits/basic_string.tccRelease:gcc-3.2Environment:RedHat Linux 7.3",RESOLVED          FIXED      
8348,Benjamin Kosnik,fail() flag is set in istringstream when eof() flag is set !,"fail() returns true when an operation on istringstream succeeds and reaches the end.Release:g++ 3.2Environment:Solaris.Reading specs from /opt/global/pkg/gcc-3.2/lib/gcc-lib/sparc-sun-solaris2.7/3.2/specsConfigured with: ../gcc-3.2/configure --prefix=/opt/global/pkg/ : (reconfigured) ../gcc-3.2/configure --prefix=/opt/global/pkg/gcc-3.2Thread model: posixgcc version 3.2How-To-Repeat:run the program without arguments, tellg() fails because of the flag ...",RESOLVED          FIXED      
8430,Benjamin Kosnik,Found a memory leak in libstdc++-v3,"Apparently I have uncovered a memory leak in the recent libstc++.Here's a very small test program that was compiled using g++ 3.2 on a x86 Linux machine.#include <string>#include <vector>using namespace std;int main(){	string aaa(""a"");	return 0;}Running this program under valgrind (both 1.0.4 and 1.1.0) revealed the following report:> g++ -g2 test.cc> valgrind --leak-check=yes --show-reachable=yes ./a.out==15525== Memcheck, a.k.a. Valgrind, a memory error detector for x86-linux.==15525== Copyright (C) 2000-2002, and GNU GPL'd, by Julian Seward.==15525== Using valgrind-1.1.0, a program instrumentation system for x86-linux.==15525== Copyright (C) 2000-2002, and GNU GPL'd, by Julian Seward.==15525== Estimated CPU clock rate is 1999 MHz==15525== For more details, rerun with: -v==15525== ==15525== ==15525== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)==15525== malloc/free: in use at exit: 640 bytes in 1 blocks.==15525== malloc/free: 1 allocs, 0 frees, 640 bytes allocated.==15525== For counts of detected errors, rerun with: -v==15525== searching for pointers to 1 not-freed blocks.==15525== checked 4438348 bytes.==15525== ==15525== definitely lost: 0 bytes in 0 blocks.==15525== possibly lost:   0 bytes in 0 blocks.==15525== still reachable: 640 bytes in 1 blocks.==15525== ==15525== 640 bytes in 1 blocks are still reachable in loss record 1 of 1==15525==    at 0x40159F4B: __builtin_new (in /opt/valgrind/lib/valgrind/valgrind.so)==15525==    by 0x40159F87: operator new(unsigned) (vg_clientfuncs.c:140)==15525==    by 0x4029FBEE: std::__new_alloc::allocate(unsigned) (in /usr/lib/libstdc++.so.5.0.0)==15525==    by 0x4029F7F3: ??? (/home/zvi/t/gcc-3.2/libstdc++-v3/include/bits/stl_alloc.h:481)==15525== ==15525== LEAK SUMMARY:==15525==    definitely lost: 0 bytes in 0 blocks.==15525==    possibly lost:   0 bytes in 0 blocks.==15525==    still reachable: 640 bytes in 1 blocks.==15525== Sjowing, that some memory was allocated but was never freed (even when the program had completed its running).It is possible that the allocator allocates and releases memory during a program's lifetime (maintaining a memory ""cache""). However, the proper behaviour for it would be to release all allocated memory at program exit.This is the stack trace to the allocation call that had never released its memory:__libc_start_mainmainbasic_string_S_construct<const char *>_S_construct_aux<const char *>char* std::string::_S_construct<char const*>(char const*, char const*, std::allocator<char> const&, std::forward.......)std::string::_Rep::_S_create(unsigned, std::allocator<char> const&)std::allocator<char>::allocate(unsigned, void const *)std::__default_alloc_template<true, 0>::allocate(unsigned)std::__default_alloc_template<true, 0>::_S_refill(unsigned)std::__default_alloc_template<true, 0>::_S_chunk_alloc(unsigned, int &)Now since the memory allocation is global resource, one could possibly create a global object that during its destruction (when the program ends) would clean up all the existing ""chunks"" of memory, so that the program exits cleanly.I'd care to hear if anyone had noticed this problem, or have devised some solutions (otherwise, good memory leak detectors would always report leaks on programs using STL).Thanks,	Sefer.Release:libstdc++-v3 (with gcc-3.2)Environment:Linux Mandrake 9.0 on x86",RESOLVED          FIXED      
8463,Benjamin Kosnik,std::ios_base has a non-virtual destructor,"std::ios_base has a non-virtual destructor, when the standard clearly requires a virtual destructor.Release:gcc-3.2Environment:SUSE linux 7.0",RESOLVED          FIXED      
8475,Benjamin Kosnik,hash_map  error message at run time about __default_alloc_template/force_new not defined,"#include <ext/hash_map>using namespace __gnu_cxx;template class hash_map< int, int >;int main() { };> g++ -O3 test_hash.cpp -o test_hash> ./test_hash./test_hash: relocation error: ./test_hash: symbol _ZNSt24__default_alloc_templateILb1ELi0EE12_S_force_newE, version GLIBCPP_3.2 not defined in file libstdc++.so.5 with link time referenceRelease:gcc (GCC) 3.3 20021029Environment:linux P4",RESOLVED          FIXED      
8707,Benjamin Kosnik,make distclean fails,Release:3.2.1 x86/linuxEnvironment:RH 8How-To-Repeat:'make distclean' at toplevel,RESOLVED          FIXED      
8708,Benjamin Kosnik,__USE_MALLOC doesn't work,"Cannot __USE_MALLOC to get a malloc allocator.This is a regression from 2.95 and 2.96 based compilers.This is fixed in mainline with the use of GLIBCPP_FORCE_NEW.2002-10-18  Loren J. Rittle  <ljrittle@acm.org>	    Brad Spencer  <spencer@infointeractive.com> 	    (provided alternate patch and improvements)	* docs/html/23_containers/howto.html (GLIBCPP_FORCE_NEW): Document	new environment variable which replaces all uses of __USE_MALLOC	macro.	* docs/html/ext/howto.html (GLIBCPP_FORCE_NEW): Likewise.	(__mem_interface): Remove all references to old internal typedef.	* include/backward/alloc.h (__USE_MALLOC): Remove it and all	guarded code.	* include/bits/c++config (__USE_MALLOC): Update related error	message and comment.	* include/bits/stl_alloc.h (__USE_MALLOC): Remove it and all	guarded code.  Update all related comments.	(__mem_interface): Unconditionally replace it with __new_alloc.	However, leave the typedef around in case anyone used it.	(__default_alloc_template<>::_S_force_new): New class static.	(__default_alloc_template<>::allocate, deallocate): Add	run-time controlled feature similar to what __USE_MALLOC code	path had provided.	* src/stl-inst.cc (__USE_MALLOC): Remove it and all	guarded code.	* testsuite/21_strings/capacity.cc: Remove reference to __USE_MALLOC.	Add documentation on GLIBCPP_FORCE_NEW environment variable.	* testsuite/ext/allocators.cc: Likewise.Release:gcc-3.2.1 on x86/linuxEnvironment:RH 8",RESOLVED          FIXED      
8953,Benjamin Kosnik,make check gives two unexpected failures and ten unexpected successes,"make check for libstdc++-v3 fails ...Release:gcc-3.2.1Environment:Solaris x86 01/04 Release: SunOS brusen 5.8 Generic_108529-16 i86pc i386 i86pcHow-To-Repeat:Run ""make check"" ;-?",RESOLVED          FIXED      
9147,Benjamin Kosnik,Memory leak resulting from std::valarray->push_back(arg),"Memory leak in valarray and vg_clientfuncs.c:dave@dda:~/sf.net/geotechnica/projects/stratsection/test$ !vavalgrind --leak-check=yes --show-reachable=yes ./coltest==4378== valgrind-1.0.3, a memory error detector for x86 GNU/Linux.==4378== Copyright (C) 2000-2002, and GNU GPL'd, by Julian Seward.==4378== Estimated CPU clock rate is 552 MHz==4378== For more details, rerun with: -v==4378== Sum: 20RSum: 20==4378== ==4378== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)==4378== malloc/free: in use at exit: 2640 bytes in 3 blocks.==4378== malloc/free: 7 allocs, 4 frees, 2724 bytes allocated.==4378== For counts of detected errors, rerun with: -v==4378== searching for pointers to 3 not-freed blocks.==4378== checked 4400124 bytes.==4378== ==4378== definitely lost: 16 bytes in 1 blocks.==4378== possibly lost:   0 bytes in 0 blocks.==4378== still reachable: 2624 bytes in 2 blocks.==4378== ==4378== 16 bytes in 1 blocks are definitely lost in loss record 1 of 3==4378==    at 0x4004491B: malloc (vg_clientfuncs.c:100)==4378==    by 0x40044E84: realloc (vg_clientfuncs.c:262)==4378==    by 0x4038F83B: (within /lib/libc-2.2.5.so)==4378==    by 0x4033D166: (within /lib/libc-2.2.5.so)==4378== ==4378== 64 bytes in 1 blocks are still reachable in loss record 2 of 3==4378==    at 0x4004491B: malloc (vg_clientfuncs.c:100)==4378==    by 0x4033D35F: (within /lib/libc-2.2.5.so)==4378==    by 0x402C7560: (within /usr/lib/libstdc++.so.5.0.1)==4378==    by 0x40295420: (within /usr/lib/libstdc++.so.5.0.1)==4378== ==4378== 2560 bytes in 1 blocks are still reachable in loss record 3 of 3==4378==    at 0x40044A0B: __builtin_new (vg_clientfuncs.c:125)==4378==    by 0x40044A51: operator new(unsigned) (vg_clientfuncs.c:138)==4378==    by 0x402B81DB: (within /usr/lib/libstdc++.so.5.0.1)==4378==    by 0x402B80F0: (within /usr/lib/libstdc++.so.5.0.1)==4378== ==4378== LEAK SUMMARY:==4378==    definitely lost: 16 bytes in 1 blocks.==4378==    possibly lost:   0 bytes in 0 blocks.==4378==    still reachable: 2624 bytes in 2 blocks.==4378== dave@dda:~/sf.net/geotechnica/projects/stratsection/test$Release:g++-3.2Environment:GNU/LinuxHow-To-Repeat:Use std::valarray->push_back(arg).I would be willing to submit an example if I don't get flamed too hard.  If I get some time in a couple of weeks, I may even try to fix it.",RESOLVED          FIXED      
9523,Benjamin Kosnik,ios_base::sync_with_stdio clobbers standard streams,"If any changes are made to the state of the standard stream objects (cin, cout etc.) before ios_base::sync_with_stdio is called, that state is lost as a result of the call.Release:gcc-3.2.1Environment:Red Hat Linux 8.0How-To-Repeat:See attachment.",RESOLVED          FIXED      
9555,Benjamin Kosnik,ostream inserters fail to set badbit on exception,"The expected exit status of the program below is 0. When compiled with gcc 3.2.1 and the supplied libstdc++, it is 1, indicating that the inserter fails to set badbit when an exception occurs during output.RegardsMartinRelease:3.2.1How-To-Repeat:#include <ostream>#include <streambuf>struct buf: std::streambuf{    virtual int_type overflow (int_type) {        throw 0;        return -1;    }};int main (){    buf b;    std::ostream strm (&b);    strm.exceptions (std::ios::badbit);    try {        strm << 0;    }    catch (int) {        return !(strm.bad ());    }    catch (...) {        return 2;    }    return 3;}",RESOLVED          FIXED      
10132,Benjamin Kosnik,filebuf destructor throws exceptions,"The destructor of basic_filebuf calls basic_filebuf::close() without handling exceptions thrown by that function (close() calls use_facet and codecvt::out(), both of which may throw).Release:gcc-3.2.2Environment:Red Hat Linux 8.0How-To-Repeat:See attachment.",RESOLVED          FIXED      
3066,Benjamin Kosnik,configure.in generates bad arguments for cross compiling libraries,"configure.in translates --target=xxx to --host=xxx and sends --with-cross-host=${host_alias} down to compilations of libraries.  Additionally, when --with-cross-host is defined, libstdc++-v3 assumes that unless you declare the target as *-*-linux* you are using newlib and overrides whatever is appropriately determined by configure.target.Release:CVS treeEnvironment:FreeBSD 4.3 cross compiling for arm-wrs-vxworksHow-To-Repeat:I am configuring as follows:../configure --disable-shared --without-pic --prefix=/usr/wind/host/x86-freebsd --target=arm-wrs-vxworks",RESOLVED          FIXED      
9339,Benjamin Kosnik,"filebuf::pubsetbuf(0, 0) doesn't turn off buffering","Calling fb.pubsetbuf(0, 0) on a basic_filebuf<> fb only turns off the filebuf's own buffers, not the buffers in the underlying FILE*, so fb remains buffered in effect.Release:gcc-3.2.1Environment:Red Hat Linux 8.0How-To-Repeat:See attachment.",RESOLVED          FIXED      
10508,Benjamin Kosnik,libstdc++ from gcc 3.2.3 failed to boostrap on OpenBSD 3.2,"When linking libstdc++, gcc failed with following messages:abi_check.cc:121: Undefined symbol `std::basic_ostream<char, std::char_traits<char> >& std::endl<char, std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&)' referenced from text segment...Release:gcc 3.2.3Environment:OpenBSD 3.2, default installationHow-To-Repeat:./configuremake",RESOLVED          FIXED      
68418,Paolo Bonzini,ubsan complains about left shifts even with -fwrapv,"Left shifts into the sign bit is a kind of overflow, and the standard chooses to treat left shifts of negative values the same way.However, the -fwrapv option modifies the language to one where integers are defined as two's complement---which also defines entirely the behavior of shifts.  Sanitization of left shifts should be disabled when -fwrapv is in effect.",RESOLVED          FIXED      
17836,Paolo Bonzini,[4.0 Regression] ABI breakage for 16-byte vectors (non-Altivec ABI & ISA),"This bug was introduced when non-hardware-supported vectors were moved to BLKmode.It was present in the i386 backend as well, and was fixed byhttp://gcc.gnu.org/ml/gcc-patches/2004-07/msg02197.html; rth reviewed this patchsaying that ""an rs6000 maintainer should review this to be sure that all vectortypes of a given width should be treated identically"".The patch was subsequently updated and the update is athttp://gcc.gnu.org/ml/gcc-patches/2004-08/msg00379.html, together with ananalysis of all the backends that points out why the vector lowering patch doesnot break other backends.David Edelsohn rejected the patch, asking to provide a design for vectorargument passing; some of the discussions are at- http://gcc.gnu.org/ml/gcc-patches/2004-08/msg00379.html- http://gcc.gnu.org/ml/gcc-patches/2004-08/msg01531.htmlI am including Mark in the CC list because I believe that (alas) this patch willonly be applied once 4.0 branches as an interim measure.Paolo",RESOLVED          FIXED      
39172,Paolo Bonzini,libada parsing of multilib options,"The magic that groks the multilib set in libada is unable to process theone for the m68k.  Maybe someone who is configure/awk proficient can spotthe issue.  This works on other targets.	make -C ../.././gcc/ada ""MAKEOVERRIDES="" ""LDFLAGS="" ""LN_S=ln -s"" ""SHELL=/bin/sh"" ""GNATLIBFLAGS=-W -Wall -gnatpg "" ""GNATLIBCFLAGS=-g -O2 "" ""TARGET_LIBGCC2_CFLAGS="" ""THREAD_KIND=native"" ""TRACE=no"" ""MULTISUBDIR="" ""libsubdir=/home/joel/test-gcc/install/lib/gcc/m68k-rtems4.10/4.4.0"" ""objext=.o"" ""prefix=/home/joel/test-gcc/install"" ""exeext=.exeext.should.not.be.used "" 'CC=the.host.compiler.should.not.be.needed' ""GCC_FOR_TARGET=/home/joel/test-gcc/b-gcc2-m68k/./gcc/xgcc -B/home/joel/test-gcc/b-gcc2-m68k/./gcc/ -nostdinc -B/home/joel/test-gcc/b-gcc2-m68k/m68k-rtems4.10/newlib/ -isystem /home/joel/test-gcc/b-gcc2-m68k/m68k-rtems4.10/newlib/targ-include -isystem /home/joel/test-gcc/gcc-svn/newlib/libc/include -B/home/joel/test-gcc/install/m68k-rtems4.10/bin/ -B/home/joel/test-gcc/install/m68k-rtems4.10/lib/ -isystem /home/joel/test-gcc/install/m68k-rtems4.10/include -isystem /home/joel/test-gcc/install/m68k-rtems4.10/sys-include"" ""CFLAGS=-B/home/joel/test-gcc/bsp-install/m68k-rtems4.10/mcf5206elite/lib/   -W -Wall -Wwrite-strings -Wstrict-prototypes -Wmissing-prototypes"" gnatlib \	&& touch stamp-libadamake[3]: BEGIN { FS=""[ \t]*[,()][ \t]*""; ORS="" "" }; /^M68K_DEVICE/ { CPU=$3; FLAGS=$8; CPU_NAME=substr($2,2,length($2)-2); MLIB=substr($5,2,length($5)-2); if ( (CPU_NAME == MLIB) && (match(MLIB, ""^68"") || MLIB == ""cpu32"" || MLIB == ""5206"" || MLIB == ""5208"" || MLIB == ""5307"" || MLIB == ""5407"" || MLIB == ""5475"")) print  ""m""MLIB }: Command not foundmake[3]: Entering directory `/home/joel/test-gcc/b-gcc2-m68k/gcc/ada'make[3]: BEGIN { FS=""[ \t]*[,()][ \t]*""; ORS="" "" }; /^M68K_DEVICE/ { CPU=$3; FLAGS=$8; CPU_NAME=substr($2,2,length($2)-2); MLIB=substr($5,2,length($5)-2); if ( CPU == """") print  MLIB }: Command not found",RESOLVED          FIXED      
53087,Paolo Bonzini,[powerpc] Poor code from cstore expander,"Consider this test case:#define ONEUL (1UL)intfoo (long unsigned int a){  _Bool b;  long unsigned int cst, csui;  if (a > 27) goto return_zero;/*cst = 217579583UL;*/  cst = (ONEUL <<  0) | (ONEUL <<  1) | (ONEUL <<  2) |        (ONEUL <<  3) | (ONEUL <<  4) | (ONEUL <<  5) |        (ONEUL << 19) | (ONEUL << 20) | (ONEUL << 21) |        (ONEUL << 22) | (ONEUL << 23) | (ONEUL << 26) |        (ONEUL << 27);  csui = (ONEUL << a);  b = ((csui & cst) != 0);  if (b)    return 1;  else    return 0;return_zero:   return 0;}On powerpc64, with GCC trunk r186580, the code generated for this example is:foo:        .quad   .L.foo,.TOC.@tocbase,0        .previous        .type   foo, @function.L.foo:        cmpldi 7,3,27        bgt 7,.L3        li 10,1        lis 9,0xcf8        sld 3,10,3        ori 9,9,63        and. 10,3,9        mfcr 9        rlwinm 9,9,3,1        xori 3,9,1        blr        .p2align 4,,15.L3:.L2:        li 3,0        blrThe poor code results from PHI-OPT which converts away the if() statement. The .149t.optimized dump looks like this:;; Function foo (foo, funcdef_no=0, decl_uid=1996, cgraph_uid=0)foo (long unsigned int a){  _Bool D.2013;  long unsigned int csui;  int D.2008;  long unsigned int D.2005;  int D.2004;<bb 2>:  if (a_2(D) > 27)    goto <bb 4> (return_zero);  else    goto <bb 3>;<bb 3>:  D.2004_3 = (int) a_2(D);  csui_4 = 1 << D.2004_3;  D.2005_5 = csui_4 & 217579583;  D.2013_7 = D.2005_5 != 0;  D.2008_8 = (int) D.2013_7;  # D.2008_1 = PHI <D.2008_8(3), 0(2)>return_zero:  return D.2008_1;}The last statement in <bb 3> and the PHI are expanded as follows (compiled with -fno-tree-ter to make it easier to see as what RTL each statement expanded to):;; D.2013_7 = D.2005_5 != 0;(insn 15 14 16 (set (reg:CC 134)        (compare:CC (reg:DI 123 [ D.2005 ])            (const_int 0 [0]))) t.c:16 -1     (nil))(insn 16 15 17 (set (reg:DI 135)        (eq:DI (reg:CC 134)            (const_int 0 [0]))) t.c:16 -1     (nil))(insn 17 16 18 (set (reg:SI 133)        (subreg:SI (reg:DI 135) 4)) t.c:16 -1     (nil))(insn 18 17 19 (set (reg:QI 132)        (subreg:QI (reg:SI 133) 3)) t.c:16 -1     (nil))(insn 19 18 20 (set (reg:SI 136)        (xor:SI (subreg:SI (reg:QI 132) 0)            (const_int 1 [0x1]))) t.c:16 -1     (nil))(insn 20 19 0 (set (reg:DI 124 [ D.2013+-7 ])        (zero_extend:DI (subreg:QI (reg:SI 136) 3))) t.c:16 -1     (nil));; D.2008_8 = (int) D.2013_7;(insn 21 20 0 (set (reg:DI 120 [ D.2008+-4 ])        (sign_extend:DI (subreg/s/u:SI (reg:DI 124 [ D.2013+-7 ]) 4))) t.c:17 -1     (nil))This is a target problem, because i686, x86_64, mips, and arm all generate much better code for this example, for example:MIPS:foo:        .frame  $sp,0,$31               # vars= 0, regs= 0/0, args= 0, gp= 0        .mask   0x00000000,0        .fmask  0x00000000,0        .set    noreorder        .set    nomacro        sltu    $2,$4,28        beq     $2,$0,$L3        nop        li      $2,1                    # 0x1        sll     $4,$2,$4        li      $2,217579520                    # 0xcf80000        addiu   $2,$2,63        and     $2,$4,$2        j       $31        sltu    $2,$0,$2$L3:$L2 = .        j       $31        move    $2,$0ARM:foo:        @ Function supports interworking.        @ args = 0, pretend = 0, frame = 0        @ frame_needed = 0, uses_anonymous_args = 0        @ link register save eliminated.        cmp     r0, #27        bhi     .L3        mov     r3, #1        mov     r0, r3, asl r0        ldr     r3, .L5        and     r3, r0, r3        adds    r0, r3, #0        movne   r0, #1        bx      lr.L3:.L2:        mov     r0, #0        bx      lr.L6:        .align  2.L5:        .word   217579583",RESOLVED          FIXED      
53138,Paolo Bonzini,[4.7 Regression] spaceship operator miscompiled,"This program is miscompiled at -O2:typedef struct sreal{  unsigned sig;		/* Significant.  */  int exp;		/* Exponent.  */} sreal;sreal_compare (sreal *a, sreal *b){  if (a->exp > b->exp)    return 1;  if (a->exp < b->exp)    return -1;  if (a->sig > b->sig)    return 1;  return -(a->sig < b->sig);}sreal a[] = {   { 0, 0 },   { 1, 0 },   { 0, 1 },   { 1, 1 }};int main(){  int i, j;  for (i = 0; i <= 3; i++) {    for (j = 0; j < 3; j++) {      if (i < j && sreal_compare(&a[i], &a[j]) != -1) abort();      if (i == j && sreal_compare(&a[i], &a[j]) != 0) abort();      if (i > j && sreal_compare(&a[i], &a[j]) != 1) abort();    }  }}The problem is that the comparison on sig is compiled to this:	movl	(%rsi), %ecx	cmpl	%ecx, (%rdi)	sbbl	%edx, %edx	cmovbe	%edx, %eax	retbut sbbl only preserves the carry flag, not the zero flag.",RESOLVED          FIXED      
31827,Paolo Bonzini,limits-exprparen.c: Pid 2297 received a SIGSEGV for stack growth failure,"Executing on host: /test/gnu/gcc/objdir/gcc/xgcc -B/test/gnu/gcc/objdir/gcc/   -O0  -w -fno-show-column -c  -o limits-exprparen.o /test/gnu/gcc/gcc/gcc/testsuite/gcc.c-torture/compile/limits-exprparen.c    (timeout = 300)^MPid 2297 received a SIGSEGV for stack growth failure.^MPossble causes: insufficient memory or swap space,^Mor stack size exceeded maxssiz. ^Mxgcc: Internal error: Segmentation fault (program cc1)Fails at all optimizations.-bash-2.05b$ ./xgcc -B./ -vReading specs from ./specsTarget: hppa64-hp-hpux11.11Configured with: ../gcc/configure --with-gnu-as --with-as=/opt/gnu64/bin/as --with-ld=/usr/ccs/bin/ld --enable-shared --disable-nls --with-local-prefix=/opt/gnu64 --prefix=/opt/gnu64/gcc/gcc-4.3.0 --host=hppa64-hp-hpux11.11 --enable-threads=posix --disable-libmudflap --with-gmp=/opt/gnu64/gcc/gcc-4.3.0 --enable-languages=c,c++,fortran,objc,obj-c++,javaThread model: posixgcc version 4.3.0 20070503 (experimental)",RESOLVED          FIXED      
26188,Paolo Bonzini,[4.2 Regression] 4.2.0 fails to compile on FreeBSD 4.11,4.2.0 fails to compile on FreeBSD 4.11 as it multiply typedefsuintptr_t.  The tests in config/stdint.m4 don't test foruintptr_t unless uintmax_t happens to exist in one of thesystem header files.,RESOLVED          FIXED      
41122,Paolo Bonzini,libada multilib string parsing error,"AWK .. ackkk... acckk... help! Apparently libada has an awk program that can't handle the m68k multilib.  Calling all Awk experts.. :)make[2]: BEGIN { FS=""[ \t]*[,()][ \t]*""; ORS="" "" }; /^M68K_DEVICE/ { CPU=$3; FLAGS=$8; CPU_NAME=substr($2,2,length($2)-2); MLIB=substr($5,2,length($5)-2); if ( (CPU_NAME == MLIB) && (match(MLIB, ""^68"") || MLIB == ""cpu32"" || MLIB == ""5206"" || MLIB == ""5208"" || MLIB == ""5307"" || MLIB == ""5329"" || MLIB == ""5407"" || MLIB == ""5475"")) print  ""m""MLIB }: Command not foundmake[2]: Entering directory `/home/joel/test-gcc/b-gcc2-m68k/m68k-rtems4.10/libada'make[2]: BEGIN { FS=""[ \t]*[,()][ \t]*""; ORS="" "" }; /^M68K_DEVICE/ { CPU=$3; FLAGS=$8; CPU_NAME=substr($2,2,length($2)-2); MLIB=substr($5,2,length($5)-2); if ( CPU == """") print  MLIB }: Command not found/home/joel/test-gcc/gcc-4.3.4/libada/../gcc/config/m68k/t-mlibs:27: *** Error default cpu '' is not in multilib set ''.  Stop.make[2]: Leaving directory `/home/joel/test-gcc/b-gcc2-m68k/m68k-rtems4.10/libada'make[1]: *** [all-target-libada] Error 2make[1]: *** Waiting for unfinished jobs....",RESOLVED          FIXED      
45292,Paolo Bonzini,[4.5/4.6 regression] libgomp test failures for i586-linux,"When configured for i586-linux, there are extralibgomp test failures:FAIL: libgomp.c/nqueens-1.c execution testFAIL: libgomp.c/pr39591-1.c execution testFAIL: libgomp.c/pr39591-2.c execution testFAIL: libgomp.c/sort-1.c execution testFAIL: libgomp.c/task-2.c execution testFAIL: libgomp.c/task-3.c execution testGcc 4.4.4 works fine.",RESOLVED          FIXED      
44970,Paolo Bonzini,[4.6 regression] Revision 162270 failed to bootstrap,"On Linux/ia32, revision 162270:http://gcc.gnu.org/ml/gcc-cvs/2010-07/msg00624.htmlcaused:make[6]: Leaving directory `/export/gnu/import/svn/gcc-test/bld'Comparing stages 2 and 3warning: gcc/cc1obj-checksum.o differswarning: gcc/cc1plus-checksum.o differswarning: gcc/cc1-checksum.o differsBootstrap comparison failure!gcc/dwarf2out.o differsgcc/i386.o differsgcc/java/expr.o differsgcc/reload.o differsgcc/reg-stack.o differsgcc/recog.o differslibiberty/hashtab.o differsmake[5]: *** [compare] Error 1On Linux/x86-64, it caused:FAIL: gcc.c-torture/execute/nest-stdar-1.c execution,  -O3 -fomit-frame-pointerFAIL: gcc.c-torture/execute/nest-stdar-1.c execution,  -O3 -gFAIL: gcc.c-torture/execute/pr44575.c execution,  -O1FAIL: gcc.c-torture/execute/pr44575.c execution,  -O2FAIL: gcc.c-torture/execute/pr44575.c execution,  -O2 -fltoFAIL: gcc.c-torture/execute/pr44575.c execution,  -O2 -fwhoprFAIL: gcc.c-torture/execute/pr44575.c execution,  -O3 -fomit-frame-pointerFAIL: gcc.c-torture/execute/pr44575.c execution,  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functionsFAIL: gcc.c-torture/execute/pr44575.c execution,  -O3 -fomit-frame-pointer -funroll-loopsFAIL: gcc.c-torture/execute/pr44575.c execution,  -O3 -gFAIL: gcc.c-torture/execute/pr44575.c execution,  -OsFAIL: gcc.c-torture/execute/stdarg-1.c execution,  -O3 -fomit-frame-pointerFAIL: gcc.c-torture/execute/stdarg-1.c execution,  -O3 -gFAIL: gcc.c-torture/execute/stdarg-3.c execution,  -O1FAIL: gcc.c-torture/execute/stdarg-3.c execution,  -O2FAIL: gcc.c-torture/execute/stdarg-3.c execution,  -O2 -fltoFAIL: gcc.c-torture/execute/stdarg-3.c execution,  -O2 -fwhoprFAIL: gcc.c-torture/execute/stdarg-3.c execution,  -O3 -fomit-frame-pointerFAIL: gcc.c-torture/execute/stdarg-3.c execution,  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functionsFAIL: gcc.c-torture/execute/stdarg-3.c execution,  -O3 -fomit-frame-pointer -funroll-loopsFAIL: gcc.c-torture/execute/stdarg-3.c execution,  -O3 -gFAIL: gcc.c-torture/execute/stdarg-3.c execution,  -OsFAIL: gcc.c-torture/execute/stdarg-4.c execution,  -O1FAIL: gcc.c-torture/execute/stdarg-4.c execution,  -O2FAIL: gcc.c-torture/execute/stdarg-4.c execution,  -O2 -fltoFAIL: gcc.c-torture/execute/stdarg-4.c execution,  -O2 -fwhoprFAIL: gcc.c-torture/execute/stdarg-4.c execution,  -O3 -fomit-frame-pointerFAIL: gcc.c-torture/execute/stdarg-4.c execution,  -O3 -gFAIL: gcc.c-torture/execute/stdarg-4.c execution,  -OsFAIL: gcc.c-torture/execute/va-arg-26.c execution,  -O3 -fomit-frame-pointerFAIL: gcc.c-torture/execute/va-arg-26.c execution,  -O3 -gFAIL: gcc.target/i386/amd64-abi-5.c execution testFAIL: gcc.target/i386/vararg-3.c execution testFAIL: gcc.target/i386/vararg-7.c execution test",RESOLVED          FIXED      
41569,Paolo Bonzini,.../prev-gcc/xgcc used for the install step of the lto-plugin,"make[4]: Entering directory `/scratch/packages/gcc/snap/gcc-snapshot-20091004/build/lto-plugin'/bin/sh ./libtool --tag=CC   --mode=link gnatgcc -Wall -Werror -g -O2   -o liblto_plugin.la -rpath /usr/lib/gcc-snapshot/libexec/gcc/i486-linux-gnu/4.5.0 lto-plugin.lo -lelf -L../libiberty/pic -liberty libtool: link:  /scratch/packages/gcc/snap/gcc-snapshot-20091004/build/./prev-gcc/xgcc -B/scratch/packages/gcc/snap/gcc-snapshot-20091004/build/./prev-gcc/ -B/usr/lib/gcc-snapshot/i486-linux-gnu/bin/ -B/usr/lib/gcc-snapshot/i486-linux-gnu/bin/ -B/usr/lib/gcc-snapshot/i486-linux-gnu/lib/ -isystem /usr/lib/gcc-snapshot/i486-linux-gnu/include -isystem /usr/lib/gcc-snapshot/i486-linux-gnu/sys-include    -shared  .libs/lto-plugin.o   -lelf -L/scratch/packages/gcc/snap/gcc-snapshot-20091004/build/libiberty/pic -liberty    -Wl,-soname -Wl,liblto_plugin.so.0 -o .libs/liblto_plugin.so.0.0.0./libtool: line 7985: /scratch/packages/gcc/snap/gcc-snapshot-20091004/build/./prev-gcc/xgcc: No such file or directorymake[4]: *** [liblto_plugin.la] Error 127make[4]: Leaving directory `/scratch/packages/gcc/snap/gcc-snapshot-20091004/build/lto-plugin'make[3]: *** [install-lto-plugin] Error 2make[3]: Leaving directory `/scratch/packages/gcc/snap/gcc-snapshot-20091004/build'make[2]: *** [install] Error 2Here, gnatgcc is the compiler used to boostrap.",RESOLVED          FIXED      
42872,Paolo Bonzini,[4.5 regression] Revision 156232 failed many libgomp tests,"On Linux/ia32, revision 156232:http://gcc.gnu.org/ml/gcc-cvs/2010-01/msg00700.htmlcaused:FAIL: libgomp.fortran/allocatable1.f90  -O0  (test for excess errors)FAIL: libgomp.fortran/allocatable1.f90  -O1  (test for excess errors)FAIL: libgomp.fortran/allocatable1.f90  -O2  (test for excess errors)FAIL: libgomp.fortran/allocatable1.f90  -O3 -fomit-frame-pointer  (test for excess errors)FAIL: libgomp.fortran/allocatable1.f90  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (test for excess errors)FAIL: libgomp.fortran/allocatable1.f90  -O3 -fomit-frame-pointer -funroll-loops  (test for excess errors)FAIL: libgomp.fortran/allocatable1.f90  -O3 -g  (test for excess errors)FAIL: libgomp.fortran/allocatable1.f90  -Os  (test for excess errors)FAIL: libgomp.fortran/allocatable2.f90  -O0  (test for excess errors)FAIL: libgomp.fortran/allocatable2.f90  -O1  (test for excess errors)FAIL: libgomp.fortran/allocatable2.f90  -O2  (test for excess errors)FAIL: libgomp.fortran/allocatable2.f90  -O3 -fomit-frame-pointer  (test for excess errors)FAIL: libgomp.fortran/allocatable2.f90  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (test for excess errors)FAIL: libgomp.fortran/allocatable2.f90  -O3 -fomit-frame-pointer -funroll-loops  (test for excess errors)FAIL: libgomp.fortran/allocatable2.f90  -O3 -g  (test for excess errors)FAIL: libgomp.fortran/allocatable2.f90  -Os  (test for excess errors)FAIL: libgomp.fortran/appendix-a/a.33.3.f90  -O  (test for excess errors)FAIL: libgomp.fortran/appendix-a/a.38.1.f90  -O  (test for excess errors)FAIL: libgomp.fortran/appendix-a/a.40.1.f90  -O  (test for excess errors)FAIL: libgomp.fortran/character1.f90  -O0  (test for excess errors)FAIL: libgomp.fortran/character1.f90  -O1  (test for excess errors)FAIL: libgomp.fortran/character1.f90  -O2  (test for excess errors)FAIL: libgomp.fortran/character1.f90  -O3 -fomit-frame-pointer  (test for excess errors)FAIL: libgomp.fortran/character1.f90  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (test for excess errors)FAIL: libgomp.fortran/character1.f90  -O3 -fomit-frame-pointer -funroll-loops  (test for excess errors)FAIL: libgomp.fortran/character1.f90  -O3 -g  (test for excess errors)FAIL: libgomp.fortran/character1.f90  -Os  (test for excess errors)FAIL: libgomp.fortran/character2.f90  -O0  (test for excess errors)FAIL: libgomp.fortran/character2.f90  -O1  (test for excess errors)FAIL: libgomp.fortran/character2.f90  -O2  (test for excess errors)FAIL: libgomp.fortran/character2.f90  -O3 -fomit-frame-pointer  (test for excess errors)FAIL: libgomp.fortran/character2.f90  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (test for excess errors)FAIL: libgomp.fortran/character2.f90  -O3 -fomit-frame-pointer -funroll-loops  (test for excess errors)FAIL: libgomp.fortran/character2.f90  -O3 -g  (test for excess errors)FAIL: libgomp.fortran/character2.f90  -Os  (test for excess errors)FAIL: libgomp.fortran/crayptr1.f90  -O0  (test for excess errors)FAIL: libgomp.fortran/crayptr1.f90  -O1  (test for excess errors)FAIL: libgomp.fortran/crayptr1.f90  -O2  (test for excess errors)FAIL: libgomp.fortran/crayptr1.f90  -O3 -fomit-frame-pointer  (test for excess errors)FAIL: libgomp.fortran/crayptr1.f90  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (test for excess errors)FAIL: libgomp.fortran/crayptr1.f90  -O3 -fomit-frame-pointer -funroll-loops  (test for excess errors)FAIL: libgomp.fortran/crayptr1.f90  -O3 -g  (test for excess errors)FAIL: libgomp.fortran/crayptr1.f90  -Os  (test for excess errors)FAIL: libgomp.fortran/crayptr2.f90  -O0  (test for excess errors)FAIL: libgomp.fortran/crayptr2.f90  -O1  (test for excess errors)FAIL: libgomp.fortran/crayptr2.f90  -O2  (test for excess errors)FAIL: libgomp.fortran/crayptr2.f90  -O3 -fomit-frame-pointer  (test for excess errors)FAIL: libgomp.fortran/crayptr2.f90  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (test for excess errors)FAIL: libgomp.fortran/crayptr2.f90  -O3 -fomit-frame-pointer -funroll-loops  (test for excess errors)FAIL: libgomp.fortran/crayptr2.f90  -O3 -g  (test for excess errors)FAIL: libgomp.fortran/crayptr2.f90  -Os  (test for excess errors)FAIL: libgomp.fortran/lib1.f90  -O0  (test for excess errors)FAIL: libgomp.fortran/lib1.f90  -O1  (test for excess errors)FAIL: libgomp.fortran/lib1.f90  -O2  (test for excess errors)FAIL: libgomp.fortran/lib1.f90  -O3 -fomit-frame-pointer  (test for excess errors)FAIL: libgomp.fortran/lib1.f90  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (test for excess errors)FAIL: libgomp.fortran/lib1.f90  -O3 -fomit-frame-pointer -funroll-loops  (test for excess errors)FAIL: libgomp.fortran/lib1.f90  -O3 -g  (test for excess errors)FAIL: libgomp.fortran/lib1.f90  -Os  (test for excess errors)FAIL: libgomp.fortran/lib2.f  -O0  (test for excess errors)FAIL: libgomp.fortran/lib2.f  -O1  (test for excess errors)FAIL: libgomp.fortran/lib2.f  -O2  (test for excess errors)FAIL: libgomp.fortran/lib2.f  -O3 -fomit-frame-pointer  (test for excess errors)FAIL: libgomp.fortran/lib2.f  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (test for excess errors)FAIL: libgomp.fortran/lib2.f  -O3 -fomit-frame-pointer -funroll-loops  (test for excess errors)FAIL: libgomp.fortran/lib2.f  -O3 -g  (test for excess errors)FAIL: libgomp.fortran/lib2.f  -Os  (test for excess errors)FAIL: libgomp.fortran/lib4.f90  -O0  (test for excess errors)FAIL: libgomp.fortran/lib4.f90  -O1  (test for excess errors)FAIL: libgomp.fortran/lib4.f90  -O2  (test for excess errors)FAIL: libgomp.fortran/lib4.f90  -O3 -fomit-frame-pointer  (test for excess errors)FAIL: libgomp.fortran/lib4.f90  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (test for excess errors)FAIL: libgomp.fortran/lib4.f90  -O3 -fomit-frame-pointer -funroll-loops  (test for excess errors)FAIL: libgomp.fortran/lib4.f90  -O3 -g  (test for excess errors)FAIL: libgomp.fortran/lib4.f90  -Os  (test for excess errors)FAIL: libgomp.fortran/lock-1.f90  -O0  (test for excess errors)FAIL: libgomp.fortran/lock-1.f90  -O1  (test for excess errors)FAIL: libgomp.fortran/lock-1.f90  -O2  (test for excess errors)FAIL: libgomp.fortran/lock-1.f90  -O3 -fomit-frame-pointer  (test for excess errors)FAIL: libgomp.fortran/lock-1.f90  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (test for excess errors)FAIL: libgomp.fortran/lock-1.f90  -O3 -fomit-frame-pointer -funroll-loops  (test for excess errors)FAIL: libgomp.fortran/lock-1.f90  -O3 -g  (test for excess errors)FAIL: libgomp.fortran/lock-1.f90  -Os  (test for excess errors)FAIL: libgomp.fortran/lock-2.f90  -O0  (test for excess errors)FAIL: libgomp.fortran/lock-2.f90  -O1  (test for excess errors)FAIL: libgomp.fortran/lock-2.f90  -O2  (test for excess errors)FAIL: libgomp.fortran/lock-2.f90  -O3 -fomit-frame-pointer  (test for excess errors)FAIL: libgomp.fortran/lock-2.f90  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (test for excess errors)FAIL: libgomp.fortran/lock-2.f90  -O3 -fomit-frame-pointer -funroll-loops  (test for excess errors)FAIL: libgomp.fortran/lock-2.f90  -O3 -g  (test for excess errors)FAIL: libgomp.fortran/lock-2.f90  -Os  (test for excess errors)FAIL: libgomp.fortran/nested1.f90  -O0  (test for excess errors)FAIL: libgomp.fortran/nested1.f90  -O1  (test for excess errors)FAIL: libgomp.fortran/nested1.f90  -O2  (test for excess errors)FAIL: libgomp.fortran/nested1.f90  -O3 -fomit-frame-pointer  (test for excess errors)FAIL: libgomp.fortran/nested1.f90  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (test for excess errors)FAIL: libgomp.fortran/nested1.f90  -O3 -fomit-frame-pointer -funroll-loops  (test for excess errors)FAIL: libgomp.fortran/nested1.f90  -O3 -g  (test for excess errors)FAIL: libgomp.fortran/nested1.f90  -Os  (test for excess errors)FAIL: libgomp.fortran/nestedfn1.f90  -O0  (test for excess errors)FAIL: libgomp.fortran/nestedfn1.f90  -O1  (test for excess errors)FAIL: libgomp.fortran/nestedfn1.f90  -O2  (test for excess errors)FAIL: libgomp.fortran/nestedfn1.f90  -O3 -fomit-frame-pointer  (test for excess errors)FAIL: libgomp.fortran/nestedfn1.f90  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (test for excess errors)FAIL: libgomp.fortran/nestedfn1.f90  -O3 -fomit-frame-pointer -funroll-loops  (test for excess errors)FAIL: libgomp.fortran/nestedfn1.f90  -O3 -g  (test for excess errors)FAIL: libgomp.fortran/nestedfn1.f90  -Os  (test for excess errors)FAIL: libgomp.fortran/nestedfn2.f90  -O0  (test for excess errors)FAIL: libgomp.fortran/nestedfn2.f90  -O1  (test for excess errors)FAIL: libgomp.fortran/nestedfn2.f90  -O2  (test for excess errors)FAIL: libgomp.fortran/nestedfn2.f90  -O3 -fomit-frame-pointer  (test for excess errors)FAIL: libgomp.fortran/nestedfn2.f90  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (test for excess errors)FAIL: libgomp.fortran/nestedfn2.f90  -O3 -fomit-frame-pointer -funroll-loops  (test for excess errors)FAIL: libgomp.fortran/nestedfn2.f90  -O3 -g  (test for excess errors)FAIL: libgomp.fortran/nestedfn2.f90  -Os  (test for excess errors)FAIL: libgomp.fortran/nestedfn3.f90  -O0  (test for excess errors)FAIL: libgomp.fortran/nestedfn3.f90  -O1  (test for excess errors)FAIL: libgomp.fortran/nestedfn3.f90  -O2  (test for excess errors)FAIL: libgomp.fortran/nestedfn3.f90  -O3 -fomit-frame-pointer  (test for excess errors)FAIL: libgomp.fortran/nestedfn3.f90  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (test for excess errors)FAIL: libgomp.fortran/nestedfn3.f90  -O3 -fomit-frame-pointer -funroll-loops  (test for excess errors)FAIL: libgomp.fortran/nestedfn3.f90  -O3 -g  (test for excess errors)FAIL: libgomp.fortran/nestedfn3.f90  -Os  (test for excess errors)FAIL: libgomp.fortran/omp_parse1.f90  -O0  (test for excess errors)FAIL: libgomp.fortran/omp_parse1.f90  -O1  (test for excess errors)FAIL: libgomp.fortran/omp_parse1.f90  -O2  (test for excess errors)FAIL: libgomp.fortran/omp_parse1.f90  -O3 -fomit-frame-pointer  (test for excess errors)FAIL: libgomp.fortran/omp_parse1.f90  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (test for excess errors)FAIL: libgomp.fortran/omp_parse1.f90  -O3 -fomit-frame-pointer -funroll-loops  (test for excess errors)FAIL: libgomp.fortran/omp_parse1.f90  -O3 -g  (test for excess errors)FAIL: libgomp.fortran/omp_parse1.f90  -Os  (test for excess errors)FAIL: libgomp.fortran/omp_parse2.f90  -O0  (test for excess errors)FAIL: libgomp.fortran/omp_parse2.f90  -O1  (test for excess errors)FAIL: libgomp.fortran/omp_parse2.f90  -O2  (test for excess errors)FAIL: libgomp.fortran/omp_parse2.f90  -O3 -fomit-frame-pointer  (test for excess errors)FAIL: libgomp.fortran/omp_parse2.f90  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (test for excess errors)FAIL: libgomp.fortran/omp_parse2.f90  -O3 -fomit-frame-pointer -funroll-loops  (test for excess errors)FAIL: libgomp.fortran/omp_parse2.f90  -O3 -g  (test for excess errors)FAIL: libgomp.fortran/omp_parse2.f90  -Os  (test for excess errors)FAIL: libgomp.fortran/omp_parse3.f90  -O0  (test for excess errors)FAIL: libgomp.fortran/omp_parse3.f90  -O1  (test for excess errors)FAIL: libgomp.fortran/omp_parse3.f90  -O2  (test for excess errors)FAIL: libgomp.fortran/omp_parse3.f90  -O3 -fomit-frame-pointer  (test for excess errors)FAIL: libgomp.fortran/omp_parse3.f90  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (test for excess errors)FAIL: libgomp.fortran/omp_parse3.f90  -O3 -fomit-frame-pointer -funroll-loops  (test for excess errors)FAIL: libgomp.fortran/omp_parse3.f90  -O3 -g  (test for excess errors)FAIL: libgomp.fortran/omp_parse3.f90  -Os  (test for excess errors)FAIL: libgomp.fortran/omp_parse4.f90  -O0  (test for excess errors)FAIL: libgomp.fortran/omp_parse4.f90  -O1  (test for excess errors)FAIL: libgomp.fortran/omp_parse4.f90  -O2  (test for excess errors)FAIL: libgomp.fortran/omp_parse4.f90  -O3 -fomit-frame-pointer  (test for excess errors)FAIL: libgomp.fortran/omp_parse4.f90  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (test for excess errors)FAIL: libgomp.fortran/omp_parse4.f90  -O3 -fomit-frame-pointer -funroll-loops  (test for excess errors)FAIL: libgomp.fortran/omp_parse4.f90  -O3 -g  (test for excess errors)FAIL: libgomp.fortran/omp_parse4.f90  -Os  (test for excess errors)FAIL: libgomp.fortran/pr27395-1.f90  -O0  (test for excess errors)FAIL: libgomp.fortran/pr27395-1.f90  -O1  (test for excess errors)FAIL: libgomp.fortran/pr27395-1.f90  -O2  (test for excess errors)FAIL: libgomp.fortran/pr27395-1.f90  -O3 -fomit-frame-pointer  (test for excess errors)FAIL: libgomp.fortran/pr27395-1.f90  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (test for excess errors)FAIL: libgomp.fortran/pr27395-1.f90  -O3 -fomit-frame-pointer -funroll-loops  (test for excess errors)FAIL: libgomp.fortran/pr27395-1.f90  -O3 -g  (test for excess errors)FAIL: libgomp.fortran/pr27395-1.f90  -Os  (test for excess errors)FAIL: libgomp.fortran/pr27395-2.f90  -O0  (test for excess errors)FAIL: libgomp.fortran/pr27395-2.f90  -O1  (test for excess errors)FAIL: libgomp.fortran/pr27395-2.f90  -O2  (test for excess errors)FAIL: libgomp.fortran/pr27395-2.f90  -O3 -fomit-frame-pointer  (test for excess errors)FAIL: libgomp.fortran/pr27395-2.f90  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (test for excess errors)FAIL: libgomp.fortran/pr27395-2.f90  -O3 -fomit-frame-pointer -funroll-loops  (test for excess errors)FAIL: libgomp.fortran/pr27395-2.f90  -O3 -g  (test for excess errors)FAIL: libgomp.fortran/pr27395-2.f90  -Os  (test for excess errors)FAIL: libgomp.fortran/pr32359.f90  -O  (test for excess errors)FAIL: libgomp.fortran/reduction1.f90  -O0  (test for excess errors)FAIL: libgomp.fortran/reduction1.f90  -O1  (test for excess errors)FAIL: libgomp.fortran/reduction1.f90  -O2  (test for excess errors)FAIL: libgomp.fortran/reduction1.f90  -O3 -fomit-frame-pointer  (test for excess errors)FAIL: libgomp.fortran/reduction1.f90  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (test for excess errors)FAIL: libgomp.fortran/reduction1.f90  -O3 -fomit-frame-pointer -funroll-loops  (test for excess errors)FAIL: libgomp.fortran/reduction1.f90  -O3 -g  (test for excess errors)FAIL: libgomp.fortran/reduction1.f90  -Os  (test for excess errors)FAIL: libgomp.fortran/reduction2.f90  -O0  (test for excess errors)FAIL: libgomp.fortran/reduction2.f90  -O1  (test for excess errors)FAIL: libgomp.fortran/reduction2.f90  -O2  (test for excess errors)FAIL: libgomp.fortran/reduction2.f90  -O3 -fomit-frame-pointer  (test for excess errors)FAIL: libgomp.fortran/reduction2.f90  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (test for excess errors)FAIL: libgomp.fortran/reduction2.f90  -O3 -fomit-frame-pointer -funroll-loops  (test for excess errors)FAIL: libgomp.fortran/reduction2.f90  -O3 -g  (test for excess errors)FAIL: libgomp.fortran/reduction2.f90  -Os  (test for excess errors)FAIL: libgomp.fortran/reduction3.f90  -O0  (test for excess errors)FAIL: libgomp.fortran/reduction3.f90  -O1  (test for excess errors)FAIL: libgomp.fortran/reduction3.f90  -O2  (test for excess errors)FAIL: libgomp.fortran/reduction3.f90  -O3 -fomit-frame-pointer  (test for excess errors)FAIL: libgomp.fortran/reduction3.f90  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (test for excess errors)FAIL: libgomp.fortran/reduction3.f90  -O3 -fomit-frame-pointer -funroll-loops  (test for excess errors)FAIL: libgomp.fortran/reduction3.f90  -O3 -g  (test for excess errors)FAIL: libgomp.fortran/reduction3.f90  -Os  (test for excess errors)FAIL: libgomp.fortran/reduction4.f90  -O0  (test for excess errors)FAIL: libgomp.fortran/reduction4.f90  -O1  (test for excess errors)FAIL: libgomp.fortran/reduction4.f90  -O2  (test for excess errors)FAIL: libgomp.fortran/reduction4.f90  -O3 -fomit-frame-pointer  (test for excess errors)FAIL: libgomp.fortran/reduction4.f90  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (test for excess errors)FAIL: libgomp.fortran/reduction4.f90  -O3 -fomit-frame-pointer -funroll-loops  (test for excess errors)FAIL: libgomp.fortran/reduction4.f90  -O3 -g  (test for excess errors)FAIL: libgomp.fortran/reduction4.f90  -Os  (test for excess errors)FAIL: libgomp.fortran/reduction6.f90  -O0  (test for excess errors)FAIL: libgomp.fortran/reduction6.f90  -O1  (test for excess errors)FAIL: libgomp.fortran/reduction6.f90  -O2  (test for excess errors)FAIL: libgomp.fortran/reduction6.f90  -O3 -fomit-frame-pointer  (test for excess errors)FAIL: libgomp.fortran/reduction6.f90  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (test for excess errors)FAIL: libgomp.fortran/reduction6.f90  -O3 -fomit-frame-pointer -funroll-loops  (test for excess errors)FAIL: libgomp.fortran/reduction6.f90  -O3 -g  (test for excess errors)FAIL: libgomp.fortran/reduction6.f90  -Os  (test for excess errors)FAIL: libgomp.fortran/reference1.f90  -O0  (test for excess errors)FAIL: libgomp.fortran/reference1.f90  -O1  (test for excess errors)FAIL: libgomp.fortran/reference1.f90  -O2  (test for excess errors)FAIL: libgomp.fortran/reference1.f90  -O3 -fomit-frame-pointer  (test for excess errors)FAIL: libgomp.fortran/reference1.f90  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (test for excess errors)FAIL: libgomp.fortran/reference1.f90  -O3 -fomit-frame-pointer -funroll-loops  (test for excess errors)FAIL: libgomp.fortran/reference1.f90  -O3 -g  (test for excess errors)FAIL: libgomp.fortran/reference1.f90  -Os  (test for excess errors)FAIL: libgomp.fortran/retval1.f90  -O0  (test for excess errors)FAIL: libgomp.fortran/retval1.f90  -O1  (test for excess errors)FAIL: libgomp.fortran/retval1.f90  -O2  (test for excess errors)FAIL: libgomp.fortran/retval1.f90  -O3 -fomit-frame-pointer  (test for excess errors)FAIL: libgomp.fortran/retval1.f90  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (test for excess errors)FAIL: libgomp.fortran/retval1.f90  -O3 -fomit-frame-pointer -funroll-loops  (test for excess errors)FAIL: libgomp.fortran/retval1.f90  -O3 -g  (test for excess errors)FAIL: libgomp.fortran/retval1.f90  -Os  (test for excess errors)FAIL: libgomp.fortran/retval2.f90  -O0  (test for excess errors)FAIL: libgomp.fortran/retval2.f90  -O1  (test for excess errors)FAIL: libgomp.fortran/retval2.f90  -O2  (test for excess errors)FAIL: libgomp.fortran/retval2.f90  -O3 -fomit-frame-pointer  (test for excess errors)FAIL: libgomp.fortran/retval2.f90  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (test for excess errors)FAIL: libgomp.fortran/retval2.f90  -O3 -fomit-frame-pointer -funroll-loops  (test for excess errors)FAIL: libgomp.fortran/retval2.f90  -O3 -g  (test for excess errors)FAIL: libgomp.fortran/retval2.f90  -Os  (test for excess errors)FAIL: libgomp.fortran/sharing1.f90  -O0  (test for excess errors)FAIL: libgomp.fortran/sharing1.f90  -O1  (test for excess errors)FAIL: libgomp.fortran/sharing1.f90  -O2  (test for excess errors)FAIL: libgomp.fortran/sharing1.f90  -O3 -fomit-frame-pointer  (test for excess errors)FAIL: libgomp.fortran/sharing1.f90  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (test for excess errors)FAIL: libgomp.fortran/sharing1.f90  -O3 -fomit-frame-pointer -funroll-loops  (test for excess errors)FAIL: libgomp.fortran/sharing1.f90  -O3 -g  (test for excess errors)FAIL: libgomp.fortran/sharing1.f90  -Os  (test for excess errors)FAIL: libgomp.fortran/sharing2.f90  -O0  (test for excess errors)FAIL: libgomp.fortran/sharing2.f90  -O1  (test for excess errors)FAIL: libgomp.fortran/sharing2.f90  -O2  (test for excess errors)FAIL: libgomp.fortran/sharing2.f90  -O3 -fomit-frame-pointer  (test for excess errors)FAIL: libgomp.fortran/sharing2.f90  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (test for excess errors)FAIL: libgomp.fortran/sharing2.f90  -O3 -fomit-frame-pointer -funroll-loops  (test for excess errors)FAIL: libgomp.fortran/sharing2.f90  -O3 -g  (test for excess errors)FAIL: libgomp.fortran/sharing2.f90  -Os  (test for excess errors)FAIL: libgomp.fortran/strassen.f90  -O  (test for excess errors)FAIL: libgomp.fortran/task1.f90  -O0  (test for excess errors)FAIL: libgomp.fortran/task1.f90  -O1  (test for excess errors)FAIL: libgomp.fortran/task1.f90  -O2  (test for excess errors)FAIL: libgomp.fortran/task1.f90  -O3 -fomit-frame-pointer  (test for excess errors)FAIL: libgomp.fortran/task1.f90  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (test for excess errors)FAIL: libgomp.fortran/task1.f90  -O3 -fomit-frame-pointer -funroll-loops  (test for excess errors)FAIL: libgomp.fortran/task1.f90  -O3 -g  (test for excess errors)FAIL: libgomp.fortran/task1.f90  -Os  (test for excess errors)FAIL: libgomp.fortran/task2.f90  -O  (test for excess errors)FAIL: libgomp.fortran/threadprivate1.f90  -O0  (test for excess errors)FAIL: libgomp.fortran/threadprivate1.f90  -O1  (test for excess errors)FAIL: libgomp.fortran/threadprivate1.f90  -O2  (test for excess errors)FAIL: libgomp.fortran/threadprivate1.f90  -O3 -fomit-frame-pointer  (test for excess errors)FAIL: libgomp.fortran/threadprivate1.f90  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (test for excess errors)FAIL: libgomp.fortran/threadprivate1.f90  -O3 -fomit-frame-pointer -funroll-loops  (test for excess errors)FAIL: libgomp.fortran/threadprivate1.f90  -O3 -g  (test for excess errors)FAIL: libgomp.fortran/threadprivate1.f90  -Os  (test for excess errors)FAIL: libgomp.fortran/threadprivate2.f90  -O0  (test for excess errors)FAIL: libgomp.fortran/threadprivate2.f90  -O1  (test for excess errors)FAIL: libgomp.fortran/threadprivate2.f90  -O2  (test for excess errors)FAIL: libgomp.fortran/threadprivate2.f90  -O3 -fomit-frame-pointer  (test for excess errors)FAIL: libgomp.fortran/threadprivate2.f90  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (test for excess errors)FAIL: libgomp.fortran/threadprivate2.f90  -O3 -fomit-frame-pointer -funroll-loops  (test for excess errors)FAIL: libgomp.fortran/threadprivate2.f90  -O3 -g  (test for excess errors)FAIL: libgomp.fortran/threadprivate2.f90  -Os  (test for excess errors)FAIL: libgomp.fortran/threadprivate3.f90  -O0  (test for excess errors)FAIL: libgomp.fortran/threadprivate3.f90  -O1  (test for excess errors)FAIL: libgomp.fortran/threadprivate3.f90  -O2  (test for excess errors)FAIL: libgomp.fortran/threadprivate3.f90  -O3 -fomit-frame-pointer  (test for excess errors)FAIL: libgomp.fortran/threadprivate3.f90  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (test for excess errors)FAIL: libgomp.fortran/threadprivate3.f90  -O3 -fomit-frame-pointer -funroll-loops  (test for excess errors)FAIL: libgomp.fortran/threadprivate3.f90  -O3 -g  (test for excess errors)FAIL: libgomp.fortran/threadprivate3.f90  -Os  (test for excess errors)FAIL: libgomp.fortran/vla1.f90  -O0  (test for excess errors)FAIL: libgomp.fortran/vla1.f90  -O1  (test for excess errors)FAIL: libgomp.fortran/vla1.f90  -O2  (test for excess errors)FAIL: libgomp.fortran/vla1.f90  -O3 -fomit-frame-pointer  (test for excess errors)FAIL: libgomp.fortran/vla1.f90  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (test for excess errors)FAIL: libgomp.fortran/vla1.f90  -O3 -fomit-frame-pointer -funroll-loops  (test for excess errors)FAIL: libgomp.fortran/vla1.f90  -O3 -g  (test for excess errors)FAIL: libgomp.fortran/vla1.f90  -Os  (test for excess errors)FAIL: libgomp.fortran/vla2.f90  -O0  (test for excess errors)FAIL: libgomp.fortran/vla2.f90  -O1  (test for excess errors)FAIL: libgomp.fortran/vla2.f90  -O2  (test for excess errors)FAIL: libgomp.fortran/vla2.f90  -O3 -fomit-frame-pointer  (test for excess errors)FAIL: libgomp.fortran/vla2.f90  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (test for excess errors)FAIL: libgomp.fortran/vla2.f90  -O3 -fomit-frame-pointer -funroll-loops  (test for excess errors)FAIL: libgomp.fortran/vla2.f90  -O3 -g  (test for excess errors)FAIL: libgomp.fortran/vla2.f90  -Os  (test for excess errors)FAIL: libgomp.fortran/vla3.f90  -O0  (test for excess errors)FAIL: libgomp.fortran/vla3.f90  -O1  (test for excess errors)FAIL: libgomp.fortran/vla3.f90  -O2  (test for excess errors)FAIL: libgomp.fortran/vla3.f90  -O3 -fomit-frame-pointer  (test for excess errors)FAIL: libgomp.fortran/vla3.f90  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (test for excess errors)FAIL: libgomp.fortran/vla3.f90  -O3 -fomit-frame-pointer -funroll-loops  (test for excess errors)FAIL: libgomp.fortran/vla3.f90  -O3 -g  (test for excess errors)FAIL: libgomp.fortran/vla3.f90  -Os  (test for excess errors)FAIL: libgomp.fortran/vla4.f90  -O0   (test for warnings, line 97)FAIL: libgomp.fortran/vla4.f90  -O0  (test for excess errors)FAIL: libgomp.fortran/vla4.f90  -O1   (test for warnings, line 97)FAIL: libgomp.fortran/vla4.f90  -O1  (test for excess errors)FAIL: libgomp.fortran/vla4.f90  -O2   (test for warnings, line 97)FAIL: libgomp.fortran/vla4.f90  -O2  (test for excess errors)FAIL: libgomp.fortran/vla4.f90  -O3 -fomit-frame-pointer   (test for warnings, line 97)FAIL: libgomp.fortran/vla4.f90  -O3 -fomit-frame-pointer  (test for excess errors)FAIL: libgomp.fortran/vla4.f90  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions   (test for warnings, line 97)FAIL: libgomp.fortran/vla4.f90  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (test for excess errors)FAIL: libgomp.fortran/vla4.f90  -O3 -fomit-frame-pointer -funroll-loops   (test for warnings, line 97)FAIL: libgomp.fortran/vla4.f90  -O3 -fomit-frame-pointer -funroll-loops  (test for excess errors)FAIL: libgomp.fortran/vla4.f90  -O3 -g   (test for warnings, line 97)FAIL: libgomp.fortran/vla4.f90  -O3 -g  (test for excess errors)FAIL: libgomp.fortran/vla4.f90  -Os   (test for warnings, line 97)FAIL: libgomp.fortran/vla4.f90  -Os  (test for excess errors)FAIL: libgomp.fortran/vla5.f90  -O0   (test for warnings, line 69)FAIL: libgomp.fortran/vla5.f90  -O0  (test for excess errors)FAIL: libgomp.fortran/vla5.f90  -O1   (test for warnings, line 69)FAIL: libgomp.fortran/vla5.f90  -O1  (test for excess errors)FAIL: libgomp.fortran/vla5.f90  -O2   (test for warnings, line 69)FAIL: libgomp.fortran/vla5.f90  -O2  (test for excess errors)FAIL: libgomp.fortran/vla5.f90  -O3 -fomit-frame-pointer   (test for warnings, line 69)FAIL: libgomp.fortran/vla5.f90  -O3 -fomit-frame-pointer  (test for excess errors)FAIL: libgomp.fortran/vla5.f90  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions   (test for warnings, line 69)FAIL: libgomp.fortran/vla5.f90  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (test for excess errors)FAIL: libgomp.fortran/vla5.f90  -O3 -fomit-frame-pointer -funroll-loops   (test for warnings, line 69)FAIL: libgomp.fortran/vla5.f90  -O3 -fomit-frame-pointer -funroll-loops  (test for excess errors)FAIL: libgomp.fortran/vla5.f90  -O3 -g   (test for warnings, line 69)FAIL: libgomp.fortran/vla5.f90  -O3 -g  (test for excess errors)FAIL: libgomp.fortran/vla5.f90  -Os   (test for warnings, line 69)FAIL: libgomp.fortran/vla5.f90  -Os  (test for excess errors)FAIL: libgomp.fortran/vla6.f90  -O0  (test for excess errors)FAIL: libgomp.fortran/vla6.f90  -O1  (test for excess errors)FAIL: libgomp.fortran/vla6.f90  -O2  (test for excess errors)FAIL: libgomp.fortran/vla6.f90  -O3 -fomit-frame-pointer  (test for excess errors)FAIL: libgomp.fortran/vla6.f90  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (test for excess errors)FAIL: libgomp.fortran/vla6.f90  -O3 -fomit-frame-pointer -funroll-loops  (test for excess errors)FAIL: libgomp.fortran/vla6.f90  -O3 -g  (test for excess errors)FAIL: libgomp.fortran/vla6.f90  -Os  (test for excess errors)FAIL: libgomp.fortran/vla7.f90  -O0  (test for excess errors)FAIL: libgomp.fortran/vla7.f90  -O1  (test for excess errors)FAIL: libgomp.fortran/vla7.f90  -O2  (test for excess errors)FAIL: libgomp.fortran/vla7.f90  -O3 -fomit-frame-pointer  (test for excess errors)FAIL: libgomp.fortran/vla7.f90  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (test for excess errors)FAIL: libgomp.fortran/vla7.f90  -O3 -fomit-frame-pointer -funroll-loops  (test for excess errors)FAIL: libgomp.fortran/vla7.f90  -O3 -g  (test for excess errors)FAIL: libgomp.fortran/vla7.f90  -Os  (test for excess errors)",RESOLVED          FIXED      
40597,Paolo Bonzini,Powerpc bootstrap is broken due to changes in expmed.c,"On June 28th, the powerpc bootstrap was broken due to changes to expmed.c.  The bootstrap dies when compiling libgcc.a as mentioned in:http://gcc.gnu.org/ml/gcc-patches/2009-06/msg02180.htmlemit_store_flag gets a GT test that it tries to convert to LE.  Inside the recursive call, it then tries to convert the LE back to a GT test.  Eventually the compiler runs out of stack space and dies.",RESOLVED          FIXED      
41812,Paolo Bonzini,[4.5 Regression] test 20071030-1.c fails execution on powerpc64,"Test gcc.c-torture/execute/20071030-2.c has been failing execution for -m64 with option lists including -O2 and -O3 since this patch was added to trunk:    http://gcc.gnu.org/viewcvs?view=rev&rev=149011    r149011 | bonzini | 2009-06-27 14:50:00 +0000 (Sat, 27 Jun 2009)That patch was added shortly before another one that broke bootstrap, as reported in PR 40597, and this test failure was then lost in the noise.I'll attach a shorter testcase that demonstrates the problem.",RESOLVED          FIXED      
39715,Paolo Bonzini,[4.5 Regression][cond-optab] extra sign extensions on Thumb,/* -O1 -mthumb -march=armv5t  */struct foo{  unsigned b31 : 1;  unsigned b30 : 1;  unsigned b29 : 1;  unsigned b28 : 1;  unsigned rest : 28;};foo(a)     struct foo a;{  return a.b30;}should have only one lsl and lsr,RESOLVED          FIXED      
40741,Paolo Bonzini,code size explosion for integer comparison,"Compile following function with options -Os -mthumb -march=armv5te:int returnbool(int a, int b){    if (a < b)        return 1;    return 0;}Gcc 4.5 generates:        lsr     r3, r1, #31        asr     r2, r0, #31        cmp     r0, r1        adc     r2, r2, r3        mov     r0, r2        mov     r3, #1        eor     r0, r0, r3        @ sp needed for prologue        bx      lrwhile gcc 4.3.1 generates:        push    {lr}        mov     r3, #1        cmp     r0, r1        blt     .L2        mov     r3, #0.L2:        mov     r0, r3        @ sp needed for prologue        pop     {pc}If we count instructions to do comparison only, they are 7 vs 4. I don't know if it is faster to replace one branch instruction with 4 alu instructions. It is definitely a regression for code size.The long code sequence is generated by expand pass.",RESOLVED          FIXED      
40952,Paolo Bonzini,version 150336 broke bootstrap on ia64-hp-hpux11.23,"Starting with version 150336, GCC does not bootstrap on ia64-hp-hpux11.23. In stage2 gengtype dies with a Memory fault:Program received signal SIGSEGV, Segmentation fault  si_code: 1 - SEGV_MAPERR - Address not mapped to object.0x40107a0:0 in nreverse_pairs (list=0x40014350)I have updated to 150344 but that did not fix this problem.Since it happens in stage2, I am afraid the patch may be causing us to generate bad code on IA64 HP-UX.",RESOLVED          FIXED      
39867,Paolo Bonzini,[4.4/4.5 Regression] Wrong result of conditional operator exp < 2 ? 2U : (unsigned int) exp,"With GCC 4.4.0, the following program outputs 4294967295 instead of 2:#include <stdio.h>int main (void){  int exp = -1;  printf (""%u\n"", exp < 2 ? 2U : (unsigned int) exp);  return 0;}Note: I've tried with gcc-snapshot under a Debian/unstable x86_64 Linux machine, but the same bug was reported to me, with gcc-4.4.0 (it was found by Philippe Theveny, who works on MPFR, and the MPFR tests fail because of that).GCC 4.3.3 does not have this problem.",RESOLVED          FIXED      
40026,Paolo Bonzini,[4.5 Regression] ICE during gimplify_init_constructor,"The linux kernel build on the gcc.opensuse.org base tester currently fails with./cc1 -quiet sched.ikernel/sched.c: In function 'build_sched_domains':kernel/sched.c:6325: internal compiler error: Segmentation faultPlease submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.Program received signal SIGSEGV, Segmentation fault.0x00000000007caa09 in is_gimple_mem_rhs_or_call (t=0x0)    at /space/rguenther/src/svn/trunk/gcc/gimplify.c:633633       if (is_gimple_reg_type (TREE_TYPE (t)))(gdb) bt#0  0x00000000007caa09 in is_gimple_mem_rhs_or_call (t=0x0)    at /space/rguenther/src/svn/trunk/gcc/gimplify.c:633#1  0x00000000007f7fb0 in gimplify_expr (expr_p=0x7ffff4efb7f8,     pre_p=0x7fffffffb648, post_p=0x7fffffff8e28,     gimple_test_f=0x7ca9ed <is_gimple_mem_rhs_or_call>, fallback=1)    at /space/rguenther/src/svn/trunk/gcc/gimplify.c:7159#2  0x00000000007e4023 in gimplify_modify_expr (expr_p=0x7fffffff9718,     pre_p=0x7fffffffb648, post_p=0x7fffffff8e28, want_value=0 '\0')    at /space/rguenther/src/svn/trunk/gcc/gimplify.c:4379#3  0x00000000007f391d in gimplify_expr (expr_p=0x7fffffff9718,     pre_p=0x7fffffffb648, post_p=0x7fffffff8e28,     gimple_test_f=0x7bff1c <is_gimple_stmt>, fallback=0)    at /space/rguenther/src/svn/trunk/gcc/gimplify.c:6516#4  0x00000000007e8724 in gimplify_stmt (stmt_p=0x7fffffff9718,     seq_p=0x7fffffffb648) at /space/rguenther/src/svn/trunk/gcc/gimplify.c:5162#5  0x00000000007ca161 in gimplify_and_add (t=0x7ffff4efb7c0,     seq_p=0x7fffffffb648) at /space/rguenther/src/svn/trunk/gcc/gimplify.c:390#6  0x00000000007df18b in gimplify_init_ctor_eval (object=0x7ffff4efb240,     elts=0x7ffff4ef6200, pre_p=0x7fffffffb648, cleared=1 '\1')    at /space/rguenther/src/svn/trunk/gcc/gimplify.c:3490#7  0x00000000007e0c65 in gimplify_init_constructor (expr_p=0x7ffff4ed8f10,     pre_p=0x7fffffffb648, post_p=0x7fffffffa288, want_value=0 '\0',     notify_temp_creation=0 '\0')",RESOLVED          FIXED      
39701,Paolo Bonzini,[4.5 Regression] Revision 145846 caused many test failures,"On Linux/ia32, revision 145849 gives:FAIL: g++.dg/tree-ssa/pr31146-2.C scan-tree-dump forwprop1 ""Replaced .* != 0B. with .1""FAIL: gcc.dg/pr36901-1.c (test for excess errors)FAIL: gcc.dg/pr36901-2.c (test for excess errors)FAIL: gcc.dg/pr36901-3.c (test for excess errors)FAIL: gcc.dg/pr36901-4.c (test for excess errors)FAIL: gcc.dg/tree-ssa/20030807-2.c scan-tree-dump-times dom2 ""if "" 0FAIL: gcc.dg/tree-ssa/forwprop-4.c scan-tree-dump-not forwprop1 ""link_error""FAIL: gfortran.dg/alloc_comp_basics_2.f90  -O0  (internal compiler error)FAIL: gfortran.dg/alloc_comp_basics_2.f90  -O0  (test for excess errors)FAIL: gfortran.dg/alloc_comp_basics_2.f90  -O1  (internal compiler error)FAIL: gfortran.dg/alloc_comp_basics_2.f90  -O1  (test for excess errors)FAIL: gfortran.dg/alloc_comp_basics_5.f90  -O0  (internal compiler error)FAIL: gfortran.dg/alloc_comp_basics_5.f90  -O0  (test for excess errors)FAIL: gfortran.dg/alloc_comp_basics_5.f90  -O1  (internal compiler error)FAIL: gfortran.dg/alloc_comp_basics_5.f90  -O1  (test for excess errors)FAIL: gfortran.dg/alloc_comp_initializer_1.f90  -O0  (internal compiler error)FAIL: gfortran.dg/alloc_comp_initializer_1.f90  -O0  (test for excess errors)FAIL: gfortran.dg/alloc_comp_initializer_1.f90  -O1  (internal compiler error)FAIL: gfortran.dg/alloc_comp_initializer_1.f90  -O1  (test for excess errors)FAIL: gfortran.dg/allocate_alloc_opt_3.f90  -O0  (internal compiler error)FAIL: gfortran.dg/allocate_alloc_opt_3.f90  -O0  (test for excess errors)FAIL: gfortran.dg/allocate_alloc_opt_3.f90  -O1  (internal compiler error)FAIL: gfortran.dg/allocate_alloc_opt_3.f90  -O1  (test for excess errors)FAIL: gfortran.dg/allocate_stat.f90  -O   (test for errors, line 41)FAIL: gfortran.dg/allocate_stat.f90  -O   (test for errors, line 54)FAIL: gfortran.dg/allocate_stat.f90  -O   (test for errors, line 71)FAIL: gfortran.dg/allocate_stat.f90  -O   (test for errors, line 73)FAIL: gfortran.dg/allocate_stat.f90  -O  (internal compiler error)FAIL: gfortran.dg/allocate_stat.f90  -O  (test for excess errors)FAIL: gfortran.dg/char_array_structure_constructor.f90  -O0  (internal compiler error)FAIL: gfortran.dg/char_array_structure_constructor.f90  -O0  (test for excess errors)FAIL: gfortran.dg/char_array_structure_constructor.f90  -O1  (internal compiler error)FAIL: gfortran.dg/char_array_structure_constructor.f90  -O1  (test for excess errors)FAIL: gfortran.dg/host_assoc_variable_1.f90  -O  (internal compiler error)FAIL: gfortran.dg/host_assoc_variable_1.f90  -O  (test for excess errors)FAIL: gfortran.dg/implicit_11.f90  -O   (test for errors, line 34)FAIL: gfortran.dg/implicit_11.f90  -O  (internal compiler error)FAIL: gfortran.dg/implicit_11.f90  -O  (test for excess errors)FAIL: gfortran.dg/move_alloc.f90  -O0  (internal compiler error)FAIL: gfortran.dg/move_alloc.f90  -O0  (test for excess errors)FAIL: gfortran.dg/move_alloc.f90  -O1  (internal compiler error)FAIL: gfortran.dg/move_alloc.f90  -O1  (test for excess errors)FAIL: gfortran.dg/multiple_allocation_1.f90  -O0  (internal compiler error)FAIL: gfortran.dg/multiple_allocation_1.f90  -O0  (test for excess errors)FAIL: gfortran.dg/multiple_allocation_1.f90  -O1  (internal compiler error)FAIL: gfortran.dg/multiple_allocation_1.f90  -O1  (test for excess errors)FAIL: gfortran.dg/nullify_3.f90  -O0  (internal compiler error)FAIL: gfortran.dg/nullify_3.f90  -O0  (test for excess errors)FAIL: gfortran.dg/nullify_3.f90  -O1  (internal compiler error)FAIL: gfortran.dg/nullify_3.f90  -O1  (test for excess errors)FAIL: gfortran.dg/nullify_3.f90  -O2  (internal compiler error)FAIL: gfortran.dg/nullify_3.f90  -O2  (test for excess errors)FAIL: gfortran.dg/nullify_3.f90  -O3 -fomit-frame-pointer  (internal compiler error)FAIL: gfortran.dg/nullify_3.f90  -O3 -fomit-frame-pointer  (test for excess errors)FAIL: gfortran.dg/nullify_3.f90  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (internal compiler error)FAIL: gfortran.dg/nullify_3.f90  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (test for excess errors)FAIL: gfortran.dg/nullify_3.f90  -O3 -fomit-frame-pointer -funroll-loops  (internal compiler error)FAIL: gfortran.dg/nullify_3.f90  -O3 -fomit-frame-pointer -funroll-loops  (test for excess errors)FAIL: gfortran.dg/nullify_3.f90  -O3 -g  (internal compiler error)FAIL: gfortran.dg/nullify_3.f90  -O3 -g  (test for excess errors)FAIL: gfortran.dg/nullify_3.f90  -Os  (internal compiler error)FAIL: gfortran.dg/nullify_3.f90  -Os  (test for excess errors)FAIL: gfortran.fortran-torture/compile/ambig.f90,  -O0   (internal compiler error)FAIL: gfortran.fortran-torture/compile/ambig.f90,  -O1   (internal compiler error)Revision 145839 is OK.",RESOLVED          FIXED      
39152,Paolo Bonzini,[4.4 regression] Revision 144098 breaks 416.gamess in SPEC CPU 2006,"On Linux/ia32, revision 144101 gave:gfortran -m32 -c -o mccas.fppized.o    -O2 -ffast-math -mfpmath=sse -mssse3         -ffixed-form       mccas.fppized.fmccas.fppized.f: In function 'cashes':mccas.fppized.f:1745: error: unrecognizable insn:(insn 364 296 365 5 mccas.fppized.f:1712 (set (reg/v:SI 4 si [orig:93 ii ] [93])        (mem/s:SI (plus:SI (ashift:SI (reg:SI 3 bx)                    (const_int 2 [0x2]))                (const:SI (plus:SI (symbol_ref:SI (""ijpair_"") <var_decl 0x2b5442f74f00 ijpair>)                        (const_int -4 [0xfffffffffffffffc])))) [2 ijpair.ia S4 A32])) -1 (nil))mccas.fppized.f:1745: internal compiler error: in extract_insn, at recog.c:2038Please submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.specmake: *** [mccas.fppized.o] Error 1Revision 144092 is OK.",RESOLVED          FIXED      
38932,Paolo Bonzini,"[4.3 Regression] ICE in set_value_range, at tree-vrp.c:398","From PR38572, but unrelated to it:void f (long long int p){  int x;  static unsigned char g;  long long int min = -9223372036854775807LL - 1;  g = 1;  x = (signed char) (g | 249) / 4;  if (p >= min - (long long int) x)    p = 1;  if (p)    abort ();}givessmall.c: In function 'f':small.c:3: internal compiler error: in set_value_range, at tree-vrp.c:398Note that after FRE the code becomes the simplervoid f (long long int p){  long long int min = 9223372036854775807LL + 2; /*0x7fffffffffffffff */  if (min <= p)    p = 1;  if (p)    abort ();}but this does not ICE because in this testcase the ""min <= p"" is changed to ""p != min - 1"" by the first CCP pass, so this is also a missed folding in FRE.I'm looking at the VRP failure though.",RESOLVED          FIXED      
38572,Paolo Bonzini,"[4.4 Regression] ICE in set_value_range, at tree-vrp.c:398","While compiling xulrunner with yesterday's gcc 4.4 svn rev 142782:c++ -o jsparse.o -c -I./dist/include/system_wrappers -include ./config/gcc_hidden.h -DAVMPLUS_IA32 -DAVMPLUS_UNIX -DAVMPLUS_LINUX -DFEATURE_NANOJIT -DJS_TRACER -DOSTYPE=\""Linux2.6.28-0.rc7\"" -DOSARCH=Linux -DEXPORT_JS_API  -DJS_USE_SAFE_ARENA  -I. -I.  -I./dist/include   -I./dist/include/js -I/usr/include/nspr -I/sdk/include -I.    -fPIC   -fno-rtti -fno-exceptions -Wall -Wpointer-arith -Woverloaded-virtual -Wsynth -Wno-ctor-dtor-privacy -Wno-non-virtual-dtor -Wcast-align -Wno-invalid-offsetof -Wno-long-long -pedantic -m32 -O2 -march=i686 -fomit-frame-pointer -fweb -frename-registers -mmmx -Wl,-O2,-z,combreloc,-z,relro,--enable-new-dtags,--hash-style=gnu,--sort-common -msse -fvisibility-inlines-hidden -fno-strict-aliasing -fshort-wchar -pthread -pipe  -DNDEBUG -DTRIMMED -m32 -O2 -march=i686 -fomit-frame-pointer -fweb -frename-registers -mmmx -Wl,-O2,-z,combreloc,-z,relro,--enable-new-dtags,--hash-style=gnu,--sort-common -msse   -DMOZILLA_CLIENT -include ./mozilla-config.h -Wp,-MD,.deps/jsparse.pp jsparse.cppjsparse.cpp: In function 'JSParseNode* Statement(JSContext*, JSTokenStream*, JSTreeContext*)':jsparse.cpp:2764: warning: suggest parentheses around '&&' within '||'jsopcode.cpp: In function 'jsbytecode* Decompile(SprintStack*, jsbytecode*, intN, JSOp)':jsopcode.cpp:1720: internal compiler error: in set_value_range, at tree-vrp.c:398Please submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.",RESOLVED          FIXED      
35457,Paolo Bonzini,Error building GCC trunk on CELL SPU,I get the following error message trying to build trunk r132854 on CELLSPU:-O2 ' 'CPPFLAGS=' 'LDFLAGS=' 'build_alias=powerpc64-unknown-linux-gnu''host_alias=spu' 'target_alias=spu' --cache-file=.././config.cache--srcdir=../../../../gcc/newlib/libcconfigure: loading cache .././config.cacheconfigure: error: `CFLAGS' has changed since the previous run:configure:   former value:  -g -O2configure:   current value: -g -O2configure: error: changes in the environment can compromise the buildconfigure: error: run `make distclean' and/or `rm .././config.cache' andstart overconfigure: error: /bin/sh '../../../../gcc/newlib/libc/configure' failedfor libcmake[1]: *** [configure-target-newlib] Error 1make[1]: Leaving directory `/home/tehila/nfs/mainline_new/build_org'make: *** [all] Error 2It might be introduced by a recent change to the calculation ofCFLAGS_FOR_TARGET.Deleting config.cache file does not seem to help.,RESOLVED          FIXED      
38405,Paolo Bonzini,[4.4 Regression] (silent failure) handling bitfield in ternary,"In the context of a function returning int, and rfp->signed is a one-bit field,	return rfp->signed_flag ? 1 : 0;	yields -1.  This is an optimization problem, seen with -O2 but not -O1.	Isolated to -ftree-vrp.  Not seen in gcc-4.3 or earlier.Environment:System: Linux recycle 2.6.26-1-amd64 #1 SMP Sat Oct 18 15:27:18 UTC 2008 x86_64 GNU/Linux	host: x86_64-pc-linux-gnubuild: x86_64-pc-linux-gnutarget: x86_64-pc-linux-gnuconfigured with: ../src/configure -v --with-pkgversion='Debian 20081130-1' --with-bugurl=file:///usr/share/doc/gcc-snapshot/README.Bugs --enable-languages=c,c++,java,fortran,objc,obj-c++,ada --prefix=/usr/lib/gcc-snapshot --enable-shared --with-system-zlib --disable-nls --enable-clocale=gnu --enable-libstdcxx-debug --enable-java-awt=gtk --enable-gtk-cairo --disable-plugin --with-java-home=/usr/lib/gcc-snapshot/java-1.5.0-gcj-4.4-1.5.0.0/jre --enable-java-home --with-jvm-root-dir=/usr/lib/gcc-snapshot/jvm --with-jvm-jar-dir=/usr/lib/gcc-snapshot/jvm-exports --with-ecj-jar=/usr/share/java/eclipse-ecj.jar --enable-objc-gc --enable-mpfr --enable-cld --disable-werror --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnuHow-To-Repeat:Short way:$ gcc -Wall -O1 -ftree-vrp ternbug.c -o ternbug && ./ternbugHello world: -1FAIL$ Long way:$ /usr/lib/gcc-snapshot/libexec/gcc/x86_64-linux-gnu/4.4.0/cc1 -fpreprocessed ternbug.i -quiet -dumpbase ternbug.c -mtune=generic -auxbase ternbug -O1 -ftree-vrp -version -o ternbug.sGNU C (Debian 20081130-1) version 4.4.0 20081130 (experimental) [trunk revision 142292] (x86_64-linux-gnu)        compiled by GNU C version 4.4.0 20081130 (experimental) [trunk revision 142292], GMP version 4.2.2, MPFR version 2.3.2.GGC heuristics: --param ggc-min-expand=30 --param ggc-min-heapsize=4096Compiler executable checksum: ef8facef55b835d47393957737fa78a4$ as -V -Qy -o ternbug.o ternbug.sGNU assembler version 2.18.0 (x86_64-linux-gnu) using BFD version (GNU Binutils for Debian) 2.18.0.20080103$ /usr/lib/gcc-snapshot/libexec/gcc/x86_64-linux-gnu/4.4.0/collect2 --eh-frame-hdr -m elf_x86_64 -dynamic-linker /lib64/ld-linux-x86-64.so.2 -o ternbug /usr/lib/../lib/crt1.o /usr/lib/../lib/crti.o /usr/lib/gcc-snapshot/lib/gcc/x86_64-linux-gnu/4.4.0/crtbegin.o -L/usr/lib/gcc-snapshot/lib/gcc/x86_64-linux-gnu/4.4.0 -L/usr/lib/gcc-snapshot/lib/gcc/x86_64-linux-gnu/4.4.0/../../../../lib -L/lib/../lib -L/usr/lib/../lib -L/usr/lib/gcc-snapshot/lib/gcc/x86_64-linux-gnu/4.4.0/../../.. ternbug.o -lgcc --as-needed -lgcc_s --no-as-needed -lc -lgcc --as-needed -lgcc_s --no-as-needed /usr/lib/gcc-snapshot/lib/gcc/x86_64-linux-gnu/4.4.0/crtend.o /usr/lib/../lib/crtn.o$ ./ternbugHello world: -1FAIL$ Minimal test case, ternbug.{c,i}:extern int printf (__const char *__restrict __format, ...);struct vpiBinaryConst { int signed_flag :1; int sized_flag :1;};int binary_get(int code, struct vpiBinaryConst *rfp){ switch (code) {  case 1:   return rfp->signed_flag ? 1 : 0;  default:   printf(""error: %d not supported\n"", code);   return 0; }}",RESOLVED          FIXED      
37137,Paolo Bonzini,"[4.4 Regression] unrecognized command line option ""-minterlink-mips16""","When I attempt to build the snapshot of 08/15/08 I get the message:gcc -c -DHAVE_CONFIG_H -g -O2 -minterlink-mips16 -I. -I/home/mrichmon/gcc-4.4-20080815/libiberty/../include  -W -Wall -Wwrite-strings -Wc++-compat -Wstrict-prototypes -pedantic  /home/mrichmon/gcc-4.4-20080815/libiberty/regex.c -o regex.occ1: error: unrecognized command line option ""-minterlink-mips16""",RESOLVED          FIXED      
35542,Paolo Bonzini,[4.3 Regression] fwprop only propagates one operand,"fwprop.c  currently has a bug where a successful  propagation to one operand of an instruction will prevent propagation to any remaining operands.The cause is due to the use of loc_mentioned_in_p() to check that a reference,provided by earlier DF scan, still exist in an instruction.The test is intended to check that an earlier propagation and simplification has not removed D/U references.However, loc_mentioned_in_p(), compares addresses of rtx to determine equivalence. If an instruction has already been modified and simplified, this willlonger apply - even if the def/use is still valid.This problem was already noted in Nov, but no bug report seems to have been filed.http://gcc.gnu.org/ml/gcc-patches/2007-11/msg00170.htmlI will attach patch, that uses reg_mentioned_p() as a substitute. The only differences I noted where:a) reg_mentioned_p() does not match physical sub registers of longer hard registers.This seems to have no consequence since fwprop entirely rejects hard_registers  in latter code. Perhaps for clarity, hard registers could be ignored earlier.b) registers in asm_operands are found. Which seems beneficial if they are pseudos and again ignored if they are hard registers.I am only able to test this with AVR port. In that it was 100% successful with no regressions of torture/execute testsuite.",RESOLVED          FIXED      
37675,Paolo Bonzini,gcc.dg/torture/pr36891.c doesn't work on Linux/ia32,"On Linux/ia32, I gotFAIL: gcc.dg/torture/pr36891.c  -O0  (test for excess errors)FAIL: gcc.dg/torture/pr36891.c  -O1  (test for excess errors)FAIL: gcc.dg/torture/pr36891.c  -O2  (test for excess errors)FAIL: gcc.dg/torture/pr36891.c  -O3 -fomit-frame-pointer  (test for excess errors)FAIL: gcc.dg/torture/pr36891.c  -O3 -fomit-frame-pointer -funroll-loops  (test for excess errors)FAIL: gcc.dg/torture/pr36891.c  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (test for excess errors)FAIL: gcc.dg/torture/pr36891.c  -O3 -g  (test for excess errors)FAIL: gcc.dg/torture/pr36891.c  -Os  (test for excess errors)",RESOLVED          FIXED      
36182,Paolo Bonzini,[4.3 Regression] Fix for PR 36090 causes libstdc++ regressions,"With 135074 no regressions.With 135087, I see the following regressions:FAIL: ext/malloc_allocator/deallocate_local.cc (test for excess errors)WARNING: ext/malloc_allocator/deallocate_local.cc compilation failed to produce executableFAIL: ext/mt_allocator/deallocate_local-2.cc (test for excess errors)WARNING: ext/mt_allocator/deallocate_local-2.cc compilation failed to produce executableFAIL: ext/mt_allocator/deallocate_local-4.cc (test for excess errors)WARNING: ext/mt_allocator/deallocate_local-4.cc compilation failed to produce executableFAIL: ext/mt_allocator/deallocate_local-6.cc (test for excess errors)WARNING: ext/mt_allocator/deallocate_local-6.cc compilation failed to produce executableFAIL: ext/mt_allocator/deallocate_local-8.cc (test for excess errors)WARNING: ext/mt_allocator/deallocate_local-8.cc compilation failed to produce executableFAIL: ext/new_allocator/deallocate_local.cc (test for excess errors)WARNING: ext/new_allocator/deallocate_local.cc compilation failed to produce executableFAIL: ext/throw_allocator/deallocate_local.cc (test for excess errors)WARNING: ext/throw_allocator/deallocate_local.cc compilation failed to produce executablewith the .log file saying similar for all errors:/tmp/ccDpHWIJ.s: Assembler messages:^M/tmp/ccDpHWIJ.s:788: Error: can't resolve `.LC2' {.rodata.str1.2 section} - `__ZNSbIcSt11char_traitsIcEN9__gnu_cxx16malloc_allocatorIcEEE4_Rep20_S_empty_rep_storageE' {.bss._ZNSbIcSt11char_traitsIcEN9__gnu_cxx16malloc_allocatorIcEEE4_Rep20_S_empty_rep_storageE section}^M/tmp/ccDpHWIJ.s:788: Error: expression too complex^Mcompiler exited with status 1output is:/tmp/ccDpHWIJ.s: Assembler messages:^M/tmp/ccDpHWIJ.s:788: Error: can't resolve `.LC2' {.rodata.str1.2 section} - `__ZNSbIcSt11char_traitsIcEN9__gnu_cxx16malloc_allocatorIcEEE4_Rep20_S_empty_rep_storageE' {.bss._ZNSbIcSt11char_traitsIcEN9__gnu_cxx16malloc_allocatorIcEEE4_Rep20_S_empty_rep_storageE section}^M/tmp/ccDpHWIJ.s:788: Error: expression too complex^MFAIL: ext/malloc_allocator/deallocate_local.cc (test for excess errors)There's only the PR36090 simplify_plus_minus change between these two revisions on the 4.3 branch.  So, the CONST change now causes a wrap of a MINUS between two symbols to _different_ sections, which must not happen.  Curiously, the same change on HEAD doesn't exhibit these regressions.  Author of patch CC:ed.",RESOLVED          FIXED      
35752,Paolo Bonzini,[4.3 Regression]: Combined gcc + binutils source tree doesn't bootstrap with --enable-shared,"I combined the current gcc and binutils mainlines into a combinedgcc + binutils source tree. When I tried to bootstrap it onLinux/ia32 and Linux/Intel64 with shared library enabled, it wentto an infinite loop when as or ld from stage 2 was used. The problem isld-new tries to use itself to relink itself when it is invokedfirst time. How should gcc and libtool handle it properly? Ithink collect-ld should be modified.",RESOLVED          FIXED      
35281,Paolo Bonzini,[4.3 Regression] multiply with 0 generated for 64*32->64,"> /usr/local/gcc43/bin/gcc -v                                           Using built-in specs.Target: i386-apple-darwin9.2.0Configured with: ../gcc/configure --prefix=/usr/local/gcc43 --enable-threads=posix --with-arch=core2 --with-tune=core2 --with-gmp=/sw --with-mpfr=/sw --disable-nls --disable-bootstrap --enable-checking=yes,rtl CFLAGS=-g LDFLAGS=/usr/lib/libiconv.dylib --enable-languages=c,c++,objc,obj-c++Thread model: posixgcc version 4.4.0 20080219 (experimental) (GCC) > /usr/local/gcc43/bin/gcc -Os -fno-PIC -S u64mul.c -fomit-frame-pointergcc generates:_mul32:        pushl   %ebx        xorl    %edx, %edx        subl    $8, %esp        movl    _b, %eax        movl    _a, %ecx        movl    _a+4, %ebx        imull   %edx, %ecx        imull   %eax, %ebx        mull    _a        addl    %ebx, %ecx        leal    (%ecx,%edx), %edx        popl    %ecx        popl    %ebx        popl    %ebx        retand somehow leaves all the stuff with edx in.4.1.3 generates:mul32:        movl    _b, %eax        movl    _a+4, %ecx        imull   %eax, %ecx        mull    _a        addl    %edx, %ecx        movl    %ecx, %edx        retThey both generate bad code for mul16.",RESOLVED          FIXED      
36753,Paolo Bonzini,[4.3/4.4 Regression] Forward propagation interacts badly with global register variable,"The attached test case is supposed to print '31337' when run.Correct output:[slava@imac factor]$ gcc -O1 testcase.c[slava@imac factor]$ ./a.out31337Correct output:[slava@imac factor]$ gcc -O2 -fno-forward-propagate testcase.c[slava@imac factor]$ ./a.out31337*Incorrect* output:[slava@imac factor]$ gcc -O2 testcase.c[slava@imac factor]$ ./a.out0We can plainly see the problem in the disassemble for the broken() function. With -O2 -fno-forward-propagate,broken:        leaq    8(%r14), %rax        movq    %rax, %r14        movq    $31337, (%rax)        retWith -O2:broken:        addq    $8, %r14        movq    $31337, 8(%r14)        ret===========================================#include <stdbool.h>#include <stdio.h>register unsigned long *ds asm(""r14"");__attribute__((noinline)) void broken(bool value){        *++ds = 31337;}int main(){        unsigned long stack[2];        stack[0] = 0;        stack[1] = 0;        ds = stack;        broken(true);        printf(""%ld\n"",*ds);}===========================================",RESOLVED          FIXED      
28770,Paolo Bonzini,[4.1 Regression] one reference to powerpc-ibm-eabi-ar.exe when only xar.exe installed,"Unlike with GCC-3.*, building GCC-4.1.1 PPC crosscompiler from a bootstrapped native GCC-4.1.1 and binutils-2.17 on cygwin fails because of a small error.Using a new and up to date Cygwin install.xgcc -v (after fix) gives:Using built-in specs.Target: powerpc-ibm-eabiConfigured with: ../gcc-4.1.1/configure --prefix=/cygdrive/c/cygwin-gcc/local --program-prefix=x --target=powerpc-ibm-eabi --with-cpu=440 --with-newlib --enable-languages=cThread model: single gcc version 4.1.1 The error message is:........../../gcc-4.1.1/gcc/unwind-c.c:1: warning: -msoft-float and -mlong-double-128 no t supportedrm -f ./libgcc.a powerpc-ibm-eabi-ar  rc ./libgcc.a libgcc/./_muldi3.o libgcc/./_negdi2.o libgcc/ ./_lshrdi3.o libgcc/./_ashldi3.o libgcc/./_ashrdi3.o libgcc/./_cmpdi2.o libgcc/. /_ucmpdi2.o libgcc/./_floatdidf.o libgcc/./_floatdisf.o libgcc/./_fixunsdfsi.o l ibgcc/./_fixunssfsi.o libgcc/./_fixunsdfdi.o libgcc/./_fixdfdi.o libgcc/./_fixun ssfdi.o libgcc/./_fixsfdi.o libgcc/./_fixxfdi.o libgcc/./_fixunsxfdi.o libgcc/./ _floatdixf.o libgcc/./_fixunsxfsi.o libgcc/./_fixtfdi.o libgcc/./_fixunstfdi.o l ibgcc/./_floatditf.o libgcc/./_clear_cache.o libgcc/./_enable_execute_stack.o li bgcc/./_trampoline.o libgcc/./__main.o libgcc/./_absvsi2.o libgcc/./_absvdi2.o l ibgcc/./_addvsi3.o libgcc/./_addvdi3.o libgcc/./_subvsi3.o libgcc/./_subvdi3.o l ibgcc/./_mulvsi3.o libgcc/./_mulvdi3.o libgcc/./_negvsi2.o libgcc/./_negvdi2.o l ibgcc/./_ctors.o libgcc/./_ffssi2.o libgcc/./_ffsdi2.o libgcc/./_clz.o libgcc/./ _clzsi2.o libgcc/./_clzdi2.o libgcc/./_ctzsi2.o libgcc/./_ctzdi2.o libgcc/./_pop count_tab.o libgcc/./_popcountsi2.o libgcc/./_popcountdi2.o libgcc/./_paritysi2. o libgcc/./_paritydi2.o libgcc/./_powisf2.o libgcc/./_powidf2.o libgcc/./_powixf2.o libgcc/./_powitf2.o libgcc/./_mulsc3.o libgcc/./_muldc3.o libgcc/./_mulxc3.o libgcc/./_multc3.o libgcc/./_divsc3.o libgcc/./_divdc3.o libgcc/./_divxc3.o lib gcc/./_divtc3.o libgcc/./_eprintf.o libgcc/./__gcc_bcmp.o libgcc/./_divdi3.o lib gcc/./_moddi3.o libgcc/./_udivdi3.o libgcc/./_umoddi3.o libgcc/./_udiv_w_sdiv.o libgcc/./_udivmoddi4.o libgcc/./_pack_sf.o libgcc/./_unpack_sf.o libgcc/./_addsu b_sf.o libgcc/./_mul_sf.o libgcc/./_div_sf.o libgcc/./_fpcmp_parts_sf.o libgcc/. /_compare_sf.o libgcc/./_eq_sf.o libgcc/./_ne_sf.o libgcc/./_gt_sf.o libgcc/./_g e_sf.o libgcc/./_lt_sf.o libgcc/./_le_sf.o libgcc/./_unord_sf.o libgcc/./_si_to_ sf.o libgcc/./_sf_to_si.o libgcc/./_negate_sf.o libgcc/./_make_sf.o libgcc/./_sf _to_df.o libgcc/./_thenan_sf.o libgcc/./_sf_to_usi.o libgcc/./_usi_to_sf.o libgc c/./_pack_df.o libgcc/./_unpack_df.o libgcc/./_addsub_df.o libgcc/./_mul_df.o li bgcc/./_div_df.o libgcc/./_fpcmp_parts_df.o libgcc/./_compare_df.o libgcc/./_eq_ df.o libgcc/./_ne_df.o libgcc/./_gt_df.o libgcc/./_ge_df.o libgcc/./_lt_df.o lib gcc/./_le_df.o libgcc/./_unord_df.o libgcc/./_si_to_df.o libgcc/./_df_to_si.o li bgcc/./_negate_df.o libgcc/./_make_df.o libgcc/./_df_to_sf.o libgcc/./_thenan_df .o libgcc/./_df_to_usi.o libgcc/./_usi_to_df.o libgcc/./tramp.o libgcc/./darwin- ldouble.o libgcc/./eabi.o libgcc/./unwind-dw2.o libgcc/./unwind-dw2-fde.o libgcc /./unwind-sjlj.o libgcc/./gthr-gnat.o libgcc/./unwind-c.o make[4]: powerpc-ibm-eabi-ar: Command not found make[4]: *** [libgcc.a] Error 127 make[4]: Leaving directory `/cygdrive/c/cygwin-gcc/build/ppc_gcc/gcc' make[3]: *** [stmp-multilib] Error 2 make[3]: Leaving directory `/cygdrive/c/cygwin-gcc/build/ppc_gcc/gcc' make[2]: *** [all-gcc] Error 2 make[2]: Leaving directory `/cygdrive/c/cygwin-gcc/build/ppc_gcc' make[1]: *** [all] Error 2  To fix this problem, just do:$ cd /cygdrive/c/cygwin-gcc/local/bin $ cp xar.exe powerpc-ibm-eabi-ar.exe  and rerun ""make ; make install"" in `/cygdrive/c/cygwin-gcc/build/ppc_gcc/gcc' Extract of Makefile used to rebuild everything:-------------------------------FTPMIRROR := http://www.mirrorservice.org/sites/GCC_VERSION := 4.1.1BINUTILS_VERSION := 2.17HOME = /cygdrive/c/cygwin-gccPATH := $(HOME)/local/bin/:/usr/local/bin:/usr/bin:/binsrc:	mkdir srcbuild:	mkdir buildlocal:	mkdir locallib:	mkdir libtarget:	mkdir targetsrc/gcc-core-$(GCC_VERSION).tar.bz2:	wget --directory-prefix=src $(FTPMIRROR)/sources.redhat.com/pub/gcc/releases/gcc-$(GCC_VERSION)/gcc-core-$(GCC_VERSION).tar.bz2src/binutils-$(BINUTILS_VERSION).tar.bz2:	wget --directory-prefix=src $(FTPMIRROR)/sources.redhat.com/pub/binutils/releases/binutils-$(BINUTILS_VERSION).tar.bz2src/gcc-g++-$(GCC_VERSION).tar.bz2:	wget --directory-prefix=src $(FTPMIRROR)/sources.redhat.com/pub/gcc/releases/gcc-$(GCC_VERSION)/gcc-g++-$(GCC_VERSION).tar.bz2toolchain-src: src build src/gcc-core-$(GCC_VERSION).tar.bz2 src/gcc-g++-$(GCC_VERSION).tar.bz2 src/binutils-$(BINUTILS_VERSION).tar.bz2	rm -rf build/*	cd build && tar -xjf ../src/binutils-$(BINUTILS_VERSION).tar.bz2	cd build && tar -xjf ../src/gcc-core-$(GCC_VERSION).tar.bz2	cd build && tar -xjf ../src/gcc-g++-$(GCC_VERSION).tar.bz2# PATH has to contains $(HOME)/local/bin/ before anything else here# Add in /etc/profile the lines (after cd ""$HOME"") :#    export HOME=/cygdrive/c/cygwin-gcc#    export PATH=~/local/bin/:/usr/local/bin:/usr/bin:/bin#    export INFOPATH=~/local/info:/usr/local/info:/usr/info#    export MANPATH=~/local/man:/usr/local/man:/usr/mannative-toolchain: local	[ -d build ] || $(MAKE) toolchain-src	cd build && rm -rf native_binutils native_gcc && mkdir native_binutils native_gcc	cd build/native_binutils && ../binutils-$(BINUTILS_VERSION)/configure --prefix=$(HOME)/local	cd build/native_binutils && make && make install	cd build/native_gcc && ../gcc-$(GCC_VERSION)/configure --prefix=$(HOME)/local	cd build/native_gcc && make bootstrap	# - cd build/native_gcc && make -k check > check.log 2>&1	cd build/native_gcc && make install# That will fail if --prefix=... is not in the $PATH.ppc-toolchain:	[ -x local/bin/gcc ] || $(MAKE) native-toolchain	cd build && rm -rf ppc_binutils ppc_gcc && mkdir ppc_binutils ppc_gcc	cd build/ppc_binutils && ../binutils-$(BINUTILS_VERSION)/configure --prefix=$(HOME)/local --program-prefix=x --target=powerpc-ibm-eabi	cd build/ppc_binutils && make && make install	# rm -rf build/ppc_gcc && mkdir build/ppc_gcc	cd build/ppc_gcc && ../gcc-$(GCC_VERSION)/configure --prefix=$(HOME)/local --program-prefix=x --target=powerpc-ibm-eabi \		--with-cpu=440 --with-newlib --enable-languages=c	cd build/ppc_gcc && make && make install-------------------------------",RESOLVED          FIXED      
28573,Paolo Bonzini,[4.1 Regression] incorrectly allowing non-constant expression to offsetof(),"The following code incorrectly compiles, and worse returns incorrect result.on i686-pc-linux-gnu, both 4.1.0 and 4.1.1-- start snip#include <stddef.h>// (incomplete) template class that encapsulates an array of charstemplate<int i> class CharArray{public:   char d[i];   char& operator [] ( int indx )   {      return d[indx];   }};struct Foo{   int i;   CharArray<44> caCharArray;};int main( int argc, char* argv[] ){   Foo foo;   int i;// Shouldn't compile, and worse results in incorrect offset.   i = offsetof(Foo, caCharArray[0]);}-- end snipvariables as an array index correctly give an error, but unfortunatly not everything that looks like an constant array index is.",RESOLVED          FIXED      
32161,Paolo Bonzini,stage1 libgcc is being built unoptimized,"The stage1 libgcc.a and crt files are being built with -O0.  This means that the stage2 cc1 is using unoptimized libgcc.a, but the stage3 cc1 is using optimized libgcc.a, which is causing them to be different, which is one of a number of causes forComparing stages 2 and 3warning: ./cc1-checksum.o differswarning: ./cc1obj-checksum.o differswarning: ./cc1plus-checksum.o differson Darwin.  I suspect this is related to PR 32009 but am not sure they're the same bug.",RESOLVED          FIXED      
32009,Paolo Bonzini,[4.3 Regression] building gcc4-4.3/4.4.0-20070518 failed on OSX 10.3.9,"Building gcc4-4.3.0-20070518 failed on OSX 10.3.9. Copies ofhttp://gcc.gnu.org/ml/gcc/2007-05/msg00483.html> Comparing the log of successful and failed builds I have found > that the failed one contains -mdynamic-no-pic which does not> appear in the previous build.  According Apple's doc this> should be used in ""application"", but it should not appear> when building libraries (at least it is my understanding).>> I suspect the origin of the problem comes from>> 2007-05-16  Paolo Bonzini  <bonzini@gnu.org>>>         * Makefile.def (bootstrap_stage): Replace stage_make_flags with>         stage_cflags.>         * Makefile.tpl (POSTSTAGE1_HOST_EXPORTS, POSTSTAGE1_FLAGS_TO_PASS):>         Remove CFLAGS/LIBCFLAGS.>         (configure-stage[+id+]-[+prefix+][+module+],>         all-stage[+id+]-[+prefix+][+module+]): Pass it from [+stage_cflags+].>        * Makefile.in: Regenerate.>> but there are too many changes to allow me to go further.>> BTW I also noticed the nicety>> ... -O2 -O2 -g -O2 ... -g -O2 ...>> (was ... -O2 -O2 -g -O2 ... -O2 -g -O2 ...)http://gcc.gnu.org/ml/gcc/2007-05/msg00485.htmlform Andreas Tobler> Thanks Dominique, I just reverted this patch to see if I get further. > I have the same problem on 10.4.9 and was to lazy to investigate > that deep as you did.> I'll let you know how it works.>> In toplevel, svn up -r 124763 Makefile.tpl Makefile.def Makefile.inandhttp://gcc.gnu.org/ml/gcc/2007-05/msg00487.html> > In toplevel, svn up -r 124763 Makefile.tpl Makefile.def Makefile.in>> I used the files from trunk revision 124627 and the build went fine.>> I'll try to find some time to fill a PR",RESOLVED          FIXED      
34067,Paolo Bonzini,[4.3 regression] gfortran.dg/char_cshift_2.f90 fails with -O3 -funroll-loops fails on Intel Darwin,"With revision 130081 the following tests fail:FAIL: gfortran.dg/char_cshift_2.f90  -O3 -fomit-frame-pointer -funroll-loops  execution testFAIL: gfortran.dg/char_cshift_2.f90  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  execution testFAIL: gfortran.dg/char_eoshift_2.f90  -O3 -fomit-frame-pointer -funroll-loops  execution testFAIL: gfortran.dg/char_eoshift_2.f90  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  execution testFAIL: gfortran.dg/char_eoshift_4.f90  -O3 -fomit-frame-pointer -funroll-loops  execution testFAIL: gfortran.dg/char_eoshift_4.f90  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  execution testThey passed with revision 130037. I have looked at char_cshift_2.f90. It fails on the fourth test (shift array of kind=8) and the failure requires one of the test with shift2 or shift3 (if I comment the two calls, the failure disappears).",RESOLVED          FIXED      
32372,Paolo Bonzini,"[4.3 Regression] ICE in df_refs_verify, at df-scan.c:4065","I'm getting the following ICE with trunk on x86_64.  It compiles fineon ia64 and powerpc.(sid)2653:tbm@em64t: ~] /usr/lib/gcc-snapshot/bin/gcc -c -O2 mplayer-mpegvideo.cmplayer-mpegvideo.c: In function 'MPV_encode_init':mplayer-mpegvideo.c:21: internal compiler error: in df_refs_verify, at df-scan.c:4065Please submit a full bug report,Testcase:typedef struct AVCodecContext{  int flags;  void *priv_data;  char codec_name[32];}AVCodecContext;typedef struct ScanTable{  int obmc;  int umvplus;  int h263_aic;}MpegEncContext;MPV_encode_init (AVCodecContext *avctx){  MpegEncContext *s = avctx->priv_data;  s->umvplus = (avctx->flags & 0x02000000) ? 1 : 0;  s->h263_aic = (avctx->flags & 0x01000000) ? 1 : 0;  s->h263_aic = s->obmc || s->umvplus;}",RESOLVED          FIXED      
30841,Paolo Bonzini,[4.3 regression] Missed optimizations for sbi/cbi instructions,"demo.c:#define PORTD (*(volatile unsigned char *)(50))intmain (void){  PORTD |= 1;    return 0;}Revision r118474:.LM2: ; (insn 14 12 18 main.c:6 (set (mem/v:QI (const_int 50 [0x32]) [0 S1 A8]) ;         (ior:QI (mem/v:QI (const_int 50 [0x32]) [0 S1 A8]) ;             (const_int 1 [0x1]))) 114 {*sbi} (nil) ;     (nil))	sbi 50-0x20,0	 ;  14	*sbi	[length = 1]Revision r118475:.LM2: ; (insn 10 9 11 main.c:6 (set (reg/f:HI 30 r30 [44]) ;         (const_int 50 [0x32])) 12 {*movhi} (nil) ;     (expr_list:REG_EQUIV (const_int 50 [0x32]) ;         (nil)))	ldi r30,lo8(50)	 ;  10	*movhi/4	[length = 2]	ldi r31,hi8(50) ; (insn 11 10 12 main.c:6 (set (reg:QI 24 r24 [orig:42 D.1514 ] [42]) ;         (mem/v:QI (reg/f:HI 30 r30 [44]) [0 S1 A8])) 9 {*movqi} (insn_list:REG_DEP_TRUE 10 (nil)) ;     (nil))	ld r24,Z	 ;  11	*movqi/4	[length = 1] ; (insn 12 11 14 main.c:6 (set (reg:QI 24 r24 [orig:42 D.1514 ] [42]) ;         (ior:QI (reg:QI 24 r24 [orig:42 D.1514 ] [42]) ;             (const_int 1 [0x1]))) 47 {iorqi3} (insn_list:REG_DEP_TRUE 11 (nil)) ;     (nil))	ori r24,lo8(1)	 ;  12	iorqi3/2	[length = 1] ; (insn 14 12 18 main.c:6 (set (mem/v:QI (reg/f:HI 30 r30 [44]) [0 S1 A8]) ;         (reg:QI 24 r24 [orig:42 D.1514 ] [42])) 9 {*movqi} (insn_list:REG_DEP_TRUE 12 (nil)) ;     (expr_list:REG_DEAD (reg:QI 24 r24 [orig:42 D.1514 ] [42]) ;         (expr_list:REG_DEAD (reg/f:HI 30 r30 [44]) ;             (nil))))	st Z,r24	 ;  14	*movqi/3	[length = 1]Revision 118475  2006-11-03  Paolo Bonzini  <bonzini@gnu.org>            Steven Bosscher  <stevenb.gcc@gmail.com>        * fwprop.c: New file.        * Makefile.in: Add fwprop.o.        * tree-pass.h (pass_rtl_fwprop, pass_rtl_fwprop_with_addr): New.        * passes.c (init_optimization_passes): Schedule forward propagation.        * rtlanal.c (loc_mentioned_in_p): Support NULL value of the second        parameter.        * timevar.def (TV_FWPROP): New.        * common.opt (-fforward-propagate): New.        * opts.c (decode_options): Enable forward propagation at -O2.        * gcse.c (one_cprop_pass): Do not run local cprop unless touching jumps.        * cse.c (fold_rtx_subreg, fold_rtx_mem, fold_rtx_mem_1, find_best_addr,        canon_for_address, table_size): Remove.        (new_basic_block, insert, remove_from_table): Remove references to        table_size.        (fold_rtx): Process SUBREGs and MEMs with equiv_constant, make        simplification loop more straightforward by not calling fold_rtx        recursively.        (equiv_constant): Move here a small part of fold_rtx_subreg,        do not call fold_rtx.  Call avoid_constant_pool_reference        to process MEMs.        * recog.c (canonicalize_change_group): New.        * recog.h (canonicalize_change_group): New.        * doc/invoke.texi (Optimization Options): Document fwprop.        * doc/passes.texi (RTL passes): Document fwprop.Anatoly.",RESOLVED          FIXED      
30907,Paolo Bonzini,[4.3 regression] Propagation of addresses within loops pessimizes code,"int bar (void);void foo (int *);static int s[10];void foobar (int i1, int i2, int i3, int i4, int i5, int i6){  int a[100];  int i, i7;  i7 = bar ();  bar ();  for (i = 0; i < 100; i++)    a[i] = s[i1] + s[i2] + s[i3] + s[i4] + s[i5] + s[i6] + s[i7];  foo (&a[0]);  return;}If you compare mainline to dataflow branch at -O2 you can see--- t.i.trunk   2007-02-21 11:31:09.663252586 +0100+++ t.i.df      2007-02-21 11:31:10.548064364 +0100@@ -37,7 +37,6 @@        movl    s(,%rbx,4), %edx        addl    s(,%rcx,4), %edx        movslq  %r12d,%r12-       leaq    16(%rsp), %rdi        addl    s(,%r13,4), %edx        addl    s(,%r14,4), %edx        addl    s(,%r15,4), %edx@@ -46,10 +45,11 @@        addl    s(,%r12,4), %edx        .p2align 4,,7 .L2:-       movl    %edx, (%rdi,%rax,4)+       movl    %edx, 16(%rsp,%rax,4)        addq    $1, %rax        cmpq    $100, %rax        jne     .L2+       leaq    16(%rsp), %rdi        call    foo        addq    $424, %rsp        popq    %rbxthat is, we are choosing a more expensive addressing mode in the loop notnoticing that 16(%rsp) can be (G)CSEd.  This makes the above loop run33% slower on x86_64.",RESOLVED          FIXED      
27827,Paolo Bonzini,[4.0 Regression] gcc 4 produces worse x87 code on all platforms than gcc 3,"Hi guys.  My name is Clint Whaley, I'm the developer of ATLAS, an open source linear algebra package:   http://directory.fsf.org/atlas.htmlMy users are asking me to support gcc 4, but right now its x87 fp performance is much worse than gcc 3.  Depending on the machine and code being run it appears to be between 10-50% worse.  Here is a tarfile that allows you to reproduce the problem on any machine:   http://www.cs.utsa.edu/~whaley/mmbench4.tar.gzI have timed under a Pentium-D (gcc 4 gets 85% of gcc 3's performance on example code) and Athlon-64 X2 (gcc 4 gets 60% of gcc 3's performance).  This is a typical kernel from ATLAS, not the worst . . .By looking at the assembly (the provided makefile will gen it with ""make assall""), the differences seem fairly minor.  From what I can tell, mostly it seems to come down to gcc 4 using a from memory fmull rather than loading ops to the fpstack first.I know that sse is the prefered target these days, but the x87 (when optimized right) kills the single precision SSE unit in scalar mode due to the expense of the scalar vector load, and the x87 unit is slightly faster even in double precision (in scalar mode).  Gcc cannot yet auto-vectorize any ATLAS kernels.Any help much appreciated,Clint",RESOLVED          FIXED      
29802,Paolo Bonzini,[4.2 Regression] wrong directory in makefile for ada and libada when srcdir=.,"when building ada on linux (x86-64)building ada fails because the makefile looks for gnatbuild inmydir/gcc-4.2-20061107/prev-gccinstead ofmydir/gcc-4.2-20061107/host-x86_64-unknown-linux-gnu/prev-gccI could not find where precisely in the makefile the bug hides.for libada it is obvious:the make variableHOST_SUBDIRis used, but nowhere defined. If I define it, libada is built",RESOLVED          FIXED      
29544,Paolo Bonzini,[4.2 Regression] Not building with checking in stage1,"In 4.1 (and maybe even 4.0), we used to build with checking enable in stage1 to check some bugs but now with the toplevel bootstrap, this no longer happens.",RESOLVED          FIXED      
14899,Paolo Bonzini,[4.0 Regression] wrong code due to change in compatibility rules for vector types,"> #include <altivec.h>> int main()> {>        __vector signed short  res;>        __vector signed short t8;>        __vector signed short t9;>        res = vec_subs(t8, t9);> }is incorrectly using vsubuh instead of vsubsh.This is because __builtin_types_compatible_p (__vector bool short, __vector signed short) is returning 1. This test case says that it said 1:int f(){return __builtin_types_compatible_p (__vector bool short,                                     __vector signed short);}That's my fault (my vector patch's fault).  It is easy to fix by modifying comptypes (I had it in my tree for a while before submitting the patch, but caused other regressions on i686, IIRC), but overall it seems quite fragile... Paolo",RESOLVED          FIXED      
29798,Paolo Bonzini,[4.3 Regression] -O2 gives wrong results,"Hi,-O2 gives wrong results. Assingment to a variable (rho) directly affectsvalue of another (oldrho). Look at the code at the end of the message (it's modified from the *.102t.final_cleanup of a fortran code, in case you wonder).gcc-version:Using built-in specs.Target: i686-pc-linux-gnuConfigured with: /home/fxcoudert/gfortran_nightbuild/trunk/configure --prefix=/home/fxcoudert/gfortran_nightbuild/irun-20061109 --enable-languages=c,fortran --with-gmp=/home/fxcoudert/gfortran_nightbuild/softwareThread model: posixgcc version 4.3.0 20061109 (experimental)Regards, Juhavoid main(){  double temp167;  double temp157;  double rho;  double D1530;  double D1537;  double D1568;  double D1576;  double D1578;  double D1591;  double alpha;  double residual;  int iter_count;  double beta;  double oldrho;  double val19;  double val24;  double D1453;  double xvec[2];  double rhsvec[2];  double work[8];  xvec[0]    = 0.0;  rhsvec[0]  = 1.0e+0;  xvec[1]    = 0.0;  rhsvec[1]  = 2.0e+0;  work[6]    = xvec[0];  work[7]    = xvec[1] * 5.0e-1;  work[6]    = rhsvec[0] - work[6];  work[7]    = rhsvec[1] - work[7];  iter_count = 1;while(1) {  work[4] = work[6];  work[5] = work[7];  work[0] = work[4];  D1530 = work[5];  work[1] = D1530;  D1537 = work[0];  fprintf( stderr, ""1: %d %g\n"", iter_count, oldrho );  rho = work[6] * D1537 + D1530 * work[7];  fprintf( stderr, ""2: %d %g\n\n"", iter_count, oldrho );  if (iter_count == 1) {    work[2] = D1537;    work[3] = work[1];  } else {    beta = rho / oldrho;    work[2] = D1537 + beta * work[2];    work[3] = work[1] + beta * work[3];  }  work[4] = work[2];  D1568 = work[3] * 5.0e-1;  work[5] = D1568;  D1576 = work[2];  D1578 = work[4];  val19 = D1576 * D1578 + 0.0;  temp167 = work[3];  alpha = rho / (val19 + D1568 * temp167);  xvec[0] = xvec[0] + D1576 * alpha;  D1591 = xvec[1] + temp167 * alpha;  xvec[1] = D1591;  work[6] = work[6] - alpha * D1578;  work[7] = work[7] - alpha * work[5];  work[0] = xvec[0];  work[1] = D1591 * 5.0e-1;  work[0] = work[0] - rhsvec[0];  temp157 = work[1] - rhsvec[1];  work[1] = temp157;  D1453 = work[0];  val24 = D1453 * D1453;  residual = sqrt (val24 + temp157 * temp157);  if (residual < 1e-12) break;  iter_count = iter_count + 1;  if (iter_count == 20) break;  oldrho = rho;}  fprintf( stderr, ""%d %g %g\n"", iter_count, xvec[0], xvec[1] );  return;}",RESOLVED          FIXED      
29092,Paolo Bonzini,"[4.0 Regression] vector int a = (vector int) { 1,1,2,2} is rejected as non constant","Testcase:#define vector __attribute__((vector_size(16)))vector int a = (vector int){1, 2, 0, 0};If I used a typedef instead, it works.",RESOLVED          FIXED      
27390,Paolo Bonzini,[4.2 Regression] gcc.target/x86_64/abi/test_complex_returning.c execution fails at -O0,See Summary.,RESOLVED          FIXED      
27117,Paolo Bonzini,SH backend cheats to reload -- disables indexed addressing but uses it internally,"The cross build for sh64-elf on x86 hosts fails during compilationof libiberty/ramdom.c for 32bit SHmedia withlibiberty/random.c:362: internal compiler error: in push_reload, at reload.c:1265The following is a reduced testcase.  It ICEs with -O1 -m5-32mediaon sh64-elf.extern int tbl[32];int n = 32;intfoo (int idx){  return tbl[idx % n];}Binary search shows that it starts to fail after the patchr112637 | bonzini | 2006-04-03 20:20:07 +0900 (Mon, 03 Apr 2006) | 25 lines",RESOLVED          FIXED      
26847,Paolo Bonzini,[4.2 Regression] Missed optimization in simplify_plus_minus,"copied from:http://gcc.gnu.org/ml/gcc-patches/2006-02/msg00812.htmlHi Paolo,with your patch:http://gcc.gnu.org/ml/gcc-patches/2005-11/msg01718.htmlsimplify_plus_minus isn't able anymore to simplify things like (r1 + 8) - r1. The function is left at:  if (!canonicalized)    {      int n_constants = 0;      for (i = 0; i < n_ops; i++)	if (GET_CODE (ops[i].op) == CONST_INT)	  n_constants++;      if (n_constants <= 1)	return NULL_RTX;    }because only a single constant was found and no canonicalization took place.Your patch changed:if (n_ops <= 2 && !force)  return NULL_RTX;to:gcc_assert (n_ops >= 2);if (!canonicalized)  return NULL_RTX;Which was later on changed by Alan Modra with:http://gcc.gnu.org/ml/gcc-patches/2005-12/msg00015.htmlto the version mentioned above. The reason here was that expressionslike reg + c1 + c2 were not simplified anymore.So the new version exits always if the initial loop couldn't do anycanonicalization work and only 0 or 1 constants are left. What preventssimplification in all those cases....As Roger Sayle pointed out the patch I've proposed in the email isn't theproper fix for this issue.Paolo Bonzini already proposed a solution in:http://gcc.gnu.org/ml/gcc-patches/2006-02/msg00884.htmlThats why I'll assign the bug to him.",RESOLVED          FIXED      
28218,Paolo Bonzini,[4.1 Regression] ICE when building Inkscape with gcc-4.1 with -O2 -ffast-math,"attempting to build Inkscape-1.44 with -O2 -ffast-math triggers an ICE with gcc-4.1.1:text-editing.cpp: In function 'void sp_te_adjust_linespacing_screen(SPItem*, const Inkscape::Text::Layout::iterator&, const Inkscape::Text::Layout::iterator&, SPDesktop*, gdouble)':text-editing.cpp:1005: internal compiler error: in nearest_common_dominator, at dominance.c:790verified on Gentoo and Debian that 4.0.3 works, 4.1.1 fails, mainline works",RESOLVED          FIXED      
27063,Paolo Bonzini,Fail to build gcc-core-4.2 snapshots,"If you download only the gcc-core-4.2 snapshot, for exampleftp://ftp.uvsq.fr/pub/gcc/snapshots/4.2-20060401/gcc-core-4.2-20060401.tar.bz2and do a ../configure --enable-languages=c && makemake will stop complaining about some objC file that is not in the package:make[2]: *** No rule to make target `../../gcc/objc/objc-act.c', needed by `s-gtype'.  Stop.",RESOLVED          FIXED      
27733,Paolo Bonzini,[4.1 Regression] Large compile time regression,"Relative to gcc version 4.0.4 20060507 (prerelease) (Debian 4.0.3-3),gcc version 4.1.1 20060511 (prerelease) (Debian 4.1.0-4) and also my ownbuild of 4.2 exhibit a large increase in compile on the attached file.On my c3k, the time goes from ~ 5 seconds to 49 minutes.The compile command used is:/usr/bin/hppa64-linux-gnu-gcc-4.1 -nostdinc -v alloc.i -mno-space-regs -mfast-indirect-calls -mdisable-fpregs -march=2.0 -mschedule=8000 -O2 -Wall -Wundef -Wstrict-prototypes -Wno-trigraphs -Wdeclaration-after-statement -Wno-pointer-sign -fno-strict-aliasing -fno-common -fomit-frame-pointer -ffunction-sections -S",RESOLVED          FIXED      
27674,Paolo Bonzini,[4.2 Regression] make -j3 all-gcc fails when building natively,pc64:~/src/newtest/trunk/objdir> make -j3 all-gcccat: stage_last: No such file or directorymake: invalid option -- aUsage: make [options] [target] ...Report bugs to <bug-make@gnu.org>make: *** [configure-build-libiberty] Error 2make: *** Waiting for unfinished jobs....,RESOLVED          FIXED      
25453,Paolo Bonzini,[4.2 Regression] --disable-bootstrap is not documented,--disable-bootstrap is not documented at all onhttp://gcc.gnu.org/install/configure.html,RESOLVED          FIXED      
26821,Paolo Bonzini,[4.1 Regression] ice in varasm.c with certain flags,"The following code ices with the given options:$ cat icey.f      SUBROUTINE IRCGS2(NC,QA,QB,QC,RTRMS)      IMPLICIT DOUBLE PRECISION(A-H,O-Z)      DIMENSION QA(NC), QB(NC), QC(NC), QCM(6000), QBM(6000), QAM(6000),     * RTRMS(NC)      IF (NC .GT. 6000) NC = 6000      DO 30 I = 1,NC         RTRMSI = RTRMS(I)         QAM(I) = QA(I) / RTRMSI         QBM(I) = QB(I) / RTRMSI         QCM(I) = QC(I) / RTRMSI   30 CONTINUE      RETURN      END$ gfc -c -march=pentium4 -O -ffast-math -ftree-vectorize  icey.ficey.f:12: internal compiler error: in output_constant_pool_2, at varasm.c:3339Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.Adding -fno-automatic and there is no ice.$ gfc -c -march=pentium4 -O -ffast-math -ftree-vectorize -fno-automatic  icey.f$Using -march=k8 instead of -march=pentium4 also ices.Getting rid of the -march= and the ice goes away.$ gfc -v Using built-in specs.Target: i686-pc-linux-gnuConfigured with: ../main/configure --prefix=/home/jerry/gcc/usr --enable-languages=c,fortran --disable-libmudflapThread model: posixgcc version 4.2.0 20060323 (experimental)",RESOLVED          FIXED      
27006,Paolo Bonzini,[4.1/4.2 Regression] Invalid altivec constant loading code,"When compiling the following code with -O0 -maltivec:typedef union{  int i[4];  __attribute__((altivec(vector__))) int v;} vec_int4;int main (void){   vec_int4 i1;   i1.v = (__attribute__((altivec(vector__))) int){31, 31, 31, 31};   printf (""%d\n"", i1.i[0]);   return 0;}the output printed is 30, not 31.The load of the vector constant is done by the following pairof instructions:        vspltisw 0,15        vadduwm 0,0,0which are generated by this splitter in altivec.md:(define_split  [(set (match_operand:VI 0 ""altivec_register_operand"" """")        (match_operand:VI 1 ""easy_vector_constant_add_self"" """"))]  ""TARGET_ALTIVEC && reload_completed""  [(set (match_dup 0) (match_dup 3))   (set (match_dup 0) (plus:VI (match_dup 0)                               (match_dup 0)))]{  rtx dup = gen_easy_altivec_constant (operands[1]);  rtx const_vec;  /* Divide the operand of the resulting VEC_DUPLICATE, and use     simplify_rtx to make a CONST_VECTOR.  */  XEXP (dup, 0) = simplify_const_binary_operation (ASHIFTRT, QImode,                                                   XEXP (dup, 0), const1_rtx);  const_vec = simplify_rtx (dup);  if (GET_MODE (const_vec) == <MODE>mode)    operands[3] = const_vec;  else    operands[3] = gen_lowpart (<MODE>mode, const_vec);})Now, easy_vector_constand_add_self accepts all constants between16 and 31, where I think it should really only be accepting *even*constants.The test is really implemented in rs6000.h:#define EASY_VECTOR_15_ADD_SELF(n) (!EASY_VECTOR_15((n))        \                                    && EASY_VECTOR_15((n) >> 1))and adding a condition ((n) & 1) == 0 here fixes the problem.Is this the proper solution?",RESOLVED          FIXED      
19653,Paolo Bonzini,x87 reg allocated for constants for -mfpmath=sse,"A self-contained testcase is attached to this bugreport. Please compile it with-O2 -march=pentium4 -mfpmath=sse -ffast-math.This part of the testcase:  ...  if ( fabs(fabs(NewRay->Direction[Z])- 1.) < .1 ) {    /* too close to vertical for comfort, so use cross product with horizon */    up[X] = 0.; up[Y] = 1.; up[Z] = 0.;  }  else  {    up[X] = 0.; up[Y] = 0.; up[Z] = 1.;  }  VCross(n2, NewRay->Direction, up);  VNormalizeEq(n2);  VCross(n3, NewRay->Direction, n2);  VNormalizeEq(n3);  ...will generate:	jae	.L2	fldz	fstl	-112(%ebp)	movsd	-112(%ebp), %xmm2	fld1	fstpl	-112(%ebp)	movsd	-112(%ebp), %xmm1.L5:	fldl	32(%ebx)	fstpl	-96(%ebp)	movsd	-96(%ebp), %xmm3	mulsd	%xmm2, %xmm3	movapd	%xmm5, %xmm0	mulsd	%xmm1, %xmm0	subsd	%xmm0, %xmm3	fldl	24(%ebx)	fstpl	-88(%ebp)	mulsd	-88(%ebp), %xmm2	xorpd	.LC5, %xmm2	movsd	-88(%ebp), %xmm4        ....L2:	fld1	fstpl	-112(%ebp)	movsd	-112(%ebp), %xmm2	fldz	fstl	-112(%ebp)	movsd	-112(%ebp), %xmm1	jmp	.L5Uros.",RESOLVED          FIXED      
25670,Paolo Bonzini,[4.2 Regression] build fail with 'make all-gcc',"I've configured with:./configure --prefix=.../install --disable-nls --disable-libgcj --enable-languages=cExecuted:make all-gccOutput:...make[2]: Leaving directory `.../intl'cat: stage_last: No such file or directorymake: invalid option -- aUsage: make [options] [target] ......It appeared after: Revision 108512I think the problem is the missing check for 'stage_last' filein the Makefile.The following modification solved the problem, but I didn't test it very thoroughly.Makefile.tpl:-unstage = [ -f stage_current ] || $(MAKE) `cat stage_last`-start+unstage = [ -f stage_current ] || if [ -f stage_last ]; then $(MAKE) `cat stage_last`-start; fi",RESOLVED          FIXED      
25476,Paolo Bonzini,[4.2 Regression] Fixincludes is run three times,We now run/build fixincludes three when bootstrapping GCC.  We really only need to build/run it once after stage1.Right now we build and run it three times which seems like a waste of time.,RESOLVED          FIXED      
25695,Paolo Bonzini,[4.2 Regression] bootstrap comparison not clearly identifiable,We no longer (after toplevel bootstrap) do a comparision between stage2 and stage3.,RESOLVED          FIXED      
21512,Paolo Bonzini,[4.0/4.1/4.2 Regression] build failure on ppc-apple-darwin5.5 in libcpp,"When compiling libcpp/init.c:../../gcc/libcpp/init.c:59: parse error before `,'[9 times]This error happens on:TRIGRAPH_MAP  s('=', '#')   s(')', ']')     s('!', '|')  s('(', '[')   s('\'', '^')    s('>', '}')  s('/', '\\')  s('<', '{')     s('-', '~')ENDwhich, once preprocessed, is:__extension__ const uchar _cpp_trigraph_map[255  + 1] = {  [ '=' ] =   '#' ,     [ ')' ] =   ']' ,       [ '!' ] =   '|' ,  [ '(' ] =   '[' ,     [ '\'' ] =   '^' ,      [ '>' ] =   '}' ,  [ '/' ] =   '\\' ,    [ '<' ] =   '{' ,       [ '-' ] =   '~' ,};The following minimal code:__extension__ const unsigned char _cpp_trigraph_map[255  + 1] = {  [ '=' ] =   '#' ,     [ ')' ] =   ']' ,       [ '!' ] =   '|' };compiles fine on my linux box but gives 3 ""parse error before `,'"" on ppc-darwin5.5.A workaround seems to specify -DHAVE_DESIGNATED_INITIALIZERS=0.",RESOLVED          FIXED      
25905,Paolo Bonzini,[4.2 regression] ICE in expand_compound_operation,"$ ./xgcc -B./ unwind-dw2-fde-glibc.i -S -O -vReading specs from ./specsTarget: m68k-linuxConfigured with: ../gcc/configure --prefix=/usr/local/m68k-linux --host=powerpc-linux --target=m68k-linux --with-sysroot=/usr/local/m68k-linux/m68k-linux/sys-root --enable-shared --enable-__cxa_atexit --with-system-zlib --enable-languages=c,c++,fortran,java,objc --no-create --no-recursionThread model: posixgcc version 4.2.0 20060121 (experimental) ./cc1 -fpreprocessed unwind-dw2-fde-glibc.i -quiet -dumpbase unwind-dw2-fde-glibc.i -auxbase unwind-dw2-fde-glibc -O -version -o unwind-dw2-fde-glibc.sGNU C version 4.2.0 20060121 (experimental) (m68k-linux)        compiled by GNU C version 4.0.2 20050901 (prerelease) (SUSE Linux).GGC heuristics: --param ggc-min-expand=30 --param ggc-min-heapsize=4096Compiler executable checksum: 0ad6bd3654ebd3f56f26d23ad96d1796../../gcc/gcc/unwind-dw2-fde.c: In function &#8216;fde_single_encoding_compare&#8217;:../../gcc/gcc/unwind-dw2-fde.c:350: internal compiler error: in expand_compound_operation, at combine.c:5644Caused by:r109961 | bonzini | 2006-01-19 15:54:57 +0100 (Do, 19 Jan 2006) | 13 lines2006-01-19  Paolo Bonzini  <bonzini@gnu.org>	* combine.c (try_combine): Do not worry about MEMs wrapped by USEs.	(expand_compound_operation, expand_field_assignment): Fail if the	bit lengths of an extract operation are out of range.	(make_extraction): Compute wanted_inner_mode based on the position	and length of the extraction.  Make it extraction_mode for non-constant	positions, and do not modify offset in that case.  When generating a	new MEM, use a mode that can hold the extraction while keeping correct	alignment.  Remove code that supported MEMs wrapped by USEs.	(simplify_shift_const_1, force_to_mode) <case USE>: Remove.",RESOLVED          FIXED      
25890,Paolo Bonzini,[4.2 regression] testsuite failure: gcc.c-torture/compile/20051228-1.c,"Last known to work with: ""Tue Jan 17 02:44:03 UTC 2006 (revision 109801M)"".Known to fail with: ""Fri Jan 20 05:17:46 UTC 2006 (revision 110008M)"".Running /home/hp/combined/combined/gcc/testsuite/gcc.c-torture/compile/compile.exp ...FAIL: gcc.c-torture/compile/20051228-1.c  -O1  (test for excess errors)FAIL: gcc.c-torture/compile/20051228-1.c  -O2  (test for excess errors)FAIL: gcc.c-torture/compile/20051228-1.c  -O3 -fomit-frame-pointer  (test for excess errors)FAIL: gcc.c-torture/compile/20051228-1.c  -O3 -g  (test for excess errors)FAIL: gcc.c-torture/compile/20051228-1.c  -Os  (test for excess errors)With the message in the .log being for all:x/combined/gcc/testsuite/gcc.c-torture/compile/20051228-1.c: In function 'foo':^Mx/combined/gcc/testsuite/gcc.c-torture/compile/20051228-1.c:10: internal compiler error: in expand_compound_opera\tion, at combine.c:5644^M",RESOLVED          FIXED      
23948,Paolo Bonzini,[4.1 Regression] internal compiler error: verify_stmts failed,"When compiling the attached file, the compilation gives the error shown.How do I attach the file?  I don't see a button to do so.",RESOLVED          FIXED      
25677,Paolo Bonzini,[4.2 regression] testsuite failure:gcc.c-torture/execute/960802-1.c -O1 and -O2,"Last known to work with: ""Mon Dec 12 22:04:54 UTC 2005 (revision 108426M)"".Known to fail with: ""Mon Jan  2 13:08:54 UTC 2006 (revision 109236M)"":Running /home/hp/combined/combined/gcc/testsuite/gcc.c-torture/execute/execute.exp ...FAIL: gcc.c-torture/execute/960802-1.c execution,  -O1FAIL: gcc.c-torture/execute/960802-1.c execution,  -O2With the message in gcc.log showing an abort call.The assembly code acts as if the line v = (v & 0x00ffffff) | (o & 0xff000000);was v = o;(actually there are no instructions which is the same as passing on thereturn value from the previous call as the first parameter in this ABI.)Looking at the RTL dumps, it seems combine is at fault; all the bit fiddlingis gone.As there has been changes in this area after Jan 2, I expect it to have beenfixed but it seemed proper to add this PR before updating.I assign it to myself until I've checked whether it remains, so no-one istempted to do a wild goose chase.",RESOLVED          FIXED      
24123,Paolo Bonzini,[4.1 Regression] Massive performance regression for -ffast-math due to the recip tree pass,"There is a huge performance regression due to the recip tree pass. A problem wasfound in povray-3.6.1, where -ffast-math was 3 times slower (for -mfpmath=sse or-mfpmath=387).The problem was traced to POVFPU_RunDefault function that was found to be morethan 20 (twenty!) times slower:with -ffast-math:Each sample counts as 0.00195312 seconds.  %   cumulative   self              self     total            time   seconds   seconds    calls   s/call   s/call  name     75.69     41.10    41.10  2622181     0.00     0.00 pov::POVFPU_RunDefault(unsigned)  2.68     42.55     1.46  3849666     0.00     0.00 pov::Intersect_Light_Tree(pov::Ray_Struct*, pov::Project_Tree_Node_Struct*, int,int, pov::istk_entry*, pov::Object_Struct**, pov::Light_Source_Struct*) without -ffast-math:Each sample counts as 0.00195312 seconds.  %   cumulative   self              self     total            time   seconds   seconds    calls   s/call   s/call  name     12.04      1.85     1.85  2622153     0.00     0.00 pov::POVFPU_RunDefault(unsigned)  9.01      3.23     1.38  3849666     0.00     0.00 pov::Intersect_Light_Tree(pov::Ray_Struct*, pov::Project_Tree_Node_Struct*, int,int, pov::istk_entry*, pov::Object_Struct**, pov::Light_Source_Struct*)  7.25      4.34     1.11   190627     0.00     0.00  pov::sbisect(int, pov::p*,double, double, int, int, double*)Attached testcase, that was reduced from actual source(povray-3.6.1/source/fnpovfpu.cpp, POVFPU_RunDefault()), shows the problem withrecip pass:gcc -O2 -ffast-math:<bb 0>:  # pc_17 = PHI <0(0), pc_33(322)>;  # r7_15 = PHI <r7_20(0), r7_16(322)>;  # r6_13 = PHI <r6_21(0), r6_14(322)>;  # r5_11 = PHI <r5_22(0), r5_12(322)>;  # r4_9 = PHI <r4_23(0), r4_10(322)>;  # r3_7 = PHI <r3_24(0), r3_8(322)>;  # r2_5 = PHI <r2_25(0), r2_6(322)>;  # r1_3 = PHI <r1_26(0), r1_4(322)>;  # r0_1 = PHI <r0_27(0), r0_2(322)>;<L0>:;  reciptmp.51_38 = 1.0e+0 / r7_15;  reciptmp.52_35 = 1.0e+0 / r6_13;  reciptmp.53_34 = 1.0e+0 / r5_11;  reciptmp.54_43 = 1.0e+0 / r4_9;  reciptmp.55_40 = 1.0e+0 / r3_7;  reciptmp.56_39 = 1.0e+0 / r2_5;  reciptmp.57_48 = 1.0e+0 / r1_3;  reciptmp.58_45 = 1.0e+0 / r0_1;  D.1619_28 = pc_17 * 4;  D.1620_29 = (unsigned int *) D.1619_28;  D.1622_31 = *D.1620_29;  D.1623_32 = D.1622_31 & 4095;  switch (D.1623_32)    {      case 0: goto <L1>;      case 1: goto <L2>;      case 2: goto <L3>;      case 3: goto <L4>;      case 4: goto <L5>;      case 5: goto <L6>;      case 6: goto <L7>;      case 7: goto <L8>;      case 8: goto <L9>;      case 9: goto <L10>;      case 10: goto <L11>;      ...As shown, recip pass moves _eight_ divisions in front of switch. Now, for_every_ entry of switch, all eight divisions are performed. The produced code ishorrible:-mfpmath=sse:POVFPU_RunDefault:	pushl	%ebp	xorl	%edx, %edx	movl	%esp, %ebp	subl	$64, %esp	fldz	.p2align 4,,15.L4:	movl	0(,%edx,4), %eax	movsd	.LC1, %xmm7	movsd	.LC1, %xmm6	movsd	.LC1, %xmm5	movsd	.LC1, %xmm4	movsd	.LC1, %xmm3	movsd	.LC1, %xmm2	movsd	.LC1, %xmm1	movsd	.LC1, %xmm0	divsd	-8(%ebp), %xmm7	divsd	-16(%ebp), %xmm6	divsd	-24(%ebp), %xmm5	andl	$4095, %eax	divsd	-32(%ebp), %xmm4	divsd	-40(%ebp), %xmm3	cmpl	$319, %eax	divsd	-48(%ebp), %xmm2	divsd	-56(%ebp), %xmm1	divsd	-64(%ebp), %xmm0	ja	.L5	jmp	*.L326(,%eax,4)	.section	.rodata	.align 4	.align 4.L326:	.long	.L6	.long	.L7	.long	.L8	.long	.L9...for -mfpmath=387, the code is even worse, as every clause has a pack of fstp'sthat clear results of unneeded divisions at the beginning..L9:    fstp %st(0)    fstp %st(0)    fstp %st(0)    fstp %st(0)    fstp %st(0)    fstp %st(0)    fstp %st(0)    fstp %st(0)    fldl -40(%ebp)    incl %edx    faddl -64(%ebp)    fstpl -40(%ebp)    jmp .L4",RESOLVED          FIXED      
23109,Paolo Bonzini,[4.1 Regression] compiler generates wrong code leading to spurious division by zero with -funsafe-math-optimizations (instead of -ftrapping-math),"The attached code crashes on a division by zero when compiled as follows:dogbert> gcc -O1 -funsafe-math-optimizations -ftrapping-math b.cdogbert> a.outFloating exceptiondogbert> gcc -vUsing built-in specs.Target: i686-pc-linux-gnuConfigured with: ../gcc/configure --prefix=/usr/local/gcc410--enable-languages=c,c++,f95Thread model: posixgcc version 4.1.0 20050725 (experimental)I don't believe that -funsafe-math-optimizations enables -fno-trapping-math, butto be really sure I added the -ftrapping-math command line option. It makes nodifference.Taken at face value it looks like the optimizer lifts the division by d outsidethe conditional on line 19, even though that could lead to a spurious divisionby zero and -ftrapping-math is in effect.This behavior only shows up on the mainline, and not on the 3.4 and 4.0branches. A slightly modified version (to enable FP traps on Suns) also crasheswith gcc 4.1.0 on the target sparc-sun-solaris2.9.",RESOLVED          FIXED      
25578,Paolo Bonzini,[4.2 Regression] gfortran  version 4.2.0 20051227 - 144 new testsuite failures since 2005121,"The 20051227 version of gfortran has 144 new testsuite failures as compared to the 2005121 version -Test Run By dir on Tue Dec 27 11:07:49 2005Native configuration is powerpc-apple-darwin8.3.0                === gfortran tests ===Schedule of variations:    unixRunning target unixUsing /usr/local/share/dejagnu/baseboards/unix.exp as board description file for target.Using /usr/local/share/dejagnu/config/unix.exp as generic interface file for target.Using /Users/dir/gfortran/gcc/gcc/testsuite/config/default.exp as tool-and-target-specific interface file.Running /Users/dir/gfortran/gcc/gcc/testsuite/gfortran.dg/dg.exp ...FAIL: gfortran.dg/complex_intrinsic_1.f90 execution testFAIL: gfortran.dg/complex_intrinsic_1.f90 execution testFAIL: gfortran.dg/complex_intrinsic_1.f90 execution testFAIL: gfortran.dg/complex_intrinsic_1.f90 execution testFAIL: gfortran.dg/complex_intrinsic_1.f90 execution testFAIL: gfortran.dg/complex_intrinsic_1.f90 execution testFAIL: gfortran.dg/complex_intrinsic_1.f90 execution testFAIL: gfortran.dg/complex_intrinsic_1.f90 execution testFAIL: gfortran.dg/f2c_2.f90 execution testFAIL: gfortran.dg/f2c_2.f90 execution testFAIL: gfortran.dg/f2c_2.f90 execution testFAIL: gfortran.dg/f2c_2.f90 execution testFAIL: gfortran.dg/f2c_2.f90 execution testFAIL: gfortran.dg/f2c_2.f90 execution testFAIL: gfortran.dg/f2c_2.f90 execution testFAIL: gfortran.dg/f2c_2.f90 execution testFAIL: gfortran.dg/int_1.f90 execution testFAIL: gfortran.dg/int_1.f90 execution testFAIL: gfortran.dg/int_1.f90 execution testFAIL: gfortran.dg/int_1.f90 execution testFAIL: gfortran.dg/int_1.f90 execution testFAIL: gfortran.dg/int_1.f90 execution testFAIL: gfortran.dg/int_1.f90 execution testFAIL: gfortran.dg/int_1.f90 execution testFAIL: gfortran.dg/large_real_kind_2.F90 execution testFAIL: gfortran.dg/large_real_kind_2.F90 execution testFAIL: gfortran.dg/large_real_kind_2.F90 execution testFAIL: gfortran.dg/large_real_kind_2.F90 execution testFAIL: gfortran.dg/large_real_kind_2.F90 execution testFAIL: gfortran.dg/large_real_kind_2.F90 execution testFAIL: gfortran.dg/large_real_kind_2.F90 execution testFAIL: gfortran.dg/large_real_kind_2.F90 execution testFAIL: gfortran.dg/list_read_4.f90 execution testFAIL: gfortran.dg/list_read_4.f90 execution testFAIL: gfortran.dg/list_read_4.f90 execution testFAIL: gfortran.dg/list_read_4.f90 execution testFAIL: gfortran.dg/list_read_4.f90 execution testFAIL: gfortran.dg/list_read_4.f90 execution testFAIL: gfortran.dg/list_read_4.f90 execution testFAIL: gfortran.dg/list_read_4.f90 execution testFAIL: gfortran.dg/nested_modules_1.f90 execution testFAIL: gfortran.dg/nested_modules_1.f90 execution testFAIL: gfortran.dg/nested_modules_1.f90 execution testFAIL: gfortran.dg/nested_modules_1.f90 execution testFAIL: gfortran.dg/nested_modules_1.f90 execution testFAIL: gfortran.dg/nested_modules_1.f90 execution testFAIL: gfortran.dg/nested_modules_1.f90 execution testFAIL: gfortran.dg/nested_modules_1.f90 execution testFAIL: gfortran.dg/real_const_1.f execution testFAIL: gfortran.dg/real_const_1.f execution testFAIL: gfortran.dg/real_const_1.f execution testFAIL: gfortran.dg/real_const_1.f execution testFAIL: gfortran.dg/real_const_1.f execution testFAIL: gfortran.dg/real_const_1.f execution testFAIL: gfortran.dg/real_const_1.f execution testFAIL: gfortran.dg/real_const_1.f execution testFAIL: gfortran.dg/real_const_2.f90 execution testFAIL: gfortran.dg/real_const_2.f90 execution testFAIL: gfortran.dg/real_const_2.f90 execution testFAIL: gfortran.dg/real_const_2.f90 execution testFAIL: gfortran.dg/real_const_2.f90 execution testFAIL: gfortran.dg/real_const_2.f90 execution testFAIL: gfortran.dg/real_const_2.f90 execution testFAIL: gfortran.dg/real_const_2.f90 execution testFAIL: gfortran.dg/g77/947.f execution testFAIL: gfortran.dg/g77/947.f execution testFAIL: gfortran.dg/g77/947.f execution testFAIL: gfortran.dg/g77/947.f execution testFAIL: gfortran.dg/g77/947.f execution testFAIL: gfortran.dg/g77/947.f execution testFAIL: gfortran.dg/g77/947.f execution testFAIL: gfortran.dg/g77/947.f execution testFAIL: gfortran.dg/g77/complex_1.f execution testFAIL: gfortran.dg/g77/complex_1.f execution testFAIL: gfortran.dg/g77/complex_1.f execution testFAIL: gfortran.dg/g77/complex_1.f execution testFAIL: gfortran.dg/g77/complex_1.f execution testFAIL: gfortran.dg/g77/complex_1.f execution testFAIL: gfortran.dg/g77/complex_1.f execution testFAIL: gfortran.dg/g77/complex_1.f execution testFAIL: gfortran.dg/g77/dcomplex.f execution testFAIL: gfortran.dg/g77/dcomplex.f execution testFAIL: gfortran.dg/g77/dcomplex.f execution testFAIL: gfortran.dg/g77/dcomplex.f execution testFAIL: gfortran.dg/g77/dcomplex.f execution testFAIL: gfortran.dg/g77/dcomplex.f execution testFAIL: gfortran.dg/g77/dcomplex.f execution testFAIL: gfortran.dg/g77/dcomplex.f execution testFAIL: gfortran.dg/g77/f90-intrinsic-numeric.f execution testFAIL: gfortran.dg/g77/f90-intrinsic-numeric.f execution testFAIL: gfortran.dg/g77/f90-intrinsic-numeric.f execution testFAIL: gfortran.dg/g77/f90-intrinsic-numeric.f execution testFAIL: gfortran.dg/g77/f90-intrinsic-numeric.f execution testFAIL: gfortran.dg/g77/f90-intrinsic-numeric.f execution testFAIL: gfortran.dg/g77/f90-intrinsic-numeric.f execution testFAIL: gfortran.dg/g77/f90-intrinsic-numeric.f execution testRunning /Users/dir/gfortran/gcc/gcc/testsuite/gfortran.dg/vect/vect.exp ...Running /Users/dir/gfortran/gcc/gcc/testsuite/gfortran.fortran-torture/compile/compile.exp ...Running /Users/dir/gfortran/gcc/gcc/testsuite/gfortran.fortran-torture/execute/execute.exp ...FAIL: gfortran.fortran-torture/execute/cmplx.f90 execution,  -O0 FAIL: gfortran.fortran-torture/execute/cmplx.f90 execution,  -O1 FAIL: gfortran.fortran-torture/execute/cmplx.f90 execution,  -O2 FAIL: gfortran.fortran-torture/execute/cmplx.f90 execution,  -O3 -fomit-frame-pointer FAIL: gfortran.fortran-torture/execute/cmplx.f90 execution,  -O3 -fomit-frame-pointer -funroll-loops FAIL: gfortran.fortran-torture/execute/cmplx.f90 execution,  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions FAIL: gfortran.fortran-torture/execute/cmplx.f90 execution,  -O3 -g FAIL: gfortran.fortran-torture/execute/cmplx.f90 execution,  -Os FAIL: gfortran.fortran-torture/execute/intrinsic_dotprod.f90 execution,  -O0 FAIL: gfortran.fortran-torture/execute/intrinsic_dotprod.f90 execution,  -O1 FAIL: gfortran.fortran-torture/execute/intrinsic_dotprod.f90 execution,  -O2 FAIL: gfortran.fortran-torture/execute/intrinsic_dotprod.f90 execution,  -O3 -fomit-frame-pointer FAIL: gfortran.fortran-torture/execute/intrinsic_dotprod.f90 execution,  -O3 -fomit-frame-pointer -funroll-loops FAIL: gfortran.fortran-torture/execute/intrinsic_dotprod.f90 execution,  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions FAIL: gfortran.fortran-torture/execute/intrinsic_dotprod.f90 execution,  -O3 -g FAIL: gfortran.fortran-torture/execute/intrinsic_dotprod.f90 execution,  -Os FAIL: gfortran.fortran-torture/execute/intrinsic_minmax.f90 execution,  -O0 FAIL: gfortran.fortran-torture/execute/intrinsic_minmax.f90 execution,  -O1 FAIL: gfortran.fortran-torture/execute/intrinsic_minmax.f90 execution,  -O2 FAIL: gfortran.fortran-torture/execute/intrinsic_minmax.f90 execution,  -O3 -fomit-frame-pointer FAIL: gfortran.fortran-torture/execute/intrinsic_minmax.f90 execution,  -O3 -fomit-frame-pointer -funroll-loops FAIL: gfortran.fortran-torture/execute/intrinsic_minmax.f90 execution,  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions FAIL: gfortran.fortran-torture/execute/intrinsic_minmax.f90 execution,  -O3 -g FAIL: gfortran.fortran-torture/execute/intrinsic_minmax.f90 execution,  -Os FAIL: gfortran.fortran-torture/execute/intrinsic_mod_ulo.f90 execution,  -O0 FAIL: gfortran.fortran-torture/execute/intrinsic_mod_ulo.f90 execution,  -O1 FAIL: gfortran.fortran-torture/execute/intrinsic_mod_ulo.f90 execution,  -O2 FAIL: gfortran.fortran-torture/execute/intrinsic_mod_ulo.f90 execution,  -O3 -fomit-frame-pointer FAIL: gfortran.fortran-torture/execute/intrinsic_mod_ulo.f90 execution,  -O3 -fomit-frame-pointer -funroll-loops FAIL: gfortran.fortran-torture/execute/intrinsic_mod_ulo.f90 execution,  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions FAIL: gfortran.fortran-torture/execute/intrinsic_mod_ulo.f90 execution,  -O3 -g FAIL: gfortran.fortran-torture/execute/intrinsic_mod_ulo.f90 execution,  -Os FAIL: gfortran.fortran-torture/execute/math.f90 execution,  -O0 FAIL: gfortran.fortran-torture/execute/math.f90 execution,  -O1 FAIL: gfortran.fortran-torture/execute/math.f90 execution,  -O2 FAIL: gfortran.fortran-torture/execute/math.f90 execution,  -O3 -fomit-frame-pointer FAIL: gfortran.fortran-torture/execute/math.f90 execution,  -O3 -fomit-frame-pointer -funroll-loops FAIL: gfortran.fortran-torture/execute/math.f90 execution,  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions FAIL: gfortran.fortran-torture/execute/math.f90 execution,  -O3 -g FAIL: gfortran.fortran-torture/execute/math.f90 execution,  -Os FAIL: gfortran.fortran-torture/execute/parameter_2.f90 execution,  -O0 FAIL: gfortran.fortran-torture/execute/parameter_2.f90 execution,  -O1 FAIL: gfortran.fortran-torture/execute/parameter_2.f90 execution,  -O2 FAIL: gfortran.fortran-torture/execute/parameter_2.f90 execution,  -O3 -fomit-frame-pointer FAIL: gfortran.fortran-torture/execute/parameter_2.f90 execution,  -O3 -fomit-frame-pointer -funroll-loops FAIL: gfortran.fortran-torture/execute/parameter_2.f90 execution,  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions FAIL: gfortran.fortran-torture/execute/parameter_2.f90 execution,  -O3 -g FAIL: gfortran.fortran-torture/execute/parameter_2.f90 execution,  -Os FAIL: gfortran.fortran-torture/execute/power.f90 execution,  -O0 FAIL: gfortran.fortran-torture/execute/power.f90 execution,  -O1 FAIL: gfortran.fortran-torture/execute/power.f90 execution,  -O2 FAIL: gfortran.fortran-torture/execute/power.f90 execution,  -O3 -fomit-frame-pointer FAIL: gfortran.fortran-torture/execute/power.f90 execution,  -O3 -fomit-frame-pointer -funroll-loops FAIL: gfortran.fortran-torture/execute/power.f90 execution,  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions FAIL: gfortran.fortran-torture/execute/power.f90 execution,  -O3 -g FAIL: gfortran.fortran-torture/execute/power.f90 execution,  -Os                 === gfortran Summary ===# of expected passes            10856# of unexpected failures        152# of expected failures          7# of unsupported tests          42/Users/dir/gfortran/ibin/stage3-gcc/testsuite/../gfortran  version 4.2.0 20051227 (experimental)",RESOLVED          FIXED      
25452,Paolo Bonzini,"[4.2 Regression] make bootstrap-lean still documented, but no longer works","Reading the documention at http://gcc.gnu.org/install/build.htmlI see that ""make bootstrap-lean"" is mentioned and it no longer works after the toplevel bootstrap.[zhivago:combine/trunk/objdir1] pinskia% make bootstrap-leanmake: *** No rule to make target `bootstrap-lean'.  Stop.",RESOLVED          FIXED      
25115,Paolo Bonzini,[4.2 Regression] Segmentation fault in pre_insert_copy_insn,"The mainline compiler for sh4-*-linux-gnu segfaults with -O2 onthe program:struct state{  int retrans;  int retry;  int options;  char pad[4];};extern __thread struct state *res  __attribute__ ((tls_model (""initial-exec"")));voidfoo (void){  if (!res->retrans)    res->retrans = 5;  if (!res->retry)    res->retry = 4;  if (!res->options)    res->options = 1;}in gcse.c:pre_insert_copy_insn.  It starts to fail after the patchr107456:2005-11-24  Paolo Bonzini  <bonzini@gnu.org>	* gcse.c (hash_scan_set): Look through REG_EQUAL or REG_EQUIV notes	also when doing PRE, rather than only for global CPROP.",RESOLVED          FIXED      
25180,Paolo Bonzini,[4.1 Regression] ICE during kernel build.,"gcc-4.1.0-20051126 rev 107546[builder2@forge linux-2.6.14.3]$ gcc attrib.i -c -O2fs/ntfs/attrib.c: In function 'ntfs_attr_lookup':fs/ntfs/attrib.c:1025: internal compiler error: Segmentation fault$ gcc -vReading specs from /usr/lib/gcc/ppc-pld-linux/4.1.0/specsTarget: ppc-pld-linuxConfigured with: ../configure --prefix=/usr --libdir=/usr/lib --libexecdir=/usr/lib --infodir=/usr/share/info --mandir=/usr/share/man --x-libraries=/usr/X11R6/lib --enable-shared --enable-threads=posix --enable-__cxa_atexit --enable-languages=c,c++,f95,objc,obj-c++,ada,java --enable-c99 --enable-long-long --disable-multilib --enable-nls --disable-werror --with-gnu-as --with-gnu-ld --with-demangler-in-ld --with-system-zlib --with-slibdir=/lib --without-x --enable-cmath --enable-libgcj --enable-libgcj-multifile --enable-libgcj-database --enable-gtk-peer --enable-gtk-cairo --enable-jni --enable-xmlj --enable-alsa --enable-dssi ppc-pld-linuxThread model: posixgcc version 4.1.0 20051126 (prerelease)",RESOLVED          FIXED      
24951,Paolo Bonzini,"[4.1/4.2 Regression] ICE: RTL check: expected code 'const_int', have 'const_double' in output_vec_const_move, at config/rs6000/rs6000.c","Running the testsuite, I see the following ICE:Executing on host: /abuild/aj/gcc/gcc/xgcc -B/abuild/aj/gcc/gcc/ /aj-cvs/gcc-svn/branches/gcc-4_1-branch/gcc/testsuite/gcc.dg/vect/pr22506.c   -O2 -ftree-vectorize -maltivec -ftree-vectorizer-verbose=4 -fdump-tree-vect-stats -fno-show-column -S  -m64 -o pr22506.s    (timeout = 300)/aj-cvs/gcc-svn/branches/gcc-4_1-branch/gcc/testsuite/gcc.dg/vect/pr22506.c: In function 'foo':/aj-cvs/gcc-svn/branches/gcc-4_1-branch/gcc/testsuite/gcc.dg/vect/pr22506.c:12: internal compiler error: RTL check: expected code 'const_int', have 'const_double' in output_vec_const_move, at config/rs6000/rs6000.c:2204Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.compiler exited with status 1output is:/aj-cvs/gcc-svn/branches/gcc-4_1-branch/gcc/testsuite/gcc.dg/vect/pr22506.c: In function 'foo':/aj-cvs/gcc-svn/branches/gcc-4_1-branch/gcc/testsuite/gcc.dg/vect/pr22506.c:12: internal compiler error: RTL check: expected code 'const_int', have 'const_double' in output_vec_const_move, at config/rs6000/rs6000.c:2204Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.FAIL: gcc.dg/vect/pr22506.c (test for excess errors)This is with:/opt/gcc/4.1-devel/bin/gcc -vUsing built-in specs.Target: powerpc64-suse-linux-gnuConfigured with: /aj-cvs/gcc-svn/branches/gcc-4_1-branch/configure --prefix=/opt/gcc/4.1-devel --enable-checking=misc,tree,gc,rtl,rtlflag,assert --enable-threads=posix --enable-clocale=gnu --enable-__cxa_atexit --enable-shared --enable-languages=c,c++,treelang,java,f95,objc --with-system-zlib --with-cpu=default32 powerpc64-suse-linux-gnuThread model: posixgcc version 4.1.0 20051119 (prerelease)",VERIFIED          FIXED      
19672,Paolo Bonzini,[3.4 Regression] Performance regression in simple loop code,"In the following C source file test.c,  int compare(char const * p1, int n1, char const * p2, int n2) {    char const * q1 = p1 + n1;    char const * q2 = p2 + n2;    while (p1 < q1 && p2 < q2) {      int n = *--q1 - *--q2;      if (n) {        return n;      }    }    return n1 - n2;  }  int main(void) {    char str[1000];    int i;    for (i = 0; i < 1000000; ++i) {      compare(str, 1000, str, 1000);    }  }compiled with  gcc -O2 test.cthe loop body within compare takes 14 instructions on GCC 3.4.3 Linux x86,compared to only 11 instructions on GCC 3.2.2 Linux x86 (see disassembliesbelow), and the GCC 3.4.3 output takes substantially longer to run than the GCC3.2.2 output:  3.4.3> time ./a.out  4.690u 0.001s 0:04.71 99.5%  3.2.2> time ./a.out  3.533u 0.002s 0:03.55 99.4%This seems to bite us on OpenOffice.org, which contains an oft-called functionsimilar to compare above, and new versions of OOo (built with GCC 3.4) runslower than old versions (built with GCC 3.2).  The question that remains for usis whether this performance loss is specific to the given function, or could bea general problem.The dissasemblies:08048360 <compare>: ! gcc 3.4.38048360: 55                      push   %ebp8048361: 89 e5                   mov    %esp,%ebp8048363: 57                      push   %edi8048364: 56                      push   %esi8048365: 53                      push   %ebx8048366: 8b 45 0c                mov    0xc(%ebp),%eax8048369: 8b 7d 08                mov    0x8(%ebp),%edi804836c: 8b 75 10                mov    0x10(%ebp),%esi804836f: 8d 1c 07                lea    (%edi,%eax,1),%ebx8048372: 8b 45 14                mov    0x14(%ebp),%eax8048375: 8d 0c 06                lea    (%esi,%eax,1),%ecx8048378: 90                      nop8048379: 8d b4 26 00 00 00 00    lea    0x0(%esi),%esi8048380: 39 df                   cmp    %ebx,%edi      ! <-+8048382: 0f 92 c0                setb   %al            !   |8048385: 31 d2                   xor    %edx,%edx      !   |8048387: 39 ce                   cmp    %ecx,%esi      !   |8048389: 0f 92 c2                setb   %dl            !   |804838c: 85 d0                   test   %edx,%eax      !   |804838e: 74 13                   je     80483a3        !   |8048390: 4b                      dec    %ebx           !   |8048391: 49                      dec    %ecx           !   |8048392: 0f be 01                movsbl (%ecx),%eax    !   |8048395: 0f be 13                movsbl (%ebx),%edx    !   |8048398: 29 c2                   sub    %eax,%edx      !   |804839a: 89 d0                   mov    %edx,%eax      !   |804839c: 74 e2                   je     8048380        ! --+804839e: 5b                      pop    %ebx804839f: 5e                      pop    %esi80483a0: 5f                      pop    %edi80483a1: 5d                      pop    %ebp80483a2: c3                      ret80483a3: 5b                      pop    %ebx80483a4: 8b 45 0c                mov    0xc(%ebp),%eax80483a7: 8b 55 14                mov    0x14(%ebp),%edx80483aa: 5e                      pop    %esi80483ab: 29 d0                   sub    %edx,%eax80483ad: 5f                      pop    %edi80483ae: 5d                      pop    %ebp80483af: c3                      ret08048370 <compare>: ! gcc 3.2.28048370: 55                      push   %ebp8048371: 89 e5                   mov    %esp,%ebp8048373: 57                      push   %edi8048374: 8b 45 0c                mov    0xc(%ebp),%eax8048377: 56                      push   %esi8048378: 8b 7d 08                mov    0x8(%ebp),%edi804837b: 53                      push   %ebx804837c: 8b 75 10                mov    0x10(%ebp),%esi804837f: 8d 1c 38                lea    (%eax,%edi,1),%ebx8048382: 8b 45 14                mov    0x14(%ebp),%eax8048385: 39 df                   cmp    %ebx,%edi8048387: 8d 0c 30                lea    (%eax,%esi,1),%ecx804838a: 73 1a                   jae    80483a6804838c: 39 ce                   cmp    %ecx,%esi804838e: 73 16                   jae    80483a68048390: 4b                      dec    %ebx           ! <-+8048391: 49                      dec    %ecx           !   |8048392: 0f be 01                movsbl (%ecx),%eax    !   |8048395: 0f be 13                movsbl (%ebx),%edx    !   |8048398: 29 c2                   sub    %eax,%edx      !   |804839a: 89 d0                   mov    %edx,%eax      !   |804839c: 75 10                   jne    80483ae        !   |804839e: 39 df                   cmp    %ebx,%edi      !   |80483a0: 73 04                   jae    80483a6        !   |80483a2: 39 ce                   cmp    %ecx,%esi      !   |80483a4: 72 ea                   jb     8048390        ! --+80483a6: 8b 45 0c                mov    0xc(%ebp),%eax80483a9: 8b 55 14                mov    0x14(%ebp),%edx80483ac: 29 d0                   sub    %edx,%eax80483ae: 5b                      pop    %ebx80483af: 5e                      pop    %esi80483b0: 5f                      pop    %edi80483b1: 5d                      pop    %ebp80483b2: c3                      ret",RESOLVED          FIXED      
24599,Paolo Bonzini,[4.0 regression] Overflow for true value,"The following testcase crashes when compiled with -O3.#include <stdbool.h>bool v_2 = true;bool *v_3 = &v_2;int idv_2 = 0;int idv_3 = 0;intmain (int argc, char **argv){    if ((bool)((1527719483 + 1477819644))) {    }    for (idv_2 = 0; idv_2 < 15; ++idv_2) {        for (idv_3 = 0; idv_3 < (v_2 ? 1 : *v_3) ; ++idv_3) {        }    }    return 0;}claire:~/claire/gnu/tmp/gcc402/gcc$ ./xgcc -B./ -O3 -c foo.cfoo.c: In function 'main':foo.c:11: warning: integer overflow in expressionfoo.c:10: internal compiler error: Segmentation faultPlease submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.NOTE: I haven't confirmed the following, but am passing it on in case it speedsup root-causing this.GCC 4.x's tree infrastructure introduces a new mechanism to create constant treenode. Instead of creating a new tree node for every reference of certain typeconstant as in GCC 3.4.1, a global tree node is created and shared by allreferences of a constant in GCC 4.x. The attributes of the global tree node isshared by all the references of the constant as well.--------------------------------------------    if ((bool)((1527719483 + 1477819644))) {    }    for (...) {       if (invariant_cond)           A       else          B            }   -----------------------------------------------------------------During const-folding optimization, overflow is detected for the expression""(1527719483 + 1477819644)"". The folded constant is casted to a boolean constant""1"", which is represented by a global tree node ""boolean_true_node"", and theattribute is passed to the tree node.During the later unswitch optimization, the loop segment is transformed:      if (invariant_cond)          for (...) {            if (1)               A            else               B         }      if (!invariant_cond)          for (...) {            if (0)               A            else              B         }        During the later induction variable reduction optimization, the ""1"" expressionin ""if (1)"" is checked in the following sequence in find_interesting_uses_cond():         if (integer_zerop(exp) || integer_nonzerop(exp)) {return;}         else {          ...  = exp->operands[0]          ...  = exp->operands[1]          ===> segmentation fault         }                                 ===> only one operand in ""1"" exp  The reason is because after the overflow attribute is passed to theboolean_true_node, integer_nonzerop(exp) returns false while it should return true.",RESOLVED          FIXED      
24230,Paolo Bonzini,[4.1 Regression] ICE in extract_insn with altivec,"/usr/lib/gcc/powerpc64-suse-linux/4.1.0/cc1 -fpreprocessed qpel_altivec.i -quiet -dumpbase qpel_altivec.c -maltivec -mabi=altivec -auxbase-strip =build/image/ppc_asm/qpel_altivec.o -O2 -Wall -version -fPIC -fmessage-length=0 -o qpel_altivec.s../../src/image/ppc_asm/qpel_altivec.c:414: error: unrecognizable insn:(insn 711 329 710 4 (set (reg:V16QI 90 13)        (mem/u/c/i:V16QI (symbol_ref/u:SI (""*.LC254"") [flags 0x2]) [0 S16 A128])) -1 (nil)    (nil))../../src/image/ppc_asm/qpel_altivec.c:414: internal compiler error: in extract_insn, at recog.c:2084Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://www.suse.de/feedback> for instructions.loads of preprocessor generated altivec intrinsics.  Dunno if this is aregression.",RESOLVED          FIXED      
24297,Paolo Bonzini,[4.1 Regression] libtool: link: unable to infer tagged configuration,make[3]: Entering directory `/home/dave/gnu/gcc-4.0/objdir/hppa-linux/boehm-gc'gcc -B/home/dave/opt/gnu/gcc/gcc-4.1.0/hppa-linux/bin/ -B/home/dave/opt/gnu/gcc/gcc-4.1.0/hppa-linux/lib/ -isystem /home/dave/opt/gnu/gcc/gcc-4.1.0/hppa-linux/include -isystem /home/dave/opt/gnu/gcc/gcc-4.1.0/hppa-linux/sys-include -DHAVE_CONFIG_H -I. -I../../../gcc/boehm-gc -I./include -I./include  -I/home/dave/gnu/gcc-4.0/gcc/boehm-gc/include  -fexceptions -Iinclude -I././targ-include -I.//libc/include -O2 -g -O2  -c -o tests/test.o ../../../gcc/boehm-gc/tests/test.c/bin/sh ./libtool --mode=link gcc -B/home/dave/opt/gnu/gcc/gcc-4.1.0/hppa-linux/bin/ -B/home/dave/opt/gnu/gcc/gcc-4.1.0/hppa-linux/lib/ -isystem /home/dave/opt/gnu/gcc/gcc-4.1.0/hppa-linux/include -isystem /home/dave/opt/gnu/gcc/gcc-4.1.0/hppa-linux/sys-include -fexceptions -Iinclude -I././targ-include -I.//libc/include -O2 -g -O2   -o gctest -shared-libgcc tests/test.o ./libgcjgc.la -lpthread -ldllibtool: link: unable to infer tagged configurationlibtool: link: specify a tag with `--tag'make[3]: *** [gctest] Error 1,RESOLVED          FIXED      
24052,Paolo Bonzini,[3.4/4.0/4.1 Regression] &#`label_decl' not supported by dump_expr#<expression error>,"I do not think labels as values are widely used with C++ operators; I stumbledover it only because of a typo (double &&). But in case of error, it willproduce a garbled message (tested from 3.3 to 4.1). For example,a.cpp:3:no match for 'operator&&' in 'A() && &#'label_decl' not supported bydump_expr#<expression error>'Testcase:struct A {};bool operator&&(A const &, A const &);int main() { A() && && b; }",RESOLVED          FIXED      
24146,Paolo Bonzini,[4.0 Regression] ASMs with no output are not marked as volatile,"For the following testcase, the call to mpfr_test_init is optimized awayat -O1 and up.  Which is of course bogous(?).void mpfr_test_init (void);void mpfr_test_init (){  do { int __cw = (0x037f & (~0x300)) | 0x200; __asm__ (""fldcw %0"" : : ""m""(__cw)); } while (0);}intmain (void){  mpfr_test_init ();  return 0;}",RESOLVED          FIXED      
21419,Paolo Bonzini,[4.0 Regression] Accepts writting to const via asm,"The following code is accepted now in 4.0.0 and above but should not be:void sigaddset(const int set){        __asm__("""" : ""=m""(set) );}",RESOLVED          FIXED      
23903,Paolo Bonzini,Duplicate dump file numbers,We are now emitting duplicate dump file numbers:file.c.t10.cleanup_cfgfile.c.t10.lowerThis started happening after Paolo's pass reorg.  He agreed to look at this.,RESOLVED          FIXED      
22259,Paolo Bonzini,[4.1 Regression] spawnv cannot execute gcc/as,"Building gcc on i686-pc-mingw32 fails with:/home/FX/ibin/./gcc/xgcc -B/home/FX/ibin/./gcc/ -B/mingw/i686-pc-mingw32/bin/-B/mingw/i686-pc-mingw32/lib/ -isystem /mingw/i686-pc-mingw32/include -isystem/mingw/i686-pc-mingw32/sys-include -O2 -I../../gcc/gcc/../winsup/w32api/include-DIN_GCC    -W -Wall -Wwrite-strings -Wstrict-prototypes -Wmissing-prototypes-Wold-style-definition  -isystem ./include   -g -DHAVE_GTHR_DEFAULT -DIN_LIBGCC2-D__GCC_FLOAT_NOT_NEEDED  -I. -I. -I../../gcc/gcc -I../../gcc/gcc/.-I../../gcc/gcc/../include -I./../intl -I../../gcc/gcc/../libcpp/include -DL_chkstk -xassembler-with-cpp -c ../../gcc/gcc/config/i386/cygwin.asm -olibgcc/./_chkstk.oexecutable: C:/msys/1.0/home/FX/ibin/gcc/cc1.exeexecutable: C:/msys/1.0/home/FX/ibin/gcc/asxgcc.exe: _spawnv: No such file or directory[lines beginning with ""executable:"" are debug statements printing the executableargument to pex_win32_exec_child, in libiberty/pex-win32.c]In fact, xgcc cannot be used. It tries to execute gcc/cc1.exe, which works fine,then gcc/as. gcc/as is a script, and not a real win32 executable program. Thusthe spawn fails.I don't know when this stopped to work. Seems that ""before"", the assembler wascalled directly and not by this script. Does someone know when this changed, anddoes someone have an idea on how to fix this?",RESOLVED          FIXED      
21268,Paolo Bonzini,"[4.0/4.1 Regression] Bootstrap, configuration problem and insn-conditions.c","I report this as follow up to bug 21145 that has been wrongly marked asduplicate of 19601. The bug I reported is not AWK problem and thus it is notduplicate of the bug. My problem is caused by wrong includes search paths andheaders with same names. I have installed autogen-5.6.4 which installs file /usr/local/include/options.h.File insn-conditions.c includes flags.h and that includes options.h thatcontains extern declarations for all flags. For some to me unknown reason bothFreeBSD port gcc40 and my own builds of GCC 4.0.0 do add -I/usr/local/include tocompiler's command line for insn-conditions.c and that prepends the path tosearch path for includes before GCC's include paths which makes the compilerinclude wrong options.h from /usr/local/include.I suspect that the -I/usr/local/include is added because of libiconv that isinstalled in in /usr/local prefix. Resulting command is this:gcc -c   -g -DENABLE_CHECKING -DENABLE_ASSERT_CHECKING -DIN_GCC   -W -Wall-Wwrite-strings -Wstrict-prototypes -Wmissing-prototypes -Wold-style-definition -Wno-error  -DHAVE_CONFIG_H -DGENERATOR_FILE -I/usr/local/include   -I. -Ibuild-I../../srcdir/gcc -I../../srcdir/gcc/build -I../../srcdir/gcc/../include-I../../srcdir/gcc/../libcpp/include -I/usr/local/include  \ -o build/insn-conditions.o insn-conditions.cNote the double occurrence of -I/usr/local/include. I think this is genuine GCC configuratin scrip bug.Bootstrap compiler:wilx@amber2:::~/gcc-head/objdir/gcc> gcc -vUsing built-in specs.Configured with: FreeBSD/i386 system compilerThread model: posixgcc version 3.4.2 [FreeBSD] 20040728Configurations flags:../srcdir/configure --disable-nls --enable-version-specific-runtime-libs--enable-dwarf2 --with-cpu=athlon-tbird --with-arch=athlon-tbird--with-system-zlib --disable-shared --enable-languages=c,c++,objc--disable-sjlj-exceptions --enable-shared=libstdc++ --enable-shared=libobjc--program-suffix=-4.0 --enable-objc-gc",RESOLVED          FIXED      
23546,Paolo Bonzini,"[4.0/4.1 Regression] ICE in for_each_index, at tree-ssa-loop-im.c:202","When compiling xorg-cvs gcc throws the following ICE in programs/Xserver/fb/fbmmx.c  fbmmx.c: In function 'mmxCombineAddU':  fbmmx.c:564: internal compiler error: in for_each_index, at  tree-ssa-loop-im.c:202    gcc (GCC) 4.0.2 20050823 (prerelease)    Configured with: ../gcc-4.0-20050824/configure --prefix=/usr  --libexecdir=/usr/lib --enable-shared --enable-threads=posix  --enable-__cxa_atexit --enable-clocale=gnu --enable-languages=c,c++    Condensed command line:  gcc -c -O2 -march=pentium4 fbmmx.i  Compiling the file without -O2 works.   As the preprocessed file is very long I will attach it to this report instead  of including it in the comment.",RESOLVED          FIXED      
10735,Paolo Bonzini,ICE on correct type conversion with vector,"From: Dara Hazeghi <dhazeghi@yahoo.com>To: gcc-gnats@gcc.gnu.org, shurick@pisem.netCc:  Subject: Re: c/10735: Crash on incorrect type conversionDate: Sat, 10 May 2003 16:24:20 -0700 http://gcc.gnu.org/cgi-bin/gnatsweb.pl?cmd=view%20audit-  trail&database=gcc&pr=10735  Hello,  you don't mention a platform in your bug report, nor do you give the   exact error message. Both are essential to tracking down your bug.   Could you please add them (just replying to this message will do so).   Also, if possible, can you try your testcase on gcc 3.2.3? Thanks,  Dara",RESOLVED          FIXED      
23517,Paolo Bonzini,[4.0/4.1 Regression] can't cast between generic vector types and target supported vector types,"When trying to cast from a target supported vector type to a genericvector type of the same size - as happens in gcc.sg/simd-2.c forsh-elf -m4 - or vice versa, the compiler tries to emit a move betweena register and a BLKmode value, and hence hits an ICE.The gcc.dg/simd-2.c failure for sh-elf -m4 is a regression introducedbetween 2004-07-21 and 2004-07-22; before, we used to use vector modesfor generic SIMD support,whereas no we use BLKmode.",RESOLVED          FIXED      
20155,Paolo Bonzini,"[4.0 Regression] libgcj build fails with ""execvp: /bin/sh: Argument list too long""",A full bootstrap including the java frontend (which implies libgcj) fails withthe following error message.This is a regression from 3.4.x and relatively recent mainline....gnu/xml/transform/StreamSerializer.lo gnu/xml/transform/XSLURIResolver.lognu/xml/transform/AttributeNode.lo gnu/xml/transform/CommentNode.lognu/xml/transform/ForEachNode.lo gnu/xml/transform/KeyFunction.lognu/xml/transform/TransformerImpl.lo gnu/xml/transform/WhenNode.lognu/xml/transform/NodeNumberNode.lo gnu/xml/transform/OtherwiseNode.lognu/xml/transform/AbstractNumberNode.lo gnu/xml/transform/TemplateNode.lognu/xml/transform/TransformerOutputProperties.lognu/xml/transform/DOMSourceLocator.lo java/lang/ConcreteProcess.lo gnu/classpath/Configuration.lo boehm.lo   posix.lo    posix-threads.logmake[3]: execvp: /bin/sh: Argument list too longgmake[3]: *** [libgcj0_convenience.la] Error 127gmake[3]: *** Waiting for unfinished jobs....gmake[3]: Leaving directory `/files/pfeifer/OBJ-0222-2045/i386-unknown-freebsd4.10/libjava'gmake[2]: *** [all-recursive] Error 1gmake[2]: Leaving directory/files/pfeifer/OBJ-0222-2045/i386-unknown-freebsd4.10/libjava'gmake[1]: *** [all-target-libjava] Error 2,RESOLVED          FIXED      
17845,Paolo Bonzini,[4.1 Regression] More problems with simple type names as superclasses,"I can't build GNU Classpath with current cvs gcj.This may be a regression, though it is also possiblethat Classpath changed in a way that gcj can't handle.The code in question is correct.  It appears that gcjis picking the wrong 'Certificate':make[1]: Entering directory `/home/tromey/gnu/classpath/build/lib'top_builddir=.. /bin/sh ./gen-classlist.sh standard/home/tromey/gnu/Binarycompat/install/bin/gcj --bootclasspath '' --classpath../../classpath:../vm/current:.: -C -d . @classes../../classpath/java/security/cert/X509Certificate.java:143: error: Class`java.security.cert.X509Certificate' can't subclass interface`java.security.Certificate'.   public abstract class X509Certificate extends Certificate implementsX509Extension                                                 ^../../classpath/java/security/cert/X509Certificate.java:0: confused by earliererrors, bailing out",RESOLVED          FIXED      
21436,Paolo Bonzini,imports not remembered for previously compiled files,"With a patch to compile libjava on a per-directory basis, I found a bug with importsTake file AWTEvent.java   package java.awt;   import java.util.EventObject;   public abstract class AWTEvent extends EventObject {}and file B.java   package java.awt;   import java.awt.event.ComponentEvent;   public class B {     Object[] o = ComponentEvent.class.getFields();   }When processing ComponentEvent in B.java, it finds AWTEvent (the superclass ofComponentEvent) but it cannot resolve the EventObject class there.  That'sbecause java_complete_class was not called yet for AWTEvent, and itsTYPE_IMPORTS_LIST is not set yet.If I move the setting of TYPE_IMPORS_LIST to create_class, then inmaybe_layout_super_class another bug is hit and the TYPE_IMPORTS_LIST ofAWTEvent is not used to resolve the EventObject class.  I have a patch to fixall this but I have not tested it yet, and it does not allow anyway to finishbootstrap with per-directory builds.  I suspect a (theoretically) simpler fix isto call java_complete_class earlier (at least once per file), but I am not sureabout what java_complete_class is doing at all.Paolo",RESOLVED          FIXED      
17860,Paolo Bonzini,[3.4 only] Wrong generated code for loop with varying bound,"Compile the following code with: gcc -O3. The output should be    foo is: 0, i is: 1Yet the output is:   foo is: 0, i is: 0This is the source code:#include <stdio.h>int foo=100;int f (){  foo = 0;}void main (){  int i;  for (i = 0; i < foo; i++)    {      f ();    }  printf(""foo is: %d, i is: %d\n"",foo,i);}",RESOLVED          FIXED      
13994,Paolo Bonzini,Rejects valid code on GNU extension,This is rejected even though a.c is a valid lvalue.  I have a patch that fixes this and PR/11658.  struct s { char c[1]; }; struct s a;  char *bug_cond(void) { return (a.c ? : 0); },RESOLVED          FIXED      
22085,Paolo Bonzini,[4.1 Regression] error with -fpreprocessed,"Try the following code with -maltivec -fpreprocessed:int foo(__attribute__((altivec(vector__))) float x, __attribute__((altivec(vector__))) float y) {        if (__builtin_vec_vcmpeq_p (2, (x), (y))) return 3245;        else return 12;}",RESOLVED          FIXED      
19210,Paolo Bonzini,not using do-loop for some loops,"Take following loop:int a[220000];void f (int n){  int k;  for(k = 3;k <= n;k++) {    a[k] = k;  }}On the mainline we produce:L4:        stw r9,0(r2)        addi r9,r9,1        cmpw cr7,r3,r9        addi r2,r2,4        bge+ cr7,L4But with 3.3.2, we use bdnz:L9:        slwi r3,r11,2        stwx r11,r3,r9        addi r11,r11,1        bdnz L9",RESOLVED          FIXED      
21921,Paolo Bonzini,"[4.1 Regression] internal compiler error: in tsi_link_before, at tree-iterator.c:113","When the attached code is compiled as follows, an ICE will result:dogbert> gcc -O1 -funsafe-math-optimizations -c h.ch.c: In function ‘Q’:h.c:10: internal compiler error: in tsi_link_before, at tree-iterator.c:113Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.dogbert> gcc -vUsing built-in specs.Target: i686-pc-linux-gnuConfigured with: ../gcc/configure --prefix=/usr/local/gcc410--enable-languages=c,c++,f95Thread model: posixgcc version 4.1.0 20050605 (experimental)This bug only appears on the mainline, but not in any of the release branches.",RESOLVED          FIXED      
22340,Paolo Bonzini,Ada build fails with --enable-bootstrap,Ada doesn't build if gcc configured with --enable-bootstrap:/home/ssb/src/build1/stage-gcc/gnatbind -C -I- -I. -Iada -I../../gcc41/gcc/ada-o ada/b_gnat1.c -n ada/gnat1drv.alimake[2]: /home/ssb/src/build1/stage-gcc/gnatbind: Command not foundmake[2]: *** [ada/b_gnat1.c] Error 127make[2]: Leaving directory `/home/ssb/src/build1/stage2-gcc'make[1]: *** [all-stage2-gcc] Error 2make[1]: Leaving directory `/home/ssb/src/build1'make: *** [stage2-bubble] Error 2$$ find . -name gnatbind | xargs ls -l-rwxr-xr-x  1 ssb ssb 3054135 2005-07-07 12:34 ./stage1-gcc/gnatbind$,RESOLVED          FIXED      
21292,Paolo Bonzini,gen-vect-11b.c and gen-vect-11c.c fail,"The following failures of newly added tests are present on mainline foria64-hpux (both -milp32 and -mlp64); gcc-testresults shows them also on ia64-linux.FAIL: gcc.dg/tree-ssa/gen-vect-11b.c scan-tree-dump-times vectorized 0 loops 1FAIL: gcc.dg/tree-ssa/gen-vect-11c.c scan-tree-dump-times vectorized 0 loops 1Appeared between 20050427 and 20050428, probably when these tests were added.",RESOLVED          FIXED      
19454,Paolo Bonzini,[4.0 Regression] bad code generated with gcc.c-torture/execute/bf64-1.c at -O1,"Here is a slightly modified version of bf64-1.c with print statments:struct tmp{  long long int pad : 12;  long long int field : 52;};struct tmp2{  long long int field : 52;  long long int pad : 12;};struct tmp  sub  (struct tmp  xtmp);struct tmp2 sub2 (struct tmp2 xtmp2);struct tmpsub (struct tmp xtmp){  xtmp.field |= 0x0008765412345678LL;  return xtmp;}struct tmp2sub2 (struct tmp2 xtmp2){  xtmp2.field |= 0x0008765412345678LL;  return xtmp2;}main(){  struct tmp xtmp = {0x123, 0xFFF000FFF000FLL};  struct tmp2 xtmp2 = {0xFFF000FFF000FLL, 0x123};  xtmp = sub (xtmp);  xtmp2 = sub2 (xtmp2);  printf(""%lld\n"", xtmp.pad);  printf(""%lld\n"", xtmp.field);  printf(""%lld\n"", xtmp2.pad);  printf(""%lld\n"", xtmp2.field);  exit (0);}With -O0 it prints:291-738197547393291-738197547393At -O1 it prints:2911479942473249059291-738197547393This bug happens on IA64 HP-UX (with -O1 and in 32 or 64 bit mode) but not onIA64 Linux.  I tracked the start of failure to the following patch but wasunable to figure out what the exact problem is.2004-09-03  Richard Henderson  <rth@redhat.com>        PR middle-end/9997        * cfgexpand.c (LOCAL_ALIGNMENT): Provide default.        (STACK_ALIGNMENT_NEEDED, FRAME_GROWS_DOWNWARD): Likewise.        (struct stack_var, EOC, stack_vars, stack_vars_alloc, stack_vars_num,        stack_vars_sorted, stack_vars_conflict, stack_vars_conflict_alloc,        frame_phase, get_decl_align_unit, add_stack_var, triangular_index,        resize_stack_vars_conflict, add_stack_var_conflict,        stack_var_conflict_p, add_alias_set_conflicts, stack_var_size_cmp,        union_stack_vars, partition_stack_vars, dump_stack_var_partition,        expand_one_stack_var_at, expand_stack_vars, expand_one_stack_var,        expand_one_static_var, expand_one_hard_reg_var,        expand_one_register_var, expand_one_error_var, defer_stack_allocation,        expand_one_var, expand_used_vars_for_block, clear_tree_used): New.        (expand_used_vars): Rewrite.        * Makefile.in (cfgexpand.o): Update dependencies.",RESOLVED          FIXED      
20600,Paolo Bonzini,[4.1 regression] failure for pass.c on x86_64-pc-linux-gnu,This is caused by subregs not being allowed in addresses.  The splittergenerates something that is not recognized as a *lea_1_rex64 pattern.  More onthis athttp://gcc.gnu.org/ml/gcc-patches/2005-03/msg02072.htmlPaolo,RESOLVED          FIXED      
19818,Paolo Bonzini,[4.0 Regression] GCC 4.0 cannot bootstrap itself,"Warnings in libiberty and libcpp prevent GCC 4.0 from bootstrapping itself,because libcpp's configure uses -Werror.The easiest way to reproduce this is to configure GCC 4.0 with--enable-bootstrap so that libcpp is bootstrapped as well.Severity is normal and not critical because releases do not use -Werror, but thebug ought to be fixed before GCC branches.",RESOLVED          FIXED      
19801,Paolo Bonzini,[4.0 Regression] cppinternals.texi references old file names,"cppinternals.texi refers to old file names cpphash.h, cpplex.c, cppfiles.c.In 4.0 the files have been renamed.",RESOLVED          FIXED      
18308,Paolo Bonzini,"ICE in do_jump, at dojump.c:274","The following code snippet causes an ICE on mainline when compiled with""-O -ftree-vectorize -funroll-loops"":=============================void foo();void bar(){    int i, j, k=0;    for (i=0; i<2; ++i)        if (j) k=2;    if (k) foo();}=============================bug.c: In function 'bar':bug.c:4: internal compiler error: in do_jump, at dojump.c:274Please submit a full bug report, [etc.]Phil's regression hunter says:: Search converges between 2004-10-01-014001-trunk (#570) and2004-10-01-161002-trunk (#571).",RESOLVED          FIXED      
14131,Paolo Bonzini,[4.0 Regression] Toplevel configure tries to build libada even if gnat is not available,Patch waiting for copyright forms to come through (preliminary version at http://gcc.gnu.org/ml/gcc/2004-02/msg00755.html).Paolo,RESOLVED          FIXED      
11658,Paolo Bonzini,Wrong error message,"This error has been wrong for a long time.  It gives an erroneous ""wrong arguments to binary !="" even though there is no != in the source code.The distilled test case is extremely simple:struct a {};intbug(struct a *m){  return (*m || 1);}Thank you very much,Paolo",RESOLVED          FIXED      
15699,Paolo Bonzini,"[4.0 Regression] irix6.5 bootstrap ICE: abort in maybe_eval_c_test,","irix6.5 bootstrap fails as stage1 compiler ICEs./genflags /disk4/billingd/src/gcc-j2/gcc/config/mips/mips.md > tmp-flags.hgenflags: Internal error: abort in maybe_eval_c_test, at /disk4/billingd/src/gcc-j2/gcc/gensupport.c:1127./genconfig /disk4/billingd/src/gcc-j2/gcc/config/mips/mips.md > tmp-config.hgenconfig: Internal error: abort in maybe_eval_c_test, at /disk4/billingd/src/gcc-j2/gcc/gensupport.c:1127./gencodes /disk4/billingd/src/gcc-j2/gcc/config/mips/mips.md > tmp-codes.hgencodes: Internal error: abort in maybe_eval_c_test, at /disk4/billingd/src/gcc-j2/gcc/gensupport.c:1127Problem introduced between 08:00 and 08:30 UTC on 27 May 20042004-05-25  Paolo Bonzini  <bonzini@gnu.org>        * combine.c (gen_binary): Remove.        (known_cond, simplify_shift_const        find_split_point, combine_simplify_rtx,        simplify_if_then_else, simplify_set,        simplify_logical, expand_field_assignment,        extract_left_shift, force_to_mode,        if_then_else_cond, apply_distributive_law,        simplify_and_const_int, simplify_shift_const,        gen_lowpart_for_combine, simplify_comparison,        reversed_comparison): Replace with        simplify_gen_binary, simplify_gen_relational or        distribute_and_simplify_rtx.        (distribute_and_simplify_rtx): New function.        * simplify-rtx.c (simplify_binary_operation):        Use nonzero_bits to simplify ANDs where we are        turning off bits already known to be off in OP0.",RESOLVED          FIXED      
16882,Paolo Bonzini,[4.0 Regression] overloading confused by const vector arguments,"Some of the <altivec.h> functionality no longer works from C++.  I've onlytried it on powerpc-linux, but it fails using generic vectors so is probablytarget-independent.  This test case shows the problem using generic vectors.                                                                                               #define vector __attribute__((vector_size(16)))                                                                                               vector signed int vld (int a1, const vector signed int *a2) { return *a2; }vector signed short vld (int a1, const vector signed short *a2) { return *a2; }vector signed char vld (int a1, const vector signed char *a2) { return *a2; }                                                                                               extern int i;extern vector signed short vss;extern vector signed short *vssp;extern const vector signed short *cvssp;                                                                                               void foo (){  vss = vld(i, vssp);  vss = vld(i, cvssp);}                                                                                               Output from this test using mainline built last night:                                                                                               elm3b11% /opt/gcc-nightly/mline-20040804/bin/g++ -c vecld2.Cvecld2.C: In function `void foo()':vecld2.C:14: error: call of overloaded `vld(int&, short int __vector__*&)' isambiguousvecld2.C:3: note: candidates are: int __vector__ vld(int, const int __vector__*)vecld2.C:4: note:                 short int __vector__ vld(int, const short int__vector__*)vecld2.C:5: note:                 signed char __vector__ vld(int, const signedchar __vector__*)                                                                                              The test starts failing with the following patch:2004-07-21  Paolo Bonzini  <bonzini@gnu.org>                                                                                                       * c-common.c (vector_types_convertible_p): Use vector types'        TYPE_SIZE and TREE_TYPE instead of their mode.        * convert.c (convert_to_integer): Likewise.        (convert_to_vector): Likewise.        * fold-const.c (fold_convert): Likewise.        * varasm.c (output_constant): Likewise.        * expr.c (store_constructor): Split ARRAY_TYPE and VECTOR_TYPE.        Allow a VECTOR_TYPE initializer to be made of several vectors.        For ARRAY_TYPEs and VECTOR_TYPES, simplify a bit the handling        of cleared and need_to_clear, and use fold_convert.        * c-typeck.c (build_binary_op): Do not use RDIV_EXPR for        integer vectors.                                                                                               cp:                                                                                               2004-07-21  Paolo Bonzini  <bonzini@gnu.org>                                                                                                      * typeck.c (build_binary_op): Do not use RDIV_EXPR for       integer vectors.",RESOLVED          FIXED      
17113,Paolo Bonzini,[3.4 Regression] ICE with SSE2 intrinsics,"When I compile the following source file using:$ gcc -march=pentium4 -O2 gccbug-p.cppThe program breaks with the output seen below. However if I compile it like:$ gcc -march=pentium4 -O2 -fno-gcse gccbug-p.cppEverything is fine.Output with -march=pentium4 -O2-------------------------------Reading specs from /opt/gcc-3.4/lib/gcc/i686-pc-linux-gnu/3.4.1/specsConfigured with: ./configure --prefix=/opt/gcc-3.4Thread model: posixgcc version 3.4.1 /opt/gcc-3.4/libexec/gcc/i686-pc-linux-gnu/3.4.1/cc1plus -quiet -v-D_GNU_SOURCE gccbug-p.cpp -quiet -dumpbase gccbug-p.cpp -march=pentium4-auxbase gccbug-p -O2 -version -o /tmp/cc69Idn4.signoring nonexistent directory ""/usr/local/include""ignoring nonexistent directory""/opt/gcc-3.4/lib/gcc/i686-pc-linux-gnu/3.4.1/../../../../i686-pc-linux-gnu/include""#include ""..."" search starts here:#include <...> search starts here: /opt/gcc-3.4/lib/gcc/i686-pc-linux-gnu/3.4.1/../../../../include/c++/3.4.1 /opt/gcc-3.4/lib/gcc/i686-pc-linux-gnu/3.4.1/../../../../include/c++/3.4.1/i686-pc-linux-gnu /opt/gcc-3.4/lib/gcc/i686-pc-linux-gnu/3.4.1/../../../../include/c++/3.4.1/backward /opt/gcc-3.4/include /opt/gcc-3.4/lib/gcc/i686-pc-linux-gnu/3.4.1/include /usr/includeEnd of search list.GNU C++ version 3.4.1 (i686-pc-linux-gnu)        compiled by GNU C version 3.4.2 20040819 (prerelease).GGC heuristics: --param ggc-min-expand=99 --param ggc-min-heapsize=129450gccbug-p.cpp: In function `void test1(int*)':gccbug-p.cpp:70: error: unrecognizable insn:(insn:HI 240 4 241 0 (set (reg:V16QI 79 [ __B ])        (const_vector:V16QI [                (const_int 0 [0x0])                (const_int 0 [0x0])                (const_int 0 [0x0])                (const_int 0 [0x0])                (const_int 0 [0x0])                (const_int 0 [0x0])                (const_int 0 [0x0])                (const_int 0 [0x0])                (const_int 0 [0x0])                (const_int 0 [0x0])                (const_int 0 [0x0])                (const_int 0 [0x0])                (const_int 0 [0x0])                (const_int 0 [0x0])                (const_int 0 [0x0])                (const_int 0 [0x0])            ])) -1 (nil)    (expr_list:REG_EQUAL (const_vector:V16QI [                (const_int 0 [0x0])                (const_int 0 [0x0])                (const_int 0 [0x0])                (const_int 0 [0x0])                (const_int 0 [0x0])                (const_int 0 [0x0])                (const_int 0 [0x0])                (const_int 0 [0x0])                (const_int 0 [0x0])                (const_int 0 [0x0])                (const_int 0 [0x0])                (const_int 0 [0x0])                (const_int 0 [0x0])                (const_int 0 [0x0])                (const_int 0 [0x0])                (const_int 0 [0x0])            ])        (nil)))gccbug-p.cpp:70: internal compiler error: in extract_insn, at recog.c:2083Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.",RESOLVED          FIXED      
17991,Paolo Bonzini,[4.0 Regression] Two-process fixincludes broken: pz_mn_name_pat undefined,"This patch appears to have broken two-process fixincludes: <http://gcc.gnu.org/ml/gcc-patches/2004-08/msg02301.html>.  When attempting to link applyfix.exe, link fails because pz_mn_name_pat is undefined.The two-process mode is only used for MS-DOS and BeOS, which is probably why noone noticed.  I noticed because it appears that, other than this and some other soon-to-be-fixed problems, two process fixincludes also works for Windows.The problem is that mn_name_pat was made into an environment variable, which are only defined in fixincl.c, which is only included in the fixincl executable.  However, it is used in fixlib.c, which is included in the applyfix executable in a two-process build.As I'm not really familiar with fixincludes, I can't say how this should be fixed.  It can be worked around by copying the environment variable definitions and initializations from fixincl.c to the SEPARATE_FIX_PROC section of fixfixes.c, but I'm not sure this is appropriate as applyfix doesn't need any of these environment variables otherwise.  Perhaps just this single environment variable could be defined.",RESOLVED          FIXED      
18047,Paolo Bonzini,"[4.0 Regression] Wrong precedence between equality (==, !=) and < operators","gcc-4.0 gives operator== higher precedence than operator<, which is against5.10 paragraph 1:  ""Note: a<b == c<d is true whenever a<b and c<d have the same truth value""$ cat t.cppint main(){   if ( 2 < 0 == false)       return 0;  // should return here   return 1;}$ /home/veksler/gcc-4.0-20041017/bin/g++ t.cpp$ ./a.out ; echo status=$?status=1",RESOLVED          FIXED      
17973,Paolo Bonzini,[4.0 Regression] tree dumps are cluttered and mixed with RTL dumps,"Reported here:http://gcc.gnu.org/ml/gcc/2004-09/msg00764.htmlCurrently, the dump list looks like:t.c.t00.expand    t.c.t12.eh           t.c.t22.lreg         t.c.t32.redphi2    t.c.t45.limt.c.t01.cgraph    t.c.t13.cfg          t.c.t23.forwprop1    t.c.t32.sched2     t.c.t51.ivoptst.c.t01.sibling   t.c.t13.loop2        t.c.t23.greg         t.c.t33.dce3       t.c.t52.loopdonet.c.t02.original  t.c.t14.oplower      t.c.t24.phiopt1      t.c.t33.stack      t.c.t53.dom3t.c.t03.generic   t.c.t14.web          t.c.t24.postreload   t.c.t34.dse1       t.c.t54.redphi4t.c.t03.jump      t.c.t15.cse2         t.c.t25.alias2       t.c.t34.vartrack   t.c.t55.cddcet.c.t04.cse       t.c.t16.life         t.c.t26.flow2        t.c.t35.alias3     t.c.t56.dse2t.c.t05.gcse      t.c.t16.ssa          t.c.t26.tailr        t.c.t35.mach       t.c.t57.forwprop3t.c.t06.loop      t.c.t17.alias1       t.c.t27.ch           t.c.t36.forwprop2  t.c.t58.phiopt3t.c.t06.vcg       t.c.t17.combine      t.c.t27.peephole2    t.c.t37.phiopt2    t.c.t59.tailct.c.t07.bypass    t.c.t18.ce2          t.c.t28.ce3          t.c.t38.ccp        t.c.t60.optimizedt.c.t08.cfg       t.c.t18.copyrename1  t.c.t28.profile      t.c.t39.redphi3    t.c.t61.nrvt.c.t08.gimple    t.c.t19.dce1         t.c.t29.rnreg        t.c.t40.fab        t.c.t62.varst.c.t09.bp        t.c.t19.regmove      t.c.t29.sra          t.c.t41.critedt.c.t09.useless   t.c.t20.dom1         t.c.t30.bbro         t.c.t42.pret.c.t11.ce1       t.c.t21.redphi1      t.c.t30.copyrename2  t.c.t43.loopt.c.t11.lower     t.c.t22.dce2         t.c.t31.dom2         t.c.t44.loopinitRTL and tree dumps should be separated. RTL dumps used to be t.c.NN.pass. We can have .rNN.pass if we want now, but surely not .tNN.pass like tree dumps.",RESOLVED          FIXED      
17596,Paolo Bonzini,"[3.4/4.0 Regression] expression parser is too slow, should be rewritten","The expression parser is currently too slow due to its recursive nature. It could be speed up by rewriting it so that it manually tracks precedences.Bug 14179 is an example of a machine-generated testcase which exposes our limits. I proposed a hack to help the testcase in that bug:http://gcc.gnu.org/ml/gcc-patches/2004-09/msg01839.htmlbut the patch was rejected. Mark said:""""""I would like to hold off on this patch. Like Nathan says, this is the first good evidence I've seen that implementing operator-precedence parsing might be a measureable win on real code. If you, or Nathan, or I, or Zack, or somebody gets to implementing that, then that's probably the best way to go. If not, then we should consider your patch, as it really does make a big difference. Would you mind reminding me about this patch when we get ready to make the release branch, assuming we've not yet implemented the operator-precedence thing?""""""http://gcc.gnu.org/ml/gcc-patches/2004-09/msg01960.htmlThis bug was opened to track this.",RESOLVED          FIXED      
14522,Paolo Bonzini,[4.0 Regression] Bad sed command in the configure script,"I get this from the top-level configure:checking whether compiler driver understands Ada... nosed: command garbled: s/src/configure: ,//: not foundThe following languages will be built: c,c++,f77,java,objcsrc/configure: : cannot executesrc/configure: --host=sparc64-sun-solaris2.9: not foundorchecking whether compiler driver understands Ada... nosed: command garbled: s/src/configure: ,//: not foundThe following languages will be built: c,c++,f77,java,objcsrc/configure: : cannot executesrc/configure: --prefix=/opt/build/eric/gcc35: not found",RESOLVED          FIXED      
4720,Geert Bosch,GNAT programs do not support --help and --version,"The various gnat* programs now included in GCC do not support the--help and --version options, which the GNU Coding Standards say theyshould.Release:3.1 20011027 (experimental)Environment:System: Linux digraph 2.2.19 #1 Sun Oct 21 10:19:10 UTC 2001 i686 unknownArchitecture: i686	host: i686-pc-linux-gnubuild: i686-pc-linux-gnutarget: i686-pc-linux-gnuconfigured with: ../gcc-cvs/configure --prefix=/opt/gcc/mainline --disable-shared --enable-threads=posix --with-system-zlibHow-To-Repeat:gnatbind --version (for example)",RESOLVED          FIXED      
15977,Geert Bosch,Ada contributors should be documented,"The main people who have contributed to GNU Ada should be documentedin gcc/doc/contrib.texi.  At present, even the people listed inMAINTAINERS as GNU Ada maintainers are not mentioned at all in contrib.texi.(Previously requested in <http://gcc.gnu.org/ml/gcc/2001-05/msg01181.html>,<http://gcc.gnu.org/ml/gcc/2001-10/msg00326.html> and<http://gcc.gnu.org/ml/gcc/2002-02/msg00198.html>.)",RESOLVED          FIXED      
18099,Geert Bosch,Incorrect rounding from floating point to integer,"Ada requires conversion of floating-point to integer to round, with halfway cases rounded away from zero. This is implemented by adding 0.5 to the floating-point value and then truncating, as in regular C float to int conversion. However, this gives wrong semantics for the predecessor of 0.5, and odd floating-point integers in the range 2.0**(mantissa - 1)+1.0 .. 2.0**(mantissa)-1.0 and the negative versions of these.The reason is that adding 0.5 in the above cases, yields a value exactly between two representable floating-point numbers. So the predecessor of 0.5 is then rounded to one, and the floating-point integers mentioned before get rounded to the next higher integer.I'll file a self-contained test case testing these cases.",RESOLVED          FIXED      
6558,Geert Bosch,[mainline regression] Wrongly reverted patches,"The big Ada merge (mainline only) wrongly reverted some patches thathad been made to the FSF GCC tree.  These need to be unreverted, and aproper check made for whether any other patches were reverted thatshouldn't have been.A list, which may be incomplete, is at<URL:http://gcc.gnu.org/ml/gcc-patches/2002-03/msg00402.html>.Release:3.2 20020504 (experimental)Environment:System: Linux digraph 2.2.20 #2 Sat Nov 10 16:44:22 UTC 2001 i686 unknownArchitecture: i686 host: i686-pc-linux-gnubuild: i686-pc-linux-gnutarget: i686-pc-linux-gnuconfigured with: ../gcc-cvs/configure --prefix=/opt/gcc/mainline --disable-shared --enable-threads=posix --with-system-zlib",RESOLVED          FIXED      
5856,Geert Bosch,[3.3 regression] GNAT bug box,The GNAT bug box (produced on ICEs) directs bug reports to a company'sinternal bug tracking system rather than to the public GCC bugtracking system.  This is clearly not OK for software included in apublic GCC release.Release:3.2 20020304 (experimental)Environment:System: Linux digraph 2.2.20 #2 Sat Nov 10 16:44:22 UTC 2001 i686 unknownArchitecture: i686 host: i686-pc-linux-gnubuild: i686-pc-linux-gnutarget: i686-pc-linux-gnuconfigured with: ../gcc-cvs/configure --prefix=/opt/gcc/mainline --disable-shared --enable-threads=posix --with-system-zlibHow-To-Repeat:Generate an ICE from GNAT.,RESOLVED          FIXED      
6399,Geert Bosch,Inappropriate ACT references in gnat_rm,"The gnat_rm manual contains the following inappropriate reference toAda Core Technologies:    Ada Core     Technologies does not currently supply a suitable binding generator tool.What some company called Ada Core Technologies does or does not supplyis irrelevant to and inappropriate in an FSF manual.The other such references have already been removed from the mainlinemanual.  However, several more remain in the manual on the 3.1 branch(some like this, some ""For information on GLADE, contact Ada CoreTechnologies.""); the references on the branch should also be removed.Release:3.2 20020421 (experimental)Environment:System: Linux digraph 2.2.20 #2 Sat Nov 10 16:44:22 UTC 2001 i686 unknownArchitecture: i686	host: i686-pc-linux-gnubuild: i686-pc-linux-gnutarget: i686-pc-linux-gnuconfigured with: ../gcc-cvs/configure --prefix=/opt/gcc/mainline --disable-shared --enable-threads=posix --with-system-zlib",RESOLVED          FIXED      
9911,Geert Bosch,gnatmake fails to link when GCC configured with --with-sjlj-exceptions=yes,"From: ""John David Anglin"" <dave@hiauly1.hia.nrc.ca>To: dannysmith@users.sourceforge.netCc: gcc-gnats@gcc.gnu.org, hainque@gnat.com, gcc-bugs@gcc.gnu.org,   dave.anglin@nrc.ca, nobody@gcc.gnu.org, gcc-prs@gcc.gnu.orgSubject: Re: ada/9911: gnatmake fails to link when GCC configured with --wDate: Sun, 2 Mar 2003 23:25:16 -0500 (EST) > 2003-03-03  Danny Smith  <dannysmith@users.sourceforge.net> >  >        * raise.c (_Unwind_RaiseException): New function to wrap > _Unwind_SjLj_RaiseException >        for sjlj eh model.  Based on the comment in raise.c, I don't think the fix is correct although there probably does need to be a stub for _Unwind_SjLj_RaiseException in raise.c.  We also need to fix the call issued from a-except.adb.  This is actually what caused the link failure in the PR.  raise.o isn't in libgnat.a.  I hacked a-except.adb and raise.c use to use _Unwind_SjLj_RaiseException but not being familiar with ada I'm not sure how to conditionalize the ada code.  I'm also not set up to test the exception support in it.  I suspect the same problem affects the hpux ports which use sjlj exceptions by default.  Dave --  J. David Anglin                                  dave.anglin@nrc-cnrc.gc.ca National Research Council of Canada              (613) 990-0752 (FAX: 952-6605)  --  J. David Anglin                                  dave.anglin@nrc-cnrc.gc.ca National Research Council of Canada              (613) 990-0752 (FAX: 952-6605)",RESOLVED          FIXED      
10020,Geert Bosch,Can't bootstrap gcc on AIX with Ada enabled,Syntax error in line 136 of gcc/ada/link.c : cnonst instead of constRelease:gcc version 3.2.2Environment:OS : IBM AIX 5.1.0ARCH : RS6000,RESOLVED          FIXED      
24101,Per Bothner,[3.4/4.0/4.1 Regression] Segfault with preprocessed source,"This testcase segfaults for c and c++.--cut here--# 1 ""/usr/local/lib/gcc/i686-pc-linux-gnu/4.1.0/include/stddef.h"" 1 3 4--cut here--gcc express-min.iIn file included from express-min.i:1:/usr/local/lib/gcc/i686-pc-linux-gnu/4.1.0/include/stddef.h:1: internal compilererror: Segmentation faultPlease submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.This behaviour is quite annoying: if delta tool is used to minimize apreprocessed file that segfaults, it always produces this kind of one-lineminimized testcase.",RESOLVED          FIXED      
21250,Per Bothner,[4.1 Regression] line number 0 for <built-in> causes GAS to complain,"powerpc64-linux-gcc -c -o any-file.o any-file.S  results in  any-file.S: Assembler messages: any-file.S:1: Warning: line numbers must be positive; line number 0 rejected  as the pre-processed file looks like  # 1 ""any-file.S"" # 0 ""<built-in>"" # 1 ""<command line>"" # 1 ""any-file.S"" ...  This regression is caused by  http://gcc.gnu.org/ml/gcc-patches/2005-04/msg02132.html",RESOLVED          FIXED      
20907,Per Bothner,[4.0 Regression] long comments throw off line numbers,"It seems that long comment blocks can throw off gcc's notion of the source line number. Here is a sample test case (also attached in case the line breaks get messed up pasting in):/*This is a really long comment. This is a really long comment. This is a really long comment. This is a really long comment. This is a really long comment. This is a really long comment. This is a really long comment. This is a really long comment. This is a really long comment. This is a really long comment. This is a really long comment. This is a really long comment. This is a really long comment. This is a really long comment. This is a really long comment. This is a really long comment. */#warning test warning#include <stdio.h>int main(int argc, char *argv){        printf(""This is line %d\n"", __LINE__);}",RESOLVED          FIXED      
14103,Per Bothner,"[3.4/4.0 Regression] ICEs on ""gcc -E -imacros foo.h baz.c""","I built a native compiler on i686-pc-linux-gnu fromthe most recent weekly snapshot, gcc-3.4-20040206.tar.bz2.The following test makes it seg fault/ICE:    echo > empty.c    echo > empty.h    gcc -E -imacros empty.h empty.c > Efile      empty.c:0: internal compiler error: Segmentation fault      Please submit a full bug report,      with preprocessed source if appropriate.      See <URL:http://gcc.gnu.org/bugs.html> for instructions.This does not happen with the compiler I built from gcc-3.4-20040128.tar.bz2, soit's a regresssion in the last week.No, the source files don't have to be empty to trigger this. The empty inputsare my cutdown :-)Both the 2040206 and 20040128 builds were with GCC sources cpio-merged on top ofbinutils-2.14/newlib-1.11.0, and using the configuration options:--with-gnu-as --enable-languages=c++ --enable-threads --enable-shared--target=native --prefix=$INSTALL_DIR",RESOLVED          FIXED      
12545,Per Bothner,[3.4 Regression] segv with missing input file,"$ ./cc1 missing.ccc1: missing.c: No such file or directory<command line>:1: internal compiler error: Segmentation faultPlease submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.",RESOLVED          FIXED      
11361,Per Bothner,[3.4 regression] ICE (segfault) in c-lex.c with one-liner,"Just compile this line:# 31 ""eval.c"" 2to get a segmentation fault.#0  fe_file_change (new_map=0x0) at ../../gcc/gcc/c-lex.c:205#1  0x005618dd in cb_file_change (pfile=0xa069f48, new_map=0x0)    at ../../gcc/gcc/c-opts.c:1415#2  0x008b9870 in do_linemarker (pfile=0xa069f48) at ../../gcc/gcc/cpplib.c:873#3  0x008b89c8 in _cpp_handle_directive (pfile=0xa069f48, indented=0)    at ../../gcc/gcc/cpplib.c:424#4  0x008bca59 in _cpp_lex_token (pfile=0xa069f48)    at ../../gcc/gcc/cpplex.c:659#5  0x008c37c0 in cpp_get_token (pfile=0xa069f48)    at ../../gcc/gcc/cppmacro.c:1064#6  0x0055446d in c_lex (value=0x22fcb4) at ../../gcc/gcc/c-lex.c:307#7  0x004c29f8 in cp_lexer_get_preprocessor_token (lexer=0x0, token=0x22fcb0)    at ../../gcc/gcc/cp/parser.c:632#8  0x004c240a in cp_lexer_new_main () at ../../gcc/gcc/cp/parser.c:304",RESOLVED          FIXED      
31823,Brooks Moses,[4.2 regression] COMPLEX not documented,The COMPLEX intrinsic is not documented in 4.2.,RESOLVED          FIXED      
30381,Brooks Moses,[4.1 only] ISHFTC() constant folding is broken.,"According to example in the F95 standard, this program should output 5, if given inputs of 2 and 3.  It does indeed do this.  program shiftcirc    integer i, j    read(*,*) i, j    write(*,*) ishftc( 3, i, j )  end programHowever, if we replace i and j with constants, things start breaking.  First:  program shiftcirc    write(*,*) ishftc( 3, 2, 3 )  end programThis outputs -3, which is incorrect.  Worse, if we do this:  program shiftcirc    integer i    read(*,*) i    write(*,*) ishftc( 3, 2, i )  end programThis gives an error on compilation:debian-gfortran:~/test> ../bin-trunk/bin/gfortran ishftc.f90 -o ishftcishftc.f90:4.26:  write(*,*) ishftc( 3, 2, i )                         1Error: Invalid third argument of ISHFTC at (1)",RESOLVED          FIXED      
31972,Brooks Moses,[4.3 regression] Internal Error occurs when TRANSFER contains hollerith argument,"When I compile the program listed below I get the following message:lsstr.f90:3.18:i = (/ TRANSFER(4HSOLR, 0) /)                 1Warning: Extension: Hollerith constant at (1)lsstr.f90:4.17:END PROGRAM lsstr                1Internal Error at (1):Invalid expression in gfc_target_expr_size.PROGRAM lsstrINTEGER, DIMENSION(1) :: ii = (/ TRANSFER(4HSOLR, 0) /)END PROGRAM lsstr",RESOLVED          FIXED      
31427,Brooks Moses,"TRANSFER with mold kind /= lval kind: ICE on ia64, i686; no warning","When I compile the following program I get the message ""GNU MP: Cannot reallocate memory""PROGRAM testINTEGER(KIND=1) :: i(1)i = (/ TRANSFER(""a"", 0) /)END PROGRAM test",RESOLVED          FIXED      
31216,Brooks Moses,TRANSFER in CASE leads to ICE,"A recent gfortran ICEs on the following code:INTEGER :: ICHARACTER(LEN=100) :: data=""1.0 3.0""REAL :: C,DREAD(data,*) C,DI=TRANSFER(C/D,I)SELECT CASE(I)CASE (TRANSFER(1.0/3.0,1))CASE DEFAULT CALL ABORT()END SELECTEND",RESOLVED          FIXED      
31194,Brooks Moses,NaN transfer -  internal compiler error: in gfc_conv_constant,"ICE on valid code. Might be related to PR 18769.Taken from PR 29471 comment 5.  real(kind(0d0)) :: NaN = transfer(ishft(int(z'FFF80000',8),32),0d0)  print *, NaN  endgives:foo.f90:1: internal compiler error: in gfc_conv_constant, at fortran/trans-const.c:348",RESOLVED          FIXED      
30881,Brooks Moses,Select case of  case(transfer(...)) wrongly rejected,"With recent trunk, gfortran incorrectly generates an error for the following standard code:INTEGER, PARAMETER :: K=1INTEGER ::  II=TRANSFER(.TRUE.,K)SELECT CASE(I)CASE(TRANSFER(.TRUE.,K))CASE(TRANSFER(.FALSE.,K)) CALL ABORT()CASE DEFAULT CALL ABORT()END SELECTI=TRANSFER(.FALSE.,K)SELECT CASE(I)CASE(TRANSFER(.TRUE.,K)) CALL ABORT()CASE(TRANSFER(.FALSE.,K))CASE DEFAULT CALL ABORT()END SELECTEND",RESOLVED          FIXED      
18769,Brooks Moses,ICE in gfc_conv_array_initializer with array initialization with transfer,"Hi,the following code crashes gfortran:program gfcbug21  implicit none  type t     integer :: i  end type t  type (t), parameter :: u = t (1)  integer,  parameter :: idx_list(1) = (/ 1 /)  ! gfortran dies here:  integer             :: j(1) = transfer (u,  idx_list)  print *, jend program gfcbug21I get:gfcbug21.f90: In function 'MAIN__':gfcbug21.f90:10: internal compiler error: in gfc_conv_array_initializer, at fortran/trans-array.c:2946(For the record: this works with Intel's ifc 7.1 but crashes ifort 8.1)Cheers,-ha",RESOLVED          FIXED      
31776,Brooks Moses,"Bootstrap fails with ""error: conflicting types for strsignal""","The current svn repository does not bootstrap on my machine.$ svn infoPath: .URL: svn://gcc.gnu.org/svn/gcc/trunkRepository Root: svn://gcc.gnu.org/svn/gccRepository UUID: 138bc75d-0d04-0410-961f-82ee72b054a4Revision: 124341Node Kind: directorySchedule: normalLast Changed Author: dwarakLast Changed Rev: 124341Last Changed Date: 2007-05-01 14:53:40 -0500 (Tue, 01 May 2007)""make"" fails withIn file included from /usr/include/sys/wait.h:111,                 from /usr/include/stdlib.h:64,                 from /Users/eschnett/src/gcc/gcc/system.h:208,                 from /Users/eschnett/src/gcc/gcc/genmodes.c:23:/usr/include/sys/resource.h:90: error: two or more data types in declaration specifiersIn file included from /Users/eschnett/src/gcc/gcc/genmodes.c:23:/Users/eschnett/src/gcc/gcc/system.h:418: error: conflicting types for ‘strsignal’/usr/include/string.h:130: error: previous declaration of ‘strsignal’ was heremake[3]: *** [build/genmodes.o] Error 1make[2]: *** [all-stage1-gcc] Error 2make[1]: *** [stage1-bubble] Error 2make: *** [bootstrap] Error 2Line 130 of /usr/include/string.h readschar    *strsignal(int sig);",RESOLVED          FIXED      
31355,Brooks Moses,--help=<language> option isn't documented.,"The documentation in invoke.texi for the --help= option only lists the ""optimizers"", ""warnings"", ""target"", and ""params"" values that the option can take.  However, it can also take a language name as a value, and this isn't documented.",RESOLVED          FIXED      
31356,Brooks Moses,gcc --help=<language> option has problems in the output header line.,"Consider the following output:--------------------------------------------> ~/bin-trunk/bin/gcc --help=fortranThe following options are supported by, amoung others, the language :  -I                          This switch lacks documentation[...]--------------------------------------------The language name seems to be missing from the first line.  (Also, ""amoung"" is an obvious typo.)",RESOLVED          FIXED      
31353,Brooks Moses,gcc --help=target gives a linker error.,"Consider the following output:------------------------------------------------> ~/bin-trunk/bin/gcc --help=targetThe following options are target specific:  -m128bit-long-double        sizeof(long double) is 16  -m32                        Generate 32bit i386 code[...]  -muclibc                    Use uClibc instead of GNU libc/usr/lib/crt1.o(.text+0x18): In function `_start':../sysdeps/i386/elf/start.S:98: undefined reference to `main'collect2: ld returned 1 exit status------------------------------------------------This happens with any --help= option.It looks like the ""--help="" option isn't turning off the parts of the compiler that do compilation, and so it's still trying to link an empty program.",RESOLVED          FIXED      
30953,Brooks Moses,intrinsic: CTIME,"subroutine = {	name = 'ctime';	arg  = 'time';	arg  = 'result';	call = 'CALL ctime(time = int_8, result = string)';};The documentation states:> Arguments:>   S  The type shall be of type CHARACTER. >   T  The type shall be of type INTEGER(KIND=8). But the implement dummy argument names are ""time"" and ""result"".",RESOLVED          FIXED      
28068,Brooks Moses,Non-standard intrinsics should be documented,"Recently an ancient program failed to compile because it had a subroutine named perror. This led to confusing diagnostics about number of arguments. The problem was fixed by appropriate insertion of EXTERNAL statements.gfortran appears to define an intrinsic named perror, but this fact is not documented anywhere that I can see. I suspect there may be other hidden non-standard intrinsics.THESE SHOULD BE DOCUMENTED. A lot of time can be wasted tripping over stuff like this. It would also be nice to have a compiler parameter to turn off non-standard intrinsics.",RESOLVED          FIXED      
30635,Brooks Moses,#NAME?,This configure option should (I would think) be documented in gccinstall.texi.  It isn't.The original patch (http://gcc.gnu.org/ml/gcc-patches/2006-08/msg00614.html) does not contain any documentation.,RESOLVED          FIXED      
23538,Brooks Moses,gfortran hangs on old cray fortran 66 program,"gfortan generates hundreds of error on this program then hangs - never to return[dranta:~/tests/gfortran-D] dir% gfortran -o d2ds d2ds.f In file d2ds.f:88      common/ioinfo/jprint,isqsh,ni                                                        1Warning: Named COMMON block 'ioinfo' at (1) shall be of the same size In file d2ds.f:308......Error: END DO statement expected at (1) In file d2ds.f:1718      subroutine stravg                                                      1Error: Unclassifiable statement at (1)^C[dranta:~/tests/gfortran-D] dir% gfortran --vUsing built-in specs.Target: powerpc-apple-darwin7.9.0Configured with: ./configure --prefix=/Users/dir/gfortran --enable-languages=c,f95Thread model: posixgcc version 4.1.0 20050823 (experimental)[dranta:~/tests/gfortran-D] dir%",RESOLVED          FIXED      
30235,Brooks Moses,[4.1 only] missing alternate return argument with explicit interface causes segfault,"The following code, in which the (contained) subroutine has an alternate return argument which is not present in the subroutine call, produces a segfault:------------------------------------------------------------------debian-gfortran:~/test> cat altreturn3.f90program altreturn3  call altret()contains  subroutine altret(*)    return 1  end subroutineenddebian-gfortran:~/test> ../bin-trunk/bin/gfortran altreturn3.f90 -o altret3altreturn3.f90:0: internal compiler error: Segmentation faultPlease submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.debian-gfortran:~/test> ../bin-trunk/bin/gfortran --versionGNU Fortran 95 (GCC) 4.3.0 20061128 (experimental)Copyright (C) 2006 Free Software Foundation, Inc.",RESOLVED          FIXED      
30420,Brooks Moses,[4.1 only] IBCLR() fails to properly handle clearing the sign bit.,"Consider the following program:program ibclr_test  write(*,*) ibclr(-1_1, 7)endThis gives an error of:  write(*,*) ibclr(-1_1, 7)                1Error: Result of IBCLR overflows its kind at (1)The problem is that in the mpz_t representation, -1_1 is represented as a string of 1 bits, and then when the 7th bit is swapped, this remains a negative number -- but one that's out of range.",RESOLVED          FIXED      
30371,Brooks Moses,kill suboutine accepts (invalid) array arguments.,"GFortran allows the kill subroutine to have array arguments for the first two arguments, but it appears to me that libgfortran doesn't handle them as arrays.  Thus, I believe the following little code should error out, but it doesn't:program kill1  call kill((/99999, 99998/), (/0, 0/))endIf I'm correct in claiming this as a bug, it can be fixed by putting checks in check.c: gfc_check_kill_sub.",RESOLVED          FIXED      
28122,Brooks Moses,Undocumented gfortran options,"The following options are not documented in gfortran's invoke.texi, and should probably be:  -fmodule-private, -fno-backend, -fpreprocessed, -qkind=",RESOLVED          FIXED      
29702,Brooks Moses,RFE: Column number in error messages.,"In the discussion of PR 29689, the following came up, and seems like a reasonable request:-------- Original Message (excerpted) --------Subject: Re: Emacs and GFortranDate: Sat, 4 Nov 2006 07:59:04 +1300From: Nick Roberts <nickrob@snap.net.nz>CC: fortran@gcc.gnu.org, emacs-devel@gnu.orgNewsgroups: gmane.emacs.devel,gmane.comp.gcc.fortranBrooks Moses writes:> The attached only-slightly-less-trivial patch should fix the > regressions, although I have not yet tested it to confirm that.I guess I'm pushing my luck with current feelings, but would it bepossible to add the column number?[Previously I wrote:  The original error message you posted had column number information in the  error output too:     gfortran hello.F      In file hello.F:3           write(*,) 'Hello!'                                                                1     Error: Syntax error in WRITE statement at (1)  it would be nice to be able to use this too.  I think gcc outputs kind of  information as something like:  hello.c:3:13: error: blah, blah, blah...  Emacs can then place the cursor in the relevant column when visiting an error  (and Vim probably does something similar too).]-- Nick                                           http://www.inet.net.nz/~nickrob",RESOLVED          FIXED      
29689,Brooks Moses,gfortran should use g77-compatible format for error message,"There's a thread fortran@gcc.gnu.org started from emacs developers wishing that gfortran used a g77-compatible error message format, starting here: http://gcc.gnu.org/ml/fortran/2006-10/msg00751.html The friendly discussion has been a bit heated.I don't think anybody disagrees with the fact that using an error format closer to the GNU standard would be nice. They usually are reasons behind standards.On the other hand, there is broad agreement that the ""standard GNU error format"" offers very poor possibilities for the description of the error locations, especially for multiple-loci errors.",RESOLVED          FIXED      
13212,Bryce McKinlay,JNI/CNI AttachCurrentThread does not register thread with garbage collector,"Every version of GCC with Java support <= 3.3.2 I have tried (3.3.2, 3.3.1, 3.1)doesn't handle the AttachCurrentThread call working with native code. The bug issimilar to the one reported for Kaffe that can be found searching on google. Here's a gcc -v:Reading specs from /usr/lib/gcc-lib/i686-pc-linux-gnu/3.3.2/specsConfigured with: /var/tmp/portage/gcc-3.3.2-r2/work/gcc-3.3.2/configure--prefix=/usr --bindir=/usr/i686-pc-linux-gnu/gcc-bin/3.3--includedir=/usr/lib/gcc-lib/i686-pc-linux-gnu/3.3.2/include--datadir=/usr/share/gcc-data/i686-pc-linux-gnu/3.3--mandir=/usr/share/gcc-data/i686-pc-linux-gnu/3.3/man--infodir=/usr/share/gcc-data/i686-pc-linux-gnu/3.3/info --enable-shared--host=i686-pc-linux-gnu --target=i686-pc-linux-gnu --with-system-zlib--enable-languages=c,c++,f77,objc,java --enable-threads=posix --enable-long-long--disable-checking --enable-cstdio=stdio --enable-clocale=generic--enable-__cxa_atexit --enable-version-specific-runtime-libs--with-gxx-include-dir=/usr/lib/gcc-lib/i686-pc-linux-gnu/3.3.2/include/g++-v3--with-local-prefix=/usr/local --enable-shared --disable-nls--x-includes=/usr/X11R6/include --x-libraries=/usr/X11R6/lib--enable-interpreter --enable-java-awt=xlib --with-x --disable-multilibThread model: posixgcc version 3.3.2 20031022 (Gentoo Linux 3.3.2-r2, propolice)The behaviour is simple to reproduce: try using this (anyway the bug applies toJNI interface too)--hello.cc start--#include <gcj/cni.h>#include ""hello.h""#include <iostream>#include <pthread.h>using namespace std;using namespace java::lang;static pthread_t attachable;void * subStart(void *th) {                cerr << ""Before attach"" << endl;                jstring threadName = (jstring)th;                Thread *tp = JvAttachCurrentThread(NULL, NULL);                cerr << ""I am attached"" << endl;                int i = 0;                while(1)  {                        cerr << ""detached for "" << i++ << "" quarters"" <<endl;                        usleep(50000);                }}void *subStop(void *null) {                JvDetachCurrentThread();                cerr << ""I am detached"" << endl;}void ::hello::start() {        cerr << ""I am in start()"" << endl;        cerr << ""Result is "" << (int)JvCreateJavaVM(NULL) << endl;        jstring zocchia = JvNewStringUTF(""suka"");        JvAttachCurrentThread(NULL, NULL);        pthread_create(&attachable, NULL,  subStart, (void *)zocchia);}void ::hello::stop() {        cerr << ""I am in stop()"" << endl;        pthread_cancel(attachable);        pthread_join(attachable, NULL);        cerr << ""Joined!""<< endl;}--hello.cc stop----hello.java start--import java.io.*;class hello {        public native void start();        public native void stop();        static {        //      System.loadLibrary(""hello"");        }        public static void main(String[] argv) throws Exception {                hello z = new hello();                z.start();                Thread.sleep(2000);                z.stop();                System.out.println(""Thread stopped"");        }}--hello.java stop--Upon AttachCurrentThread the program gets killed by a SIGSEGV.GDB session detectes the problem is:Program received signal SIGSEGV, Segmentation fault.[Switching to Thread 1102085424 (LWP 17776)]GC_local_malloc_atomic (bytes=32)    at ../../../gcc-3.3.2/boehm-gc/linux_threads.c:361361             ptr_t my_entry = *my_fl;(gdb) bt#0  GC_local_malloc_atomic (bytes=32)    at ../../../gcc-3.3.2/boehm-gc/linux_threads.c:361#1  0x40448d9e in _Jv_AllocPtrFreeObject (klass=0x4, size=32) at java-gc.h:53#2  0x40470180 in _Jv_AllocString (len=16)    at ../../../gcc-3.3.2/libjava/java/lang/natString.cc:399#3  0x404701c2 in _Jv_NewString (chars=0x4, len=16)    at ../../../gcc-3.3.2/libjava/java/lang/natString.cc:414#4  0x4047257c in java::lang::Thread::gen_name() () at cni.h:52#5  0x4047271b in _Jv_AttachCurrentThread (name=0x0, group=0x0)    at ../../../gcc-3.3.2/libjava/java/lang/natThread.cc:406#6  0x08049196 in JvAttachCurrentThread(java::lang::String*,java::lang::ThreadGroup*) ()#7  0x08048f00 in subStart(void*) ()#8  0x408e1332 in start_thread () from /lib/tls/libpthread.so",RESOLVED          FIXED      
23891,Bryce McKinlay,[4.0 Regression] Problem folding static fields across packages,"The following test case, derived from Eclipse/ecj, fails to compile on HEAD andcurrent 4.0 branch. This is a regression since 4.0.0.package ast;import classfmt.*;public abstract class ASTNode implements ClassFileConstants {}---package ast;public class EqualExpression extends ASTNode {        public void resolveType() {                long foo = JDK1_5;        }}---package classfmt;public interface ClassFileConstants {        int MINOR_VERSION_0 = 0;        long JDK1_5 = (long) ClassFileConstants.MINOR_VERSION_0;}$ gcj -c ast/EqualExpression.java./classfmt/ClassFileConstants.java: In class 'ast.EqualExpression':./classfmt/ClassFileConstants.java: In method 'ast.EqualExpression.resolveType()':./classfmt/ClassFileConstants.java:5: error: Undefined variable or class name:‘ClassFileConstants.MINOR_VERSION_0’.        long JDK1_5 = (long) ClassFileConstants.MINOR_VERSION_0;                                ^1 error",RESOLVED          FIXED      
2357,Bryce McKinlay,HashMap does not handle initialCapacity=0 correctly,"When the initialCapacity of a HashMap is zero then bucket.length will be zero and then you will get a ArithmetichException in the hash() method.import java.util.HashMap;public class HashMapTest {    public static void main(String args[]) {        HashMap map = new HashMap(0);        map.get(new Object());    }}Exception in thread ""main"" java.lang.ArithmeticException: / by zero   at 0x4016836d: _Jv_ThrowSignal (/usr/local/gcc/lib/libgcj.so.1)   at 0x40168402: _Jv_ThrowSignal (/usr/local/gcc/lib/libgcj.so.1)   at 0x401dc840: java.util.HashMap.hash(java.lang.Object) (/usr/local/gcc/lib/libgcj.so.1)   at 0x401dc0a4: java.util.HashMap.get(java.lang.Object) (/usr/local/gcc/lib/libgcj.so.1)   at 0x08048a82: HashMapTest.main(java.lang.String[]) (/tmp/HashMapTest.java:6)   at 0x4017f0a5: gnu.gcj.runtime.FirstThread.run() (/usr/local/gcc/lib/libgcj.so.1)   at 0x40189d92: java.lang.Thread.run_(java.lang.Object) (/usr/local/gcc/lib/libgcj.so.1)   at 0x402a2e68: _Jv_ThreadSetPriority(_Jv_Thread_t, int) (/usr/local/gcc/lib/libgcj.so.1)   at 0x4045653d: GC_start_routine (/usr/local/gcc/lib/libgcjgc.so.1)   at 0x4046fc75: pthread_detach (/lib/libpthread.so.0)   at 0x40559eba: __clone (/lib/libc.so.6)Release:gcc version 3.0 20010323 (prerelease)",RESOLVED          FIXED      
1629,Bryce McKinlay,gcj link problem with a simple program,"I get the following link error message when compiling asimple program with the current cvs version of gcj: undefinedreference to `Client::class$'.Release:2.97 20010111 (experimental)Environment:System: Linux robyn 2.4.0-test11 #1 Wed Dec 6 20:52:57 CET 2000 i686 unknownArchitecture: i686	host: i686-pc-linux-gnubuild: i686-pc-linux-gnutarget: i686-pc-linux-gnuconfigured with: ../configure --prefix=/softlab/robyn/Linux/epkg/gcc-20010111 --enable-threads=posix --enable-shared --enable-languages=c++,java --disable-new-gxx-abi --with-gnu-as --with-gnu-ldHow-To-Repeat:> CLASSPATH=.. gcj -v -save-temps --main=Client Client.java        Reading specs from /softlab/robyn/Linux/epkg/gcc-20010111/lib/gcc-lib/i686-pc-linux-gnu/2.97/specsReading specs from /softlab/robyn/Linux/epkg/gcc-20010111/lib/gcc-lib/i686-pc-linux-gnu/2.97/../../../libgcj.specrename spec lib to liborigrename spec startfile to startfileorigConfigured with: ../configure --prefix=/softlab/robyn/Linux/epkg/gcc-20010111 --enable-threads=posix --enable-shared --enable-languages=c++,java --disable-new-gxx-abi --with-gnu-as --with-gnu-ldgcc version 2.97 20010111 (experimental) /softlab/robyn/Linux/epkg/gcc-20010111/lib/gcc-lib/i686-pc-linux-gnu/2.97/jc1 Client.java -fno-use-divide-subroutine -fuse-boehm-gc -fasynchronous-exceptions -quiet -dumpbase Client.java -g1 -version -o Client.sGNU Java version 2.97 20010111 (experimental) (i686-pc-linux-gnu)	compiled by GNU C version 2.95.3 20010101 (prerelease). as -V -Qy -o Client.o Client.sGNU assembler version 2.10.91 (i386-linux) using BFD version 2.10.1.0.2 /softlab/robyn/Linux/epkg/gcc-20010111/lib/gcc-lib/i686-pc-linux-gnu/2.97/jvgenmain Client Clientmain.i /softlab/robyn/Linux/epkg/gcc-20010111/lib/gcc-lib/i686-pc-linux-gnu/2.97/cc1 Clientmain.i -quiet -dumpbase Client.c -g1 -version -fdollars-in-identifiers -o Clientmain.sGNU CPP version 2.97 20010111 (experimental) (cpplib) (i386 Linux/ELF)GNU C version 2.97 20010111 (experimental) (i686-pc-linux-gnu)	compiled by GNU C version 2.95.3 20010101 (prerelease). as -V -Qy -o Clientmain.o Clientmain.sGNU assembler version 2.10.91 (i386-linux) using BFD version 2.10.1.0.2Clientmain.o: In function `main':/home/projects/joses/usr/patha/socketThreads/Clientmain.i(.text+0x1a): undefined reference to `Client::class$'collect2: ld returned 1 exit status########## Client.java: ##########package socketThreads;import java.io.InputStream;import java.io.OutputStream;import java.net.Socket;import java.net.InetAddress;import java.io.InputStream;import java.io.OutputStream;public class Client extends Thread {         static final boolean debug = true;    static final int serverPort = 4002;    static final int msgLength = 15;    static final int msgTotal = 10;    static final int clients = 3;    static final byte[] data = new byte[msgLength];    final Socket socket;    final OutputStream outputStream;    final InputStream inputStream;    final int number;    Client(int number) {        this.number = number;        Socket s = null;        OutputStream oS = null;        InputStream iS = null;        try {            s = new Socket(InetAddress.getLocalHost(), serverPort);            s.setTcpNoDelay(true);            oS = s.getOutputStream();            iS = s.getInputStream();        } catch (Exception e) {            e.printStackTrace();        } finally {            socket = s;            inputStream = iS;            outputStream = oS;        }    }    public final void run() {        try {            for (int b = 0; b < msgTotal; b++) {                for (int i = 0; i < msgLength; i++)                    data[i] = (byte)(b % 256);                outputStream.write(data);                inputStream.read(data);                if (debug)                    System.out.println(""Client "" + number + "" read: ""                                       + data[0]);            }            socket.close();                         } catch (Exception e) {            e.printStackTrace();        }            }    public static final void main(String args[]) {        for (int i = 0; i < clients; i++) {            new Client(i).start();        }        System.out.println(""Client closed."");    }}##########  Clientmain.i ##########extern const char **_Jv_Compiler_Properties;static const char *props[] ={  0};extern int class __attribute__ ((alias (""_6Client.class$"")));int main (int argc, const char **argv){   _Jv_Compiler_Properties = props;   JvRunMain (&class, argc, argv);}",CLOSED          FIXED      
1370,Bryce McKinlay,file permissions on created file incorrect,Responsible-Changed-From-To: apbianco->bryceResponsible-Changed-Why: I'm responding,CLOSED          FIXED      
16701,Bryce McKinlay,Error when constant initializer depends on another constant with restricted access,"I get a compile error when a class uses a public constant from a differentclass, which is initialized with the value of a private constant, which is (inturn) based on the value of another private constant.When I use the Sun, MicroSoft, Eclipse, or jikes compilers, it compiles fine.With GCJ, it says that the first class is attempting to access a private memberof the second.This error appears in both GCJ 3.3.4 (gcj-3.3 from Debian Sarge) and in the""java-gui-branch"" of GCJ 3.5.  I use "".../gcj -C *.java"" to compile to CLASS files.The error from v3.5 is:Coords.java: In class `TestCoords':Coords.java: In method `TestCoords.main(java.lang.String[])':Coords.java:50: error: Can't access private field `Coords.MASK' from `TestCoords'.           Integer.MAX_VALUE & Coords.MASK;                                     ^1 errorThe error from v3.3.4 is:Coords.java: In class `TestCoords':Coords.java: In method `TestCoords.main(java.lang.String[])':Coords.java:50: error: Can't access private field `Coords.MASK' from `TestCoords'.           Integer.MAX_VALUE & Coords.MASK;                                     ^Coords.java:56: error: Can't access private field `Coords.SHIFT' from `TestCoords'.           ( Integer.MAX_VALUE - Coords.MAX_BOARD_HEIGHT ) >> Coords.SHIFT;                                                                    ^2 errorsI've attached the two source files below.",RESOLVED          FIXED      
12586,Bryce McKinlay,gnu.java.net name mangling bug,"Michael Koch found this bug in GCJ's name mangler:-----BEGIN PGP SIGNED MESSAGE-----Hash: SHA1Hi Bryce,I found a weird bug in gcj in namespace mangling. I added a new package-private constructor in java.net.ServerSocket:ServerSocket (gnu.java.net.PlainSocketImpl impl){}This gets mangled to:_ZN4java3net12ServerSocketC1EPNS0_15PlainSocketImplEjava::net::ServerSocket::ServerSocket[in-charge](java::net::PlainSocketImpl*)(See the missing ""gnu::"").I debugged this a bit and my tests showed that when disabling the usage of compression_table the name gets mangled correctly (but not compresssed). I think the bug is either in find_compression_record_match or compression_table_add (both in gcc/java/mangle.c).I saw that you fixed PR4717 two years ago. This may be a corner case of this PR. (cv diff -r 1.17 -r 1.18 mangle.c).It would be really nice if you could help me fixing this. Unfortunately I'm not really experienced with GDB and GCC debugging.I you want I can send you a simple testcase too.Michael",RESOLVED          FIXED      
11778,Bryce McKinlay,System.out PrintStream does too much buffering,"Compare the output of the following test case (from current CVS) compared with the JRE or an earlier libgcj:public class testOut{  public static void main(String[] args) throws InterruptedException  {    for (int i=0; i < 20; i++)    {      System.out.print(""."");      Thread.sleep(100);    }  }}System.out is buffering the output too aggressively.",RESOLVED          FIXED      
1216,Bryce McKinlay,wait/notify doesn't work if monitor is locked recursivly,Responsible-Changed-From-To: tromey->bryceResponsible-Changed-Why: I fixed it.,RESOLVED          FIXED      
1116,Bryce McKinlay,Process inputstream/errorstream can block,"Responsible-Changed-From-To: tromey->bryceResponsible-Changed-Why: I have implemented a solution for this, pending fix to PR #13",RESOLVED          FIXED      
1369,Bryce McKinlay,Throwable.printStackTrace() isn't working,Responsible-Changed-From-To: tromey->aphResponsible-Changed-Why: Andrew handles exception handling.,RESOLVED          FIXED      
1402,Bryce McKinlay,unmodifiableList isn't unmodifiable,"From: Mark Wielaard <mark@klomp.org>To: bryce@albatross.co.nzCc: java-gnats@sourceware.cygnus.comSubject: Re: java.util/372: unmodifiableList isn't unmodifiableDate: Wed, 22 Nov 2000 12:43:35 +0100 Hi,  On Wed, Nov 22, 2000 at 10:11:42AM -0000, bryce@albatross.co.nz wrote: >  > >Description: > Collections.UnModifiableList appears to be implemented > incorrectly. Refer to the test case. > >How-To-Repeat: > import java.util.*; >  > public class Unmodifiable > { >   public static void main(String[] args) >   { >     List l = new ArrayList(); >     l.add(""foo""); >     l = Collections.unmodifiableList(l); >     System.out.println (l); // should print contents of list >     l.set(0, ""bar""); // should throw exception >   } > }  You are cheating :) java.util.Collections is not (yet) in libgcj but I assume you mean the implementation of Collections in Classpath. Your observation is correct. The innerclass UnmodifiableCollection in Collections should implement toString() (and probably hashCode() and equals() which are now implemented by all the subclasses) some of the methods of UnmodifiableList methods should throw exceptions instead of just passing them to the wrapped list object. (add(), addAll(), remove() and set())  Cheers,  Mark",RESOLVED          FIXED      
1718,Bryce McKinlay,ArithmeticException regressions,"1) This test case does not run correctly:public class ArithExTest {    public static void main(String[] args)     {      try        {          int k = 3 / 0;        }      catch (Exception x)        {          System.out.println (""ok"");        }    }}The exception gets thrown all the way back to the defaulthandler, missing the hander defined in the test case.2) The testsuite case libjava.lang/Divide_1.java loops indefinatly. I can see the SIGFPE in gdb but execution seemsto resume at a point before the instructions that generatedthe exception.NullPointerExceptions seem to be working fine, though.Release:current CVSEnvironment:Red Hat 7.0 w/ kernel 2.4.0, glibc-2.2-12",RESOLVED          FIXED      
4656,Bryce McKinlay,gcc3.0.1 building fails on MacOS X.1,"standard building:mkdir buildcd build../gcc.3.0.1/configure blah-blahmake bootstrap blah-blah../../gcc-3.0.1/gcc/function.c:596: `DEFAULT_ABI' undeclared (first use in this function) blah-blahgnumake[2]: *** [function.o] Error 1gnumake[1]: *** [stage1_build] Error 2gnumake: *** [bootstrap] Error 2Trying to fix it by adding #define etc... lines ingcc-3.0.1/gcc/config/rs6000/xm-darwin.hjust pushes the problem further.eventually compile all routines but won't link.attached guessed xm-darwin.h...Release:cannot execute gcc -v / package: gcc3.0.1Environment:iMac G3 ~500 MHz. MacOS X.1. cc compliler:Apple Computer, Inc. version gcc-932.1, based on gcc version 2.95.2 19991024 (release)How-To-Repeat:standard install on iMac under OS X.1",RESOLVED          FIXED      
4717,Bryce McKinlay,miscompiling class reference,"The shar file below has two classes: a.b.Foo and z.b.c.Bar.	Every reference to a.b.Foo in z.b.c.Bar is being turned into areference to the non-existant class z.b.Foo.  This problem makes itimpossible to link, for instance, the gtk peers in gnu.awt.gtk.Release:3.1 20011024 (experimental)Environment:System: Linux fencer.cygnus.com 2.2.12-20smp #1 SMP Mon Sep 27 10:34:45 EDT 1999 i686 unknownArchitecture: i686	host: i686-pc-linux-gnubuild: i686-pc-linux-gnutarget: i686-pc-linux-gnuconfigured with: /fencer/cutlass/aph/green/trunk/gcc/configure --prefix=/fencer/cutlass/aph/green/trunk/i --enable-threads --enable-languages=c,c++,java --with-languages=c,c++,java : (reconfigured)How-To-Repeat:unshar and run make#!/bin/sh# This is a shell archive (produced by GNU sharutils 4.2.1).# To extract the files from this archive, save it to some FILE, remove# everything before the `!/bin/sh' line above, then type `sh FILE'.## Made on 2001-10-28 04:36 PST by <green@localhost.localdomain>.# Source directory was `/tmp/t'.## Existing files will *not* be overwritten unless `-c' is specified.## This shar contains:# length mode       name# ------ ---------- ------------------------------------------#     88 -rw-rw-r-- Makefile#     45 -rw-rw-r-- a/b/Foo.java#    204 -rw-rw-r-- z/b/c/Bar.java#save_IFS=""${IFS}""IFS=""${IFS}:""gettext_dir=FAILEDlocale_dir=FAILEDfirst_param=""$1""for dir in $PATHdo  if test ""$gettext_dir"" = FAILED && test -f $dir/gettext \     && ($dir/gettext --version >/dev/null 2>&1)  then    set `$dir/gettext --version 2>&1`    if test ""$3"" = GNU    then      gettext_dir=$dir    fi  fi  if test ""$locale_dir"" = FAILED && test -f $dir/shar \     && ($dir/shar --print-text-domain-dir >/dev/null 2>&1)  then    locale_dir=`$dir/shar --print-text-domain-dir`  fidoneIFS=""$save_IFS""if test ""$locale_dir"" = FAILED || test ""$gettext_dir"" = FAILEDthen  echo=echoelse  TEXTDOMAINDIR=$locale_dir  export TEXTDOMAINDIR  TEXTDOMAIN=sharutils  export TEXTDOMAIN  echo=""$gettext_dir/gettext -s""fiif touch -am -t 200112312359.59 $$.touch >/dev/null 2>&1 && test ! -f 200112312359.59 -a -f $$.touch; then  shar_touch='touch -am -t $1$2$3$4$5$6.$7 ""$8""'elif touch -am 123123592001.59 $$.touch >/dev/null 2>&1 && test ! -f 123123592001.59 -a ! -f 123123592001.5 -a -f $$.touch; then  shar_touch='touch -am $3$4$5$6$1$2.$7 ""$8""'elif touch -am 1231235901 $$.touch >/dev/null 2>&1 && test ! -f 1231235901 -a -f $$.touch; then  shar_touch='touch -am $3$4$5$6$2 ""$8""'else  shar_touch=:  echo  $echo 'WARNING: not restoring timestamps.  Consider getting and'  $echo ""installing GNU \`touch', distributed in GNU File Utilities...""  echofirm -f 200112312359.59 123123592001.59 123123592001.5 1231235901 $$.touch#if mkdir _sh18081; then  $echo 'x -' 'creating lock directory'else  $echo 'failed to create lock directory'  exit 1fi# ============= Makefile ==============if test -f 'Makefile' && test ""$first_param"" != -c; then  $echo 'x -' SKIPPING 'Makefile' '(file already exists)'else  $echo 'x -' extracting 'Makefile' '(gzipped)'  sed 's/^X//' << 'SHAR_EOF' | uudecode &&See attachments for _sh18081/gziSHAR_EOF  $echo 'gunzipping file' 'Makefile' &&  gzip -d < _sh18081/gzi > 'Makefile' &&  (set 20 01 10 28 04 34 21 'Makefile'; eval ""$shar_touch"") &&  chmod 0664 'Makefile' ||  $echo 'restore of' 'Makefile' 'failed'  if ( md5sum --help 2>&1 | grep 'sage: md5sum \[' ) >/dev/null 2>&1 \  && ( md5sum --version 2>&1 | grep -v 'textutils 1.12' ) >/dev/null; then    md5sum -c << SHAR_EOF >/dev/null 2>&1 \    || $echo 'Makefile:' 'MD5 check failed'b52c408e60577fb0e6a4645261ff815f  MakefileSHAR_EOF  else    shar_count=""`LC_ALL= LC_CTYPE= LANG= wc -c < 'Makefile'`""    test 88 -eq ""$shar_count"" ||    $echo 'Makefile:' 'original size' '88,' 'current size' ""$shar_count!""  fifi# ============= a/b/Foo.java ==============if test ! -d 'a'; then  $echo 'x -' 'creating directory' 'a'  mkdir 'a'fiif test ! -d 'a/b'; then  $echo 'x -' 'creating directory' 'a/b'  mkdir 'a/b'fiif test -f 'a/b/Foo.java' && test ""$first_param"" != -c; then  $echo 'x -' SKIPPING 'a/b/Foo.java' '(file already exists)'else  $echo 'x -' extracting 'a/b/Foo.java' '(gzipped)'  sed 's/^X//' << 'SHAR_EOF' | uudecode &&See attachments for _sh18081/gziSHAR_EOF  $echo 'gunzipping file' 'a/b/Foo.java' &&  gzip -d < _sh18081/gzi > 'a/b/Foo.java' &&  (set 20 01 10 28 04 27 36 'a/b/Foo.java'; eval ""$shar_touch"") &&  chmod 0664 'a/b/Foo.java' ||  $echo 'restore of' 'a/b/Foo.java' 'failed'  if ( md5sum --help 2>&1 | grep 'sage: md5sum \[' ) >/dev/null 2>&1 \  && ( md5sum --version 2>&1 | grep -v 'textutils 1.12' ) >/dev/null; then    md5sum -c << SHAR_EOF >/dev/null 2>&1 \    || $echo 'a/b/Foo.java:' 'MD5 check failed'251c49a61e8c8a1f8da00db5cccfd1b6  a/b/Foo.javaSHAR_EOF  else    shar_count=""`LC_ALL= LC_CTYPE= LANG= wc -c < 'a/b/Foo.java'`""    test 45 -eq ""$shar_count"" ||    $echo 'a/b/Foo.java:' 'original size' '45,' 'current size' ""$shar_count!""  fifi# ============= z/b/c/Bar.java ==============if test ! -d 'z'; then  $echo 'x -' 'creating directory' 'z'  mkdir 'z'fiif test ! -d 'z/b'; then  $echo 'x -' 'creating directory' 'z/b'  mkdir 'z/b'fiif test ! -d 'z/b/c'; then  $echo 'x -' 'creating directory' 'z/b/c'  mkdir 'z/b/c'fiif test -f 'z/b/c/Bar.java' && test ""$first_param"" != -c; then  $echo 'x -' SKIPPING 'z/b/c/Bar.java' '(file already exists)'else  $echo 'x -' extracting 'z/b/c/Bar.java' '(gzipped)'  sed 's/^X//' << 'SHAR_EOF' | uudecode &&See attachments for _sh18081/gziSHAR_EOF  $echo 'gunzipping file' 'z/b/c/Bar.java' &&  gzip -d < _sh18081/gzi > 'z/b/c/Bar.java' &&  (set 20 01 10 28 04 31 28 'z/b/c/Bar.java'; eval ""$shar_touch"") &&  chmod 0664 'z/b/c/Bar.java' ||  $echo 'restore of' 'z/b/c/Bar.java' 'failed'  if ( md5sum --help 2>&1 | grep 'sage: md5sum \[' ) >/dev/null 2>&1 \  && ( md5sum --version 2>&1 | grep -v 'textutils 1.12' ) >/dev/null; then    md5sum -c << SHAR_EOF >/dev/null 2>&1 \    || $echo 'z/b/c/Bar.java:' 'MD5 check failed'1474ab0c6fd4fe1433f4be35204ec981  z/b/c/Bar.javaSHAR_EOF  else    shar_count=""`LC_ALL= LC_CTYPE= LANG= wc -c < 'z/b/c/Bar.java'`""    test 204 -eq ""$shar_count"" ||    $echo 'z/b/c/Bar.java:' 'original size' '204,' 'current size' ""$shar_count!""  fifirm -fr _sh18081exit 0",RESOLVED          FIXED      
5993,Bryce McKinlay,crashes on Hello World,"plasmoid@debian:~/Java/GCJ$ gcj HelloWorld.javaHelloWorld.java: In class `HelloWorld':HelloWorld.java: In method `HelloWorld.main(java.lang.String[])':HelloWorld.java:5: Internal error: Segmentation faultPlease submit a full bug report,with preprocessed source if appropriate.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.This error should probably be 'undefined reference to java.lang.swing.JOptionPane.showMessageDialog'.Release:gcc version 3.0.4Environment:I386 Linux on Debian Unstable.  Athlon 1200 on KT133A chipset, not overclocked.Linux 2.4.18Glibc 2.2.5, Compiled by GNU CC version 2.95.4.How-To-Repeat:gcj HelloWorld.java This will produce the ICE",RESOLVED          FIXED      
227,Bryce McKinlay,mips-tfile:internal error (when compiling java code),"When compiling Hello.java (attached) code, compiler stops with:mips-tfile:internal error,  is already in original symbol tablemips-tfile:internal error,  is already in original symbol tablemips-tfile, Hello.s:77 Invalid .stabs/.stabn directive, value not foundline:            #.stabn 68,0,2,$LM1mips-tfile, Hello.s:94 Invalid .stabs/.stabn directive, value not foundline:            #.stabn 68,0,3,$LM2mips-tfile, Hello.s:110 Invalid .stabs/.stabn directive, value not foundline:            #.stabn 68,0,4,$LM3Release:gcc version 2.95.2 19991024 (release)Environment:alpha-dec-osf4.0fHow-To-Repeat:gcj --save-temps --main=Hello Hello.java",RESOLVED          FIXED      
247,Bryce McKinlay,ICE compiling methods which handle Double values @ -O2,"When compiling VisualNumerics.math.ComplexCholesky (available fromhttp://www.boulder.vni.com/products/wpd/jnl/) with either -0 or -O2,gcj generates the following error:> gcj -v --save-temps -O -g -c -o /extra/home/warnes/java/VisualNumerics/math/ComplexCholesky.o/extra/home/warnes/java/VisualNumerics/math/ComplexCholesky.classReading specs from /usr/lib/gcc-lib/i686-pc-linux-gnu/2.96/specsReading specs from/usr/lib/gcc-lib/i686-pc-linux-gnu/2.96/../../../libgcj.specrename spec lib to liborigrename spec startfile to startfileoriggcc version 2.96 20000525 (experimental) /usr/lib/gcc-lib/i686-pc-linux-gnu/2.96/jc1/extra/home/warnes/java/VisualNumerics/math/ComplexCholesky.class -fno-use-divide-subroutine-fasynchronous-exceptions -quiet -g -O -version -o ComplexCholesky.sGNU Java version 2.96 20000525 (experimental) (i686-pc-linux-gnu) compiledby GNU C version 2.96 20000524 (experimental).VisualNumerics/math/ComplexCholesky.java: In class`VisualNumerics.math.ComplexCholesky':VisualNumerics/math/ComplexCholesky.java: In method`solve(VisualNumerics.math.Complex[])':VisualNumerics/math/ComplexCholesky.java:1027: Internal compiler error in`convert_regs_1', at reg-stack.c:2567Please submit a full bug report.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.Release:2.96 (Current CVS)Environment:Kernel: Linux 2.2.15 SMP + Mosix extensionsCPU:    Dual Intel Pentium-II 300Architecture: i686Distribution: Debain Potatohost: i686-pc-linux-gnubuild: i686-pc-linux-gnutarget: i686-pc-linux-gnuHow-To-Repeat:Compile.",RESOLVED          FIXED      
472,Bryce McKinlay,gcj has segmentation faults,"Reading specs from /usr/local/lib/gcc-lib/i686-pc-linux/2.96/specsReading specs from /usr/local/lib/gcc-lib/i686-pc-linux/2.96/../../../libgcj.specrename spec lib to liborigrename spec startfile to startfileoriggcc version 2.96 20000807 (experimental) /usr/local/lib/gcc-lib/i686-pc-linux/2.96/jc1 /usr/src/Freenet/Core.java -fno-use-divide-subroutine -fasynchronous-exceptions -quiet -dumpbase Core.java -g1 -version -o Core.sGNU Java version 2.96 20000807 (experimental) (i686-pc-linux) compiled by GNU C version 2.96 20000807 (experimental)./usr/src/Freenet/Core.java:94: Internal error: Segmentation fault.Please submit a full bug report.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.Reading specs from /usr/local/lib/gcc-lib/i686-pc-linux/2.96/specsReading specs from /usr/local/lib/gcc-lib/i686-pc-linux/2.96/../../../libgcj.specrename spec lib to liborigrename spec startfile to startfileoriggcc version 2.96 20000807 (experimental) /usr/local/lib/gcc-lib/i686-pc-linux/2.96/jc1 /usr/src/Freenet/message/RequestCB.java -fno-use-divide-subroutine -fasynchronous-exceptions -quiet -dumpbase RequestCB.java -g1 -version -o RequestCB.sGNU Java version 2.96 20000807 (experimental) (i686-pc-linux) compiled by GNU C version 2.96 20000807 (experimental)./usr/src/Freenet/message/RequestCB.java: In class `Freenet.message.RequestCB$RequestRestarted':/usr/src/Freenet/message/RequestCB.java: In method `received(Freenet.node.Node,Freenet.MessageMemory)':/usr/src/Freenet/message/RequestCB.java:74: Internal error: Segmentation fault.Please submit a full bug report.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.Reading specs from /usr/local/lib/gcc-lib/i686-pc-linux/2.96/specsReading specs from /usr/local/lib/gcc-lib/i686-pc-linux/2.96/../../../libgcj.specrename spec lib to liborigrename spec startfile to startfileoriggcc version 2.96 20000807 (experimental) /usr/local/lib/gcc-lib/i686-pc-linux/2.96/jc1 /usr/src/Freenet/message/DataRequest.java -fno-use-divide-subroutine -fasynchronous-exceptions -quiet -dumpbase DataRequest.java -g1 -version -o DataRequest.sGNU Java version 2.96 20000807 (experimental) (i686-pc-linux) compiled by GNU C version 2.96 20000807 (experimental)./usr/src/Freenet/message/DataRequest.java: In class `Freenet.message.DataRequest$DataSent':/usr/src/Freenet/message/DataRequest.java: In method `id()':/usr/src/Freenet/message/DataRequest.java:117: Internal error: Segmentation fault.Please submit a full bug report.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.Reading specs from /usr/local/lib/gcc-lib/i686-pc-linux/2.96/specsReading specs from /usr/local/lib/gcc-lib/i686-pc-linux/2.96/../../../libgcj.specrename spec lib to liborigrename spec startfile to startfileoriggcc version 2.96 20000807 (experimental) /usr/local/lib/gcc-lib/i686-pc-linux/2.96/jc1 /usr/src/Freenet/message/DataSend.java -fno-use-divide-subroutine -fasynchronous-exceptions -quiet -dumpbase DataSend.java -g1 -version -o DataSend.sGNU Java version 2.96 20000807 (experimental) (i686-pc-linux) compiled by GNU C version 2.96 20000807 (experimental)./usr/src/Freenet/message/DataSend.java: In class `Freenet.message.DataSend$ReceivedData':/usr/src/Freenet/message/DataSend.java: In method `id()':/usr/src/Freenet/message/DataSend.java:272: Internal error: Segmentation fault.Please submit a full bug report.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.Release:gcc version 2.96 20000807 (experimental)Environment:i686-pc-linuxHow-To-Repeat:see file",RESOLVED          FIXED      
618,Bryce McKinlay,Inner classes wont compile,Compile fails for file with large number of inner classes.  [shayne@tuna Colt]$ gcj -c cern/jet/math/Functions.javacern/jet/math/Functions.java:954: Undefined variable `parm$b'.   }^1 error[shayne@tuna Colt]$This is a file from the Colt mathematical libarary.Release:cvs 2000-10-06Environment:Linux 2.2.12 RedHat 6.1How-To-Repeat:Put attached file in ./cern/jet/math/gcj -c cern/jet/math/Functions.java,RESOLVED          FIXED      
634,Bryce McKinlay,"Internal compiler error in expand_call, at calls.c:2274","JServConnection.java:1686: Tree check: expected identifier_node, have expr_with_file_locationJServConnection.java:1686: Internal compiler error in expand_call, at calls.c:2274Please submit a full bug report.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.JServConnection.java:1774: Tree check: expected identifier_node, have expr_with_file_locationJServConnection.java:1774: Internal compiler error in expand_call, at calls.c:2274Please submit a full bug report.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.org/apache/jserv/JServUtils.java:173: Tree check: expected identifier_node, have expr_with_file_locationorg/apache/jserv/JServUtils.java:173: Internal compiler error in expand_call, at calls.c:2274Please submit a full bug report.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.org/apache/jserv/JServ.java:80: Tree check: expected identifier_node, have expr_with_file_locationorg/apache/jserv/JServ.java:80: Internal compiler error in expand_call, at calls.c:2274Please submit a full bug report.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.org/apache/jserv/JServConnection.java:733: Tree check: expected identifier_node, have expr_with_file_locationorg/apache/jserv/JServConnection.java:733: Internal compiler error in expand_call, at calls.c:2274Please submit a full bug report.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.org/apache/jserv/JServServletManager.java:758: Tree check: expected identifier_node, have expr_with_file_locationorg/apache/jserv/JServServletManager.java:758: Internal compiler error in expand_call, at calls.c:2274Please submit a full bug report.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.org/apache/jserv/JServSession.java:230: Tree check: expected identifier_node, have expr_with_file_locationorg/apache/jserv/JServSession.java:230: Internal compiler error in expand_call, at calls.c:2274Release:gcc version 2.96 20000814 (experimental)Environment:linux redhat 6.2How-To-Repeat:Compile the classes in the attatched jar",RESOLVED          FIXED      
910,Bryce McKinlay,gcj compiler crashes when compiling initializer statement without paranthesis after constructor,"When I give the gcj Java compiler the source file, it prints an error message, and then crashes. The problem was solved when typing the parantheses after the constructor name (TextAreaPeer).Release:2.96 20000731 (Red Hat Linux 7.0)How-To-Repeat:I have seen the same problem when compiling other programs that didn't have parantheses after constructors.Just compile the source file with:gcj -o Beeper --main=Beeper Beeper.javaand watch the compiler dump...",RESOLVED          FIXED      
953,Bryce McKinlay,refering the outer class instance,"When refering in an internal class the outer class instance, the compiler makes a segmentation fault:Interne.java: In class `Interne$Dedans':Interne.java: In method `l()':Interne.java:6: Internal error: Segmentation fault.Please submit a full bug report.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.Release:gcc version 2.96 20000731 (Red Hat Linux 7.0)Environment:Linux pc112 2.2.17 #2 SMP Wed Nov 29 18:40:46 CET 2000 i686 unknownHow-To-Repeat:Compile it with gcj",RESOLVED          FIXED      
1107,Bryce McKinlay,Thread problems on SPARC/Solaris 2.7,"Responsible-Changed-From-To: tromey->greenResponsible-Changed-Why: I'll look at this.    I realize it's been a while now, but your test code is    missing.  Could you please make it available again?        Thanks",RESOLVED          FIXED      
1169,Bryce McKinlay,gij failure in isAssignableFrom,Responsible-Changed-From-To: tromey->bryceResponsible-Changed-Why: Its a constant-time type checking bug,RESOLVED          FIXED      
1193,Bryce McKinlay,compile error prims.cc,"From: Bryce McKinlay <bryce@albatross.co.nz>To: dkidd@gwn.com.auCc: java-gnats@sourceware.cygnus.comSubject: Re: gcj/227: compile error prims.ccDate: Sat, 20 May 2000 11:49:16 +1200 dkidd@gwn.com.au wrote:  > >Environment: > 2.2.6 (kernal version) slackware version 4 > >Description: > cannot compile prims.cc > says > ""in function void catch_segv(int) >  invalid use of undefined type struct sigcontext struct""  Hi,  We'll need more information to diagnose this problem. Specifically, what version exactly of gcc and libgcj are you using? What version of (g)libc does your distribution use?  regards    [ bryce ]",RESOLVED          FIXED      
1194,Bryce McKinlay,Cannot read compressed jar files at runtime,Responsible-Changed-From-To: apbianco->bryceResponsible-Changed-Why: I checked in a fix,RESOLVED          FIXED      
1237,Bryce McKinlay,File creation doesn't observe umask,"From: Tom Tromey <tromey@cygnus.com>To: Bryce McKinlay <bryce@albatross.co.nz>Cc: tromey@cygnus.com, java-gnats@sourceware.cygnus.comSubject: Re: java.io/202: File creation doesn't observe umaskDate: Sat, 15 Apr 2000 19:46:03 -0700 (PDT) >> Classes that create OS files (i.e. java.io.FileOutputStream) >> do not obey the user's current umask.  Files are always >> created with permissions -rw-r--r-- regardless of the user's >> umask setting.  Bryce>  umask is being honored, but we're creating files with the Bryce>  wrong mode (so changing umask from 022 to 000 appears to have Bryce>  no effect). The following patch should fix that. OK to commit?  When I try a simple test program with Sun's JDK (1.1.7, I think), with my umask set to 000, it creates a file with mode 0664.  Do you know what JDK 1.2 does?  I think it makes sense to be JDK compatible here. (When I wrote this code I didn't run a test -- I just picked what I thought would be reasonable.)  Tom",RESOLVED          FIXED      
1248,Bryce McKinlay,"Fails to compile: ""implicit declaration of function `int __builtin_expect(...)""","From: Tom Tromey <tromey@cygnus.com>To: ""Gregory R. Warnes"" <warnes@biostat.washington.edu>Cc: java-gnats@sourceware.cygnus.com, tromey@cygnus.comSubject: Re: libgcj/226: Fails to compile: ""implicit declaration of function `int __builtin_expect(...)""Date: Thu, 18 May 2000 14:51:25 -0700 (PDT) >>>>> ""Gregory"" == Gregory R Warnes <warnes@biostat.washington.edu> writes:  Gregory> It would probably be a good idea to add an autoconf test for Gregory> __builtin_expect .  I agree, and that's what I'm planning to do. I might be able to get to it today. We'll see.  It depends on how my current project goes.  Tom",RESOLVED          FIXED      
1249,Bryce McKinlay,Cannot read compressed property data when run under gdb,"From: Bryce McKinlay <bryce@albatross.co.nz>To: warnes@biostat.washington.eduCc: java-gnats@sourceware.cygnus.com, Jeff Sturm <jsturm@sigma6.com>,        Tom Tromey <tromey@cygnus.com>Subject: Re: gcj/229: Cannot read compressed property data when run under gdbDate: Sun, 21 May 2000 11:38:56 +1200 warnes@biostat.washington.edu wrote:  > >Description: > Reading property information fails at runtime when run under gdb, regardless of the location of the property data ( file,  uncompressed jar, compressed jar).  I thought I saw this the other day, but maybe I was dreaming. I can no longer reproduce it using gdb 5.0 or an older gdb snapshot from '99. With the PR 228 patch, your example works regardless of whether I'm running in gdb or not.  Note however that there is an unrelated bug with having relative paths to .jar files on your CLASSPATH (see PR 231) - is it possible your seeing this instead?  regards    [ bryce ]",RESOLVED          FIXED      
1277,Bryce McKinlay,java.lang.Class.isAssignableFrom has various error conditions,From: warrenl@sourceware.cygnus.comTo: java-gnats@sourceware.cygnus.comCc:  Subject: java.lang/258Date: 13 Jun 2000 23:44:05 -0000 CVSROOT:	/cvs/java Module name:	libgcj Changes by:	warrenl@sourceware.cygnus.com	00/06/13 16:44:05  Modified files: 	libjava/testsuite: ChangeLog  Added files: 	libjava/testsuite/libjava.lang: Class_1.java Class_1.out   Log message: 	Test for PR java.lang/258: 	* libjava.lang/Class_1.java: New file. 	* libjava.lang/Class_1.out: New file.  Patches: http://gcc.gnu.org/cgi-bin/gcc/libjava/testsuite/ChangeLog.diff?cvsroot=java&r1=1.100&r2=1.101 http://gcc.gnu.org/cgi-bin/gcc/libjava/testsuite/libjava.lang/Class_1.java.diff?cvsroot=java&r1=NONE&r2=1.1 http://gcc.gnu.org/cgi-bin/gcc/libjava/testsuite/libjava.lang/Class_1.out.diff?cvsroot=java&r1=NONE&r2=1.1,RESOLVED          FIXED      
1297,Bryce McKinlay,gcjh still does not handle attribute with same name as method,Responsible-Changed-From-To: apbianco->bryceResponsible-Changed-Why: I submitted,RESOLVED          FIXED      
1516,Bryce McKinlay,Method.invoke won't accept boolean parameters,"Method.invoke throws java.lang.IllegalArgumentException formethods with boolean (primitive) types in their signatures.Release:HEADEnvironment:i686-pc-linux-gnuHow-To-Repeat:Run the attached test case.  It should print `true' and`false', not throw an exception.",RESOLVED          FIXED      
1572,Bryce McKinlay,make boot fails building libgcj due to missing include dir,"When I do a 'make bootstrap"", compilation of libgcj fails: -fasynchronous-exceptions -fdollars-in-identifiers -D__NO_MATH_INLINES -ffloat-store -W -Wall -D_GNU_SOURCE -g -O2 -fvtable-thunks -D_GNU_SOURCE -Wp,-MD,.deps/natClip.pp -c /home/bothner/GNU/egcs/libjava/gnu/gcj/xlib/natClip.cc  -fPIC -DPIC -o gnu/gcj/xlib/.libs/natClip.o/home/bothner/GNU/egcs/libjava/gnu/gcj/xlib/natClip.cc:15:18: vector: No such file or directory/home/bothner/GNU/egcs/libjava/gnu/gcj/xlib/natClip.cc:26: syntax error before    `;' token/home/bothner/GNU/egcs/libjava/gnu/gcj/xlib/natClip.cc: In member function    `void gnu::gcj::xlib::Clip::init(JArray<java::awt::Rectangle*>*)':/home/bothner/GNU/egcs/libjava/gnu/gcj/xlib/natClip.cc:33: `XRectVector'    undeclared (first use this function)/home/bothner/GNU/egcs/libjava/gnu/gcj/xlib/natClip.cc:33: (Each undeclared    identifier is reported only once for each function it appears in.)/home/bothner/GNU/egcs/libjava/gnu/gcj/xlib/natClip.cc:33: `xrectvector'    undeclared (first use this function)/home/bothner/GNU/egcs/libjava/gnu/gcj/xlib/natClip.cc:33: parse error before `   (' tokenmake[3]: *** [gnu/gcj/xlib/natClip.lo] Error 1make[3]: Leaving directory `/home/bothner/GNU/linux-gcc/i686-pc-linux-gnu/libjava'make[2]: *** [all-recursive] Error 1make[2]: Leaving directory `/home/bothner/GNU/linux-gcc/i686-pc-linux-gnu/libjava'make[1]: *** [all-target-libjava] Error 2make[1]: Leaving directory `/home/bothner/GNU/linux-gcc'make: *** [bootstrap] Error 2Note there is no -I line that names the directory containing <vector>,which is libstdc++-v3/include/std.The reason for this is that libstdc++ is configured, it sets CXX to a commandthat does *not* include the directories in libstdc++-v3.  This value getswritten to i686-pc-linux-gnu/config.cache:ac_cv_prog_CXX=${ac_cv_prog_CXX='/home/bothner/GNU/linux-gcc/gcc/g++ -B/home/bothner/GNU/linux-gcc/gcc/ -nostdinc++  -L/home/bothner/GNU/linux-gcc/i686-pc-linux-gnu/libstdc++-v3/src -L/home/bothner/GNU/linux-gcc/i686-pc-linux-gnu/libstdc++-v3/src/.libs -B/home/bothner/GNU/linux/i686-pc-linux-gnu/bin/ -B/home/bothner/GNU/linux/i686-pc-linux-gnu/lib/ -isystem /home/bothner/GNU/linux/i686-pc-linux-gnu/include'}When libjava is configured it uses this as the value of CXX.Release:2.97 20001230 (experimental)Environment:System: Linux kelso.bothner.com 2.4.0-test11 #1 Wed Nov 29 14:11:55 PST 2000 i686 unknownArchitecture: i686host: i686-pc-linux-gnubuild: i686-pc-linux-gnutarget: i686-pc-linux-gnuconfigured with: /home/bothner/GNU/egcs/configure --enable-threads=posix --prefix=/home/bothner/GNU/linux --enable-shared --enable-languages=c++,java --disable-new-gxx-abiHow-To-Repeat:Configure with java enable; run 'make bootstrap"".Note if I do plain ""make"", the prolem does not appear.",RESOLVED          FIXED      
1684,Bryce McKinlay,java.util.treeset and java.util.treemap are missing,The classes java.util.TreeSet and java.util.TreeMap aremissing. Since these classes are widely used they shouldbe part of libjava.Release:unknownEnvironment:-,RESOLVED          FIXED      
1736,Bryce McKinlay,[irix 6.5] Cannot create libgcj - Arg list too long,"Cannot create ligcj.la.  Apparently this is a known problem.`/exd4/billingd/obj/gcc-java/mips-sgi-irix6.5/mabi=64/libjava'/bin/sh ./libtool --mode=link /exd4/billingd/obj/gcc-java/gcc/xgcc-B/exd4/billingd/obj/gcc-java/gcc/-B/exd4/billingd/tmp/gcc/mips-sgi-irix6.5/bin/-B/exd4/billingd/tmp/gcc/mips-sgi-irix6.5/lib/ -isystem/exd4/billingd/tmp/gcc/mips-sgi-irix6.5/include  -mabi=64-L/exd4/billingd/obj/gcc-java/mips-sgi-irix6.5/mabi=64/libjava -g   -mabi=64-o libgcj.la -rpath /exd4/billingd/tmp/gcc/lib/mabi=64-L/exd4/billingd/obj/gcc-java/mips-sgi-irix6.5/mabi=64/libjava/../libstdc++-v3/libsupc++ -lsupc++ -rpath /exd4/billingd/tmp/gcc/lib/mabi=64-version-info `grep -v '^#' /exd4/billingd/src/gcc/libjava/libtool-version`prims.lo posix.lo jni.lo ........./lang/s_sin.lo boehm.lo no-threads.lo  `ar t ../libffi/.libs/libffi.a2>/dev/null | sed 's/\.o/\.lo/g' | sed 's/^/..\/libffi\//g'`./libltdl/libltdlc.la make[4]: execvp: /bin/sh: Arg list too longmake[4]: *** [libgcj.la] Error 127Release:cvs 20010115Environment:mips-sgi-ixi6.5How-To-Repeat:With cvs gcc, enable libgcj in top level configure.inmake bootstrap",RESOLVED          FIXED      
1758,Bryce McKinlay,java.util package lacks TreeMap,"As summary.Release:2.97Environment:Reading specs from /opt/gcc-snap/lib/gcc-lib/i686-pc-linux-gnu/2.97/specsReading specs from /opt/gcc-snap/lib/gcc-lib/i686-pc-linux-gnu/2.97/../../../libgcj.specrename spec lib to liborigrename spec startfile to startfileorigConfigured with: ../gcc/configure --prefix=/opt/gcc-snap --enable-languages=c,c++,javagcc version 2.97 20010124 (experimental)How-To-Repeat:n/a",RESOLVED          FIXED      
1759,Bryce McKinlay,java.io.File lacks several jdk 1.2 methods,"java.io.File lacks several JDK 1.2 methods.Release:2.97Environment:LinuxReading specs from /opt/gcc-snap/lib/gcc-lib/i686-pc-linux-gnu/2.97/specsReading specs from /opt/gcc-snap/lib/gcc-lib/i686-pc-linux-gnu/2.97/../../../libgcj.specrename spec lib to liborigrename spec startfile to startfileorigConfigured with: ../gcc/configure --prefix=/opt/gcc-snap --enable-languages=c,c++,javagcc version 2.97 20010124 (experimental)How-To-Repeat:n/a",RESOLVED          FIXED      
1895,Bryce McKinlay,Libjava: Arrays.sort doesn't work,The Arrays.sort() routines don't seem to work for morethan 12 elements.Release:gcc version 2.97 20010206 (experimental)Environment:i686-pc-linux-gnuHow-To-Repeat:Just run the program.  It dumps a random array that isn'tsorted even though Arrays.sort() was invoked.,RESOLVED          FIXED      
1999,Bryce McKinlay,java_cup VS gcj,"My question is:did gcj offer support for the java_cup package, if notis it suffisant to generate object files from java_caup.runtime.*and link them with my application which use the java_cuppackage and needed to be converted to an executable file.the command that i tried :/usr/local/bin/gcj --main=Compiler  \-shared -o ../../lib/libclassifier.so /stuff/ObjFiles/*o \TransObjFiles/*.o -o Compilerwhere /stuff/ObjFiles/*o contains object files generated from java_cup files, but after the executable file was generated, i tried to execute it but it gives me segmentation fault.thanks.Release:unknownEnvironment:linux",RESOLVED          FIXED      
2040,Bryce McKinlay,"java.util.Hashtable(int,float) is stricter than sun's version","the java.util.Hashtable(initialCapacity,loadFactor) initializer throws an IllegalArgumentException in one of the following cases:	- initialCapacity is negative	- loadFactor is negative	- loadFactor is > 1although a loadFactor > 1 doesn't make much sense, many people don't realize it and sice sun's jdk won't send you to hell if you do it, many programs (in my case i'm trying to compile kjc - it has about 10-20 of these) do it.i have no idea what the jls says about this, if anything.Release:latest 3.0 snapshotEnvironment:i686-linuxHow-To-Repeat:public class Test {	public static void main ( String args[] ) {		Hashtable h = new java.util.Hashtable(1,1.5f);		System.out.println(h);		}	}",RESOLVED          FIXED      
2237,Bryce McKinlay,serialization doesn't throw exception on failure,When reading a serialized stream we shouldthrow InvalidClassException if we don't recognizethe data.  As far as I can tell we never do this.As an example see PR 1971.(If you want to use that test case you'll have to back out the fix first.)Release:unknown,RESOLVED          FIXED      
2388,Bryce McKinlay,Cannot compile libgcj on case insensitive file system?,"After adding libffi support for win32 (using the patches posted in January) I see the following, which seems to be due to case a insensitive file system.  /usr/local/obj/gcc-m/gcc/gcj -B/usr/local/obj/gcc-m/i686-pc-cygwin/libjava/ -B/usr/local/obj/gcc-m/gcc/ --encoding=UTF-8 -C -g -classpath /usr/local/obj/gcc-m/i686-pc-cygwin/libjava:/usr/local/src/gcc-mainline/libjava -d /usr/local/obj/gcc-m/i686-pc-cygwin/libjava java/awt/Container.java/usr/local/src/gcc-mainline/libjava/java/awt/paint.java:22: Interface `java.awt.Paint' already defined in /usr/local/src/gcc-mainline/libjava/java/awt/Paint.java:22.   public interface Paint extends Transparency                    ^/usr/local/src/gcc-mainline/libjava/java/awt/list.java:13: Class `java.awt.List' already defined in /usr/local/src/gcc-mainline/libjava/java/awt/List.java:13.   public class List extends Component                ^java/awt/Container.java:1: Missing return statement.   /* Copyright (C) 1999, 2000  Free Software Foundation    ^3 errorsRelease:gcc 3.1 20010325 (experimental)Environment:NT4 SP5 / cygwin with post 1.1.8 snapshotHow-To-Repeat:Apply win32 libffil patches to mainline cvs.make bootstrap( wait :-< )",RESOLVED          FIXED      
2431,Bryce McKinlay,static initializers,"I got some bizzare NullPointer Exception, something likeMyObject o = new MyObject();o.toString();  // NULL Pointer hereRunning from the command I got the nullpointer. Runniing under a debugger I got sigsuspend in the init of the first Thread. So I gave up. Just by chance I tried removing a static initializer in MyObject, and the problem disapeared.I mean I move dstatic { someCode}  into some other init method, and now all works fineRelease:gcc version 3.0 20010320 (prerelease)Environment:Configured with: ../gcc-20010320/configure --enable-threads=posix --prefix=/tmp/local/ --enable-shared --enable-languages=c++,javaLinux inception 2.2.12-20 #1 Mon Sep 27 10:40:35 EDT 1999 i686 unknownHow-To-Repeat:I couldn't make a small case for this.I have 300 classes here, all gnu, that I could send, Makefile and everything included.",RESOLVED          FIXED      
2457,Bryce McKinlay,SimpleDateFormat doesn't work when linked static,"When I link static, the java.util.SimpleDateFormat throws a MissingResourceException. The missing bundle seems to be java.util.Calendar (?)Release:gcc version 3.0 20010320 (prerelease)Environment:linux 2.2.20",RESOLVED          FIXED      
3420,Bryce McKinlay,Bug#99307: Info received (was libgcj/3419: unresolved symbols when gcj -static is used),"Thank you for the additional information you have supplied regarding this problem report.  It has been forwarded to the developer(s) and to the developers mailing list to accompany the original report.  Your message has been sent to the package maintainer(s):  Debian GCC maintainers <debian-gcc@lists.debian.org>  If you wish to continue to submit further information on your problem, please send it to 99307@bugs.debian.org, as before.  Please do not reply to the address at the top of this message, unless you wish to report a problem with the Bug-tracking system.  Darren Benham (administrator, Debian Bugs database)Release:unknown",RESOLVED          FIXED      
3731,Bryce McKinlay,gcj should generate class init code for instanceof,gcj should generate calls to class initialization codebefore calling the `instanceof' library call.See this thread:http://gcc.gnu.org/ml/java-patches/2001-q3/msg00062.htmlIn particular Bryce's response:http://gcc.gnu.org/ml/java-patches/2001-q3/msg00078.htmlRelease:gcc 3.1,RESOLVED          FIXED      
3888,Bryce McKinlay,Combine libgcjgc.so and libzgcj.so with libgcj.so,"Currently these three dynamic libraries are installed for libjava whenever --enable-shared is used.  Alternatively they could be combined by building libgcjgc and libzgcj as convenience libraries.  The advantages are simplified deployment (one DSO instead of three) and potentially better performance on platforms that can bind symbols at link time in shared libraries (e.g. AIX).The main drawback is that we lose the capability to switch GC implementation at program load, but that never actually worked anyway.Release:3.1Environment:all",RESOLVED          FIXED      
4383,Bryce McKinlay,file: protocol not supported in URLConnection?,Using a file: URL with URL.openConnection() to create a URLConnection() throws a NullPointerException.  Similarly for any server name in an http: URL where that server name cannot be resolved to via DNS.Took me a while to realise why my code was producing an unexplained NullPointerException.Not supporting file: is ok (though would be very useful) however the NPE is confusing and should be changed to something more meaningful if possible.Release:gcj (gcc 3.0.1)Environment:linux x86How-To-Repeat:More details if required - email me.,RESOLVED          FIXED      
4690,Bryce McKinlay,Process.exitValue returns incorrect value,java::lang::ConcreteProcess::exitValue innatPosixProcess.cc returns the raw statusvalue from waitpid().  This value needsto be run through the WEXITSTATUS() macroto extract only the exit code of the process.Release:gcc-3.01,RESOLVED          FIXED      
5393,Bryce McKinlay,"Internal compiler error in fix_lexical_addr, at function.c:5530","gives internal error processing initialization block.  Problem caused by internal block:		{				instances = new Vector();				types2Check = new Hashtable();				typeList = new Vector();		}fixed by 		private Hashtable             types2Check = new Hashtable();		private Vector                typeList = new Vector();		protected Vector                instances = new Vector();Release:3.0.3 (Debian testing/unstable)Environment:System: Linux lyon 2.4.16-686 #1 Wed Nov 28 09:27:17 EST 2001 i686 unknownArchitecture: i686	host: i386-pc-linux-gnubuild: i386-pc-linux-gnutarget: i386-pc-linux-gnuconfigured with: ../src/configure -v --enable-languages=c,c++,java,f77,proto,objc --prefix=/usr --infodir=/share/info --mandir=/share/man --enable-shared --with-gnu-as --with-gnu-ld --with-system-zlib --enable-long-long --enable-nls --without-included-gettext --disable-checking --enable-threads=posix --enable-java-gc=boehm --with-cpp-install-dir=bin --enable-objc-gc i386-linux",RESOLVED          FIXED      
5668,Bryce McKinlay,finit$ not called while using a constructor,"If you have a constructor in your Java class the finit$ is not inserted after the super call.  If you omit the constructor all is fine.Release:3.1 20020211 (experimental)Environment:System: Linux escher 2.4.9-21 #1 Thu Jan 17 14:16:30 EST 2002 i686 unknownArchitecture: i686 host: i686-pc-linux-gnubuild: i686-pc-linux-gnutarget: i686-pc-linux-gnuconfigured with: ./configure --enable-threads=posix --prefix=/home/tstock/local --disable-shared --enable-languages=c++,javaHow-To-Repeat:public class Test  {  Object o = new Object();  Test ( )    {      if ( o == null )        {          System.err.println(""Test failed\n"");        }    }  static public void main ( String argv[] )    {      new Test();    }  }",RESOLVED          FIXED      
5850,Bryce McKinlay,resolving inherited member variables with same name works poorly,"In an inner class inherits a variable ad to outer class inherits onewith the same name GCJ can't pick the right one--------------------------- snip ----------------------------------------------bash-2.05a$ gcj x.java y.java y1.java x.java: In class `x$x1':x.java: In method `x$x1.getId()':x.java:6: Can't make a static reference to nonstatic variable `id' in class `x$x1'.               return new Integer(id);                                  ^1 error--------------------------- snip ----------------------------------------------Jikes/JDK resolvs this right.Release:3.2 20020305 (experimental)Environment:System: Linux cm-linux.lla.sema.se 2.4.17 #8 mån feb 18 17:25:46 CET 2002 i686 unknownArchitecture: i686	host: i686-pc-linux-gnubuild: i686-pc-linux-gnutarget: i686-pc-linux-gnuconfigured with: ./configure i686-pc-linux-gnu --prefix=/usr/local/gcc --enable-threads --enable-languages=c++,javaHow-To-Repeat:compile this 3 files, the error is in evident in file x.java--------------------------- snip (x.java) -------------------------------------public class x extends y{    private static class x1 extends y1 {        public Integer getId() {            return new Integer(id); // this.id works with JDK and gcj        }    }    public static void main(String[] args)    {	x1 t = new x1();	System.out.println(t.getId());    }}--------------------------- snip (y.java) -------------------------------------public class y{    protected final int id = 1;}--------------------------- snip (y1.java) ------------------------------------public class y1{    protected final int id = 2;}--------------------------- snip ----------------------------------------------",RESOLVED          FIXED      
5935,Bryce McKinlay,problem with anonymous inner classes,"gcj rejects legal code of anonymous inner classes with the following error messageroland@isabella:~/work> gcj -C Test.javaIntProcedure.java: In class `Test$1':IntProcedure.java: In constructor `(Test,int)':IntProcedure.java:22: Local variable `parm$key' can't be accessed from within the inner class `Test$1' unless it is declared final.   <<file too short - unexpected EOF>>   ^IntProcedure.java:1: internal error in generate_bytecode_insn - tree code not implemented: error_markRelease:3.2 20020303 (experimental)Environment:System: Linux isabella 2.4.10-4GB #1 Tue Sep 25 12:33:54 GMT 2001 i586 unknownArchitecture: i586	host: i586-pc-linux-gnubuild: i586-pc-linux-gnutarget: i586-pc-linux-gnu s=c,c++,javaHow-To-Repeat:	public interface IntProcedure {    public int apply();}import IntProcedure;public class Test {    public Object a(final int key) {	return new IntProcedure() {			public int apply() {			    return key;			}		};    }    public Object  b(final int value) {	return new IntProcedure() {			public int apply() {			    return value;			}		};    }}",RESOLVED          FIXED      
6085,Bryce McKinlay,gcj SEGVs on complicated inner class structures,"This code SEGV gcj compiler:public abstract class F{    private static final class F1    {        private abstract class F11 { }	private final class F12 extends F11 { }    }}Release:3.1 20020328 (prerelease)Environment:System: Linux trotskij 2.4.16 #8 Sun Dec 2 13:23:27 CET 2001 i586 unknownArchitecture: i586	host: i586-pc-linux-gnubuild: i586-pc-linux-gnutarget: i586-pc-linux-gnuconfigured with: ./configure --prefix=/usr/local/gcc --enable-threads --enable-languages=java --disable-static : (reconfigured) ./configure i586-pc-linux-gnu --prefix=/usr/local/gcc --enable-threads --enable-languages=java --disable-static : (reconfigured)  : (reconfigured)  : (reconfigured)How-To-Repeat:bash-2.05a$ gcj -c F.java F.java: In class `F$F1$F12':F.java: In constructor `(F$F1)':F.java:1: internal error: Segmentation faultPlease submit a full bug report,with preprocessed source if appropriate.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.",RESOLVED          FIXED      
6294,Bryce McKinlay,private inner interface is flagged illegal,private interfaces are illegal but private inner interfaces are ok. gcj doesn't seem to know that.Release:gcj3 (GCC) 3.1 20020314 (Red Hat Linux Rawhide 3.1-0.23.1)Environment:Red Hat Linux release 7.2.93 (Skipjack)How-To-Repeat:Please try to compile the attached class,RESOLVED          FIXED      
6754,Bryce McKinlay,Casting to gnu.gcj.RawData causes SEGV,"Cast a gnu.gcj.RawData to Object and then back. Whencasting back, the code will throw a NullPointerException --I assume this is because the gcj-generated code is attemptingto follow the Class pointer (which RawData does not have).Release:unknownEnvironment:GCJ (Linux and Win32 verified)How-To-Repeat:import java.io.*;import gnu.gcj.RawData;public class test {    public static native RawData foo();    public static RawData bar(Object o) {        return (RawData)o;    }    public static void main(String[] s) throws Exception {        bar(foo());    }}#include<gcj/cni.h>#include<gnu/gcj/RawData.h>#include ""test.h""gnu::gcj::RawData* test::foo() {       return (gnu::gcj::RawData*)73;}",RESOLVED          FIXED      
58436,Tobias Burnus,[4.9 Regression][OOP] ICE (segfault) in generate_finalization_wrapper for CLASS(*),"The following code leads to an ICE; while finalization is a new 4.9 feature, the code doesn't require it (and works with GCC 4.8). Hence, I labelled it as regression.class(*), allocatable :: varendCrashes the compiler with a segfault at0x572cbf generate_finalization_wrapper        ../../gcc/fortran/class.c:15180x572cbf gfc_find_derived_vtab(gfc_symbol*)        ../../gcc/fortran/class.c:23170x5757cd gfc_build_class_symbol(gfc_typespec*, symbol_attribute*, gfc_array_spec**, bool)        ../../gcc/fortran/class.c:652",RESOLVED          FIXED      
58436,Tobias Burnus,[4.9 Regression][OOP] ICE (segfault) in generate_finalization_wrapper for CLASS(*),"The following code leads to an ICE; while finalization is a new 4.9 feature, the code doesn't require it (and works with GCC 4.8). Hence, I labelled it as regression.class(*), allocatable :: varendCrashes the compiler with a segfault at0x572cbf generate_finalization_wrapper        ../../gcc/fortran/class.c:15180x572cbf gfc_find_derived_vtab(gfc_symbol*)        ../../gcc/fortran/class.c:23170x5757cd gfc_build_class_symbol(gfc_typespec*, symbol_attribute*, gfc_array_spec**, bool)        ../../gcc/fortran/class.c:652",RESOLVED          FIXED      
52024,Tobias Burnus,[OOP] GENERIC operator cannot be resolved,"Created attachment 26483 [details]Module with class operators for testThe attached example generates the compilation error:m_test.f90:10.32:      generic :: operator(==) => t_equal_i, i_equal_t                                1Error: 't_equal_i' and 'i_equal_t' for GENERIC '==' at (1) are ambiguousSubroutines t_equal_i and i_equal_t for operator(==) have different signatures.The module and est program compile and run correctly using Intel 12.1",RESOLVED          FIXED      
52024,Tobias Burnus,[OOP] GENERIC operator cannot be resolved,"Created attachment 26483 [details]Module with class operators for testThe attached example generates the compilation error:m_test.f90:10.32:      generic :: operator(==) => t_equal_i, i_equal_t                                1Error: 't_equal_i' and 'i_equal_t' for GENERIC '==' at (1) are ambiguousSubroutines t_equal_i and i_equal_t for operator(==) have different signatures.The module and est program compile and run correctly using Intel 12.1",RESOLVED          FIXED      
51995,Tobias Burnus,[OOP] Polymorphic class fails at runtime,"Created attachment 26458 [details]A factory pattern design to illustrate class pointers (polymorphic) behaviorThe attached factory pattern compiled successfully.1    PROGRAM main23     USE factory_pattern45     IMPLICIT NONE67     TYPE(CFactory) :: factory8     CLASS(Connection), POINTER :: db_connect => NULL()910    CALL factory%init(""Oracle"")11    db_connect => factory%create_connection()   !! Create Oracle DB12    CALL db_connect%description()1314    !! The same factory can be used to create different connections15    CALL factory%init(""MySQL"")                  !! Create MySQL DB1617    !! 'connect' is a 'class' pointer. So can be used for either Oracle or  MySQL18    db_connect => factory%create_connection()19    CALL db_connect%description()2021    CALL factory%finalize()        ! Destroy the object2223   END PROGRAM mainThe test driver program above produced this error when compiled with gfortran-4.7.0:test_factory.f90:12.29:  CALL db_connect%description()                             1Error: 'description' at (1) is not a member of the 'connection' structuretest_factory.f90:19.29:  CALL db_connect%description()                             1Error: 'description' at (1) is not a member of the 'connection' structureThe program (according to http://fortranwiki.org/fortran/show/Factory+Pattern) apparently run successfully with gfortran-4.6.0.Is this a bug?",RESOLVED          FIXED      
51995,Tobias Burnus,[OOP] Polymorphic class fails at runtime,"Created attachment 26458 [details]A factory pattern design to illustrate class pointers (polymorphic) behaviorThe attached factory pattern compiled successfully.1    PROGRAM main23     USE factory_pattern45     IMPLICIT NONE67     TYPE(CFactory) :: factory8     CLASS(Connection), POINTER :: db_connect => NULL()910    CALL factory%init(""Oracle"")11    db_connect => factory%create_connection()   !! Create Oracle DB12    CALL db_connect%description()1314    !! The same factory can be used to create different connections15    CALL factory%init(""MySQL"")                  !! Create MySQL DB1617    !! 'connect' is a 'class' pointer. So can be used for either Oracle or  MySQL18    db_connect => factory%create_connection()19    CALL db_connect%description()2021    CALL factory%finalize()        ! Destroy the object2223   END PROGRAM mainThe test driver program above produced this error when compiled with gfortran-4.7.0:test_factory.f90:12.29:  CALL db_connect%description()                             1Error: 'description' at (1) is not a member of the 'connection' structuretest_factory.f90:19.29:  CALL db_connect%description()                             1Error: 'description' at (1) is not a member of the 'connection' structureThe program (according to http://fortranwiki.org/fortran/show/Factory+Pattern) apparently run successfully with gfortran-4.6.0.Is this a bug?",RESOLVED          FIXED      
65586,Tobias Burnus,#NAME?,"One of the recent GCC changes causes -fopenmp-simd to reject code, which compiled before (by ignoring it):gcc -fno-openmp -fopenmp-simd foo.cfoo.c: In function ‘main’:foo.c:4:17: error: expected end of line before ‘collapse’ #pragma omp for collapse(1)                 ^void foo() { }int main() {#pragma omp for collapse(1)  for (int i = 1; i <= 151; i+=31)     foo();}",RESOLVED          FIXED      
65586,Tobias Burnus,#NAME?,"One of the recent GCC changes causes -fopenmp-simd to reject code, which compiled before (by ignoring it):gcc -fno-openmp -fopenmp-simd foo.cfoo.c: In function ‘main’:foo.c:4:17: error: expected end of line before ‘collapse’ #pragma omp for collapse(1)                 ^void foo() { }int main() {#pragma omp for collapse(1)  for (int i = 1; i <= 151; i+=31)     foo();}",RESOLVED          FIXED      
61025,burnus@net-b.de,[4.10 regression] FAIL: gfortran.dg/coarray_lib_this_image_1.f90,"FAIL: gfortran.dg/coarray_lib_this_image_1.f90  -O   scan-tree-dump-times original ""bar \\(real\\(kind=4\\)\\[2\\] \\* restrict x, void \\* restrict caf_token.., integer\\(kind=8\\) caf_offset..\\)"" 1FAIL: gfortran.dg/coarray_lib_this_image_1.f90  -O   scan-tree-dump-times original ""myucobound = \\(integer\\(kind=4\\)\\) \\(\\(\\(unsigned int\\) parm...dim\\[1\\].lbound \\+ \\(unsigned int\\) _gfortran_caf_num_images \\(0, -1\\)\\) \\+ 4294967295\\);"" 1FAIL: gfortran.dg/coarray_lib_this_image_2.f90  -O   scan-tree-dump-times original ""bar \\(struct array1_real\\(kind=4\\) & restrict x, void \\* restrict caf_token.., integer\\(kind=8\\) caf_offset..\\)"" 1FAIL: gfortran.dg/coarray_lib_this_image_2.f90  -O   scan-tree-dump-times original ""myucobound = \\(integer\\(kind=4\\)\\) \\(\\(\\(unsigned int\\) parm...dim\\[1\\].lbound \\+ \\(unsigned int\\) _gfortran_caf_num_images \\(0, -1\\)\\) \\+ 4294967295\\);"" 1FAIL: gfortran.dg/coarray_lib_this_image_2.f90  -O   scan-tree-dump-times original ""mylbound = parm...dim\\[0\\].stride >= 0 && parm...dim\\[0\\].ubound >= parm...dim\\[0\\].lbound \\|\\| parm...dim\\[0\\].stride < 0 \\? \\(integer\\(kind=4\\)\\) parm...dim\\[0\\].lbound : 1;"" 1FAIL: gfortran.dg/coarray_lib_this_image_2.f90  -O   scan-tree-dump-times original ""bar \\(&parm.[0-9]+, caf_token.[0-9]+, \\(integer\\(kind=8\\)\\) parm.[0-9]+.data - \\(integer\\(kind=8\\)\\) x\\);"" 1",RESOLVED          FIXED      
61025,burnus@net-b.de,[4.10 regression] FAIL: gfortran.dg/coarray_lib_this_image_1.f90,"FAIL: gfortran.dg/coarray_lib_this_image_1.f90  -O   scan-tree-dump-times original ""bar \\(real\\(kind=4\\)\\[2\\] \\* restrict x, void \\* restrict caf_token.., integer\\(kind=8\\) caf_offset..\\)"" 1FAIL: gfortran.dg/coarray_lib_this_image_1.f90  -O   scan-tree-dump-times original ""myucobound = \\(integer\\(kind=4\\)\\) \\(\\(\\(unsigned int\\) parm...dim\\[1\\].lbound \\+ \\(unsigned int\\) _gfortran_caf_num_images \\(0, -1\\)\\) \\+ 4294967295\\);"" 1FAIL: gfortran.dg/coarray_lib_this_image_2.f90  -O   scan-tree-dump-times original ""bar \\(struct array1_real\\(kind=4\\) & restrict x, void \\* restrict caf_token.., integer\\(kind=8\\) caf_offset..\\)"" 1FAIL: gfortran.dg/coarray_lib_this_image_2.f90  -O   scan-tree-dump-times original ""myucobound = \\(integer\\(kind=4\\)\\) \\(\\(\\(unsigned int\\) parm...dim\\[1\\].lbound \\+ \\(unsigned int\\) _gfortran_caf_num_images \\(0, -1\\)\\) \\+ 4294967295\\);"" 1FAIL: gfortran.dg/coarray_lib_this_image_2.f90  -O   scan-tree-dump-times original ""mylbound = parm...dim\\[0\\].stride >= 0 && parm...dim\\[0\\].ubound >= parm...dim\\[0\\].lbound \\|\\| parm...dim\\[0\\].stride < 0 \\? \\(integer\\(kind=4\\)\\) parm...dim\\[0\\].lbound : 1;"" 1FAIL: gfortran.dg/coarray_lib_this_image_2.f90  -O   scan-tree-dump-times original ""bar \\(&parm.[0-9]+, caf_token.[0-9]+, \\(integer\\(kind=8\\)\\) parm.[0-9]+.data - \\(integer\\(kind=8\\)\\) x\\);"" 1",RESOLVED          FIXED      
60147,Tobias Burnus,[4.9 Regression] ICE with -fdump-tree-original and NAMELIST,"program foo   implicit none   character(len=5) :: s = 'tue'   namelist /mylist/ send program% gfc4x -o z -fdump-tree-original g.f90g.f90: In function 'foo':g.f90:5:0: internal compiler error: Segmentation fault end program ^no stack trace because unwind library not availablePlease submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.(gdb) run -fdump-tree-original g.f90Starting program: /usr/home/sgk/work/4x/libexec/gcc/x86_64-unknown-freebsd11.0/4.9.0/f951 -fdump-tree-original g.f90 fooProgram received signal SIGSEGV, Segmentation fault.0x0000000000b094a2 in dump_generic_node (buffer=0x18ccc00 <buffer>,     node=0x202f1f4c8, spc=2, flags=512, is_stmt=false)    at ../../gcc4x/gcc/tree-pretty-print.c:14951495    ../../gcc4x/gcc/tree-pretty-print.c: No such file or directory.(gdb) bt#0  0x0000000000b094a2 in dump_generic_node (buffer=0x18ccc00 <buffer>,     node=0x202f1f4c8, spc=2, flags=512, is_stmt=false)    at ../../gcc4x/gcc/tree-pretty-print.c:1495#1  0x0000000000b18de5 in print_declaration (buffer=0x18ccc00 <buffer>,     t=0x202dff7e8, spc=2, flags=512)    at ../../gcc4x/gcc/tree-pretty-print.c:2759#2  0x0000000000b0a2d4 in dump_generic_node (buffer=0x18ccc00 <buffer>,     node=0x202dec510, spc=0, flags=512, is_stmt=true)    at ../../gcc4x/gcc/tree-pretty-print.c:1723#3  0x0000000000b1969e in print_generic_stmt_indented (file=<optimized out>,     t=0x202dec510, flags=512, indent=0)    at ../../gcc4x/gcc/tree-pretty-print.c:157#4  0x0000000000a845b9 in dump_function_to_file (fndecl=<optimized out>,     file=0x202bb3370, flags=512) at ../../gcc4x/gcc/tree-cfg.c:7117#5  0x0000000000a9de89 in dump_function (phase=5, fn=0x202f24b00)    at ../../gcc4x/gcc/tree-dump.c:170#6  0x0000000000607c33 in gfc_generate_function_code (ns=0x203459600)    at ../../gcc4x/gcc/fortran/trans-decl.c:5706#7  0x000000000059a0b7 in translate_all_program_units (    main_in_tu=<optimized out>, gfc_global_ns_list=0x203459600)    at ../../gcc4x/gcc/fortran/parse.c:4536#8  gfc_parse_file () at ../../gcc4x/gcc/fortran/parse.c:4733#9  0x00000000005d7366 in gfc_be_parse_file ()    at ../../gcc4x/gcc/fortran/f95-lang.c:188#10 0x0000000000a4f136 in compile_file () at ../../gcc4x/gcc/toplev.c:548#11 0x0000000000a4f9f3 in do_compile () at ../../gcc4x/gcc/toplev.c:1914#12 0x0000000000a50562 in toplev_main (argc=3, argv=0x7fffffffd4c8)    at ../../gcc4x/gcc/toplev.c:1990#13 0x0000000000528daf in _start ()",RESOLVED          FIXED      
49397,Tobias Burnus,[4.7/4.8/4.9 Regression] [F03] ICE with proc pointer assignment,"Let's claim the following code is valid.Cf. Intepretation Request J3/11-198 at http://j3-fortran.org/doc/meeting/195/11-198.txtWithout the ""print *, f()"" line, it is rejected with:      p => f                           ! (1)           1Error: Invalid procedure pointer assignment at (1)But with the line, one gets:test.f90: In function 's':test.f90:2:0: internal compiler error: in build_function_decl, at fortran/trans-decl.c:1778  Program m5    Print *,f()!    Call s  Contains    Subroutine s      Procedure(Real),Pointer :: p!      Print *,g()      p => f                           ! (1)!      Print *,p()!     p => g                           ! (2)!     Print *,p()    End Subroutine  End Program  Function f()    f = 1  End Function  Function g()    g = 2  End Function",RESOLVED          FIXED      
49397,Tobias Burnus,[4.7/4.8/4.9 Regression] [F03] ICE with proc pointer assignment,"Let's claim the following code is valid.Cf. Intepretation Request J3/11-198 at http://j3-fortran.org/doc/meeting/195/11-198.txtWithout the ""print *, f()"" line, it is rejected with:      p => f                           ! (1)           1Error: Invalid procedure pointer assignment at (1)But with the line, one gets:test.f90: In function 's':test.f90:2:0: internal compiler error: in build_function_decl, at fortran/trans-decl.c:1778  Program m5    Print *,f()!    Call s  Contains    Subroutine s      Procedure(Real),Pointer :: p!      Print *,g()      p => f                           ! (1)!      Print *,p()!     p => g                           ! (2)!     Print *,p()    End Subroutine  End Program  Function f()    f = 1  End Function  Function g()    g = 2  End Function",RESOLVED          FIXED      
59440,Tobias Burnus,"[4.9 Regression] ICE in force_decl_die, at dwarf2out.c:20111 with -g","Hi,with 4.9.0 rev.205822 the following code crashes with:gfcbug126.f90:2:0: internal compiler error: in force_decl_die, at dwarf2out.c:20111   use mo_t_datum, only: qbit_conv ^0x83eae74 force_decl_die        ../../trunk/gcc/dwarf2out.c:201110x83eb3be gen_namelist_decl        ../../trunk/gcc/dwarf2out.c:206320x83e9087 gen_decl_die        ../../trunk/gcc/dwarf2out.c:204350x86d0e80 emit_debug_global_declarations(tree_node**, int)        ../../trunk/gcc/toplev.c:5320x858faee write_global_declarations()        ../../trunk/gcc/langhooks.c:327% cat mo_t_datum.f90module mo_t_datum  implicit none  integer :: qbit_conv = 0end module mo_t_datum% cat gfcbug126.f90MODULE gfcbug126  use mo_t_datum, only: qbit_conv  implicit none  namelist /OBSERVATIONS/ qbit_convend module gfcbug126Command line:% /opt/gcc/4.9/bin/gfortran  -c mo_t_datum.f90 gfcbug126.f90 -gIt is important that the code is split into 2 files, otherwise there isno crash.",RESOLVED          FIXED      
55469,Tobias Burnus,memory leak on read with istat.ne.0,"The following testcase leads to memory leaks with gfortran 4.5/4.6/4.7/4.8 (as found by valgrind) 4.1 seems not to leak (but has a couple of warnings).REAL :: zINTEGER :: istatCHARACTER(LEN=3) :: tt=""NVE""READ (UNIT=t,FMT=*,IOSTAT=istat) zENDnote that istat.NE.0 in this case.==37422== 300 bytes in 1 blocks are definitely lost in loss record 1 of 1==37422==    at 0x4A057F4: calloc (vg_replace_malloc.c:593)==37422==    by 0x4C298FF: _gfortrani_xcalloc (memory.c:56)==37422==    by 0x4CE2A82: l_push_char.isra.2 (list_read.c:641)==37422==    by 0x4CE3223: read_real (list_read.c:1634)==37422==    by 0x4CE504E: _gfortrani_list_formatted_read (list_read.c:1895)",RESOLVED          FIXED      
55469,Tobias Burnus,memory leak on read with istat.ne.0,"The following testcase leads to memory leaks with gfortran 4.5/4.6/4.7/4.8 (as found by valgrind) 4.1 seems not to leak (but has a couple of warnings).REAL :: zINTEGER :: istatCHARACTER(LEN=3) :: tt=""NVE""READ (UNIT=t,FMT=*,IOSTAT=istat) zENDnote that istat.NE.0 in this case.==37422== 300 bytes in 1 blocks are definitely lost in loss record 1 of 1==37422==    at 0x4A057F4: calloc (vg_replace_malloc.c:593)==37422==    by 0x4C298FF: _gfortrani_xcalloc (memory.c:56)==37422==    by 0x4CE2A82: l_push_char.isra.2 (list_read.c:641)==37422==    by 0x4CE3223: read_real (list_read.c:1634)==37422==    by 0x4CE504E: _gfortrani_list_formatted_read (list_read.c:1895)",RESOLVED          FIXED      
58593,Tobias Burnus,"[4.9 Regression] internal compiler error: in gfc_conv_string_tmp, at fortran/trans-expr.c:2360","Most likely caused by the fix for PR fortran/58579http://gcc.gnu.org/viewcvs?rev=203088&root=gcc&view=rev> cat bug.f90    CHARACTER(len=20)                        :: tmpStr    INTEGER :: output_unit=6       WRITE (UNIT=output_unit,FMT=""(T2,A,T61,A20)"")&         ""DFT| Self-interaction correction (SIC)"",ADJUSTR(TRIM(tmpstr))    ENDbug.f90: In function ‘MAIN__’:bug.f90:4:0: internal compiler error: in gfc_conv_string_tmp, at fortran/trans-expr.c:2360          ""DFT| Self-interaction correction (SIC)"",ADJUSTR(TRIM(tmpstr)) ^0x6224dd gfc_conv_string_tmp(gfc_se*, tree_node*, tree_node*)        ../../gcc/gcc/fortran/trans-expr.c:23600x634984 gfc_conv_intrinsic_adjust        ../../gcc/gcc/fortran/trans-intrinsic.c:53280x64397a gfc_conv_intrinsic_function(gfc_se*, gfc_expr*)        ../../gcc/gcc/fortran/trans-intrinsic.c:66440x631642 gfc_conv_function_expr        ../../gcc/gcc/fortran/trans-expr.c:55470x626e0f gfc_conv_expr_reference(gfc_se*, gfc_expr*)        ../../gcc/gcc/fortran/trans-expr.c:63590x64a871 gfc_trans_transfer(gfc_code*)        ../../gcc/gcc/fortran/trans-io.c:23020x5f4787 trans_code        ../../gcc/gcc/fortran/trans.c:18250x648278 build_dt        ../../gcc/gcc/fortran/trans-io.c:18350x5f47a7 trans_code        ../../gcc/gcc/fortran/trans.c:17970x61e115 gfc_generate_function_code(gfc_namespace*)        ../../gcc/gcc/fortran/trans-decl.c:55280x5b3256 translate_all_program_units        ../../gcc/gcc/fortran/parse.c:45090x5b3256 gfc_parse_file()        ../../gcc/gcc/fortran/parse.c:47060x5f0445 gfc_be_parse_file",RESOLVED          FIXED      
58593,Tobias Burnus,"[4.9 Regression] internal compiler error: in gfc_conv_string_tmp, at fortran/trans-expr.c:2360","Most likely caused by the fix for PR fortran/58579http://gcc.gnu.org/viewcvs?rev=203088&root=gcc&view=rev> cat bug.f90    CHARACTER(len=20)                        :: tmpStr    INTEGER :: output_unit=6       WRITE (UNIT=output_unit,FMT=""(T2,A,T61,A20)"")&         ""DFT| Self-interaction correction (SIC)"",ADJUSTR(TRIM(tmpstr))    ENDbug.f90: In function ‘MAIN__’:bug.f90:4:0: internal compiler error: in gfc_conv_string_tmp, at fortran/trans-expr.c:2360          ""DFT| Self-interaction correction (SIC)"",ADJUSTR(TRIM(tmpstr)) ^0x6224dd gfc_conv_string_tmp(gfc_se*, tree_node*, tree_node*)        ../../gcc/gcc/fortran/trans-expr.c:23600x634984 gfc_conv_intrinsic_adjust        ../../gcc/gcc/fortran/trans-intrinsic.c:53280x64397a gfc_conv_intrinsic_function(gfc_se*, gfc_expr*)        ../../gcc/gcc/fortran/trans-intrinsic.c:66440x631642 gfc_conv_function_expr        ../../gcc/gcc/fortran/trans-expr.c:55470x626e0f gfc_conv_expr_reference(gfc_se*, gfc_expr*)        ../../gcc/gcc/fortran/trans-expr.c:63590x64a871 gfc_trans_transfer(gfc_code*)        ../../gcc/gcc/fortran/trans-io.c:23020x5f4787 trans_code        ../../gcc/gcc/fortran/trans.c:18250x648278 build_dt        ../../gcc/gcc/fortran/trans-io.c:18350x5f47a7 trans_code        ../../gcc/gcc/fortran/trans.c:17970x61e115 gfc_generate_function_code(gfc_namespace*)        ../../gcc/gcc/fortran/trans-decl.c:55280x5b3256 translate_all_program_units        ../../gcc/gcc/fortran/parse.c:45090x5b3256 gfc_parse_file()        ../../gcc/gcc/fortran/parse.c:47060x5f0445 gfc_be_parse_file",RESOLVED          FIXED      
58579,Tobias Burnus,Memory allocation fails when calling character-valued function,"This is a problem I found with gfortran 4.6.3, 4.7.3, 4.8.0 on$ uname -aLinux 3.2.0-29-generic #46-Ubuntu SMP Fri Jul 27 17:03:23 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux$ gfortran -vUsing built-in specs.COLLECT_GCC=/usr/bin/gfortran-4.8COLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-linux-gnu/4.8/lto-wrapperTarget: x86_64-linux-gnuConfigured with: ../src/configure -v --with-pkgversion='Ubuntu/Linaro 4.8.0-3ubuntu3~12.04' --with-bugurl=file:///usr/share/doc/gcc-4.8/README.Bugs --enable-languages=c,c++,go,fortran,objc,obj-c++ --prefix=/usr --program-suffix=-4.8 --enable-shared --enable-linker-build-id --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.8 --libdir=/usr/lib --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --enable-gnu-unique-object --enable-plugin --with-system-zlib --enable-objc-gc --enable-multiarch --disable-werror --with-arch-32=i686 --with-abi=m64 --with-multilib-list=m32,m64 --with-tune=generic --enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnuThread model: posixgcc version 4.8.0 (Ubuntu/Linaro 4.8.0-3ubuntu3~12.04)and gfortran 4.7.3 on$ uname -aDarwin 11.4.2 Darwin Kernel Version 11.4.2: Thu Aug 23 16:25:48 PDT 2012; root:xnu-1699.32.7~1/RELEASE_X86_64 x86_64$ gfortran -vUsing built-in specs.COLLECT_GCC=gfortranCOLLECT_LTO_WRAPPER=/opt/local/libexec/gcc/x86_64-apple-darwin11/4.7.3/lto-wrapperTarget: x86_64-apple-darwin11Configured with: ../gcc-4.7.3/configure --prefix=/opt/local --build=x86_64-apple-darwin11 --enable-languages=c,c++,objc,obj-c++,lto,fortran,java --libdir=/opt/local/lib/gcc47 --includedir=/opt/local/include/gcc47 --infodir=/opt/local/share/info --mandir=/opt/local/share/man --datarootdir=/opt/local/share/gcc-4.7 --with-libiconv-prefix=/opt/local --with-local-prefix=/opt/local --with-system-zlib --disable-nls --program-suffix=-mp-4.7 --with-gxx-include-dir=/opt/local/include/gcc47/c++/ --with-gmp=/opt/local --with-mpfr=/opt/local --with-mpc=/opt/local --with-ppl=/opt/local --with-cloog=/opt/local --enable-cloog-backend=isl --disable-cloog-version-check --enable-stage1-checking --disable-multilib --enable-lto --enable-libstdcxx-time --with-as=/opt/local/bin/as --with-ld=/opt/local/bin/ld --with-ar=/opt/local/bin/ar --with-bugurl=https://trac.macports.org/newticket --disable-ppl-version-check --with-pkgversion='MacPorts gcc47 4.7.3_1'Thread model: posixgcc version 4.7.3 (MacPorts gcc47 4.7.3_1)I don't think this is a simple stack issue:$ ulimit -acore file size          (blocks, -c) unlimiteddata seg size           (kbytes, -d) unlimitedscheduling priority             (-e) 0file size               (blocks, -f) unlimitedpending signals                 (-i) 128297max locked memory       (kbytes, -l) 64max memory size         (kbytes, -m) unlimitedopen files                      (-n) 1024pipe size            (512 bytes, -p) 8POSIX message queues     (bytes, -q) 819200real-time priority              (-r) 0stack size              (kbytes, -s) unlimitedcpu time               (seconds, -t) unlimitedmax user processes              (-u) 128297virtual memory          (kbytes, -v) unlimitedfile locks                      (-x) unlimitedThe following test case runs fine$ echo ""33554431"" | ./a.outbut this one fails$ echo ""33554432"" | ./a.outOperating system error: Cannot allocate memoryMemory allocation failedcompilation:$ gfortran -g -Wall -Wextra -fno-strict-aliasing -fwrapv -fcheck=all -fdump-core -fbacktrace test_char_array.f95(without the ""-f"" options the code simply returns a segmentation fault.)code:$ cat test_char_array.f95program test_char   implicit none   integer :: i   read*, i   print*, trim(test(i))   contains      function test(i)         integer, intent(in) :: i         character(len=i) :: test         test(1:1) = ""A""      endfunction testendprogram test_charMany thanks in advance.Albert",RESOLVED          FIXED      
58579,Tobias Burnus,Memory allocation fails when calling character-valued function,"This is a problem I found with gfortran 4.6.3, 4.7.3, 4.8.0 on$ uname -aLinux 3.2.0-29-generic #46-Ubuntu SMP Fri Jul 27 17:03:23 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux$ gfortran -vUsing built-in specs.COLLECT_GCC=/usr/bin/gfortran-4.8COLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-linux-gnu/4.8/lto-wrapperTarget: x86_64-linux-gnuConfigured with: ../src/configure -v --with-pkgversion='Ubuntu/Linaro 4.8.0-3ubuntu3~12.04' --with-bugurl=file:///usr/share/doc/gcc-4.8/README.Bugs --enable-languages=c,c++,go,fortran,objc,obj-c++ --prefix=/usr --program-suffix=-4.8 --enable-shared --enable-linker-build-id --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.8 --libdir=/usr/lib --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --enable-gnu-unique-object --enable-plugin --with-system-zlib --enable-objc-gc --enable-multiarch --disable-werror --with-arch-32=i686 --with-abi=m64 --with-multilib-list=m32,m64 --with-tune=generic --enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnuThread model: posixgcc version 4.8.0 (Ubuntu/Linaro 4.8.0-3ubuntu3~12.04)and gfortran 4.7.3 on$ uname -aDarwin 11.4.2 Darwin Kernel Version 11.4.2: Thu Aug 23 16:25:48 PDT 2012; root:xnu-1699.32.7~1/RELEASE_X86_64 x86_64$ gfortran -vUsing built-in specs.COLLECT_GCC=gfortranCOLLECT_LTO_WRAPPER=/opt/local/libexec/gcc/x86_64-apple-darwin11/4.7.3/lto-wrapperTarget: x86_64-apple-darwin11Configured with: ../gcc-4.7.3/configure --prefix=/opt/local --build=x86_64-apple-darwin11 --enable-languages=c,c++,objc,obj-c++,lto,fortran,java --libdir=/opt/local/lib/gcc47 --includedir=/opt/local/include/gcc47 --infodir=/opt/local/share/info --mandir=/opt/local/share/man --datarootdir=/opt/local/share/gcc-4.7 --with-libiconv-prefix=/opt/local --with-local-prefix=/opt/local --with-system-zlib --disable-nls --program-suffix=-mp-4.7 --with-gxx-include-dir=/opt/local/include/gcc47/c++/ --with-gmp=/opt/local --with-mpfr=/opt/local --with-mpc=/opt/local --with-ppl=/opt/local --with-cloog=/opt/local --enable-cloog-backend=isl --disable-cloog-version-check --enable-stage1-checking --disable-multilib --enable-lto --enable-libstdcxx-time --with-as=/opt/local/bin/as --with-ld=/opt/local/bin/ld --with-ar=/opt/local/bin/ar --with-bugurl=https://trac.macports.org/newticket --disable-ppl-version-check --with-pkgversion='MacPorts gcc47 4.7.3_1'Thread model: posixgcc version 4.7.3 (MacPorts gcc47 4.7.3_1)I don't think this is a simple stack issue:$ ulimit -acore file size          (blocks, -c) unlimiteddata seg size           (kbytes, -d) unlimitedscheduling priority             (-e) 0file size               (blocks, -f) unlimitedpending signals                 (-i) 128297max locked memory       (kbytes, -l) 64max memory size         (kbytes, -m) unlimitedopen files                      (-n) 1024pipe size            (512 bytes, -p) 8POSIX message queues     (bytes, -q) 819200real-time priority              (-r) 0stack size              (kbytes, -s) unlimitedcpu time               (seconds, -t) unlimitedmax user processes              (-u) 128297virtual memory          (kbytes, -v) unlimitedfile locks                      (-x) unlimitedThe following test case runs fine$ echo ""33554431"" | ./a.outbut this one fails$ echo ""33554432"" | ./a.outOperating system error: Cannot allocate memoryMemory allocation failedcompilation:$ gfortran -g -Wall -Wextra -fno-strict-aliasing -fwrapv -fcheck=all -fdump-core -fbacktrace test_char_array.f95(without the ""-f"" options the code simply returns a segmentation fault.)code:$ cat test_char_array.f95program test_char   implicit none   integer :: i   read*, i   print*, trim(test(i))   contains      function test(i)         integer, intent(in) :: i         character(len=i) :: test         test(1:1) = ""A""      endfunction testendprogram test_charMany thanks in advance.Albert",RESOLVED          FIXED      
57458,Tobias Burnus,TS29113: Wrongly rejects noncontiguous argument to assumed-rank when both are volatile/asynchronous,"Fortran 2008 has:'C1239 (R1223) If an actual argument is a nonpointer array that has the ASYNCHRONOUS or VOLATILE attribute but is not simply contiguous (6.5.4), and the corresponding dummy argument has either the VOLATILE or ASYNCHRONOUS attribute, that dummy argument shall be an assumed-shape array that does not have the CONTIGUOUS attribute.''C1240 (R1223) If an actual argument is an array pointer that has the ASYNCHRONOUS or VOLATILE attribute but does not have the CONTIGUOUS attribute, and the corresponding dummy argument has either the VOLATILE or ASYNCHRONOUS attribute, that dummy argument shall be an array pointer or an assumed-shape array that does not have the CONTIGUOUS attribute.'TS29113 changes that as follows (pp.36f):'{In 12.5.2.4 Ordinary dummy variables, paragraph 18, constraint C1239}Change ""or an assumed-shape ... attribute"" to "", an assumed-shape array without the CONTIGUOUS attribute, or an assumed-rank array without the CONTIGUOUS attribute"".''{In 12.5.2.4 Ordinary dummy variables, paragraph 18, constraint C1240}Change ""or an assumed-shape ... attribute"" to "", an assumed-shape array without the CONTIGUOUS attribute, or an assumed-rank array without the CONTIGUOUS attribute"".The edit has not yet been implemented as the following bogus error message shows:  call foo2(i)            1Error: Dummy argument 'x' has to be a pointer or assumed-shape array without CONTIGUOUS attribute - as actual argument at (1) is not simply contiguous and both are ASYNCHRONOUS or VOLATILE  integer, pointer, asynchronous :: i(:)  call foo(i)contains  subroutine foo(x)    type(*), dimension(:), asynchronous :: x  end subroutine foo  subroutine foo2(x)    type(*), dimension(..), asynchronous :: x  end subroutine foo2end",RESOLVED          FIXED      
57458,Tobias Burnus,TS29113: Wrongly rejects noncontiguous argument to assumed-rank when both are volatile/asynchronous,"Fortran 2008 has:'C1239 (R1223) If an actual argument is a nonpointer array that has the ASYNCHRONOUS or VOLATILE attribute but is not simply contiguous (6.5.4), and the corresponding dummy argument has either the VOLATILE or ASYNCHRONOUS attribute, that dummy argument shall be an assumed-shape array that does not have the CONTIGUOUS attribute.''C1240 (R1223) If an actual argument is an array pointer that has the ASYNCHRONOUS or VOLATILE attribute but does not have the CONTIGUOUS attribute, and the corresponding dummy argument has either the VOLATILE or ASYNCHRONOUS attribute, that dummy argument shall be an array pointer or an assumed-shape array that does not have the CONTIGUOUS attribute.'TS29113 changes that as follows (pp.36f):'{In 12.5.2.4 Ordinary dummy variables, paragraph 18, constraint C1239}Change ""or an assumed-shape ... attribute"" to "", an assumed-shape array without the CONTIGUOUS attribute, or an assumed-rank array without the CONTIGUOUS attribute"".''{In 12.5.2.4 Ordinary dummy variables, paragraph 18, constraint C1240}Change ""or an assumed-shape ... attribute"" to "", an assumed-shape array without the CONTIGUOUS attribute, or an assumed-rank array without the CONTIGUOUS attribute"".The edit has not yet been implemented as the following bogus error message shows:  call foo2(i)            1Error: Dummy argument 'x' has to be a pointer or assumed-shape array without CONTIGUOUS attribute - as actual argument at (1) is not simply contiguous and both are ASYNCHRONOUS or VOLATILE  integer, pointer, asynchronous :: i(:)  call foo(i)contains  subroutine foo(x)    type(*), dimension(:), asynchronous :: x  end subroutine foo  subroutine foo2(x)    type(*), dimension(..), asynchronous :: x  end subroutine foo2end",RESOLVED          FIXED      
56737,Tobias Burnus,[4.6/4.7/4.8/4.9 Regression] Wrong I/O result with format cache for Hollerith strings,"Created attachment 29728 [details]Code to reproduce bugWith the code attached I get junk output in a real program. Simplified version below only shows errors under valgrind. Easy workaround by transforming code to modern Fortran that doesn't use the h edit descriptor.Yes, the byzantine subroutine hierarchy and unuser arguments appear to be required to reproduce the bug.Expected test-code behaviour: Should produce valgrind-clean code. Shuold perhaps warn that 'h' edit descriptor is obsolescent/deleted (in F95+).Expected real-code behaviour: Shouldn't produce garbage to output.Thanks,Jonathan.$gfortran -vUsing built-in specs.COLLECT_GCC=gfortranCOLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-linux-gnu/4.7/lto-wrapperTarget: x86_64-linux-gnuConfigured with: ../src/configure -v --with-pkgversion='Ubuntu/Linaro 4.7.2-4ubuntu1' --with-bugurl=file:///usr/share/doc/gcc-4.7/README.Bugs --enable-languages=c,c++,go,fortran,objc,obj-c++ --prefix=/usr --program-suffix=-4.7 --enable-shared --enable-linker-build-id --with-system-zlib --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.7 --libdir=/usr/lib --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --enable-gnu-unique-object --enable-plugin --enable-objc-gc --disable-werror --with-arch-32=i686 --with-tune=generic --enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnuThread model: posixgcc version 4.7.2 (Ubuntu/Linaro 4.7.2-4ubuntu1)$gfortran -g -o gfort_bug gfort_bug.f90 && valgrind ./gfort_bug==8437== Memcheck, a memory error detector==8437== Copyright (C) 2002-2011, and GNU GPL'd, by Julian Seward et al.==8437== Using Valgrind-3.7.0 and LibVEX; rerun with -h for copyright info==8437== Command: ./gfort_bug==8437==  fmt = (   3(1H ),6h===== ,a  12,i4,6h =====)                                           title1= end of level  level =            1   ===== end of level   1 ===== fmt = (   3(1H ),6h===== ,a  12,i4,6h =====)                                           title1= end of level  level =            1==8437== Conditional jump or move depends on uninitialised value(s)==8437==    at 0x4F0BB41: ??? (in /usr/lib/x86_64-linux-gnu/libgfortran.so.3.0.0)==8437==    by 0x400B51: __hsl_mc73_single_MOD_level_print (gfort_bug.f90:56)==8437==    by 0x400B93: __hsl_mc73_single_MOD_multilevel_eig (gfort_bug.f90:40)==8437==    by 0x400BB9: __hsl_mc73_single_MOD_fiedler_graph (gfort_bug.f90:33)==8437==    by 0x400BF9: __hsl_mc73_single_MOD_mc73_fiedler (gfort_bug.f90:17)==8437==    by 0x400C27: MAIN__ (gfort_bug.f90:71)==8437==    by 0x400C5D: main (gfort_bug.f90:62)==8437== ==8437== Conditional jump or move depends on uninitialised value(s)==8437==    at 0x4F0BB1B: ??? (in /usr/lib/x86_64-linux-gnu/libgfortran.so.3.0.0)==8437==    by 0x400B51: __hsl_mc73_single_MOD_level_print (gfort_bug.f90:56)==8437==    by 0x400B93: __hsl_mc73_single_MOD_multilevel_eig (gfort_bug.f90:40)==8437==    by 0x400BB9: __hsl_mc73_single_MOD_fiedler_graph (gfort_bug.f90:33)==8437==    by 0x400BF9: __hsl_mc73_single_MOD_mc73_fiedler (gfort_bug.f90:17)==8437==    by 0x400C27: MAIN__ (gfort_bug.f90:71)==8437==    by 0x400C5D: main (gfort_bug.f90:62)==8437== ==8437== Syscall param write(buf) points to uninitialised byte(s)==8437==    at 0x522C900: __write_nocancel (syscall-template.S:82)==8437==    by 0x4F0ECEC: ??? (in /usr/lib/x86_64-linux-gnu/libgfortran.so.3.0.0)==8437==    by 0x4F1540E: ??? (in /usr/lib/x86_64-linux-gnu/libgfortran.so.3.0.0)==8437==    by 0x4F0A726: ??? (in /usr/lib/x86_64-linux-gnu/libgfortran.so.3.0.0)==8437==    by 0x4F0B008: _gfortran_st_write_done (in /usr/lib/x86_64-linux-gnu/libgfortran.so.3.0.0)==8437==    by 0x400B60: __hsl_mc73_single_MOD_level_print (gfort_bug.f90:56)==8437==    by 0x400B93: __hsl_mc73_single_MOD_multilevel_eig (gfort_bug.f90:40)==8437==    by 0x400BB9: __hsl_mc73_single_MOD_fiedler_graph (gfort_bug.f90:33)==8437==    by 0x400BF9: __hsl_mc73_single_MOD_mc73_fiedler (gfort_bug.f90:17)==8437==    by 0x400C27: MAIN__ (gfort_bug.f90:71)==8437==    by 0x400C5D: main (gfort_bug.f90:62)==8437==  Address 0x5c4fc3a is 26 bytes inside a block of size 512 alloc'd==8437==    at 0x4C2B3F8: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)==8437==    by 0x4E4D488: ??? (in /usr/lib/x86_64-linux-gnu/libgfortran.so.3.0.0)==8437==    by 0x4F1529A: ??? (in /usr/lib/x86_64-linux-gnu/libgfortran.so.3.0.0)==8437==    by 0x4F0E421: ??? (in /usr/lib/x86_64-linux-gnu/libgfortran.so.3.0.0)==8437==    by 0x4E4AB67: ??? (in /usr/lib/x86_64-linux-gnu/libgfortran.so.3.0.0)==8437==    by 0x400F315: call_init.part.0 (dl-init.c:85)==8437==    by 0x400F3EE: _dl_init (dl-init.c:52)==8437==    by 0x40016F9: ??? (in /lib/x86_64-linux-gnu/ld-2.15.so)==8437==          end of level   1 ====)==8437== ==8437== HEAP SUMMARY:==8437==     in use at exit: 0 bytes in 0 blocks==8437==   total heap usage: 29 allocs, 29 frees, 24,709 bytes allocated==8437== ==8437== All heap blocks were freed -- no leaks are possible==8437== ==8437== For counts of detected and suppressed errors, rerun with: -v==8437== Use --track-origins=yes to see where uninitialised values come from==8437== ERROR SUMMARY: 11 errors from 3 contexts (suppressed: 2 from 2)",RESOLVED          FIXED      
56737,Tobias Burnus,[4.6/4.7/4.8/4.9 Regression] Wrong I/O result with format cache for Hollerith strings,"Created attachment 29728 [details]Code to reproduce bugWith the code attached I get junk output in a real program. Simplified version below only shows errors under valgrind. Easy workaround by transforming code to modern Fortran that doesn't use the h edit descriptor.Yes, the byzantine subroutine hierarchy and unuser arguments appear to be required to reproduce the bug.Expected test-code behaviour: Should produce valgrind-clean code. Shuold perhaps warn that 'h' edit descriptor is obsolescent/deleted (in F95+).Expected real-code behaviour: Shouldn't produce garbage to output.Thanks,Jonathan.$gfortran -vUsing built-in specs.COLLECT_GCC=gfortranCOLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-linux-gnu/4.7/lto-wrapperTarget: x86_64-linux-gnuConfigured with: ../src/configure -v --with-pkgversion='Ubuntu/Linaro 4.7.2-4ubuntu1' --with-bugurl=file:///usr/share/doc/gcc-4.7/README.Bugs --enable-languages=c,c++,go,fortran,objc,obj-c++ --prefix=/usr --program-suffix=-4.7 --enable-shared --enable-linker-build-id --with-system-zlib --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.7 --libdir=/usr/lib --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --enable-gnu-unique-object --enable-plugin --enable-objc-gc --disable-werror --with-arch-32=i686 --with-tune=generic --enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnuThread model: posixgcc version 4.7.2 (Ubuntu/Linaro 4.7.2-4ubuntu1)$gfortran -g -o gfort_bug gfort_bug.f90 && valgrind ./gfort_bug==8437== Memcheck, a memory error detector==8437== Copyright (C) 2002-2011, and GNU GPL'd, by Julian Seward et al.==8437== Using Valgrind-3.7.0 and LibVEX; rerun with -h for copyright info==8437== Command: ./gfort_bug==8437==  fmt = (   3(1H ),6h===== ,a  12,i4,6h =====)                                           title1= end of level  level =            1   ===== end of level   1 ===== fmt = (   3(1H ),6h===== ,a  12,i4,6h =====)                                           title1= end of level  level =            1==8437== Conditional jump or move depends on uninitialised value(s)==8437==    at 0x4F0BB41: ??? (in /usr/lib/x86_64-linux-gnu/libgfortran.so.3.0.0)==8437==    by 0x400B51: __hsl_mc73_single_MOD_level_print (gfort_bug.f90:56)==8437==    by 0x400B93: __hsl_mc73_single_MOD_multilevel_eig (gfort_bug.f90:40)==8437==    by 0x400BB9: __hsl_mc73_single_MOD_fiedler_graph (gfort_bug.f90:33)==8437==    by 0x400BF9: __hsl_mc73_single_MOD_mc73_fiedler (gfort_bug.f90:17)==8437==    by 0x400C27: MAIN__ (gfort_bug.f90:71)==8437==    by 0x400C5D: main (gfort_bug.f90:62)==8437== ==8437== Conditional jump or move depends on uninitialised value(s)==8437==    at 0x4F0BB1B: ??? (in /usr/lib/x86_64-linux-gnu/libgfortran.so.3.0.0)==8437==    by 0x400B51: __hsl_mc73_single_MOD_level_print (gfort_bug.f90:56)==8437==    by 0x400B93: __hsl_mc73_single_MOD_multilevel_eig (gfort_bug.f90:40)==8437==    by 0x400BB9: __hsl_mc73_single_MOD_fiedler_graph (gfort_bug.f90:33)==8437==    by 0x400BF9: __hsl_mc73_single_MOD_mc73_fiedler (gfort_bug.f90:17)==8437==    by 0x400C27: MAIN__ (gfort_bug.f90:71)==8437==    by 0x400C5D: main (gfort_bug.f90:62)==8437== ==8437== Syscall param write(buf) points to uninitialised byte(s)==8437==    at 0x522C900: __write_nocancel (syscall-template.S:82)==8437==    by 0x4F0ECEC: ??? (in /usr/lib/x86_64-linux-gnu/libgfortran.so.3.0.0)==8437==    by 0x4F1540E: ??? (in /usr/lib/x86_64-linux-gnu/libgfortran.so.3.0.0)==8437==    by 0x4F0A726: ??? (in /usr/lib/x86_64-linux-gnu/libgfortran.so.3.0.0)==8437==    by 0x4F0B008: _gfortran_st_write_done (in /usr/lib/x86_64-linux-gnu/libgfortran.so.3.0.0)==8437==    by 0x400B60: __hsl_mc73_single_MOD_level_print (gfort_bug.f90:56)==8437==    by 0x400B93: __hsl_mc73_single_MOD_multilevel_eig (gfort_bug.f90:40)==8437==    by 0x400BB9: __hsl_mc73_single_MOD_fiedler_graph (gfort_bug.f90:33)==8437==    by 0x400BF9: __hsl_mc73_single_MOD_mc73_fiedler (gfort_bug.f90:17)==8437==    by 0x400C27: MAIN__ (gfort_bug.f90:71)==8437==    by 0x400C5D: main (gfort_bug.f90:62)==8437==  Address 0x5c4fc3a is 26 bytes inside a block of size 512 alloc'd==8437==    at 0x4C2B3F8: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)==8437==    by 0x4E4D488: ??? (in /usr/lib/x86_64-linux-gnu/libgfortran.so.3.0.0)==8437==    by 0x4F1529A: ??? (in /usr/lib/x86_64-linux-gnu/libgfortran.so.3.0.0)==8437==    by 0x4F0E421: ??? (in /usr/lib/x86_64-linux-gnu/libgfortran.so.3.0.0)==8437==    by 0x4E4AB67: ??? (in /usr/lib/x86_64-linux-gnu/libgfortran.so.3.0.0)==8437==    by 0x400F315: call_init.part.0 (dl-init.c:85)==8437==    by 0x400F3EE: _dl_init (dl-init.c:52)==8437==    by 0x40016F9: ??? (in /lib/x86_64-linux-gnu/ld-2.15.so)==8437==          end of level   1 ====)==8437== ==8437== HEAP SUMMARY:==8437==     in use at exit: 0 bytes in 0 blocks==8437==   total heap usage: 29 allocs, 29 frees, 24,709 bytes allocated==8437== ==8437== All heap blocks were freed -- no leaks are possible==8437== ==8437== For counts of detected and suppressed errors, rerun with: -v==8437== Use --track-origins=yes to see where uninitialised values come from==8437== ERROR SUMMARY: 11 errors from 3 contexts (suppressed: 2 from 2)",RESOLVED          FIXED      
56735,Tobias Burnus,[4.6/4.7/4.8/4.9 Regression] Namelist Read Error with question marks,"Hi,This is my first ever bug report so apologies if i miss some vital piece of information. I have some legacy code which compiles and runs with versions of gfortran up to 4.5. However after this the code compiles and runs but the namelist is not read correctly. There is no IO errors but non of the variables are set to their respective values. I have managed to narrow this down to the fact that the legacy namelist has question marks in the namelist file outside of any data block. Below is a very simple code and namelist which shows this. If you remove the question mark from the name list the values are set, otherwise they are not.-test.f        PROGRAM TEST        INTEGER int1,int2,int3        NAMELIST /temp/ int1,int2,int3        OPEN (53,FILE='test.nam',STATUS='OLD', IOSTAT=istat)        READ (53,temp)        WRITE(*, temp)        PRINT*, istat        END PROGRAM-test.nam  ?  $temp  int1=1  int2=2  int3=3 $ENDI understand this might be non standard formatting for the namelist file, but as I said it works with gfortran <4.6 so seems like a regression.",RESOLVED          FIXED      
56735,Tobias Burnus,[4.6/4.7/4.8/4.9 Regression] Namelist Read Error with question marks,"Hi,This is my first ever bug report so apologies if i miss some vital piece of information. I have some legacy code which compiles and runs with versions of gfortran up to 4.5. However after this the code compiles and runs but the namelist is not read correctly. There is no IO errors but non of the variables are set to their respective values. I have managed to narrow this down to the fact that the legacy namelist has question marks in the namelist file outside of any data block. Below is a very simple code and namelist which shows this. If you remove the question mark from the name list the values are set, otherwise they are not.-test.f        PROGRAM TEST        INTEGER int1,int2,int3        NAMELIST /temp/ int1,int2,int3        OPEN (53,FILE='test.nam',STATUS='OLD', IOSTAT=istat)        READ (53,temp)        WRITE(*, temp)        PRINT*, istat        END PROGRAM-test.nam  ?  $temp  int1=1  int2=2  int3=3 $ENDI understand this might be non standard formatting for the namelist file, but as I said it works with gfortran <4.6 so seems like a regression.",RESOLVED          FIXED      
55854,Tobias Burnus,ICE on intent(out) dummy argument with unlimited polymorphic component,"As demonstrated below, having an ""intent(out)"" dummy argument with anunlimited polymorphic component generates an internal compiler errorwith a December 23 build of gfortran 4.8:$ cat ice_on_intent_out_with_unlimted.f90  type foo    class(*), allocatable :: x  end typecontains  subroutine bar(this)    type(foo), intent(out) :: this  endend$ gfortran ice_on_intent_out_with_unlimted.f90ice_on_intent_out_with_unlimted.f90: In function 'bar':ice_on_intent_out_with_unlimted.f90:5:0: internal compiler error:Segmentation fault: 11   subroutine bar(this) ^ice_on_intent_out_with_unlimted.f90:5:0: internal compiler error: Abort trap: 6gfortran: internal compiler error: Abort trap: 6 (program f951)Abort trap: 6$ gfortran --versionGNU Fortran (MacPorts gcc48 4.8-20121223_0) 4.8.0 20121223 (experimental)",RESOLVED          FIXED      
55854,Tobias Burnus,ICE on intent(out) dummy argument with unlimited polymorphic component,"As demonstrated below, having an ""intent(out)"" dummy argument with anunlimited polymorphic component generates an internal compiler errorwith a December 23 build of gfortran 4.8:$ cat ice_on_intent_out_with_unlimted.f90  type foo    class(*), allocatable :: x  end typecontains  subroutine bar(this)    type(foo), intent(out) :: this  endend$ gfortran ice_on_intent_out_with_unlimted.f90ice_on_intent_out_with_unlimted.f90: In function 'bar':ice_on_intent_out_with_unlimted.f90:5:0: internal compiler error:Segmentation fault: 11   subroutine bar(this) ^ice_on_intent_out_with_unlimted.f90:5:0: internal compiler error: Abort trap: 6gfortran: internal compiler error: Abort trap: 6 (program f951)Abort trap: 6$ gfortran --versionGNU Fortran (MacPorts gcc48 4.8-20121223_0) 4.8.0 20121223 (experimental)",RESOLVED          FIXED      
54350,Tobias Burnus,[4.8 Regression] FAIL: gfortran.dg/realloc_on_assign_*.f90  -O  (internal compiler error) at r190586,"Revision 190586 caused several failures in the gfortran test suite:FAIL: gfortran.dg/realloc_on_assign_14.f90  -O  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_14.f90  -O  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_14.f90  -O  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_14.f90  -O  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_15.f90  -O0  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_15.f90  -O0  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_15.f90  -O0  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_15.f90  -O0  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_15.f90  -O1  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_15.f90  -O1  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_15.f90  -O1  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_15.f90  -O1  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_15.f90  -O2  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_15.f90  -O2  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_15.f90  -O2  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_15.f90  -O2  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_15.f90  -O3 -fomit-frame-pointer  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_15.f90  -O3 -fomit-frame-pointer  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_15.f90  -O3 -fomit-frame-pointer  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_15.f90  -O3 -fomit-frame-pointer  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_15.f90  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_15.f90  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_15.f90  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_15.f90  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_15.f90  -O3 -fomit-frame-pointer -funroll-loops  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_15.f90  -O3 -fomit-frame-pointer -funroll-loops  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_15.f90  -O3 -fomit-frame-pointer -funroll-loops  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_15.f90  -O3 -fomit-frame-pointer -funroll-loops  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_15.f90  -O3 -g  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_15.f90  -O3 -g  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_15.f90  -O3 -g  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_15.f90  -O3 -g  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_15.f90  -Os  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_15.f90  -Os  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_15.f90  -Os  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_15.f90  -Os  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_2.f03  -O0  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_2.f03  -O0  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_2.f03  -O0  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_2.f03  -O0  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_2.f03  -O1  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_2.f03  -O1  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_2.f03  -O1  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_2.f03  -O1  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_2.f03  -O2  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_2.f03  -O2  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_2.f03  -O2  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_2.f03  -O2  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_2.f03  -O3 -fomit-frame-pointer  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_2.f03  -O3 -fomit-frame-pointer  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_2.f03  -O3 -fomit-frame-pointer  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_2.f03  -O3 -fomit-frame-pointer  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_2.f03  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_2.f03  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_2.f03  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_2.f03  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_2.f03  -O3 -fomit-frame-pointer -funroll-loops  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_2.f03  -O3 -fomit-frame-pointer -funroll-loops  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_2.f03  -O3 -fomit-frame-pointer -funroll-loops  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_2.f03  -O3 -fomit-frame-pointer -funroll-loops  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_2.f03  -O3 -g  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_2.f03  -O3 -g  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_2.f03  -O3 -g  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_2.f03  -O3 -g  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_2.f03  -Os  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_2.f03  -Os  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_2.f03  -Os  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_2.f03  -Os  (test for excess errors)The ICEs I have looked at are of the kind/opt/gcc/work/gcc/testsuite/gfortran.dg/realloc_on_assign_14.f90: In function 'MAIN__':/opt/gcc/work/gcc/testsuite/gfortran.dg/realloc_on_assign_14.f90:31:0: internal compiler error: in gfc_conv_procedure_call, at fortran/trans-expr.c:3721 a = nar2() ! { dg-warning ""Code for reallocating the allocatable array"" } ^r190585 is OK.Note that the polyhedron test rnflow.f90 also does not compile.",RESOLVED          FIXED      
54350,Tobias Burnus,[4.8 Regression] FAIL: gfortran.dg/realloc_on_assign_*.f90  -O  (internal compiler error) at r190586,"Revision 190586 caused several failures in the gfortran test suite:FAIL: gfortran.dg/realloc_on_assign_14.f90  -O  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_14.f90  -O  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_14.f90  -O  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_14.f90  -O  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_15.f90  -O0  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_15.f90  -O0  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_15.f90  -O0  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_15.f90  -O0  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_15.f90  -O1  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_15.f90  -O1  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_15.f90  -O1  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_15.f90  -O1  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_15.f90  -O2  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_15.f90  -O2  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_15.f90  -O2  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_15.f90  -O2  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_15.f90  -O3 -fomit-frame-pointer  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_15.f90  -O3 -fomit-frame-pointer  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_15.f90  -O3 -fomit-frame-pointer  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_15.f90  -O3 -fomit-frame-pointer  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_15.f90  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_15.f90  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_15.f90  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_15.f90  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_15.f90  -O3 -fomit-frame-pointer -funroll-loops  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_15.f90  -O3 -fomit-frame-pointer -funroll-loops  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_15.f90  -O3 -fomit-frame-pointer -funroll-loops  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_15.f90  -O3 -fomit-frame-pointer -funroll-loops  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_15.f90  -O3 -g  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_15.f90  -O3 -g  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_15.f90  -O3 -g  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_15.f90  -O3 -g  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_15.f90  -Os  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_15.f90  -Os  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_15.f90  -Os  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_15.f90  -Os  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_2.f03  -O0  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_2.f03  -O0  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_2.f03  -O0  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_2.f03  -O0  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_2.f03  -O1  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_2.f03  -O1  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_2.f03  -O1  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_2.f03  -O1  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_2.f03  -O2  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_2.f03  -O2  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_2.f03  -O2  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_2.f03  -O2  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_2.f03  -O3 -fomit-frame-pointer  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_2.f03  -O3 -fomit-frame-pointer  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_2.f03  -O3 -fomit-frame-pointer  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_2.f03  -O3 -fomit-frame-pointer  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_2.f03  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_2.f03  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_2.f03  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_2.f03  -O3 -fomit-frame-pointer -funroll-all-loops -finline-functions  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_2.f03  -O3 -fomit-frame-pointer -funroll-loops  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_2.f03  -O3 -fomit-frame-pointer -funroll-loops  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_2.f03  -O3 -fomit-frame-pointer -funroll-loops  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_2.f03  -O3 -fomit-frame-pointer -funroll-loops  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_2.f03  -O3 -g  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_2.f03  -O3 -g  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_2.f03  -O3 -g  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_2.f03  -O3 -g  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_2.f03  -Os  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_2.f03  -Os  (internal compiler error)FAIL: gfortran.dg/realloc_on_assign_2.f03  -Os  (test for excess errors)FAIL: gfortran.dg/realloc_on_assign_2.f03  -Os  (test for excess errors)The ICEs I have looked at are of the kind/opt/gcc/work/gcc/testsuite/gfortran.dg/realloc_on_assign_14.f90: In function 'MAIN__':/opt/gcc/work/gcc/testsuite/gfortran.dg/realloc_on_assign_14.f90:31:0: internal compiler error: in gfc_conv_procedure_call, at fortran/trans-expr.c:3721 a = nar2() ! { dg-warning ""Code for reallocating the allocatable array"" } ^r190585 is OK.Note that the polyhedron test rnflow.f90 also does not compile.",RESOLVED          FIXED      
47750,Tobias Burnus,testsuite/gfortran.dg: dg-warning and dg-error should be distinguished,"Currently, dg-error and dg-warning are effectively treated as identical.Adding the prefix to gcc/testsuite/lib/gfortran.exp (cf. e.g. objc.exp) is enough to make them distinguishable.However, the dg machinery expects that there is a column number - unless the dg-error/warning starts with ""0:"". Cf. lib/gcc-dg.exp's process-message.To mend this, one has to modify the regular expression in gcc/testsuite/lib/gfortran-dg.expI have an (almost) working patch for that.",RESOLVED          FIXED      
47750,Tobias Burnus,testsuite/gfortran.dg: dg-warning and dg-error should be distinguished,"Currently, dg-error and dg-warning are effectively treated as identical.Adding the prefix to gcc/testsuite/lib/gfortran.exp (cf. e.g. objc.exp) is enough to make them distinguishable.However, the dg machinery expects that there is a column number - unless the dg-error/warning starts with ""0:"". Cf. lib/gcc-dg.exp's process-message.To mend this, one has to modify the regular expression in gcc/testsuite/lib/gfortran-dg.expI have an (almost) working patch for that.",RESOLVED          FIXED      
52151,Tobias Burnus,Segfault with realloc on assignment and RESHAPE to unallocated LHS,"Follow up to PR 52012 and 52117.* B is allocated with the shape (n1,n2,n3):  -> Works since the patch for PR 52012  (Before, it had the wrong result for the last two elements)* B is not allocated  -> Segfault since the patch for PR 52012  -> Before: no segfault but wrong result in for the last two elements* B allocated with shape (1,1,1)  -> Since patch for PR 52012: No crash, but wrong result (""2.0"" and 3.0 appear     multiple times, 5., 6., 7., 8. are missing and 4. is at the wrong position)  -> Before: no segfault but wrong result in for the last two elementsThe test case has been taken from PR 52117 with adaption to show this bug. chapter08/puppeteer_f2003 of Damian's/Xia's/Xu's book is also affected.I think there might be an ordering issue with regards to the zero condition and the bounds condition. Something like the following might work (completely untested; note also the ""ORIF""):--- trans-expr.c        (revision 183971)+++ trans-expr.c        (working copy)@@ -6296 +6296 @@ fcncall_realloc_result (gfc_se *se, int-  tree zero_cond;+  tree zero_cond, cond;@@ -6324,0 +6325 @@ fcncall_realloc_result (gfc_se *se, int+  cond = boolean_true_node;@@ -6344 +6345 @@ fcncall_realloc_result (gfc_se *se, int-                                  zero_cond);+                                  cond);@@ -6345,0 +6347,4 @@ fcncall_realloc_result (gfc_se *se, int++   zero_cond = fold_build2_loc (input_location, TRUTH_ORIF_EXPR,+                               boolean_type_node, zero_cond,+                               cond);! Based on the example of PR 52117 by Steven Hirshman      PROGRAM RESHAPEIT      INTEGER, PARAMETER :: n1=2, n2=2, n3=2      INTEGER            :: m1, m2, m3, lc      REAL, ALLOCATABLE  :: A(:,:), B(:,:,:)      REAL               :: val      ALLOCATE (A(n1,n2*n3))! <<< No allocation: Segfault!      ALLOCATE (B(1,1,1))    ! << Does not segfault, but result is wrong!      ALLOCATE (B(n1,n2,n3)) ! << WORKS      val = 0      lc = 0      DO m3=1,n3         DO m2=1,n2            lc = lc+1            DO m1=1,n1               val = val+1               A(m1, lc) = val            END DO         END DO      END DO      B = RESHAPE(A, [n1,n2,n3])      lc = 0      DO m3=1,n3         DO m2=1,n2            lc = lc+1            DO m1=1,n1               PRINT *,'A(',m1,',',lc,') = ',A(m1,lc),' B = ',B(m1,m2,m3)               if (A(m1,lc) /= B(m1,m2,m3)) call abort ()            END DO         END DO      END DO      DEALLOCATE(A, B)      END PROGRAM RESHAPEIT",RESOLVED          FIXED      
52151,Tobias Burnus,Segfault with realloc on assignment and RESHAPE to unallocated LHS,"Follow up to PR 52012 and 52117.* B is allocated with the shape (n1,n2,n3):  -> Works since the patch for PR 52012  (Before, it had the wrong result for the last two elements)* B is not allocated  -> Segfault since the patch for PR 52012  -> Before: no segfault but wrong result in for the last two elements* B allocated with shape (1,1,1)  -> Since patch for PR 52012: No crash, but wrong result (""2.0"" and 3.0 appear     multiple times, 5., 6., 7., 8. are missing and 4. is at the wrong position)  -> Before: no segfault but wrong result in for the last two elementsThe test case has been taken from PR 52117 with adaption to show this bug. chapter08/puppeteer_f2003 of Damian's/Xia's/Xu's book is also affected.I think there might be an ordering issue with regards to the zero condition and the bounds condition. Something like the following might work (completely untested; note also the ""ORIF""):--- trans-expr.c        (revision 183971)+++ trans-expr.c        (working copy)@@ -6296 +6296 @@ fcncall_realloc_result (gfc_se *se, int-  tree zero_cond;+  tree zero_cond, cond;@@ -6324,0 +6325 @@ fcncall_realloc_result (gfc_se *se, int+  cond = boolean_true_node;@@ -6344 +6345 @@ fcncall_realloc_result (gfc_se *se, int-                                  zero_cond);+                                  cond);@@ -6345,0 +6347,4 @@ fcncall_realloc_result (gfc_se *se, int++   zero_cond = fold_build2_loc (input_location, TRUTH_ORIF_EXPR,+                               boolean_type_node, zero_cond,+                               cond);! Based on the example of PR 52117 by Steven Hirshman      PROGRAM RESHAPEIT      INTEGER, PARAMETER :: n1=2, n2=2, n3=2      INTEGER            :: m1, m2, m3, lc      REAL, ALLOCATABLE  :: A(:,:), B(:,:,:)      REAL               :: val      ALLOCATE (A(n1,n2*n3))! <<< No allocation: Segfault!      ALLOCATE (B(1,1,1))    ! << Does not segfault, but result is wrong!      ALLOCATE (B(n1,n2,n3)) ! << WORKS      val = 0      lc = 0      DO m3=1,n3         DO m2=1,n2            lc = lc+1            DO m1=1,n1               val = val+1               A(m1, lc) = val            END DO         END DO      END DO      B = RESHAPE(A, [n1,n2,n3])      lc = 0      DO m3=1,n3         DO m2=1,n2            lc = lc+1            DO m1=1,n1               PRINT *,'A(',m1,',',lc,') = ',A(m1,lc),' B = ',B(m1,m2,m3)               if (A(m1,lc) /= B(m1,m2,m3)) call abort ()            END DO         END DO      END DO      DEALLOCATE(A, B)      END PROGRAM RESHAPEIT",RESOLVED          FIXED      
52335,Tobias Burnus,[4.4/4.5/4.6/4.7 Regression] I/O: -std=f95 rejects valid DELIM= in OPEN,"http://groups.google.com/group/comp.lang.fortran/browse_thread/thread/9942915c9c41b151open(unit=lunnml,file=nmlfile,delim='apostrophe',status='old')                                                                1Error: Fortran 2003: DELIM= at (1) not allowed in Fortran 95However, Fortran 95 has:  R904 open-stmt     is   OPEN ( connect-spec-list )  R905 connect-spec  is   ...                     or   DELIM = scalar-default-char-exprand""9.3.4.9 DELIM= specifier in the OPEN statement The scalar-default-char-expr shall evaluate to APOSTROPHE, QUOTE, or NONE. [...]""Note: gfortran correctly allows:  inquire(nunit, delim=str)I think the bogus check has been introduced when Fortran 2003's  ""9.5.1.7 DELIM= specifier in a data transfer statement""was implemented.The reason seems to be that OPEN and data-transfer (READ/WRITE) share the ""delim="" checking.",RESOLVED          FIXED      
52335,Tobias Burnus,[4.4/4.5/4.6/4.7 Regression] I/O: -std=f95 rejects valid DELIM= in OPEN,"http://groups.google.com/group/comp.lang.fortran/browse_thread/thread/9942915c9c41b151open(unit=lunnml,file=nmlfile,delim='apostrophe',status='old')                                                                1Error: Fortran 2003: DELIM= at (1) not allowed in Fortran 95However, Fortran 95 has:  R904 open-stmt     is   OPEN ( connect-spec-list )  R905 connect-spec  is   ...                     or   DELIM = scalar-default-char-exprand""9.3.4.9 DELIM= specifier in the OPEN statement The scalar-default-char-expr shall evaluate to APOSTROPHE, QUOTE, or NONE. [...]""Note: gfortran correctly allows:  inquire(nunit, delim=str)I think the bogus check has been introduced when Fortran 2003's  ""9.5.1.7 DELIM= specifier in a data transfer statement""was implemented.The reason seems to be that OPEN and data-transfer (READ/WRITE) share the ""delim="" checking.",RESOLVED          FIXED      
51899,Tobias Burnus,[4.7 Regression] libgfortran's chmod.c fails to build on MinGW,"libgfortran fails to build on MinGW with the following error. It's a regression caused by the fix for PR 36755 / Rev. 183137. .deps/chmod.Tpo -c ../../../gcc-trunk/libgfortran/intrinsics/chmod.c -DDLL_EXPORT -DPIC -o .libs/chmod.o../../../gcc-trunk/libgfortran/intrinsics/chmod.c: In function 'chmod_func':../../../gcc-trunk/libgfortran/intrinsics/chmod.c:92:7: warning: format '%o' expects argument of type 'unsigned int *',but argument 3 has type 'mode_t *' [-Wformat]../../../gcc-trunk/libgfortran/intrinsics/chmod.c:106:3: warning: implicit declaration of function 'umask' [-Wimplicit-function-declaration]../../../gcc-trunk/libgfortran/intrinsics/chmod.c:294:18: error: 'S_IRGRP' undeclared (first use in this function)../../../gcc-trunk/libgfortran/intrinsics/chmod.c:294:18: note: each undeclared identifier is reported only once for each function it appears in../../../gcc-trunk/libgfortran/intrinsics/chmod.c:296:18: error: 'S_IROTH' undeclared (first use in this function)../../../gcc-trunk/libgfortran/intrinsics/chmod.c:305:18: error: 'S_IWGRP' undeclared (first use in this function)../../../gcc-trunk/libgfortran/intrinsics/chmod.c:307:18: error: 'S_IWOTH' undeclared (first use in this function)../../../gcc-trunk/libgfortran/intrinsics/chmod.c:316:18: error: 'S_IXGRP' undeclared (first use in this function)../../../gcc-trunk/libgfortran/intrinsics/chmod.c:318:18: error: 'S_IXOTH' undeclared (first use in this function)../../../gcc-trunk/libgfortran/intrinsics/chmod.c:330:18: error: 'S_ISUID' undeclared (first use in this function)../../../gcc-trunk/libgfortran/intrinsics/chmod.c:332:18: error: 'S_ISGID' undeclared (first use in this function)../../../gcc-trunk/libgfortran/intrinsics/chmod.c:420:17: error: 'S_ISVTX' undeclared (first use in this function)",RESOLVED          FIXED      
51899,Tobias Burnus,[4.7 Regression] libgfortran's chmod.c fails to build on MinGW,"libgfortran fails to build on MinGW with the following error. It's a regression caused by the fix for PR 36755 / Rev. 183137. .deps/chmod.Tpo -c ../../../gcc-trunk/libgfortran/intrinsics/chmod.c -DDLL_EXPORT -DPIC -o .libs/chmod.o../../../gcc-trunk/libgfortran/intrinsics/chmod.c: In function 'chmod_func':../../../gcc-trunk/libgfortran/intrinsics/chmod.c:92:7: warning: format '%o' expects argument of type 'unsigned int *',but argument 3 has type 'mode_t *' [-Wformat]../../../gcc-trunk/libgfortran/intrinsics/chmod.c:106:3: warning: implicit declaration of function 'umask' [-Wimplicit-function-declaration]../../../gcc-trunk/libgfortran/intrinsics/chmod.c:294:18: error: 'S_IRGRP' undeclared (first use in this function)../../../gcc-trunk/libgfortran/intrinsics/chmod.c:294:18: note: each undeclared identifier is reported only once for each function it appears in../../../gcc-trunk/libgfortran/intrinsics/chmod.c:296:18: error: 'S_IROTH' undeclared (first use in this function)../../../gcc-trunk/libgfortran/intrinsics/chmod.c:305:18: error: 'S_IWGRP' undeclared (first use in this function)../../../gcc-trunk/libgfortran/intrinsics/chmod.c:307:18: error: 'S_IWOTH' undeclared (first use in this function)../../../gcc-trunk/libgfortran/intrinsics/chmod.c:316:18: error: 'S_IXGRP' undeclared (first use in this function)../../../gcc-trunk/libgfortran/intrinsics/chmod.c:318:18: error: 'S_IXOTH' undeclared (first use in this function)../../../gcc-trunk/libgfortran/intrinsics/chmod.c:330:18: error: 'S_ISUID' undeclared (first use in this function)../../../gcc-trunk/libgfortran/intrinsics/chmod.c:332:18: error: 'S_ISGID' undeclared (first use in this function)../../../gcc-trunk/libgfortran/intrinsics/chmod.c:420:17: error: 'S_ISVTX' undeclared (first use in this function)",RESOLVED          FIXED      
36755,Tobias Burnus,Avoid fork/exec in chmod intrinsic,The chmod intrinsic should be implemented with chmod () insteadof fork/exec.,RESOLVED          FIXED      
36755,Tobias Burnus,Avoid fork/exec in chmod intrinsic,The chmod intrinsic should be implemented with chmod () insteadof fork/exec.,RESOLVED          FIXED      
39427,Tobias Burnus,F2003: Procedures with same name as types/type constructors,"The Fortran 2003 standard Section C.1.6 allows a generic procedure to have the same name as a type , but gfotran gives ""Error: DERIVED attribute of 'foo' conflicts with PROCEDURE attribute at (1)"" on the following code:module foo_module  type foo    integer :: bar  end type  interface foo    procedure constructor  end interfacecontains  type(foo) function constructor()    constructor%bar = 1  end functionend moduleI use this style throughout a textbook I'm writing because it seems like anatural way to extend the intrinsic structure constructor syntax.  A more extensive example of this technique is also in Figure 17.1 of Metcalf, Reid & Cohen.Damian",RESOLVED          FIXED      
39427,Tobias Burnus,F2003: Procedures with same name as types/type constructors,"The Fortran 2003 standard Section C.1.6 allows a generic procedure to have the same name as a type , but gfotran gives ""Error: DERIVED attribute of 'foo' conflicts with PROCEDURE attribute at (1)"" on the following code:module foo_module  type foo    integer :: bar  end type  interface foo    procedure constructor  end interfacecontains  type(foo) function constructor()    constructor%bar = 1  end functionend moduleI use this style throughout a textbook I'm writing because it seems like anatural way to extend the intrinsic structure constructor syntax.  A more extensive example of this technique is also in Figure 17.1 of Metcalf, Reid & Cohen.Damian",RESOLVED          FIXED      
50718,Tobias Burnus,[4.6/4.7 Regression] ICE (fold_convert) with -fcheck=pointer,"FGSL version 0.9.3 from http://www.lrz.de/services/software/mathematik/gsl/fortran/With gfortran 4.7 and with gfortran 4.6.1 20110801 (rev. 177033), I get:  api/siman.finc:99:0: internal compiler error: in fold_convert_loc,                       at fold-const.c:2026It works with 4.5.3 20110428 [rev. 173117].#9  0x0000000000aeefab in build_array_type_1 (elt_type=0x2aaaaab48348,    index_type=0x2aaaacf0d7e0, shared=true) at /home/tob/projects/gcc-git/gcc/gcc/tree.c:7373#10 0x0000000000604285 in gfc_get_character_type_len_for_eltype (eltype=0x2aaaaab48348,    len=<optimized out>) at /home/tob/projects/gcc-git/gcc/gcc/fortran/trans-types.c:977#11 0x00000000006089a9 in gfc_sym_type (sym=0x2ad5780)    at /home/tob/projects/gcc-git/gcc/gcc/fortran/trans-types.c:2050#12 0x00000000005c112c in create_function_arglist (sym=0x1bcb3d0)    at /home/tob/projects/gcc-git/gcc/gcc/fortran/trans-decl.c:2067",RESOLVED          FIXED      
50718,Tobias Burnus,[4.6/4.7 Regression] ICE (fold_convert) with -fcheck=pointer,"FGSL version 0.9.3 from http://www.lrz.de/services/software/mathematik/gsl/fortran/With gfortran 4.7 and with gfortran 4.6.1 20110801 (rev. 177033), I get:  api/siman.finc:99:0: internal compiler error: in fold_convert_loc,                       at fold-const.c:2026It works with 4.5.3 20110428 [rev. 173117].#9  0x0000000000aeefab in build_array_type_1 (elt_type=0x2aaaaab48348,    index_type=0x2aaaacf0d7e0, shared=true) at /home/tob/projects/gcc-git/gcc/gcc/tree.c:7373#10 0x0000000000604285 in gfc_get_character_type_len_for_eltype (eltype=0x2aaaaab48348,    len=<optimized out>) at /home/tob/projects/gcc-git/gcc/gcc/fortran/trans-types.c:977#11 0x00000000006089a9 in gfc_sym_type (sym=0x2ad5780)    at /home/tob/projects/gcc-git/gcc/gcc/fortran/trans-types.c:2050#12 0x00000000005c112c in create_function_arglist (sym=0x1bcb3d0)    at /home/tob/projects/gcc-git/gcc/gcc/fortran/trans-decl.c:2067",RESOLVED          FIXED      
18918,Tobias Burnus,Eventually support Fortran 2008's coarrays [co-arrays],"This is a rather useful extension, in my opinion, though for obvious reasons nottop priority (I know the gfortran folks have no shortage of work cut out forthem).  I've used it with much pleasure on some more computationally intenseproblems.  Cray's got a nice implementation of it, and a research group at Ricehas a more open source-to-source co-array compiler that spits out standard f90,I believe.I did not see this rfe listed on the public todo webpages or filed previously.",RESOLVED          FIXED      
25062,Tobias Burnus,same name for parameter and common block,"using GNU Fortran 95 (GCC) 4.1.0 20051126 (prerelease)  with '-g -pedantic -std=f95', I get a bad / no diagnostic for the following invalid code:INTEGER, PARAMETER ::  C1=1COMMON /C1/ IINTEGER IEND",RESOLVED          FIXED      
48692,Tobias Burnus,[4.7 Regression] ICE with gfortran.dg/module_write_1.f90,"My recent patch for PR 48588 (submitted patch: http://gcc.gnu.org/ml/fortran/2011-04/msg00206.html ), Rev. 172718, causes a regression:For gfortran.dg/module_write_1.f90:f951: internal compiler error: in gfc_enforce_clean_symbol_state, at fortran/symbol.c:3426#0  gfc_enforce_clean_symbol_state () at gcc/fortran/symbol.c:3426#1  0x0000000000526ee1 in next_statement () at gcc/fortran/parse.c:889#2  0x000000000052a88e in gfc_parse_file () at gcc/fortran/parse.c:4329The problem is that gfc_commit_symbol/-s or gfc_undo_symbols has not been called.",RESOLVED          FIXED      
48692,Tobias Burnus,[4.7 Regression] ICE with gfortran.dg/module_write_1.f90,"My recent patch for PR 48588 (submitted patch: http://gcc.gnu.org/ml/fortran/2011-04/msg00206.html ), Rev. 172718, causes a regression:For gfortran.dg/module_write_1.f90:f951: internal compiler error: in gfc_enforce_clean_symbol_state, at fortran/symbol.c:3426#0  gfc_enforce_clean_symbol_state () at gcc/fortran/symbol.c:3426#1  0x0000000000526ee1 in next_statement () at gcc/fortran/parse.c:889#2  0x000000000052a88e in gfc_parse_file () at gcc/fortran/parse.c:4329The problem is that gfc_commit_symbol/-s or gfc_undo_symbols has not been called.",RESOLVED          FIXED      
47569,Tobias Burnus,[4.3/4.4/4.5/4.6 Regression] gfortran does not detect that the parameters for passing a partial string to a subroutine are incorrect,"gfortran does not detect that the parameters for passing a partial string to a subroutine are incorrect.The example uses s(i) in stead of s(i:j) to pass the string, and this was a common usage pattern in the old fortran77 days, so this may bother more users.Sample code:module teststr  implicit none  integer, parameter :: GRH_SIZE = 20, NMAX = 41624  type strtype    integer   :: size    character :: mdr(NMAX)  end type strtypecontains  subroutine sub2(string,str_size)    integer,intent(in)    :: str_size    character,intent(out) :: string(str_size)    string(:) = 'a'  end subroutine sub2  subroutine sub1(a)    type(strtype),intent(inout) :: a    call sub2(a%mdr(GRH_SIZE+1),a%size-GRH_SIZE)  end subroutine sub1end module teststrCommand used for compiling:>gfortran -c minimal_example.F90f951: internal compiler error: Segmentation faultPlease submit a full bug report,with preprocessed source if appropriate.See <http://bugzilla.redhat.com/bugzilla> for instructions.>gfortran version used:>gfortran --versionGNU Fortran (GCC) 4.4.4 20100630 (Red Hat 4.4.4-10)If the line:     call sub2(a%mdr(GRH_SIZE+1),a%size-GRH_SIZE)is replaced by:     call sub2(a%mdr(GRH_SIZE+1:),a%size-GRH_SIZE)then the compilation runs without problems.Expected output was to get a proper error message with the provided sample code.",RESOLVED          FIXED      
47569,Tobias Burnus,[4.3/4.4/4.5/4.6 Regression] gfortran does not detect that the parameters for passing a partial string to a subroutine are incorrect,"gfortran does not detect that the parameters for passing a partial string to a subroutine are incorrect.The example uses s(i) in stead of s(i:j) to pass the string, and this was a common usage pattern in the old fortran77 days, so this may bother more users.Sample code:module teststr  implicit none  integer, parameter :: GRH_SIZE = 20, NMAX = 41624  type strtype    integer   :: size    character :: mdr(NMAX)  end type strtypecontains  subroutine sub2(string,str_size)    integer,intent(in)    :: str_size    character,intent(out) :: string(str_size)    string(:) = 'a'  end subroutine sub2  subroutine sub1(a)    type(strtype),intent(inout) :: a    call sub2(a%mdr(GRH_SIZE+1),a%size-GRH_SIZE)  end subroutine sub1end module teststrCommand used for compiling:>gfortran -c minimal_example.F90f951: internal compiler error: Segmentation faultPlease submit a full bug report,with preprocessed source if appropriate.See <http://bugzilla.redhat.com/bugzilla> for instructions.>gfortran version used:>gfortran --versionGNU Fortran (GCC) 4.4.4 20100630 (Red Hat 4.4.4-10)If the line:     call sub2(a%mdr(GRH_SIZE+1),a%size-GRH_SIZE)is replaced by:     call sub2(a%mdr(GRH_SIZE+1:),a%size-GRH_SIZE)then the compilation runs without problems.Expected output was to get a proper error message with the provided sample code.",RESOLVED          FIXED      
46516,Tobias Burnus,Non-multilib search problem in gcc.c / gfortran error: libgfortran.spec: No such file or directory,"For my build, new trunk fails to compile anything like this:> gfortran-trunk -v t.f90Driving: gfortran-trunk -v t.f90 -l gfortran -l m -shared-libgcc -specs=libgfortran.specUsing built-in specs.Reading specs from libgfortran.specgfortran-trunk: error: libgfortran.spec: No such file or directoryThe spec file, however is installed as part of the build:/data/vondele/gcc_bench/gcc_trunk/build/lib64/libgfortran.specand that directory is also in the path, if it matters.> echo $LD_LIBRARY_PATH/data/vondele/gcc_bench/libs/:/data/vondele/gcc_bench/mkl:/data/vondele/gcc_bench/gcc_trunk/build/lib64:/data/vondele/gcc_bench/gcc_trunk/build/lib:/usr/lib64/mpi/gcc/openmpi/lib64",RESOLVED          FIXED      
46516,Tobias Burnus,Non-multilib search problem in gcc.c / gfortran error: libgfortran.spec: No such file or directory,"For my build, new trunk fails to compile anything like this:> gfortran-trunk -v t.f90Driving: gfortran-trunk -v t.f90 -l gfortran -l m -shared-libgcc -specs=libgfortran.specUsing built-in specs.Reading specs from libgfortran.specgfortran-trunk: error: libgfortran.spec: No such file or directoryThe spec file, however is installed as part of the build:/data/vondele/gcc_bench/gcc_trunk/build/lib64/libgfortran.specand that directory is also in the path, if it matters.> echo $LD_LIBRARY_PATH/data/vondele/gcc_bench/libs/:/data/vondele/gcc_bench/mkl:/data/vondele/gcc_bench/gcc_trunk/build/lib64:/data/vondele/gcc_bench/gcc_trunk/build/lib:/usr/lib64/mpi/gcc/openmpi/lib64",RESOLVED          FIXED      
45530,Tobias Burnus,gfortran internal compiler error,"The example program is:program testimplicit nonetype c_struct  type (g_struct), pointer :: gend typetype g_struct  type (p_struct), pointer :: pend typetype p_struct  type (region_struct), pointer :: rend typetype region_struct  type (p_struct) plotend typetype (c_struct) curve(10)namelist / params / curveend programcompiling with ""gfortran test2.f90"" hangs the compiler. I don't have a simple example but with other test programs I get the message:[gfortran] Compiling:  test.f90 --> test_DBL.ogfortran: Internal error: Segmentation fault (program f951)Please submit a full bug report.See <http://gcc.gnu.org/bugs.html> for instructions.In any case, commenting out the namelist statement fixes the problem. Notice that this code is non-conforming since the ""curve"" variable has a pointer component but is also used in the namelist-- DavidPS: I am working on linux:lnx4103:~/bmad/bmad_dist/test> uname -aLinux lnx4103.lns.cornell.edu 2.6.18-194.11.1.el5 #1 SMP Tue Aug 10 16:39:28 EDT  2010 x86_64 x86_64 x86_64 GNU/Linux",RESOLVED          FIXED      
45530,Tobias Burnus,gfortran internal compiler error,"The example program is:program testimplicit nonetype c_struct  type (g_struct), pointer :: gend typetype g_struct  type (p_struct), pointer :: pend typetype p_struct  type (region_struct), pointer :: rend typetype region_struct  type (p_struct) plotend typetype (c_struct) curve(10)namelist / params / curveend programcompiling with ""gfortran test2.f90"" hangs the compiler. I don't have a simple example but with other test programs I get the message:[gfortran] Compiling:  test.f90 --> test_DBL.ogfortran: Internal error: Segmentation fault (program f951)Please submit a full bug report.See <http://gcc.gnu.org/bugs.html> for instructions.In any case, commenting out the namelist statement fixes the problem. Notice that this code is non-conforming since the ""curve"" variable has a pointer component but is also used in the namelist-- DavidPS: I am working on linux:lnx4103:~/bmad/bmad_dist/test> uname -aLinux lnx4103.lns.cornell.edu 2.6.18-194.11.1.el5 #1 SMP Tue Aug 10 16:39:28 EDT  2010 x86_64 x86_64 x86_64 GNU/Linux",RESOLVED          FIXED      
45489,Tobias Burnus,Default initialization of derived-type function result missing,"The following program fails because the function result in ""f"" is never initialized. It should be default initialized, which works using other compilers.  type A    integer, pointer:: p => null ()    integer:: i=3  end type A  type(A):: x  x=f()  if (associated(x%p) .or. x%i /= 3) call abort ()contains  function f() result (fr)    type(A):: fr  end function fend",RESOLVED          FIXED      
45489,Tobias Burnus,Default initialization of derived-type function result missing,"The following program fails because the function result in ""f"" is never initialized. It should be default initialized, which works using other compilers.  type A    integer, pointer:: p => null ()    integer:: i=3  end type A  type(A):: x  x=f()  if (associated(x%p) .or. x%i /= 3) call abort ()contains  function f() result (fr)    type(A):: fr  end function fend",RESOLVED          FIXED      
45019,Tobias Burnus,Aliasing of TARGET dummy argument not detected correctly,"The following program:MODULE m  IMPLICIT NONE  INTEGER, TARGET :: arr(3)CONTAINS  SUBROUTINE foobar (arg)    INTEGER, TARGET :: arg(:)    arr(2:3) = arg(1:2)  END SUBROUTINE foobarEND MODULE mPROGRAM main  USE :: m  IMPLICIT NONE  arr = (/ 1, 2, 3 /)  CALL foobar (arr)  PRINT *, arrEND PROGRAM maindoes not create a temporary array inside foobar and prints ""1 1 1"", while I think it should print ""1 1 2"".In the Fortran 2008 standard, 12.5.2.13, 3b):(3) Action that affects the value of the entity or any subobject of it shall be taken only through the dummy argument unlessa) ... orb) the dummy argument has the TARGET attribute, the dummy argument does not have INTENT(IN), the dummy argument is a scalar object or an assumed-shape array without the CONTIGUOUS attribute, and the actual argument is a target other than an array section with a vector subscript.It seems to me that this allows the code above.",RESOLVED          FIXED      
45019,Tobias Burnus,Aliasing of TARGET dummy argument not detected correctly,"The following program:MODULE m  IMPLICIT NONE  INTEGER, TARGET :: arr(3)CONTAINS  SUBROUTINE foobar (arg)    INTEGER, TARGET :: arg(:)    arr(2:3) = arg(1:2)  END SUBROUTINE foobarEND MODULE mPROGRAM main  USE :: m  IMPLICIT NONE  arr = (/ 1, 2, 3 /)  CALL foobar (arr)  PRINT *, arrEND PROGRAM maindoes not create a temporary array inside foobar and prints ""1 1 1"", while I think it should print ""1 1 2"".In the Fortran 2008 standard, 12.5.2.13, 3b):(3) Action that affects the value of the entity or any subobject of it shall be taken only through the dummy argument unlessa) ... orb) the dummy argument has the TARGET attribute, the dummy argument does not have INTENT(IN), the dummy argument is a scalar object or an assumed-shape array without the CONTIGUOUS attribute, and the actual argument is a target other than an array section with a vector subscript.It seems to me that this allows the code above.",RESOLVED          FIXED      
45087,Tobias Burnus,#NAME?,Follow up to PR 40873. There are still some -fwhole-program issues left; for instance: The polyhedron tests gas_dyn.f90 and test_fpu.f90 do not link,RESOLVED          FIXED      
45087,Tobias Burnus,#NAME?,Follow up to PR 40873. There are still some -fwhole-program issues left; for instance: The polyhedron tests gas_dyn.f90 and test_fpu.f90 do not link,RESOLVED          FIXED      
40873,Tobias Burnus,#NAME?,"The option -fwhole-programs marks all functions in that file as local to that file, which facilitates inlining and dead-code elimination.That of cause assumes that all declarations are properly unified, which should be the case with -fwhole-file. However, the following Polyhedron testcases fail  ac, aermod, doduc, gas_dyn, linpk, mdbx, rnflow and test_fpuat link time as too many functions have been elimated:$ gfortran -fwhole-program -O1 linpk.f90/tmp/ccWhxrXN.o: In function `MAIN__':linpk.f90:(.text+0x759): undefined reference to `daxpy_'linpk.f90:(.text+0x7c7): undefined reference to `daxpy_'",RESOLVED          FIXED      
40873,Tobias Burnus,#NAME?,"The option -fwhole-programs marks all functions in that file as local to that file, which facilitates inlining and dead-code elimination.That of cause assumes that all declarations are properly unified, which should be the case with -fwhole-file. However, the following Polyhedron testcases fail  ac, aermod, doduc, gas_dyn, linpk, mdbx, rnflow and test_fpuat link time as too many functions have been elimated:$ gfortran -fwhole-program -O1 linpk.f90/tmp/ccWhxrXN.o: In function `MAIN__':linpk.f90:(.text+0x759): undefined reference to `daxpy_'linpk.f90:(.text+0x7c7): undefined reference to `daxpy_'",RESOLVED          FIXED      
40011,Tobias Burnus,Problems with -fwhole-file,"Summary of the problems with -fwhole-file I have found so far.From http://gcc.gnu.org/ml/fortran/2009-03/msg00310.html:--------------------------------------------------------------------------------(1) From a first look the several ""Segmentation fault"" are coming from recursive functions, the simplest code being the following:[ibook-dhum] f90/bug% cat recurs_test_1.f90! { dg-do compile }      RECURSIVE FUNCTION eval_args(q)  result (r)      INTEGER NNODE       PARAMETER (NNODE  = 10)       TYPE NODE        SEQUENCE 	   INTEGER car 	   INTEGER cdr       END TYPE NODE       TYPE(NODE) heap(NNODE)       INTEGER r, q 	   r = eval_args(heap(q)%cdr)       END FUNCTION eval_args [ibook-dhum] f90/bug% gfc -c -fwhole-file recurs_test_1.f90gfc: Internal error: Segmentation fault (program f951)Please submit a full bug report.See <http://gcc.gnu.org/bugs.html> for instructions.--------------------------------------------------------------------------------(2) I have also an ICE (already reported in PR26227 http://gcc.gnu.org/ml/gcc-bugs/2009-03/msg02321.html) for [ibook-dhum] f90/bug% cat arr_fun.f90function test(n)real, dimension(2) :: testinteger            :: ntest = n! print *, testreturnend function testprogram arrreal, dimension(2) :: resres = test(2)print *, resend program[ibook-dhum] f90/bug% gfc -fwhole-file arr_fun.f90arr_fun.f90: In function 'arr':arr_fun.f90:8: internal compiler error: in fold_convert, at fold-const.c:2547Please submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.--------------------------------------------------------------------------------(3) And I think the following are false positives:[ibook-dhum] f90/bug% cat specifics_red_4.f90subroutine test_d(fn, val, res)  double precision fn  double precision val, res  print *, fn(val), resend subroutinesubroutine test_c(fn, val, res)  complex fn  complex val, res  print *, fn(val), resend subroutineprogram specifics  intrinsic dcos  intrinsic dcosh  intrinsic dexp  intrinsic conjg  call test_d (dcos, 1d0, dcos(1d0))  call test_d (dcosh, 1d0, dcosh(1d0))  call test_d (dexp, 1d0, dexp(1d0))    call test_c (conjg, (1.0,1.0) , conjg((1.0,1.0)))end program[ibook-dhum] f90/bug% gfc -fwhole-file specifics_red_4.f90specifics_red_4.f90:25.15:  call test_d (dcos, 1d0, dcos(1d0))	       1Error: Type/rank mismatch in argument 'fn' at (1)specifics_red_4.f90:26.15:  call test_d (dcosh, 1d0, dcosh(1d0))	       1Error: Type/rank mismatch in argument 'fn' at (1)specifics_red_4.f90:27.15:  call test_d (dexp, 1d0, dexp(1d0))	       1Error: Type/rank mismatch in argument 'fn' at (1)specifics_red_4.f90:29.15:  call test_c (conjg, (1.0,1.0) , conjg((1.0,1.0)))	       1Error: Type/rank mismatch in argument 'fn' at (1)--------------------------------------------------------------------------------From http://gcc.gnu.org/ml/fortran/2009-03/msg00316.htmlYour patch fixes some Segmentation faults (a couple), but not this one:! { dg-do compile }program testinterface  function bad_stuff(n)    integer :: bad_stuff (2)    integer :: n(2)  end function bad_stuff   recursive function rec_stuff(n) result (tmp)    integer :: n(2), tmp(2)  end function rec_stuffend interface   integer :: res(2)  res = bad_stuff((/-19,-30/))end program test  recursive function bad_stuff(n)    integer :: bad_stuff (2)    integer :: n(2), tmp(2), ent = 0, sent = 0    save ent, sent    ent = -1   entry rec_stuff(n) result (tmp)    if (ent == -1) then      sent = ent      ent = 0    end if    ent = ent + 1    tmp = 1    if(maxval (n) < 5) then      tmp = tmp + rec_stuff (n+1)      ent = ent - 1    endif    if (ent == 1) then      if (sent == -1) then        bad_stuff = tmp + bad_stuff (1)      end if      ent = 0      sent = 0    end if  end function bad_stuff--------------------------------------------------------------------------------From http://gcc.gnu.org/ml/fortran/2009-03/msg00317.htmlA simpler test:recursive function fac(i) result (res)  integer :: i, j, k, res  k = 1  goto 100entry bifac(i,j) result (res)  k = j100 continue  if (i < k) then    res = 1  else    res = i * bifac(i-k,k)  end ifend functionprogram test  external fac  external bifac  integer :: fac, bifac  print *, fac(5)  print *, bifac(5,2)  print*, fac(6)  print *, bifac(6,2)  print*, fac(0)  print *, bifac(1,2)end program test--------------------------------------------------------------------------------From http://gcc.gnu.org/ml/fortran/2009-04/msg00031.htmlsome ICEs on the polyhedron test suite (see also pr39896):[ibook-dhum] lin/test% gfc -fwhole-file aermod.f90f951: internal compiler error: Bus error[ibook-dhum] lin/test% gfc -fwhole-file air.f90f951: internal compiler error: Bus error[ibook-dhum] lin/test% gfc -O0 -fwhole-file gas_dyn.f90[ibook-dhum] lin/test% gfc -O1 -fwhole-file gas_dyn.f90gas_dyn.f90: In function 'eos':gas_dyn.f90:360: internal compiler error: Bus error[ibook-dhum] lin/test% gfc -O2 -fwhole-file gas_dyn.f90gas_dyn.f90: In function 'readin':gas_dyn.f90:1572: internal compiler error: Bus error[ibook-dhum] lin/test% gfc -O3 -fwhole-file gas_dyn.f90gas_dyn.f90: In function 'nozzle':gas_dyn.f90:896: internal compiler error: Bus errorNote that for gas_dyn.f90, there is no ICE at -O0 whilewith nonzero optimization, the ICEs occur in differentplaces.",RESOLVED          FIXED      
40011,Tobias Burnus,Problems with -fwhole-file,"Summary of the problems with -fwhole-file I have found so far.From http://gcc.gnu.org/ml/fortran/2009-03/msg00310.html:--------------------------------------------------------------------------------(1) From a first look the several ""Segmentation fault"" are coming from recursive functions, the simplest code being the following:[ibook-dhum] f90/bug% cat recurs_test_1.f90! { dg-do compile }      RECURSIVE FUNCTION eval_args(q)  result (r)      INTEGER NNODE       PARAMETER (NNODE  = 10)       TYPE NODE        SEQUENCE 	   INTEGER car 	   INTEGER cdr       END TYPE NODE       TYPE(NODE) heap(NNODE)       INTEGER r, q 	   r = eval_args(heap(q)%cdr)       END FUNCTION eval_args [ibook-dhum] f90/bug% gfc -c -fwhole-file recurs_test_1.f90gfc: Internal error: Segmentation fault (program f951)Please submit a full bug report.See <http://gcc.gnu.org/bugs.html> for instructions.--------------------------------------------------------------------------------(2) I have also an ICE (already reported in PR26227 http://gcc.gnu.org/ml/gcc-bugs/2009-03/msg02321.html) for [ibook-dhum] f90/bug% cat arr_fun.f90function test(n)real, dimension(2) :: testinteger            :: ntest = n! print *, testreturnend function testprogram arrreal, dimension(2) :: resres = test(2)print *, resend program[ibook-dhum] f90/bug% gfc -fwhole-file arr_fun.f90arr_fun.f90: In function 'arr':arr_fun.f90:8: internal compiler error: in fold_convert, at fold-const.c:2547Please submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.--------------------------------------------------------------------------------(3) And I think the following are false positives:[ibook-dhum] f90/bug% cat specifics_red_4.f90subroutine test_d(fn, val, res)  double precision fn  double precision val, res  print *, fn(val), resend subroutinesubroutine test_c(fn, val, res)  complex fn  complex val, res  print *, fn(val), resend subroutineprogram specifics  intrinsic dcos  intrinsic dcosh  intrinsic dexp  intrinsic conjg  call test_d (dcos, 1d0, dcos(1d0))  call test_d (dcosh, 1d0, dcosh(1d0))  call test_d (dexp, 1d0, dexp(1d0))    call test_c (conjg, (1.0,1.0) , conjg((1.0,1.0)))end program[ibook-dhum] f90/bug% gfc -fwhole-file specifics_red_4.f90specifics_red_4.f90:25.15:  call test_d (dcos, 1d0, dcos(1d0))	       1Error: Type/rank mismatch in argument 'fn' at (1)specifics_red_4.f90:26.15:  call test_d (dcosh, 1d0, dcosh(1d0))	       1Error: Type/rank mismatch in argument 'fn' at (1)specifics_red_4.f90:27.15:  call test_d (dexp, 1d0, dexp(1d0))	       1Error: Type/rank mismatch in argument 'fn' at (1)specifics_red_4.f90:29.15:  call test_c (conjg, (1.0,1.0) , conjg((1.0,1.0)))	       1Error: Type/rank mismatch in argument 'fn' at (1)--------------------------------------------------------------------------------From http://gcc.gnu.org/ml/fortran/2009-03/msg00316.htmlYour patch fixes some Segmentation faults (a couple), but not this one:! { dg-do compile }program testinterface  function bad_stuff(n)    integer :: bad_stuff (2)    integer :: n(2)  end function bad_stuff   recursive function rec_stuff(n) result (tmp)    integer :: n(2), tmp(2)  end function rec_stuffend interface   integer :: res(2)  res = bad_stuff((/-19,-30/))end program test  recursive function bad_stuff(n)    integer :: bad_stuff (2)    integer :: n(2), tmp(2), ent = 0, sent = 0    save ent, sent    ent = -1   entry rec_stuff(n) result (tmp)    if (ent == -1) then      sent = ent      ent = 0    end if    ent = ent + 1    tmp = 1    if(maxval (n) < 5) then      tmp = tmp + rec_stuff (n+1)      ent = ent - 1    endif    if (ent == 1) then      if (sent == -1) then        bad_stuff = tmp + bad_stuff (1)      end if      ent = 0      sent = 0    end if  end function bad_stuff--------------------------------------------------------------------------------From http://gcc.gnu.org/ml/fortran/2009-03/msg00317.htmlA simpler test:recursive function fac(i) result (res)  integer :: i, j, k, res  k = 1  goto 100entry bifac(i,j) result (res)  k = j100 continue  if (i < k) then    res = 1  else    res = i * bifac(i-k,k)  end ifend functionprogram test  external fac  external bifac  integer :: fac, bifac  print *, fac(5)  print *, bifac(5,2)  print*, fac(6)  print *, bifac(6,2)  print*, fac(0)  print *, bifac(1,2)end program test--------------------------------------------------------------------------------From http://gcc.gnu.org/ml/fortran/2009-04/msg00031.htmlsome ICEs on the polyhedron test suite (see also pr39896):[ibook-dhum] lin/test% gfc -fwhole-file aermod.f90f951: internal compiler error: Bus error[ibook-dhum] lin/test% gfc -fwhole-file air.f90f951: internal compiler error: Bus error[ibook-dhum] lin/test% gfc -O0 -fwhole-file gas_dyn.f90[ibook-dhum] lin/test% gfc -O1 -fwhole-file gas_dyn.f90gas_dyn.f90: In function 'eos':gas_dyn.f90:360: internal compiler error: Bus error[ibook-dhum] lin/test% gfc -O2 -fwhole-file gas_dyn.f90gas_dyn.f90: In function 'readin':gas_dyn.f90:1572: internal compiler error: Bus error[ibook-dhum] lin/test% gfc -O3 -fwhole-file gas_dyn.f90gas_dyn.f90: In function 'nozzle':gas_dyn.f90:896: internal compiler error: Bus errorNote that for gas_dyn.f90, there is no ICE at -O0 whilewith nonzero optimization, the ICEs occur in differentplaces.",RESOLVED          FIXED      
45066,Tobias Burnus,[4.6 Regression] ICE in namelist read in snapshot of 7/24/2010,"When I compile the following file with the snapshot of July 24, 2010:MODULE GA_commonsINTEGER :: nichflg(2)END MODULE GA_commonsPROGRAM gafortranUSE GA_commonsNAMELIST /ga/ nichflgREAD (23, nml=ga)END PROGRAM gafortranI get the following message:g.f90: In function gafortran:g.f90:7:0: internal compiler error: Segmentation faultPlease submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.",RESOLVED          FIXED      
45066,Tobias Burnus,[4.6 Regression] ICE in namelist read in snapshot of 7/24/2010,"When I compile the following file with the snapshot of July 24, 2010:MODULE GA_commonsINTEGER :: nichflg(2)END MODULE GA_commonsPROGRAM gafortranUSE GA_commonsNAMELIST /ga/ nichflgREAD (23, nml=ga)END PROGRAM gafortranI get the following message:g.f90: In function gafortran:g.f90:7:0: internal compiler error: Segmentation faultPlease submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.",RESOLVED          FIXED      
44742,Tobias Burnus,ICE in gfc_conv_array_initializer,"A large code file triggers during compilation this ICE: /opt/gcc-4.5/bin/gfortran -c proc8.f90f951: internal compiler error: in gfc_conv_array_initializer, at fortran/trans-array.c:4189Please submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.The code example unfortunately is huge, a 54 MB .f90 file which I do not attach right now. I  suppose it is better to wait to be contacted by one of the developpers.",RESOLVED          FIXED      
44742,Tobias Burnus,ICE in gfc_conv_array_initializer,"A large code file triggers during compilation this ICE: /opt/gcc-4.5/bin/gfortran -c proc8.f90f951: internal compiler error: in gfc_conv_array_initializer, at fortran/trans-array.c:4189Please submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.The code example unfortunately is huge, a 54 MB .f90 file which I do not attach right now. I  suppose it is better to wait to be contacted by one of the developpers.",RESOLVED          FIXED      
44556,Tobias Burnus,[4.5/4.6 Regression] incorrect error:  Stat-variable at (1) shall not be DEALLOCATEd within the same DEALLOCATE statement,"Attempting to compile the following code:module dealloc_test   implicit none   type test_type      integer, dimension(:), allocatable :: array      integer :: st   end type test_typecontains   subroutine test      type(test_type) :: foo            deallocate(foo%array, stat=foo%st)      end subroutine testend module dealloc_testgenerates the following result:[jhogg@jhogg] ~/src/ma77_ic$ gfortran-4.5 -c temp.f90 temp.f90:13.33:      deallocate(foo%array, stat=foo%st)                                 1Error: Stat-variable at (1) shall not be DEALLOCATEd within the same DEALLOCATE statementThis seems to be legal code to me, and is used throughout our Fortran library.Version information (debian expt package):[jhogg@jhogg] ~/src/ma77_ic$ gfortran-4.5 -vUsing built-in specs.COLLECT_GCC=gfortran-4.5COLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-linux-gnu/4.5.1/lto-wrapperTarget: x86_64-linux-gnuConfigured with: ../src/configure -v --with-pkgversion='Debian 4.5.0-5' --with-bugurl=file:///usr/share/doc/gcc-4.5/README.Bugs --enable-languages=c,c++,java,fortran,objc,obj-c++ --prefix=/usr --enable-shared --enable-multiarch --enable-linker-build-id --with-system-zlib --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.5 --program-suffix=-4.5 --enable-nls --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --enable-plugin --enable-gold --with-plugin-ld=ld.gold --disable-browser-plugin --enable-java-awt=gtk --enable-gtk-cairo --with-java-home=/usr/lib/jvm/java-1.5.0-gcj-4.5/jre --enable-java-home --with-jvm-root-dir=/usr/lib/jvm/java-1.5.0-gcj-4.5 --with-jvm-jar-dir=/usr/lib/jvm-exports/java-1.5.0-gcj-4.5 --with-arch-directory=amd64 --with-ecj-jar=/usr/share/java/eclipse-ecj.jar --enable-objc-gc --with-arch-32=i486 --with-tune=generic --enable-checking=yes --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnuThread model: posixgcc version 4.5.1 20100602 (prerelease) (Debian 4.5.0-5)Thanks,Jonathan",RESOLVED          FIXED      
44556,Tobias Burnus,[4.5/4.6 Regression] incorrect error:  Stat-variable at (1) shall not be DEALLOCATEd within the same DEALLOCATE statement,"Attempting to compile the following code:module dealloc_test   implicit none   type test_type      integer, dimension(:), allocatable :: array      integer :: st   end type test_typecontains   subroutine test      type(test_type) :: foo            deallocate(foo%array, stat=foo%st)      end subroutine testend module dealloc_testgenerates the following result:[jhogg@jhogg] ~/src/ma77_ic$ gfortran-4.5 -c temp.f90 temp.f90:13.33:      deallocate(foo%array, stat=foo%st)                                 1Error: Stat-variable at (1) shall not be DEALLOCATEd within the same DEALLOCATE statementThis seems to be legal code to me, and is used throughout our Fortran library.Version information (debian expt package):[jhogg@jhogg] ~/src/ma77_ic$ gfortran-4.5 -vUsing built-in specs.COLLECT_GCC=gfortran-4.5COLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-linux-gnu/4.5.1/lto-wrapperTarget: x86_64-linux-gnuConfigured with: ../src/configure -v --with-pkgversion='Debian 4.5.0-5' --with-bugurl=file:///usr/share/doc/gcc-4.5/README.Bugs --enable-languages=c,c++,java,fortran,objc,obj-c++ --prefix=/usr --enable-shared --enable-multiarch --enable-linker-build-id --with-system-zlib --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.5 --program-suffix=-4.5 --enable-nls --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --enable-plugin --enable-gold --with-plugin-ld=ld.gold --disable-browser-plugin --enable-java-awt=gtk --enable-gtk-cairo --with-java-home=/usr/lib/jvm/java-1.5.0-gcj-4.5/jre --enable-java-home --with-jvm-root-dir=/usr/lib/jvm/java-1.5.0-gcj-4.5 --with-jvm-jar-dir=/usr/lib/jvm-exports/java-1.5.0-gcj-4.5 --with-arch-directory=amd64 --with-ecj-jar=/usr/share/java/eclipse-ecj.jar --enable-objc-gc --with-arch-32=i486 --with-tune=generic --enable-checking=yes --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnuThread model: posixgcc version 4.5.1 20100602 (prerelease) (Debian 4.5.0-5)Thanks,Jonathan",RESOLVED          FIXED      
40632,Tobias Burnus,Support F2008's contiguous attribute,"On one hand it needs a new attribute, which needs some checking that the contiguity is not violated. It also needs the contiguous flag of the reworked descriptor.One place where it can be used is:a) In functions callsb) In assignments of the type (cf. PR 40551)   array = function()c) In compile-time value for the strides, cf. PR 32131",RESOLVED          FIXED      
40632,Tobias Burnus,Support F2008's contiguous attribute,"On one hand it needs a new attribute, which needs some checking that the contiguity is not violated. It also needs the contiguous flag of the reworked descriptor.One place where it can be used is:a) In functions callsb) In assignments of the type (cf. PR 40551)   array = function()c) In compile-time value for the strides, cf. PR 32131",RESOLVED          FIXED      
40452,Tobias Burnus,-fbounds-check: False positive due to ignoring storage association,"Follow up to PR 37746 / PR 40383. I believe the following program is valid due to the storage association/argument association. However, with -fcheck=bounds one gets:At line 5 of file aa.f90Fortran runtime error: Actual string length is shorter than the declared one for dummy argument 'a' (2/4)Note: If one changes the actual argument to [""ab""] or [""a"",""b""] both NAG f95 and gfortran are able to diagnose the problem at compile time. For the program below, neither compilers gives a compile-time error/warning. (Nor does NAG with -C=all give a run-time error.)program test  implicit none  call sub([""ab"", ""cd""])contains  subroutine sub(a)   character(len=4) :: a(1)   print *, a(1)  end subroutine subend program testFrom the standard (F2003, cf. 16.4.3 Storage association):""In a storage association context [...] (3) A nonpointer scalar object of type default character and character length len occupies len contiguous character storage units; [...] (7) A nonpointer array occupies a sequence of contiguous storage sequences, one for each array element, in array element order (6.2.2.2); [...] A sequence of storage sequences forms a storage sequence.""(And a bit further down one finds a bit more to ""argument association"".)The challenge is diagnose this properly. The problem is that the array size is _not_ passed. One solution would be to enable the check only with -std=f95. I believe the argument association is only allowed since Fortran 2003. Or one does a proper argument checking by checking whether the argument is an array. For this one needs -fcheck=call and save the arguments in some external variable, then one checks whether the current procedure matches the procedure where the global variable stores the argument information - and then uses this information for the array check. Sorry, I don't have any better idea at the moment.Note: The primary use of the argument association is:  call c_func(""abc"")with  subroutine c_func(str) bind(C)    character(len=1,kind=c_char) :: str(*)as otherwise one had to use 'call c_func([""a"",""b"",""c""])' which is awkward!",RESOLVED          FIXED      
40452,Tobias Burnus,-fbounds-check: False positive due to ignoring storage association,"Follow up to PR 37746 / PR 40383. I believe the following program is valid due to the storage association/argument association. However, with -fcheck=bounds one gets:At line 5 of file aa.f90Fortran runtime error: Actual string length is shorter than the declared one for dummy argument 'a' (2/4)Note: If one changes the actual argument to [""ab""] or [""a"",""b""] both NAG f95 and gfortran are able to diagnose the problem at compile time. For the program below, neither compilers gives a compile-time error/warning. (Nor does NAG with -C=all give a run-time error.)program test  implicit none  call sub([""ab"", ""cd""])contains  subroutine sub(a)   character(len=4) :: a(1)   print *, a(1)  end subroutine subend program testFrom the standard (F2003, cf. 16.4.3 Storage association):""In a storage association context [...] (3) A nonpointer scalar object of type default character and character length len occupies len contiguous character storage units; [...] (7) A nonpointer array occupies a sequence of contiguous storage sequences, one for each array element, in array element order (6.2.2.2); [...] A sequence of storage sequences forms a storage sequence.""(And a bit further down one finds a bit more to ""argument association"".)The challenge is diagnose this properly. The problem is that the array size is _not_ passed. One solution would be to enable the check only with -std=f95. I believe the argument association is only allowed since Fortran 2003. Or one does a proper argument checking by checking whether the argument is an array. For this one needs -fcheck=call and save the arguments in some external variable, then one checks whether the current procedure matches the procedure where the global variable stores the argument information - and then uses this information for the array check. Sorry, I don't have any better idea at the moment.Note: The primary use of the argument association is:  call c_func(""abc"")with  subroutine c_func(str) bind(C)    character(len=1,kind=c_char) :: str(*)as otherwise one had to use 'call c_func([""a"",""b"",""c""])' which is awkward!",RESOLVED          FIXED      
43985,Tobias Burnus,[4.5/4.6 Regression] ICE when assumed size cray-pointee passed as argument,"The recent fix for PR fortran/43331 introduced a regression for programs that use OpenMP and pass assumed-size cray-pointees as function arguments.  Here is an example:         subroutine bob()         implicit none         real(8) peted         pointer (ipeted, peted(*))         integer(4) sz!$omp parallel default(shared)         call pete(peted(sz))!$omp end parallel         return         end subroutine bobWhen compiled with svn revision >= 157512, this generates an ICE:% gfortran -fcray-pointer -fopenmp -c bug1.f90bug1.f90: In function 'bob':bug1.f90:9:0: internal compiler error: Segmentation faultPlease submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.My guess is that this is a result of 'peted' have the AS_ASSUMED_SIZE attribute instead of AS_EXPLICIT in trans-decl.c",RESOLVED          FIXED      
43985,Tobias Burnus,[4.5/4.6 Regression] ICE when assumed size cray-pointee passed as argument,"The recent fix for PR fortran/43331 introduced a regression for programs that use OpenMP and pass assumed-size cray-pointees as function arguments.  Here is an example:         subroutine bob()         implicit none         real(8) peted         pointer (ipeted, peted(*))         integer(4) sz!$omp parallel default(shared)         call pete(peted(sz))!$omp end parallel         return         end subroutine bobWhen compiled with svn revision >= 157512, this generates an ICE:% gfortran -fcray-pointer -fopenmp -c bug1.f90bug1.f90: In function 'bob':bug1.f90:9:0: internal compiler error: Segmentation faultPlease submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.My guess is that this is a result of 'peted' have the AS_ASSUMED_SIZE attribute instead of AS_EXPLICIT in trans-decl.c",RESOLVED          FIXED      
43919,Tobias Burnus,Coarrays: ICE in  simplify_cobound,"The following program gives an ICE:f951: internal compiler error: in simplify_cobound, at fortran/simplify.c:2969integer :: a[*]print *,aprint *,lcobound(a), ucobound(a)endPatch (untested):Index: gcc/fortran/simplify.c===================================================================--- gcc/fortran/simplify.c      (revision 158822)+++ gcc/fortran/simplify.c      (working copy)@@ -2936,6 +2936,13 @@ simplify_cobound (gfc_expr *array, gfc_e          switch (ref->u.ar.type)            {            case AR_ELEMENT:+             if (ref->next == NULL)+               {+                 gcc_assert (ref->u.ar.as->corank > 0+                             && ref->u.ar.as->rank == 0);+                 as = ref->u.ar.as;+                 goto done;+               }              as = NULL;              continue;",RESOLVED          FIXED      
43919,Tobias Burnus,Coarrays: ICE in  simplify_cobound,"The following program gives an ICE:f951: internal compiler error: in simplify_cobound, at fortran/simplify.c:2969integer :: a[*]print *,aprint *,lcobound(a), ucobound(a)endPatch (untested):Index: gcc/fortran/simplify.c===================================================================--- gcc/fortran/simplify.c      (revision 158822)+++ gcc/fortran/simplify.c      (working copy)@@ -2936,6 +2936,13 @@ simplify_cobound (gfc_expr *array, gfc_e          switch (ref->u.ar.type)            {            case AR_ELEMENT:+             if (ref->next == NULL)+               {+                 gcc_assert (ref->u.ar.as->corank > 0+                             && ref->u.ar.as->rank == 0);+                 as = ref->u.ar.as;+                 goto done;+               }              as = NULL;              continue;",RESOLVED          FIXED      
43551,Tobias Burnus,[4.4/4.5 Regression] Buffered direct I/O reads wrong record,"Quantum Espresso (http://www.quantum-espresso.org/download.php) is miscompiled, cf. http://www.democritos.it/pipermail/pw_forum/2010-March/016356.htmlFetch code, configure with F77=gfortran F90=gfortran and compile. Run the example02 and compare the output for ""ph.x < si.dynG"" with the reference, with an other compiler or with gfortran 4.3. Compare e.g. the ""Dielectric constant"" matrix. The error is about 10%; for the ""Effective charges"" it is even larger.I am currently hunting the regression and then will try to reduce the code.",RESOLVED          FIXED      
43551,Tobias Burnus,[4.4/4.5 Regression] Buffered direct I/O reads wrong record,"Quantum Espresso (http://www.quantum-espresso.org/download.php) is miscompiled, cf. http://www.democritos.it/pipermail/pw_forum/2010-March/016356.htmlFetch code, configure with F77=gfortran F90=gfortran and compile. Run the example02 and compare the output for ""ph.x < si.dynG"" with the reference, with an other compiler or with gfortran 4.3. Compare e.g. the ""Dielectric constant"" matrix. The error is about 10%; for the ""Effective charges"" it is even larger.I am currently hunting the regression and then will try to reduce the code.",RESOLVED          FIXED      
43331,Tobias Burnus,Cray pointers generate bogus IL for the middle-end,"I have a patch that exposes this and causes a ""miscompile"" ofgfortran.dg/cray_pointers_2.f90.  Reduced testcase:! { dg-do run }! { dg-options ""-fcray-pointer -fbounds-check"" }! Series of routines for testing a Cray pointer implementationprogram craytest  call ptr5end program craytestsubroutine ptr5  logical :: intne  integer :: i  integer, parameter :: n = 9  integer itarg1 (n)  integer ipte1 (*)  pointer(iptr4,ipte1)  iptr4 = loc(itarg1)  do, i=1,n     ipte1(i) = i     if (intne(ipte1(i), itarg1(i))) then        ! Error #143        call abort()     endif  end doend subroutine ptr5! Separate function calls to break Cray pointer-indifferent optimizationlogical function intne(ii,jj)  integer :: i,j  intne = ii.ne.jj  if (intne) then     write (*,*) ii,"" doesn't equal "",jj  endifend function intnewhere we can see the following IL created by the FE:ptr5 (){  integer(kind=4) i;  integer(kind=8) iptr4;  integer(kind=4) ipte1[1] [value-expr: *(integer(kind=4)[1] *) iptr4];  integer(kind=4) itarg1[9];  {    integer(kind=8) D.1548;    D.1548 = (integer(kind=8)) &itarg1;    iptr4 = D.1548;  }...            ipte1[NON_LVALUE_EXPR <SAVE_EXPR <(integer(kind=8)) i>> + -1] = i;...            if (intne (&ipte1[NON_LVALUE_EXPR <SAVE_EXPR <(integer(kind=8)) i>> + -1], &itarg1[NON_LVALUE_EXPR <SAVE_EXPR <(integer(kind=8)) i>> + -1]))you can clearly see that substituting the value-expr*(integer(kind=4)[1] *) iptr4 for ipte1 will expose an array size of 1 (!)to the middle-end, which it will happily oblige to and optimize&ipte1[i - 1] to &ipte1[0].If the array size is not known the FE should generate*(integer(kind=4)[] *) iptr4",RESOLVED          FIXED      
43331,Tobias Burnus,Cray pointers generate bogus IL for the middle-end,"I have a patch that exposes this and causes a ""miscompile"" ofgfortran.dg/cray_pointers_2.f90.  Reduced testcase:! { dg-do run }! { dg-options ""-fcray-pointer -fbounds-check"" }! Series of routines for testing a Cray pointer implementationprogram craytest  call ptr5end program craytestsubroutine ptr5  logical :: intne  integer :: i  integer, parameter :: n = 9  integer itarg1 (n)  integer ipte1 (*)  pointer(iptr4,ipte1)  iptr4 = loc(itarg1)  do, i=1,n     ipte1(i) = i     if (intne(ipte1(i), itarg1(i))) then        ! Error #143        call abort()     endif  end doend subroutine ptr5! Separate function calls to break Cray pointer-indifferent optimizationlogical function intne(ii,jj)  integer :: i,j  intne = ii.ne.jj  if (intne) then     write (*,*) ii,"" doesn't equal "",jj  endifend function intnewhere we can see the following IL created by the FE:ptr5 (){  integer(kind=4) i;  integer(kind=8) iptr4;  integer(kind=4) ipte1[1] [value-expr: *(integer(kind=4)[1] *) iptr4];  integer(kind=4) itarg1[9];  {    integer(kind=8) D.1548;    D.1548 = (integer(kind=8)) &itarg1;    iptr4 = D.1548;  }...            ipte1[NON_LVALUE_EXPR <SAVE_EXPR <(integer(kind=8)) i>> + -1] = i;...            if (intne (&ipte1[NON_LVALUE_EXPR <SAVE_EXPR <(integer(kind=8)) i>> + -1], &itarg1[NON_LVALUE_EXPR <SAVE_EXPR <(integer(kind=8)) i>> + -1]))you can clearly see that substituting the value-expr*(integer(kind=4)[1] *) iptr4 for ipte1 will expose an array size of 1 (!)to the middle-end, which it will happily oblige to and optimize&ipte1[i - 1] to &ipte1[0].If the array size is not known the FE should generate*(integer(kind=4)[] *) iptr4",RESOLVED          FIXED      
43362,Tobias Burnus,ICE with structure constuctor with DT component,"The following program gives an ICE with gfortran 4.1, 4.2, 4.3, 4.4, and 4.5. The program is valid (except for the one marked line) and compiles with NAG f95, ifort, and g95. With the marked line, it is invalid which is not diagnosed but also gives an ICE.implicit nonetype t  integer, pointer :: aend type ttype t2  type(t) :: bend type t2contains pure subroutine foo(x)   type(t),intent(in) :: x   type(t) :: z   type(t2) :: y   y = t2(x) ! ICE, valid LHS type (note: F2003, C1272 (3) does not apply)   z = t2(x) ! ICE, invalid LHS type end subroutine fooend module m",RESOLVED          FIXED      
43362,Tobias Burnus,ICE with structure constuctor with DT component,"The following program gives an ICE with gfortran 4.1, 4.2, 4.3, 4.4, and 4.5. The program is valid (except for the one marked line) and compiles with NAG f95, ifort, and g95. With the marked line, it is invalid which is not diagnosed but also gives an ICE.implicit nonetype t  integer, pointer :: aend type ttype t2  type(t) :: bend type t2contains pure subroutine foo(x)   type(t),intent(in) :: x   type(t) :: z   type(t2) :: y   y = t2(x) ! ICE, valid LHS type (note: F2003, C1272 (3) does not apply)   z = t2(x) ! ICE, invalid LHS type end subroutine fooend module m",RESOLVED          FIXED      
43228,Tobias Burnus,NAMELIST I/O: Reading at 2 dimensions (rank) array values.,"When we read this kind of sctructure in gfortran, just the first values (akh20(01,1)) is read. The others values are ignored an receives zeros. akh2o(01,:)=    0.02080,     0.01550,     0.01040,     0.00510,      0.00200,     0.00062akh2o(02,:)=    0.17070,     0.12910,     0.08630,     0.04300,      0.01710,     0.00043akh2o(03,:)=    3.69350,     3.03920,     2.18270,     1.18620,      0.48190,     0.00012akh2o(04,:)=    0.09550,     0.07170,     0.04775,     0.02390,      0.00970,     0.00096akh2o(05,:)=    0.56670,     0.42490,     0.28390,     0.14190,      0.05620,     0.00565",RESOLVED          FIXED      
43228,Tobias Burnus,NAMELIST I/O: Reading at 2 dimensions (rank) array values.,"When we read this kind of sctructure in gfortran, just the first values (akh20(01,1)) is read. The others values are ignored an receives zeros. akh2o(01,:)=    0.02080,     0.01550,     0.01040,     0.00510,      0.00200,     0.00062akh2o(02,:)=    0.17070,     0.12910,     0.08630,     0.04300,      0.01710,     0.00043akh2o(03,:)=    3.69350,     3.03920,     2.18270,     1.18620,      0.48190,     0.00012akh2o(04,:)=    0.09550,     0.07170,     0.04775,     0.02390,      0.00970,     0.00096akh2o(05,:)=    0.56670,     0.42490,     0.28390,     0.14190,      0.05620,     0.00565",RESOLVED          FIXED      
43015,Tobias Burnus,ICE with BIND(C) and -fbounds-check in mingw-w64 cross-compiler,"Using the mingw-w64 cross-compiler package ""mingw-w64-bin_i686-linux_20100130.tar.bz2"" (which works like a treat otherwise) I get this ICEfoo.f90: In function &#8216;foo&#8217;:foo.f90:1:0: internal compiler error: in add_argument_checking, at fortran/trans-decl.c:3961when compiling this snippet (which I believe to be valid)SUBROUTINE foo(msg) BIND(C, name = ""Foo"")  USE, INTRINSIC :: iso_c_binding  IMPLICIT NONE  CHARACTER (KIND=C_CHAR), INTENT (out) :: msg(*) END SUBROUTINE foo$ x86_64-w64-mingw32-gfortran -vUsing built-in specs.COLLECT_GCC=x86_64-w64-mingw32-gfortranCOLLECT_LTO_WRAPPER=/localdata/mingw64/bin/../libexec/gcc/x86_64-w64-mingw32/4.5.0/lto-wrapperTarget: x86_64-w64-mingw32Configured with: ../../../build/gcc/gcc/configure --target=x86_64-w64-mingw32 --prefix=/extra/mingw64/m64bs/linux-x86-x86_64/build/build/root --with-sysroot=/extra/mingw64/m64bs/linux-x86-x86_64/build/build/root --with-gmp=/extra/mingw64/m64bs/linux-x86-x86_64/build/build/gmp/install --with-mpfr=/extra/mingw64/m64bs/linux-x86-x86_64/build/build/mpfr/install --with-mpc=/extra/mingw64/m64bs/linux-x86-x86_64/build/build/mpc/install --enable-languages=all,obj-c++ --enable-fully-dynamic-string --disable-multilibThread model: win32gcc version 4.5.0 20100130 (experimental) (GCC)",RESOLVED          FIXED      
43015,Tobias Burnus,ICE with BIND(C) and -fbounds-check in mingw-w64 cross-compiler,"Using the mingw-w64 cross-compiler package ""mingw-w64-bin_i686-linux_20100130.tar.bz2"" (which works like a treat otherwise) I get this ICEfoo.f90: In function &#8216;foo&#8217;:foo.f90:1:0: internal compiler error: in add_argument_checking, at fortran/trans-decl.c:3961when compiling this snippet (which I believe to be valid)SUBROUTINE foo(msg) BIND(C, name = ""Foo"")  USE, INTRINSIC :: iso_c_binding  IMPLICIT NONE  CHARACTER (KIND=C_CHAR), INTENT (out) :: msg(*) END SUBROUTINE foo$ x86_64-w64-mingw32-gfortran -vUsing built-in specs.COLLECT_GCC=x86_64-w64-mingw32-gfortranCOLLECT_LTO_WRAPPER=/localdata/mingw64/bin/../libexec/gcc/x86_64-w64-mingw32/4.5.0/lto-wrapperTarget: x86_64-w64-mingw32Configured with: ../../../build/gcc/gcc/configure --target=x86_64-w64-mingw32 --prefix=/extra/mingw64/m64bs/linux-x86-x86_64/build/build/root --with-sysroot=/extra/mingw64/m64bs/linux-x86-x86_64/build/build/root --with-gmp=/extra/mingw64/m64bs/linux-x86-x86_64/build/build/gmp/install --with-mpfr=/extra/mingw64/m64bs/linux-x86-x86_64/build/build/mpfr/install --with-mpc=/extra/mingw64/m64bs/linux-x86-x86_64/build/build/mpc/install --enable-languages=all,obj-c++ --enable-fully-dynamic-string --disable-multilibThread model: win32gcc version 4.5.0 20100130 (experimental) (GCC)",RESOLVED          FIXED      
42597,Tobias Burnus,ICE with procedure pointer initialized to null(),"The attached code (which seems fine to me) produces an internalcompiler error.gfortran -c pp.f90 -o pp.of951: internal compiler error: in gfc_build_null_descriptor, at fortran/trans-array.c:372gfortran --versionGNU Fortran (GCC) 4.5.0 20091229 (experimental)module mod_a implicit none public :: p_fun private abstract interface  pure function intf(x) result(y)   real, intent(in) :: x(:,:)   real :: y(size(x,1),size(x,1),size(x,2))  end function intf end interface !procedure(intf), pointer :: p_fun ! this works procedure(intf), pointer :: p_fun => null()end module mod_a",RESOLVED          FIXED      
42597,Tobias Burnus,ICE with procedure pointer initialized to null(),"The attached code (which seems fine to me) produces an internalcompiler error.gfortran -c pp.f90 -o pp.of951: internal compiler error: in gfc_build_null_descriptor, at fortran/trans-array.c:372gfortran --versionGNU Fortran (GCC) 4.5.0 20091229 (experimental)module mod_a implicit none public :: p_fun private abstract interface  pure function intf(x) result(y)   real, intent(in) :: x(:,:)   real :: y(size(x,1),size(x,1),size(x,2))  end function intf end interface !procedure(intf), pointer :: p_fun ! this works procedure(intf), pointer :: p_fun => null()end module mod_a",RESOLVED          FIXED      
42922,Tobias Burnus,Wrongly rejected derived types with default initializers in PURE procedures 2,"This is a problem very similar to this one:http://gcc.gnu.org/bugzilla/show_bug.cgi?id=42008gfortran rejects the attached code because:gfortran -c err.f90 err.f90:6.20:    integer :: i = 0                    1Error: Initialization of variable at (1) is not allowed in a PURE procedureHowever, I think that the program is fine.module mod_xyz implicit nonecontains pure subroutine psub()  type ilist    integer :: i = 0  end type ilist end subroutine psubend module mod_xyz",RESOLVED          FIXED      
42922,Tobias Burnus,Wrongly rejected derived types with default initializers in PURE procedures 2,"This is a problem very similar to this one:http://gcc.gnu.org/bugzilla/show_bug.cgi?id=42008gfortran rejects the attached code because:gfortran -c err.f90 err.f90:6.20:    integer :: i = 0                    1Error: Initialization of variable at (1) is not allowed in a PURE procedureHowever, I think that the program is fine.module mod_xyz implicit nonecontains pure subroutine psub()  type ilist    integer :: i = 0  end type ilist end subroutine psubend module mod_xyz",RESOLVED          FIXED      
42936,Tobias Burnus,Result of passing NULL() as actual arg doesn't inherit characteristics from the corresponding dummy arg,"> gfortran --versionGNU Fortran (GCC) 4.5.0 20100128 (experimental)Copyright (C) 2010 Free Software Foundation, Inc.GNU Fortran comes with NO WARRANTY, to the extent permitted by law.You may redistribute copies of GNU Fortranunder the terms of the GNU General Public License.For more information about these matters, see the file named COPYING> cat null.f90SUBROUTINE PASSES_NULL  INTERFACE     SUBROUTINE SUB(I)       INTEGER, POINTER :: I(:,:,:)     END SUBROUTINE SUB  END INTERFACE  CALL SUB(NULL())END SUBROUTINE PASSES_NULL> gfortran -c null.f90null.f90:7.11:  CALL SUB(NULL())           1Error: Rank mismatch in argument 'i' at (1) (3 and 0)> nagfor -c null.f90NAG Fortran Compiler Release 5.2(703)[NAG Fortran Compiler normal termination]",RESOLVED          FIXED      
42936,Tobias Burnus,Result of passing NULL() as actual arg doesn't inherit characteristics from the corresponding dummy arg,"> gfortran --versionGNU Fortran (GCC) 4.5.0 20100128 (experimental)Copyright (C) 2010 Free Software Foundation, Inc.GNU Fortran comes with NO WARRANTY, to the extent permitted by law.You may redistribute copies of GNU Fortranunder the terms of the GNU General Public License.For more information about these matters, see the file named COPYING> cat null.f90SUBROUTINE PASSES_NULL  INTERFACE     SUBROUTINE SUB(I)       INTEGER, POINTER :: I(:,:,:)     END SUBROUTINE SUB  END INTERFACE  CALL SUB(NULL())END SUBROUTINE PASSES_NULL> gfortran -c null.f90null.f90:7.11:  CALL SUB(NULL())           1Error: Rank mismatch in argument 'i' at (1) (3 and 0)> nagfor -c null.f90NAG Fortran Compiler Release 5.2(703)[NAG Fortran Compiler normal termination]",RESOLVED          FIXED      
42650,Tobias Burnus,F90: DT function with in-line DT definition and RESULT is rejected,"The one of following valid Fortran 90 functions is rejected: While the first function ""func"" works and has function name = result name, the second (""func2""), which uses RESULT(), is rejected with the error message:Error: The type for function 'func2' at (1) is not accessibletype(t) function func()  type t    sequence    integer :: i = 5  end type tend function functype(t) function func2() result(res)  type t    sequence    integer :: i = 5  end type tend function func2",RESOLVED          FIXED      
42650,Tobias Burnus,F90: DT function with in-line DT definition and RESULT is rejected,"The one of following valid Fortran 90 functions is rejected: While the first function ""func"" works and has function name = result name, the second (""func2""), which uses RESULT(), is rejected with the error message:Error: The type for function 'func2' at (1) is not accessibletype(t) function func()  type t    sequence    integer :: i = 5  end type tend function functype(t) function func2() result(res)  type t    sequence    integer :: i = 5  end type tend function func2",RESOLVED          FIXED      
41777,Tobias Burnus,Wrong-code with POINTER-returning GENERIC function,"Non-reduced test case.This is with http://static.exciting-code.org/exciting.hydrogen.9.10.tar.gzUntar, cp build/platform/make.inc.g95 build/platform/make.inc.gfortran and adapt that file; run 'make'.Note: Due to PR 41772, one needs to use the PGI loop insrc/FoX/fsys/fox_m_fsys_array_str.F90's ""str_vs""rather than TRANSFER.cd examples/Al; ../../build/serial/excitingExpected: Runs through successfully (as with g95, xlf90, ifort),Actual result: Fails when FoX tries to remove a node (""NOT_FOUND_ERR"").As in PR 41772, I will try to get a small testcase. This time, valgrind is silent which does not help :-(",RESOLVED          FIXED      
41777,Tobias Burnus,Wrong-code with POINTER-returning GENERIC function,"Non-reduced test case.This is with http://static.exciting-code.org/exciting.hydrogen.9.10.tar.gzUntar, cp build/platform/make.inc.g95 build/platform/make.inc.gfortran and adapt that file; run 'make'.Note: Due to PR 41772, one needs to use the PGI loop insrc/FoX/fsys/fox_m_fsys_array_str.F90's ""str_vs""rather than TRANSFER.cd examples/Al; ../../build/serial/excitingExpected: Runs through successfully (as with g95, xlf90, ifort),Actual result: Fails when FoX tries to remove a node (""NOT_FOUND_ERR"").As in PR 41772, I will try to get a small testcase. This time, valgrind is silent which does not help :-(",RESOLVED          FIXED      
42858,Tobias Burnus,[4.5 Regression] ICE in gfc_array_dimen_size at ../../trunk/gcc/fortran/array.c:2063,"Between svn rev. 156083 and 156198 the following ICE started tooccur with the attached testcase:f951: internal compiler error: Segmentation faultRunning gdb on the testcase:(gdb) run gfcbug102.f90Starting program: /opt/gfortran/4.5/libexec/gcc/i686-pc-linux-gnu/4.5.0/f951 gfcbug102.f90Program received signal SIGSEGV, Segmentation fault.0x080d61f8 in gfc_array_dimen_size (array=0x8bf2380, dimen=0, result=0xbfffe868)    at ../../trunk/gcc/fortran/array.c:20632063          else if (spec_dimen_size (array->symtree->n.sym->as, dimen, result)",RESOLVED          FIXED      
42858,Tobias Burnus,[4.5 Regression] ICE in gfc_array_dimen_size at ../../trunk/gcc/fortran/array.c:2063,"Between svn rev. 156083 and 156198 the following ICE started tooccur with the attached testcase:f951: internal compiler error: Segmentation faultRunning gdb on the testcase:(gdb) run gfcbug102.f90Starting program: /opt/gfortran/4.5/libexec/gcc/i686-pc-linux-gnu/4.5.0/f951 gfcbug102.f90Program received signal SIGSEGV, Segmentation fault.0x080d61f8 in gfc_array_dimen_size (array=0x8bf2380, dimen=0, result=0xbfffe868)    at ../../trunk/gcc/fortran/array.c:20632063          else if (spec_dimen_size (array->symtree->n.sym->as, dimen, result)",RESOLVED          FIXED      
41907,Tobias Burnus,[4.5 Regression] 465.tonto in SPEC CPU 2006 runtime failure,"On Linux/ia32 and Linux/intel64, 465.tonto in SPEC CPU 2006 failedto run at -O3:  Running 465.tonto ref base o3 default65.tonto: copy #0 non-zero return code (rc=0, signal=11)Revision 153787 is OK and revision 153795 is bad.",RESOLVED          FIXED      
41907,Tobias Burnus,[4.5 Regression] 465.tonto in SPEC CPU 2006 runtime failure,"On Linux/ia32 and Linux/intel64, 465.tonto in SPEC CPU 2006 failedto run at -O3:  Running 465.tonto ref base o3 default65.tonto: copy #0 non-zero return code (rc=0, signal=11)Revision 153787 is OK and revision 153795 is bad.",RESOLVED          FIXED      
41850,Tobias Burnus,Wrong-code with optional allocatable arrays,"As reported by Thomas Robitaille athttp://gcc.gnu.org/ml/fortran/2009-10/msg00220.htmlthe following code gives wrong-code (segfault/buserror) at run time with GCC 4.2/4.3/4.4/4.5. (4.1 does not support allocatable dummies.)$ ./a.out in sub1Bus errormodule test_module  implicit nonecontains  subroutine sub2(a)    implicit none    real,allocatable,intent(out),optional :: a(:)    print *,'in sub2'  end subroutine sub2  subroutine sub1(a)    implicit none    real,allocatable,intent(out),optional :: a(:)    print *,'in sub1'    call sub2(a)  end subroutine sub1end module test_moduleprogram test  use test_module  implicit none  call sub1()end programThe problem is that the argument can be ""NULL"" - and there is no check for the case ""a == NULL""; i.e. the INTENT(OUT) autodeallocation block needs to be enclosed with a ""if (a !=NULL)"" as remarked by Dennis (http://gcc.gnu.org/ml/fortran/2009-10/msg00221.html).sub1 (a){  [...snip printing ""in sub1"" stuff...]  {    struct array1_real(kind=4) * D.555;    if (a->data != 0B)      {        __builtin_free (a->data);      }    a->data = 0B;    D.555 = a != 0B ? a : 0B;    sub2 (D.555);  }By the way the line ""D.555 = a != 0B ? a : 0B;"" is redundant - and also not nice because making the alias analysis for the middle end more difficult.",RESOLVED          FIXED      
41850,Tobias Burnus,Wrong-code with optional allocatable arrays,"As reported by Thomas Robitaille athttp://gcc.gnu.org/ml/fortran/2009-10/msg00220.htmlthe following code gives wrong-code (segfault/buserror) at run time with GCC 4.2/4.3/4.4/4.5. (4.1 does not support allocatable dummies.)$ ./a.out in sub1Bus errormodule test_module  implicit nonecontains  subroutine sub2(a)    implicit none    real,allocatable,intent(out),optional :: a(:)    print *,'in sub2'  end subroutine sub2  subroutine sub1(a)    implicit none    real,allocatable,intent(out),optional :: a(:)    print *,'in sub1'    call sub2(a)  end subroutine sub1end module test_moduleprogram test  use test_module  implicit none  call sub1()end programThe problem is that the argument can be ""NULL"" - and there is no check for the case ""a == NULL""; i.e. the INTENT(OUT) autodeallocation block needs to be enclosed with a ""if (a !=NULL)"" as remarked by Dennis (http://gcc.gnu.org/ml/fortran/2009-10/msg00221.html).sub1 (a){  [...snip printing ""in sub1"" stuff...]  {    struct array1_real(kind=4) * D.555;    if (a->data != 0B)      {        __builtin_free (a->data);      }    a->data = 0B;    D.555 = a != 0B ? a : 0B;    sub2 (D.555);  }By the way the line ""D.555 = a != 0B ? a : 0B;"" is redundant - and also not nice because making the alias analysis for the middle end more difficult.",RESOLVED          FIXED      
40851,Tobias Burnus,[4.3/4.4/4.5] problem with deallocation of pointers,"gfortran seems to deallocate a pointer which was not allocated or need not be allocated. The program below compiles, but when executed returns the following error message:a.out(8814) malloc: *** error for object 0x1fa2: Non-aligned pointer being freed*** set a breakpoint in malloc_error_break to debugBus error(Happens for Linux x86 and x86-64 as well as MAC OS X)The code is:program main  type :: string     character,dimension(:),allocatable :: chars  end type string  type :: string_container     type(string) :: string  end type string_container  type(string_container), pointer :: ptr  call set_ptr (ptr)contains  subroutine set_ptr (ptr)    type(string_container), pointer, intent(out) :: ptr    ptr => null ()  end subroutine set_ptrend program main",RESOLVED          FIXED      
40851,Tobias Burnus,[4.3/4.4/4.5] problem with deallocation of pointers,"gfortran seems to deallocate a pointer which was not allocated or need not be allocated. The program below compiles, but when executed returns the following error message:a.out(8814) malloc: *** error for object 0x1fa2: Non-aligned pointer being freed*** set a breakpoint in malloc_error_break to debugBus error(Happens for Linux x86 and x86-64 as well as MAC OS X)The code is:program main  type :: string     character,dimension(:),allocatable :: chars  end type string  type :: string_container     type(string) :: string  end type string_container  type(string_container), pointer :: ptr  call set_ptr (ptr)contains  subroutine set_ptr (ptr)    type(string_container), pointer, intent(out) :: ptr    ptr => null ()  end subroutine set_ptrend program main",RESOLVED          FIXED      
41034,Tobias Burnus,[4.5 Regression] Wrongly rejected proc pointer assignment with CDECL (compiler-directive_1.f90),"http://gcc.gnu.org/ml/fortran/2009-08/msg00095.htmlExcess errors:/usr/home/sgk/gcc/gcc4x/gcc/testsuite/gfortran.dg/compiler-directive_1.f90:33: Error: Mismatch in the procedure pointer assignment at (1): mismatch in the calling convention/usr/home/sgk/gcc/gcc4x/gcc/testsuite/gfortran.dg/compiler-directive_1.f90:34: Error: Mismatch in the procedure pointer assignment at (1): mismatch in the calling conventionReduced example: Should work, but shows:  ptr => sub         1  Error: Mismatch in the procedure pointer assignment at (1): mismatch in the         calling convention(gdb) p lvalue->symtree->n.sym->attr.ext_attr$4 = 17(gdb) p rvalue->symtree->n.sym->attr.ext_attr$5 = 15EXT_ATTR_DLLIMPORT = 0  ->  1<<0 =  1EXT_ATTR_DLLEXPORT = 1  ->  1<<1 =  2EXT_ATTR_STDCALL   = 2  ->  1<<2 =  4EXT_ATTR_CDECL     = 3  ->  1<<3 =  8EXT_ATTR_FASTCALL  = 4  ->  1<<4 = 16Thus we have for LHS: EXT_ATTR_FASTCALL | EXT_ATTR_DLLIMPORT         and for RHS: the first 4 itemsIn other words: Seemingly random data. interface   subroutine sub()     !GCC$ ATTRIBUTES CDECL :: sub   end subroutine sub end interface procedure(), pointer :: ptr !GCC$ ATTRIBUTES CDECL :: sub ptr => subendPresumably introduced with:URL: http://gcc.gnu.org/viewcvs?root=gcc&view=rev&rev=150589Log:2009-08-05  Tobias Burnus  <burnus@net-b.de>        PR fortran/40955",RESOLVED          FIXED      
41034,Tobias Burnus,[4.5 Regression] Wrongly rejected proc pointer assignment with CDECL (compiler-directive_1.f90),"http://gcc.gnu.org/ml/fortran/2009-08/msg00095.htmlExcess errors:/usr/home/sgk/gcc/gcc4x/gcc/testsuite/gfortran.dg/compiler-directive_1.f90:33: Error: Mismatch in the procedure pointer assignment at (1): mismatch in the calling convention/usr/home/sgk/gcc/gcc4x/gcc/testsuite/gfortran.dg/compiler-directive_1.f90:34: Error: Mismatch in the procedure pointer assignment at (1): mismatch in the calling conventionReduced example: Should work, but shows:  ptr => sub         1  Error: Mismatch in the procedure pointer assignment at (1): mismatch in the         calling convention(gdb) p lvalue->symtree->n.sym->attr.ext_attr$4 = 17(gdb) p rvalue->symtree->n.sym->attr.ext_attr$5 = 15EXT_ATTR_DLLIMPORT = 0  ->  1<<0 =  1EXT_ATTR_DLLEXPORT = 1  ->  1<<1 =  2EXT_ATTR_STDCALL   = 2  ->  1<<2 =  4EXT_ATTR_CDECL     = 3  ->  1<<3 =  8EXT_ATTR_FASTCALL  = 4  ->  1<<4 = 16Thus we have for LHS: EXT_ATTR_FASTCALL | EXT_ATTR_DLLIMPORT         and for RHS: the first 4 itemsIn other words: Seemingly random data. interface   subroutine sub()     !GCC$ ATTRIBUTES CDECL :: sub   end subroutine sub end interface procedure(), pointer :: ptr !GCC$ ATTRIBUTES CDECL :: sub ptr => subendPresumably introduced with:URL: http://gcc.gnu.org/viewcvs?root=gcc&view=rev&rev=150589Log:2009-08-05  Tobias Burnus  <burnus@net-b.de>        PR fortran/40955",RESOLVED          FIXED      
40955,Tobias Burnus,STDCALL attributes are not saved in the .MOD files,See also:http://groups.google.com/group/comp.lang.fortran/browse_thread/thread/eb7ca487876d9420,RESOLVED          FIXED      
40955,Tobias Burnus,STDCALL attributes are not saved in the .MOD files,See also:http://groups.google.com/group/comp.lang.fortran/browse_thread/thread/eb7ca487876d9420,RESOLVED          FIXED      
40898,Tobias Burnus,STDCALL mangling problem for strings @8 instead of @4,"There seems to be a problem with mangling, STDCALL and BIND(C), seehttp://groups.google.com/group/comp.lang.fortran/browse_thread/thread/eb7ca487876d9420",RESOLVED          FIXED      
40898,Tobias Burnus,STDCALL mangling problem for strings @8 instead of @4,"There seems to be a problem with mangling, STDCALL and BIND(C), seehttp://groups.google.com/group/comp.lang.fortran/browse_thread/thread/eb7ca487876d9420",RESOLVED          FIXED      
40605,Tobias Burnus,#NAME?,"-fcheck=pointer gives a segfault for a not present actual argument. Fix:+++ trans-expr.c        (working copy)@@ -2778 +2778 @@ gfc_conv_procedure_call (gfc_se * se, gf-      if (gfc_option.rtcheck & GFC_RTCHECK_POINTER)+      if (gfc_option.rtcheck & GFC",RESOLVED          FIXED      
40605,Tobias Burnus,#NAME?,"-fcheck=pointer gives a segfault for a not present actual argument. Fix:+++ trans-expr.c        (working copy)@@ -2778 +2778 @@ gfc_conv_procedure_call (gfc_se * se, gf-      if (gfc_option.rtcheck & GFC_RTCHECK_POINTER)+      if (gfc_option.rtcheck & GFC",RESOLVED          FIXED      
40675,Tobias Burnus,Support -fnosign-zero for SIGN intrinsic for Fortran 77 compatibility,"sahp7641> /var/scratch2/gcc4/bin/gfortran -vUsing built-in specs.Target: x86_64-unknown-linux-gnuConfigured with: ../gcc-4.4.0/configure --prefix=/var/scratch2/gcc4/ --enable-languages=c++,c,fortran --with-mpfr=/var/scratch2Thread model: posixgcc version 4.4.0 (GCC)The sign intrinsic gives an incorrect value when the second argument is 0.0:      program main      val = 0.0      test = sign(0.5, val) - sign(0.5, -val)      test2 = mysign(0.5, val)      if (test .ne. test2) then        write (*,*) 'fail'      else        write (*,*) 'pass'      end if      stop      end      real function mysign(a, b)C ...Returns `ABS(A)*s', where s is +1 if `B.GE.0', -1 otherwise.       if (b .ge. 0) then        s = 1.0      else        s = -1.0      end if      mysign = abs(a) * s      return      endThe function 'mysign' implements the definition of the sign function listed at http://gcc.gnu.org/onlinedocs/gcc-3.4.6/g77/Sign-Intrinsic.html.When run with gfortran (versions 4.1.2 and 4.4.0 at least), the executable prints 'fail'.  When built with g77 or intel fortran, it prints 'pass' as expected.The reason I classified this as a major bug is that old fortran vector codes use the following idiom to detect a zero value:test = sign(0.5, val) + sign(0.5, -val)ratio = value2 / (val + test)If val is zero, then test would be 1.0 and ratio ends up with a defined value.  Later on outside the vector loop, error checking is done to catch the potential bad values.",RESOLVED          FIXED      
40675,Tobias Burnus,Support -fnosign-zero for SIGN intrinsic for Fortran 77 compatibility,"sahp7641> /var/scratch2/gcc4/bin/gfortran -vUsing built-in specs.Target: x86_64-unknown-linux-gnuConfigured with: ../gcc-4.4.0/configure --prefix=/var/scratch2/gcc4/ --enable-languages=c++,c,fortran --with-mpfr=/var/scratch2Thread model: posixgcc version 4.4.0 (GCC)The sign intrinsic gives an incorrect value when the second argument is 0.0:      program main      val = 0.0      test = sign(0.5, val) - sign(0.5, -val)      test2 = mysign(0.5, val)      if (test .ne. test2) then        write (*,*) 'fail'      else        write (*,*) 'pass'      end if      stop      end      real function mysign(a, b)C ...Returns `ABS(A)*s', where s is +1 if `B.GE.0', -1 otherwise.       if (b .ge. 0) then        s = 1.0      else        s = -1.0      end if      mysign = abs(a) * s      return      endThe function 'mysign' implements the definition of the sign function listed at http://gcc.gnu.org/onlinedocs/gcc-3.4.6/g77/Sign-Intrinsic.html.When run with gfortran (versions 4.1.2 and 4.4.0 at least), the executable prints 'fail'.  When built with g77 or intel fortran, it prints 'pass' as expected.The reason I classified this as a major bug is that old fortran vector codes use the following idiom to detect a zero value:test = sign(0.5, val) + sign(0.5, -val)ratio = value2 / (val + test)If val is zero, then test would be 1.0 and ratio ends up with a defined value.  Later on outside the vector loop, error checking is done to catch the potential bad values.",RESOLVED          FIXED      
40580,Tobias Burnus,Add -fcheck=pointer with runtime check for using an unallocated argument,"If one passes an ALLOCATABLE variable as actual to a dummy argument which is not ALLOCATBLE, the should be an optional run-time to check whether the variable is allocated.For pointers, one could check whether a pointer is NULL as this means non-associated. Checking for an uninitialized pointer is more difficult ...Using NAG f95 -C=pointer, the error is:  ALLOCATABLE array N is not currently allocated  Program terminated by fatal error  In $main$, line 2 of test.f90Using ifort -check pointers, the result is:  forrtl: severe (408): fort: (7): Attempt to use pointer N when it is not  associated with a target  a.out              0000000000402D2D  BAR                         6  test.f90  a.out              0000000000402C60  MAIN__                      2  test.f90Remark: NAG f95 does the check for the actual argument, ifort does it before using the dummy argument.I think I would fiddle it into gfc_conv_procedure_call (-> se.pre) using the check:  if (actual->attr.allocatable      && (!formal || !formal->attr.allocatable)      && (gfc_option.rtcheck & GFC_RTCHECK_POINTER))   generateCode: if( not associated(actual) ) then rt-error  else if (actual->attr.pointer           && (!formal || !forrmal->attr.pointer)           && (gfc_option.rtcheck & GFC_RTCHECK_POINTER))   generateCode: if( actual == NULL ) then rt-error(The check will fail if the actual argument is an uninitialized pointer; for this and further pointer checks, see PR .)integer, allocatable :: n(:)call bar(n)contains  subroutine bar(n)    integer :: n(:)    print *, n  end subroutine barend",RESOLVED          FIXED      
40580,Tobias Burnus,Add -fcheck=pointer with runtime check for using an unallocated argument,"If one passes an ALLOCATABLE variable as actual to a dummy argument which is not ALLOCATBLE, the should be an optional run-time to check whether the variable is allocated.For pointers, one could check whether a pointer is NULL as this means non-associated. Checking for an uninitialized pointer is more difficult ...Using NAG f95 -C=pointer, the error is:  ALLOCATABLE array N is not currently allocated  Program terminated by fatal error  In $main$, line 2 of test.f90Using ifort -check pointers, the result is:  forrtl: severe (408): fort: (7): Attempt to use pointer N when it is not  associated with a target  a.out              0000000000402D2D  BAR                         6  test.f90  a.out              0000000000402C60  MAIN__                      2  test.f90Remark: NAG f95 does the check for the actual argument, ifort does it before using the dummy argument.I think I would fiddle it into gfc_conv_procedure_call (-> se.pre) using the check:  if (actual->attr.allocatable      && (!formal || !formal->attr.allocatable)      && (gfc_option.rtcheck & GFC_RTCHECK_POINTER))   generateCode: if( not associated(actual) ) then rt-error  else if (actual->attr.pointer           && (!formal || !forrmal->attr.pointer)           && (gfc_option.rtcheck & GFC_RTCHECK_POINTER))   generateCode: if( actual == NULL ) then rt-error(The check will fail if the actual argument is an uninitialized pointer; for this and further pointer checks, see PR .)integer, allocatable :: n(:)call bar(n)contains  subroutine bar(n)    integer :: n(:)    print *, n  end subroutine barend",RESOLVED          FIXED      
40270,Tobias Burnus,[4.5 Regression]  Revision 147883 caused many Fortran regressions,Revision 147883:http://gcc.gnu.org/ml/gcc-cvs/2009-05/msg00860.htmlcaused many Fortran regressions:http://gcc.gnu.org/ml/gcc-regression/2009-05/msg00265.html,RESOLVED          FIXED      
40270,Tobias Burnus,[4.5 Regression]  Revision 147883 caused many Fortran regressions,Revision 147883:http://gcc.gnu.org/ml/gcc-cvs/2009-05/msg00860.htmlcaused many Fortran regressions:http://gcc.gnu.org/ml/gcc-regression/2009-05/msg00265.html,RESOLVED          FIXED      
39178,Tobias Burnus,Generate main() rather than using a main in libgfortran/fmain.c,"Topic brought up on #gfortran by Janne.There are some potential issues in using main.c in a library; thus one should have only link a ""main()"" if the *.o files don't have a ""main"".See also:http://groups.google.com/group/comp.os.linux.development.apps/browse_thread/thread/e35b2224a7dc27bf/http://groups.google.com/group/comp.lang.fortran/browse_thread/thread/7d483c59db0bb6f/The solution of SUN is to generate for PROGRAM not only a ""MAIN_"" but also a main() which does the initialization and calls then MAIN_. (""MAIN_"" should be present for backward compatibility.)I think we could do likewise, especially as the code is rather short (libgfortran/fmain.c):main (int argc, char *argv[]) {  store_exe_path (argv[0]);  set_args (argc, argv);  MAIN__ (); /* The Fortran PROGRAM */  return 0;}Intel's solution is to link ""for_main-o"", but that is not as elegant as for ""ifort *.o"" one needs to specify ""-nofor-main"" if there is a non-fortran C library. * * *Independent of all, I think one should document the gfortran_init() functions to make the full library functions available even if the ""main()"" program is written in C. Besides  store_exe_path (argv[0]);  set_args (argc, argv);(which should be combined to one function) one also has  _gfortran_set_options() * * *Marked as depending on the array descriptor stuff as with the ABI break one can get also rid of fmain.c's main(). It might also help with -fwhole-program (cf. PR fortran/26682) as a ""main()"" shouldn't be optimized away ;-)",RESOLVED          FIXED      
39178,Tobias Burnus,Generate main() rather than using a main in libgfortran/fmain.c,"Topic brought up on #gfortran by Janne.There are some potential issues in using main.c in a library; thus one should have only link a ""main()"" if the *.o files don't have a ""main"".See also:http://groups.google.com/group/comp.os.linux.development.apps/browse_thread/thread/e35b2224a7dc27bf/http://groups.google.com/group/comp.lang.fortran/browse_thread/thread/7d483c59db0bb6f/The solution of SUN is to generate for PROGRAM not only a ""MAIN_"" but also a main() which does the initialization and calls then MAIN_. (""MAIN_"" should be present for backward compatibility.)I think we could do likewise, especially as the code is rather short (libgfortran/fmain.c):main (int argc, char *argv[]) {  store_exe_path (argv[0]);  set_args (argc, argv);  MAIN__ (); /* The Fortran PROGRAM */  return 0;}Intel's solution is to link ""for_main-o"", but that is not as elegant as for ""ifort *.o"" one needs to specify ""-nofor-main"" if there is a non-fortran C library. * * *Independent of all, I think one should document the gfortran_init() functions to make the full library functions available even if the ""main()"" program is written in C. Besides  store_exe_path (argv[0]);  set_args (argc, argv);(which should be combined to one function) one also has  _gfortran_set_options() * * *Marked as depending on the array descriptor stuff as with the ABI break one can get also rid of fmain.c's main(). It might also help with -fwhole-program (cf. PR fortran/26682) as a ""main()"" shouldn't be optimized away ;-)",RESOLVED          FIXED      
40246,Tobias Burnus,ICE on invalid SOURCE= using NULLIFY,"real, pointer :: ptr    nullify(ptr, mesh%coarser)    endgives an ICE:    nullify(ptr, mesh%coarser)   1Internal Error at (1):free_expr0(): Bad expr type",RESOLVED          FIXED      
40246,Tobias Burnus,ICE on invalid SOURCE= using NULLIFY,"real, pointer :: ptr    nullify(ptr, mesh%coarser)    endgives an ICE:    nullify(ptr, mesh%coarser)   1Internal Error at (1):free_expr0(): Bad expr type",RESOLVED          FIXED      
34153,Tobias Burnus,"Debugging: Cannot set breakpoint in comment lines or ""END PROGRAM""","Hi,I'm having a problem using gdb to debug code compiled with gfortran (v 4.3.0). The code:      program test      i = 1C     Breakpoint here      endwhen compiled with ""gfortran -gstabs -o prog prog.f"", debugged with ""gdb prog"" demonstrates the error. The commands:(gdb) break 3(gdb) runproduces the output:> Starting program: /private/tmp/prog > Reading symbols for shared libraries .++ done> > Breakpoint 1, main (argc=1, argv=0xbfffe9b8) at ../../../gcc-4.3-20070810/libgfortran/fmain.c:12> 12      ../../../gcc-4.3-20070810/libgfortran/fmain.c: No such file or directory.>       in ../../../gcc-4.3-20070810/libgfortran/fmain.cAt this point commands to examine symbols fail:(gdb) display iNo symbol ""i"" in current context.The problem is the same on a PowerPC machine also.",RESOLVED          FIXED      
34153,Tobias Burnus,"Debugging: Cannot set breakpoint in comment lines or ""END PROGRAM""","Hi,I'm having a problem using gdb to debug code compiled with gfortran (v 4.3.0). The code:      program test      i = 1C     Breakpoint here      endwhen compiled with ""gfortran -gstabs -o prog prog.f"", debugged with ""gdb prog"" demonstrates the error. The commands:(gdb) break 3(gdb) runproduces the output:> Starting program: /private/tmp/prog > Reading symbols for shared libraries .++ done> > Breakpoint 1, main (argc=1, argv=0xbfffe9b8) at ../../../gcc-4.3-20070810/libgfortran/fmain.c:12> 12      ../../../gcc-4.3-20070810/libgfortran/fmain.c: No such file or directory.>       in ../../../gcc-4.3-20070810/libgfortran/fmain.cAt this point commands to examine symbols fail:(gdb) display iNo symbol ""i"" in current context.The problem is the same on a PowerPC machine also.",RESOLVED          FIXED      
40041,Tobias Burnus,spurious warning with INTRINSIC statement,"(see also: http://gcc.gnu.org/ml/fortran/2009-05/msg00068.html)$> cat foo.f      INTRINSIC   ABS, MAX      a(n) = MAX(ABS(2),ABS(3),n)      END$> gfortran-svn -Wall -Wextra foo.ffoo.f:1.21:      INTRINSIC   ABS, MAX                     1Warning: Type specified for intrinsic function 'abs' at (1) is ignoredfoo.f:1.26:      INTRINSIC   ABS, MAX                          1Warning: Type specified for intrinsic function 'max' at (1) is ignoredThe same warnings are given if the arguments of ABS/MAX are of default-real kind, so this not related to implicit typing.",RESOLVED          FIXED      
40041,Tobias Burnus,spurious warning with INTRINSIC statement,"(see also: http://gcc.gnu.org/ml/fortran/2009-05/msg00068.html)$> cat foo.f      INTRINSIC   ABS, MAX      a(n) = MAX(ABS(2),ABS(3),n)      END$> gfortran-svn -Wall -Wextra foo.ffoo.f:1.21:      INTRINSIC   ABS, MAX                     1Warning: Type specified for intrinsic function 'abs' at (1) is ignoredfoo.f:1.26:      INTRINSIC   ABS, MAX                          1Warning: Type specified for intrinsic function 'max' at (1) is ignoredThe same warnings are given if the arguments of ABS/MAX are of default-real kind, so this not related to implicit typing.",RESOLVED          FIXED      
39811,Tobias Burnus,Bogus warning for valid continuation lines,"Found inhttp://groups.google.com/group/comp.lang.fortran/browse_thread/thread/58d772090de9d1f4Test case by Dick Hendrickson, gfortran tested by Ron Shepard.The executable is OK, but gfortran prints a bogus warning:  Warning: '&' not allowed by itself in line 2(The run-time result is: Print rather a lot of ampersands &&&&&&&&&&&)  PRINT *, 'Print rather a lot of ampersands &&&&&   &&&&&   &&&&&'   end",RESOLVED          FIXED      
39811,Tobias Burnus,Bogus warning for valid continuation lines,"Found inhttp://groups.google.com/group/comp.lang.fortran/browse_thread/thread/58d772090de9d1f4Test case by Dick Hendrickson, gfortran tested by Ron Shepard.The executable is OK, but gfortran prints a bogus warning:  Warning: '&' not allowed by itself in line 2(The run-time result is: Print rather a lot of ampersands &&&&&&&&&&&)  PRINT *, 'Print rather a lot of ampersands &&&&&   &&&&&   &&&&&'   end",RESOLVED          FIXED      
39594,Tobias Burnus,[4.4/4.5 Regression] compiler falls over in gfc_get_symbol_decl,"$ /usr/local/gfortran/bin/gfortran --save-temps -c -fno-second-underscore -fdefault-integer-8 -m64 -DMOLPRO -I. -I.. -I../global  f12_integrals.f f12_integrals.f: In function 'dfasmbl_f12':f12_integrals.f:2850: internal compiler error: in gfc_get_symbol_decl, at fortran/trans-decl.c:950Please submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.$ gfortran -vUsing built-in specs.Target: i386-apple-darwin8.10.1Configured with: /tmp/gfortran-20090321/ibin/../gcc/configure --prefix=/usr/local/gfortran --enable-languages=c,fortran --with-gmp=/tmp/gfortran-20090321/gfortran_libs --enable-bootstrapThread model: posixgcc version 4.4.0 20090321 (experimental) [trunk revision 144983] (GCC)",RESOLVED          FIXED      
39594,Tobias Burnus,[4.4/4.5 Regression] compiler falls over in gfc_get_symbol_decl,"$ /usr/local/gfortran/bin/gfortran --save-temps -c -fno-second-underscore -fdefault-integer-8 -m64 -DMOLPRO -I. -I.. -I../global  f12_integrals.f f12_integrals.f: In function 'dfasmbl_f12':f12_integrals.f:2850: internal compiler error: in gfc_get_symbol_decl, at fortran/trans-decl.c:950Please submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.$ gfortran -vUsing built-in specs.Target: i386-apple-darwin8.10.1Configured with: /tmp/gfortran-20090321/ibin/../gcc/configure --prefix=/usr/local/gfortran --enable-languages=c,fortran --with-gmp=/tmp/gfortran-20090321/gfortran_libs --enable-bootstrapThread model: posixgcc version 4.4.0 20090321 (experimental) [trunk revision 144983] (GCC)",RESOLVED          FIXED      
38065,Tobias Burnus,private/public confusion with a contained function,"Hello,Thank you for fixing the last bug I reported, number 37445.I am attempting to build my lens design program. I encounter the followingerrors when I compile file geomotfM.f90:/home/norm/design/source/geomotfM.f90:836.4:    function CreateLine ( RayData, MaxFreq, NoOfGoodRays, ChromaticWeights, Err   1Error: PUBLIC function 'createline' at (1) cannot be of PRIVATE type 'tline'This is incorrect. Both the type TLine and the function CreateLine are private to the module. The NAG, Intel and g95 compilers all compile this.I tried to reproduce this problem with a small example, but I did not succeed. As soon as I am assigned a bug number, I will upload a tar file, bug5.tgz tothe following address: gcc-bugzilla@gcc.gnu.org. Unpack the file and invoke theshell script bug5.sh to reproduce the problem.I'll indicate the bug number in the subject line.I am running Open SuSE 10.1 on a dual core Athlon chip. I'm using the gcc-trunkbuild:norm@oxford:~/design/gfortran/production> gfortran --versionGNU Fortran (GCC) 4.4.0 20081109 (experimental) [trunk revision 141714]Copyright (C) 2008 Free Software Foundation, Inc.Thank you for your attention.Norm Clerman",RESOLVED          FIXED      
38065,Tobias Burnus,private/public confusion with a contained function,"Hello,Thank you for fixing the last bug I reported, number 37445.I am attempting to build my lens design program. I encounter the followingerrors when I compile file geomotfM.f90:/home/norm/design/source/geomotfM.f90:836.4:    function CreateLine ( RayData, MaxFreq, NoOfGoodRays, ChromaticWeights, Err   1Error: PUBLIC function 'createline' at (1) cannot be of PRIVATE type 'tline'This is incorrect. Both the type TLine and the function CreateLine are private to the module. The NAG, Intel and g95 compilers all compile this.I tried to reproduce this problem with a small example, but I did not succeed. As soon as I am assigned a bug number, I will upload a tar file, bug5.tgz tothe following address: gcc-bugzilla@gcc.gnu.org. Unpack the file and invoke theshell script bug5.sh to reproduce the problem.I'll indicate the bug number in the subject line.I am running Open SuSE 10.1 on a dual core Athlon chip. I'm using the gcc-trunkbuild:norm@oxford:~/design/gfortran/production> gfortran --versionGNU Fortran (GCC) 4.4.0 20081109 (experimental) [trunk revision 141714]Copyright (C) 2008 Free Software Foundation, Inc.Thank you for your attention.Norm Clerman",RESOLVED          FIXED      
37580,Tobias Burnus,"[4.3/4.4 Regression] Accepts ""pointer(:) => target"" without lower bound","Hi,following invalid code compiles w/o error with gfortran 4.4.0program test  real, pointer :: a(:), b(:)  a(:) => b(:)end program testworks as expected with earliear versions.$ gfortran -vUsing built-in specs.Target: i586-pc-linux-gnuConfigured with: /home/fx/gfortran_nightbuild/trunk/configure --prefix=/home/fx/gfortran_nightbuild/irun-20080918 --enable-languages=c,fortran --build=i586-pc-linux-gnu --enable-checking=release --with-gmp=/home/fx/gfortran_nightbuild/softwareThread model: posixgcc version 4.4.0 20080918 (experimental) [trunk revision 140443] (GCC)Regards, Juha",RESOLVED          FIXED      
37580,Tobias Burnus,"[4.3/4.4 Regression] Accepts ""pointer(:) => target"" without lower bound","Hi,following invalid code compiles w/o error with gfortran 4.4.0program test  real, pointer :: a(:), b(:)  a(:) => b(:)end program testworks as expected with earliear versions.$ gfortran -vUsing built-in specs.Target: i586-pc-linux-gnuConfigured with: /home/fx/gfortran_nightbuild/trunk/configure --prefix=/home/fx/gfortran_nightbuild/irun-20080918 --enable-languages=c,fortran --build=i586-pc-linux-gnu --enable-checking=release --with-gmp=/home/fx/gfortran_nightbuild/softwareThread model: posixgcc version 4.4.0 20080918 (experimental) [trunk revision 140443] (GCC)Regards, Juha",RESOLVED          FIXED      
37626,Tobias Burnus,ICE for automatic deallocation of character result variable,"The sample code below produces the following internal compiler error:unique_A.f90: In function 'unique_a':unique_A.f90:42: internal compiler error: Segmentation faultThe error seems to be associated with use of the PACK() intrinsic.--CUT HERE--function unique_A (x, sorted) result (x_unique)  character(*), dimension(:), intent(in)       :: x  logical, intent(in), optional                :: sorted  character(LEN(x)), dimension(:), allocatable :: x_unique  logical                                      :: sorted_  character(LEN(x)), dimension(SIZE(x))        :: x_sorted  integer                                      :: n_x  logical, dimension(SIZE(x))                  :: mask  integer, external                            :: b3ss_index! Set up sorted_  if(PRESENT(sorted)) then     sorted_ = sorted  else     sorted_ = .FALSE.  endif! If necessary, sort x    if(sorted_) then     x_sorted = x  else     x_sorted = x(b3ss_index(x))  endif! Set up the unique array  n_x = SIZE(x)  mask = (/.TRUE.,x_sorted(2:n_x) /= x_sorted(1:n_x-1)/)  allocate(x_unique(COUNT(mask)))  x_unique = PACK(x_sorted, MASK=mask)! Finish  returnend function unique_A",RESOLVED          FIXED      
37626,Tobias Burnus,ICE for automatic deallocation of character result variable,"The sample code below produces the following internal compiler error:unique_A.f90: In function 'unique_a':unique_A.f90:42: internal compiler error: Segmentation faultThe error seems to be associated with use of the PACK() intrinsic.--CUT HERE--function unique_A (x, sorted) result (x_unique)  character(*), dimension(:), intent(in)       :: x  logical, intent(in), optional                :: sorted  character(LEN(x)), dimension(:), allocatable :: x_unique  logical                                      :: sorted_  character(LEN(x)), dimension(SIZE(x))        :: x_sorted  integer                                      :: n_x  logical, dimension(SIZE(x))                  :: mask  integer, external                            :: b3ss_index! Set up sorted_  if(PRESENT(sorted)) then     sorted_ = sorted  else     sorted_ = .FALSE.  endif! If necessary, sort x    if(sorted_) then     x_sorted = x  else     x_sorted = x(b3ss_index(x))  endif! Set up the unique array  n_x = SIZE(x)  mask = (/.TRUE.,x_sorted(2:n_x) /= x_sorted(1:n_x-1)/)  allocate(x_unique(COUNT(mask)))  x_unique = PACK(x_sorted, MASK=mask)! Finish  returnend function unique_A",RESOLVED          FIXED      
37420,Tobias Burnus,[4.4 Regression] -Wunused-variable broken,"Consider the following Fortran code:subroutine s(x)  real :: x  integer :: iend subroutineCompiling this with ""gfortran-4.3 -Wunused-variable"" triggered two warnings:Warning: Unused variable 'i' declared at (1)Warning: Unused dummy argument 'x' at (1)With recent trunk builds the first one is missing, and only the missing dummy argument is detected. This seems to be a Fortran-specific problem, since unused variables in C code are reported as expected.Observed on x86_64-unknown-linux-gnu with rev. 140091.",RESOLVED          FIXED      
37420,Tobias Burnus,[4.4 Regression] -Wunused-variable broken,"Consider the following Fortran code:subroutine s(x)  real :: x  integer :: iend subroutineCompiling this with ""gfortran-4.3 -Wunused-variable"" triggered two warnings:Warning: Unused variable 'i' declared at (1)Warning: Unused dummy argument 'x' at (1)With recent trunk builds the first one is missing, and only the missing dummy argument is detected. This seems to be a Fortran-specific problem, since unused variables in C code are reported as expected.Observed on x86_64-unknown-linux-gnu with rev. 140091.",RESOLVED          FIXED      
36476,Tobias Burnus,ICE: len=* CHARACTER array with separate PARAMETER statement,"The following code triggers an ICE even with gfortran 4.3.1:=================================================================bash$ gfortran -vUsing built-in specs.Target: x86_64-unknown-linux-gnuConfigured with: ../gcc-4.3.1/configure --with-pkgversion='DLR MF/AP UPAS 2008-06-09' --with-bugurl=walter.zimmer@dlr.de --prefix=/local/upas/inst-devel --enable-languages=c,c++,fortran --with-gmp-include=/local/upas/compile/gmp-4.2.2 --with-gmp-lib=/local/upas/compile/gmp-4.2.2/.libs --with-mpfr-include=/local/upas/compile/mpfr-2.3.1 --with-mpfr-lib=/local/upas/compile/mpfr-2.3.1/.libsThread model: posixgcc version 4.3.1 (DLR MF/AP UPAS 2008-06-09)bash$ cat funny.F      SUBROUTINE FUNNY_STRINGS      character*256   STRING      CHARACTER (len=*) MY_STRING(1:3)      PARAMETER ( MY_STRING =  (/ ""A"" , ""B"", ""C"" /) )      STRING = MY_STRING(1)      RETURN      ENDbash$ gfortran -c funny.Ffunny.F: In function ‘funny_strings’:funny.F:1: internal compiler error: in gfc_get_symbol_decl, at fortran/trans-decl.c:1031=================================================================I suspect this is valid code, but at the end this is not the point as an ICE should not happen here.Maybe it's related to bug id 36322, as an array is also used there, but the line number in gfc_get_symbol_decl is different, so I suspect not.This ICE is also triggered with gfortran 4.3.0 and 4.1.2.",RESOLVED          FIXED      
36476,Tobias Burnus,ICE: len=* CHARACTER array with separate PARAMETER statement,"The following code triggers an ICE even with gfortran 4.3.1:=================================================================bash$ gfortran -vUsing built-in specs.Target: x86_64-unknown-linux-gnuConfigured with: ../gcc-4.3.1/configure --with-pkgversion='DLR MF/AP UPAS 2008-06-09' --with-bugurl=walter.zimmer@dlr.de --prefix=/local/upas/inst-devel --enable-languages=c,c++,fortran --with-gmp-include=/local/upas/compile/gmp-4.2.2 --with-gmp-lib=/local/upas/compile/gmp-4.2.2/.libs --with-mpfr-include=/local/upas/compile/mpfr-2.3.1 --with-mpfr-lib=/local/upas/compile/mpfr-2.3.1/.libsThread model: posixgcc version 4.3.1 (DLR MF/AP UPAS 2008-06-09)bash$ cat funny.F      SUBROUTINE FUNNY_STRINGS      character*256   STRING      CHARACTER (len=*) MY_STRING(1:3)      PARAMETER ( MY_STRING =  (/ ""A"" , ""B"", ""C"" /) )      STRING = MY_STRING(1)      RETURN      ENDbash$ gfortran -c funny.Ffunny.F: In function ‘funny_strings’:funny.F:1: internal compiler error: in gfc_get_symbol_decl, at fortran/trans-decl.c:1031=================================================================I suspect this is valid code, but at the end this is not the point as an ICE should not happen here.Maybe it's related to bug id 36322, as an array is also used there, but the line number in gfc_get_symbol_decl is different, so I suspect not.This ICE is also triggered with gfortran 4.3.0 and 4.1.2.",RESOLVED          FIXED      
35156,Tobias Burnus,[patch] Deprecate -M<dir>,"Consists of two parts:a) Deprecation:   http://gcc.gnu.org/ml/fortran/2008-01/msg00366.html   (This patch has been OKed and waits for the 4.4.0 trunk to open.)b) Some clean up   cf PR 35019 for gcc/fortran/options.c   OPT_M cannot be reached and ""Only one -J option"" is detected already earlier",RESOLVED          FIXED      
35156,Tobias Burnus,[patch] Deprecate -M<dir>,"Consists of two parts:a) Deprecation:   http://gcc.gnu.org/ml/fortran/2008-01/msg00366.html   (This patch has been OKed and waits for the 4.4.0 trunk to open.)b) Some clean up   cf PR 35019 for gcc/fortran/options.c   OPT_M cannot be reached and ""Only one -J option"" is detected already earlier",RESOLVED          FIXED      
35033,Tobias Burnus,Valid ASSIGNMENT(=) rejected,"To my understanding, the interface declaration is valid (Fortran 2003, ignoring VOLATILE valid Fortran 95). However, gfortran rejects it with:             END SUBROUTINE                          1Error: Assignment operator interface at (1) must not redefine an INTRINSIC type assignmentNAG f95, ifort and openf95 accept it. * * *From the F2003 interpretations comes also the part below. Here, gfortran fails to diagnose the violation of the constrain""C1233 (R1221) If an actual argument is a pointer array, and the corresponding dummy argument has either the VOLATILE or ASYNCHRONOUS attribute, that dummy argument shall be an assumed-shape array or a pointer array.""(see below).Example (see N1711.txt / F03/0088):          INTERFACE ASSIGNMENT(=)             SUBROUTINE s(a,b)                 REAL,INTENT(OUT),VOLATILE :: a(1,*)                 REAL,INTENT(IN) :: b(:)             END SUBROUTINE          END Interface          REAL,POINTER :: p(:,:),q(:)          CALL s(p,q)    ! Violation of constraint C1233 [271:9-11],                         !  associating P with A          p = q          ! No constraint violation because <actual-arg>                         !  syntax is not being used          endFrom the interpretation request (F03/0088, passed by J3, to be voted on by W5):QUESTION:  Did Fortran 2003 intend to enforce constraints on <actual-arg> in  defined assignment?ANSWER: Yes, the <actual-arg> constraints and restrictions should be enforced in defined assignment and in defined operator evaluation. Edits are provided below to do this.EDITS:  [262:16] add at the end of the paragraph   ""All restrictions and constraints that apply to actual arguments    in a reference to the function also apply to the corresponding    operands in the expression as if they were used as actual arguments.""  [263:12] insert after ""the second argument.""   ""All restrictions and constraints that apply to actual arguments    in a reference to the subroutine also apply to the left-hand-side    and to the right-hand-side enclosed in parentheses as if they were",RESOLVED          FIXED      
35033,Tobias Burnus,Valid ASSIGNMENT(=) rejected,"To my understanding, the interface declaration is valid (Fortran 2003, ignoring VOLATILE valid Fortran 95). However, gfortran rejects it with:             END SUBROUTINE                          1Error: Assignment operator interface at (1) must not redefine an INTRINSIC type assignmentNAG f95, ifort and openf95 accept it. * * *From the F2003 interpretations comes also the part below. Here, gfortran fails to diagnose the violation of the constrain""C1233 (R1221) If an actual argument is a pointer array, and the corresponding dummy argument has either the VOLATILE or ASYNCHRONOUS attribute, that dummy argument shall be an assumed-shape array or a pointer array.""(see below).Example (see N1711.txt / F03/0088):          INTERFACE ASSIGNMENT(=)             SUBROUTINE s(a,b)                 REAL,INTENT(OUT),VOLATILE :: a(1,*)                 REAL,INTENT(IN) :: b(:)             END SUBROUTINE          END Interface          REAL,POINTER :: p(:,:),q(:)          CALL s(p,q)    ! Violation of constraint C1233 [271:9-11],                         !  associating P with A          p = q          ! No constraint violation because <actual-arg>                         !  syntax is not being used          endFrom the interpretation request (F03/0088, passed by J3, to be voted on by W5):QUESTION:  Did Fortran 2003 intend to enforce constraints on <actual-arg> in  defined assignment?ANSWER: Yes, the <actual-arg> constraints and restrictions should be enforced in defined assignment and in defined operator evaluation. Edits are provided below to do this.EDITS:  [262:16] add at the end of the paragraph   ""All restrictions and constraints that apply to actual arguments    in a reference to the function also apply to the corresponding    operands in the expression as if they were used as actual arguments.""  [263:12] insert after ""the second argument.""   ""All restrictions and constraints that apply to actual arguments    in a reference to the subroutine also apply to the left-hand-side    and to the right-hand-side enclosed in parentheses as if they were",RESOLVED          FIXED      
35093,Tobias Burnus,[4.3 Regression] gfortran.dg/data_constraints_1.f90,"With revision 132122, I gotbash-3.2$  /export/build/gnu/gcc/build-x86_64-linux/gcc/testsuite/gfortran/../../gfortran -B/export/build/gnu/gcc/build-x86_64-linux/gcc/testsuite/gfortran/../../ /export/gnu/src/gcc/gcc/gcc/testsuite/gfortran.dg/data_constraints_1.f90   -O   -pedantic-errors -S  -m32 -o  foo.s/export/gnu/src/gcc/gcc/gcc/testsuite/gfortran.dg/data_constraints_1.f90:12.8:  data n /0/            ! { dg-error ""Cannot change attributes"" }       1Error: Cannot change attributes of USE-associated symbol n at (1)/export/gnu/src/gcc/gcc/gcc/testsuite/gfortran.dg/data_constraints_1.f90:20.8:  data l /42/           ! { dg-error ""conflicts with ALLOCATABLE"" }       1Error: DATA attribute conflicts with ALLOCATABLE attribute in 'l' at (1)/export/gnu/src/gcc/gcc/gcc/testsuite/gfortran.dg/data_constraints_1.f90:22.9:  data q /1/            ! { dg-error ""Host associated variable"" }        1Error: Host associated variable 'q' may not be in the DATA statement at (1)/export/gnu/src/gcc/gcc/gcc/testsuite/gfortran.dg/data_constraints_1.f90:23.8:  data m /1/            ! { dg-error ""conflicts with DUMMY attribute"" }       1Error: DATA attribute conflicts with DUMMY attribute in 'm' at (1)/export/gnu/src/gcc/gcc/gcc/testsuite/gfortran.dg/data_constraints_1.f90:24.10:  data bar /99/         ! { dg-error ""conflicts with RESULT"" }         1Error: DATA attribute conflicts with RESULT attribute in 'bar' at (1)/export/gnu/src/gcc/gcc/gcc/testsuite/gfortran.dg/data_constraints_1.f90:28.13:  data foobar /0/       ! { dg-error ""conflicts with FUNCTION"" }            1Error: DATA attribute conflicts with FUNCTION attribute in 'foobar' at (1)/export/gnu/src/gcc/gcc/gcc/testsuite/gfortran.dg/data_constraints_1.f90:21.8:  data p(1) /1/         ! { dg-error ""non-constant array in DATA"" }       1Error: non-constant array in DATA statement (1)*** glibc detected *** /export/build/gnu/gcc/build-x86_64-linux/gcc/testsuite/gfortran/../../f951: double free or corruption (fasttop): 0x0000000000eeb770 ***======= Backtrace: =========/lib64/libc.so.6[0x3472c70412]/lib64/libc.so.6(cfree+0x8c)[0x3472c73b1c]/export/build/gnu/gcc/build-x86_64-linux/gcc/testsuite/gfortran/../../f951[0x411cea]/export/build/gnu/gcc/build-x86_64-linux/gcc/testsuite/gfortran/../../f951[0x45dd29]/export/build/gnu/gcc/build-x86_64-linux/gcc/testsuite/gfortran/../../f951[0x45f72e]/export/build/gnu/gcc/build-x86_64-linux/gcc/testsuite/gfortran/../../f951[0x45f5b8]/export/build/gnu/gcc/build-x86_64-linux/gcc/testsuite/gfortran/../../f951[0x462d7d]/export/build/gnu/gcc/build-x86_64-linux/gcc/testsuite/gfortran/../../f951[0x453cf0]/export/build/gnu/gcc/build-x86_64-linux/gcc/testsuite/gfortran/../../f951[0x47e075]/export/build/gnu/gcc/build-x86_64-linux/gcc/testsuite/gfortran/../../f951[0x63da75]/lib64/libc.so.6(__libc_start_main+0xf4)[0x3472c1dab4]/export/build/gnu/gcc/build-x86_64-linux/gcc/testsuite/gfortran/../../f951(calloc+0x1b9)[0x402d89]======= Memory map: ========00400000-00bd6000 r-xp 00000000 08:11 23330831                           /export/build/gnu/gcc/build-x86_64-linux/gcc/f95100dd5000-00e42000 rw-p 007d5000 08:11 23330831                           /export/build/gnu/gcc/build-x86_64-linux/gcc/f95100e42000-00efc000 rw-p 00e42000 00:00 0                                  [heap]3472800000-347281a000 r-xp 00000000 08:05 11261190                       /lib64/ld-2.6.so3472a1a000-3472a1b000 r--p 0001a000 08:05 11261190                       /lib64/ld-2.6.so3472a1b000-3472a1c000 rw-p 0001b000 08:05 11261190                       /lib64/ld-2.6.so3472c00000-3472d48000 r-xp 00000000 08:05 11261498                       /lib64/libc-2.6.so3472d48000-3472f47000 ---p 00148000 08:05 11261498                       /lib64/libc-2.6.so3472f47000-3472f4b000 r--p 00147000 08:05 11261498                       /lib64/libc-2.6.so3472f4b000-3472f4c000 rw-p 0014b000 08:05 11261498                       /lib64/libc-2.6.so3472f4c000-3472f51000 rw-p 3472f4c000 00:00 0 3473400000-3473402000 r-xp 00000000 08:05 11261508                       /lib64/libdl-2.6.so3473402000-3473602000 ---p 00002000 08:05 11261508                       /lib64/libdl-2.6.so3473602000-3473603000 r--p 00002000 08:05 11261508                       /lib64/libdl-2.6.so3473603000-3473604000 rw-p 00003000 08:05 11261508                       /lib64/libdl-2.6.so3480600000-348060d000 r-xp 00000000 08:05 11261321                       /lib64/libgcc_s-4.1.2-20070925.so.1348060d000-348080d000 ---p 0000d000 08:05 11261321                       /lib64/libgcc_s-4.1.2-20070925.so.1348080d000-348080e000 rw-p 0000d000 08:05 11261321                       /lib64/libgcc_s-4.1.2-20070925.so.12aaaaaaab000-2aaaaaaad000 rw-p 2aaaaaaab000 00:00 0 2aaaaaac9000-2aaaaaacb000 rw-p 2aaaaaac9000 00:00 0 2aaaaaacb000-2aaaae8f5000 r--p 00000000 08:05 2817927                    /usr/lib/locale/locale-archive2aaaae8f5000-2aaaaea28000 rw-p 2aaaae8f5000 00:00 0 2aaaaea28000-2aaaaea2f000 r--s 00000000 08:05 3994609                    /usr/lib64/gconv/gconv-modules.cache2aaab0000000-2aaab0021000 rw-p 2aaab0000000 00:00 0 2aaab0021000-2aaab4000000 ---p 2aaab0021000 00:00 0 7fff86e75000-7fff86e8a000 rw-p 7ffffffea000 00:00 0                      [stack]7fff86ffd000-7fff87000000 r-xp 7fff86ffd000 00:00 0                      [vdso]ffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall]f951: internal compiler error: AbortedPlease submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.bash-3.2$ Revision 132113 is bad and revision 132111 is OK.",RESOLVED          FIXED      
35093,Tobias Burnus,[4.3 Regression] gfortran.dg/data_constraints_1.f90,"With revision 132122, I gotbash-3.2$  /export/build/gnu/gcc/build-x86_64-linux/gcc/testsuite/gfortran/../../gfortran -B/export/build/gnu/gcc/build-x86_64-linux/gcc/testsuite/gfortran/../../ /export/gnu/src/gcc/gcc/gcc/testsuite/gfortran.dg/data_constraints_1.f90   -O   -pedantic-errors -S  -m32 -o  foo.s/export/gnu/src/gcc/gcc/gcc/testsuite/gfortran.dg/data_constraints_1.f90:12.8:  data n /0/            ! { dg-error ""Cannot change attributes"" }       1Error: Cannot change attributes of USE-associated symbol n at (1)/export/gnu/src/gcc/gcc/gcc/testsuite/gfortran.dg/data_constraints_1.f90:20.8:  data l /42/           ! { dg-error ""conflicts with ALLOCATABLE"" }       1Error: DATA attribute conflicts with ALLOCATABLE attribute in 'l' at (1)/export/gnu/src/gcc/gcc/gcc/testsuite/gfortran.dg/data_constraints_1.f90:22.9:  data q /1/            ! { dg-error ""Host associated variable"" }        1Error: Host associated variable 'q' may not be in the DATA statement at (1)/export/gnu/src/gcc/gcc/gcc/testsuite/gfortran.dg/data_constraints_1.f90:23.8:  data m /1/            ! { dg-error ""conflicts with DUMMY attribute"" }       1Error: DATA attribute conflicts with DUMMY attribute in 'm' at (1)/export/gnu/src/gcc/gcc/gcc/testsuite/gfortran.dg/data_constraints_1.f90:24.10:  data bar /99/         ! { dg-error ""conflicts with RESULT"" }         1Error: DATA attribute conflicts with RESULT attribute in 'bar' at (1)/export/gnu/src/gcc/gcc/gcc/testsuite/gfortran.dg/data_constraints_1.f90:28.13:  data foobar /0/       ! { dg-error ""conflicts with FUNCTION"" }            1Error: DATA attribute conflicts with FUNCTION attribute in 'foobar' at (1)/export/gnu/src/gcc/gcc/gcc/testsuite/gfortran.dg/data_constraints_1.f90:21.8:  data p(1) /1/         ! { dg-error ""non-constant array in DATA"" }       1Error: non-constant array in DATA statement (1)*** glibc detected *** /export/build/gnu/gcc/build-x86_64-linux/gcc/testsuite/gfortran/../../f951: double free or corruption (fasttop): 0x0000000000eeb770 ***======= Backtrace: =========/lib64/libc.so.6[0x3472c70412]/lib64/libc.so.6(cfree+0x8c)[0x3472c73b1c]/export/build/gnu/gcc/build-x86_64-linux/gcc/testsuite/gfortran/../../f951[0x411cea]/export/build/gnu/gcc/build-x86_64-linux/gcc/testsuite/gfortran/../../f951[0x45dd29]/export/build/gnu/gcc/build-x86_64-linux/gcc/testsuite/gfortran/../../f951[0x45f72e]/export/build/gnu/gcc/build-x86_64-linux/gcc/testsuite/gfortran/../../f951[0x45f5b8]/export/build/gnu/gcc/build-x86_64-linux/gcc/testsuite/gfortran/../../f951[0x462d7d]/export/build/gnu/gcc/build-x86_64-linux/gcc/testsuite/gfortran/../../f951[0x453cf0]/export/build/gnu/gcc/build-x86_64-linux/gcc/testsuite/gfortran/../../f951[0x47e075]/export/build/gnu/gcc/build-x86_64-linux/gcc/testsuite/gfortran/../../f951[0x63da75]/lib64/libc.so.6(__libc_start_main+0xf4)[0x3472c1dab4]/export/build/gnu/gcc/build-x86_64-linux/gcc/testsuite/gfortran/../../f951(calloc+0x1b9)[0x402d89]======= Memory map: ========00400000-00bd6000 r-xp 00000000 08:11 23330831                           /export/build/gnu/gcc/build-x86_64-linux/gcc/f95100dd5000-00e42000 rw-p 007d5000 08:11 23330831                           /export/build/gnu/gcc/build-x86_64-linux/gcc/f95100e42000-00efc000 rw-p 00e42000 00:00 0                                  [heap]3472800000-347281a000 r-xp 00000000 08:05 11261190                       /lib64/ld-2.6.so3472a1a000-3472a1b000 r--p 0001a000 08:05 11261190                       /lib64/ld-2.6.so3472a1b000-3472a1c000 rw-p 0001b000 08:05 11261190                       /lib64/ld-2.6.so3472c00000-3472d48000 r-xp 00000000 08:05 11261498                       /lib64/libc-2.6.so3472d48000-3472f47000 ---p 00148000 08:05 11261498                       /lib64/libc-2.6.so3472f47000-3472f4b000 r--p 00147000 08:05 11261498                       /lib64/libc-2.6.so3472f4b000-3472f4c000 rw-p 0014b000 08:05 11261498                       /lib64/libc-2.6.so3472f4c000-3472f51000 rw-p 3472f4c000 00:00 0 3473400000-3473402000 r-xp 00000000 08:05 11261508                       /lib64/libdl-2.6.so3473402000-3473602000 ---p 00002000 08:05 11261508                       /lib64/libdl-2.6.so3473602000-3473603000 r--p 00002000 08:05 11261508                       /lib64/libdl-2.6.so3473603000-3473604000 rw-p 00003000 08:05 11261508                       /lib64/libdl-2.6.so3480600000-348060d000 r-xp 00000000 08:05 11261321                       /lib64/libgcc_s-4.1.2-20070925.so.1348060d000-348080d000 ---p 0000d000 08:05 11261321                       /lib64/libgcc_s-4.1.2-20070925.so.1348080d000-348080e000 rw-p 0000d000 08:05 11261321                       /lib64/libgcc_s-4.1.2-20070925.so.12aaaaaaab000-2aaaaaaad000 rw-p 2aaaaaaab000 00:00 0 2aaaaaac9000-2aaaaaacb000 rw-p 2aaaaaac9000 00:00 0 2aaaaaacb000-2aaaae8f5000 r--p 00000000 08:05 2817927                    /usr/lib/locale/locale-archive2aaaae8f5000-2aaaaea28000 rw-p 2aaaae8f5000 00:00 0 2aaaaea28000-2aaaaea2f000 r--s 00000000 08:05 3994609                    /usr/lib64/gconv/gconv-modules.cache2aaab0000000-2aaab0021000 rw-p 2aaab0000000 00:00 0 2aaab0021000-2aaab4000000 ---p 2aaab0021000 00:00 0 7fff86e75000-7fff86e8a000 rw-p 7ffffffea000 00:00 0                      [stack]7fff86ffd000-7fff87000000 r-xp 7fff86ffd000 00:00 0                      [vdso]ffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall]f951: internal compiler error: AbortedPlease submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.bash-3.2$ Revision 132113 is bad and revision 132111 is OK.",RESOLVED          FIXED      
34848,Tobias Burnus,[4.3 Regression] internal compiler error with optional argument of character type and array return type,"Gfortran version 4.3.0 20080117 (experimental) [trunk revision 131592] (GCC)gives an ICE on the following program.$ gfortran -c ia.f90ia.f90: In function 'doit':ia.f90:12: internal compiler error: Segmentation fault---------------------------------------------------------------------------module krmodcontains  function doit(genloc,vloc,scheme)    implicit none    character(len=6), optional,               intent(in)  :: genloc    real,    optional, dimension(:), intent(in)  :: vloc    character(len=2), optional,               intent(out) :: scheme    real :: doit(100)    !-------------------------------------------------------------------------!    if(present(genloc)) then       doit = tm_doit(genloc=genloc)       if(present(scheme)) scheme = 'tm'    else       doit = tm_doit(vloc=vloc)       if(present(scheme)) scheme = 'tm'    endif    return  end function doit  function tm_doit(genloc,vloc)    implicit none    character(len=6), optional,               intent(in)  :: genloc    real,    optional, dimension(:), intent(in)  :: vloc    real :: tm_doit(100)    tm_doit = 1.0  end function tm_doitend module krmod",RESOLVED          FIXED      
34848,Tobias Burnus,[4.3 Regression] internal compiler error with optional argument of character type and array return type,"Gfortran version 4.3.0 20080117 (experimental) [trunk revision 131592] (GCC)gives an ICE on the following program.$ gfortran -c ia.f90ia.f90: In function 'doit':ia.f90:12: internal compiler error: Segmentation fault---------------------------------------------------------------------------module krmodcontains  function doit(genloc,vloc,scheme)    implicit none    character(len=6), optional,               intent(in)  :: genloc    real,    optional, dimension(:), intent(in)  :: vloc    character(len=2), optional,               intent(out) :: scheme    real :: doit(100)    !-------------------------------------------------------------------------!    if(present(genloc)) then       doit = tm_doit(genloc=genloc)       if(present(scheme)) scheme = 'tm'    else       doit = tm_doit(vloc=vloc)       if(present(scheme)) scheme = 'tm'    endif    return  end function doit  function tm_doit(genloc,vloc)    implicit none    character(len=6), optional,               intent(in)  :: genloc    real,    optional, dimension(:), intent(in)  :: vloc    real :: tm_doit(100)    tm_doit = 1.0  end function tm_doitend module krmod",RESOLVED          FIXED      
34899,Tobias Burnus,Continuation lines with <tab><number> not recognized,"The following program - which uses a very common extension - is rejected by gfortran. It is accepted by ifort, NAG f95 (!), sunf95, openf95, pgi, absoft. As it is a very common extension, I marked it as reject-valid though the tab makes it non-standard.It is essential that at least for the second and third line a TAB and not spaces are used.        PARAMETER (LUMIN=11,LUMAX=20,MAPMAX=256,NPLANEMAX=999)        INTEGER NAXIS(0:MAPMAX,LUMIN:LUMAX),NAXIS1(0:MAPMAX,LUMIN:LUMAX),        1NAXIS2(0:MAPMAX,LUMIN:LUMAX),NAXIS3(0:MAPMAX,LUMIN:LUMAX)        endFrom the ifort documentation:>> In fixed and tab source forms, a continuation line is indicated by one of the > following:>   * For fixed form: Any character (except a zero or blank) in column 6 of a >     source line>   * For tab form: Any digit (except zero) after the first tabIf this bug is fixed, please also update the *.texi file.",RESOLVED          FIXED      
34899,Tobias Burnus,Continuation lines with <tab><number> not recognized,"The following program - which uses a very common extension - is rejected by gfortran. It is accepted by ifort, NAG f95 (!), sunf95, openf95, pgi, absoft. As it is a very common extension, I marked it as reject-valid though the tab makes it non-standard.It is essential that at least for the second and third line a TAB and not spaces are used.        PARAMETER (LUMIN=11,LUMAX=20,MAPMAX=256,NPLANEMAX=999)        INTEGER NAXIS(0:MAPMAX,LUMIN:LUMAX),NAXIS1(0:MAPMAX,LUMIN:LUMAX),        1NAXIS2(0:MAPMAX,LUMIN:LUMAX),NAXIS3(0:MAPMAX,LUMIN:LUMAX)        endFrom the ifort documentation:>> In fixed and tab source forms, a continuation line is indicated by one of the > following:>   * For fixed form: Any character (except a zero or blank) in column 6 of a >     source line>   * For tab form: Any digit (except zero) after the first tabIf this bug is fixed, please also update the *.texi file.",RESOLVED          FIXED      
34901,Tobias Burnus,add kind information to mismatched-types error message,"gfortran correctly complains about mismatched types in the code below. However, adding the kinds of the data types would make the message even more informative (see below).$> cat real-real.f90REAL(4) :: xprint *, f(x)CONTAINS  FUNCTION f(a)    REAL(8) :: a, f    a = 3.1415  END FUNCTIONEND$> gfortran-svn -g -Wall real-real.f90real-real.f90:2.11:print *, f(x)          1Error: Type mismatch in argument 'a' at (1); passed REAL to REAL                                             ^^^^^^^^^^^^^^^^^^^$> gfortran-svn -vgcc version 4.3.0 20080116 (experimental)FYI: 4.1/4.2 gave:Error: Type/rank mismatch in argument 'a' at (1)",RESOLVED          FIXED      
34901,Tobias Burnus,add kind information to mismatched-types error message,"gfortran correctly complains about mismatched types in the code below. However, adding the kinds of the data types would make the message even more informative (see below).$> cat real-real.f90REAL(4) :: xprint *, f(x)CONTAINS  FUNCTION f(a)    REAL(8) :: a, f    a = 3.1415  END FUNCTIONEND$> gfortran-svn -g -Wall real-real.f90real-real.f90:2.11:print *, f(x)          1Error: Type mismatch in argument 'a' at (1); passed REAL to REAL                                             ^^^^^^^^^^^^^^^^^^^$> gfortran-svn -vgcc version 4.3.0 20080116 (experimental)FYI: 4.1/4.2 gave:Error: Type/rank mismatch in argument 'a' at (1)",RESOLVED          FIXED      
34796,Tobias Burnus,[4.3 Regression] Too strict error checking for assumed-shaped array,"Compiling gives twice the error message:  Error: Element of assumed-shaped array passed to dummy argument 'y'Other compilers give it only for ""rdiff2""; thinking over it, there is no reason to reject it for ""rdiff"" as the memory is contiguous which might not be the case for dummy arguments (stripes!). I will try to dig out the exact wording from the standard. The check was added by me in  PR34665.A simple fix would be to check for attr.dummy, but maybe one has to do something else.subroutine test(rdiff2)implicit noneinterface  subroutine rlv(y)    real   :: y(3)  end subroutine rlvend interfacereal, allocatable :: rdiff(:,:,:)real :: rdiff2(:,:,:)call rlv(rdiff(1,1,1))  ! OK, it is contiguous memory (error wrong)call rlv(rdiff2(1,1,1)) ! WRONG, error is ok (non contiguous)end",RESOLVED          FIXED      
34796,Tobias Burnus,[4.3 Regression] Too strict error checking for assumed-shaped array,"Compiling gives twice the error message:  Error: Element of assumed-shaped array passed to dummy argument 'y'Other compilers give it only for ""rdiff2""; thinking over it, there is no reason to reject it for ""rdiff"" as the memory is contiguous which might not be the case for dummy arguments (stripes!). I will try to dig out the exact wording from the standard. The check was added by me in  PR34665.A simple fix would be to check for attr.dummy, but maybe one has to do something else.subroutine test(rdiff2)implicit noneinterface  subroutine rlv(y)    real   :: y(3)  end subroutine rlvend interfacereal, allocatable :: rdiff(:,:,:)real :: rdiff2(:,:,:)call rlv(rdiff(1,1,1))  ! OK, it is contiguous memory (error wrong)call rlv(rdiff2(1,1,1)) ! WRONG, error is ok (non contiguous)end",RESOLVED          FIXED      
34760,Tobias Burnus,[4.3 Regression] PRIVATE variable not allowed as STAT variable in ALLOCATE,"With gfortran 4.3.0 20080109 I get the error message     ALLOCATE (RLA1(NF10), STAT = ISTAT)                                      1Error: STAT expression at (1) must be a variableWith the following program.     MODULE TESTS     INTEGER, PRIVATE :: ISTAT       !this one FAILS!      INTEGER :: ISTAT               !this one works!      PRIVATE :: ISTAT               !this one FAILS     CONTAINS     SUBROUTINE AD0001     REAL RLA1(:)     ALLOCATABLE RLA1     ISTAT = -314     ALLOCATE (RLA1(NF10), STAT = ISTAT)     END SUBROUTINE     END MODULEIn the real module there are several subroutines that do similarallocates and they do not generate the error.  It looks like it isonly the first use of ISTAT in an allocate that triggers the message.Dick Hendrickson",RESOLVED          FIXED      
34760,Tobias Burnus,[4.3 Regression] PRIVATE variable not allowed as STAT variable in ALLOCATE,"With gfortran 4.3.0 20080109 I get the error message     ALLOCATE (RLA1(NF10), STAT = ISTAT)                                      1Error: STAT expression at (1) must be a variableWith the following program.     MODULE TESTS     INTEGER, PRIVATE :: ISTAT       !this one FAILS!      INTEGER :: ISTAT               !this one works!      PRIVATE :: ISTAT               !this one FAILS     CONTAINS     SUBROUTINE AD0001     REAL RLA1(:)     ALLOCATABLE RLA1     ISTAT = -314     ALLOCATE (RLA1(NF10), STAT = ISTAT)     END SUBROUTINE     END MODULEIn the real module there are several subroutines that do similarallocates and they do not generate the error.  It looks like it isonly the first use of ISTAT in an allocate that triggers the message.Dick Hendrickson",RESOLVED          FIXED      
32616,Tobias Burnus,"""Too short actual argument"" for array element storage sequence","Currently, the following is not handled:integer :: i(10)call foo(i(8)) ! has (8, 9, 10) -> Too short (3/4)contains  subroutine foo(a)    integer :: a(4)  end subroutineLonger test case, see TODO in gfortran.dg/argument_checking_5.f90.See PR30940 for the references to the standard, see also TODO  in get_expr_storage_size of interface.c.The stuff is called ""element sequence"" and for an array element it consists of all storage units of the actual argument up to the end of the array.One should spend some thinking of using a character (len /= 1) array where one specifies a substring of an array element, but seemingly on can ignore the substring part then.I'm not aware of any compiler handling this yet and thus this is of lower importance.",RESOLVED          FIXED      
32616,Tobias Burnus,"""Too short actual argument"" for array element storage sequence","Currently, the following is not handled:integer :: i(10)call foo(i(8)) ! has (8, 9, 10) -> Too short (3/4)contains  subroutine foo(a)    integer :: a(4)  end subroutineLonger test case, see TODO in gfortran.dg/argument_checking_5.f90.See PR30940 for the references to the standard, see also TODO  in get_expr_storage_size of interface.c.The stuff is called ""element sequence"" and for an array element it consists of all storage units of the actual argument up to the end of the array.One should spend some thinking of using a character (len /= 1) array where one specifies a substring of an array element, but seemingly on can ignore the substring part then.I'm not aware of any compiler handling this yet and thus this is of lower importance.",RESOLVED          FIXED      
34665,Tobias Burnus,Cannot pass scalar to array argument 'a',"The following is non-standard and the compiler should probably generate awarning/error with '-pedantic -std=f95', but does not do so withgcc version 4.3.0 20080103 (experimental) [trunk revision 131300] (GCC)CONTAINSSUBROUTINE S1(a) real, dimension(:) :: a call s2(a(1))END SUBROUTINE S1SUBROUTINE S2(a) real, dimension(*) :: aEND SUBROUTINE S2END",RESOLVED          FIXED      
34665,Tobias Burnus,Cannot pass scalar to array argument 'a',"The following is non-standard and the compiler should probably generate awarning/error with '-pedantic -std=f95', but does not do so withgcc version 4.3.0 20080103 (experimental) [trunk revision 131300] (GCC)CONTAINSSUBROUTINE S1(a) real, dimension(:) :: a call s2(a(1))END SUBROUTINE S1SUBROUTINE S2(a) real, dimension(*) :: aEND SUBROUTINE S2END",RESOLVED          FIXED      
34763,Tobias Burnus,bare END not allowed in an interface block in a module procedure,"With gfortran 4.3.0 20080109 I get the error messagen_interface.f:7.12:            END           1Error: END SUBROUTINE statement expected at (1)with the following program      module n      contains      subroutine n_interface      INTERFACE            SUBROUTINE NGSXDY(TLS1,TLS2)            REAL  ::  TLS1,TLS2            END                       END INTERFACE      end      end moduleIf the n_interface is an external procedure it works fine.  A bareEND statement is allowed in interface blocks.  I'd guess youare misapplying the constraint after R1224 to things inside ofinterface blocks.  But NGSXDY isn't a module subroutine.  You'llprobably need a similar fix for functions in interface blocks,although I haven't tried that.Dick Hendrickson",RESOLVED          FIXED      
34763,Tobias Burnus,bare END not allowed in an interface block in a module procedure,"With gfortran 4.3.0 20080109 I get the error messagen_interface.f:7.12:            END           1Error: END SUBROUTINE statement expected at (1)with the following program      module n      contains      subroutine n_interface      INTERFACE            SUBROUTINE NGSXDY(TLS1,TLS2)            REAL  ::  TLS1,TLS2            END                       END INTERFACE      end      end moduleIf the n_interface is an external procedure it works fine.  A bareEND statement is allowed in interface blocks.  I'd guess youare misapplying the constraint after R1224 to things inside ofinterface blocks.  But NGSXDY isn't a module subroutine.  You'llprobably need a similar fix for functions in interface blocks,although I haven't tried that.Dick Hendrickson",RESOLVED          FIXED      
34759,Tobias Burnus,"Assumed size array reference not allowed in SHAPE intrinsic, even though last subscript specified","With gfortran 4.3.0 20080109 I get an incorrect error message""Error: 'source' argument of 'shape' intrinsic at (1) must notbe an assumed size array"" with the following little test case       subroutine j_assumed_size(A,N)       dimension A(10,11,12,*)       k = shape(A(:,:,:,N))       l = shape(A(:,:,:,3))       endI believe assumed size arrays are allowed provided the last subscriptis specified.Dick Hendrickson",RESOLVED          FIXED      
34759,Tobias Burnus,"Assumed size array reference not allowed in SHAPE intrinsic, even though last subscript specified","With gfortran 4.3.0 20080109 I get an incorrect error message""Error: 'source' argument of 'shape' intrinsic at (1) must notbe an assumed size array"" with the following little test case       subroutine j_assumed_size(A,N)       dimension A(10,11,12,*)       k = shape(A(:,:,:,N))       l = shape(A(:,:,:,3))       endI believe assumed size arrays are allowed provided the last subscriptis specified.Dick Hendrickson",RESOLVED          FIXED      
34658,Tobias Burnus,save / common,"The following is non-standard and the compiler should probably generate awarning/error with '-pedantic -std=f95', but does not do so withgcc version 4.3.0 20080103 (experimental) [trunk revision 131300] (GCC)   COMMON /A/ I  INTEGER :: I=1  END",RESOLVED          FIXED      
34658,Tobias Burnus,save / common,"The following is non-standard and the compiler should probably generate awarning/error with '-pedantic -std=f95', but does not do so withgcc version 4.3.0 20080103 (experimental) [trunk revision 131300] (GCC)   COMMON /A/ I  INTEGER :: I=1  END",RESOLVED          FIXED      
34689,Tobias Burnus,[4.3 Regression] libgomp.fortran/appendix-a/a.33.3.f90  -O  (test for excess errors),"On Linux/Intel64, revision 131352 hasFAIL: libgomp.fortran/appendix-a/a.33.3.f90  -O  (test for excess errors)FAIL: libgomp.fortran/appendix-a/a.38.1.f90  -O  (test for excess errors)FAIL: libgomp.fortran/appendix-a/a.33.3.f90  -O  (test for excess errors)FAIL: libgomp.fortran/appendix-a/a.38.1.f90  -O  (test for excess errors)Revision 131341 is OK.",RESOLVED          FIXED      
34689,Tobias Burnus,[4.3 Regression] libgomp.fortran/appendix-a/a.33.3.f90  -O  (test for excess errors),"On Linux/Intel64, revision 131352 hasFAIL: libgomp.fortran/appendix-a/a.33.3.f90  -O  (test for excess errors)FAIL: libgomp.fortran/appendix-a/a.38.1.f90  -O  (test for excess errors)FAIL: libgomp.fortran/appendix-a/a.33.3.f90  -O  (test for excess errors)FAIL: libgomp.fortran/appendix-a/a.38.1.f90  -O  (test for excess errors)Revision 131341 is OK.",RESOLVED          FIXED      
34662,Tobias Burnus,inout argument with parameter,"The following is non-standard and the compiler should probably generate awarning/error with '-pedantic -std=f95', but does not do so withgcc version 4.3.0 20080103 (experimental) [trunk revision 131300] (GCC)MODULE M1 TYPE T1  INTEGER :: I(3) END TYPE T1 TYPE(T1), PARAMETER :: D1=T1((/1,2,3/))CONTAINS SUBROUTINE S1(J)  INTEGER, INTENT(INOUT) :: J END SUBROUTINE S1END MODULE M1USE M1CALL S1(D1%I(3))END",RESOLVED          FIXED      
34662,Tobias Burnus,inout argument with parameter,"The following is non-standard and the compiler should probably generate awarning/error with '-pedantic -std=f95', but does not do so withgcc version 4.3.0 20080103 (experimental) [trunk revision 131300] (GCC)MODULE M1 TYPE T1  INTEGER :: I(3) END TYPE T1 TYPE(T1), PARAMETER :: D1=T1((/1,2,3/))CONTAINS SUBROUTINE S1(J)  INTEGER, INTENT(INOUT) :: J END SUBROUTINE S1END MODULE M1USE M1CALL S1(D1%I(3))END",RESOLVED          FIXED      
34660,Tobias Burnus,elemental and dummy procedure,"The following is non-standard and the compiler should probably generate awarning/error with '-pedantic -std=f95', but does not do so withgcc version 4.3.0 20080103 (experimental) [trunk revision 131300] (GCC)MODULE M1IMPLICIT NONECONTAINS PURE ELEMENTAL SUBROUTINE S1(I,F)   INTEGER, INTENT(IN) :: I   INTERFACE     PURE INTEGER FUNCTION F(I)      INTEGER, INTENT(IN) :: I     END FUNCTION F   END INTERFACE END SUBROUTINE S1END MODULE M1USE M1END",RESOLVED          FIXED      
34660,Tobias Burnus,elemental and dummy procedure,"The following is non-standard and the compiler should probably generate awarning/error with '-pedantic -std=f95', but does not do so withgcc version 4.3.0 20080103 (experimental) [trunk revision 131300] (GCC)MODULE M1IMPLICIT NONECONTAINS PURE ELEMENTAL SUBROUTINE S1(I,F)   INTEGER, INTENT(IN) :: I   INTERFACE     PURE INTEGER FUNCTION F(I)      INTEGER, INTENT(IN) :: I     END FUNCTION F   END INTERFACE END SUBROUTINE S1END MODULE M1USE M1END",RESOLVED          FIXED      
34654,Tobias Burnus,no unformatted on internal file,"The following is non-standard and the compiler should probably generate awarning/error with '-pedantic -std=f95', but does not do so withgcc version 4.3.0 20080103 (experimental) [trunk revision 131300] (GCC)CHARACTER :: a(3)WRITE(a) 0 ! no unformatted on internal fileEND",RESOLVED          FIXED      
34654,Tobias Burnus,no unformatted on internal file,"The following is non-standard and the compiler should probably generate awarning/error with '-pedantic -std=f95', but does not do so withgcc version 4.3.0 20080103 (experimental) [trunk revision 131300] (GCC)CHARACTER :: a(3)WRITE(a) 0 ! no unformatted on internal fileEND",RESOLVED          FIXED      
34514,Tobias Burnus,Accepts invalid: Dimensions specified for N after initialisation,"integer :: n = 4dimension :: n(3)endWhat should this give? Best to follow NAG f95 and ifort and print:""Array attributes for this symbol occurred after the data initializers.""or""Dimensions specified for N after initialisation""",RESOLVED          FIXED      
34514,Tobias Burnus,Accepts invalid: Dimensions specified for N after initialisation,"integer :: n = 4dimension :: n(3)endWhat should this give? Best to follow NAG f95 and ifort and print:""Array attributes for this symbol occurred after the data initializers.""or""Dimensions specified for N after initialisation""",RESOLVED          FIXED      
34345,Tobias Burnus,"gfortran compiles SLATEC library, but the executable fails","Overview Description:  A very simple TEST.F code using D1MACH.F from SLATEC (to initialize machine constants) compiles correctly using GFORTRAN, but the produced executable gives nonsense results.Steps to Reproduce:1. Save the following program TEST.F and the routine D1MACH.F**************      program test      implicit none      real(8) d1mach      write(6,*)1,d1mach(1)      write(6,*)2,d1mach(2)      write(6,*)3,d1mach(3)      write(6,*)4,d1mach(4)      write(6,*)5,d1mach(5)      stop      end program test**************      DOUBLE PRECISION FUNCTION D1MACH (I)C      INTEGER SMALL(4)      INTEGER LARGE(4)      INTEGER RIGHT(4)      INTEGER DIVER(4)      INTEGER LOG10(4)C      DOUBLE PRECISION DMACH(5)      SAVE DMACH      EQUIVALENCE (DMACH(1),SMALL(1))      EQUIVALENCE (DMACH(2),LARGE(1))      EQUIVALENCE (DMACH(3),RIGHT(1))      EQUIVALENCE (DMACH(4),DIVER(1))      EQUIVALENCE (DMACH(5),LOG10(1))CC     MACHINE CONSTANTS FOR THE INTEL i860C      DATA DMACH(1) / Z'0010000000000000' /      DATA DMACH(2) / Z'7FEFFFFFFFFFFFFF' /      DATA DMACH(3) / Z'3CA0000000000000' /      DATA DMACH(4) / Z'3CB0000000000000' /      DATA DMACH(5) / Z'3FD34413509F79FF' /C***FIRST EXECUTABLE STATEMENT  D1MACH      D1MACH = DMACH(I)      RETURNC      END**************2. Compile with the command        gfortran test.f d1mach.f -o test.exe3. Run ./test.exe Actual results:./test.exe           1   4503599627370496.0                2  9.21886843722740531E+018           3  4.36849163854938112E+018           4  4.37299523817675162E+018           5  4.59909449422310451E+018Expected results:./test.exe 1 2.2250738585072014E-308 2 1.7976931348623157E+308 3 1.1102230246251565E-16 4 2.220446049250313E-16 5 0.3010299956639812Build date and platform: Dec.05.2007, WinXP (cygwin environment)Additional information:1. gfortran --versionGNU Fortran (GCC) 4.3.0 20071017 (experimental) [trunk revision 129419]2. gcc --versiongcc.exe (GCC) 4.3.0 20071017 (experimental) [trunk revision 129419]",RESOLVED          FIXED      
34345,Tobias Burnus,"gfortran compiles SLATEC library, but the executable fails","Overview Description:  A very simple TEST.F code using D1MACH.F from SLATEC (to initialize machine constants) compiles correctly using GFORTRAN, but the produced executable gives nonsense results.Steps to Reproduce:1. Save the following program TEST.F and the routine D1MACH.F**************      program test      implicit none      real(8) d1mach      write(6,*)1,d1mach(1)      write(6,*)2,d1mach(2)      write(6,*)3,d1mach(3)      write(6,*)4,d1mach(4)      write(6,*)5,d1mach(5)      stop      end program test**************      DOUBLE PRECISION FUNCTION D1MACH (I)C      INTEGER SMALL(4)      INTEGER LARGE(4)      INTEGER RIGHT(4)      INTEGER DIVER(4)      INTEGER LOG10(4)C      DOUBLE PRECISION DMACH(5)      SAVE DMACH      EQUIVALENCE (DMACH(1),SMALL(1))      EQUIVALENCE (DMACH(2),LARGE(1))      EQUIVALENCE (DMACH(3),RIGHT(1))      EQUIVALENCE (DMACH(4),DIVER(1))      EQUIVALENCE (DMACH(5),LOG10(1))CC     MACHINE CONSTANTS FOR THE INTEL i860C      DATA DMACH(1) / Z'0010000000000000' /      DATA DMACH(2) / Z'7FEFFFFFFFFFFFFF' /      DATA DMACH(3) / Z'3CA0000000000000' /      DATA DMACH(4) / Z'3CB0000000000000' /      DATA DMACH(5) / Z'3FD34413509F79FF' /C***FIRST EXECUTABLE STATEMENT  D1MACH      D1MACH = DMACH(I)      RETURNC      END**************2. Compile with the command        gfortran test.f d1mach.f -o test.exe3. Run ./test.exe Actual results:./test.exe           1   4503599627370496.0                2  9.21886843722740531E+018           3  4.36849163854938112E+018           4  4.37299523817675162E+018           5  4.59909449422310451E+018Expected results:./test.exe 1 2.2250738585072014E-308 2 1.7976931348623157E+308 3 1.1102230246251565E-16 4 2.220446049250313E-16 5 0.3010299956639812Build date and platform: Dec.05.2007, WinXP (cygwin environment)Additional information:1. gfortran --versionGNU Fortran (GCC) 4.3.0 20071017 (experimental) [trunk revision 129419]2. gcc --versiongcc.exe (GCC) 4.3.0 20071017 (experimental) [trunk revision 129419]",RESOLVED          FIXED      
34133,Tobias Burnus,"Bind(c,name="""") should be rejected for dummies; F2008: allow bind(c) for internal procs","C1237 (R1225) A proc-language-binding-spec shall not be specified for an internal procedure.However, gfortran accepts the following:subroutine foo()contains  subroutine bar() bind (c)  end subroutine barend subroutine fooprogram main  use iso_c_binding  implicit nonecontains  subroutine test(c) bind(c)    character(len=1,kind=c_char) :: c  end subroutine testend program main",RESOLVED          FIXED      
34133,Tobias Burnus,"Bind(c,name="""") should be rejected for dummies; F2008: allow bind(c) for internal procs","C1237 (R1225) A proc-language-binding-spec shall not be specified for an internal procedure.However, gfortran accepts the following:subroutine foo()contains  subroutine bar() bind (c)  end subroutine barend subroutine fooprogram main  use iso_c_binding  implicit nonecontains  subroutine test(c) bind(c)    character(len=1,kind=c_char) :: c  end subroutine testend program main",RESOLVED          FIXED      
34262,Tobias Burnus,MVBITS does not work for arrays,"hades [TEST] cat bug-mvbits.f90 program main  implicit none  integer :: a( 1 ), b( 1 )  integer :: x, y  a = 1  b = 0  x = 1  y = 0  call mvbits (a, 0, 1, b, 1)  call mvbits (x, 0, 1, y, 1)  write (*, *) 'a: ', a  write (*, *) 'x: ', x  write (*, *)  write (*, *) 'b: ', b  write (*, *) 'y: ', y  write (*, *)  if ( all (b == y) ) then     write (*, *) 'GOOD:  b == y'  else     write (*, *) 'BAD:  b /= y'  end ifend program mainhades [TEST] ./a.out  a:            1 x:            1 b:            0 y:            2 BAD:  b /= yhades [TEST] gfortran --versionGNU Fortran (GCC) 4.2.1 (Ubuntu 4.2.1-5ubuntu4)Copyright (C) 2007 Free Software Foundation, Inc.It does not work for MacOS PowerPC either, same output. The versionI used ton my Mac was:epsilon [TEST] gfortran --version      GNU Fortran (GCC) 4.3.0 20071017 (experimental) [trunk revision 129405]Copyright (C) 2007 Free Software Foundation, Inc.",RESOLVED          FIXED      
34262,Tobias Burnus,MVBITS does not work for arrays,"hades [TEST] cat bug-mvbits.f90 program main  implicit none  integer :: a( 1 ), b( 1 )  integer :: x, y  a = 1  b = 0  x = 1  y = 0  call mvbits (a, 0, 1, b, 1)  call mvbits (x, 0, 1, y, 1)  write (*, *) 'a: ', a  write (*, *) 'x: ', x  write (*, *)  write (*, *) 'b: ', b  write (*, *) 'y: ', y  write (*, *)  if ( all (b == y) ) then     write (*, *) 'GOOD:  b == y'  else     write (*, *) 'BAD:  b /= y'  end ifend program mainhades [TEST] ./a.out  a:            1 x:            1 b:            0 y:            2 BAD:  b /= yhades [TEST] gfortran --versionGNU Fortran (GCC) 4.2.1 (Ubuntu 4.2.1-5ubuntu4)Copyright (C) 2007 Free Software Foundation, Inc.It does not work for MacOS PowerPC either, same output. The versionI used ton my Mac was:epsilon [TEST] gfortran --version      GNU Fortran (GCC) 4.3.0 20071017 (experimental) [trunk revision 129405]Copyright (C) 2007 Free Software Foundation, Inc.",RESOLVED          FIXED      
34079,Tobias Burnus,Bind(C): Character argument/return value problems,"Using STDCALL, not the callee but the called procedure pops the arguments from the stack. The problem is that gfortran currently also for BIND(C) passes the string lengths as arguments.See also:http://groups.google.com/group/comp.lang.fortran/browse_thread/thread/19d77dfc75f8be58",RESOLVED          FIXED      
34079,Tobias Burnus,Bind(C): Character argument/return value problems,"Using STDCALL, not the callee but the called procedure pops the arguments from the stack. The problem is that gfortran currently also for BIND(C) passes the string lengths as arguments.See also:http://groups.google.com/group/comp.lang.fortran/browse_thread/thread/19d77dfc75f8be58",RESOLVED          FIXED      
33917,Tobias Burnus,Rejects valid PROCEDURE declarations,"This one is a heisenbug, which showed up in the testsuite while testing a patch but is also present on trunk:$ cat proc_decl_2.f90 program s  implicit none  procedure() :: q2  procedure() :: q3  procedure() :: q5  procedure(sub) :: p4  procedure(p4) :: p6contains  subroutine sub  end subroutineend program s$ gfortran proc_decl_2.f90proc_decl_2.f90:7.21:  procedure(p4) :: p6                    1Error: Interface 'p4' of procedure 'p6' at (1) must be explicit",RESOLVED          FIXED      
33917,Tobias Burnus,Rejects valid PROCEDURE declarations,"This one is a heisenbug, which showed up in the testsuite while testing a patch but is also present on trunk:$ cat proc_decl_2.f90 program s  implicit none  procedure() :: q2  procedure() :: q3  procedure() :: q5  procedure(sub) :: p4  procedure(p4) :: p6contains  subroutine sub  end subroutineend program s$ gfortran proc_decl_2.f90proc_decl_2.f90:7.21:  procedure(p4) :: p6                    1Error: Interface 'p4' of procedure 'p6' at (1) must be explicit",RESOLVED          FIXED      
33745,Tobias Burnus,#NAME?,"In the following subroutine ""findphase"", the upper bound of the second dimension of ""jp"" is not known. Using -fbounds-check:Fortran runtime error: Array reference out of bounds, upper bound of dimension 2 of array 'jp' exceeded, 2 is greater than 0 implicit none integer, parameter :: maxss=7,maxc=8 integer :: jp(2,maxc) call findphase(jp)contains  subroutine findphase(jp)    integer, intent(out) :: jp(2,*)    jp(2,2:4)=0  end subroutineendFrom the dump, one sees that the error is printed unconditionally and twice.findphase (jp){  _gfortran_runtime_error_at (&""At line 8 of file a.f90""[1]{lb: 1 sz: 1}, &""Array reference out of bounds, upper bound of dimension 2 of array \'jp\' exceeded, %ld is greater than %ld""[1]{lb: 1 sz: 1}, 2, 0);  _gfortran_runtime_error_at (&""At line 8 of file a.f90""[1]{lb: 1 sz: 1}, &""Array reference out of bounds, upper bound of dimension 2 of array \'jp\' exceeded, %ld is greater than %ld""[1]{lb: 1 sz: 1}, 4, 0);[...]",RESOLVED          FIXED      
33745,Tobias Burnus,#NAME?,"In the following subroutine ""findphase"", the upper bound of the second dimension of ""jp"" is not known. Using -fbounds-check:Fortran runtime error: Array reference out of bounds, upper bound of dimension 2 of array 'jp' exceeded, 2 is greater than 0 implicit none integer, parameter :: maxss=7,maxc=8 integer :: jp(2,maxc) call findphase(jp)contains  subroutine findphase(jp)    integer, intent(out) :: jp(2,*)    jp(2,2:4)=0  end subroutineendFrom the dump, one sees that the error is printed unconditionally and twice.findphase (jp){  _gfortran_runtime_error_at (&""At line 8 of file a.f90""[1]{lb: 1 sz: 1}, &""Array reference out of bounds, upper bound of dimension 2 of array \'jp\' exceeded, %ld is greater than %ld""[1]{lb: 1 sz: 1}, 2, 0);  _gfortran_runtime_error_at (&""At line 8 of file a.f90""[1]{lb: 1 sz: 1}, &""Array reference out of bounds, upper bound of dimension 2 of array \'jp\' exceeded, %ld is greater than %ld""[1]{lb: 1 sz: 1}, 4, 0);[...]",RESOLVED          FIXED      
33106,Tobias Burnus,Access of components of public entities of private types wrongly allowed,"Example found in the NAG f95 release notes.The ""print"" statements are wrong(?); additionally for -std=f95 there should be already an error for the compilation of the module.NAG f95 prints:Error: b.f90, line 14: Derived type HIDDEN_TYPE in io-list has PRIVATE componentsInterestingly, line 15 is accepted (omission or valid?).With -std=f95, NAG f95 prints:Error: b.f90, line 9: PARAMETER CODE_YELLOW exposes PRIVATE type HIDDEN_TYPE           detected at M@<end-of-statement>[...]Which is in line with ifort:fortcom: Error: b.f90, line 6: This entity cannot be PUBLIC since its derived type is PRIVATE.   [CODE_GREEN]  type(hidden_type), public, parameter :: code_green = hidden_type('green')module m  implicit none  type, private :: hidden_type    character(6) :: code  end type  type(hidden_type), public, parameter :: code_green = hidden_type('green')  type(hidden_type), public, parameter :: code_yellow = hidden_type('yellow')  type(hidden_type), public, parameter :: code_red = hidden_type('red')end module mprogram test  use m, only: code_yellow  implicit none  print *, code_yellow  print *, code_yellow%codeend program test",RESOLVED          FIXED      
33106,Tobias Burnus,Access of components of public entities of private types wrongly allowed,"Example found in the NAG f95 release notes.The ""print"" statements are wrong(?); additionally for -std=f95 there should be already an error for the compilation of the module.NAG f95 prints:Error: b.f90, line 14: Derived type HIDDEN_TYPE in io-list has PRIVATE componentsInterestingly, line 15 is accepted (omission or valid?).With -std=f95, NAG f95 prints:Error: b.f90, line 9: PARAMETER CODE_YELLOW exposes PRIVATE type HIDDEN_TYPE           detected at M@<end-of-statement>[...]Which is in line with ifort:fortcom: Error: b.f90, line 6: This entity cannot be PUBLIC since its derived type is PRIVATE.   [CODE_GREEN]  type(hidden_type), public, parameter :: code_green = hidden_type('green')module m  implicit none  type, private :: hidden_type    character(6) :: code  end type  type(hidden_type), public, parameter :: code_green = hidden_type('green')  type(hidden_type), public, parameter :: code_yellow = hidden_type('yellow')  type(hidden_type), public, parameter :: code_red = hidden_type('red')end module mprogram test  use m, only: code_yellow  implicit none  print *, code_yellow  print *, code_yellow%codeend program test",RESOLVED          FIXED      
33303,Tobias Burnus,Document __GFORTRAN__,"I think __GFORTRAN__ is undocumented - at least I could not find any .texi where it is documented.I think it should be documented in doc/cpp.texi, possibly also in fortran/*texi.",RESOLVED          FIXED      
33303,Tobias Burnus,Document __GFORTRAN__,"I think __GFORTRAN__ is undocumented - at least I could not find any .texi where it is documented.I think it should be documented in doc/cpp.texi, possibly also in fortran/*texi.",RESOLVED          FIXED      
33139,Tobias Burnus,array pointer assignment gives incorrect dimensions,"In some cases, when doing a pointer assignment with a arrays, the upper and lower bounds on the pointer are not the same as on the pointee. This happens in the convoluted case of a pointer declared in a module that is assigned to in a subroutine. In the caller of that subroutine, the bounds of that pointer are coming out incorrect. Below is a sample code showing the problem. It can be built without any compiler options. I get this with the most recent version of gfortran on linux (FC5).$ gfortran --versionGNU Fortran (GCC) 4.3.0 20070821 (experimental) [trunk revision 127658]Here is the sample program-----------------------module Latticeinteger:: ndrftreal(kind=8),pointer:: drftzs(:)end module Latticeprogram badpointerdimsuse Latticereal(kind=8),pointer:: p(:)ndrft = 100allocate(p(0:100))call topsetpointerdrftzs(p)print*,""p bounds "",lbound(p),ubound(p)print*,""drftzs bounds "",lbound(drftzs),ubound(drftzs)stopend badpointerdimssubroutine setpointerdrftzs(p)use Latticereal(kind=8),target::p(0:ndrft)drftzs => preturnend setpointerdrftzs-----------------------The program prints the following output p bounds            0         100 d bounds            1         101I would expect that the d bounds be the same as the p bounds.Thanks for your help!   Dave",RESOLVED          FIXED      
33139,Tobias Burnus,array pointer assignment gives incorrect dimensions,"In some cases, when doing a pointer assignment with a arrays, the upper and lower bounds on the pointer are not the same as on the pointee. This happens in the convoluted case of a pointer declared in a module that is assigned to in a subroutine. In the caller of that subroutine, the bounds of that pointer are coming out incorrect. Below is a sample code showing the problem. It can be built without any compiler options. I get this with the most recent version of gfortran on linux (FC5).$ gfortran --versionGNU Fortran (GCC) 4.3.0 20070821 (experimental) [trunk revision 127658]Here is the sample program-----------------------module Latticeinteger:: ndrftreal(kind=8),pointer:: drftzs(:)end module Latticeprogram badpointerdimsuse Latticereal(kind=8),pointer:: p(:)ndrft = 100allocate(p(0:100))call topsetpointerdrftzs(p)print*,""p bounds "",lbound(p),ubound(p)print*,""drftzs bounds "",lbound(drftzs),ubound(drftzs)stopend badpointerdimssubroutine setpointerdrftzs(p)use Latticereal(kind=8),target::p(0:ndrft)drftzs => preturnend setpointerdrftzs-----------------------The program prints the following output p bounds            0         100 d bounds            1         101I would expect that the d bounds be the same as the p bounds.Thanks for your help!   Dave",RESOLVED          FIXED      
33228,Tobias Burnus,Accepts use-associated functions in MODULE PROCEDURE,"module mUSE MOD, only: foo1interface generic_intrf  module procedure foo1end interfaceis accepted although ""bar"" is not a host-associated procedure, but a use-associated procedure.(Using ""PROCEDURE foo1"" instead of ""MODULE PROCEDURE foo1"" allows use-associated procedures.)NAG f95 correctly diagnoses:Error: a.f90, line 13: FOO1 is not a module procedureFull example, from:http://groups.google.com/group/comp.lang.fortran/browse_thread/thread/4d51d6ca89f7d4f8/MODULE a  USE iso_c_binding  INTERFACE    SUBROUTINE foo1(a) BIND(C,name=""a_c_routine"")      IMPORT C_INT      INTEGER(C_INT) ::a    END SUBROUTINE  END INTERFACEEND MODULEMODULE b  USE a,ONLY : foo1  INTERFACE foo    MODULE procedure foo1,foo2,foo3  END INTERFACE  CONTAINS  SUBROUTINE foo2(a)    DOUBLE PRECISION ::a  END SUBROUTINE  SUBROUTINE foo3(a)    CHARACTER ::a  END SUBROUTINEEND MODULE",RESOLVED          FIXED      
33228,Tobias Burnus,Accepts use-associated functions in MODULE PROCEDURE,"module mUSE MOD, only: foo1interface generic_intrf  module procedure foo1end interfaceis accepted although ""bar"" is not a host-associated procedure, but a use-associated procedure.(Using ""PROCEDURE foo1"" instead of ""MODULE PROCEDURE foo1"" allows use-associated procedures.)NAG f95 correctly diagnoses:Error: a.f90, line 13: FOO1 is not a module procedureFull example, from:http://groups.google.com/group/comp.lang.fortran/browse_thread/thread/4d51d6ca89f7d4f8/MODULE a  USE iso_c_binding  INTERFACE    SUBROUTINE foo1(a) BIND(C,name=""a_c_routine"")      IMPORT C_INT      INTEGER(C_INT) ::a    END SUBROUTINE  END INTERFACEEND MODULEMODULE b  USE a,ONLY : foo1  INTERFACE foo    MODULE procedure foo1,foo2,foo3  END INTERFACE  CONTAINS  SUBROUTINE foo2(a)    DOUBLE PRECISION ::a  END SUBROUTINE  SUBROUTINE foo3(a)    CHARACTER ::a  END SUBROUTINEEND MODULE",RESOLVED          FIXED      
32669,Tobias Burnus,"[4.3 Regression] ""Actual argument contains too few elements for dummy argument"" is triggered for valid code","The following piece of code is rejected:program tfeimplicit nonereal ,dimension(1:4) ::  xreal ,dimension(0:3) ::  yreal ,dimension(-1:2) ::  zcall sub(x(:))call sub(y(:))call sub(z(:))contains  subroutine sub(a)    implicit none    real,dimension(1:4) :: a  end subroutine subend program tfewith these error messages:too_few_elements.f90:10.9:call sub(y(:))        1Warning: Actual argument contains too few elements for dummy argument 'a' (3/4) at (1)too_few_elements.f90:11.9:call sub(z(:))        1Warning: Actual argument contains too few elements for dummy argument 'a' (2/4) at (1)Seems like for arrays with the notation x(:) the actual size is miscomputed if they appear as an argument to a subroutine.Apparently this just happens for arrays whose lower bound is zero or less (y,z), while for positive lower bound everything is fine (x).Also there is no problem if the array is given in the form ""y(0:3)"" or just ""y"".The code above is accepted by gcc 4.1 and 4.2, but rejected by recent 4.3 trunk builds. So it seems to be a regression introduced in 4.3.The error messages come from interface.c(compare_actual_formal), line 1608. The size of the actual argument is computed byactual_size = get_expr_storage_size(a->expr);Maybe there is a problem in this routine?",RESOLVED          FIXED      
32669,Tobias Burnus,"[4.3 Regression] ""Actual argument contains too few elements for dummy argument"" is triggered for valid code","The following piece of code is rejected:program tfeimplicit nonereal ,dimension(1:4) ::  xreal ,dimension(0:3) ::  yreal ,dimension(-1:2) ::  zcall sub(x(:))call sub(y(:))call sub(z(:))contains  subroutine sub(a)    implicit none    real,dimension(1:4) :: a  end subroutine subend program tfewith these error messages:too_few_elements.f90:10.9:call sub(y(:))        1Warning: Actual argument contains too few elements for dummy argument 'a' (3/4) at (1)too_few_elements.f90:11.9:call sub(z(:))        1Warning: Actual argument contains too few elements for dummy argument 'a' (2/4) at (1)Seems like for arrays with the notation x(:) the actual size is miscomputed if they appear as an argument to a subroutine.Apparently this just happens for arrays whose lower bound is zero or less (y,z), while for positive lower bound everything is fine (x).Also there is no problem if the array is given in the form ""y(0:3)"" or just ""y"".The code above is accepted by gcc 4.1 and 4.2, but rejected by recent 4.3 trunk builds. So it seems to be a regression introduced in 4.3.The error messages come from interface.c(compare_actual_formal), line 1608. The size of the actual argument is computed byactual_size = get_expr_storage_size(a->expr);Maybe there is a problem in this routine?",RESOLVED          FIXED      
32359,Tobias Burnus,incorrect error: Threadprivate isn't SAVEd (implicit save attribute undefined),"Description:For this test case the gfortran compiler is demanding that a threadprivatevariable declared and initialized in a main program must have the SAVEattribute.  However, the variable already has a default SAVE attribute byvirtue of its declaration & initialization in the main program.The error message is incorrect, since SAVE is on by F95 default in thistest case.The following statement comes from p. 86 of the OpenMP API Version 2.5 May 2005in the last bullet found in lines 27-28:"" * A variable that appears in a threadprivate directive and is not declared    in the scope of a module must have the SAVE attribute""However, the FORTRAN95 HANDBOOK states on p. 138:Paragraph 3:""Any object that is data initialized (in a DATA statement or a type declaration statement) has the SAVE attribute by default.""Rules & Restrictions:   2.  If SAVE appears in a main program as an attribute or a statement, it       has no effect.> gfortran -vUsing built-in specs.Target: x86_64-suse-linuxConfigured with: ../xt-gcc-4.2.0/configure --prefix=/opt/gcc/4.2.0/snos --disable-nls --libdir=/opt/gcc/4.2.0/snos/lib --enable-languages=c,c++,fortran --with-gxx-include-dir=/opt/gcc/4.2.0/snos/include/g++ --with-slibdir=/opt/gcc/4.2.0/snos/lib --with-system-zlib --enable-shared --enable-__cxa_atexit x86_64-suse-linuxThread model: posixgcc version 4.2.0 20070514 (rpm:4)> cat bug2827.f90! Derived from OpenMP test omp1/F2_6_2_8_5i.f90      use omp_lib      implicit none      integer, parameter :: NT = 4      integer :: a = 1!$omp threadprivate(a)!$    call omp_set_num_threads(NT)!$omp parallel      print *, omp_get_thread_num(), a!$omp end parallel      END> ftn -O3 -fopenmp -c bug2827.f90/opt/xt-pe/2.1/bin/snos64/ftn: INFO: linux target is being usedbug2827.f90:5.18:      integer :: a = 1                 1Error: Threadprivate at (1) isn't SAVEd------Note: ftn is an alias for:/opt/gcc/4.2.0/bin/../snos/bin/gfortran -static -v -I/opt/xt-mpt/2.1/mpich2-64/GP/include -I/opt/xt-mpt/2.1/mpich2-64/GP/include -L/opt/xt-mpt/2.1/mpich2-64/GP/lib -I/opt/acml/3.6.1/gnu64/include -I/opt/xt-libsci/10.1.0/gnu/snos64/include -I/opt/xt-libsci/10.1.0/gnu/snos64/include/superlu -I/opt/xt-mpt/2.1/sma/P/include -L/opt/acml/3.6.1/gnu64/lib -L/opt/xt-libsci/10.1.0/gnu/snos64/lib -L/opt/xt-mpt/2.1/sma/P/lib -lmpichf90 -lsci -lacml -lsma -lmpichf90 -lmpich -lrt -D__CRAYXT_COMPUTE_LINUX_TARGET -D__TARGET_LINUX__ -fno-second-underscore -I/notbackedup/users/rsrel/rs64.DEV.070604.Mon/install/include -I/opt/xt-catamount/2.1/catamount/linux/include -I/opt/xt-service/2.1/include -L/notbackedup/users/rsrel/rs64.DEV.070604.Mon/install/lib/snos64 -L/opt/xt-pe/2.1/cnos/linux/64/lib -L/opt/xt-mpt/2.1/lib/snos64 -L/opt/xt-service/2.1/lib/snos64 -Wl,--start -lpct -lalpslli -lalpsutil -lportals -lpthread -Wl,--end -lgfortranbegin -lgfortran -lm",RESOLVED          FIXED      
32359,Tobias Burnus,incorrect error: Threadprivate isn't SAVEd (implicit save attribute undefined),"Description:For this test case the gfortran compiler is demanding that a threadprivatevariable declared and initialized in a main program must have the SAVEattribute.  However, the variable already has a default SAVE attribute byvirtue of its declaration & initialization in the main program.The error message is incorrect, since SAVE is on by F95 default in thistest case.The following statement comes from p. 86 of the OpenMP API Version 2.5 May 2005in the last bullet found in lines 27-28:"" * A variable that appears in a threadprivate directive and is not declared    in the scope of a module must have the SAVE attribute""However, the FORTRAN95 HANDBOOK states on p. 138:Paragraph 3:""Any object that is data initialized (in a DATA statement or a type declaration statement) has the SAVE attribute by default.""Rules & Restrictions:   2.  If SAVE appears in a main program as an attribute or a statement, it       has no effect.> gfortran -vUsing built-in specs.Target: x86_64-suse-linuxConfigured with: ../xt-gcc-4.2.0/configure --prefix=/opt/gcc/4.2.0/snos --disable-nls --libdir=/opt/gcc/4.2.0/snos/lib --enable-languages=c,c++,fortran --with-gxx-include-dir=/opt/gcc/4.2.0/snos/include/g++ --with-slibdir=/opt/gcc/4.2.0/snos/lib --with-system-zlib --enable-shared --enable-__cxa_atexit x86_64-suse-linuxThread model: posixgcc version 4.2.0 20070514 (rpm:4)> cat bug2827.f90! Derived from OpenMP test omp1/F2_6_2_8_5i.f90      use omp_lib      implicit none      integer, parameter :: NT = 4      integer :: a = 1!$omp threadprivate(a)!$    call omp_set_num_threads(NT)!$omp parallel      print *, omp_get_thread_num(), a!$omp end parallel      END> ftn -O3 -fopenmp -c bug2827.f90/opt/xt-pe/2.1/bin/snos64/ftn: INFO: linux target is being usedbug2827.f90:5.18:      integer :: a = 1                 1Error: Threadprivate at (1) isn't SAVEd------Note: ftn is an alias for:/opt/gcc/4.2.0/bin/../snos/bin/gfortran -static -v -I/opt/xt-mpt/2.1/mpich2-64/GP/include -I/opt/xt-mpt/2.1/mpich2-64/GP/include -L/opt/xt-mpt/2.1/mpich2-64/GP/lib -I/opt/acml/3.6.1/gnu64/include -I/opt/xt-libsci/10.1.0/gnu/snos64/include -I/opt/xt-libsci/10.1.0/gnu/snos64/include/superlu -I/opt/xt-mpt/2.1/sma/P/include -L/opt/acml/3.6.1/gnu64/lib -L/opt/xt-libsci/10.1.0/gnu/snos64/lib -L/opt/xt-mpt/2.1/sma/P/lib -lmpichf90 -lsci -lacml -lsma -lmpichf90 -lmpich -lrt -D__CRAYXT_COMPUTE_LINUX_TARGET -D__TARGET_LINUX__ -fno-second-underscore -I/notbackedup/users/rsrel/rs64.DEV.070604.Mon/install/include -I/opt/xt-catamount/2.1/catamount/linux/include -I/opt/xt-service/2.1/include -L/notbackedup/users/rsrel/rs64.DEV.070604.Mon/install/lib/snos64 -L/opt/xt-pe/2.1/cnos/linux/64/lib -L/opt/xt-mpt/2.1/lib/snos64 -L/opt/xt-service/2.1/lib/snos64 -Wl,--start -lpct -lalpslli -lalpsutil -lportals -lpthread -Wl,--end -lgfortranbegin -lgfortran -lm",RESOLVED          FIXED      
32483,Tobias Burnus,edit descriptor checking: Compile-time check for zero width for reading,"For writting ""F0.1"" or ""i0"" is allowed, for reading not.g95 gives: Warning: Positive width required in format stringNAG f95: Error: Zero field width for F edit descriptor invalid for input",RESOLVED          FIXED      
32483,Tobias Burnus,edit descriptor checking: Compile-time check for zero width for reading,"For writting ""F0.1"" or ""i0"" is allowed, for reading not.g95 gives: Warning: Positive width required in format stringNAG f95: Error: Zero field width for F edit descriptor invalid for input",RESOLVED          FIXED      
32460,Tobias Burnus,structure constructor not allowed if a USEd type has private components,"gfortran accepts this code while INTEL and SUN compilers reject it:$> cat private.f90MODULE foomodTYPE :: footype  PRIVATE  integer :: dummyEND TYPEEND MODULEPROGRAM foo_test  USE foomod  TYPE(footype) :: foo  foo = footype(1)END$> sunf95 -w4 private.f90  foo = footype(1)        ^""private.f90"", Line = 11, Column = 9: ERROR: Derived type ""FOOTYPE"" has private components, therefore a structure constructor must not be defined for this type.$> ifort -warn all private.f90fortcom: Error: private.f90, line 11: The type of this structure constructor is use associated with the PRIVATE fields attribute   [FOOTYPE]  foo = footype(1)--------^",RESOLVED          FIXED      
32460,Tobias Burnus,structure constructor not allowed if a USEd type has private components,"gfortran accepts this code while INTEL and SUN compilers reject it:$> cat private.f90MODULE foomodTYPE :: footype  PRIVATE  integer :: dummyEND TYPEEND MODULEPROGRAM foo_test  USE foomod  TYPE(footype) :: foo  foo = footype(1)END$> sunf95 -w4 private.f90  foo = footype(1)        ^""private.f90"", Line = 11, Column = 9: ERROR: Derived type ""FOOTYPE"" has private components, therefore a structure constructor must not be defined for this type.$> ifort -warn all private.f90fortcom: Error: private.f90, line 11: The type of this structure constructor is use associated with the PRIVATE fields attribute   [FOOTYPE]  foo = footype(1)--------^",RESOLVED          FIXED      
32124,Tobias Burnus,Execution stops with stat= in ALLOCATE,"The attached program never reaches the error message printout, contrary to the fact that stat= is specified in the allocate statement (if the runtime aborts, what's the point of stat= ?)[sfilippo@localhost bugtest]$ gfortran -o tryalloc tryalloc.f90[sfilippo@localhost bugtest]$ ./tryalloc Fortran runtime error: Attempt to allocate negative amount of memory.  Possible integer overflow[sfilippo@localhost bugtest]$ gfortran -vUsing built-in specs.Target: i686-pc-linux-gnuConfigured with: ../gcc-4.2.0/configure --prefix=/usr/local/gcc42 --with-mpfr=/home/travel/GCC/BUILDS/mpfr --with-gmp-lib=/home/travel/GCC/BUILDS/gmp/lib/ --with-gmp=/home/travel/GCC/BUILDS/gmpThread model: posixgcc version 4.2.0",RESOLVED          FIXED      
32124,Tobias Burnus,Execution stops with stat= in ALLOCATE,"The attached program never reaches the error message printout, contrary to the fact that stat= is specified in the allocate statement (if the runtime aborts, what's the point of stat= ?)[sfilippo@localhost bugtest]$ gfortran -o tryalloc tryalloc.f90[sfilippo@localhost bugtest]$ ./tryalloc Fortran runtime error: Attempt to allocate negative amount of memory.  Possible integer overflow[sfilippo@localhost bugtest]$ gfortran -vUsing built-in specs.Target: i686-pc-linux-gnuConfigured with: ../gcc-4.2.0/configure --prefix=/usr/local/gcc42 --with-mpfr=/home/travel/GCC/BUILDS/mpfr --with-gmp-lib=/home/travel/GCC/BUILDS/gmp/lib/ --with-gmp=/home/travel/GCC/BUILDS/gmpThread model: posixgcc version 4.2.0",RESOLVED          FIXED      
32083,Tobias Burnus,[4.3 Regression] bug in transfer integer->real->integer,"Hi,It seems the current gfortran version has a bug when the transfer() function is called on a parameter holding the bitpattern corresponding to the -Infinite value.If a variable with this pattern is transferred from integer->real->integer the result is just the input. However, when a parameter is transferred in this way, the sign gets reversed, and the bitpattern for -Infinite is changed into the bit pattern for +Infinite.I used the following sample code to test this:PROGRAM TestInfinite  IMPLICIT NONE  integer, parameter :: i8_ = Selected_Int_Kind(18)  ! = integer*8  integer, parameter :: r8_ = Selected_Real_Kind(15,307)  ! = real*8  integer(i8_), parameter :: bit_pattern_PosInf_i8_p = 9218868437227405312_i8_  integer(i8_), parameter :: bit_pattern_NegInf_i8_p = -4503599627370496_i8_  integer(i8_) :: bit_pattern_PosInf_i8 = 9218868437227405312_i8_  integer(i8_) :: bit_pattern_NegInf_i8 = -4503599627370496_i8_  integer(i8_) :: bit_pattern_PosInf_i8_hex  integer(i8_) :: bit_pattern_NegInf_i8_hex  integer(i8_) :: i  real(r8_)    :: r  data bit_pattern_PosInf_i8_hex /z'7FF0000000000000'/  !data bit_pattern_NegInf_i8_hex /z'FFF0000000000000'/  ! not portable, replaced by:  bit_pattern_NegInf_i8_hex = ibset(bit_pattern_PosInf_i8_hex,63)  print *,""testing the values""  print *,""bit_pattern_NegInf_i8_hex = "",bit_pattern_NegInf_i8_hex  print *,""bit pattern NegInf_i8     = "",bit_pattern_NegInf_i8  print *,""bit_pattern_PosInf_i8_hex = "",bit_pattern_PosInf_i8_hex  print *,""bit pattern PosInf_i8     = "",bit_pattern_PosInf_i8  print *,""testing the variable transfers""  print *,""i = "",bit_pattern_PosInf_i8  r = transfer(bit_pattern_PosInf_i8,r)  print *,""r = "",r  i = transfer(r,i)  print *,""i = "",i  print *,""i = "",bit_pattern_NegInf_i8  r = transfer(bit_pattern_NegInf_i8,r)  print *,""r = "",r  i = transfer(r,i)  print *,""i = "",i  print *,""testing the parameter transfers""  print *,""i = "",bit_pattern_PosInf_i8_p  r = transfer(bit_pattern_PosInf_i8_p,r)  print *,""r = "",r  i = transfer(r,i)  print *,""i = "",i  print *,""i = "",bit_pattern_NegInf_i8_p  r = transfer(bit_pattern_NegInf_i8_p,r)  print *,""r = "",r  i = transfer(r,i)  print *,""i = "",iEND PROGRAM TestInfiniteThis program generates the following output on my machine:12:11pm bhw034 72 >TestInf testing the values bit_pattern_NegInf_i8_hex =     -4503599627370496 bit pattern NegInf_i8     =     -4503599627370496 bit_pattern_PosInf_i8_hex =   9218868437227405312 bit pattern PosInf_i8     =   9218868437227405312 testing the variable transfers i =   9218868437227405312 r =                +Infinity i =   9218868437227405312 i =     -4503599627370496 r =                -Infinity i =     -4503599627370496 testing the parameter transfers i =   9218868437227405312 r =                +Infinity i =   9218868437227405312 i =     -4503599627370496 r =                +Infinity i =   921886843722740531212:11pm bhw034 73 >The gfortran version used for testing was:gfortran -vUsing built-in specs.Target: i386-pc-linux-gnuConfigured with: /home/fxcoudert/gfortran_nightbuild/trunk/configure --prefix=/home/fxcoudert/gfortran_nightbuild/irun-20070525 --enable-languages=c,fortran --build=i386-pc-linux-gnu --enable-checking=release --with-gmp=/home/fxcoudert/gfortran_nightbuild/softwareThread model: posixgcc version 4.3.0 20070525 (experimental)best regards,Jos de Kloe",RESOLVED          FIXED      
32083,Tobias Burnus,[4.3 Regression] bug in transfer integer->real->integer,"Hi,It seems the current gfortran version has a bug when the transfer() function is called on a parameter holding the bitpattern corresponding to the -Infinite value.If a variable with this pattern is transferred from integer->real->integer the result is just the input. However, when a parameter is transferred in this way, the sign gets reversed, and the bitpattern for -Infinite is changed into the bit pattern for +Infinite.I used the following sample code to test this:PROGRAM TestInfinite  IMPLICIT NONE  integer, parameter :: i8_ = Selected_Int_Kind(18)  ! = integer*8  integer, parameter :: r8_ = Selected_Real_Kind(15,307)  ! = real*8  integer(i8_), parameter :: bit_pattern_PosInf_i8_p = 9218868437227405312_i8_  integer(i8_), parameter :: bit_pattern_NegInf_i8_p = -4503599627370496_i8_  integer(i8_) :: bit_pattern_PosInf_i8 = 9218868437227405312_i8_  integer(i8_) :: bit_pattern_NegInf_i8 = -4503599627370496_i8_  integer(i8_) :: bit_pattern_PosInf_i8_hex  integer(i8_) :: bit_pattern_NegInf_i8_hex  integer(i8_) :: i  real(r8_)    :: r  data bit_pattern_PosInf_i8_hex /z'7FF0000000000000'/  !data bit_pattern_NegInf_i8_hex /z'FFF0000000000000'/  ! not portable, replaced by:  bit_pattern_NegInf_i8_hex = ibset(bit_pattern_PosInf_i8_hex,63)  print *,""testing the values""  print *,""bit_pattern_NegInf_i8_hex = "",bit_pattern_NegInf_i8_hex  print *,""bit pattern NegInf_i8     = "",bit_pattern_NegInf_i8  print *,""bit_pattern_PosInf_i8_hex = "",bit_pattern_PosInf_i8_hex  print *,""bit pattern PosInf_i8     = "",bit_pattern_PosInf_i8  print *,""testing the variable transfers""  print *,""i = "",bit_pattern_PosInf_i8  r = transfer(bit_pattern_PosInf_i8,r)  print *,""r = "",r  i = transfer(r,i)  print *,""i = "",i  print *,""i = "",bit_pattern_NegInf_i8  r = transfer(bit_pattern_NegInf_i8,r)  print *,""r = "",r  i = transfer(r,i)  print *,""i = "",i  print *,""testing the parameter transfers""  print *,""i = "",bit_pattern_PosInf_i8_p  r = transfer(bit_pattern_PosInf_i8_p,r)  print *,""r = "",r  i = transfer(r,i)  print *,""i = "",i  print *,""i = "",bit_pattern_NegInf_i8_p  r = transfer(bit_pattern_NegInf_i8_p,r)  print *,""r = "",r  i = transfer(r,i)  print *,""i = "",iEND PROGRAM TestInfiniteThis program generates the following output on my machine:12:11pm bhw034 72 >TestInf testing the values bit_pattern_NegInf_i8_hex =     -4503599627370496 bit pattern NegInf_i8     =     -4503599627370496 bit_pattern_PosInf_i8_hex =   9218868437227405312 bit pattern PosInf_i8     =   9218868437227405312 testing the variable transfers i =   9218868437227405312 r =                +Infinity i =   9218868437227405312 i =     -4503599627370496 r =                -Infinity i =     -4503599627370496 testing the parameter transfers i =   9218868437227405312 r =                +Infinity i =   9218868437227405312 i =     -4503599627370496 r =                +Infinity i =   921886843722740531212:11pm bhw034 73 >The gfortran version used for testing was:gfortran -vUsing built-in specs.Target: i386-pc-linux-gnuConfigured with: /home/fxcoudert/gfortran_nightbuild/trunk/configure --prefix=/home/fxcoudert/gfortran_nightbuild/irun-20070525 --enable-languages=c,fortran --build=i386-pc-linux-gnu --enable-checking=release --with-gmp=/home/fxcoudert/gfortran_nightbuild/softwareThread model: posixgcc version 4.3.0 20070525 (experimental)best regards,Jos de Kloe",RESOLVED          FIXED      
32088,Tobias Burnus,[4.3 Regression] ICE (doesn't occur if given function standalone instead on internal),"C:\mingw\bugs>type bug.f90subroutine dummycontains  function quadric(a,b) result(c)  intent(in) a,b; dimension a(0:3),b(0:3),c(0:9)    c(0)=a(0)*b(0); c(1:3)=a(1:)*b(0)+a(0)*b(1:); c(4:6)=a(1:)*b(1:)    c(7:9)=(/a(1)*b(2)+b(1)*a(2),a(1)*b(3)+b(1)*a(3),a(2)*b(3)+b(2)*a(3)/)  end functionendC:\mingw\bugs>gfortran -c -v bug.f90Using built-in specs.Target: i386-pc-mingw32Configured with: ../trunk/configure --prefix=/mingw --enable-languages=c,fortran --with-gmp=/homThread model: win32gcc version 4.3.0 20070522 (experimental) c:/program files/gfortran/bin/../libexec/gcc/i386-pc-mingw32/4.3.0/f951.exe bug.f90 -quiet -dumGNU F95 version 4.3.0 20070522 (experimental) (i386-pc-mingw32)        compiled by GNU C version 4.3.0 20070522 (experimental), GMP version 4.2.1, MPFR versionGGC heuristics: --param ggc-min-expand=30 --param ggc-min-heapsize=4096bug.f90: In function 'quadric':bug.f90:3: internal compiler error: in gfc_trans_dummy_array_bias, at fortran/trans-array.c:4006",RESOLVED          FIXED      
32088,Tobias Burnus,[4.3 Regression] ICE (doesn't occur if given function standalone instead on internal),"C:\mingw\bugs>type bug.f90subroutine dummycontains  function quadric(a,b) result(c)  intent(in) a,b; dimension a(0:3),b(0:3),c(0:9)    c(0)=a(0)*b(0); c(1:3)=a(1:)*b(0)+a(0)*b(1:); c(4:6)=a(1:)*b(1:)    c(7:9)=(/a(1)*b(2)+b(1)*a(2),a(1)*b(3)+b(1)*a(3),a(2)*b(3)+b(2)*a(3)/)  end functionendC:\mingw\bugs>gfortran -c -v bug.f90Using built-in specs.Target: i386-pc-mingw32Configured with: ../trunk/configure --prefix=/mingw --enable-languages=c,fortran --with-gmp=/homThread model: win32gcc version 4.3.0 20070522 (experimental) c:/program files/gfortran/bin/../libexec/gcc/i386-pc-mingw32/4.3.0/f951.exe bug.f90 -quiet -dumGNU F95 version 4.3.0 20070522 (experimental) (i386-pc-mingw32)        compiled by GNU C version 4.3.0 20070522 (experimental), GMP version 4.2.1, MPFR versionGGC heuristics: --param ggc-min-expand=30 --param ggc-min-heapsize=4096bug.f90: In function 'quadric':bug.f90:3: internal compiler error: in gfc_trans_dummy_array_bias, at fortran/trans-array.c:4006",RESOLVED          FIXED      
30276,Tobias Burnus,gfortran include problem,"This bug has similarities with bug no 20811. For some reason the gfortran compilier cannot locate a file when its absolute path is included. See below:My operating system:$ uname -aLinux lylt0061.terma.com 2.6.18-1.2868.fc6 #1 SMP Fri Dec 15 17:31:29 EST 2006 i686 i686 i386 GNU/LinuxThe source file:$ more test.f      program main      include '/home/allan/slot2usl/physcons.inc'      stop      endThe include file:$ ls -l /home/allan/slot2usl/physcons.inc-rw-r--r-- 1 allan users 158 Dec 19 12:05 /home/allan/slot2usl/physcons.incThe call to the compiler and error message:$ gfortran -v -c test.fUsing built-in specs.Target: i386-redhat-linuxConfigured with: ../configure --prefix=/usr --mandir=/usr/share/man --infodir=/usr/share/info --enable-shared --enable-threads=posix --enable-checking=release --with-system-zlib --enable-__cxa_atexit --disable-libunwind-exceptions --enable-libgcj-multifile --enable-languages=c,c++,objc,obj-c++,java,fortran,ada --enable-java-awt=gtk --disable-dssi --enable-plugin --with-java-home=/usr/lib/jvm/java-1.4.2-gcj-1.4.2.0/jre --with-cpu=generic --host=i386-redhat-linuxThread model: posixgcc version 4.1.1 20061011 (Red Hat 4.1.1-30) /usr/libexec/gcc/i386-redhat-linux/4.1.1/f951 test.f -ffixed-form -quiet -dumpbase test.f -mtune=generic -auxbase test -version -I /usr/lib/gcc/i386-redhat-linux/4.1.1/finclude -o /tmp/cc6e5iPa.sGNU F95 version 4.1.1 20061011 (Red Hat 4.1.1-30) (i386-redhat-linux)        compiled by GNU C version 4.1.1 20061011 (Red Hat 4.1.1-30).GGC heuristics: --param ggc-min-expand=99 --param ggc-min-heapsize=129304Error: Can't open included file '/home/allan/slot2usl/physcons.inc'Hope someone can help. Regards Allan",RESOLVED          FIXED      
30276,Tobias Burnus,gfortran include problem,"This bug has similarities with bug no 20811. For some reason the gfortran compilier cannot locate a file when its absolute path is included. See below:My operating system:$ uname -aLinux lylt0061.terma.com 2.6.18-1.2868.fc6 #1 SMP Fri Dec 15 17:31:29 EST 2006 i686 i686 i386 GNU/LinuxThe source file:$ more test.f      program main      include '/home/allan/slot2usl/physcons.inc'      stop      endThe include file:$ ls -l /home/allan/slot2usl/physcons.inc-rw-r--r-- 1 allan users 158 Dec 19 12:05 /home/allan/slot2usl/physcons.incThe call to the compiler and error message:$ gfortran -v -c test.fUsing built-in specs.Target: i386-redhat-linuxConfigured with: ../configure --prefix=/usr --mandir=/usr/share/man --infodir=/usr/share/info --enable-shared --enable-threads=posix --enable-checking=release --with-system-zlib --enable-__cxa_atexit --disable-libunwind-exceptions --enable-libgcj-multifile --enable-languages=c,c++,objc,obj-c++,java,fortran,ada --enable-java-awt=gtk --disable-dssi --enable-plugin --with-java-home=/usr/lib/jvm/java-1.4.2-gcj-1.4.2.0/jre --with-cpu=generic --host=i386-redhat-linuxThread model: posixgcc version 4.1.1 20061011 (Red Hat 4.1.1-30) /usr/libexec/gcc/i386-redhat-linux/4.1.1/f951 test.f -ffixed-form -quiet -dumpbase test.f -mtune=generic -auxbase test -version -I /usr/lib/gcc/i386-redhat-linux/4.1.1/finclude -o /tmp/cc6e5iPa.sGNU F95 version 4.1.1 20061011 (Red Hat 4.1.1-30) (i386-redhat-linux)        compiled by GNU C version 4.1.1 20061011 (Red Hat 4.1.1-30).GGC heuristics: --param ggc-min-expand=99 --param ggc-min-heapsize=129304Error: Can't open included file '/home/allan/slot2usl/physcons.inc'Hope someone can help. Regards Allan",RESOLVED          FIXED      
31917,Tobias Burnus,[4.1 only] GFORTRAN_CONVERT_UNIT is ignored,"http://gcc.gnu.org/onlinedocs/gfortran/GFORTRAN_005fCONVERT_005fUNIT.htmlResult (on x86_64/Linux):GFORTRAN_CONVERT_UNIT set to """"default:""LITTLE_ENDIAN""native:""LITTLE_ENDIAN""swap:""BIG_ENDIAN""little_endian:""LITTLE_ENDIAN""big_endian:""BIG_ENDIAN""GFORTRAN_CONVERT_UNIT set to ""BIG_ENDIAN""  ! same with ""big_endian""default:""LITTLE_ENDIAN""native:""LITTLE_ENDIAN""swap:""BIG_ENDIAN""little_endian:""LITTLE_ENDIAN""big_endian:""BIG_ENDIAN""Test programprogram conv  implicit none  character(20) :: ch  CALL GET_ENVIRONMENT_VARIABLE('GFORTRAN_CONVERT_UNIT', ch)  print '(3a)', 'GFORTRAN_CONVERT_UNIT set to ""',trim(ch),'""'  open(11,form='unformatted'); inquire(11,convert=ch)  print '(3a)', 'default:""',trim(ch),'""'; close(11,status='delete')  open(12,form='unformatted',convert=""native"")  inquire(12,convert=ch)  print '(3a)', 'native:""',trim(ch),'""'; close(12,status='delete')  open(13,form='unformatted',convert=""swap"")  inquire(13,convert=ch)  print '(3a)', 'swap:""',trim(ch),'""'; close(13,status='delete')  open(14,form='unformatted',convert=""little_endian"")  inquire(14,convert=ch)  print '(3a)', 'little_endian:""',trim(ch),'""'; close(14,status='delete')  open(15,form='unformatted',convert=""big_endian"")  inquire(15,convert=ch)  print '(3a)', 'big_endian:""',trim(ch),'""'; close(15,status='delete')end program conv",RESOLVED          FIXED      
31917,Tobias Burnus,[4.1 only] GFORTRAN_CONVERT_UNIT is ignored,"http://gcc.gnu.org/onlinedocs/gfortran/GFORTRAN_005fCONVERT_005fUNIT.htmlResult (on x86_64/Linux):GFORTRAN_CONVERT_UNIT set to """"default:""LITTLE_ENDIAN""native:""LITTLE_ENDIAN""swap:""BIG_ENDIAN""little_endian:""LITTLE_ENDIAN""big_endian:""BIG_ENDIAN""GFORTRAN_CONVERT_UNIT set to ""BIG_ENDIAN""  ! same with ""big_endian""default:""LITTLE_ENDIAN""native:""LITTLE_ENDIAN""swap:""BIG_ENDIAN""little_endian:""LITTLE_ENDIAN""big_endian:""BIG_ENDIAN""Test programprogram conv  implicit none  character(20) :: ch  CALL GET_ENVIRONMENT_VARIABLE('GFORTRAN_CONVERT_UNIT', ch)  print '(3a)', 'GFORTRAN_CONVERT_UNIT set to ""',trim(ch),'""'  open(11,form='unformatted'); inquire(11,convert=ch)  print '(3a)', 'default:""',trim(ch),'""'; close(11,status='delete')  open(12,form='unformatted',convert=""native"")  inquire(12,convert=ch)  print '(3a)', 'native:""',trim(ch),'""'; close(12,status='delete')  open(13,form='unformatted',convert=""swap"")  inquire(13,convert=ch)  print '(3a)', 'swap:""',trim(ch),'""'; close(13,status='delete')  open(14,form='unformatted',convert=""little_endian"")  inquire(14,convert=ch)  print '(3a)', 'little_endian:""',trim(ch),'""'; close(14,status='delete')  open(15,form='unformatted',convert=""big_endian"")  inquire(15,convert=ch)  print '(3a)', 'big_endian:""',trim(ch),'""'; close(15,status='delete')end program conv",RESOLVED          FIXED      
31295,Tobias Burnus,Uninitialized variable in libgfortran's _gfortran_eoshift0_4,Found by valgrind:gfortran gfortran.dg/eoshift.f90valgrind a.out==20986== Conditional jump or move depends on uninitialised value(s)==20986==    at 0x4EC57D7: eoshift0 (eoshift0.c:115)==20986==    by 0x4EC5D0A: _gfortran_eoshift0_4 (eoshift0.c:251)==20986==    by 0x4009A7: MAIN__ (in /projects/tob/gcc/gcc/testsuite/gfortran.dg/a.out)==20986==    by 0x400A3B: main (fmain.c:22)Similarly for:- zero_sized_1.f90,RESOLVED          FIXED      
31295,Tobias Burnus,Uninitialized variable in libgfortran's _gfortran_eoshift0_4,Found by valgrind:gfortran gfortran.dg/eoshift.f90valgrind a.out==20986== Conditional jump or move depends on uninitialised value(s)==20986==    at 0x4EC57D7: eoshift0 (eoshift0.c:115)==20986==    by 0x4EC5D0A: _gfortran_eoshift0_4 (eoshift0.c:251)==20986==    by 0x4009A7: MAIN__ (in /projects/tob/gcc/gcc/testsuite/gfortran.dg/a.out)==20986==    by 0x400A3B: main (fmain.c:22)Similarly for:- zero_sized_1.f90,RESOLVED          FIXED      
31915,Tobias Burnus,Failure with unf_io_convert_3.f90,"With Dominique's fix so that the test case runs, I get failure.Here is a slightly modified version to illustrate:! { dg-do run }! { dg-require-effective-target fortran_large_real }program main  integer,parameter :: k = selected_real_kind (precision (0.0_8) + 1)  real(kind=k) a,b,c  a = 1.1_k  open(10,convert=""swap"",form=""unformatted"") ! { dg-warning ""Extension: CONVERT"" }  write(10) a  backspace 10  read (10) b  close(10,status=""delete"")  print *, a, b  !if (a /= b) call abort  write (11) a  backspace 11  open (11,form=""unformatted"")  read (11) c  print *, a, c  if (a .ne. c) call abort  close (11, status=""delete"")end program mainThe first test fails miserably.$ ./a.out   1.100000000000000000        3.9138956899828401554E-4942   1.100000000000000000         1.100000000000000000      I gather that this will not show up on some platforms.",RESOLVED          FIXED      
31915,Tobias Burnus,Failure with unf_io_convert_3.f90,"With Dominique's fix so that the test case runs, I get failure.Here is a slightly modified version to illustrate:! { dg-do run }! { dg-require-effective-target fortran_large_real }program main  integer,parameter :: k = selected_real_kind (precision (0.0_8) + 1)  real(kind=k) a,b,c  a = 1.1_k  open(10,convert=""swap"",form=""unformatted"") ! { dg-warning ""Extension: CONVERT"" }  write(10) a  backspace 10  read (10) b  close(10,status=""delete"")  print *, a, b  !if (a /= b) call abort  write (11) a  backspace 11  open (11,form=""unformatted"")  read (11) c  print *, a, c  if (a .ne. c) call abort  close (11, status=""delete"")end program mainThe first test fails miserably.$ ./a.out   1.100000000000000000        3.9138956899828401554E-4942   1.100000000000000000         1.100000000000000000      I gather that this will not show up on some platforms.",RESOLVED          FIXED      
31559,Tobias Burnus,[4.1 only] Assigning to an EXTERNAL leads to ICE,"subroutine a(fun)   implicit none  integer, intent(in) :: fun  real, external   :: funget  real v  v = funget(fun)   funget = -99.9end subroutine alaptop:kargl[221] gfc4x -c -O g.f90g.f90: In function 'a':g.f90:6: internal compiler error: in gfc_conv_variable, at fortran/trans-expr.c:444Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.Clearly, the assignment to funget is not legal.",RESOLVED          FIXED      
31559,Tobias Burnus,[4.1 only] Assigning to an EXTERNAL leads to ICE,"subroutine a(fun)   implicit none  integer, intent(in) :: fun  real, external   :: funget  real v  v = funget(fun)   funget = -99.9end subroutine alaptop:kargl[221] gfc4x -c -O g.f90g.f90: In function 'a':g.f90:6: internal compiler error: in gfc_conv_variable, at fortran/trans-expr.c:444Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.Clearly, the assignment to funget is not legal.",RESOLVED          FIXED      
31286,Tobias Burnus,cshift uses uninitialized variables,"As found by Salvatore Filippone using valgrind.-----------------------program testcshftinteger :: alist(4)!!$alist = (/1,2,3,4/)alist =cshift(alist,-1)write(*,*) alistend program testcshft------------------------- ==6801== Conditional jump or move depends on uninitialised value(s)> ==6801==    at 0x1B98AF30: cshift0 (cshift0.c:193)> ==6801==    by 0x8048673: MAIN__Analysis by me:alist = cshift(alist,-1)This calls  cshift0(ret, array, shift, which, size)where size = GFC_DESCRIPTOR_RANK (array)and ""which"" is the dimension (not given -> 1)Thus: which == size == 1.In cshift0 one finds:  which = which - 1;  for (dim = 0; dim < GFC_DESCRIPTOR_RANK (array); dim++)    {      if (dim == which) { ... }      else        { sstride[n] = ... }    }  if (sstride[0] == 0)That is: If which == rank of the array, sstride gets never initialized.Index: libgfortran/intrinsics/cshift0.c===================================================================*** libgfortran/intrinsics/cshift0.c    (revision 123083)--- libgfortran/intrinsics/cshift0.c    (working copy)*************** cshift0 (gfc_array_char * ret, const gfc*** 103,108 ****--- 103,110 ----      runtime_error (""Argument 'DIM' is out of range in call to 'CSHIFT'"");    which = which - 1;+   sstride[0] = 0;+   rstride[0] = 0;    extent[0] = 1;    count[0] = 0;",RESOLVED          FIXED      
31286,Tobias Burnus,cshift uses uninitialized variables,"As found by Salvatore Filippone using valgrind.-----------------------program testcshftinteger :: alist(4)!!$alist = (/1,2,3,4/)alist =cshift(alist,-1)write(*,*) alistend program testcshft------------------------- ==6801== Conditional jump or move depends on uninitialised value(s)> ==6801==    at 0x1B98AF30: cshift0 (cshift0.c:193)> ==6801==    by 0x8048673: MAIN__Analysis by me:alist = cshift(alist,-1)This calls  cshift0(ret, array, shift, which, size)where size = GFC_DESCRIPTOR_RANK (array)and ""which"" is the dimension (not given -> 1)Thus: which == size == 1.In cshift0 one finds:  which = which - 1;  for (dim = 0; dim < GFC_DESCRIPTOR_RANK (array); dim++)    {      if (dim == which) { ... }      else        { sstride[n] = ... }    }  if (sstride[0] == 0)That is: If which == rank of the array, sstride gets never initialized.Index: libgfortran/intrinsics/cshift0.c===================================================================*** libgfortran/intrinsics/cshift0.c    (revision 123083)--- libgfortran/intrinsics/cshift0.c    (working copy)*************** cshift0 (gfc_array_char * ret, const gfc*** 103,108 ****--- 103,110 ----      runtime_error (""Argument 'DIM' is out of range in call to 'CSHIFT'"");    which = which - 1;+   sstride[0] = 0;+   rstride[0] = 0;    extent[0] = 1;    count[0] = 0;",RESOLVED          FIXED      
31472,Tobias Burnus,"gfortran does not detect the illegal use of an access specification in a program, subroutine, or function","gfortran does not detect the illegal use of an access specification in a program, subroutine, or function:PROGRAM test211PRIVATE iEND",RESOLVED          FIXED      
31472,Tobias Burnus,"gfortran does not detect the illegal use of an access specification in a program, subroutine, or function","gfortran does not detect the illegal use of an access specification in a program, subroutine, or function:PROGRAM test211PRIVATE iEND",RESOLVED          FIXED      
31240,Tobias Burnus,gfortran.dg/pointer_intent_1.f90 failure at -O0,"Without option and when compiled with the 20070316 snapshot on OSX 10.3.9gcc/testsuite/gfortran.dg/pointer_intent_1.f90 yields an executablewhich segfault, see:http://gcc.gnu.org/ml/fortran/2007-03/msg00345.htmlbut ignore the crash log I have posted. The right one is:**********Host Name:      karma.lps.ens.frDate/Time:      2007-03-17 13:26:25 +0100OS Version:     10.3.9 (Build 7W98)Report Version: 2Command: a.outPath:    a.outVersion: ??? (???)PID:     19276Thread:  0Exception:  EXC_BAD_ACCESS (0x0001)Codes:      KERN_INVALID_ADDRESS (0x0001) at 0x62756700Thread 0 Crashed:0   a.out       0x00002b8c nonpointer.958 + 0x1c (darwin-crt3.c:-94)1   a.out       0x000028a4 MAIN__ + 0xdc (darwin-crt3.c:-94)2   a.out       0x00002bcc main + 0x303   a.out       0x000018f0 _start + 0x188 (crt.c:267)4   dyld        0x8fe1a31c _dyld_start + 0x64PPC Thread State:  srr0: 0x00002b8c srr1: 0x0000d030                vrsave: 0x00000000    cr: 0x42000042  xer: 0x00000000   lr: 0x000028a4  ctr: 0x90000c78    r0: 0x00000007   r1: 0xbfffefa0   r2: 0x62756700   r3: 0xbffff010    r4: 0xbffff008   r5: 0x00000000   r6: 0x00000001   r7: 0x00000000    r8: 0x00000000   r9: 0x000001e3  r10: 0x00000002  r11: 0x0000001e   r12: 0x90000c78  r13: 0x00000000  r14: 0x00000000  r15: 0x00000000   r16: 0x00000000  r17: 0x00000000  r18: 0x00000000  r19: 0x00000000   r20: 0x00000000  r21: 0x00000000  r22: 0x00000000  r23: 0x00000000   r24: 0x00000000  r25: 0x00000000  r26: 0xbffff12c  r27: 0x00000008   r28: 0xbffff130  r29: 0x01100630  r30: 0xbfffefa0  r31: 0x0000177cBinary Images Description:    0x1000 -     0x2fff a.out   a.out   0x3e000 -    0x49fff libgcc_s.1.dylib        /sw/lib/gcc4/lib/libgcc_s.1.dylib  0x3f4000 -   0x472fff libgfortran.3.dylib     /sw/lib/gcc4/lib/libgfortran.3.dylib0x73230000 - 0x73233fff libmx.A.dylib   /usr/lib/libmx.A.dylib0x8fe00000 - 0x8fe4ffff dyld    /usr/lib/dyld0x90000000 - 0x9014ffff libSystem.B.dylib       /usr/lib/libSystem.B.dylib0x939d0000 - 0x939d4fff libmathCommon.A.dylib   /usr/lib/system/libmathCommon.A.dylibIn http://gcc.gnu.org/ml/fortran/2007-03/msg00346.html, FX Coudert added:> I can confirm that on i686-linux; ...",RESOLVED          FIXED      
31240,Tobias Burnus,gfortran.dg/pointer_intent_1.f90 failure at -O0,"Without option and when compiled with the 20070316 snapshot on OSX 10.3.9gcc/testsuite/gfortran.dg/pointer_intent_1.f90 yields an executablewhich segfault, see:http://gcc.gnu.org/ml/fortran/2007-03/msg00345.htmlbut ignore the crash log I have posted. The right one is:**********Host Name:      karma.lps.ens.frDate/Time:      2007-03-17 13:26:25 +0100OS Version:     10.3.9 (Build 7W98)Report Version: 2Command: a.outPath:    a.outVersion: ??? (???)PID:     19276Thread:  0Exception:  EXC_BAD_ACCESS (0x0001)Codes:      KERN_INVALID_ADDRESS (0x0001) at 0x62756700Thread 0 Crashed:0   a.out       0x00002b8c nonpointer.958 + 0x1c (darwin-crt3.c:-94)1   a.out       0x000028a4 MAIN__ + 0xdc (darwin-crt3.c:-94)2   a.out       0x00002bcc main + 0x303   a.out       0x000018f0 _start + 0x188 (crt.c:267)4   dyld        0x8fe1a31c _dyld_start + 0x64PPC Thread State:  srr0: 0x00002b8c srr1: 0x0000d030                vrsave: 0x00000000    cr: 0x42000042  xer: 0x00000000   lr: 0x000028a4  ctr: 0x90000c78    r0: 0x00000007   r1: 0xbfffefa0   r2: 0x62756700   r3: 0xbffff010    r4: 0xbffff008   r5: 0x00000000   r6: 0x00000001   r7: 0x00000000    r8: 0x00000000   r9: 0x000001e3  r10: 0x00000002  r11: 0x0000001e   r12: 0x90000c78  r13: 0x00000000  r14: 0x00000000  r15: 0x00000000   r16: 0x00000000  r17: 0x00000000  r18: 0x00000000  r19: 0x00000000   r20: 0x00000000  r21: 0x00000000  r22: 0x00000000  r23: 0x00000000   r24: 0x00000000  r25: 0x00000000  r26: 0xbffff12c  r27: 0x00000008   r28: 0xbffff130  r29: 0x01100630  r30: 0xbfffefa0  r31: 0x0000177cBinary Images Description:    0x1000 -     0x2fff a.out   a.out   0x3e000 -    0x49fff libgcc_s.1.dylib        /sw/lib/gcc4/lib/libgcc_s.1.dylib  0x3f4000 -   0x472fff libgfortran.3.dylib     /sw/lib/gcc4/lib/libgfortran.3.dylib0x73230000 - 0x73233fff libmx.A.dylib   /usr/lib/libmx.A.dylib0x8fe00000 - 0x8fe4ffff dyld    /usr/lib/dyld0x90000000 - 0x9014ffff libSystem.B.dylib       /usr/lib/libSystem.B.dylib0x939d0000 - 0x939d4fff libmathCommon.A.dylib   /usr/lib/system/libmathCommon.A.dylibIn http://gcc.gnu.org/ml/fortran/2007-03/msg00346.html, FX Coudert added:> I can confirm that on i686-linux; ...",RESOLVED          FIXED      
30973,Tobias Burnus,"[4.1, 4.2 only] undetected name conflict: variables may be named like modules","$> cat foo.f90MODULE fooEND MODULEPROGRAM test_foo  USE foo, ONLY:  INTEGER :: foo  foo = 1END PROGRAM$> gfortran-svn -g -Wall foo.f90 && echo okok$> gfortran-svn -vgcc version 4.3.0 20070220 (experimental)If "", ONLY:"" is removed in the USE, gfortran gives:foo.f90:6.16:  INTEGER :: foo               1Error: Symbol 'foo' at (1) cannot have a type",RESOLVED          FIXED      
30973,Tobias Burnus,"[4.1, 4.2 only] undetected name conflict: variables may be named like modules","$> cat foo.f90MODULE fooEND MODULEPROGRAM test_foo  USE foo, ONLY:  INTEGER :: foo  foo = 1END PROGRAM$> gfortran-svn -g -Wall foo.f90 && echo okok$> gfortran-svn -vgcc version 4.3.0 20070220 (experimental)If "", ONLY:"" is removed in the USE, gfortran gives:foo.f90:6.16:  INTEGER :: foo               1Error: Symbol 'foo' at (1) cannot have a type",RESOLVED          FIXED      
31188,Tobias Burnus,[4.2 only] ICE on vector subscript of a parameter array,"The following code triggers the gcc_assert (begin->expr_type == EXPR_ARRAY) assertion in find_array_section (in expr.c):module foo_modimplicit nonecharacter (len=1), parameter :: letters(2) = (/""a"",""b""/)containssubroutine concat(ivec)integer, intent(in)  :: ivec(:)write (*,*) ""a"" // letters(ivec)end subroutine concatend module foo_modI'm not sure it should end up in that function, however, and I'm not sure why we end up here.",RESOLVED          FIXED      
31188,Tobias Burnus,[4.2 only] ICE on vector subscript of a parameter array,"The following code triggers the gcc_assert (begin->expr_type == EXPR_ARRAY) assertion in find_array_section (in expr.c):module foo_modimplicit nonecharacter (len=1), parameter :: letters(2) = (/""a"",""b""/)containssubroutine concat(ivec)integer, intent(in)  :: ivec(:)write (*,*) ""a"" // letters(ivec)end subroutine concatend module foo_modI'm not sure it should end up in that function, however, and I'm not sure why we end up here.",RESOLVED          FIXED      
30882,Tobias Burnus,[4.1 and 4.2 only] size with initialization expression value for dim= is rejected,"With recent trunk, gfortran incorrectly generates an error for the following standard code:SUBROUTINE S1(a) INTEGER :: a(*) IF(SIZE(a(1:10),1).NE.10) CALL ABORT()END SUBROUTINE S1INTEGER :: a(10)CALL S1(a)END",RESOLVED          FIXED      
30882,Tobias Burnus,[4.1 and 4.2 only] size with initialization expression value for dim= is rejected,"With recent trunk, gfortran incorrectly generates an error for the following standard code:SUBROUTINE S1(a) INTEGER :: a(*) IF(SIZE(a(1:10),1).NE.10) CALL ABORT()END SUBROUTINE S1INTEGER :: a(10)CALL S1(a)END",RESOLVED          FIXED      
30873,Tobias Burnus,[4.1 only] ENTRY without explict RESULT does not work for recursive functions,"With recent trunk, gfortran incorrectly generates an error for the following standard code:MODULE M1CONTAINSFUNCTION F2(K) INTEGER :: F2,K F2=E1(K)END FUNCTION F2RECURSIVE FUNCTION F1(I) INTEGER :: F1,I,E1 F1=F2(I) RETURN ENTRY E1(I) E1=-I RETURNEND FUNCTION F1END  MODULE M1USE M1IF (F1(1).NE.-1) CALL ABORT()END",RESOLVED          FIXED      
30873,Tobias Burnus,[4.1 only] ENTRY without explict RESULT does not work for recursive functions,"With recent trunk, gfortran incorrectly generates an error for the following standard code:MODULE M1CONTAINSFUNCTION F2(K) INTEGER :: F2,K F2=E1(K)END FUNCTION F2RECURSIVE FUNCTION F1(I) INTEGER :: F1,I,E1 F1=F2(I) RETURN ENTRY E1(I) E1=-I RETURNEND FUNCTION F1END  MODULE M1USE M1IF (F1(1).NE.-1) CALL ABORT()END",RESOLVED          FIXED      
30968,Tobias Burnus,[4.1 only] Bogus warning with continued lines of concatenated strings,"The following program gives a bogus warning whencompiled with -Wall or -std=f95 or -std=f2003:program gfcbug59  print *, ""Hello""&       // "" World""      ! Bogus warning with -Wall or -std=f95 or -std=f2003end program gfcbug59% gfc -Wall gfcbug59.f90gfcbug59.f90:3.8:       // "" World""      ! Bogus warning with -Wall or -std=f95 or -std=f2003       1Warning: Missing '&' in continued character constant at (1)gfcbug59.f90:3.8:       // "" World""      ! Bogus warning with -Wall or -std=f95 or -std=f2003       1Warning: Missing '&' in continued character constant at (1)",RESOLVED          FIXED      
30968,Tobias Burnus,[4.1 only] Bogus warning with continued lines of concatenated strings,"The following program gives a bogus warning whencompiled with -Wall or -std=f95 or -std=f2003:program gfcbug59  print *, ""Hello""&       // "" World""      ! Bogus warning with -Wall or -std=f95 or -std=f2003end program gfcbug59% gfc -Wall gfcbug59.f90gfcbug59.f90:3.8:       // "" World""      ! Bogus warning with -Wall or -std=f95 or -std=f2003       1Warning: Missing '&' in continued character constant at (1)gfcbug59.f90:3.8:       // "" World""      ! Bogus warning with -Wall or -std=f95 or -std=f2003       1Warning: Missing '&' in continued character constant at (1)",RESOLVED          FIXED      
30888,Tobias Burnus,%VAL construct fails with argument procedures,When calling procedures which are passed as arguments toa subroutine the %VAL construct has inconsistent behaviour.Consider the following code:      SUBROUTINE VALTEST( DOIT )      EXTERNAL DOIT      INTEGER P      INTEGER I      I = 0      P = 0      CALL DOIT( %VAL( P ) )      CALL DOIT( I )      CALL DOIT( %VAL( P ) )      END> gfortran -c valtest.f valtest.f:9.22:      CALL DOIT( %VAL( P ) )                                                                 1Error: By-value argument at (1) is not allowed in this contextwhich is an error caused by the second identical call to DOIT(%VAL(P)).,RESOLVED          FIXED      
30888,Tobias Burnus,%VAL construct fails with argument procedures,When calling procedures which are passed as arguments toa subroutine the %VAL construct has inconsistent behaviour.Consider the following code:      SUBROUTINE VALTEST( DOIT )      EXTERNAL DOIT      INTEGER P      INTEGER I      I = 0      P = 0      CALL DOIT( %VAL( P ) )      CALL DOIT( I )      CALL DOIT( %VAL( P ) )      END> gfortran -c valtest.f valtest.f:9.22:      CALL DOIT( %VAL( P ) )                                                                 1Error: By-value argument at (1) is not allowed in this contextwhich is an error caused by the second identical call to DOIT(%VAL(P)).,RESOLVED          FIXED      
30887,Tobias Burnus,%VAL only accepts default-kind integer/real/complex,"The %VAL construct doesn't accept INTEGER types with a sizegreater than the default kind. This is essential for supporting64 bit architectures where an address cannot be stored in an integer with the default kind. Consider the simple module:      SUBROUTINE VALTEST2()      INTEGER*8 P      P = 0      CALL DOIT( %VAL( P ) )      ENDThat fails with error report:> gfortran -c valtest2.f valtest2.f:6.22:      CALL DOIT( %VAL( P ) )                                                                 1Error: Kind of by-value argument at (1) is larger than default kindIncreasing the size of the default integer kind would resolve thisproblem, but that would have secondary issues (which are notacceptable in my code, the default integer maps to a defined-sizestorage type).",RESOLVED          FIXED      
30887,Tobias Burnus,%VAL only accepts default-kind integer/real/complex,"The %VAL construct doesn't accept INTEGER types with a sizegreater than the default kind. This is essential for supporting64 bit architectures where an address cannot be stored in an integer with the default kind. Consider the simple module:      SUBROUTINE VALTEST2()      INTEGER*8 P      P = 0      CALL DOIT( %VAL( P ) )      ENDThat fails with error report:> gfortran -c valtest2.f valtest2.f:6.22:      CALL DOIT( %VAL( P ) )                                                                 1Error: Kind of by-value argument at (1) is larger than default kindIncreasing the size of the default integer kind would resolve thisproblem, but that would have secondary issues (which are notacceptable in my code, the default integer maps to a defined-sizestorage type).",RESOLVED          FIXED      
30793,Tobias Burnus,Segfault on calling a function returning a pointer,The attached code generates a segfault with no apparent reason. [sfilippo@localhost NEMO]$ gfortran -v Using built-in specs.Target: i686-pc-linux-gnuConfigured with: ../gcc-4.2-20070207/configure --prefix=/usr/local/gcc42 --with-mpfr=/home/travel/GCC/BUILDS/mpfr --with-gmp-lib=/home/travel/GCC/BUILDS/gmp/lib/ --with-gmp=/home/travel/GCC/BUILDS/gmpThread model: posixgcc version 4.2.0 20070207 (prerelease)[sfilippo@localhost NEMO]$ gfortran -o test_pnt test_pnt.f90[sfilippo@localhost NEMO]$ ./test_pntSegmentation fault,RESOLVED          FIXED      
30793,Tobias Burnus,Segfault on calling a function returning a pointer,The attached code generates a segfault with no apparent reason. [sfilippo@localhost NEMO]$ gfortran -v Using built-in specs.Target: i686-pc-linux-gnuConfigured with: ../gcc-4.2-20070207/configure --prefix=/usr/local/gcc42 --with-mpfr=/home/travel/GCC/BUILDS/mpfr --with-gmp-lib=/home/travel/GCC/BUILDS/gmp/lib/ --with-gmp=/home/travel/GCC/BUILDS/gmpThread model: posixgcc version 4.2.0 20070207 (prerelease)[sfilippo@localhost NEMO]$ gfortran -o test_pnt test_pnt.f90[sfilippo@localhost NEMO]$ ./test_pntSegmentation fault,RESOLVED          FIXED      
30512,Tobias Burnus,"[4.1 only] MAXVAL() incorrect for zero-size int arrays, and for -HUGE-1 maximum values.","Consider the following program:debian-gfortran:~/test> cat maxval.f90integer(1) :: i(3)logical :: msk(3)i = -huge(i)i = i - 1write(*,*) iwrite(*,*) maxval(i)msk = .false.i = 1write(*,*) iwrite(*,*) -huge(i), maxval(i, msk)endIn both of these cases, the result of the MAXVAL call should be -huge(i)-1.  (For the latter case, see the standard on the definition of the intrinsic, which says that the result is the negative number with the largest magnitude possible within the representation).  However, the actual result is this:debian-gfortran:~/test> ../bin-trunk/bin/gfortran maxval.f90 -o maxvaldebian-gfortran:~/test> ./maxval -128 -128 -128 -127    1    1    1 -127 -127This error holds for larger integer kinds, as well.The error seems to stem from the libgfortran implementation, in which the initial search value is initialized as -GFC_INTEGER_<n>_HUGE, where it should be one less than that.",RESOLVED          FIXED      
30512,Tobias Burnus,"[4.1 only] MAXVAL() incorrect for zero-size int arrays, and for -HUGE-1 maximum values.","Consider the following program:debian-gfortran:~/test> cat maxval.f90integer(1) :: i(3)logical :: msk(3)i = -huge(i)i = i - 1write(*,*) iwrite(*,*) maxval(i)msk = .false.i = 1write(*,*) iwrite(*,*) -huge(i), maxval(i, msk)endIn both of these cases, the result of the MAXVAL call should be -huge(i)-1.  (For the latter case, see the standard on the definition of the intrinsic, which says that the result is the negative number with the largest magnitude possible within the representation).  However, the actual result is this:debian-gfortran:~/test> ../bin-trunk/bin/gfortran maxval.f90 -o maxvaldebian-gfortran:~/test> ./maxval -128 -128 -128 -127    1    1    1 -127 -127This error holds for larger integer kinds, as well.The error seems to stem from the libgfortran implementation, in which the initial search value is initialized as -GFC_INTEGER_<n>_HUGE, where it should be one less than that.",RESOLVED          FIXED      
30783,Tobias Burnus,"""character(*), value"" produces SEGV at runtime","The combination of the VALUE attribute with CHARACTER(*) gives segmentation faults (SIGSEGV, SIGBUS). Without VALUE or with ""CHARACTER(10), VALUE"" it works.------ Test case ------------program x  implicit none  character(10) :: c  c = 'Main'  print *, c  call foo(c)  print *, ccontains  subroutine foo(a)    character(*) :: a    value :: a    print *, 'Foo: ',a    a = 'Hello'    print *, 'Foo: ',a  end subroutine fooend program x------ Test case ------------I don't know whether it can be made to work, if not, one could do something like   Chris does in the Fortran-Experiments branch (except of only disallowing the length ""*""):      /* Character strings are a hassle because they may be length 1,         or assumed length (*), etc., so we need to find a way to         prevent by-value dummy char args from being anything but         length 1 constants, because C will only pass a pointer in         any other cases.  However, we can't help the following with the         logic being used below:         character(c_char), value :: my_char         character(kind=c_char, len=1), value :: my_char_str         hope the user does the right thing.  */     if (sym->attr.value == 1 && sym->ts.type == BT_CHARACTER)       /* if we can't verify the length of 1...error */       if (sym->ts.cl == NULL || sym->ts.cl->length == NULL           || (sym->ts.cl->length->value.character.length != 1))         gfc_error_now (""VALUE attribute at %L cannot be used ""                        ""for character strings"", &(sym->declared_at));",RESOLVED          FIXED      
30783,Tobias Burnus,"""character(*), value"" produces SEGV at runtime","The combination of the VALUE attribute with CHARACTER(*) gives segmentation faults (SIGSEGV, SIGBUS). Without VALUE or with ""CHARACTER(10), VALUE"" it works.------ Test case ------------program x  implicit none  character(10) :: c  c = 'Main'  print *, c  call foo(c)  print *, ccontains  subroutine foo(a)    character(*) :: a    value :: a    print *, 'Foo: ',a    a = 'Hello'    print *, 'Foo: ',a  end subroutine fooend program x------ Test case ------------I don't know whether it can be made to work, if not, one could do something like   Chris does in the Fortran-Experiments branch (except of only disallowing the length ""*""):      /* Character strings are a hassle because they may be length 1,         or assumed length (*), etc., so we need to find a way to         prevent by-value dummy char args from being anything but         length 1 constants, because C will only pass a pointer in         any other cases.  However, we can't help the following with the         logic being used below:         character(c_char), value :: my_char         character(kind=c_char, len=1), value :: my_char_str         hope the user does the right thing.  */     if (sym->attr.value == 1 && sym->ts.type == BT_CHARACTER)       /* if we can't verify the length of 1...error */       if (sym->ts.cl == NULL || sym->ts.cl->length == NULL           || (sym->ts.cl->length->value.character.length != 1))         gfc_error_now (""VALUE attribute at %L cannot be used ""                        ""for character strings"", &(sym->declared_at));",RESOLVED          FIXED      
30520,Tobias Burnus,Conflics checking of VOLATILE attribute needs improvement,"From http://groups.google.com/group/comp.lang.fortran/browse_thread/thread/6ec0a526ea59aa94/gfortran accepts in the three test cases in ""1."", which violate C1232 (R1221) and C1233 (R1221).Fourth test case (should pass as dummy is pointer array, passes with gfortran) subroutine s10()    implicit none    interface      subroutine sub10(dummy10)        integer, volatile, dimension(:),pointer :: dummy10      end subroutine sub10    end interface    integer, dimension(:), pointer :: a    call sub10(a)  end subroutine s10""3."" This is valid fortran and should be accepted.Patch for ""3."":Index: gcc/fortran/symbol.c===================================================================--- gcc/fortran/symbol.c        (Revision 121011)+++ gcc/fortran/symbol.c        (Arbeitskopie)@@ -877,8 +877,8 @@ gfc_add_volatile (symbol_attribute * attr, const char *name, locus * where) {-  if (check_used (attr, name, where))-    return FAILURE;+  /* No check_used needed as the volatile attribute is allowed for+     use-associated entities.  */   if (attr->volatile_)     {Early draft for item ""1."". The following does not work properly as array sections are not detected (first test case) and test case four is also rejected.*** gcc/fortran/interface.c     (revision 121011)--- gcc/fortran/interface.c     (working copy)*************** compare_actual_formal (gfc_actual_arglis*** 1417,1422 ****--- 1417,1449 ----          return 0;        }+       /* C1232 (R1221) For an actual argument which is a array sections or+          an assumed-shaped array, the dummy argument shall be an assumed-+          shaped array, if the dummy argument has the VOLATILE attribute.+          C1233 (R1221) Similarly for actual pointer arrays: The VOLATILE+          dummy argument shall be an assumed-shaped array or pointer array.  */++       if (((a->expr->symtree->n.sym->as+             && a->expr->symtree->n.sym->as->type == AS_ASSUMED_SHAPE)+          ||(a->expr->symtree->n.sym->as && a->expr->symtree->n.sym->as->type == AR_SECTION))+           && f->sym->attr.volatile_+           && !(f->sym->as && f->sym->as->type == AS_ASSUMED_SHAPE))+       {+         if (where)+           gfc_error (""Assumed-shaped or array-section actual argument at ""+                      ""%L is incompatible with the non-assumed-shaped ""+                      ""dummy argument '%s' due to VOLATILE attribute"",+                      &a->expr->where,f->sym->name);+         return 0;+       }+",RESOLVED          FIXED      
30520,Tobias Burnus,Conflics checking of VOLATILE attribute needs improvement,"From http://groups.google.com/group/comp.lang.fortran/browse_thread/thread/6ec0a526ea59aa94/gfortran accepts in the three test cases in ""1."", which violate C1232 (R1221) and C1233 (R1221).Fourth test case (should pass as dummy is pointer array, passes with gfortran) subroutine s10()    implicit none    interface      subroutine sub10(dummy10)        integer, volatile, dimension(:),pointer :: dummy10      end subroutine sub10    end interface    integer, dimension(:), pointer :: a    call sub10(a)  end subroutine s10""3."" This is valid fortran and should be accepted.Patch for ""3."":Index: gcc/fortran/symbol.c===================================================================--- gcc/fortran/symbol.c        (Revision 121011)+++ gcc/fortran/symbol.c        (Arbeitskopie)@@ -877,8 +877,8 @@ gfc_add_volatile (symbol_attribute * attr, const char *name, locus * where) {-  if (check_used (attr, name, where))-    return FAILURE;+  /* No check_used needed as the volatile attribute is allowed for+     use-associated entities.  */   if (attr->volatile_)     {Early draft for item ""1."". The following does not work properly as array sections are not detected (first test case) and test case four is also rejected.*** gcc/fortran/interface.c     (revision 121011)--- gcc/fortran/interface.c     (working copy)*************** compare_actual_formal (gfc_actual_arglis*** 1417,1422 ****--- 1417,1449 ----          return 0;        }+       /* C1232 (R1221) For an actual argument which is a array sections or+          an assumed-shaped array, the dummy argument shall be an assumed-+          shaped array, if the dummy argument has the VOLATILE attribute.+          C1233 (R1221) Similarly for actual pointer arrays: The VOLATILE+          dummy argument shall be an assumed-shaped array or pointer array.  */++       if (((a->expr->symtree->n.sym->as+             && a->expr->symtree->n.sym->as->type == AS_ASSUMED_SHAPE)+          ||(a->expr->symtree->n.sym->as && a->expr->symtree->n.sym->as->type == AR_SECTION))+           && f->sym->attr.volatile_+           && !(f->sym->as && f->sym->as->type == AS_ASSUMED_SHAPE))+       {+         if (where)+           gfc_error (""Assumed-shaped or array-section actual argument at ""+                      ""%L is incompatible with the non-assumed-shaped ""+                      ""dummy argument '%s' due to VOLATILE attribute"",+                      &a->expr->where,f->sym->name);+         return 0;+       }+",RESOLVED          FIXED      
30015,Tobias Burnus,[4.1 only] Intrinsic date_and_time can go back in time,"In date_and_time.c, 'time' is called. If the routine then goes on to call 'gettimeofday', it extracts the milliseconds value from the 'gettimeofday' call, but gets the seconds value from the old call to 'time'. This can result in consecutive times of (say)  2006   11   29   12    4   34  999  2006   11   29   12    4   34    0being generated. Notice that the seconds in the later call have not 'ticked over', because they refer to the earlier time value accessed by 'time', while the milliseconds refer to the ""correct"" value accessed by gettimeofday. Here is our test code:!!!!!!!!!!!!!!!!!!!! Test program for DATE_AND_TIME    PROGRAM DATE_AND_TIME_TEST! .. Implicit None Statement ..       IMPLICIT NONE! .. Parameters ..       INTEGER, PARAMETER :: NOUT = 6       INTEGER, PARAMETER :: WP = KIND(0.0D0)! .. Non-Generic Interface Blocks ..       INTERFACE          FUNCTION ORDER_TIME(ITIME1,ITIME2)! .. Function Return Value ..             INTEGER :: ORDER_TIME! .. Array Arguments ..             INTEGER, INTENT (IN) :: ITIME1(7), ITIME2(7)          END FUNCTION ORDER_TIME       END INTERFACE! .. Local Scalars ..       REAL (KIND=WP) :: E, ETOL, EXPE, T       INTEGER :: I, N, NFAILS       LOGICAL :: PASS! .. Local Arrays ..       INTEGER :: DATE_TIME(8), ITIME1(7), ITIME2(7)! .. Intrinsic Functions ..       INTRINSIC ABS, DATE_AND_TIME, KIND, MIN! .. Executable Statements ..       CONTINUE       PASS = .TRUE.       EXPE = 2.718281828E0_WP!      Make up to 10000 calls of DATE_AND_TIME and check that they return!      monotonic non-decreasing times, by calling ORDER_TIME.       NFAILS = 0       CALL DATE_AND_TIME(VALUES=DATE_TIME)       ITIME2(1:3) = DATE_TIME(1:3)       ITIME2(4:7) = DATE_TIME(5:8)!      Output start time.       WRITE (NOUT,FMT=99991) ITIME2(1:7)       I = 2       DO!         Save the old time in ITIME1.          ITIME1(1:7) = ITIME2(1:7)!         Delay a bit by computing e.          ETOL = 0.001_WP          E = 1.0E0_WP          T = 1.0E0_WP          DO N = 1, 100000 - MIN(I,6)             T = T/N             E = E + T          END DO!         This test is just so that E gets used and the loop!         above isn't optimised away.          IF (ABS(E-EXPE)>ETOL) THEN             IF (PASS) THEN                PASS = .FALSE.                WRITE (NOUT,FMT=99999) E, EXPE             END IF          END IF!         Get the new time in ITIME2.          CALL DATE_AND_TIME(VALUES=DATE_TIME)          ITIME2(1:3) = DATE_TIME(1:3)          ITIME2(4:7) = DATE_TIME(5:8)          IF (ORDER_TIME(ITIME1,ITIME2)==1 .AND. NFAILS<5) THEN             NFAILS = NFAILS + 1             PASS = .FALSE.             WRITE (NOUT,FMT=99998) ITIME1, ITIME2          END IF!         Continue round the loop up to at most 10000 times, unless at!         least two different times have been found and we've done!         the loop at least 1000 times.          IF ((ORDER_TIME(ITIME1,ITIME2)/=-1 .AND. I<10000) .OR. I<1000) THEN             I = I + 1          ELSE             EXIT          END IF       END DO!      Make one final check to ensure that all the times in the loop!      above were not identical.!      Output end time.       WRITE (NOUT,FMT=99990) ITIME2(1:7)       IF (ORDER_TIME(ITIME1,ITIME2)/=-1 .AND. NFAILS<5) THEN          PASS = .FALSE.          WRITE (NOUT,FMT=99997) ITIME1, ITIME2       END IF       IF (PASS) THEN          WRITE (NOUT,FMT=99996)       ELSE          WRITE (NOUT,FMT=99995)       END IF99999  FORMAT (1X/1X,'Computed e as ',1P,E13.5,' instead of ',E13.5)99998  FORMAT (1X/1X,'Two consecutive calls of DATE_AND_TIME returned:', &          2(/1X,7I5)/2X, &          '- the first should be not later than the second but is.')99997  FORMAT (1X/1X,'Two calls of DATE_AND_TIME returned:',2(/1X,7I5)/2X, &          '- the first should be earlier than the second but is not.')99996  FORMAT (1X/1X,'TEST OF DATE_AND_TIME PASSED OK')99995  FORMAT (1X/1X,'TEST OF DATE_AND_TIME FAILS')99991  FORMAT (1X,'*** Started at',7I5)99990  FORMAT (1X/1X,'***** Ended at',7I5)    END PROGRAM DATE_AND_TIME_TEST    FUNCTION ORDER_TIME(ITIME1,ITIME2)! .. Implicit None Statement ..       IMPLICIT NONE! .. Function Return Value ..       INTEGER :: ORDER_TIME! .. Parameters ..       INTEGER, PARAMETER :: WP = KIND(0.0D0)! .. Array Arguments ..       INTEGER, INTENT (IN) :: ITIME1(7), ITIME2(7)! .. Local Scalars ..       INTEGER :: I! .. Intrinsic Functions ..       INTRINSIC KIND! .. Executable Statements ..       CONTINUE!      Compare the integer array format times.       I = 1       DO          IF (ITIME1(I)==ITIME2(I) .AND. I<7) THEN             I = I + 1          ELSE             EXIT          END IF       END DO       IF (ITIME1(I)<ITIME2(I)) THEN          ORDER_TIME = -1       ELSE IF (ITIME1(I)==ITIME2(I)) THEN          ORDER_TIME = 0       ELSE          ORDER_TIME = 1       END IF       RETURN    END FUNCTION ORDER_TIME!!!!!!!!!!!!!!!!!!!! End of test program for DATE_AND_TIMEThe fix to date_and_time is pretty obvious. Here's how we made the relevant section of the code work:/* Some unchanged date_and_time.c code above here */#ifndef HAVE_NO_DATE_TIME  time_t lt;  struct tm local_time;  struct tm UTC_time;  lt = time (NULL);  if (lt != (time_t) -1)    {#if HAVE_GETTIMEOFDAY      {        struct timeval tp;#if GETTIMEOFDAY_ONE_ARGUMENT        if (!gettimeofday (&tp))#else#if HAVE_STRUCT_TIMEZONE          struct timezone tzp;        /* Some systems such as HP-UX, do have struct timezone, but           gettimeofday takes void* as the 2nd arg.  However, the           effect of passing anything other than a null pointer is           unspecified on HP-UX.  Configure checks if gettimeofday           actually fails with a non-NULL arg and pretends that           struct timezone is missing if it does fail.  */        if (!gettimeofday (&tp, &tzp))#else        if (!gettimeofday (&tp, (void *) 0))#endif /* HAVE_STRUCT_TIMEZONE  */#endif /* GETTIMEOFDAY_ONE_ARGUMENT  */        /* All arguments can be derived from tp.  */        lt = tp.tv_sec;        values[7] = tp.tv_usec / 1000;      }#else      {        /* All arguments can be derived from lt.  */        values[7] = 0;      }#endif /* HAVE_GETTIMEOFDAY */      local_time = *localtime (&lt);      UTC_time = *gmtime (&lt);      values[0] = 1900 + local_time.tm_year;      values[1] = 1 + local_time.tm_mon;      values[2] = local_time.tm_mday;      values[3] = (local_time.tm_min - UTC_time.tm_min +                   60 * (local_time.tm_hour - UTC_time.tm_hour +                         24 * (local_time.tm_yday - UTC_time.tm_yday)));      values[4] = local_time.tm_hour;      values[5] = local_time.tm_min;      values[6] = local_time.tm_sec;#if HAVE_SNPRINTF      if (__date)/* Some unchanged date_and_time.c code below here */",RESOLVED          FIXED      
30015,Tobias Burnus,[4.1 only] Intrinsic date_and_time can go back in time,"In date_and_time.c, 'time' is called. If the routine then goes on to call 'gettimeofday', it extracts the milliseconds value from the 'gettimeofday' call, but gets the seconds value from the old call to 'time'. This can result in consecutive times of (say)  2006   11   29   12    4   34  999  2006   11   29   12    4   34    0being generated. Notice that the seconds in the later call have not 'ticked over', because they refer to the earlier time value accessed by 'time', while the milliseconds refer to the ""correct"" value accessed by gettimeofday. Here is our test code:!!!!!!!!!!!!!!!!!!!! Test program for DATE_AND_TIME    PROGRAM DATE_AND_TIME_TEST! .. Implicit None Statement ..       IMPLICIT NONE! .. Parameters ..       INTEGER, PARAMETER :: NOUT = 6       INTEGER, PARAMETER :: WP = KIND(0.0D0)! .. Non-Generic Interface Blocks ..       INTERFACE          FUNCTION ORDER_TIME(ITIME1,ITIME2)! .. Function Return Value ..             INTEGER :: ORDER_TIME! .. Array Arguments ..             INTEGER, INTENT (IN) :: ITIME1(7), ITIME2(7)          END FUNCTION ORDER_TIME       END INTERFACE! .. Local Scalars ..       REAL (KIND=WP) :: E, ETOL, EXPE, T       INTEGER :: I, N, NFAILS       LOGICAL :: PASS! .. Local Arrays ..       INTEGER :: DATE_TIME(8), ITIME1(7), ITIME2(7)! .. Intrinsic Functions ..       INTRINSIC ABS, DATE_AND_TIME, KIND, MIN! .. Executable Statements ..       CONTINUE       PASS = .TRUE.       EXPE = 2.718281828E0_WP!      Make up to 10000 calls of DATE_AND_TIME and check that they return!      monotonic non-decreasing times, by calling ORDER_TIME.       NFAILS = 0       CALL DATE_AND_TIME(VALUES=DATE_TIME)       ITIME2(1:3) = DATE_TIME(1:3)       ITIME2(4:7) = DATE_TIME(5:8)!      Output start time.       WRITE (NOUT,FMT=99991) ITIME2(1:7)       I = 2       DO!         Save the old time in ITIME1.          ITIME1(1:7) = ITIME2(1:7)!         Delay a bit by computing e.          ETOL = 0.001_WP          E = 1.0E0_WP          T = 1.0E0_WP          DO N = 1, 100000 - MIN(I,6)             T = T/N             E = E + T          END DO!         This test is just so that E gets used and the loop!         above isn't optimised away.          IF (ABS(E-EXPE)>ETOL) THEN             IF (PASS) THEN                PASS = .FALSE.                WRITE (NOUT,FMT=99999) E, EXPE             END IF          END IF!         Get the new time in ITIME2.          CALL DATE_AND_TIME(VALUES=DATE_TIME)          ITIME2(1:3) = DATE_TIME(1:3)          ITIME2(4:7) = DATE_TIME(5:8)          IF (ORDER_TIME(ITIME1,ITIME2)==1 .AND. NFAILS<5) THEN             NFAILS = NFAILS + 1             PASS = .FALSE.             WRITE (NOUT,FMT=99998) ITIME1, ITIME2          END IF!         Continue round the loop up to at most 10000 times, unless at!         least two different times have been found and we've done!         the loop at least 1000 times.          IF ((ORDER_TIME(ITIME1,ITIME2)/=-1 .AND. I<10000) .OR. I<1000) THEN             I = I + 1          ELSE             EXIT          END IF       END DO!      Make one final check to ensure that all the times in the loop!      above were not identical.!      Output end time.       WRITE (NOUT,FMT=99990) ITIME2(1:7)       IF (ORDER_TIME(ITIME1,ITIME2)/=-1 .AND. NFAILS<5) THEN          PASS = .FALSE.          WRITE (NOUT,FMT=99997) ITIME1, ITIME2       END IF       IF (PASS) THEN          WRITE (NOUT,FMT=99996)       ELSE          WRITE (NOUT,FMT=99995)       END IF99999  FORMAT (1X/1X,'Computed e as ',1P,E13.5,' instead of ',E13.5)99998  FORMAT (1X/1X,'Two consecutive calls of DATE_AND_TIME returned:', &          2(/1X,7I5)/2X, &          '- the first should be not later than the second but is.')99997  FORMAT (1X/1X,'Two calls of DATE_AND_TIME returned:',2(/1X,7I5)/2X, &          '- the first should be earlier than the second but is not.')99996  FORMAT (1X/1X,'TEST OF DATE_AND_TIME PASSED OK')99995  FORMAT (1X/1X,'TEST OF DATE_AND_TIME FAILS')99991  FORMAT (1X,'*** Started at',7I5)99990  FORMAT (1X/1X,'***** Ended at',7I5)    END PROGRAM DATE_AND_TIME_TEST    FUNCTION ORDER_TIME(ITIME1,ITIME2)! .. Implicit None Statement ..       IMPLICIT NONE! .. Function Return Value ..       INTEGER :: ORDER_TIME! .. Parameters ..       INTEGER, PARAMETER :: WP = KIND(0.0D0)! .. Array Arguments ..       INTEGER, INTENT (IN) :: ITIME1(7), ITIME2(7)! .. Local Scalars ..       INTEGER :: I! .. Intrinsic Functions ..       INTRINSIC KIND! .. Executable Statements ..       CONTINUE!      Compare the integer array format times.       I = 1       DO          IF (ITIME1(I)==ITIME2(I) .AND. I<7) THEN             I = I + 1          ELSE             EXIT          END IF       END DO       IF (ITIME1(I)<ITIME2(I)) THEN          ORDER_TIME = -1       ELSE IF (ITIME1(I)==ITIME2(I)) THEN          ORDER_TIME = 0       ELSE          ORDER_TIME = 1       END IF       RETURN    END FUNCTION ORDER_TIME!!!!!!!!!!!!!!!!!!!! End of test program for DATE_AND_TIMEThe fix to date_and_time is pretty obvious. Here's how we made the relevant section of the code work:/* Some unchanged date_and_time.c code above here */#ifndef HAVE_NO_DATE_TIME  time_t lt;  struct tm local_time;  struct tm UTC_time;  lt = time (NULL);  if (lt != (time_t) -1)    {#if HAVE_GETTIMEOFDAY      {        struct timeval tp;#if GETTIMEOFDAY_ONE_ARGUMENT        if (!gettimeofday (&tp))#else#if HAVE_STRUCT_TIMEZONE          struct timezone tzp;        /* Some systems such as HP-UX, do have struct timezone, but           gettimeofday takes void* as the 2nd arg.  However, the           effect of passing anything other than a null pointer is           unspecified on HP-UX.  Configure checks if gettimeofday           actually fails with a non-NULL arg and pretends that           struct timezone is missing if it does fail.  */        if (!gettimeofday (&tp, &tzp))#else        if (!gettimeofday (&tp, (void *) 0))#endif /* HAVE_STRUCT_TIMEZONE  */#endif /* GETTIMEOFDAY_ONE_ARGUMENT  */        /* All arguments can be derived from tp.  */        lt = tp.tv_sec;        values[7] = tp.tv_usec / 1000;      }#else      {        /* All arguments can be derived from lt.  */        values[7] = 0;      }#endif /* HAVE_GETTIMEOFDAY */      local_time = *localtime (&lt);      UTC_time = *gmtime (&lt);      values[0] = 1900 + local_time.tm_year;      values[1] = 1 + local_time.tm_mon;      values[2] = local_time.tm_mday;      values[3] = (local_time.tm_min - UTC_time.tm_min +                   60 * (local_time.tm_hour - UTC_time.tm_hour +                         24 * (local_time.tm_yday - UTC_time.tm_yday)));      values[4] = local_time.tm_hour;      values[5] = local_time.tm_min;      values[6] = local_time.tm_sec;#if HAVE_SNPRINTF      if (__date)/* Some unchanged date_and_time.c code below here */",RESOLVED          FIXED      
29649,Tobias Burnus,Force core dump on runtime library errors,"Running an application I got the following error Fortran runtime error: Attempt to allocate negative amount of memory.  Possible integer overflowThis is not very helpful in debugging, as it gives no clue as to where in the code it occurred. It would be extremely helpful to have a way to force a backtrace produced, either explicitly via stderr (as Intel Fortran does for code compiled with -traceback), or implicitly by producing a core dump.Am not sure whether this should be filed against the front end (i.e.: a compile time option) or the library (runtime environment variable? )Salvatore",RESOLVED          FIXED      
29649,Tobias Burnus,Force core dump on runtime library errors,"Running an application I got the following error Fortran runtime error: Attempt to allocate negative amount of memory.  Possible integer overflowThis is not very helpful in debugging, as it gives no clue as to where in the code it occurred. It would be extremely helpful to have a way to force a backtrace produced, either explicitly via stderr (as Intel Fortran does for code compiled with -traceback), or implicitly by producing a core dump.Am not sure whether this should be filed against the front end (i.e.: a compile time option) or the library (runtime environment variable? )Salvatore",RESOLVED          FIXED      
30238,Tobias Burnus,"associated(null-pointer, null-pointer) returns .true.","For non-array calls, the ""if"" is directly created intrans-intrinsic.c's gfc_conv_associated.As one can see below, gfortran currently only checks whether two pointers are the same, it also should check whether they are NULL pointers.Example:integer, pointer :: anullify(a)if(associated(a,a)) call abort()endand dump:  int4 * a;  _gfortran_set_std (70, 127, 0);  a = 0B;  if (a == a)    {      _gfortran_abort ();    }",RESOLVED          FIXED      
30238,Tobias Burnus,"associated(null-pointer, null-pointer) returns .true.","For non-array calls, the ""if"" is directly created intrans-intrinsic.c's gfc_conv_associated.As one can see below, gfortran currently only checks whether two pointers are the same, it also should check whether they are NULL pointers.Example:integer, pointer :: anullify(a)if(associated(a,a)) call abort()endand dump:  int4 * a;  _gfortran_set_std (70, 127, 0);  a = 0B;  if (a == a)    {      _gfortran_abort ();    }",RESOLVED          FIXED      
27546,Tobias Burnus,IMPORT is broken,"Reported by Harald Anlauf:---------------------------Hi,the IMPORT statement of Fortran2003 is not yet implemented.Trying to use it provokes an ICE:module gfcbug29_import  integer, parameter :: dp = kind (1d0)  interface     subroutine foo (x)       import :: dp       real (kind=dp) :: x     end subroutine foo  end interfaceend module gfcbug29_import% gfortran -c -std=f2003 gfcbug29.f90 In file gfcbug29.f90:6       import :: dp      1Error: Unclassifiable statement at (1)gfcbug29.f90:0: internal compiler error: Segmentation faultSee the Fortran2003 draft, tables 2.1, 2.2, and section 12.3.2.1about interface blocks.Cheers,-ha",RESOLVED          FIXED      
27588,Tobias Burnus,#NAME?,"Taken from http://www.polyhedron.com/pb05/linux/diagnose.html------<CBND1.F>-------! character bound error - local variable      program cbnd1      character*10 zz      i = 2      j = i+9      zz(i:j) = 'abcdef'      print * , zz      end----------------------gfortran-4.2 -Wall -pedantic -fbounds-check CBND1.F./a.out ^AabcdefExpected: Issue a run-time error message.Examples of other compilers:ifort64-9.1 -C -check all -warn all,nodec,interfaces -gen_interfaces -traceback -fpe0 -fpstkchk CBND1.F./a.outforrtl: severe (408): fort: (4): Variable ZZ has substring ending point 11 which is greater than the variable length of 10g95 -Wall -pedantic -fbounds-check -ftrace=full CBND1.F./a.outAt line 6 of file CBND1.FTraceback: (Innermost first)Fortran runtime error: Substring reference out of bounds: (2:11) in string of length 10NAG: f95 -C=all -C=undefined -info -g -gline CBND1.FOut of range: substring ending position 11 is greater than length 10Program terminated by fatal errorIn CBND1, line 6 of CBND1.FThe following is even detected at compile time by the intel and NAGf95 compilers (gfortran does not detect it at compile or runtime):--------<CBND3.F>--------------! Check character bound error - assign to dummy argument which is larger than actual arg      program cbnd3      character*10 zz,zzz      common /aaa/zz,zzz      zz = '0000000000'      zzz = '1111111111'      call sub(zz)      print * , zzz      end      subroutine sub(zz)      character*11 zz      zz = 'abcdef'      print * , zz      end---------------------------",RESOLVED          FIXED      
29806,Tobias Burnus,Error if CONTAINS is present without SUBPROGRAM,"The following is invalid Fortran as an internal-subprogram (R1101,R210) or module-subprogram (R1107) is needed with CONTAINS.module x containsend module xprogram y  containsend program y",RESOLVED          FIXED      
29806,Tobias Burnus,Error if CONTAINS is present without SUBPROGRAM,"The following is invalid Fortran as an internal-subprogram (R1101,R210) or module-subprogram (R1107) is needed with CONTAINS.module x containsend module xprogram y  containsend program y",RESOLVED          FIXED      
29657,Tobias Burnus,Don't allow SAVE for functions,"gfortran happily accepts the SAVE attribute for function (procedure attributes)function sq(x)  real, intent(in) :: x  real, save :: sq  ! SAVE is wrong!  sq = x**2end function sqg95:Error: PROCEDURE attribute conflicts with SAVE attribute at (1)sunf95:ERROR: ""SQ"" is a function, therefore it must not be declared with the SAVE attribute.ifort:The SAVE attribute conflicts with other declarations.NAG f95:Cannot SAVE procedure SQ",RESOLVED          FIXED      
29657,Tobias Burnus,Don't allow SAVE for functions,"gfortran happily accepts the SAVE attribute for function (procedure attributes)function sq(x)  real, intent(in) :: x  real, save :: sq  ! SAVE is wrong!  sq = x**2end function sqg95:Error: PROCEDURE attribute conflicts with SAVE attribute at (1)sunf95:ERROR: ""SQ"" is a function, therefore it must not be declared with the SAVE attribute.ifort:The SAVE attribute conflicts with other declarations.NAG f95:Cannot SAVE procedure SQ",RESOLVED          FIXED      
29454,Tobias Burnus,Slightly wrong error message for IF statement,$ cat foo.f90   logical l(2)  if (l) call abort  end$ gfortran foo.f90 In file foo.f90:2  if (l) call abort     1Error: ELSE IF clause at (1) requires a scalar LOGICAL expression,RESOLVED          FIXED      
29601,Tobias Burnus,VOLATILE attribute and statement,"5.2.15   VOLATILE statementR548  volatile-stmt  is  VOLATILE [ :: ] object-name-listThe VOLATILE statement specifies the VOLATILE attribute (5.1.2.16) for a list of objects.5.1.2.16   VOLATILE attributeThe VOLATILE attribute specifies that an object may be referenced, defined, or become undefined, by means not specified by the program.An object may have the VOLATILE attribute in a particular scoping unit without necessarily having it in other scoping units. If an object has the VOLATILE attribute, then all of its subobjects also have the VOLATILE attribute.      NOTE 5.21      The Fortran processor should use the most recent definition of a volatile object when a value is required. Likewise, it should make the most recent Fortran definition available. It is the programmer's responsibility to manage the interactions with the non-Fortran processes.A pointer with the VOLATILE attribute may additionally have its association status and array bounds changed by means not specified by the program.      NOTE 5.22      If the target of a pointer is referenced, defined, or becomes undefined, by means not specified by the program, while the pointer is associated with the target, then the pointer shall have the VOLATILE attribute. Usually a pointer should have the VOLATILE attribute if its target has the VOLATILE attribute. Similarly, all members of an EQUIVALENCE group should have the VOLATILE attribute if one member has the VOLATILE attribute.An allocatable object with the VOLATILE attribute may additionally have its allocation status, dynamic type and type parameters, and array bounds changed by means not specified by the program.",RESOLVED          FIXED      
28224,Tobias Burnus,gfortran should support namelist (nml) for internal file units,"If I'm not completely mistaken, Fortran 2003 allows to read namelists from internal files whereas it was forbidden in Fortran 95.At least I find in the F95/2005 book (in the f95 section) that it is forbidden, but I cannot find it in the Fortran 2003 standard.And also Richard E Maine (http://www.codecomments.com/archive271-2005-3-438971.html) seems to recall that this restriction was dropped in Fortran2003.Currently:Error: Internal file at (1) is incompatible with namelistExpected: Allow this. For std=f95 you might want to spit out an error/warning, though.",RESOLVED          FIXED      
29625,Tobias Burnus,"Octal edit descriptors allow real variables, even with -std=f95","(Fortran version: GNU Fortran 95 (GCC) 4.2.0 20061015 (experimental))Consider the following program:~/temp/gfortran> cat trans1.f90    program trans1      real :: a      a = 1.      write (*,""(10x, f9.5)"" ) a      write (*,""( 1x,  o20)"" ) transfer(a, 0)      write (*,""( 1x,  o20)"" ) a    endAccording to the Fortran 95 standard (section 10.5.1.1), the output list item corresponding to an ""O"" edit descriptor shall be of integer type.  Although allowing real items is a perfectly reasonable extension when strict standard-conformance is not requested, when strict standard conformance is requested, the last of these write statements should produce an error.  However, it does not:~/temp/gfortran> gfortran -std=f95 -Wall trans1.f90 -o trans1.exe~/temp/gfortran> ./trans1            1.00000           7740000000           7740000000",RESOLVED          FIXED      
61013,Cary Coutant,[4.9/4.10 Regression] Option parsing difference between < 4.9 and 4.9,"In gcc 4.8 a binary compiled with ""gcc -g3 ... -g"" would include the extended debug information (e.g. macros), while in gcc 4.9 the second -g seems to lower the debug level.That's obviously not a critical issue, but it's annoying enough because several buildsystems add -g internally, often after the user supplied CFLAGS, making it harder to build with a sufficient amount of debuginfo.",RESOLVED          FIXED      
59195,Cary Coutant,C++ demangler handles conversion operator incorrectly,"Consider this simple source:  struct C {    C(int i_) : i(i_) { }    int i;  };  struct A {    A() : i(0) { }    template <typename U>    explicit operator U();    int i;  };  void foo()  {    A ai;    C c = (C)ai;  }The conversion operator in A mangles to ""_ZN1AcvT_I1CEEv"", whichdemangles to:  A::operator C<C>()(I think this would be better as ""A::operator C()"", but let'sleave that aside for now.)That looks OK, but not if you dig deeper. The demangler isparsing this name as follows:  typed name    qualified name      name 'A'      cast	template	  template parameter 0	  template argument list	    name 'C'    function type      argument list  A::operator C<C>()It's parsing the ""T_"" as a <template-template-param>, not a<template-param>. It should really be parsing it as:  typed name    template      qualified name	name 'A'	cast	  template parameter 0      template argument list	name 'C'    function type      argument list  A::operator C<C>()The template argument list actually belongs with the<qualified-name>, not with the template parameter.The basic problem is an ambiguity in the grammar for manglednames. Consider the following two derivations:  (1) <nested-name>      -> <template-prefix> <template-args>      -> <prefix> <template-unqualified-name> <template-args>      -> <unqualified-name> <template-unqualified-name>                                                   <template-args>      -> <source-name> <template-unqualified-name> <template-args>      -> <source-name> <operator-name> <template-args>      -> <source-name> cv <type> <template-args>      -> <source-name> cv <template-template-param>                                   <template-args> <template-args>  (2) <nested-name>      -> <template-prefix> <template-args>      -> <prefix> <template-unqualified-name> <template-args>      -> <unqualified-name> <template-unqualified-name>                                                   <template-args>      -> <source-name> <template-unqualified-name> <template-args>      -> <source-name> <operator-name> <template-args>      -> <source-name> cv <type> <template-args>      -> <source-name> cv <template-param> <template-args>When you get to the ""T_"", there's no way to know if it's a<template-param> or a <template-template-param>. The parser incp-demangle.c, in cplus_demangle_type, looks ahead todisambiguate the two. If it sees an 'I', it assumes that it's a<template-template-param>, and it greedily consumes the<template-args>.In this particular case, it's wrong, but it gets the right answerbecause of a hack in d_print_cast, which takes the templatearguments under the cast operator, and places them in scopebefore resolving the ""T_"" reference.It doesn't take much to break that hack, though. Let's throw in apointer:  struct C {    C(int i_) : i(i_) { }    int i;  };  struct A {    A() : i(0) { }    template <typename U>    explicit operator U*();    int i;  };  void foo()  {    A ai;    C* c = (C*)ai;  }Now we get the mangled name ""_ZN1AcvPT_I1CEEv"", which thedemangler fails on:  typed name    qualified name      name 'A'      cast	pointer	  template	    template parameter 0	    template argument list	      name 'C'    function type      argument list  Failed: _ZN1AcvPT_I1CEEvThis name ought to be parsed as follows:  typed name    template      qualified name	name 'A'	cast	  pointer	    template parameter 0      template argument list	name 'C'    function type      argument list  A::operator C*<C>()(This incorrect parsing can also lead to some other subtle typesof failures, because substitutions can be numbered in the wrongorder. See the long example that started me on this investigationat the end.)Now let's add a real template template parameter:  template <typename T>  struct C {    C(T i_) : i(i_) { }    T i;  };  struct A {    A() : i(0) { }    template <template<typename U> class V>    operator V<int>();    int i;  };  void foo()  {    A ai;    C<int> c = (C<int>)ai;  }The conversion operator is now ""_ZN1AcvT_IiEI1CEEv"", and thedemangler gives us this:  typed name    template      qualified name	name 'A'	cast	  template	    template parameter 0	    template argument list	      builtin type int      template argument list	name 'C'    function type      argument list  A::operator int<int><C>()The derivation is actually correct this time, because we reallydo have a <template-template-param>, but the hack in d_print_castcauses it to substitute the wrong type for ""T_"".I'm pretty sure that the ambiguity can be resolved by context.Note that if we have a <template-template-param>, the<template-args> that go with it are followed by another set of<template-args> that go with the <template-prefix> in the secondstep of the derivation. (This is only true if we're parsing aconversion operator that derives from <nested-name>; if it's aconversion operator that's part of an <expression>, the presenceof an 'I' should always indicate that we're looking at a<template-template-param>.)I've got a patch that solves this with a little backtracking. Ifwe're in a conversion operator that's not part of an<expression>, and we see an 'I', it checkpoints the d_infostructure, does a trial parse of <template-args>, then looks foranother 'I'. If there isn't one, it backtracks and returns a<template-param>, leaving the <template-args> for d_prefix toparse.When printing a conversion operator, in d_print_cast, if theoperator is derived from a <template>, we need to place thattemplate in scope so that the <template-param> can look up thecorrect type. We can't just add it to the stack of templates,though, since that's only applicable when printing the type of afunction whose name is a template.Here's the long example that started me down this path:  _ZNK7strings8internal8SplitterINS_9delimiter5AnyOfENS_9SkipEmptyEEcvT_ISt6vectorI12basic_stringIcSt11char_traitsIcESaIcEESaISD_EEvEEvThe demangler fails to parse this string, because the ""SD_"" nearthe end is asking for the 15th substitution, but at that point ithas only registered 14 substitutions. That happened because itgreedily consumed the <template-args> that follow ""cvT_"", andhadn't yet registered the substitution for the conversionoperator (which derives from <prefix>). Any substitutions thatare contained in the <template-args> will be off by one as aresult.",RESOLVED          FIXED      
64046,Cary Coutant,"Malformed .eh_frame generated with LTO, gold and optimization enabled","While trying to track down a weird crash in libunwind, I found that the library I was debugging (libgudev-1.0.so.0.2.0) has a weird .eh_frame. I could minimize the problem to:    echo 'int main(void) { return 0; }' > hello.c    gcc -shared -Wl,-fuse-ld=gold -fPIC -flto -ffat-lto-objects -O2 hello.c -Wl,--gc-sections    readelf --hex-dump=.eh_frame a.out | head -n5Omitting any of the gcc options would result in a .eh_frame section that does not look odd. Output of readelf follows (note the leading 8 zeroes, and the warning about the invalid FDE length).Hex dump of section '.eh_frame':  0x000006b0 00000000 00000000 14000000 00000000 ................  0x000006c0 017a5200 01781001 1b0c0708 90010000 .zR..x..........  0x000006d0 c0feffff 1c000000 00000000 02000000 ................  0x000006e0 00000000 00000000 24000000 34000000 ........$...4...  0x000006f0 70feffff 30000000 000e1046 0e184a0f p...0......F..J.  0x00000700 0b770880 003f1a3b 2a332422 00000000 .w...?.;*3$""....Contents of the .eh_frame section:00000000 ZERO terminator00000004 ZERO terminator00000008 0000000000000014 00000000 CIE  Version:               1  Augmentation:          ""zR""  Code alignment factor: 1  Data alignment factor: -8  Return address column: 16  Augmentation data:     1b  DW_CFA_def_cfa: r7 (rsp) ofs 8  DW_CFA_offset: r16 (rip) at cfa-8  DW_CFA_nop  DW_CFA_nopreadelf: Warning: Invalid length 0xfffffec0 in FDE at 0x00002000000020 00000000fffffec0 0000001c FDE cie=00000008 pc=00000000000006d8..00000000000006da  DW_CFA_nop  DW_CFA_nop  DW_CFA_nop  DW_CFA_nop  DW_CFA_nop  DW_CFA_nop  DW_CFA_nop  DW_CFA_??? (User defined call frame op: 0x24)This .eh_frame encoding looks strange to me as it does not conform to LSB 4.1[1] nor the AMD64 ABI document. It also trips up Wireshark's ELF dissector.Linux x86_64GCC versions 4.8.2-1ubuntu6 (Ubuntu 14.04) and 4.9.2-1 (Arch Linux).binutils 2.24-8 (Arch Linux) [1]: https://refspecs.linuxfoundation.org/LSB_4.1.0/LSB-Core-generic/LSB-Core-generic/ehframechpt.html [2]: http://www.x86-64.org/documentation/abi.pdf",RESOLVED          FIXED      
60929,Cary Coutant,"[4.8/4.9 regression] ICE  in get_ref_die_offset, at dwarf2out.c","Created attachment 32658 [details]test caseUsing trunk @r209546:g++ -fdebug-types-section -gdwarf-4 -fmax-errors=1 '-std=gnu++11' -S t.cc && echo OKOKg++ -fdebug-types-section -gdwarf-4 -fmax-errors=1 '-std=gnu++11' -S t.cc -O2t.cc:84:1: internal compiler error: in get_ref_die_offset, at dwarf2out.c:3553 } ^0x892691 get_ref_die_offset        ../../gcc/dwarf2out.c:35530x892691 output_loc_operands        ../../gcc/dwarf2out.c:20810x892691 output_loc_sequence(dw_loc_descr_node*, int)        ../../gcc/dwarf2out.c:21270x892eff output_die        ../../gcc/dwarf2out.c:85580x892821 output_die        ../../gcc/dwarf2out.c:87610x892821 output_die        ../../gcc/dwarf2out.c:87610x892821 output_die        ../../gcc/dwarf2out.c:87610x892821 output_die        ../../gcc/dwarf2out.c:87610x892821 output_die        ../../gcc/dwarf2out.c:87610x896841 output_comdat_type_unit        ../../gcc/dwarf2out.c:90320x8b7b69 dwarf2out_finish        ../../gcc/dwarf2out.c:24255Please submit a full bug report,with preprocessed source if appropriate.Please include the complete backtrace with any bug report.Google ref: b/14230806",RESOLVED          FIXED      
61102,Cary Coutant,ld --plugin causes binutils gold incremental_test to fail,"This is a heads-up more than anything.  I've been trying out gcc 4.9.0 and one of binutils-2.24/gold's testcases fails because --plugin is being emitted to ld.My only guess is that the new slim LTO object files are handled transparently in the sense that one can link with them without supplying the -flto option, and perhaps this requires always emitting --plugin.I haven't tried building gcc's version of gold but I find it more convenient to build it with binutils.  So there is some incompatibility between the two packages it seems.This is the command: i686-pc-linux-gnu-gcc -O2 -o incremental_test -Wl,--incremental-full incremental_test_1.o incremental_test_2.oThis is gcc 4.9.0 on 32-bit i686.  I've filed a bug report on binutils' bugzilla as well, the PR id is 16921. Thank you.",RESOLVED          FIXED      
55364,Cary Coutant,"ICE: in remove_addr_table_entry, at dwarf2out.c:4201 with -O -gsplit-dwarf","Created attachment 28714 [details]reduced testcaseCompiler output:$ gcc -O -gsplit-dwarf testcase.c testcase.c:13:1: internal compiler error: in remove_addr_table_entry, at dwarf2out.c:4201 } ^0x70f423 remove_addr_table_entry        /mnt/svn/gcc-trunk/gcc/dwarf2out.c:42010x70f453 remove_loc_list_addr_table_entries        /mnt/svn/gcc-trunk/gcc/dwarf2out.c:42150x730930 resolve_addr        /mnt/svn/gcc-trunk/gcc/dwarf2out.c:226390x730960 resolve_addr        /mnt/svn/gcc-trunk/gcc/dwarf2out.c:226870x7458aa dwarf2out_finish        /mnt/svn/gcc-trunk/gcc/dwarf2out.c:23309Please submit a full bug report,with preprocessed source if appropriate.Please include the complete backtrace with any bug report.See <http://gcc.gnu.org/bugs.html> for instructions.Tested revisions:r193581 - crash",RESOLVED          FIXED      
55063,Cary Coutant,[4.8 Regression] Thousands of failures in the libstdc++-v3 tests after revision 192739,"After revision 192739, I got thousands of failures in the libstdc++-v3 tests on x86_64-apple-darwin10 (Xcode 3.2.6) of the kind:FAIL: 17_intro/static.cc (test for excess errors)Excess errors:warning: invalid DWARF generated by the compiler: DIE 0x0000459e has multiple  AT_declaration attributes in '/var/tmp//ccYrx3xr.o'.I don't know if this is an Apple's bug or not (and I don't care! if it is the case it won't be fixed for darwin 10). I have silenced the failures with the following hack (i.e., pruning the warning):--- ../_clean/libstdc++-v3/testsuite/lib/prune.exp	2012-04-11 14:09:59.000000000 +0200+++ libstdc++-v3/testsuite/lib/prune.exp	2012-10-24 16:55:36.000000000 +0200@@ -63,6 +63,7 @@ proc libstdc++-dg-prune { system text }      regsub -all ""(^|\n)\[^\n\]*ld: warning: can't add line info to anonymous symbol\[^\n\]*"" $text """" text     regsub -all ""(^|\n)\[^\n\]*warning: DWARFDebugInfoEntry::AppendDependants\[^\n\]*AT_\[^\n\]*_bound\[^\n\]*FORM_ref4\[^\n\]*"" $text """" text     regsub -all ""(^|\n)\[^\n\]*warning:\[^\n\]*TAG_variable:  AT_location\[^\n\]*didn't have valid function low pc\[^\n\]*"" $text """" text+    regsub -all ""(^|\n)\[^\n\]*warning: invalid DWARF generated by the compiler: DIE \[^\n\]* has multiple  AT_declaration attributes in\[^\n\]*"" $text """" text      # Ignore harmless warnings from Xcode 4.0.     regsub -all ""(^|\n)\[^\n\]*ld: warning: could not create compact unwind for\[^\n\]*"" $text """" texttested with -m64 only.",RESOLVED          FIXED      
53754,Cary Coutant,"[4.8 Regression][lto] ICE in lhd_decl_printable_name, at langhooks.c:222 (with -g)","as unrelated to PR53746 itself I open a new one:please refer to PR53746  for the test case (even if I'm sure can be further reduced)c++  -g  -fPIC -flto  -std=gnu++11 -msse3  CosmicClusterAlgo.ii -shared -o q.solto1: internal compiler error: in lhd_decl_printable_name, at langhooks.c:222Please submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.lto-wrapper: c++ returned 1 exit status/home/innocent/gccDir/bin/ld: fatal error: lto-wrapper failedcollect2: error: ld returned 1 exit statusw/o either -g or -flto worksc++ -vUsing built-in specs.COLLECT_GCC=c++COLLECT_LTO_WRAPPER=/home/innocent/gccDir/libexec/gcc/x86_64-unknown-linux-gnu/4.8.0/lto-wrapperTarget: x86_64-unknown-linux-gnuConfigured with: ../trunk/configure --prefix=/home/innocent/gccDir --enable-languages=c,c++,lto -enable-gold=yes --enable-lto -enable-libitm -disable-multilib --with-ppl --with-cloog : (reconfigured) ../trunk/configure --prefix=/home/innocent/gccDir --enable-languages=c,c++,lto -enable-gold=yes --enable-lto -enable-libitm -disable-multilib --with-ppl --with-cloogThread model: posixgcc version 4.8.0 20120623 (experimental) [trunk revision 188906] (GCC) on fedora 17",RESOLVED          FIXED      
47247,Cary Coutant,Linker plugin specification makes it difficult to handle COMDATs,"Current linker plugin specification has problem with COMDAT.  When COMDAT fnuction is put into symbol table and is used, it gets resolved as PREVAILING. This imply that it must be output in the final binary.This is often suboptimal because inlining often eliminate need for the out of line copy of COMDAT. GCC works around by not putting COMDAT symbols into symbol table. This leads to posibility that both LTO and non-LTO objects will define variant of the COMDAT function and that GCC will bring the LTO one static and thus two copies of COMDAT will be present. For this reason GCC will not do this for COMDAT function that is not virtual and has address taken.This trick works well in most cases, but leads i.e. to undefined symbols when Mozilla is built with LTO and -fprofile-generatehttps://bugzilla.mozilla.org/show_bug.cgi?id=624385this is because GCC no longer optimize out some functions from unused header. This is because indirect call profiling takes their address and forces them to stay in the program.In longer therm we really need better solution for this.",RESOLVED          FIXED      
45682,Cary Coutant,missing namespace parent die when using -gdwarf-4,"For the example below, when using gcc 4.5 and svn head, gcc -gdwarf-4 is not emitting the class definition in an enclosing namespace parent die.foo.cc:namespace thread {class Executor { public:  static Executor* CurrentExecutor();};}namespace thread {Executor* Executor::CurrentExecutor() {  return 0;}}thread::Executor *te;intmain (){  return 0;}bash$ gcc -g -c -o foo.o foo.ccbash$ readelf -w foo.o >foo.w--> <0><b>: Abbrev Number: 1 (DW_TAG_compile_unit)   < c>   DW_AT_producer    : (indirect string, offset: 0x13): GNU C++ 4.6.0 20100914 (experimental)   <10>   DW_AT_language    : 4        (C++)   <11>   DW_AT_name        : (indirect string, offset: 0x69): foo.cc   <15>   DW_AT_comp_dir    : (indirect string, offset: 0x0): /home/dje/src/play   <19>   DW_AT_low_pc      : 0x0   <21>   DW_AT_high_pc     : 0xb   <29>   DW_AT_stmt_list   : 0x0 <1><2d>: Abbrev Number: 2 (DW_TAG_namespace)   <2e>   DW_AT_name        : (indirect string, offset: 0x70): thread   <32>   DW_AT_decl_file   : 1   <33>   DW_AT_decl_line   : 2   <34>   DW_AT_sibling     : <0x3f> <2><38>: Abbrev Number: 3 (DW_TAG_class_type)   <39>   DW_AT_name        : (indirect string, offset: 0x39): Executor   <3d>   DW_AT_declaration : 1 <1><3f>: Abbrev Number: 4 (DW_TAG_class_type)   <40>   DW_AT_specification: <0x38>   <44>   DW_AT_byte_size   : 1   <45>   DW_AT_decl_file   : 1   <46>   DW_AT_decl_line   : 4   <47>   DW_AT_sibling     : <0x5d> <2><4b>: Abbrev Number: 5 (DW_TAG_subprogram)   <4c>   DW_AT_external    : 1   <4d>   DW_AT_name        : (indirect string, offset: 0x77): CurrentExecutor   <51>   DW_AT_decl_file   : 1   <52>   DW_AT_decl_line   : 6   <53>   DW_AT_MIPS_linkage_name: (indirect string, offset: 0x42): _ZN6thread8Executor15CurrentExecutorEv   <57>   DW_AT_type        : <0x5d>   <5b>   DW_AT_declaration : 1 <1><5d>: Abbrev Number: 6 (DW_TAG_pointer_type)   <5e>   DW_AT_byte_size   : 8   <5f>   DW_AT_type        : <0x3f> <1><63>: Abbrev Number: 7 (DW_TAG_subprogram)   <64>   DW_AT_specification: <0x4b>   <68>   DW_AT_decl_line   : 13   <69>   DW_AT_low_pc      : 0x0   <71>   DW_AT_high_pc     : 0xb   <79>   DW_AT_frame_base  : 0x0      (location list)bash$ gcc -gdwarf-4 -c -o foo.o foo.ccbash$ readelf -w foo.o >foo.w--> <0><b>: Abbrev Number: 7 (DW_TAG_compile_unit)   < c>   DW_AT_producer    : (indirect string, offset: 0x13): GNU C++ 4.6.0 20100914 (experimental)   <10>   DW_AT_language    : 4        (C++)   <11>   DW_AT_name        : (indirect string, offset: 0x69): foo.cc   <15>   DW_AT_comp_dir    : (indirect string, offset: 0x0): /home/dje/src/play   <19>   DW_AT_low_pc      : 0x0   <21>   DW_AT_high_pc     : 0xb   <29>   DW_AT_stmt_list   : 0x0 <1><2d>: Abbrev Number: 8 (DW_TAG_namespace)   <2e>   DW_AT_name        : (indirect string, offset: 0x70): thread   <32>   DW_AT_decl_file   : 1   <33>   DW_AT_decl_line   : 2 <1><34>: Abbrev Number: 9 (DW_TAG_class_type)   <35>   DW_AT_name        : (indirect string, offset: 0x39): Executor   <39>   DW_AT_declaration : 1   <39>   DW_AT_sibling     : <0x4d> <2><3d>: Abbrev Number: 5 (DW_TAG_subprogram)   <3e>   DW_AT_external    : 1   <3e>   DW_AT_name        : (indirect string, offset: 0x77): CurrentExecutor   <42>   DW_AT_decl_file   : 1   <43>   DW_AT_decl_line   : 6   <44>   DW_AT_linkage_name: (indirect string, offset: 0x42): _ZN6thread8Executor15CurrentExecutorEv   <48>   DW_AT_type        : <0x4d>   <4c>   DW_AT_declaration : 1 <1><4d>: Abbrev Number: 10 (DW_TAG_pointer_type)   <4e>   DW_AT_byte_size   : 8   <4f>   DW_AT_type        : signature: a547508193f2f296 <1><57>: Abbrev Number: 11 (DW_TAG_subprogram)   <58>   DW_AT_specification: <0x3d>   <5c>   DW_AT_decl_line   : 13   <5d>   DW_AT_low_pc      : 0x0   <65>   DW_AT_high_pc     : 0xb   <6d>   DW_AT_frame_base  : 1 byte block: 9c         (DW_OP_call_frame_cfa)Notice that in the -gdwarf-4 case the die for class Executor is missing an enclosing namespace parent die.",RESOLVED          FIXED      
40831,Cary Coutant,g++ generated symbols for cloned function that be demangled.,"G++ generates symbols for cloned functions that cannot be demangled, because of "".clone.N"".compiler version:$ inst/bin/gcc -vUsing built-in specs.Target: x86_64-linuxConfigured with: ../trunk/configure --enable-languages=c,c++,fortran --build=x86_64-linux --host=x86_64-linux --target=x86_64-linux --prefix=/g/users/cgd/proj/gcc-trunk/bld/../instThread model: posixgcc version 4.5.0 20090722 (experimental) (GCC) I'll upload an example shortly.  For that example:[cgd@bcpl gcc-trunk]$ inst/bin/gcc x.cc -c -O3[cgd@bcpl gcc-trunk]$ ../binutils/inst.ld/bin/nm -an x.o                 U _Z10externfuncv                 U __gxx_personality_v00000000000000000 b .bss0000000000000000 n .comment0000000000000000 d .data0000000000000000 r .eh_frame0000000000000000 n .note.GNU-stack0000000000000000 t .text0000000000000000 t _Z12to_be_clonediPv.clone.00000000000000000 a x.cc00000000000000c0 T _Z12to_be_clonediPv0000000000000190 T _Z3fooPv00000000000001b0 T _Z3barPv[cgd@bcpl gcc-trunk]$ ../binutils/inst.ld/bin/nm -anC x.o                 U externfunc()                 U __gxx_personality_v00000000000000000 b .bss0000000000000000 n .comment0000000000000000 d .data0000000000000000 r .eh_frame0000000000000000 n .note.GNU-stack0000000000000000 t .text0000000000000000 t _Z12to_be_clonediPv.clone.00000000000000000 a x.cc00000000000000c0 T to_be_cloned(int, void*)0000000000000190 T foo(void*)00000000000001b0 T bar(void*)This may cause problems for tools (e.g., profilers, analysis tools), which think they understand how to demangle symbols according to the ABI and want to present demangled names to users.Use of local-name might be appropriate here, I'm not sure.(There may also be debugger implications of this.)",RESOLVED          FIXED      
44149,Cary Coutant,"-fuse-linker-plugin lto1: internal compiler error: in lto_symtab_merge_decls_1, at lto-symtab.c:610","The attached subroutine is compiled as follows:gfortran -c -flto -O2 -fwhole-program bkfconv.F90and then the object file is placed in a library of its own:ar rv x.a bkfconv.oSubsequently, a main program, b.f:      call deep_convection      endis linked with this library, as follows:gfortran -fuse-linker-plugin -flto -O2 -fwhole-program b.f x.aThis results in the ICE in the subject.gfortran -vUsing built-in specs.COLLECT_GCC=/usr/snp/bin/gfortranCOLLECT_LTO_WRAPPER=/usr/snp/libexec/gcc/x86_64-unknown-linux-gnu/4.6.0/lto-wrapperTarget: x86_64-unknown-linux-gnuConfigured with: ../gcc/configure --enable-checking=release --prefix=/usr/snp --enable-gold --enable-plugins --disable-multilib --disable-nls --with-arch-64=native --with-tune-64=native --enable-languages=fortran,c++ --enable-stage1-languages=c++ --disable-werrorThread model: posixgcc version 4.6.0 20100514 (experimental) (GCC) ld -vGNU gold (GNU Binutils 2.20.51.20100506) 1.9",RESOLVED          FIXED      
41063,Cary Coutant,ICE in output_die,"Compile the following with -g for a DWARF target:$ cat test.ccstruct A {  virtual void run();};void test() {  struct B : public A {    void run() {      struct C : public A {	C() { }	B *b_;      };      C c;    }  };  B b;}$ gcc -vReading specs from /home/ccoutant/opensource/gcc-trunk/build-native/gcc/specsTarget: x86_64-unknown-linux-gnuConfigured with: ../gcc/configure --enable-languages=c,c++ --disable-bootstrap : (reconfigured) ../gcc/configure --disable-bootstrap --enable-languages=c,c++ --no-create --no-recursionThread model: posixgcc version 4.5.0 20090727 (experimental) (GCC) $ gcc -g -c test.cctest.cc:16:1: internal compiler error: in output_die, at dwarf2out.c:8845Please submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.By the time we get to dwarf2out_finish(), the DIE graph has a cycle in it: struct B -> subprogram run -> struct C -> struct B -> ...It seems to have put the DIE for struct B as a child of struct C instead of the DIE for ""pointer to B"".Because of the cycle, none of the DIEs involved are placed in the main compunit tree. The DIE for the type ""pointer to B"" (which did make it into the main tree) tries to reference the DIE for the type B, which is part of the cycle, and triggers the assertion.When the vtable for struct C is output from note_debug_info_needed(), a DIE for struct B has not been built yet. When gen_type_die_with_usage() sees the pointer to B, it then calls itself recursively to generate the DIE for B, but it passes the same context that it was given, which is the lexical block inside B::run(), and struct B is then created as a child of that lexical block, thus forming the cycle.",RESOLVED          FIXED      
42757,Cary Coutant,lto1 does not emit common symbols with -fuse-linker-plugin,GCC 4.5.0 20100114.,RESOLVED          FIXED      
42454,Cary Coutant,[4.5 Regression] debug_ranges table contains empty range for unused .text section with -ffunction-sections,"When -ffunction-sections is turned on with -g2, gcc emits an entry into the .debug_ranges section for the DW_TAG_compile_unit for the range (.Ltext, .Letext) unconditionally. With -ffunction-sections, the .text section remains unused, and this entry in .debug_ranges refers to a zero-length range.That's not normally a problem, but when --gc-sections is turned on in the linker, the empty .text section can be removed, and the relocations for that range apply zeroes to that entry, and it now looks like the end of the range list. Because that's actually the first range entry that gcc emits for the compile unit, DWARF consumers see an empty range list. This causes significant slowdowns for objdump and addr2line.Example:$ cat foo.cint foo(int i){         return i + 1; }       int bar(int i)  {         return i + 2; }       $ gcc -S -dA -g -ffunction-sections foo.cThe resulting assembly code has this:        .text.Ltext0:        .section        .text.foo,""ax"",@progbits.globl foo        .type   foo, @functionfoo:.LFB0:...        .text.Letext0:...        .section        .debug_ranges,"""",@progbits.Ldebug_ranges0:        .quad   .Ltext0 # Offset 0x0        .quad   .Letext0        .quad   .LFB0   # Offset 0x10        .quad   .LFE0        .quad   .LFB1   # Offset 0x20        .quad   .LFE1        .quad   0x0        .quad   0x0",RESOLVED          FIXED      
41700,Cary Coutant,g++.dg/debug/dwarf2/icf.C,Executing on host: /test/gnu/gcc/objdir/gcc/testsuite/g++/../../g++ -B/test/gnu/gcc/objdir/gcc/testsuite/g++/../../ /test/gnu/gcc/gcc/gcc/testsuite/g++.dg/debug/dwarf2/icf.C  -nostdinc++ -I/test/gnu/gcc/objdir/hppa64-hp-hpux11.11/libstdc++-v3/include/hppa64-hp-hpux11.11 -I/test/gnu/gcc/objdir/hppa64-hp-hpux11.11/libstdc++-v3/include -I/test/gnu/gcc/gcc/libstdc++-v3/libsupc++ -I/test/gnu/gcc/gcc/libstdc++-v3/include/backward -I/test/gnu/gcc/gcc/libstdc++-v3/testsuite/util -fmessage-length=0  -O0 -gdwarf-2 -fenable-icf-debug -dA  -S  -o icf.s    (timeout = 300)PASS: g++.dg/debug/dwarf2/icf.C (test for excess errors)PASS: g++.dg/debug/dwarf2/icf.C scan-assembler \\.section.*.debug_dcallFAIL: g++.dg/debug/dwarf2/icf.C scan-assembler \\.section.*.debug_vcallPASS: g++.dg/debug/dwarf2/icf.C scan-assembler New callerPASS: g++.dg/debug/dwarf2/icf.C scan-assembler Caller DIE offsetPASS: g++.dg/debug/dwarf2/icf.C scan-assembler Point of callPASS: g++.dg/debug/dwarf2/icf.C scan-assembler Callee DIE offsetFAIL: g++.dg/debug/dwarf2/icf.C scan-assembler 0x0.*Vtable slotFAIL: g++.dg/debug/dwarf2/icf.C scan-assembler 0x1.*Vtable slot,RESOLVED          FIXED      
70626,Jakub Jelinek,bogus results in 'acc parallel loop' reductions,"Created attachment 38233 [details]test caseCurrently, given a combined acc parallel loop of the form  #pragma acc parallel loop reduction(+:var)all of the front ends will split that loop as  #pragma acc parallel  #pragma acc loop reduction(+:var)This is bad because the gimplifier will not assign an implicit present_or_copy clause for the reduction variable 'var', instead 'var' gets transferred via firstprivate. One solution here is to teach the front ends to attach the reduction clause to both directives, instead of just the split acc loop.",RESOLVED          FIXED      
68242,Tom de Vries,"FAIL: libgomp.oacc-c-c++-common/reduction-2.c, and other OpenACC reduction test case ""oddities""",I observe when testing gomp4_0-branch on x86_64 with -m32:...FAIL: libgomp.oacc-c/../libgomp.oacc-c-c++-common/reduction-2.c -DACC_DEVICE_TYPE_host=1 -DACC_MEM_SHARED=1 -foffload=disable execution test...,RESOLVED          FIXED      
70357,Tom de Vries,[openacc][gomp4] ICE on reduction (+:sum) private (sum),"testcase:...intmain (void){  unsigned int sum = 0;  #pragma acc parallel reduction (+:sum) private(sum)  ;  return 0;}...ICE when compiling for openacc with gomp-4_0-branch:...$ gcc -O2 -fopenacc private.cprivate.c: In function ‘main’:private.c:5:11: internal compiler error: Segmentation fault   #pragma acc parallel reduction (+:sum) private(sum)           ^~~0xf65b5a crash_signal	src/gcc/toplev.c:3350xd02bdb lookup_decl	src/gcc/omp-low.c:10800xd15cb6 lower_oacc_reductions	src/gcc/omp-low.c:57140xd4806b lower_omp_target	src/gcc/omp-low.c:169780xd49240 lower_omp_1	src/gcc/omp-low.c:173010xd4976f lower_omp	src/gcc/omp-low.c:173940xd48e49 lower_omp_1	src/gcc/omp-low.c:172420xd4976f lower_omp	src/gcc/omp-low.c:173940xd48e49 lower_omp_1	src/gcc/omp-low.c:172420xd4976f lower_omp	src/gcc/omp-low.c:173940xd4b743 execute_lower_omp	src/gcc/omp-low.c:181290xd4b7e8 execute	src/gcc/omp-low.c:18166Please submit a full bug report,with preprocessed source if appropriate.Please include the complete backtrace with any bug report.See <http://gcc.gnu.org/bugs.html> for instructions....On trunk instead we get:...private.c: In function ‘main’:private.c:5:34: error: ‘sum’ appears more than once in data clauses   #pragma acc parallel reduction (+:sum) private(sum)...",RESOLVED          FIXED      
70289,Tom de Vries,[openacc] ICE in input_varpool_node,"Created attachment 38015 [details]test-caseWhen compiling the testcase with:- options ""-fopenacc -O2"", and- with a compiler build from trunk, with nvidia accelerator setup,we run into the following ICE:...lto1: internal compiler error: in input_varpool_node, at lto-cgraph.c:14180xae65d7 input_varpool_node        gcc/lto-cgraph.c:1416...[ On the gomp-4_0-branch, we run into an error instead due to https://gcc.gnu.org/ml/gcc-patches/2016-01/msg00482.html . ]",RESOLVED          FIXED      
70373,Tom de Vries,"[openacc] ICE with reduction clause in set_parm_rtl, at cfgexpand.c","Created attachment 38069 [details]test-case$ gcc -O2 test.c -fopenacc test.c: In function ‘foo’:test.c:4:1: internal compiler error: in set_parm_rtl, at cfgexpand.c:1272 foo (unsigned int sum) ^~~0x8b7cde set_parm_rtl(tree_node*, rtx_def*)	src/gcc/cfgexpand.c:12720xad2b53 assign_parm_setup_reg	src/gcc/function.c:33430xad467d assign_parms	src/gcc/function.c:37700xad8d78 expand_function_start(tree_node*)	src/gcc/function.c:52040x8ca980 execute	src/gcc/cfgexpand.c:6225Please submit a full bug report,with preprocessed source if appropriate.Please include the complete backtrace with any bug report.See <http://gcc.gnu.org/bugs.html> for instructions.",RESOLVED          FIXED      
70348,Tom de Vries,"[6 Regression][openacc] ICE in visit_ref_for_mod_analysis, at ipa-prop.c","Created attachment 38052 [details]test-caseThe testcase ICEs when compiled for openacc:...$ gcc -O2 -fopenacc test.c -Serror.c: In function ‘foo._omp_fn.0’:error.c:33:1: internal compiler error: in visit_ref_for_mod_analysis, at ipa-prop.c:2148 } ^0xc03686 visit_ref_for_mod_analysis	src/gcc/ipa-prop.c:21480xb2b323 walk_stmt_load_store_addr_ops(gimple*, void*, bool (*)(gimple*, tree_node*, tree_node*, void*), bool (*)(gimple*, tree_node*, tree_node*, void*), bool (*)(gimple*, tree_node*, tree_node*, void*))	src/gcc/gimple-walk.c:7700xc03759 ipa_analyze_params_uses_in_bb	src/gcc/ipa-prop.c:21750xc03a2e analysis_dom_walker::before_dom_children(basic_block_def*)	src/gcc/ipa-prop.c:22550x1cb5f46 dom_walker::walk(basic_block_def*)	src/gcc/domwalk.c:2650xc03d27 ipa_analyze_node(cgraph_node*)	src/gcc/ipa-prop.c:23260x1d45293 ipcp_generate_summary	src/gcc/ipa-cp.c:46380xd936b0 execute_ipa_summary_passes(ipa_opt_pass_d*)	src/gcc/passes.c:21620x913eef ipa_passes	src/gcc/cgraphunit.c:22900x9142d1 symbol_table::compile()	src/gcc/cgraphunit.c:24040x914675 symbol_table::finalize_compilation_unit()	src/gcc/cgraphunit.c:2564Please submit a full bug report,with preprocessed source if appropriate.Please include the complete backtrace with any bug report.See <http://gcc.gnu.org/bugs.html> for instructions.",RESOLVED          FIXED      
70009,Bill Seurer,test case libgomp.oacc-c-c++-common/vprop.c fails starting with its introduction in r233607,FAIL: libgomp.oacc-c/../libgomp.oacc-c-c++-common/vprop.c -DACC_DEVICE_TYPE_host=1 -DACC_MEM_SHARED=1 (test for excess errors)FAIL: libgomp.oacc-c++/../libgomp.oacc-c-c++-common/vprop.c -DACC_DEVICE_TYPE_host=1 -DACC_MEM_SHARED=1 execution testTesting libgomp.oacc-c-c++-common/vprop.cdoing compilepid is 95346 -95346close result is 95346 exp8 0 1output is /home/seurer/gcc/gcc-test2/libgomp/testsuite/libgomp.oacc-c/../libgomp.oacc-c-c++-common/vprop.c: In function 'test_char':/home/seurer/gcc/gcc-test2/libgomp/testsuite/libgomp.oacc-c/../libgomp.oacc-c-c++-common/vprop.c:11:12: error: invalid controlling predicate/home/seurer/gcc/gcc-test2/libgomp/testsuite/libgomp.oacc-c/../libgomp.oacc-c-c++-common/vprop.c:24:1: note: in expansion of macro 'test' status 1compiler exited with status 1FAIL: libgomp.oacc-c/../libgomp.oacc-c-c++-common/vprop.c -DACC_DEVICE_TYPE_host=1 -DACC_MEM_SHARED=1 (test for excess errors)From my testing this fails on powerpc (both BE and LE) but not x86.,RESOLVED          FIXED      
68813,Tom de Vries,"[openacc] lto1: internal compiler error: in input_varpool_node, at lto-cgraph.c","Consider OpenACC testcase test.f90:...program foo  implicit none  integer, parameter :: n = 100  integer, dimension(n,n) :: a  integer :: i, j, sum = 0  a = 1  !$acc parallel copyin(a(1:n,1:n)) firstprivate (sum)  !$acc loop gang reduction(+:sum)  do i=1, n     !$acc loop vector reduction(+:sum)     do j=1, n        sum = sum + a(i, j)     enddo  enddo  !$acc end parallelend program...When compiling like this with a compiler configured for offloading:...$ gfortran -O2 -fopenacc-lm -foffload=-lm test.f90...We run into:...lto1: internal compiler error: in input_varpool_node, at lto-cgraph.c:14120xa88e5b input_varpool_node	gcc/lto-cgraph.c:14100xa893d1 input_cgraph_1	gcc/lto-cgraph.c:15340xa89fde input_symtab()	gcc/lto-cgraph.c:18430x6e42bc read_cgraph_and_symbols	gcc/lto/lto.c:28460x6e5125 lto_main()	gcc/lto/lto.c:3263Please submit a full bug report,with preprocessed source if appropriate....I'm not sure the example is legal, but we shouldn't ICE.",RESOLVED          FIXED      
66714,Tom de Vries,ICE in loc_list_from_tree with -g,"With gomp-4_0-branch, when running target-libgomp testsuite with --target_board=unix/-O2/-g, we have:c.exp:...FAIL: libgomp.oacc-c/../libgomp.oacc-c-c++-common/atomic_capture-1.c -DACC_DEVICE_TYPE_host_nonshm=1 -DACC_MEM_SHARED=0 (internal compiler error)FAIL: libgomp.oacc-c/../libgomp.oacc-c-c++-common/atomic_capture-1.c -DACC_DEVICE_TYPE_host_nonshm=1 -DACC_MEM_SHARED=0 (test for excess errors)FAIL: libgomp.oacc-c/../libgomp.oacc-c-c++-common/atomic_capture-1.c -DACC_DEVICE_TYPE_host=1 -DACC_MEM_SHARED=1 (internal compiler error)FAIL: libgomp.oacc-c/../libgomp.oacc-c-c++-common/atomic_capture-1.c -DACC_DEVICE_TYPE_host=1 -DACC_MEM_SHARED=1 (test for excess errors)...c++.exp:...FAIL: libgomp.oacc-c++/../libgomp.oacc-c-c++-common/atomic_capture-1.c -DACC_DEVICE_TYPE_host_nonshm=1 -DACC_MEM_SHARED=0 (internal compiler error)FAIL: libgomp.oacc-c++/../libgomp.oacc-c-c++-common/atomic_capture-1.c -DACC_DEVICE_TYPE_host_nonshm=1 -DACC_MEM_SHARED=0 (test for excess errors)FAIL: libgomp.oacc-c++/../libgomp.oacc-c-c++-common/atomic_capture-1.c -DACC_DEVICE_TYPE_host=1 -DACC_MEM_SHARED=1 (internal compiler error)FAIL: libgomp.oacc-c++/../libgomp.oacc-c-c++-common/atomic_capture-1.c -DACC_DEVICE_TYPE_host=1 -DACC_MEM_SHARED=1 (test for excess errors)...In more detail:...src/libgomp/testsuite/libgomp.oacc-c/../libgomp.oacc-c-c++-common/atomic_capture-1.c: In function ‘main._omp_fn.44’:src/libgomp/testsuite/libgomp.oacc-c/../libgomp.oacc-c-c++-common/atomic_capture-1.c:817:9: internal compiler error: Segmentation fault0xebeb50 crash_signal	src/gcc/toplev.c:3800x92e939 loc_list_from_tree	src/gcc/dwarf2out.c:144440x92ef5e loc_list_from_tree	src/gcc/dwarf2out.c:145710x92f3e2 loc_list_from_tree	src/gcc/dwarf2out.c:146450x92ef5e loc_list_from_tree	src/gcc/dwarf2out.c:145710x93478c add_location_or_const_value_attribute	src/gcc/dwarf2out.c:160880x940528 gen_variable_die	src/gcc/dwarf2out.c:192770x946189 gen_decl_die	src/gcc/dwarf2out.c:210280x94481d process_scope_var	src/gcc/dwarf2out.c:205430x944896 decls_for_scope	src/gcc/dwarf2out.c:205680x93c0c0 gen_subprogram_die	src/gcc/dwarf2out.c:188690x945e09 gen_decl_die	src/gcc/dwarf2out.c:209610x94708c dwarf2out_decl	src/gcc/dwarf2out.c:213940x9470ae dwarf2out_function_decl	src/gcc/dwarf2out.c:214020x9ecc5b rest_of_handle_final	src/gcc/final.c:45250x9ecfce execute	src/gcc/final.c:4567Please submit a full bug report,with preprocessed source if appropriate.Please include the complete backtrace with any bug report.See <http://gcc.gnu.org/bugs.html> for instructions....",RESOLVED          FIXED      
9535,Arnaud Charlet,Datagram socket semantics are wrong,"Datagram sockets try to behave like streams -- they will send as many datagrams as necessary to output the data rather than failing if the user sends more than the max datagram size, and read as many as necessary to fill the user buffer.I believe they should respect the ""datagram-ness"" of the medium the user has chosen. There are all sorts of problems with the present model (out-of-order arrival etc).I propose the attached patch.Release:gcc version 3.4 20030201 (experimental)Environment:i686-pc-linux-gnuHow-To-Repeat:Not applicable.",RESOLVED          FIXED      
54845,Arnaud Charlet,[trunk/gcc/c-family/c-ada-spec.c:3114]: (error) Buffer is accessed out of bounds.,"I just ran the static analysis checker cppcheck overthe source code of today's trunk.The checker said[trunk/gcc/c-family/c-ada-spec.c:3114]: (error) Buffer is accessed out of bounds.The source code is              sprintf (buf, ""field_%d : aliased "", field_num + 1);but   char buf[16];I make that at least 19 chars written into a 16 char buffer.Suggest increase buf size.",RESOLVED          FIXED      
54125,Arnaud Charlet,"[4.8 regression] s-atopri.adb:40:10: ""Support_Atomic_Primitives"" is undefined broke Ada on multiple platforms","Attempting to bootstrap gcc-4.8-20120729 on sparc64-linux with Ada enabled fails with:/mnt/scratch/objdir48/./gcc/xgcc -B/mnt/scratch/objdir48/./gcc/ -B/mnt/scratch/install48/sparc64-unknown-linux-gnu/bin/ -B/mnt/scratch/install48/sparc64-unknown-linux-gnu/lib/ -isystem /mnt/scratch/install48/sparc64-unknown-linux-gnu/include -isystem /mnt/scratch/install48/sparc64-unknown-linux-gnu/sys-include    -c -g -O2 -m64 -fPIC  -W -Wall -gnatpg -nostdinc -m64  s-atopri.adb -o s-atopri.os-atopri.adb:40:10: ""Support_Atomic_Primitives"" is undefined (more references follow)make[9]: *** [s-atopri.o] Error 1make[9]: *** Waiting for unfinished jobs....make[9]: Leaving directory `/mnt/scratch/objdir48/gcc/ada/rts_64'make[8]: *** [gnatlib] Error 2make[8]: Leaving directory `/mnt/scratch/objdir48/gcc/ada'make[7]: *** [gnatlib-shared-default] Error 2make[7]: Leaving directory `/mnt/scratch/objdir48/gcc/ada'make[6]: *** [gnatlib-shared-dual] Error 2make[6]: Leaving directory `/mnt/scratch/objdir48/gcc/ada'make[5]: *** [gnatlib-shared] Error 2make[5]: Leaving directory `/mnt/scratch/objdir48/gcc/ada'make[4]: *** [gnatlib-shared] Error 2make[4]: Leaving directory `/mnt/scratch/objdir48/sparc64-unknown-linux-gnu/64/libada'make[3]: *** [multi-do] Error 1make[3]: Leaving directory `/mnt/scratch/objdir48/sparc64-unknown-linux-gnu/libada'make[2]: *** [all] Error 2make[2]: Leaving directory `/mnt/scratch/objdir48/sparc64-unknown-linux-gnu/libada'make[1]: *** [all-target-libada] Error 2make[1]: Leaving directory `/mnt/scratch/objdir48'make: *** [bootstrap] Error 2The previous weekly snapshot, 4.8-20120722, bootstrapped fine on this machine with the same configuration options.",RESOLVED          FIXED      
51307,Arnaud Charlet,"[4.7 Regression] s-taprop.adb:676:25: ""CLOCK_RT_Ada"" not declared in ""OS_Constants""","/test/gnu/gcc/objdir/./gcc/xgcc -B/test/gnu/gcc/objdir/./gcc/ -B/opt/gnu/gcc/gcc-4.7/hppa2.0w-hp-hpux11.11/bin/ -B/opt/gnu/gcc/gcc-4.7/hppa2.0w-hp-hpux11.11/lib/ -isystem /opt/gnu/gcc/gcc-4.7/hppa2.0w-hp-hpux11.11/include -isystem /opt/gnu/gcc/gcc-4.7/hppa2.0w-hp-hpux11.11/sys-include    -c -g -O2  -fPIC  -W -Wall -gnatpg -nostdinc   s-taprop.adb -o s-taprop.os-taprop.adb:53:12: warning: no entities of ""Os_Constants"" are referenceds-taprop.adb:65:04: warning: no entities of ""OSC"" are referenceds-taprop.adb:676:25: ""CLOCK_RT_Ada"" not declared in ""OS_Constants""make[7]: *** [s-taprop.o] Error 1make[7]: Leaving directory `/test/gnu/gcc/objdir/gcc/ada/rts'make[6]: *** [gnatlib] Error 2make[6]: Leaving directory `/test/gnu/gcc/objdir/gcc/ada'make[5]: *** [gnatlib-shared-default] Error 2make[5]: Leaving directory `/test/gnu/gcc/objdir/gcc/ada'make[4]: *** [gnatlib-shared-dual] Error 2make[4]: Leaving directory `/test/gnu/gcc/objdir/gcc/ada'make[3]: *** [gnatlib-shared] Error 2make[3]: Leaving directory `/test/gnu/gcc/objdir/gcc/ada'-bash-3.2$ ./xgcc -B./ -vReading specs from ./specsCOLLECT_GCC=./xgccCOLLECT_LTO_WRAPPER=./lto-wrapperTarget: hppa2.0w-hp-hpux11.11Configured with: ../gcc/configure --with-gnu-as --with-as=/opt/gnu/bin/as --enable-shared --with-local-prefix=/opt/gnu --prefix=/opt/gnu/gcc/gcc-4.7 --with-gmp=/opt/gnu/gcc/gmp --enable-threads=posix --enable-debug=no --disable-nls --disable-lto --without-cloog --without-ppl --enable-languages=c,c++,objc,fortran,java,ada,obj-c++Thread model: posixgcc version 4.7.0 20111125 (experimental) [trunk revision 181706] (GCC)",RESOLVED          FIXED      
49819,Arnaud Charlet,[4.6/4.7 regression] bogus reference to g-trasym-dwarf.adb in Makefile,"This patch, committed in Subversion as revision 165921:    2010-10-25  Jose Ruiz  <ruiz@adacore.com>        	* gcc-interface/Makefile.in (LIBGNAT_TARGET_PAIRS for powerpc-linux):    	Reorganize target pairs so that it works on linux and ElinOS.included this change:--- a/gcc/ada/gcc-interface/Makefile.in+++ b/gcc/ada/gcc-interface/Makefile.in@@ -1790,31 +1790,15 @@ ifeq ($(strip $(filter-out powerpc% linux%,$(arch) $(osys))),)   s-intman.adb<s-intman-posix.adb \   s-linux.ads<s-linux.ads \   s-osinte.adb<s-osinte-posix.adb \-  s-osinte.ads<s-osinte-linux.ads \-  s-osprim.adb<s-osprim-posix.adb \-  s-taprop.adb<s-taprop-linux.adb \-  s-tasinf.ads<s-tasinf-linux.ads \-  s-tasinf.adb<s-tasinf-linux.adb \-  s-taspri.ads<s-taspri-posix-noaltstack.ads \   s-tpopsp.adb<s-tpopsp-posix-foreign.adb \   g-sercom.adb<g-sercom-linux.adb \+  g-trasym.adb<g-trasym-dwarf.adb \                 <-- here   $(ATOMICS_TARGET_PAIRS) (rest omitted)The offending line introduces a dependency on a source file g-trasym-dwarf.adb which does not exist in the sources.[initially reported as http://bugs.debian.org/635112]",RESOLVED          FIXED      
30740,Arnaud Charlet,Improper semantics in gnat's compilation of certain expressions involving modular arithmetic,"The problem appears in the evaluation of certain expressions with modular variables.  Without the use of the -gnato option during compilation, the executable produced by gnat 3.15p on Solaris for the source code shown below produces incorrect results.  Here's a sample output line from this program:______________________________________________________________________________When J=2, Test_Pattern*2**J =124 or 2#1111100#	 but Test_Pattern*2**2 = 60 or 2#111100#______________________________________________________________________________60 is correct, 124 is incorrect.So the default behavior of the compiler does not appear to match the semantics of the Ada language standard for modular values and the ""workaround"" requires use of an option (-gnato) that should not be influencing the behavior of this program. (Overflow is not possible for modular values; they must always wrap around.) See http://groups.google.com/group/comp.lang.ada/browse_thread/thread/4eca860272d4832b/3bca35e8bb0bdb52?hl=en#3bca35e8bb0bdb52 for a complete discussion of this problem.  Here's the source code of a program that demonstrates this problem in my environment and, according to others on comp.lang.ada, other environments as well:with Ada.Text_IO; use Ada.Text_IO;procedure Strange_Typing is   type Six_Bits is mod 2**6;   package Six_Bit_IO is new Ada.Text_IO.Modular_IO(Six_Bits);   use Six_Bit_IO;   Test_Pattern : Six_Bits := 31;         -- 5 bits of onesbegin   Put(""The test pattern is a modulo 2**6 integer = "");   Put(Test_Pattern, 0);                                           Put("" or "");   Put(Test_Pattern, 0, 2);   New_Line(2);   for J in 0 .. 5 loop      Put(""When J="");      Put(Six_Bits(J), 0); Put("", "");      Put(""Test_Pattern*2**J ="");      Six_Bit_IO.Put( Test_Pattern*2**J);             Put("" or "");      Six_Bit_IO.Put( Test_Pattern*2**J, 0, 2);      Put(Ascii.Ht & "" but "");      case J is         when 0 =>            Put(""Test_Pattern*2**0 = "");            Put( Test_Pattern*2**0, 0);    Put("" or "");            Put( Test_Pattern*2**0, 0, 2);        when 1 =>            Put(""Test_Pattern*2**1 = "");            Put( Test_Pattern*2**1, 0);    Put("" or "");            Put( Test_Pattern*2**1, 0, 2);         when 2 =>            Put(""Test_Pattern*2**2 = "");            Put( Test_Pattern*2**2, 0);    Put("" or "");            Put( Test_Pattern*2**2, 0, 2);          when 3 =>            Put(""Test_Pattern*2**3 = "");            Put( Test_Pattern*2**3, 0);    Put("" or "");            Put( Test_Pattern*2**3, 0, 2);         when 4 =>            Put(""Test_Pattern*2**4 = "");            Put( Test_Pattern*2**4, 0);    Put("" or "");            Put( Test_Pattern*2**4, 0, 2);         when 5 =>            Put(""Test_Pattern*2**5 = "");            Put( Test_Pattern*2**5, 0);    Put("" or "");            Put( Test_Pattern*2**5, 0, 2);      end case;      New_Line;   end loop;   New_Line;end Strange_Typing;",RESOLVED          FIXED      
18434,Arnaud Charlet,[4.0/4.1 Regression] Ada: cannot build gnattools on Tru64 UNIX V5.1B,"When I tried a C + Ada only bootstrap of current mainline onalpha-dec-osf5.1b, most of the bootstrap and building libada went alongfine.  The bootstrap stopped only when trying to build gnatchop (or anyother of gnattools):make -C tools -f ../Makefile ""CC=../../xgcc -B../../"" ""CFLAGS=-O2 -g -O2  -mieee"" ""LDFLAGS="" ""ADAFLAGS=-gnatpg -gnata"" ""INCLUDES=-I. -I.. -I../.. -I/vol/gnu/src/gcc/gcc-dist/gcc/ada -I/vol/gnu/src/gcc/gcc-dist/gcc/ada/../config -I/vol/gnu/src/gcc/gcc-dist/gcc/ada/../../include -I/vol/gnu/src/gcc/gcc-dist/gcc/ada/.."" ""ADA_INCLUDES=-I../rts -I. -I/vol/gnu/src/gcc/gcc-dist/gcc/ada"" ""libsubdir=/vol/gcc/lib/gcc/alpha-dec-osf5.1b/4.0.0"" ""exeext="" ""fsrcdir=/vol/gnu/src/gcc/gcc-dist/gcc/ada"" ""srcdir=/vol/gnu/src/gcc/gcc-dist/gcc/ada"" ""TOOLS_LIBS=../rts/libgnat.a  ../../prefix.o ../../version.o link.o ../../../libiberty/libiberty.a -lexc  "" ""GNATMAKE=../../gnatmake"" ""GNATLINK=../../gnatlink"" ""GNATBIND=../../gnatbind"" \  TOOLSCASE=native \  ../../gnatchop ../../gnat ../../gnatkr \  ../../gnatls ../../gnatprep \  ../../gnatxref \  ../../gnatfind ../../gnatname \  ../../gnatclean ../../gprmake \  ../../gprcmd   ../../gpr2makemake[4]: Entering directory `/amnt/figaro/volumes/obj-gcc/gcc/obj.alpha/gcc-4.0.0-20041110/10-gcc-ada/gcc/ada/tools'../../gnatmake -c -I../rts -I. -I/vol/gnu/src/gcc/gcc-dist/gcc/ada gnatchop --GCC=""../../xgcc -B../../ -O2 -g -O2  -mieee      -gnatpg -gnata""gnatmake: ""gnatchop"" not foundmake[4]: *** [../../gnatchop] Error 4Running the newly built gnatmake under truss reveals that it looks forgnatchop in $srcdir, not gnatchop.adb (as expected and happens e.g. onSolaris 10).  So this might be a code generation bug on alpha.Environment:System: OSF1 bartok V5.1 2650 alphaMachine: alpha	host: alpha-dec-osf5.1bbuild: alpha-dec-osf5.1btarget: alpha-dec-osf5.1bconfigured with: /vol/gnu/src/gcc/gcc-dist/configure --host alpha-dec-osf5.1b --build alpha-dec-osf5.1b --target alpha-dec-osf5.1b --prefix=/vol/gcc --with-local-prefix=/vol/gcc --disable-nls --enable-languages=c,adaHow-To-Repeat:Try bootstrapping on alpha-dec-osf5.1b as above.",RESOLVED          FIXED      
23732,Arnaud Charlet,[ada] Library_Version still at 4.0 ?,gcc/ada/gnatvsn.ads probably should be updated to 4.1?,RESOLVED          FIXED      
9087,Arnaud Charlet,Component_Size for packed array returns wrong values,"By applying a pragma Pack to an unconstrained array of (e.g. boolean) the output of Component_Size for the array's subtype iswrong.According to this, the calculated 'Size for the whole array iswrong as well.Release:gcc version 3.4 20021220 (experimental)Environment:i586-pc-linux-gnuHow-To-Repeat:Compile the attached file. As you can see the array is really packed (the elements 1 and 5 are within the same byte), but the read-access to Component_Size returned the wrong value, 8. It should return 1 here.",RESOLVED          FIXED      
23646,Arnaud Charlet,[4.1 Regression] Ada testsuite hangs -- many new failures,gnatmake is /home/dave/gnu/gcc-4.0/objdir/gcc/gnatmake                === acats support ===Generating support files... done.Compiling support files... done.                === acats tests ===Running chapter a ...FAIL:   a87b59aRunning chapter c2 ...Running chapter c3 ...FAIL:   c32001eFAIL:   c32111aFAIL:   c32111bFAIL:   c32112bFAIL:   c32113aFAIL:   c32115aFAIL:   c32115bFAIL:   c330001FAIL:   c330002FAIL:   c34001cFAIL:   c34001fFAIL:   c34002cFAIL:   c34003cFAIL:   c34005cFAIL:   c34005fFAIL:   c34005iFAIL:   c34005lFAIL:   c34005oFAIL:   c34005rFAIL:   c34005uFAIL:   c34006fFAIL:   c34006lFAIL:   c34007aFAIL:   c34007dFAIL:   c34007fFAIL:   c34007gFAIL:   c34007iFAIL:   c34007jFAIL:   c34007mFAIL:   c34007pFAIL:   c34007rFAIL:   c34007sFAIL:   c34007uFAIL:   c34009fFAIL:   c34009lFAIL:   c34011bFAIL:   c34018aFAIL:   c35003aFAIL:   c35003bFAIL:   c35003dFAIL:   c354002FAIL:   c354003FAIL:   c35502cFAIL:   c35502eFAIL:   c35502kFAIL:   c35502lFAIL:   c35502mFAIL:   c35502nFAIL:   c35503cFAIL:   c35503eFAIL:   c35505cFAIL:   c35505eFAIL:   c35505fFAIL:   c35507cFAIL:   c35507eFAIL:   c35507kFAIL:   c35507lFAIL:   c35507mFAIL:   c35507nFAIL:   c35508cFAIL:   c35508eFAIL:   c35508gFAIL:   c35508hFAIL:   c35508kFAIL:   c35508lFAIL:   c35904aFAIL:   c35904bFAIL:   c36104aFAIL:   c36104bFAIL:   c36172aFAIL:   c36172bFAIL:   c36204cFAIL:   c36301aFAIL:   c36305aFAIL:   c37005aFAIL:   c37008aFAIL:   c37010aFAIL:   c371001FAIL:   c371002FAIL:   c371003FAIL:   c37108bFAIL:   c37207aFAIL:   c37208aFAIL:   c37208bFAIL:   c37209bFAIL:   c37211aFAIL:   c37211bFAIL:   c37211cFAIL:   c37211dFAIL:   c37211eFAIL:   c37213bFAIL:   c37213dFAIL:   c37213fFAIL:   c37213hFAIL:   c37213jFAIL:   c37213kFAIL:   c37213lFAIL:   c37215bFAIL:   c37215dFAIL:   c37215fFAIL:   c37215hFAIL:   c37217aFAIL:   c37217bFAIL:   c37217cFAIL:   c380001FAIL:   c380003FAIL:   c38002aFAIL:   c38002bFAIL:   c38107aFAIL:   c38107bFAIL:   c38202aFAIL:   c390002FAIL:   c390010FAIL:   c39006aFAIL:   c39006bFAIL:   c39006cFAIL:   c39006dFAIL:   c39006gFAIL:   c39007aFAIL:   c39007bFAIL:   c39008aFAIL:   c39008bFAIL:   c39008cFAIL:   c391001FAIL:   c393a06FAIL:   c3a0014FAIL:   c3a2002FAIL:   c3a2003FAIL:   c3a2a01FAIL:   c3a2a02Running chapter c4 ...FAIL:   c410001FAIL:   c41104aFAIL:   c41105aFAIL:   c41204aFAIL:   c41205aFAIL:   c41304aFAIL:   c41304bFAIL:   c41401aFAIL:   c420001FAIL:   c42006aFAIL:   c43004aFAIL:   c43004cFAIL:   c43104aFAIL:   c432002FAIL:   c432003FAIL:   c43206aFAIL:   c43207bFAIL:   c43211aFAIL:   c43212aFAIL:   c43212cFAIL:   c43214aFAIL:   c43215aFAIL:   c43215bFAIL:   c433001FAIL:   c45113aFAIL:   c45281aFAIL:   c45282bFAIL:   c45304aFAIL:   c45304bFAIL:   c45304cFAIL:   c45504aFAIL:   c45504bFAIL:   c45504cFAIL:   c45504dFAIL:   c45504eFAIL:   c45504fFAIL:   c45534bFAIL:   c45613aFAIL:   c45613bFAIL:   c45613cFAIL:   c45614aFAIL:   c45614bFAIL:   c45614cFAIL:   c45632aFAIL:   c45632bFAIL:   c45632cFAIL:   c45651aFAIL:   c460001FAIL:   c460002FAIL:   c460004FAIL:   c460005FAIL:   c460008FAIL:   c460009FAIL:   c460011FAIL:   c460012FAIL:   c46014aFAIL:   c46043bFAIL:   c46044bFAIL:   c46052aFAIL:   c46053aFAIL:   c46054aFAIL:   c460a01FAIL:   c460a02FAIL:   c47002cFAIL:   c47003aFAIL:   c47004aFAIL:   c47005aFAIL:   c47006aFAIL:   c47007aFAIL:   c47008aFAIL:   c47009aFAIL:   c48006bFAIL:   c48007aFAIL:   c48007bFAIL:   c48007cFAIL:   c48008aFAIL:   c48008cFAIL:   c48009aFAIL:   c48009bFAIL:   c48009cFAIL:   c48009dFAIL:   c48009eFAIL:   c48009fFAIL:   c48009gFAIL:   c48009hFAIL:   c48009iFAIL:   c48009jFAIL:   c4a005bFAIL:   c4a006aRunning chapter c5 ...FAIL:   c52005aFAIL:   c52005bFAIL:   c52005cFAIL:   c52005dFAIL:   c52005eFAIL:   c52005fFAIL:   c52008aFAIL:   c52008bFAIL:   c52009aFAIL:   c52009bFAIL:   c52011aFAIL:   c52011bFAIL:   c52101aFAIL:   c52103xFAIL:   c52104aFAIL:   c52104bFAIL:   c52104cFAIL:   c52104fFAIL:   c52104gFAIL:   c52104hFAIL:   c52104kFAIL:   c52104lFAIL:   c52104mFAIL:   c52104pFAIL:   c52104qFAIL:   c52104rFAIL:   c52104xFAIL:   c52104yFAIL:   c55b15aFAIL:   c58005aFAIL:   c58005bFAIL:   c58005hFAIL:   c58006aFAIL:   c58006bFAIL:   c59002aRunning chapter c6 ...FAIL:   c61008aFAIL:   c62003aFAIL:   c62003bFAIL:   c641001FAIL:   c64103bFAIL:   c64103cFAIL:   c64103dFAIL:   c64103eFAIL:   c64103fFAIL:   c64104aFAIL:   c64104bFAIL:   c64104cFAIL:   c64104dFAIL:   c64104eFAIL:   c64104fFAIL:   c64104gFAIL:   c64104hFAIL:   c64104iFAIL:   c64104jFAIL:   c64104kFAIL:   c64104lFAIL:   c64104mFAIL:   c64104nFAIL:   c64104oFAIL:   c64105bFAIL:   c64106aFAIL:   c64106bFAIL:   c64106cFAIL:   c64201bFAIL:   c650001FAIL:   c65003aFAIL:   c65003bRunning chapter c7 .../bin/sh: line 1: 26947 Killed                  ${testdir}/run_acatsLast successful build and run was updated Mon Aug 29 03:22:25 UTC 2005,RESOLVED          FIXED      
20226,Arnaud Charlet,[4.0/4.1 Regression] Error in __gnat_install_SEH_handler breaks bootstrap,"When bootstrapping GCC mainline 20050226, the build breaks here:../../gnatbind -C -I- -I../rts -I. -I/aaronwl/cs/compilers/gcc/src/cvs/head/gcc/gcc/ada -o b_gnatm.c gnatmake.alimake[3]: *** [b_gnatm.c] Error 5make[3]: Leaving directory `/aaronwl/cs/env/mingw-head/20050226/build/gcc/gcc/ada/tools'gdb shows:Program received signal SIGSEGV, Segmentation fault.__gnat_install_SEH_handler (ER=0x77c3aead)    at /aaronwl/cs/compilers/gcc/src/cvs/head/gcc/gcc/ada/seh_init.c:220220       ((int *)ER)[1] = (int)__gnat_SEH_error_handler;  /* new handler */(gdb) bt#0  __gnat_install_SEH_handler (ER=0x77c3aead)    at /aaronwl/cs/compilers/gcc/src/cvs/head/gcc/gcc/ada/seh_init.c:220#1  0x00401595 in main (argc=9, argv=0x3d4238, envp=0x3d2fc8)    at ada/b_gnatb.c:260(gdb) quitThis may be related to this recent patch: <http://gcc.gnu.org/ml/gcc-patches/2005-02/msg00428.html>.I can't tell superficially what the problem is, as ""set ((int *)ER)[1] = (int)__gnat_SEH_error_handler"" appears to work just fine.Target: i686-pc-mingw32Configured with: /aaronwl/cs/compilers/gcc/src/cvs/head/gcc/configure --enable-languages=ada,c,c++,f95,java,objc --with-dwarf2 --enable-libmudflap --enable-libgcj --enable-libstdcxx-allocator=mt --enable-libstdcxx-debug --enable-concept-checks --with-included-gettext --prefix=/aaronwl/cs/env/mingw-head/20050226 --with-libiconv-prefix=/aaronwl/cs/internat/iconv/install --with-gmp=/aaronwl/cs/math/gmp/gmp-4.1.4 --with-mpfr=/aaronwl/cs/math/mpfr/mpfr-2.1.0Thread model: win32gcc version 4.1.0 20050226 (experimental)i686-pc-mingw32Windows XP SP2 ProfessionalPentium 4 256MBCygwin Current Thu Feb 24 03:40:25 2005host gcc 3.4.1 (mingw special)host binutils 2.15.91 20040904 (mingw)host mingwrt 3.5host w32api 3.1msvcrt 7.0.2600.2180libiconv 1.9.1GNU Make 3.80expect 5.26tcl 8.4dejagnu 1.4.2.xln with softlinks disabled",RESOLVED          FIXED      
10110,Arnaud Charlet,[3.3/3.4 regression] [mipsel-linux]ada bootstrap error,"Ada on mipsel-linux doesn't build. Last checked with CVS 20030301.Complete build log athttp://buildd.debian.org/fetch.php?&pkg=gcc-snapshot&ver=20030301-1&arch=mipsel&stamp=1046572232&file=log&as=raw../../gnatlink -v gnatpsta -o ../../gnatpsta --GCC=""../../xgcc -B../../ -I../rts -I. -I/build/buildd/gcc-snapshot-20030301/src/gcc/ada""\                      ../targtyps.o deftarg.o ../../prefix.o ../../version.o ../rts/libgnat.a  ../../../libiberty/libiberty.a  GNATLINK 3.3 20030301 (prerelease) Copyright 1996-2002 Free Software Foundation, Inc.xgcc -c -gnatA -gnatWb -gnatiw -B../../ -I../rts -I. -I/build/buildd/gcc-snapshot-20030301/src/gcc/ada -gnatws b~gnatpsta.adb../../xgcc b~gnatpsta.o ../targtyps.o deftarg.o ../../prefix.o ../../version.o ../rts/ada.o ../rts/gnat.o ../rts/g-hesora.o ../rts/g-htable.o ../rts/interfac.o ../rts/system.o ../rts/s-parame.o ../rts/i-cstrea.o ../rts/s-powtab.o ../rts/s-exctab.o ../rts/a-ioexce.o ../rts/s-assert.o ../rts/s-except.o ../rts/s-stoele.o ../rts/s-mastop.o ../rts/s-imgint.o ../rts/a-tags.o ../rts/a-stream.o ../rts/s-soflin.o ../rts/s-stache.o ../rts/s-secsta.o ../rts/s-finroo.o ../rts/s-memory.o ../rts/s-stalib.o ../rts/s-strops.o ../rts/s-sopco3.o ../rts/s-sopco4.o ../rts/s-sopco5.o ../rts/s-traceb.o ../rts/a-except.o ../rts/s-unstyp.o ../rts/s-fatllf.o ../rts/s-imgllu.o ../rts/s-imguns.o ../rts/s-imgrea.o ../rts/s-stratt.o ../rts/s-finimp.o ../rts/a-finali.o ../rts/a-filico.o ../rts/s-ficobl.o ../rts/s-fileio.o ../rts/a-textio.o ./ttypef.o ./types.o ./get_targ.o ./ttypes.o ./gnatpsta.o -o ../../gnatpsta ../rts/libgnat.a ../../../libiberty/libiberty.a -L./ -L../rts/ -L/build/buildd/gcc-snapshot- 20030301/src/gcc/ada/ -L/usr/lib/gcc-snapshot/lib/gcc-lib/mipsel-linux/3.3/adalib/ ../rts/libgnat.a -B../../ -I../rts -I. -I/build/buildd/gcc-snapshot-20030301/src/gcc/ada../targtyps.o(.text+0x134): In function `get_target_long_double_size':: undefined reference to `mips_abi'../targtyps.o(.text+0x1a0): In function `get_target_maximum_alignment':: undefined reference to `mips_abi'collect2: ld returned 1 exit statusgnatlink: cannot call ../../xgccmake[4]: *** [../../gnatpsta] Error 4Release:3.3 branch CVS 20030301Environment:mipsel-linux, Debian unstable",RESOLVED          FIXED      
9536,Arnaud Charlet,[3.3/3.4 regression] Constraint error on valid Ada.Calendar.Time_Of,"The program below gives a constraint error when run:smaug.pushface.org[8]$ ./time_constraint raised CONSTRAINT_ERROR : a-calend.adb:419 explicit raisewith Ada.Calendar;procedure Time_Constraint is   Epoch : constant Ada.Calendar.Time :=     Ada.Calendar.Time_Of (Year => 1970,                           Month => 1,                           Day => 1);begin   null;end Time_Constraint;Release:3.4 20030201 (experimental)Environment:i686-pc-linux-gnuHow-To-Repeat:Compile & run the program.",RESOLVED          FIXED      
9137,Arnaud Charlet,[3.3/3.4 regression] renaming of array object fails,Renaming of an array object fails. Found in ACATS c850004b.Release:3.3 prerelease 20020102 mingwEnvironment:mingwHow-To-Repeat:run 'make.bat' in archive,RESOLVED          FIXED      
13572,Arnaud Charlet,Inappropriate files installed in $(prefix)/share/make/,"GCC 3.4 installs inappropriate files Makefile.generic and Makefile.prologin $(prefix)/share/make/.(a) They need licence notices, not just copyright notices, as otherwisethey must be presumed undistributable and shouldn't be in GCC at all.(b) They get installed in $(prefix)/share/make.  There are two problemswith this.  First, the names of the files and the directory are rathertoo generic for that; $(prefix)/share/gnat or $(prefix)/share/ada might bebetter to make clear where they come from.  Second, --datadir is a supported configure option, so $(datadir) should be used instead of $(prefix)/share.  (File with such generic names should only go in$(datadir)/make if they really were generic files from GNU makerather than some other package; otherwise any number of packages mightequally well try to claim those names.)",RESOLVED          FIXED      
13035,Arnaud Charlet,Ada testsuite uses installed gcc,"The ada testsuite uses (perhaps only sometimes) an installed gcc component, rather than the newly build one.Running the testsuite with gcc-3.3.1 in the path I get$ make check-adatest -d testsuite/ada/acats || mkdir -p testsuite/ada/acatstestdir=`cd /usr/local/src/gcc/gcc/testsuite/ada/acats; ${PWDCMD-pwd}`; \export testdir; cd testsuite/ada/acats; ${testdir}/run_acats                === acats configuration ===gcc is /usr/local/obj/gcc/gcc/testsuite/ada/acats/gccReading specs from /usr/local/obj/gcc/gcc/specs Configured with: /usr/local/src/gcc/configure --prefix=/usr/local/gcc-3_4 --enable-threads=posix --disable-libgcj --enable-sjlj-exceptions --with-system-zlib --enable-nls --disable-libstdcxx-pch --enable-version-specific-runtime-libs --without-included-gettext --disable-shared Thread model: posix gcc version 3.4 20031112 (experimental)host=i686-pc-cygwintarget=i686-pc-cygwingnatmake is /usr/local/obj/gcc/gcc/gnatmake                === acats support ===Generating support files... done.Compiling support files...gnatmake: ""check_file.ali"" incompatible ALI file, please recompilegnatmake: ""check_file.adb"" compilation error done.                === acats tests ===Running chapter a ...FAIL:   a22006bFAIL:   a22006cFAIL:   a22006dFAIL:   a26007aIf I install the newly built gcc-3.4 and put it in the path then the testsuite runs.  It doesn't finish.  After completing a substantial number of tests the machine hangs.",RESOLVED          FIXED      
12950,Arnaud Charlet,Ada runtime is not relocatable,"Unlike all other backends, the Ada runtime is not relocatable.  E.g., theAda version below was built with the default prefix (i.e. /usr/local), butinstalled with DESTDIR=/vol/gcc/obj/gnat/3.4/6.5-local.  Invoking theresulting gcc directly fails since the runtime isn't found.Environment:System: IRIX lyra 6.5 07141607 IP22	host: mips-sgi-irix6.5build: mips-sgi-irix6.5target: mips-sgi-irix6.5configured with: /vol/gnu/src/gcc/gcc-ada/gcc/configure --disable-nls --disable-multilibHow-To-Repeat:$ cat > conftest.adbprocedure conftest is begin null; end conftest;$  /vol/gcc/obj/gnat/3.4/6.5-local/usr/local/bin/gcc -v -c conftest.adb Reading specs from /amnt/figaro/volumes/obj-gcc/gcc/obj.irix5/gnat/3.4/6.5-local/usr/local/bin/../lib/gcc/mips-sgi-irix6.5/3.4/specsConfigured with: /vol/gnu/src/gcc/gcc-ada/gcc/configure --disable-nls --disable-multilibThread model: singlegcc version 3.4 20031105 (experimental) /amnt/figaro/volumes/obj-gcc/gcc/obj.irix5/gnat/3.4/6.5-local/usr/local/bin/../libexec/gcc/mips-sgi-irix6.5/3.4/gnat1 -quiet -dumpbase conftest.adb conftest.adb -o /var/tmp//ccjYv3hb.sfatal error, run-time library not installed correctlycannot locate file system.adscompilation abandoned",RESOLVED          FIXED      
10019,Arnaud Charlet,Can't bootstrap gcc on AIX with Ada enabled,"When bootstrapping gcc with ada-language enabled, there's a conflit in the declaration of the function nanosleep in ada/init.cIt seems that AIX 5L provides some ""linux"" functions like nanosleep...Release:gcc version 3.2.2Environment:OS : IBM AIX 5.1.0ARCH : RS6000How-To-Repeat:$ cd (builddir)$ ./configure --enable-languages=all$ cd (srcdir)/gcc/ada$ touch treeprs.ads [es]info.h nmake.ad[bs]$ cd (buildir)$ make bootstrapresult :gcc -c -DIN_GCC   `echo -g  -W -Wall -Wwrite-strings -Wstrict-prototypes -Wmissing-prototypes -Wtraditional -pedantic -Wno-long-long |sed -e 's/-pedantic//g' -e 's/-Wtraditional//g'`    \            -I- -I. -I.. -I../../../gcc-3.2.2/gcc/ada -I../../../gcc-3.2.2/gcc/ada/.. -I../../../gcc-3.2.2/gcc/ada/../config -I../../../gcc-3.2.2/gcc/ada/../../include -fexceptions ../../../gcc-3.2.2/gcc/ada/init.c../../../gcc-3.2.2/gcc/ada/init.c:205:1: warning: ""SA_NODEFER"" redefinedIn file included from /usr/lib/gcc-lib/powerpc-ibm-aix5.1.0.0/3.2.1/include/sys/wait.h:48,                 from /usr/lib/gcc-lib/powerpc-ibm-aix5.1.0.0/3.2.1/include/stdlib.h:231,                 from ../../../gcc-3.2.2/gcc/system.h:134,                 from ../../../gcc-3.2.2/gcc/ada/init.c:56:/usr/lib/gcc-lib/powerpc-ibm-aix5.1.0.0/3.2.1/include/sys/signal.h:389:1: warning: this is the location of the previous definition../../../gcc-3.2.2/gcc/ada/init.c:211: conflicting types for `nanosleep'/usr/include/time.h:210: previous declaration of `nanosleep'../../../gcc-3.2.2/gcc/ada/init.c: In function `nanosleep':../../../gcc-3.2.2/gcc/ada/init.c:218: warning: implicit declaration of function `nsleep'",RESOLVED          FIXED      
69245,Matthias Klose,"[6 Regression] ICE in extract_insn, at recog.c:2286 on arm-linux-gnueabihf","trunk r232188, arm-linux-gnueabihfreduced test case:struct {# 4 """" 3};#pragma GCC push_options#pragma GCC target ""fpu=crypto-neon-fp-armv8""a, c, d;float b;static fn1() {}#pragma GCC pop_optionsfn2() { d = b * c + a; }$ gcc -c -g -O2 -mfpu=neon -mfloat-abi=hard -march=armv7-a -mthumb volk_machine_neon_hardfp_orc.i: In function 'fn2'::12:1: error: unrecognizable insn:(insn 14 13 15 2 (set (reg:SF 126)        (fma:SF (reg:SF 120)            (reg:SF 127)            (reg:SF 123))) :12 -1     (nil)):12:1: internal compiler error: in extract_insn, at recog.c:22860x3e72b9 _fatal_insn(char const*, rtx_def const*, char const*, int, char const*)        ../../src/gcc/rtl-error.c:1080x3e72e5 _fatal_insn_not_found(rtx_def const*, char const*, int, char const*)        ../../src/gcc/rtl-error.c:1160x3c71e3 extract_insn(rtx_insn*)        ../../src/gcc/recog.c:22860x2b8233 instantiate_virtual_regs_in_insn        ../../src/gcc/function.c:15820x2b8233 instantiate_virtual_regs        ../../src/gcc/function.c:19500x2b8233 execute        ../../src/gcc/function.c:1999Please submit a full bug report,with preprocessed source if appropriate.Please include the complete backtrace with any bug report.",RESOLVED          FIXED      
68896,Christophe Lyon,[ARM] target attribute ignored,"Hi,With a modified version of attr-neon3.c, it seems that the 1st target attribute is ignored.===============================/* { dg-do compile } *//* { dg-require-effective-target arm_crypto_ok } *//* { dg-require-effective-target arm_fp_ok } *//* { dg-options ""-O2"" } *//* { dg-add-options arm_fp } *//* Reset fpu to a value compatible with the next pragmas.  */#pragma GCC target (""fpu=vfp"")#pragma GCC push_options#include <arm_neon.h>/* Check that neon is used.  */int8x8_t __attribute__ ((target(""fpu=neon"")))my (int8x8_t __a, int8x8_t __b){  return __a + __b;}/* Check that crypto builtins are recognized.  */poly128_t __attribute__ ((target(""fpu=crypto-neon-fp-armv8"")))foo (poly128_t* ptr){  return vldrq_p128 (ptr);}/* Check that default mode is restored.  */int8x8_tmy1 (int8x8_t __a, int8x8_t __b){  return __a + __b;}/* { dg-final { scan-assembler-times ""\.fpu vfp"" 1 } } *//* { dg-final { scan-assembler-times ""\.fpu neon"" 1 } } *//* { dg-final { scan-assembler-times ""\.fpu crypto-neon-fp-armv8"" 1 } } *//* { dg-final { scan-assembler-times ""vld1"" 1 } } *//* { dg-final { scan-assembler-times ""vadd"" 1} } */======================================Compiling with /home/christophe.lyon/src/GCC/builds/gcc-fsf-arm-attribs/obj-arm-none-linux-gnueabihf/gcc3/gcc/xgcc -B/home/christophe.lyon/src/GCC/builds/gcc-fsf-arm-attribs/obj-arm-none-linux-gnueabihf/gcc3/gcc/ /home/christophe.lyon/src/GCC/sources/gcc-fsf/arm-attribs/gcc/testsuite/gcc.target/arm/attr-neon3.c -fno-diagnostics-show-caret -fdiagnostics-color=never -O2 -ffat-lto-objects -DSTACK_SIZE=16384 -S -o attr-neon3.sGCC configured: --target=arm-none-linux-gnueabihf --with-float=hard --with-mode=arm --with-cpu=cortex-a9 --with-fpu=neonNotice how the first function (my) is compiled with '.fpu vfp'",RESOLVED          FIXED      
68674,Richard Earnshaw,"ARM/AARCH64 attribute target neon internal compiler error: in copy_to_mode_reg, at explow.c:595","this test compiled withcc1   -O2 test.c  -mcpu=cortex-a9 -mfloat-abi=hard -quiet -mfpu=neon#include ""arm_neon.h""int8x8_t a, b;int16x8_t e;void__attribute__ ((target(""fpu=neon"")))foo(void){  e = (int16x8_t)__builtin_neon_vaddlsv8qi (a, b);}ICEs with test.c:10:18: warning: incompatible implicit declaration of built-in function '__builtin_neon_vaddlsv8qi'   e = (int16x8_t)__builtin_neon_vaddlsv8qi (a, b);                  ^~~~~~~~~~~~~~~~~~~~~~~~~test.c:10:7: internal compiler error: in copy_to_mode_reg, at explow.c:595   e = (int16x8_t)__builtin_neon_vaddlsv8qi (a, b);       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~",RESOLVED          FIXED      
67745,Ramana Radhakrishnan,"[ARM] wrong alignments when __attribute__ ((optimize,target,align) is used","alignment directives emitted by the compiler are inconsistent for ARM when attributes target are used.for instance this code compiled with -Os -mthumb, void  __attribute__ ((target (""arm"")))c(void){}emits	.text	.align	1	.global	c	.syntax divided	.arm	.type	c, %functionit should have the function 'c' aligned on 2^2 bytes, not 2^1",RESOLVED          FIXED      
52144,Rafaël Carré,ARM should support arm/thumb function attribute to permit different instruction sets in the same source,Reference: First message of http://gcc.gnu.org/bugzilla/show_bug.cgi?id=40419Mixing thumb and ARM in the same source is currently not possible.That would permit LTO to work when mixing those and close http://gcc.gnu.org/bugzilla/show_bug.cgi?id=45729,RESOLVED          FIXED      
66015,Ramana Radhakrishnan,"align directives not propagated after __attribute__ ((__optimize__ (""O2"")))","When attribute optimize is used, the alignment flags are not reevaluated.Consequently, the functions are not aligned as if they were with the same global flagfor example:__attribute__ ((__optimize__ (""O2"")))voidhooray (){}is not aligned The second consequence is that can_inline_edge_p fails because opts_for_fn (caller->decl) != opts_for_fn (callee->decl)) even-though they are compiled with the same optimization level.",RESOLVED          FIXED      
39423,Oleg Endo,"[4.8/4.9/5 Regression] [SH]  performance regression: lost mov @(disp,Rn)", ,RESOLVED          FIXED      
49139,Jakub Jelinek,always_inline attribute inconsistencies on failure,"Created attachment 24340 [details]fails even without -WinlineHello,I'm wondering whether or not the always_inline in PIC must prevails over the general preemption rules. Apparently not accordingly to the default behavior for the compilation in -O2 -fpic of__attribute((always_inline)) void bar() { }void test(void){  bar();}foo.c:1:35: sorry, unimplemented: inlining failed in call to 'bar': function body can be overwriten at linktimefoo.c:5:6: sorry, unimplemented: called from hereFirst (1): inlining cannot be done, So without -Werror, this should be a warning, not a ""sorry error"". Or (2): The function could be inlined, despite the preemption rule. But it is just not yet implemented. In this case.In case of (1), I'm attaching here a C++ reduced piece of code that triggers this error even without using -Winline, making the error quite unpredictable, since this depends of the presence of another inlined call (here, ""Alloc""), forcing a call to ""expand_call_inline"" producing the same effect than -Winline (as shown with a breakpoint in ipa-inline-transform:306 on trunk)So which one of the strategies is good: Fixing the warning, and make sure that it only (and consistently) occurs when -Winline is used, or always honoring the always_inline attribute despite visibility potential issues, considering that a user directive bypass the defaults ?Thanks, Christian",RESOLVED          FIXED      
19531,Christian Bruel,NRV is performed on volatile temporary,"RVO is performed on a temporary object that is declared volatile.That seems contradictory with the ISO standards 12.8 15 (object and copy musthave the same cv-unqualified type).With the following piece of code, I was excepting the copy constructor anddestructor to be called.struct String{  int field;  String();  String(int);  ~String();  String (const String &);  String (volatile const String &);};String name(){  volatile String t(777);  return t;}checking !TREE_VOLATILE (r) in finish_function where the named return valueoptimization is set up fixes the problem.",RESOLVED          FIXED      
29953,Nickolay Kolchin-Semyonov,[SH-4] Perfomance regression in loops. cmp/eq used instead of dt,"GCC 4.1.1 (probably all 4.* versions, tested 4.3.0-svn also), uses cmp/eq instead of ""dt"" in loops. This leads to ~20% perfomance decrease.Technically, loop processing algorithm is completely different between versions.Example (sources in attach):CFLAGS=""-m4 -O3 -fomit-frame-pointer""gcc 3.4.4:----------------------------.LFB2:        mov.l   .L11,r3        mov     #0,r0        mov.l   .L12,r2.L5:        mov.l   @r3+,r1 ! !!!        dt      r2      ! !!!        bf/s    .L5        add     r1,r0        rts        nop.L13:        .align 2.L11:        .long   -1946157056.L12:        .long   1000000-----------------------------gcc 4.1.1:-----------------------------.LFB2:        mov.l   .L8,r2        mov     #0,r0        mov.l   .L9,r3.L2:        mov.l   @r2+,r1 ! !!!        cmp/eq  r3,r2   ! !!!        bf/s    .L2        add     r1,r0        rts        nop.L10:        .align 2.L8:        .long   -1946157056.L9:        .long   -1942157056-----------------------------P.S. We are porting application from gcc3.4 to gcc4.1 and have about 60% perfomance decrease. So this is probably just first report. :(",RESOLVED          FIXED      
17551,Stephane Carrez,m68hc11: ICE: unrecognizable insn,"Hello,compiling int calc (void)  {    int  mask_size;    int i,j,x;  for(i=-mask_size; i<=mask_size; i++)    for(j=-mask_size; j<=mask_size; j++)    {      x = (i*i)+(j*j);    }  return x; }with m68hc11-gcc -c -Os test.cI get:test.c: In function `calc':test.c:13: error: unrecognizable insn:(insn:HI 138 10 108 0 (nil) (set (reg:SI 61)        (reg/v:SI 55)) -1 (insn_list 10 (nil))    (nil))test.c:13: internal compiler error: in extract_insn, at recog.c:2175Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.Miguel",RESOLVED          FIXED      
15334,Stephane Carrez,[4.0 Regression] ICE building libgcc/./_mulvsi3.o for m68hc11-unknown-elf,"Create a combined tree, as per <URL:http://gcc.gnu.org/simtest-howto.html>of date ""Mon May  3 23:42:42 UTC 2004"".  Configure with the option--target=m68hc11-unknown-elf (simtest-howto also lists other options I stronglybelieve are redundant).  Build with ""make all"".  Observe the build failing:.../home/hp/cvs_areas/combined/m68hc11-obj/gcc/xgcc-B/home/hp/cvs_areas/combined/m68hc11-obj/gcc/ -nostdinc-B/home/hp/cvs_areas/co\mbined/m68hc11-obj/m68hc11-unknown-elf/newlib/ -isystem/home/hp/cvs_areas/combined/m68hc11-obj/m68hc11-unknown-elf/newlib/targ-i\nclude -isystem /home/hp/cvs_areas/combined/combined/newlib/libc/include-B/tmp/m68hc11/m68hc11-unknown-elf/bin/ -B/tmp/m68hc11/m\68hc11-unknown-elf/lib/ -isystem /tmp/m68hc11/m68hc11-unknown-elf/include-isystem /tmp/m68hc11/m68hc11-unknown-elf/sys-include -\L/home/hp/cvs_areas/combined/m68hc11-obj/ld -Os -mrelax  -DUSE_GAS -DIN_GCC -g -DIN_LIBGCC2 -I. -I -I/home/hp/cvs_areas/combined\/combined/gcc -I/home/hp/cvs_areas/combined/combined/gcc/-I/home/hp/cvs_areas/combined/combined/gcc/../include  -DL_mulvsi3 -c /\home/hp/cvs_areas/combined/combined/gcc/libgcc2.c -o libgcc/./_mulvsi3.o/home/hp/cvs_areas/combined/combined/gcc/libgcc2.c: In function `__mulvsi3':/home/hp/cvs_areas/combined/combined/gcc/libgcc2.c:139: error: unrecognizableinsn:(insn:HI 152 151 47 3 /home/hp/cvs_areas/combined/combined/gcc/libgcc2.c:133(parallel [            (set (reg:SI 71)                (lshiftrt:SI (reg:SI 63)                    (const_int 31 [0x1f])))            (clobber (scratch:HI))        ]) -1 (insn_list 151 (nil))    (expr_list:REG_DEAD (reg:SI 63)        (expr_list:REG_UNUSED (scratch:HI)            (expr_list:REG_EQUAL (lshiftrt:SI (reg:SI 68)                    (const_int 31 [0x1f]))                (nil)))))/home/hp/cvs_areas/combined/combined/gcc/libgcc2.c:139: internal compiler error:in extract_insn, at recog.c:2074",RESOLVED          FIXED      
13990,Stephane Carrez,[4.0 Regression] build fails because of wrong use of gen_rtx_NE,"http://gcc.gnu.org/ml/gcc-patches/2003-04/msg00908.htmlintroduced gen_rtx (NE, HImode)which I replaced with gen_rtx_NE (HImode) withhttp://gcc.gnu.org/ml/gcc-patches/2004-02/msg00032.html",RESOLVED          FIXED      
19724,Stephane Carrez,ICE when building a m68hc11 cross-compiler on ia64,"I am unable to build a m68hc11 cross-compiler on 64-bit architectures. xgccgenerates an internal compiler error during the build of libgcc2.Here is a reduced testcase:typedef struct{  char a;  int b;} foo;void ice(){  int c;  foo * bar;  // one of the two following instructions causes ICE  bar->b = (c << 7L);  bar->b = (c | 1);}and the output error:fp-bit.c: In function `ice':fp-bit.c:15: error: insn does not satisfy its constraints:(insn 13 12 14 0 0x20000000002dc720 (parallel [            (set (mem/s/j:SI (plus:HI (mem:HI (plus:HI (reg/f:HI 9 *_.frame)                                (const_int 7 [0x7])) [0 S2 A8])                        (const_int 1 [0x1])) [0 <variable>.b+0 S4 A8])                (reg:SI 0 x [54]))            (clobber (scratch:HI))        ]) 20 {movsi_internal} (nil)    (nil))fp-bit.c:15: internal compiler error: in final_scan_insn, at final.c:2722Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.Please note that if the a and b declarations are swapped, the source is builtwithout problem. I also tested this code on other 64-bit architectures (amd64and alpha) and the problem is not present.",RESOLVED          FIXED      
21281,Stephane Carrez,[4.1 Regression] ICE with building newlib,"The attached testcase, when compiled with ' -O2 -m68hc11' ICEs with anunrecognizable insnnathan@garibaldi:223>./cc1 -O2 -m68hc11 bug.i -quietbug.i: In function 'get_number':bug.i:8: error: unrecognizable insn:(insn 31 7 12 0 (set:HI (reg:HI 1 d [orig:56+2 ] [56])        (xor:HI (reg:HI 1 d [orig:56+2 ] [56])            (const_int -32768 [0xffff8000]))) -1 (nil)    (nil))bug.i:8: internal compiler error: in extract_insn, at recog.c:2082Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.",RESOLVED          FIXED      
19051,Stephane Carrez,m6811-elf-gcc ICE,"gcc ICE when I did:===================$ m6811-elf-g++ -Os -mshort -msoft-reg-count=32 -m68hc12 -c n.cppThe ICE message is:===================n.cpp: In function 'void getNewTableEntry()':n.cpp:49: error: unable to find a register to spill in class 'D_REGS'n.cpp:49: error: this is the insn:(insn:HI 60 59 62 9 (set (reg:HI 59 [ D.1552 ])        (mult:HI (sign_extend:HI (reg:QI 63))            (sign_extend:HI (reg/v:QI 14 *_.d1 [orig:55 newIdx ] [55])))) 70 {mulqihi3} (insn_list:REG_DEP_TRUE 59 (nil))    (expr_list:REG_DEAD (reg/v:QI 14 *_.d1 [orig:55 newIdx ] [55])        (expr_list:REG_DEAD (reg:QI 63)            (expr_list:REG_EQUAL (mult:HI (sign_extend:HI (reg/v:QI 14 *_.d1 [orig:55 newIdx ] [55]))                    (const_int 6 [0x6]))                (nil)))))n.cpp:49: internal compiler error: in spill_failure, at reload1.c:1873Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.The m6811-elf-g++ 3.4.4 also generates same ICE.$ ./m6811-elf-g++ --versionm6811-elf-g++ (GCC) 3.4.4 20041108 (prerelease)Environment:System: Linux namsh 2.6.10-rc3n2 #6 Tue Dec 14 15:50:33 KST 2004 i686 athlon i386 GNU/LinuxArchitecture: i686	host: i686-pc-linux-gnubuild: i686-pc-linux-gnutarget: m6811-unknown-noneconfigured with: ../configure --target=m6811-elf --prefix=/usr/GNUHCS --program-prefix=m6811-elf- --with-gnu-ld --with-gnu-as --disable-shared --enable-languages=c,c++ --without-headers --with-newlib --disable-nls --disable-threadsHow-To-Repeat:Compile the code below with compiler option I described:// n.cppextern signed char g_oldVal, g_newVal;extern signed char g_base;extern unsigned char tableA[], tableB[];extern unsigned char g_AAval, g_APval;extern unsigned char g_BAval, g_BPval;extern unsigned int g_ARval, g_ABval;extern unsigned int g_BRval, g_BBval;typedef struct {    unsigned int r;    unsigned int b;    unsigned char a;    unsigned char p;} TABLEENTRY;void getNewTableEntry(){    signed char oldIdx = g_oldVal, newIdx = g_newVal;    const signed char maxVal = ((44 * 2) + 6 * 2);    oldIdx += g_base;    newIdx += g_base;    if (oldIdx < 0)	oldIdx = 0;    else if (oldIdx > maxVal)	oldIdx = maxVal;    if (newIdx < 0)	newIdx = 0;    else if (newIdx > maxVal)	newIdx = maxVal;    if (oldIdx != newIdx)    {	TABLEENTRY *tablePtr;	tablePtr = (TABLEENTRY *) tableA + newIdx;	g_ARval = tablePtr->r;	g_ABval = tablePtr->b;	g_AAval = tablePtr->a;	g_APval = tablePtr->p;	tablePtr = (TABLEENTRY *) tableB + newIdx;	g_BRval = tablePtr->r;	g_BBval = tablePtr->b;	g_BAval = tablePtr->a;	g_BPval = tablePtr->p;    }}",RESOLVED          FIXED      
16925,Stephane Carrez,ICE when building a m68hc11 cross-compiler on 64-bit architectures,"I am unable to build a m68hc11 cross-compiler on 64-bit architectures. xgccgenerates an internal compiler error during the build of libgcc2:make[1]: Entering directory `/home/aurel32/gcc/gcc-3.4.1/gcc'for d in libgcc m68hc12 libgcc/m68hc12 mshort libgcc/mshort fshort-doublelibgcc/fshort-double mshort/fshort-double libgcc/mshort/fshort-doublem68hc12/mshort libgcc/m68hc12/mshort m68hc12/fshort-doublelibgcc/m68hc12/fshort-double m68hc12/mshort/fshort-doublelibgcc/m68hc12/mshort/fshort-double; do \  if [ -d $d ]; then true; else /bin/sh ./mkinstalldirs $d; fi; \doneif [ -f stmp-dirs ]; then true; else touch stmp-dirs; fi./xgcc -B./ -B/home/aurel32/m68hc11/bin/ -isystem /home/aurel32/m68hc11/include-isystem /home/aurel32/m68hc11/sys-include-L/home/aurel32/gcc/gcc-3.4.1/gcc/../ld -Os -mrelax  -DUSE_GAS -DIN_GCC -g -DIN_LIBGCC2 -Dinhibit_libc -I. -I. -I. -I./. -I./../include -DFINE_GRAINED_LIBRARIES -DL_pack_df -c dp-bit.c -o libgcc/./_pack_df.odp-bit.c: In function `__pack_d':dp-bit.c:434: error: could not split insn(insn:HI 61 613 63 2 dp-bit.c:219 (parallel [            (set (mem:DI (plus:HI (reg:HI 2 y)                        (const_int 19 [0x13])) [11 fraction+0 S8 A8])                (ior:DI (mem:DI (plus:HI (reg:HI 2 y)                            (const_int 19 [0x13])) [11 fraction+0 S8 A8])                    (const_int 2251799813685248 [0x8000000000000])))            (clobber (reg:HI 1 d))        ]) 81 {iordi3} (nil)    (expr_list:REG_DEAD (reg:HI 2 y)        (expr_list:REG_UNUSED (reg:HI 1 d)            (expr_list:REG_UNUSED (reg:HI 1 d)                (nil)))))dp-bit.c:434: internal compiler error: in final_scan_insn, at final.c:2429Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.make[1]: *** [libgcc/./_pack_df.o] Error 1make[1]: Leaving directory `/home/aurel32/gcc/gcc-3.4.1/gcc'The problem is _not_ present in gcc 3.2.3, but present in gcc 3.3.1, gcc 3.3.2,gcc 3.4.0 and gcc 3.4.1The problem seems to be present only on 64-bit architectures (alpha, amd64 andia64), and in all cases, the problem occurs on the same file, same line, withthe same error message.configure line used:./configure --prefix=/home/aurel32 --with-gnu-as --with-gnu-ld --enable-nls--without-included-gettext --disable-checking --enable-languages=c,c++--target=m68hc11 --without-headers",RESOLVED          FIXED      
15384,Stephane Carrez,Lines witout effect in t-m68hc11-gas file,"File gcc/config/m68hc11/t-m68hc11-gas (all revisions in the CVS tree areaffected) contains following lines:dp-bit.c: $(srcdir)/config/fp-bit.c        echo '#define SMALL_MACHINE' >> dp-bit.c        echo '#define CMPtype HItype' >> dp-bit.c        echo '#ifdef __LITTLE_ENDIAN__' > dp-bit.c        echo '#define FLOAT_BIT_ORDER_MISMATCH' >>dp-bit.c        echo '#endif'                 >> dp-bit.c        cat $(srcdir)/config/fp-bit.c >> dp-bit.cThe first and second 'echo' lines have no effect (please note '>' in the thirdline). Please note, that I've no experience with m68hc11 target. I've found the bugwhile reading the gcc sources.Thanks.",RESOLVED          FIXED      
14457,Stephane Carrez,[3.4/3.5? Regression] ICE with simple c++ source,"3.4.0 20040303 generates ICE. But	3.4.0 20040227 work fine.Environment:System: Linux namsh 2.6.4-rc2 #63 Thu Mar 4 21:18:27 KST 2004 i686 athlon i386 GNU/LinuxArchitecture: i686	host: i686-pc-linux-gnubuild: i686-pc-linux-gnutarget: m6811-unknown-noneconfigured with: ../configure --disable-nls --target=m6811-elf --prefix=/usr/GNUHCS --program-prefix=m6811-elf- --with-gnu-ld --with-gnu-as --disable-shared --enable-languages=c,c++ --without-headers --with-newlibHow-To-Repeat:Just do 'm6811-elf-g++ -o tmp.o -c t.cpp -m68hc12'.The t.ii is:    # 1 ""t.cpp""    # 1 ""<built-in>""    # 1 ""<command line>""    # 1 ""t.cpp""    class CKMCLink {    public:	void LinkDelete(CKMCLink**);    private:	CKMCLink *m_prev;    };    void    CKMCLink::LinkDelete(CKMCLink **head)    {     if (m_prev == this)     {	 *head = 0;     }    }",RESOLVED          FIXED      
14678,Stephane Carrez,m68hc11-elf-gcc ICE,"gcc ICE if I do:    ================	$ m6811-elf-gcc -c -O3 -fomit-frame-pointer -m68hc12 -mshort a.cpp	$ m6811-elf-gcc -c -O2 -fomit-frame-pointer -m68hc12 -mshort a.cpp    Here is a ICE msg:    ==================	a.cpp: In function `int test(int, char**)':	a.cpp:59: error: insn does not satisfy its constraints:	(insn:HI 318 546 324 17 (set (mem/s:QI (symbol_ref:HI (""*_ZZ4testiPPcE5wrbuf"") <var_decl 0x400bbbd0 wrbuf>) [0 wrbuf+0 S1 A8])		(mem:QI (plus:HI (reg/f:HI 3 sp)			(const_int 16 [0x10])) [21 S1 A8])) 30 {*movqi_68hc12} (insn_list 317 (nil))	    (nil))	a.cpp:59: internal compiler error: in reload_cse_simplify_operands, at postreload.c:378	Please submit a full bug report,	with preprocessed source if appropriate.	See <URL:http://gcc.gnu.org/bugs.html> for instructions.    Here is a 'a.cpp':    ==================	typedef unsigned int size_t;	extern ""C"" void *memcpy(void *__dest, const void *__src, size_t __n);	extern ""C"" int strcmp(const char *__s, const char *__t);	extern ""C"" int printf(const char *__format, ...);	extern void writebuf(const unsigned char *, unsigned short);	volatile unsigned char busy;	inline static unsigned char isBusy() { return busy; }	int	test(int argc, char *argv[])	{	    static unsigned char buf[8], wrbuf[3];	    static unsigned short addr;	    if (argc > 1 && !strcmp(argv[1], ""wr""))	    {		addr = 0x0000;		memcpy(buf, (unsigned char*)0x3000, sizeof(buf));		for (unsigned char i = 0; i < sizeof(buf); ++i)		{		    wrbuf[0] = (unsigned char) (addr >> 8);		    wrbuf[1] = (unsigned char) addr;		    wrbuf[2] = buf[i];		    while (isBusy());		    writebuf(wrbuf, 3);		    ++addr;		}	    }	    else if (argc > 1 && !strcmp(argv[1], ""wr1""))	    {		memcpy(buf, (unsigned char*)(0x3000 + sizeof(buf)), sizeof(buf));		addr = 0x0008;		for (unsigned char i = 0; i < sizeof(buf); ++i)		{		    wrbuf[0] = (unsigned char) (addr >> 8);		    wrbuf[1] = (unsigned char) addr;		    wrbuf[2] = buf[i];		    while (isBusy());		    writebuf(wrbuf, 3);		    ++addr;		}	    }	    else if (argc > 1 && !strcmp(argv[1], ""wr2""))	    {		printf(""wr: %x\n"", *(unsigned short*)(&buf[0]));		for (unsigned char i = 0; i < 2; ++i)		{		    wrbuf[0] = (unsigned char) (addr >> 8);		    wrbuf[1] = (unsigned char) addr;		    wrbuf[2] = buf[i];		    while (isBusy());		    writebuf(wrbuf, 3);		    ++addr;		}	    }	    return 0;	}Environment:System: Linux namsh 2.6.5-rc2 #68 Mon Mar 22 10:33:09 KST 2004 i686 athlon i386 GNU/LinuxArchitecture: i686	host: i686-pc-linux-gnubuild: i686-pc-linux-gnutarget: m6811-unknown-noneconfigured with: ../configure --disable-nls --target=m6811-elf --prefix=/usr/GNUHCS --program-prefix=m6811-elf- --with-gnu-ld --with-gnu-as --disable-shared --enable-languages=c,c++ --without-headers --with-newlibHow-To-Repeat:	Compile the 'a.cpp' with a given compile option.",RESOLVED          FIXED      
14542,Stephane Carrez,ICE on simple source,"Here is is ICE message:$ m6811-elf-gcc -c -m68hc12 -O3 -fomit-frame-pointer  strcat.cstrcat.c: In function `strcat':strcat.c:18: internal compiler error: in verify_local_live_at_start, at flow.c:546Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.Environment:System: Linux namsh 2.6.4 #66 Thu Mar 11 22:55:35 KST 2004 i686 athlon i386 GNU/LinuxArchitecture: i686	host: i686-pc-linux-gnubuild: i686-pc-linux-gnutarget: m6811-unknown-noneconfigured with: ../configure --disable-nls --target=m6811-elf --prefix=/usr/GNUHCS --program-prefix=m6811-elf- --with-gnu-ld --with-gnu-as --disable-shared --enable-languages=c,c++ --without-headers --with-newlibHow-To-Repeat:Here is a source:/* strcat.c */char *strcat(char *d, const char *s){    char *p = d;    while (*d) d++;    while ((*d = *s) != '\0') { d++; s++; }    return p;}",RESOLVED          FIXED      
3298,Stephane Carrez,[m6811] fail to build cross compiler. internal error at emit-rtl.c:1109,"./xgcc -B./ -B/home/davh/m68hc11-bin/m6811-elf/bin/ -isystem /home/davh/m68hc11-bin/m6811-elf/include -DCROSS_COMPILE -DIN_GCC    -W -Wall -Wwrite-strings -Wstrict-prototypes -Wmissing-prototypes -isystem ./include    -DUSE_GAS -c ../../gcc-3.0/gcc/libgcc1-test.cgives../../gcc-3.0/gcc/libgcc1-test.c:8: warning: function declaration isn't a prototype../../gcc-3.0/gcc/libgcc1-test.c:9: warning: function declaration isn't a prototype../../gcc-3.0/gcc/libgcc1-test.c:18: warning: function declaration isn't a prototype../../gcc-3.0/gcc/libgcc1-test.c: In function `main_without__main':../../gcc-3.0/gcc/libgcc1-test.c:71: Internal compiler error in gen_highpart, at emit-rtl.c:1109Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.Error occurs in other file than libgcc1-test.c too, with the problem being detected at emit-rtl.c:1109 each time.libgcc1-test.i contains (even though I dont think it helps much):# 6 ""../../gcc-3.0/gcc/libgcc1-test.c""# 1 ""include/stddef.h"" 1 3# 147 ""include/stddef.h"" 3typedef short int ptrdiff_t;# 199 ""include/stddef.h"" 3typedef short unsigned int size_t;# 287 ""include/stddef.h"" 3typedef short int wchar_t;# 7 ""../../gcc-3.0/gcc/libgcc1-test.c"" 2int foo ();double dfoo ();void discard (int);void ddiscard (double);intmain_without__main (){  int a = foo (), b = foo ();  unsigned int au = foo (), bu = foo ();  float af = dfoo (), bf = dfoo ();  double ad = dfoo (), bd = dfoo ();  discard (a * b);  discard (a / b);  discard (a % b);  discard (au / bu);  discard (au % bu);  discard (a >> b);  discard (a << b);  discard (au >> bu);  discard (au << bu);  ddiscard (ad + bd);  ddiscard (ad - bd);  ddiscard (ad * bd);  ddiscard (ad / bd);  ddiscard (-ad);  ddiscard (af + bf);  ddiscard (af - bf);  ddiscard (af * bf);  ddiscard (af / bf);  ddiscard (-af);  discard ((int) ad);  discard ((int) af);  ddiscard ((double) a);  ddiscard ((float) a);  ddiscard ((float) ad);  discard (ad == bd);  discard (ad < bd);  discard (ad > bd);  discard (ad != bd);  discard (ad <= bd);  discard (ad >= bd);  discard (af == bf);  discard (af < bf);  discard (af > bf);  discard (af != bf);  discard (af <= bf);  discard (af >= bf);  return 0;}voiddiscard (x)     int x __attribute__((__unused__));{}voidddiscard (x)     double x __attribute__((__unused__));{}intfoo (){  static int table[] = {20, 69, 4, 12};  static int idx;  return table[idx++];}doubledfoo (){  static double table[] = {20.4, 69.96, 4.4, 202.202};  static int idx;  return table[idx++];}extern void start() __asm__(""start"");extern void _start() __asm__(""_start"");extern void __start() __asm__(""__start"");void *memcpy(void *to,             const void *from __attribute__((__unused__)),             size_t len __attribute__((__unused__))){  return to;}void start() {}void _start() {}void __start() {}void mainCRTStartup() {}Release:3.0Environment:davh@thor$ gcc -v /tmp/dennis/68hc11-buildReading specs from /usr/lib/gcc-lib/i486-suse-linux/2.95.2/specsgcc version 2.95.2 19991024 (release)tried with this too:davh@grid$ gcc -v                                                             ~Reading specs from /usr/lib/gcc-lib/i386-linux/2.95.4/specsgcc version 2.95.4 20010604 (Debian prerelease)davh@thor$ ./xgcc -v                                                                            /tmp/dennis/68hc11-gcc2/gccUsing builtin specs.Thread model: singlegcc version 3.0How-To-Repeat:try build a m68hc11 cross compiler...",RESOLVED          FIXED      
2298,Stephane Carrez,m68hc12 bootstrap ICEs,"CVS gcc as of 2001-3-15 is unable to bootstrap itself when targetting a m68hc12:./configure --target=m68hc12-elf --prefix=/opt/m68hc12-elfmake[..]/tmp/gcc/gcc/gcc/xgcc -B/tmp/gcc/gcc/gcc/ -B/opt/m68hc12-elf/m68hc12-elf/bin/ -B/opt/m68hc12-elf/m68hc12-elf/lib/ -isystem /opt/m68hc12-elf/m68hc12-elf/include -Os  -DUSE_GAS -DIN_GCC   -DIN_LIBGCC2 -I. -I. -I. -I./. -I./config -I./../include  -DL_muldi3 -c ./libgcc2.c -o libgcc/./_muldi3.olibgcc2.c: In function `__muldi3':libgcc2.c:367: Internal compiler error in gen_highpart, at emit-rtl.c:1108Please submit a full bug report, with preprocessed source if appropriate.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.make[2]: *** [libgcc/./_muldi3.o] Error 1make[2]: Leaving directory `/tmp/gcc/gcc/gcc'make[1]: *** [stmp-multilib] Error 2make[1]: Leaving directory `/tmp/gcc/gcc/gcc'make: *** [all-gcc] Error 2Release:CVS HEAD as of 2001-3-15Environment:Debian GNU/Linux 2.2 'potato' glibc 2.1Debian binutils 2.10.91.0.2 compiled for m68hc12-elf",RESOLVED          FIXED      
3680,Stephane Carrez,gcc 3.0 for mc68hc12 crashes when compiling libgcc2.c(__muldi3),configure gcc 3.0 like this:#!/bin/sh# This file was generated automatically by configure.  Do not edit.# This directory was configured as follows:../gcc-3.0/configure --with-gcc-version-trigger=/var/src/gcc-3.0/gcc/version.c --prefix=/usr --host=i586-mandrake-linux --target=m68hc12 --with-newlib --norecursion#binutils 2.11 and newlib 1.9.0 are linked to the gcc directoryWhen building libgcc2 gcc throws an error message (see attached file)Release:gcc 3.0Environment:PC AMD K6 III@400MHz 128MB Ramrunning Linux 2.4.6How-To-Repeat:see description,RESOLVED          FIXED      
6698,Stephane Carrez,gcc crashes in reload_cse_simplify_operands (M68HC12),"m68hc12-elf-gcc -g -Os -mshort -fomit-frame-pointer -mauto-incdec -msoft-reg-count=0 -Wl,-defsym,ports=0x0,-u,-mm68hc12elfb -o scanner.elf scanner.cscanner.c: In function `main':scanner.c:42: insn does not satisfy its constraints:(insn 67 65 68 (set (mem/v:QI (const_int 174 [0xae]) [0 S1 A8])        (ior:QI (mem/v:QI (const_int 174 [0xae]) [0 S1 A8])            (const_int 2 [0x2]))) 83 {*iorqi3_const} (insn_list 60 (nil))    (nil))scanner.c:42: Internal compiler error in reload_cse_simplify_operands, at reload1.c:8368Release:gcc version 3.1How-To-Repeat:See description.Compilation works if the delay() is placed directly into the while(1) loop.",RESOLVED          FIXED      
6744,Stephane Carrez,Generates ASM containing reference to pseudo register z,"When my file is compiled by:m6811-elf-gcc -m68hc12 -mshort -Wall -Os -c eeprom.iIt places the ASM:==============        ldx     #_io_ports+243; Begin inline assembler code#APP        bset 0,z,#22; End of inline assembler code#NO_APP==============Because of the 'z' which should have been 'x',my code will not even compile.I beleive it is not generating the error without optimizations (when I removed -Os).Release:gcc version 2.95.3 20010315 (release)+m68hc1x-20010922Environment:Red Hat Linux 6.2How-To-Repeat:try compiling with:m6811-elf-gcc -m68hc12 -mshort -Wall -Os -c eeprom.i",RESOLVED          FIXED      
6899,Stephane Carrez,construction of C++ classes with less than 5 bytes of storage can cause stack misalignment,"Under certain scenarios, it appears that a loop of construction of one class followed by a construction of another class with less than 5 bytes of storage will cause stack misalignment.Release:gcc compiler 3.1 m68hc1x-20020517Environment:Cygwin/Win2kHow-To-Repeat:see comments in attachment",RESOLVED          FIXED      
7223,Stephane Carrez,"gcc crashes ""Internal compiler error in reload_cse_simplify_operands""","[fabio@redflame 6811]$ gcc -v --save-temps -O -bm68hc11 -mshort amain.cReading specs from /usr/local/lib/gcc-lib/m68hc11/3.1/specsConfigured with: ../gcc-3.1/configure --enable-threadsThread model: posixgcc version 3.1 /usr/local/lib/gcc-lib/m68hc11/3.1/cpp0 -lang-c -v -iprefix /usr/bin/../lib/gcc-lib/m68hc11/3.1/ -D__GNUC__=3 -D__GNUC_MINOR__=1 -D__GNUC_PATCHLEVEL__=0 -Dmc68hc1x -D__mc68hc1x__ -D__mc68hc1x -D__OPTIMIZE__ -D__STDC_HOSTED__=1 -D__HAVE_SHORT_INT__ -D__INT__=16 -D__INT_MAX__=32767 -Dmc6811 -DMC6811 -Dmc68hc11 amain.c amain.iGNU CPP version 3.1 (cpplib) (MC68HC11/MC68HC12)ignoring nonexistent directory ""/usr/lib/gcc-lib/m68hc11/3.1/include""ignoring nonexistent directory ""/usr/lib/gcc-lib/m68hc11/3.1/../../../../m68hc11/sys-include""ignoring nonexistent directory ""/usr/lib/gcc-lib/m68hc11/3.1/../../../../m68hc11/include""ignoring nonexistent directory ""NONE/include""ignoring nonexistent directory ""/usr/local/m68hc11/sys-include""ignoring nonexistent directory ""/usr/local/m68hc11/include""#include ""..."" search starts here:#include <...> search starts here: /usr/local/lib/gcc-lib/m68hc11/3.1/includeEnd of search list. /usr/local/lib/gcc-lib/m68hc11/3.1/cc1 -fpreprocessed amain.i -quiet -dumpbase amain.c -mshort-O -version -o amain.sGNU CPP version 3.1 (cpplib) (MC68HC11/MC68HC12)GNU C version 3.1 (m68hc11)        compiled by GNU C version 3.1.amain.c: In function `main':amain.c:22: insn does not satisfy its constraints:(insn 65 63 73 (set (mem:QI (const_int 4096 [0x1000]) [0 S1 A8])        (ior:QI (mem:QI (const_int 4096 [0x1000]) [0 S1 A8])            (const_int 16 [0x10]))) 83 {*iorqi3_const} (insn_list 58 (nil))    (nil))amain.c:22: Internal compiler error in reload_cse_simplify_operands, at reload1.c:8368Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.Release:Reading specs from /usr/local/lib/gcc-lib/m68hc11/3.1/specs Configured with: ../gcc-3.1/configure --enable-threads Thread model: posix gcc version 3.1Environment:Mangrake linux 8.2linux kernel 2.4.18 SMP",RESOLVED          FIXED      
7361,Stephane Carrez,"Internal compiler error in reload_cse_simplify_operands, at reload1.c:8387","When compiling, processing stops with ""Internal Error"".  The commandline below was copied from the output of 'make'.  Executing thecommand on the preprocessed source repeats the problem.Release:3.0.4 m68hc1x-20020616Environment:System: FreeBSD asus 4.6-STABLE FreeBSD 4.6-STABLE #6: Fri Jul 5 11:18:10 PDT 2002 root@asus:/usr/src/sys/compile/ASUS i386	host: i386-unknown-freebsd4.6build: i386-unknown-freebsd4.6target: m6811-unknown-noneconfigured with: ./configure --target=m6811-elf --program-prefix=m6811-elf- --enable-languages=c,c++How-To-Repeat:	 m6811-elf-gcc -S -g -O3 -msoft-reg-count=8 -DSOFT_REG_COUNT=8 -fshort-enums -Wall -c essai.cessai.c: In function `task0':essai.c:154: Insn does not satisfy its constraints:(insn 27 25 28 (set (mem:QI (const_int 4099 [0x1003]) 0)        (and:QI (mem:QI (const_int 4099 [0x1003]) 0)            (const_int 252 [0xfc]))) 75 {*andqi3_const} (nil)    (nil))essai.c:154: Internal compiler error in reload_cse_simplify_operands, at reload1.c:8387Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.Pre-processed source:# 5 ""essai.c""# 1 ""nanoK.h"" 1# 26 ""nanoK.h""# 1 ""type_def.h"" 1# 26 ""type_def.h""typedef unsigned char u8;typedef unsigned short u16;typedef unsigned int u32;typedef signed char s8;typedef signed short s16;typedef signed int s32;# 27 ""nanoK.h"" 2# 45 ""nanoK.h""u8 nanoK_init(void);# 56 ""nanoK.h""u8 nanoK_task_init(u8 t, void (*fct)(void), u8* stk, u16 stk_len);# 65 ""nanoK.h""u8 nanoK_aggregate_task(u8 t1, u8 t2);# 74 ""nanoK.h""inline void nanoK_task_terminate(void);# 84 ""nanoK.h""inline u8 nanoK_task_reset(u8 t);# 98 ""nanoK.h""void nanoK_hook_init(void (*fct)(void), u8* stk, u16 stk_len);void nanoK_start(void);void nanoK_kernel(void);typedef struct {        struct {                u8 CCR;                u16 D;                u16 X;                u16 Y;                u16 PC;                u16 SP;        } hard_regs;        struct {                u16 r[8];                u16 tmp;                u16 z;                u16 xy;                u16 frame;        } soft_regs;} t_context;# 6 ""essai.c"" 2# 1 ""vectors.h"" 1# 26 ""vectors.h""# 1 ""type_def.h"" 1# 27 ""vectors.h"" 2typedef enum {        Sci,        Spi,        Pulse_acc_input,        Pulse_acc_overf,        Timer_overf,        Output_compare_5,        Output_compare_4,        Output_compare_3,        Output_compare_2,        Output_compare_1,        Input_capture_3,        Input_capture_2,        Input_capture_1,        Real_time,        Irq,        Xirq,        Swi,        Illegal,        Cop_fail,        Cop_clock_fail} t_vector_num;extern u8 VECTORS_init(void);extern void VECTORS_set(t_vector_num n, void (*f)(void));# 7 ""essai.c"" 2# 23 ""essai.c""extern u8 run_task_num;# 37 ""essai.c""static u16 compteur;static u8 stk0[50];static void task0(void){        while(1) {                (*((u8*)0x1003)) &= ~0x03;                (*((u8*)0x1003)) |= 0x00;                nanoK_task_terminate();        }}static u8 stk1[50];static void task1(void){        while(1) {                (*((u8*)0x1003)) &= ~0x02;                (*((u8*)0x1003)) |= 0x01;                nanoK_task_terminate();        }}static u8 stk2[50];static void task2(void){        while(1) {                (*((u8*)0x1003)) &= ~0x01;                (*((u8*)0x1003)) |= 0x02;                nanoK_task_terminate();        }}static u8 stk3[50];static void task3(void){        while(1) {                (*((u8*)0x1003)) &= ~0x00;                (*((u8*)0x1003)) |= 0x03;                nanoK_task_terminate();        }}static u8 hook_stk[50];static void hook(void){        compteur++;        (*((u8*)0x1025)) |= 0x40;}typedef void(*JMP)(void);typedef struct t_vectors_table {  u8 opcode;  JMP f;} t_vectors_table;int main(void){        (*((u8*)0x1007)) = 0xf3;        nanoK_init();        VECTORS_init();        compteur = 0;        nanoK_task_init(0, task0, stk0, sizeof(stk0));        nanoK_task_init(1, task1, stk1, sizeof(stk1));        nanoK_task_init(2, task2, stk2, sizeof(stk2));        nanoK_task_init(3, task3, stk3, sizeof(stk3));        nanoK_hook_init(hook, hook_stk, sizeof(hook_stk));        VECTORS_set(Real_time, nanoK_kernel);        (*((u8*)0x1026)) |= 0x03;        (*((u8*)0x1024)) |= 0x43;        nanoK_start();        return 0;}void __premain() {  return;}",RESOLVED          FIXED      
67591,Christophe Lyon,ARM v8 Thumb IT blocks deprecated,"Conditional compare patterns in the arm backend have not been adjusted for the -mrestrict-it rules, which leads to gas warning messages such as:IT blocks containing 32-bit Thumb instructions are deprecated in ARMv8.For instance, it happens in libstdc++/testsuite/21_strings/basic_string/allocator/char/minimal.ccwhen GCC is configured:--target arm-none-linux-gnueabihf--with-mode thumb--with-cpu cortex-a57--with-fpu crypto-neon-fp-armv8",RESOLVED          FIXED      
78253,Christophe Lyon,[5/6/7 Regression] [ARM] call weak function instead of strong when called through pointer,"This is a forward/summary of https://bugs.linaro.org/show_bug.cgi?id=2562Since GCC 5, on ARM a code fragment like:some_module.c:int __attribute__((weak)) some_weak_func(void){    return 10;}void save_weak_func_pointer(void){    __weak_func_ptr = some_weak_func;}saves the address of the weak implementation in __weak_func_ptr even though the function can be overridden by a strong implementation in another object file.so even if main.c has:int some_weak_func(void){        return 11;}when calling through __weak_func_ptr(), we end up calling the weak implementation.",RESOLVED          FIXED      
70113,Christophe Lyon,[AArch64] -mpc-relative-literal-loads conflicts with fix-cortex-a53-843419,"This is a follow-up to PR 633304.When the Linux kernel is configured with CONFIG_ARM64_ERRATUM_843419, the support for relocations R_AARCH64_ADR_PREL_PG_HI21 and R_AARCH64_ADR_PREL_PG_HI21_NC is removed from the kernel to avoid loading objects with possibly offending sequences. In this case the kernel is built with-mcmodel=large.However, since -mpc-relative-literal-loads is now disabled by default, GCC may still emit such relocations.This PR is a proposal to change GCC's -mfix-cortex-a53-843419 to change the default for -mpc-relative-literal-loads.I proposed a patch:https://gcc.gnu.org/ml/gcc-patches/2016-01/msg01986.html",RESOLVED          FIXED      
68620,Christophe Lyon,ICE on gcc.target/arm/attr-neon-fp16.c,"GCC ICEs on gcc.target/arm/attr-neon-fp16.c when compiled in big-endian mode:arm-none-linux-gnueabihf-gcc -S -mfp16-format=ieee attr-neon-fp16.c -mbig-endianattr-neon-fp16.c: In function 'foo':attr-neon-fp16.c:12:1: internal compiler error: in emit_move_multi_word, at expr.c:3452 } ^0x969cdf emit_move_multi_word	/home/christophe.lyon/src/GCC/sources/gcc-fsf/arm-attribs/gcc/expr.c:34520x96a012 emit_move_insn_1(rtx_def*, rtx_def*)	/home/christophe.lyon/src/GCC/sources/gcc-fsf/arm-attribs/gcc/expr.c:35260x96a265 emit_move_insn(rtx_def*, rtx_def*)	/home/christophe.lyon/src/GCC/sources/gcc-fsf/arm-attribs/gcc/expr.c:35850x9eea5f expand_function_end()	/home/christophe.lyon/src/GCC/sources/gcc-fsf/arm-attribs/gcc/function.c:55120x83bbef construct_exit_block	/home/christophe.lyon/src/GCC/sources/gcc-fsf/arm-attribs/gcc/cfgexpand.c:58300x83d031 execute	/home/christophe.lyon/src/GCC/sources/gcc-fsf/arm-attribs/gcc/cfgexpand.c:6339Please submit a full bug report,With GCC configured as:--target=arm-none-linux-gnueabihf --with-float=hard --with-mode=arm --with-cpu=cortex-a9 --with-fpu=neon",RESOLVED          FIXED      
59009,Christophe Lyon,libsanitizer merge from upstream r191666 breaks bootstrap on powerpc64-linux and aarch64-linux,"The recent merge of upstream libsanitizer broke bootstrap on powerpc64-linux with:In file included from /home/bergner/gcc/gcc-fsf-mainline-base/libsanitizer/sanitizer_common/sanitizer_platform_limits_linux.cc:21:0:/usr/include/asm/stat.h:31:2: error: ‘ino_t’ does not name a type  ino_t  st_ino;  ^/usr/include/asm/stat.h:33:2: error: ‘nlink_t’ does not name a type  nlink_t  st_nlink;  ^/usr/include/asm/stat.h:34:2: error: ‘mode_t’ does not name a type  mode_t  st_mode;  ^/usr/include/asm/stat.h:39:2: error: ‘uid_t’ does not name a type  uid_t  st_uid;  ^/usr/include/asm/stat.h:40:2: error: ‘gid_t’ does not name a type  gid_t  st_gid;  ^/usr/include/asm/stat.h:42:2: error: ‘off_t’ does not name a type  off_t  st_size;  ^/home/bergner/gcc/gcc-fsf-mainline-base/libsanitizer/sanitizer_common/sanitizer_platform_limits_linux.cc:29:73: error: invalid application of ‘sizeof’ to incomplete type ‘__sanitizer::__old_kernel_stat’   unsigned struct___old_kernel_stat_sz = sizeof(struct __old_kernel_stat);                                                                         ^make[4]: *** [sanitizer_platform_limits_linux.lo] Error 1Even if we were to resolve the missing types, the PPC64 kernel does not define a ""struct __old_kernel_stat"", because it never had one.  What is libsanitizer even doing with the __old_kernel_stat?  We switched away from the old kernel stat ages ago, so I can't believe we're trying to support running on the ancient kernels.",RESOLVED          FIXED      
63653,Christophe Lyon,[AArch64_be] vldX/vldX_lane tests fail,"The vldX and vldX_lane tests in gcc.target/aarch64/advsimd-intrinsics fail at execution when target is AArch64_be.I'm using aarch64_be-none-elf with the Foundation Model to run the tests, it could be a bug in the simulator.",RESOLVED          FIXED      
63652,Christophe Lyon,[AArch64_be] vzip/vuzp tests fail,"The vzip/vuzp tests from gcc.target/aarch64/advsimd-intrinsics fail at execution when the target is aarch64_be.I am using aarch64_be-none-elf with the Foundation Model as execution engine, so it could be a bug in that simulator.",RESOLVED          FIXED      
62308,Christophe Lyon,A bug with aarch64 big-endian,"Hi, when I compiled test.c with aarch64-none-elf-gcc -mbig-endian -S ,it reported the following error:   test.c:In function 'checkx2823':   test.c:3:25:internal compiler error:Segmentation fault    void checkx2823(struct S2823 args){};test.c:   typedef int __attribute__((vector_size(16))) v4si;   struct S2823 {v4si a;int b[0];};   void checkx2823 (struct S2823 args){};   With the option of -mlittle-endian ,it would not have this error.And the error would interrupt cc1 in the rtl-optimization reload,can someone help me find the reason ?    Thankyou!by yimingliang",RESOLVED          FIXED      
64131,Christophe Lyon,[5 Regression] libsanitizer fails to build for AARCH64 with the glibc from the trunk,"libsanitizer is broken for AARCH64 with the trunk version of glibc.In file included from /data1/src/gcc-cavium/toolchain-thunder/scripts/../src/libsanitizer/sanitizer_common/sanitizer_platform_limits_posix.cc:176:0:/data1/src/gcc-cavium/toolchain-thunder/scripts/../src/libsanitizer/sanitizer_common/sanitizer_internal_defs.h:272:72: error: size of array ‘assertion_failed__1058’ is negative     typedef char IMPL_PASTE(assertion_failed_##_, line)[2*(int)(pred)-1]                                                                        ^/data1/src/gcc-cavium/toolchain-thunder/scripts/../src/libsanitizer/sanitizer_common/sanitizer_internal_defs.h:266:30: note: in expansion of macro ‘IMPL_COMPILER_ASSERT’ #define COMPILER_CHECK(pred) IMPL_COMPILER_ASSERT(pred, __LINE__)                              ^/data1/src/gcc-cavium/toolchain-thunder/scripts/../src/libsanitizer/sanitizer_common/sanitizer_platform_limits_posix.h:1288:3: note: in expansion of macro ‘COMPILER_CHECK’   COMPILER_CHECK(sizeof(((__sanitizer_##CLASS *) NULL)->MEMBER) == \   ^/data1/src/gcc-cavium/toolchain-thunder/scripts/../src/libsanitizer/sanitizer_common/sanitizer_platform_limits_posix.cc:1058:1: note: in expansion of macro ‘CHECK_SIZE_AND_OFFSET’ CHECK_SIZE_AND_OFFSET(ipc_perm, mode); ^make[5]: *** [sanitizer_platform_limits_posix.lo] Error 1",RESOLVED          FIXED      
77701,Chris Manghane,suspicious code in go/go-gcc.cc,"Hi,now here is also a -Wint-in-bool-context warning:../../gcc-trunk/gcc/go/go-gcc.cc: In constructor 'Gcc_backend::Gcc_backend()':../../gcc-trunk/gcc/go/go-gcc.cc:654:47: error: using integer constants in boolean context [-Werror=int-in-bool-context]   tree t = this->integer_type(BITS_PER_UNIT, 1)->get_tree();                                               ^the column info is off-by one, but I think it is a bug:Btype*Gcc_backend::integer_type(bool is_unsigned, int bits);Gcc_backend::Gcc_backend(){  /* We need to define the fetch_and_add functions, since we use them     for ++ and --.  */  tree t = this->integer_type(BITS_PER_UNIT, 1)->get_tree();  tree p = build_pointer_type(build_qualified_type(t, TYPE_QUAL_VOLATILE));  this->define_builtin(BUILT_IN_SYNC_ADD_AND_FETCH_1, ""__sync_fetch_and_add_1"",                       NULL, build_function_type_list(t, p, t, NULL_TREE),                       false, false);  t = this->integer_type(BITS_PER_UNIT * 2, 1)->get_tree();  p = build_pointer_type(build_qualified_type(t, TYPE_QUAL_VOLATILE));  this->define_builtin(BUILT_IN_SYNC_ADD_AND_FETCH_2, ""__sync_fetch_and_add_2"",                       NULL, build_function_type_list(t, p, t, NULL_TREE),                       false, false);parameters seem to be swapped,the warning did only catch the first instance, because theexpression was not not folded in the C++FE, but all placeslook wrong.Maybe its more easy to swap the parameters at the definition?",RESOLVED          FIXED      
67101,Chris Manghane,mprof.goc:408:5: error: calling ‘__builtin_frame_address’ with a nonzero argument is unsafe [-Werror=frame-address],"For a full bootstrap build, we also build Go and Fortran.  In today's merge with trunk, the bootstrap failed, due to this error./eng/upc/dev/gary/gupc-merge/src/gupc/libgo/runtime/mprof.goc: In function ‘runtime_Stack’:/eng/upc/dev/gary/gupc-merge/src/gupc/libgo/runtime/mprof.goc:408:5: error: calling ‘__builtin_frame_address’ with a nonzero argument is unsafe [-Werror=frame-address]  sp = runtime_getcallersp(&b);     ^cc1: all warnings being treated as errorsmake[4]: *** [mprof.lo] Error 1make[4]: Leaving directory `/eng/upc/dev/gary/gupc-merge/bld/packed-opt/x86_64-pc-linux-gnu/libgo'This is likely triggered by the addition of -Wframe-address.2015-08-02  Martin Sebor  <msebor@redhat.com>        * c-family/c.opt (-Wframe-address): New warning option.        * doc/invoke.texi (Wframe-address): Document it.        * doc/extend.texi (__builtin_frame_address, __builtin_return_address):        Clarify possible effects of calling the functions with non-zero        arguments and mention -Wframe-address.        * builtins.c (expand_builtin_frame_address): Handle -Wframe-address.",RESOLVED          FIXED      
61244,Chris Manghane,gccgo: ICE in write_specific_type_functions [GoSmith],"Created attachment 32824 [details]reproducer$ gccgo -vUsing built-in specs.COLLECT_GCC=gccgoCOLLECT_LTO_WRAPPER=libexec/gcc/x86_64-unknown-linux-gnu/4.10.0/lto-wrapperTarget: x86_64-unknown-linux-gnuConfigured with: ../configure --enable-languages=c,c++,go --disable-bootstrap --enable-checking=yes --disable-multilib --prefix=gcc_trunk/installThread model: posixgcc version 4.10.0 20140516 (experimental) (GCC)The reproducer program is attached.$ go build -compiler=gccgo 0.gogo1: internal compiler error: in write_specific_type_functions, at go/gofrontend/types.cc:18190x628f2a Type::write_specific_type_functions(Gogo*, Named_type*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, Function_type*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, Function_type*)	../../gcc/go/gofrontend/types.cc:18190x6276bf Type::specific_type_functions(Gogo*, Named_type*, Function_type*, Function_type*, Named_object**, Named_object**)	../../gcc/go/gofrontend/types.cc:17980x627c86 Type::type_functions(Gogo*, Named_type*, Function_type*, Function_type*, Named_object**, Named_object**)	../../gcc/go/gofrontend/types.cc:16750x630194 Type::type_descriptor_constructor(Gogo*, int, Named_type*, Methods const*, bool)	../../gcc/go/gofrontend/types.cc:20160x6321f3 Array_type::array_type_descriptor(Gogo*, Named_type*)	../../gcc/go/gofrontend/types.cc:61210x62a5db Type::make_type_descriptor_var(Gogo*)	../../gcc/go/gofrontend/types.cc:12490x62a796 Type::type_descriptor_pointer(Gogo*, Location)	../../gcc/go/gofrontend/types.cc:12060x5bf412 Type_descriptor_expression::do_get_backend(Translate_context*)	../../gcc/go/gofrontend/expressions.cc:138630x5bb6eb Call_expression::do_get_backend(Translate_context*)	../../gcc/go/gofrontend/expressions.cc:94250x5a23f6 Unary_expression::do_get_backend(Translate_context*)	../../gcc/go/gofrontend/expressions.cc:40390x607491 If_statement::do_get_backend(Translate_context*)	../../gcc/go/gofrontend/statements.cc:32000x5db097 Block::get_backend(Translate_context*)	../../gcc/go/gofrontend/gogo.cc:54540x60741c Block_statement::do_get_backend(Translate_context*)	../../gcc/go/gofrontend/statements.cc:18110x5db097 Block::get_backend(Translate_context*)	../../gcc/go/gofrontend/gogo.cc:54540x60741c Block_statement::do_get_backend(Translate_context*)	../../gcc/go/gofrontend/statements.cc:18110x5db097 Block::get_backend(Translate_context*)	../../gcc/go/gofrontend/gogo.cc:54540x60741c Block_statement::do_get_backend(Translate_context*)	../../gcc/go/gofrontend/statements.cc:18110x5db097 Block::get_backend(Translate_context*)	../../gcc/go/gofrontend/gogo.cc:54540x60741c Block_statement::do_get_backend(Translate_context*)	../../gcc/go/gofrontend/statements.cc:18110x5db097 Block::get_backend(Translate_context*)	../../gcc/go/gofrontend/gogo.cc:5454",RESOLVED          FIXED      
61246,Chris Manghane,gccgo: ICE in do_determine_types [GoSmith],"$ gccgo -vUsing built-in specs.COLLECT_GCC=gccgoCOLLECT_LTO_WRAPPER=libexec/gcc/x86_64-unknown-linux-gnu/4.10.0/lto-wrapperTarget: x86_64-unknown-linux-gnuConfigured with: ../configure --enable-languages=c,c++,go --disable-bootstrap --enable-checking=yes --disable-multilib --prefix=gcc_trunk/installThread model: posixgcc version 4.10.0 20140516 (experimental) (GCC) The reproducer is attached.$ go build -compiler=gccgo 0.go go1: internal compiler error: in do_determine_types, at go/gofrontend/statements.cc:4000x6078ed Temporary_statement::do_determine_types()	../../gcc/go/gofrontend/statements.cc:4000x5d2d4b Block::determine_types()	../../gcc/go/gofrontend/gogo.cc:54100x5d2d4b Block::determine_types()	../../gcc/go/gofrontend/gogo.cc:54100x5d2d4b Block::determine_types()	../../gcc/go/gofrontend/gogo.cc:54100x6073fa If_statement::do_determine_types()	../../gcc/go/gofrontend/statements.cc:31660x5d2d4b Block::determine_types()	../../gcc/go/gofrontend/gogo.cc:54100x5d2d4b Block::determine_types()	../../gcc/go/gofrontend/gogo.cc:54100x6073fa If_statement::do_determine_types()	../../gcc/go/gofrontend/statements.cc:31660x5d2d4b Block::determine_types()	../../gcc/go/gofrontend/gogo.cc:54100x5d2d4b Block::determine_types()	../../gcc/go/gofrontend/gogo.cc:54100x6073fa If_statement::do_determine_types()	../../gcc/go/gofrontend/statements.cc:31660x5d2d4b Block::determine_types()	../../gcc/go/gofrontend/gogo.cc:54100x5d2d4b Block::determine_types()	../../gcc/go/gofrontend/gogo.cc:54100x5d5ad8 Function::determine_types()	../../gcc/go/gofrontend/gogo.cc:45620x5d5ad8 Gogo::determine_types()	../../gcc/go/gofrontend/gogo.cc:27550x5cea3c go_parse_input_files(char const**, unsigned int, bool, bool)	../../gcc/go/gofrontend/go.cc:107",RESOLVED          FIXED      
61248,Chris Manghane,"gccgo: spurious ""error: too many arguments"" [GoSmith]","gcc version 4.10.0 20140516 (experimental) (GCC)Program:package mainfunc main() {	var f func(int, interface{})	go f(0, recover())}$ go build -compiler=gccgo args.go args.go:5:10: error: too many arguments  go f(0, recover())",RESOLVED          FIXED      
61253,Chris Manghane,"gccgo: spurious ""error: expected '<-' or '='"" [GoSmith]","gcc version 4.10.0 20140516 (experimental) (GCC)The program is:package mainfunc main() {	c := make(chan int)	v := new(int)	b := new(bool)	select {	case (*v), (*b) = <-c:	}}$ go build -compiler=gccgo /tmp/switch.gosrc.go:8:11: error: expected '<-' or '='  case (*v), (*b) = <-c:",RESOLVED          FIXED      
61254,Chris Manghane,"gccgo: spurious ""error: slice end must be integer"" [GoSmith]",gcc version 4.10.0 20140516 (experimental) (GCC) The program is:package mainfunc main() {	((([][]int{})[:])[0])[0]++}$ go build -compiler=gccgo /tmp/index.gosrc.go:4:15: error: slice end must be integer  ((([][]int{})[:])[0])[0]++gc compiles successfully.,RESOLVED          FIXED      
61255,Chris Manghane,"gccgo: spurious ""error: argument 2 has incompatible type"" [GoSmith]","gcc version 4.10.0 20140516 (experimental) (GCC) The program is:package mainfunc main() {	append([]byte{}, 0)[0]++}$ go build -compiler=gccgo src.gosrc.go:4:2: error: argument 2 has incompatible type  append([]byte{}, 0)[0]++gc compiles successfully.",RESOLVED          FIXED      
61258,Chris Manghane,gccgo: assertion failure go-map-delete.c:37 [GoSmith],"gcc version 4.10.0 20140516 (experimental) (GCC) The program is:package mainfunc main() {	delete(make(map[[0]bool]int), [0]bool{})}$ go run -compiler=gccgo crash.go ../../../libgo/runtime/go-map-delete.c:37: libgo assertion failureAbortedruntime_sighandler	../../../libgo/runtime/go-signal.c:221sig_tramp_info	../../../libgo/runtime/go-signal.c:412__go_assert_fail	../../../libgo/runtime/go-assert.c:18__go_map_delete	../../../libgo/runtime/go-map-delete.c:37main.main	/tmp/crash.go:3runtime_main	../../../libgo/runtime/proc.c:562",RESOLVED          FIXED      
61264,Chris Manghane,gccgo: ICE in __normal_iterator [GoSmith],"Created attachment 32839 [details]reproducergcc version 4.10.0 20140516 (experimental) (GCC) The program is attached.$ go build -compiler=gccgo src.go go1: internal compiler error: Segmentation fault0x9fa46f crash_signal	../../gcc/toplev.c:3370x5b5a8f __normal_iterator	/usr/local/gcc-4.8.2/include/c++/4.8.2/bits/stl_iterator.h:7260x5b5a8f std::vector<Expression*, std::allocator<Expression*> >::begin()	/usr/local/gcc-4.8.2/include/c++/4.8.2/bits/stl_vector.h:5390x5b5a8f Expression_list::begin()	../../gcc/go/gofrontend/expressions.h:10220x5b5a8f Expression_list::copy()	../../gcc/go/gofrontend/expressions.cc:151260x5c080f Struct_construction_expression::do_copy()	../../gcc/go/gofrontend/expressions.cc:117630x5bfc35 Expression::copy()	../../gcc/go/gofrontend/expressions.h:7120x5bfc35 Field_reference_expression::do_copy()	../../gcc/go/gofrontend/expressions.h:23010x5bedd1 Expression::copy()	../../gcc/go/gofrontend/expressions.h:7120x5bedd1 Array_index_expression::do_copy()	../../gcc/go/gofrontend/expressions.cc:99190x60764d Expression::copy()	../../gcc/go/gofrontend/expressions.h:7120x60764d Assignment_operation_statement::do_lower(Gogo*, Named_object*, Block*, Statement_inserter*)	../../gcc/go/gofrontend/statements.cc:8200x5cf2dc Statement::lower(Gogo*, Named_object*, Block*, Statement_inserter*)	../../gcc/go/gofrontend/statements.h:3070x5cf2dc Lower_parse_tree::statement(Block*, unsigned long*, Statement*)	../../gcc/go/gofrontend/gogo.cc:24020x6099c6 Statement::traverse(Block*, unsigned long*, Traverse*)	../../gcc/go/gofrontend/statements.cc:430x5d1c5d Block::traverse(Traverse*)	../../gcc/go/gofrontend/gogo.cc:53840x5cf2a3 Lower_parse_tree::statement(Block*, unsigned long*, Statement*)	../../gcc/go/gofrontend/gogo.cc:23900x6099c6 Statement::traverse(Block*, unsigned long*, Traverse*)	../../gcc/go/gofrontend/statements.cc:430x5d1c5d Block::traverse(Traverse*)	../../gcc/go/gofrontend/gogo.cc:53840x5d1c5d Block::traverse(Traverse*)	../../gcc/go/gofrontend/gogo.cc:5384",RESOLVED          FIXED      
61265,Chris Manghane,gccgo: ICE in verify_gimple_in_seq [GoSmith],"Created attachment 32840 [details]reproducergcc version 4.10.0 20140516 (experimental) (GCC)The reproducer is attached (you need to set GOPATH to the root dir).$ go build -compiler=gccgo main# bsrc/b/0.go: In function 'b.b..import':src/b/0.go:1:1: error: non-trivial conversion at assignment package b ^int16 *[1][0:18446744073709551615][0:18446744073709551615]int16 *[1][1][1]D.1019[0] = b.Var868;src/b/0.go:1:1: internal compiler error: verify_gimple failed0xa29b2f verify_gimple_in_seq(gimple_statement_base*)	../../gcc/tree-cfg.c:46220x83aae4 gimplify_body(tree_node*, bool)	../../gcc/gimplify.c:87200x83aee6 gimplify_function_tree(tree_node*)	../../gcc/gimplify.c:88050x5c552e Gcc_backend::write_global_definitions(std::vector<Btype*, std::allocator<Btype*> > const&, std::vector<Bexpression*, std::allocator<Bexpression*> > const&, std::vector<Bfunction*, std::allocator<Bfunction*> > const&, std::vector<Bvariable*, std::allocator<Bvariable*> > const&)	../../gcc/go/go-gcc.cc:28890x5e3592 Gogo::write_globals()	../../gcc/go/gofrontend/gogo.cc:1292",RESOLVED          FIXED      
61263,Chris Manghane,gccgo: fatal error: schedule: holding locks [GoSmith],"gcc version 4.10.0 20140516 (experimental) (GCC)The program is:package mainimport ""runtime""import ""time""import ""os""func init() {	runtime.GOMAXPROCS(2)	go func() {		for {			runtime.GC()			runtime.Gosched()		}	}()	go func() {		time.Sleep(3 * time.Second)		os.Exit(0)	}()}func main() {	for {		_ = make(chan []*int, 1)	}}Repro:Build it with ""go build -compiler=gccgo src.go"".Run repeatedly with GOGC=0 (I am running 50 parallel processes). Every several seconds it crashes with:fatal error: runtime_lock: lock countruntime stack:ERROR: signal: segmentation fault (core dumped)or:fatal error: schedule: holding locksruntime stack:ERROR: signal: segmentation fault (core dumped)or:fatal error: schedule: holding locksruntime stack:runtime_dopanic	../../../libgo/runtime/panic.c:82runtime_throw	../../../libgo/runtime/panic.c:116schedule	../../../libgo/runtime/proc.c:1720runtime_mstart	../../../libgo/runtime/proc.c:1000main	../../../libgo/runtime/go-main.c:43goroutine 1 [runnable]:runtime_mcall	../../../libgo/runtime/proc.c:292runtime_gc	../../../libgo/runtime/mgc0.c:2025runtime_mallocgc	../../../libgo/runtime/malloc.goc:201runtime_makechan_c	../../../libgo/runtime/chan.c:112main.main	/tmp/lockcount.go:23runtime_main	../../../libgo/runtime/proc.c:562kickoff	../../../libgo/runtime/proc.c:229goroutine 2 [syscall]:	goroutine in C code; stack unavailablecreated by runtime_main	../../../libgo/runtime/proc.c:549goroutine 3 [runnable]:runtime_mcall	../../../libgo/runtime/proc.c:292main.$nested0	/tmp/lockcount.go:12kickoff	../../../libgo/runtime/proc.c:229created by main.$init0	/tmp/lockcount.go:9goroutine 4 [sleep]:runtime_mcall	../../../libgo/runtime/proc.c:292runtime_tsleep	../../../libgo/runtime/time.goc:81main.$nested1	/tmp/lockcount.go:16kickoff	../../../libgo/runtime/proc.c:229created by main.$init0	/tmp/lockcount.go:15goroutine 5 [syscall]:	goroutine in C code; stack unavailablecreated by addtimer	../../../libgo/runtime/time.goc:131",RESOLVED          FIXED      
58300,Caroline Tice,"ICE: in decide_is_symbol_needed, at cgraphunit.c:233 with -fvtable-verify=preinit on invalid code","Created attachment 30742 [details]reduced testcaseCompiler output:$ gcc -fvtable-verify=preinit testcase.C testcase.C:2:1: error: explicit specialization of non-template 'A' { ^testcase.C:4:2: internal compiler error: in decide_is_symbol_needed, at cgraphunit.c:233 };  ^0x887ed8 decide_is_symbol_needed(symtab_node_def*)        /mnt/svn/gcc-trunk/gcc/cgraphunit.c:2320x888468 cgraph_finalize_function(tree_node*, bool)        /mnt/svn/gcc-trunk/gcc/cgraphunit.c:4590x889f69 cgraph_process_new_functions()        /mnt/svn/gcc-trunk/gcc/cgraphunit.c:3060x79d756 vtv_generate_init_routine()        /mnt/svn/gcc-trunk/gcc/cp/vtable-class-hierarchy.c:11900x68fc46 cp_write_global_declarations()        /mnt/svn/gcc-trunk/gcc/cp/decl2.c:4373Please submit a full bug report,with preprocessed source if appropriate.Please include the complete backtrace with any bug report.See <http://gcc.gnu.org/bugs.html> for instructions.$ gcc -v                                 Using built-in specs.COLLECT_GCC=/mnt/svn/gcc-trunk/binary-latest/bin/gccCOLLECT_LTO_WRAPPER=/mnt/svn/gcc-trunk/binary-202158-lto-fortran-checking-yes-rtl-df/libexec/gcc/x86_64-unknown-linux-gnu/4.9.0/lto-wrapperTarget: x86_64-unknown-linux-gnuConfigured with: /mnt/svn/gcc-trunk//configure --enable-checking=yes,rtl,df --enable-languages=c,c++,lto,fortran --prefix=/mnt/svn/gcc-trunk/binary-202158-lto-fortran-checking-yes-rtl-df/ --without-cloog --without-pplThread model: posixgcc version 4.9.0 20130902 (experimental) (GCC)",RESOLVED          FIXED      
59050,Cong Hou,"[4.9 Regression] ICE: tree check: expected integer_cst, have nop_expr in tree_int_cst_lt, at tree.c:7083","markus@x4 tsan % cat test.iistruct {  int trace[6];} a;void fn1() {  for (int i; i; i++) {    a.trace[i] = a.trace[-i];    a.trace[-i] = 0;  }}markus@x4 tsan % /var/tmp/gcc_build_dir/./gcc/xgcc -B/var/tmp/gcc_build_dir/./gcc -O3 test.iitest.ii:3:3: warning: anonymous type with no linkage used to declare variable ‘<anonymous struct> a’ with linkage [enabled by default] } a;   ^test.ii: In function ‘void fn1()’:test.ii:4:6: internal compiler error: tree check: expected integer_cst, have nop_expr in tree_int_cst_lt, at tree.c:7083 void fn1() {      ^0xd1c3f4 tree_check_failed(tree_node const*, char const*, int, char const*, ...)        ../../gcc/gcc/tree.c:94770xd1e354 tree_check        ../../gcc/gcc/tree.h:29140xd1e354 tree_int_cst_lt(tree_node const*, tree_node const*)        ../../gcc/gcc/tree.c:70830xd1e390 tree_int_cst_compare(tree_node const*, tree_node const*)        ../../gcc/gcc/tree.c:70930x100228c comp_dr_addr_with_seg_len_pair        ../../gcc/gcc/tree-vect-data-refs.c:26720x100af25 vec<dr_addr_with_seg_len_pair_t, va_heap, vl_embed>::qsort(int (*)(void const*, void const*))        ../../gcc/gcc/vec.h:9410x100af25 vec<dr_addr_with_seg_len_pair_t, va_heap, vl_ptr>::qsort(int (*)(void const*, void const*))        ../../gcc/gcc/vec.h:16200x100af25 vect_prune_runtime_alias_test_list(_loop_vec_info*)        ../../gcc/gcc/tree-vect-data-refs.c:28450xce76f2 vect_analyze_loop_2        ../../gcc/gcc/tree-vect-loop.c:17160xce76f2 vect_analyze_loop(loop*)        ../../gcc/gcc/tree-vect-loop.c:18070xcfdaff vectorize_loops()        ../../gcc/gcc/tree-vectorizer.c:360Please submit a full bug report,with preprocessed source if appropriate.Please include the complete backtrace with any bug report.See <http://gcc.gnu.org/bugs.html> for instructions.",RESOLVED          FIXED      
18643,Ralf Corsepius,[3.4/4.0 Regression] fixincludes breaks RTEMS,"Some probably fixincludes-related change between 2004-11-17 and 2004-11-23 onhas broken gcc-3.4-branch for all RTEMS-targets and may-be for all newlib-basedtargets in general.Unlike before 2004-11-23, now bootstrapping GCC-3.4.x + newlib one-tree style,produces a limits.h that is unusable for RTEMS.This is the diff between the limits.h from of GCC-3.4.4pre (2004-11-23) and aGCC-3.4.4pre (2004-11-17) toolchains:diff -u \/opt/rtems-4.7/lib/gcc/avr-rtems4.7/3.4.4/include/limits.h \/opt/rtems-4.7/lib/gcc/m68k-rtems4.7/3.4.4/include/limits.h--- /opt/rtems-4.7/lib/gcc/avr-rtems4.7/3.4.4/include/limits.h  2004-11-2319:10:36.000000000 +0100+++ /opt/rtems-4.7/lib/gcc/m68k-rtems4.7/3.4.4/include/limits.h 2004-11-1806:39:55.000000000 +0100@@ -1,3 +1,15 @@+/* This administrivia gets added to the beginning of limits.h+   if the system has its own version of limits.h.  */++/* We use _GCC_LIMITS_H_ because we want this not to match+   any macros that the system's limits.h uses for its own purposes.  */+#ifndef _GCC_LIMITS_H_  /* Terminated in limity.h.  */+#define _GCC_LIMITS_H_++#ifndef _LIBC_LIMITS_H_+/* Use ""..."" so that we find syslimits.h only in this same directory.  */+#include ""syslimits.h""+#endif #ifndef _LIMITS_H___ #define _LIMITS_H___@@ -101,3 +113,13 @@ #endif #endif /* _LIMITS_H___ */+/* This administrivia gets added to the end of limits.h+   if the system has its own version of limits.h.  */++#else /* not _GCC_LIMITS_H_ */++#ifdef _GCC_NEXT_LIMITS_H+#include_next <limits.h>               /* recurse down to the real one */+#endif++#endif /* not _GCC_LIMITS_H_ */As it seems to me, before this change, fixincludes was run, and now it doesn'tseem to be run anymore. AFAIK, theoretically newlib targets are supposed not torequire running fixincludes, so a bug that might have been present before mighthave been fixed and now might break newlib for RTEMS.",RESOLVED          FIXED      
58441,Dmitry Gorbachev,[4.9 Regression] VTV headers are installed into the general include directory,"When GCC is configured with ""--enable-version-specific-runtime-libs"", header files for libstdc++, libgomp, libquadmath, etc. are installed in the compiler-specific directory ($libdir/gcc/$target/$version/include). But libvtv, somehow, stands out from this scheme. It seems to be a bug.",RESOLVED          FIXED      
25443,Dale Johannesen,-fpic/-fPIC failure in gcc.dg/tree-ssa/loop-3.c,I'm getting a 4.1/mainline failure in gcc.dg/tree-ssa/loop-3.c on x86_64 and i686:http://gcc.gnu.org/ml/gcc-testresults/2005-12/msg00892.htmlhttp://gcc.gnu.org/ml/gcc-testresults/2005-12/msg00889.htmlhttp://gcc.gnu.org/ml/gcc-testresults/2005-12/msg00891.htmlhttp://gcc.gnu.org/ml/gcc-testresults/2005-12/msg00888.htmlThe failures look like this:FAIL: gcc.dg/tree-ssa/loop-3.c scan-tree-dump-times step: 1,RESOLVED          FIXED      
19225,Dale Johannesen,[3.4 regression] g++.dg/eh/omit-frame-pointer2.C fails with -fpic/-fPIC on i686-pc-linux-gnu,"When running the testsuite on i686-pc-linux-gnu using 3.4.x or mainline with either -fpic or -fPIC, I get an execution failure in g++.dg/eh/omit-frame-pointer2.C as shown here:http://gcc.gnu.org/ml/gcc-testresults/2005-01/msg00085.htmlhttp://gcc.gnu.org/ml/gcc-testresults/2005-01/msg00084.htmlWhen running the testcase under 3.3.x it passes so this is a regression as of 3.4.x.",RESOLVED          FIXED      
12828,Dale Johannesen,#NAME?,Perfectly fine code seems to give segmentation faults on PowerPC with the new -floop-optimize flag.  I've only tested this with GCC 3.3.2 from Debian unstable.  Here's a small example of code which gives SIGSEGV http://www.rashbox.org/~chlunde/gccloopbug.cc,RESOLVED          FIXED      
19650,Dale Johannesen,[4.0 Regression] miscompiling of array acess of (int)(a==2),"Following program miscompiles with -O1 on (32 bit) Darwin.  Works with -O0.It appears that RTL generation forprintf (&""cmp.func is %p (expected %p)\n""[0], comparator_matrixD.2001[0][(intD.2) (D.2150 == 2)], compare_e_stringD.2019);is incorrect, but I haven't dug deeply yet.  I will be fixing this unless somebody recognizes it as a dup#include <stdio.h>#define test(a) ((a) ? 1 : 0)typedef int (*arg_cmp_func)();class Item_func {public:    enum Functype { UNKNOWN_FUNC, EQ_FUNC, EQUAL_FUNC };    virtual enum Functype functype() const { return UNKNOWN_FUNC; }};class Item_bool_func2 : public Item_func{public:    virtual enum Functype functype() const { return EQUAL_FUNC; }};class Arg_comparator {public:    Item_bool_func2 *owner;    arg_cmp_func func;    static arg_cmp_func comparator_matrix[4][2];    int Arg_comparator::set_compare_func(Item_bool_func2 *item, int type)    {        owner = item;        /****************** problematic line is here ************************/        func = comparator_matrix[type][test(owner->functype() == Item_func::EQUAL_FUNC)];        return 0;    }};int compare_string() { return 0; }int compare_e_string() { return 0; }int compare_real() { return 0; }int compare_e_real() { return 0; }int compare_int_signed() { return 0; }int compare_e_int() { return 0; }int compare_row() { return 0; }int compare_e_row() { return 0; }arg_cmp_func Arg_comparator::comparator_matrix[4][2] =    {{&compare_string,     &compare_e_string},     {&compare_real,       &compare_e_real},     {&compare_int_signed, &compare_e_int},     {&compare_row,        &compare_e_row}};int main(){    Arg_comparator cmp;    Item_bool_func2 equal_func;    cmp.set_compare_func(&equal_func, 0);    printf(""cmp.func is %p (expected %p)\n"", cmp.func, &compare_e_string);}",RESOLVED          FIXED      
14498,Dale Johannesen,[tree-ssa] ICE on legal (varargs),"Compile with -O2 and watch the ICE:#include <stdarg.h>extern void baz(char *);void bar (va_list *args){  if (args)    {      char *s = va_arg(*args, char *);      baz(s);    }}Gimplifier marks args as volatile when it sees the va_arg but does not propagate this backwards to regenerate gimpl for the test of args.",RESOLVED          FIXED      
7133,Dale Johannesen,PPC: unrecognizable insn,"Compile the attached file with -O2 -ffast-math.Release:gcc-3.1.1, 3.2How-To-Repeat:[fsirl@entropy:~/cvsx/quakeforge/libs/video/renderer/sw]$ gcc -O2 -ffast-math test.itest.c: In function `R_ClipSpriteFace':test.c:124: unrecognizable insn:(insn 284 246 247 (set (reg:CCEQ 213)        (compare:CCEQ (xor:SI (gt:SI (reg:CCFP 194)                    (const_int 0 [0x0]))                (ungt:SI (reg:CCFP 187)                    (const_int 0 [0x0])))            (const_int 1 [0x1]))) -1 (insn_list 246 (insn_list 232 (nil)))    (expr_list:REG_DEAD (reg:CCFP 187)        (nil)))test.c:124: Internal compiler error in extract_insn, at recog.c:2132Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.",RESOLVED          FIXED      
7339,Dale Johannesen,ICE on simple code with GCC 3.1,"ICE on illegal code (it shifts 16 bit values >> 32). It only occurs with optimization. I haven't checked with 3.1.1 snapshots or HEAD.The attached code will compile with GCC 3.0.4 (with and without optimization).I'm compiling with g++ but I don't think there is anything C++-centric about the ICE.Release:GCC 3.1Environment:RedHat Linux 7.3 on an Athlon.$ g++ -vReading specs from /usr/local/gcc-3.1/lib/gcc-lib/i686-pc-linux-gnu/3.1/specsConfigured with: ../gcc-3.1/configure --prefix=/usr/local/gcc-3.1 --enable-threadsThread model: posixgcc version 3.1How-To-Repeat:Compile the attached file with -O (or higher) with GCC 3.1Here is what I get:$ g++ -O x.cppx.cpp: In function `bool bigint_divcore(short unsigned int, short unsigned int,    short unsigned int, short unsigned int, short unsigned int, short unsigned    int)':x.cpp:26: warning: right shift count >= width of typex.cpp:28: warning: right shift count >= width of typex.cpp:37: Internal compiler error in simplify_subreg, at simplify-rtx.c:2452Please submit a full bug report [...]",RESOLVED          FIXED      
7705,Dale Johannesen,Internal compiler error in simplify_subreg,"When building binutils-2.13 for target ""powerpc-linux"", an ""internal compiler error in simplify_subreg"" is reported.The source file is gas/config/tc-ppc.c. Its preprocessed output is included in attachement.It fails when compiled -O1 or -O2, but succeeds with -O0.It also fails with gcc-3.1, but works with gcc-3.0.4.Release:gcc version 3.1.1Environment:Kernel 2.4.9 on i686 (RH 7.2)glibc 2.2.5How-To-Repeat:Build binutils 2.13 for target powerpc-linuxorFrom the file in attachement, execute  gzip -dc < tc-ppc.gz > tc-ppc.i  gcc -O2 -c tc-ppc.i",RESOLVED          FIXED      
7720,Dale Johannesen,gcc Internal compiler error when compiling binutils-2.13/gas/config/tc-ppc.c with -O2,"[hli@photon] ~/vxworks/gcc-3.x/binutils-2.13/gas $ gcc -c -g -O2 /tmp/l.c config/tc-ppc.c: In function `md_assemble':config/tc-ppc.c:2172: warning: right shift count >= width of typeconfig/tc-ppc.c:2174: warning: right shift count >= width of typeconfig/tc-ppc.c:2179: warning: right shift count >= width of typeconfig/tc-ppc.c:2181: warning: right shift count >= width of typeconfig/tc-ppc.c:2186: warning: right shift count >= width of typeconfig/tc-ppc.c:2188: warning: right shift count >= width of typeconfig/tc-ppc.c:2193: warning: right shift count >= width of typeconfig/tc-ppc.c:2195: warning: right shift count >= width of typeconfig/tc-ppc.c: In function `md_apply_fix3':config/tc-ppc.c:5374: warning: right shift count >= width of typeconfig/tc-ppc.c:5381: warning: right shift count >= width of typeconfig/tc-ppc.c:5388: warning: right shift count >= width of typeconfig/tc-ppc.c:5395: warning: right shift count >= width of typeconfig/tc-ppc.c:5523: Internal compiler error in simplify_subreg, at simplify-rtx.c:2452Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.Release:3.2Environment:System: Linux photon 2.4.13 #3 Mon Nov 12 17:20:43 PST 2001 i686 unknownArchitecture: i686	host: i686-redhat-linux-gnubuild: i686-redhat-linux-gnutarget: i686-redhat-linux-gnuconfigured with: ../configure --prefix=/usr --enable-shared --enable-threads --disable-nls i686-redhat-linuxHow-To-Repeat:	# 1 ""config/tc-ppc.c""# 1 ""<built-in>""# 1 ""<command line>""# 1 ""config/tc-ppc.c""# 23 ""config/tc-ppc.c""# 1 ""/usr/lib/gcc-lib/i686-redhat-linux/3.2/include/stdio.h"" 1 3# 36 ""/usr/lib/gcc-lib/i686-redhat-linux/3.2/include/stdio.h"" 3# 1 ""/usr/include/features.h"" 1 3# 283 ""/usr/include/features.h"" 3# 1 ""/usr/include/sys/cdefs.h"" 1 3# 284 ""/usr/include/features.h"" 2 3# 311 ""/usr/include/features.h"" 3# 1 ""/usr/include/gnu/stubs.h"" 1 3# 312 ""/usr/include/features.h"" 2 3# 37 ""/usr/lib/gcc-lib/i686-redhat-linux/3.2/include/stdio.h"" 2 3# 1 ""/usr/lib/gcc-lib/i686-redhat-linux/3.2/include/stddef.h"" 1 3# 201 ""/usr/lib/gcc-lib/i686-redhat-linux/3.2/include/stddef.h"" 3typedef unsigned int size_t;# 43 ""/usr/lib/gcc-lib/i686-redhat-linux/3.2/include/stdio.h"" 2 3# 1 ""/usr/include/bits/types.h"" 1 3# 29 ""/usr/include/bits/types.h"" 3# 1 ""/usr/lib/gcc-lib/i686-redhat-linux/3.2/include/stddef.h"" 1 3# 30 ""/usr/include/bits/types.h"" 2 3typedef unsigned char __u_char;typedef unsigned short __u_short;typedef unsigned int __u_int;typedef unsigned long __u_long;__extension__ typedef unsigned long long int __u_quad_t;__extension__ typedef long long int __quad_t;# 49 ""/usr/include/bits/types.h"" 3typedef signed char __int8_t;typedef unsigned char __uint8_t;typedef signed short int __int16_t;typedef unsigned short int __uint16_t;typedef signed int __int32_t;typedef unsigned int __uint32_t;__extension__ typedef signed long long int __int64_t;__extension__ typedef unsigned long long int __uint64_t;typedef __quad_t *__qaddr_t;typedef __u_quad_t __dev_t;typedef __u_int __uid_t;typedef __u_int __gid_t;typedef __u_long __ino_t;typedef __u_int __mode_t;typedef __u_int __nlink_t;typedef long int __off_t;typedef __quad_t __loff_t;typedef int __pid_t;typedef int __ssize_t;typedef __u_long __rlim_t;typedef __u_quad_t __rlim64_t;typedef __u_int __id_t;typedef struct  {    int __val[2];  } __fsid_t;typedef int __daddr_t;typedef char *__caddr_t;typedef long int __time_t;typedef unsigned int __useconds_t;typedef long int __suseconds_t;typedef long int __swblk_t;typedef long int __clock_t;typedef int __clockid_t;typedef int __timer_t;typedef int __key_t;typedef unsigned short int __ipc_pid_t;typedef long int __blksize_t;typedef long int __blkcnt_t;typedef __quad_t __blkcnt64_t;typedef __u_long __fsblkcnt_t;typedef __u_quad_t __fsblkcnt64_t;typedef __u_long __fsfilcnt_t;typedef __u_quad_t __fsfilcnt64_t;typedef __u_quad_t __ino64_t;typedef __loff_t __off64_t;typedef long int __t_scalar_t;typedef unsigned long int __t_uscalar_t;typedef int __intptr_t;typedef unsigned int __socklen_t;# 1 ""/usr/include/bits/pthreadtypes.h"" 1 3# 23 ""/usr/include/bits/pthreadtypes.h"" 3# 1 ""/usr/include/bits/sched.h"" 1 3# 68 ""/usr/include/bits/sched.h"" 3struct __sched_param  {    int __sched_priority;  };# 24 ""/usr/include/bits/pthreadtypes.h"" 2 3struct _pthread_fastlock{  long int __status;  int __spinlock;};typedef struct _pthread_descr_struct *_pthread_descr;typedef struct __pthread_attr_s{  int __detachstate;  int __schedpolicy;  struct __sched_param __schedparam;  int __inheritsched;  int __scope;  size_t __guardsize;  int __stackaddr_set;  void *__stackaddr;  size_t __stacksize;} pthread_attr_t;typedef struct{  struct _pthread_fastlock __c_lock;  _pthread_descr __c_waiting;} pthread_cond_t;typedef struct{  int __dummy;} pthread_condattr_t;typedef unsigned int pthread_key_t;typedef struct{  int __m_reserved;  int __m_count;  _pthread_descr __m_owner;  int __m_kind;  struct _pthread_fastlock __m_lock;} pthread_mutex_t;typedef struct{  int __mutexkind;} pthread_mutexattr_t;typedef int pthread_once_t;typedef struct _pthread_rwlock_t{  struct _pthread_fastlock __rw_lock;  int __rw_readers;  _pthread_descr __rw_writer;  _pthread_descr __rw_read_waiting;  _pthread_descr __rw_write_waiting;  int __rw_kind;  int __rw_pshared;} pthread_rwlock_t;typedef struct{  int __lockkind;  int __pshared;} pthread_rwlockattr_t;typedef volatile int pthread_spinlock_t;typedef struct {  struct _pthread_fastlock __ba_lock;  int __ba_required;  int __ba_present;  _pthread_descr __ba_waiting;} pthread_barrier_t;typedef struct {  int __pshared;} pthread_barrierattr_t;typedef unsigned long int pthread_t;# 144 ""/usr/include/bits/types.h"" 2 3# 45 ""/usr/lib/gcc-lib/i686-redhat-linux/3.2/include/stdio.h"" 2 3# 53 ""/usr/lib/gcc-lib/i686-redhat-linux/3.2/include/stdio.h"" 3typedef struct _IO_FILE FILE;# 63 ""/usr/lib/gcc-lib/i686-redhat-linux/3.2/include/stdio.h"" 3typedef struct _IO_FILE __FILE;# 73 ""/usr/lib/gcc-lib/i686-redhat-linux/3.2/include/stdio.h"" 3# 1 ""/usr/include/libio.h"" 1 3# 30 ""/usr/include/libio.h"" 3# 1 ""/usr/include/_G_config.h"" 1 3# 14 ""/usr/include/_G_config.h"" 3# 1 ""/usr/lib/gcc-lib/i686-redhat-linux/3.2/include/stddef.h"" 1 3# 294 ""/usr/lib/gcc-lib/i686-redhat-linux/3.2/include/stddef.h"" 3typedef long int wchar_t;# 321 ""/usr/lib/gcc-lib/i686-redhat-linux/3.2/include/stddef.h"" 3typedef unsigned int wint_t;# 15 ""/usr/include/_G_config.h"" 2 3# 24 ""/usr/include/_G_config.h"" 3# 1 ""/usr/include/wchar.h"" 1 3# 48 ""/usr/include/wchar.h"" 3# 1 ""/usr/lib/gcc-lib/i686-redhat-linux/3.2/include/stddef.h"" 1 3# 49 ""/usr/include/wchar.h"" 2 3# 1 ""/usr/include/bits/wchar.h"" 1 3# 51 ""/usr/include/wchar.h"" 2 3# 67 ""/usr/include/wchar.h"" 3typedef struct{  int __count;  union  {    wint_t __wch;    char __wchb[4];  } __value;} __mbstate_t;# 25 ""/usr/include/_G_config.h"" 2 3typedef struct{  __off_t __pos;  __mbstate_t __state;} _G_fpos_t;typedef struct{  __off64_t __pos;  __mbstate_t __state;} _G_fpos64_t;# 44 ""/usr/include/_G_config.h"" 3# 1 ""/usr/include/gconv.h"" 1 3# 28 ""/usr/include/gconv.h"" 3# 1 ""/usr/include/wchar.h"" 1 3# 48 ""/usr/include/wchar.h"" 3# 1 ""/usr/lib/gcc-lib/i686-redhat-linux/3.2/include/stddef.h"" 1 3# 49 ""/usr/include/wchar.h"" 2 3# 29 ""/usr/include/gconv.h"" 2 3# 1 ""/usr/lib/gcc-lib/i686-redhat-linux/3.2/include/stddef.h"" 1 3# 31 ""/usr/include/gconv.h"" 2 3enum{  __GCONV_OK = 0,  __GCONV_NOCONV,  __GCONV_NODB,  __GCONV_NOMEM,  __GCONV_EMPTY_INPUT,  __GCONV_FULL_OUTPUT,  __GCONV_ILLEGAL_INPUT,  __GCONV_INCOMPLETE_INPUT,  __GCONV_ILLEGAL_DESCRIPTOR,  __GCONV_INTERNAL_ERROR};enum{  __GCONV_IS_LAST = 0x0001,  __GCONV_IGNORE_ERRORS = 0x0002};struct __gconv_step;struct __gconv_step_data;struct __gconv_loaded_object;struct __gconv_trans_data;typedef int (*__gconv_fct) (struct __gconv_step *, struct __gconv_step_data *,                            __const unsigned char **, __const unsigned char *,                            unsigned char **, size_t *, int, int);typedef int (*__gconv_init_fct) (struct __gconv_step *);typedef void (*__gconv_end_fct) (struct __gconv_step *);typedef int (*__gconv_trans_fct) (struct __gconv_step *,                                  struct __gconv_step_data *, void *,                                  __const unsigned char *,                                  __const unsigned char **,                                  __const unsigned char *, unsigned char **,                                  size_t *);typedef int (*__gconv_trans_context_fct) (void *, __const unsigned char *,                                          __const unsigned char *,                                          unsigned char *, unsigned char *);typedef int (*__gconv_trans_query_fct) (__const char *, __const char ***,                                        size_t *);typedef int (*__gconv_trans_init_fct) (void **, const char *);typedef void (*__gconv_trans_end_fct) (void *);struct __gconv_trans_data{  __gconv_trans_fct __trans_fct;  __gconv_trans_context_fct __trans_context_fct;  __gconv_trans_end_fct __trans_end_fct;  void *__data;  struct __gconv_trans_data *__next;};struct __gconv_step{  struct __gconv_loaded_object *__shlib_handle;  __const char *__modname;  int __counter;  char *__from_name;  char *__to_name;  __gconv_fct __fct;  __gconv_init_fct __init_fct;  __gconv_end_fct __end_fct;  int __min_needed_from;  int __max_needed_from;  int __min_needed_to;  int __max_needed_to;  int __stateful;  void *__data;};struct __gconv_step_data{  unsigned char *__outbuf;  unsigned char *__outbufend;  int __flags;  int __invocation_counter;  int __internal_use;  __mbstate_t *__statep;  __mbstate_t __state;  struct __gconv_trans_data *__trans;};typedef struct __gconv_info{  size_t __nsteps;  struct __gconv_step *__steps;  __extension__ struct __gconv_step_data __data [];} *__gconv_t;# 45 ""/usr/include/_G_config.h"" 2 3typedef union{  struct __gconv_info __cd;  struct  {    struct __gconv_info __cd;    struct __gconv_step_data __data;  } __combined;} _G_iconv_t;typedef int _G_int16_t __attribute__ ((__mode__ (__HI__)));typedef int _G_int32_t __attribute__ ((__mode__ (__SI__)));typedef unsigned int _G_uint16_t __attribute__ ((__mode__ (__HI__)));typedef unsigned int _G_uint32_t __attribute__ ((__mode__ (__SI__)));# 31 ""/usr/include/libio.h"" 2 3# 51 ""/usr/include/libio.h"" 3# 1 ""/usr/lib/gcc-lib/i686-redhat-linux/3.2/include/stdarg.h"" 1 3# 43 ""/usr/lib/gcc-lib/i686-redhat-linux/3.2/include/stdarg.h"" 3typedef __builtin_va_list __gnuc_va_list;# 52 ""/usr/include/libio.h"" 2 3# 158 ""/usr/include/libio.h"" 3struct _IO_jump_t; struct _IO_FILE;# 168 ""/usr/include/libio.h"" 3typedef void _IO_lock_t;struct _IO_marker {  struct _IO_marker *_next;  struct _IO_FILE *_sbuf;  int _pos;# 191 ""/usr/include/libio.h"" 3};enum __codecvt_result{  __codecvt_ok,  __codecvt_partial,  __codecvt_error,  __codecvt_noconv};# 259 ""/usr/include/libio.h"" 3struct _IO_FILE {  int _flags;  char* _IO_read_ptr;  char* _IO_read_end;  char* _IO_read_base;  char* _IO_write_base;  char* _IO_write_ptr;  char* _IO_write_end;  char* _IO_buf_base;  char* _IO_buf_end;  char *_IO_save_base;  char *_IO_backup_base;  char *_IO_save_end;  struct _IO_marker *_markers;  struct _IO_FILE *_chain;  int _fileno;  int _blksize;  __off_t _old_offset;  unsigned short _cur_column;  signed char _vtable_offset;  char _shortbuf[1];  _IO_lock_t *_lock;# 303 ""/usr/include/libio.h"" 3  __off64_t _offset;  void *__pad1;  void *__pad2;  int _mode;  char _unused2[15 * sizeof (int) - 2 * sizeof (void *)];};typedef struct _IO_FILE _IO_FILE;struct _IO_FILE_plus;extern struct _IO_FILE_plus _IO_2_1_stdin_;extern struct _IO_FILE_plus _IO_2_1_stdout_;extern struct _IO_FILE_plus _IO_2_1_stderr_;# 342 ""/usr/include/libio.h"" 3typedef __ssize_t __io_read_fn (void *__cookie, char *__buf, size_t __nbytes);typedef __ssize_t __io_write_fn (void *__cookie, __const char *__buf,                                 size_t __n);typedef int __io_seek_fn (void *__cookie, __off64_t *__pos, int __w);typedef int __io_close_fn (void *__cookie);typedef __io_read_fn cookie_read_function_t;typedef __io_write_fn cookie_write_function_t;typedef __io_seek_fn cookie_seek_function_t;typedef __io_close_fn cookie_close_function_t;typedef struct{  __io_read_fn *read;  __io_write_fn *write;  __io_seek_fn *seek;  __io_close_fn *close;} _IO_cookie_io_functions_t;typedef _IO_cookie_io_functions_t cookie_io_functions_t;struct _IO_cookie_file;extern void _IO_cookie_init (struct _IO_cookie_file *__cfile, int __read_write,                             void *__cookie, _IO_cookie_io_functions_t __fns);extern int __underflow (_IO_FILE *) ;extern int __uflow (_IO_FILE *) ;extern int __overflow (_IO_FILE *, int) ;extern wint_t __wunderflow (_IO_FILE *) ;extern wint_t __wuflow (_IO_FILE *) ;extern wint_t __woverflow (_IO_FILE *, wint_t) ;# 424 ""/usr/include/libio.h"" 3extern int _IO_getc (_IO_FILE *__fp) ;extern int _IO_putc (int __c, _IO_FILE *__fp) ;extern int _IO_feof (_IO_FILE *__fp) ;extern int _IO_ferror (_IO_FILE *__fp) ;extern int _IO_peekc_locked (_IO_FILE *__fp) ;extern void _IO_flockfile (_IO_FILE *) ;extern void _IO_funlockfile (_IO_FILE *) ;extern int _IO_ftrylockfile (_IO_FILE *) ;# 454 ""/usr/include/libio.h"" 3extern int _IO_vfscanf (_IO_FILE * __restrict, const char * __restrict,                        __gnuc_va_list, int *__restrict) ;extern int _IO_vfprintf (_IO_FILE *__restrict, const char *__restrict,                         __gnuc_va_list) ;extern __ssize_t _IO_padn (_IO_FILE *, int, __ssize_t) ;extern size_t _IO_sgetn (_IO_FILE *, void *, size_t) ;extern __off64_t _IO_seekoff (_IO_FILE *, __off64_t, int, int) ;extern __off64_t _IO_seekpos (_IO_FILE *, __off64_t, int) ;extern void _IO_free_backup_area (_IO_FILE *) ;# 74 ""/usr/lib/gcc-lib/i686-redhat-linux/3.2/include/stdio.h"" 2 3typedef __gnuc_va_list __not_va_list__;# 88 ""/usr/lib/gcc-lib/i686-redhat-linux/3.2/include/stdio.h"" 3typedef _G_fpos_t fpos_t;typedef _G_fpos64_t fpos64_t;# 137 ""/usr/lib/gcc-lib/i686-redhat-linux/3.2/include/stdio.h"" 3# 1 ""/usr/include/bits/stdio_lim.h"" 1 3# 138 ""/usr/lib/gcc-lib/i686-redhat-linux/3.2/include/stdio.h"" 2 3extern FILE *stdin;extern FILE *stdout;extern FILE *stderr;# 152 ""/usr/lib/gcc-lib/i686-redhat-linux/3.2/include/stdio.h"" 3extern int remove (__const char *__filename) ;extern int rename (__const char *__old, __const char *__new) ;extern FILE *tmpfile (void) ;# 168 ""/usr/lib/gcc-lib/i686-redhat-linux/3.2/include/stdio.h"" 3extern FILE *tmpfile64 (void) ;extern char *tmpnam (char *__s) ;extern char *tmpnam_r (char *__s) ;# 188 ""/usr/lib/gcc-lib/i686-redhat-linux/3.2/include/stdio.h"" 3extern char *tempnam (__const char *__dir, __const char *__pfx)     __attribute__ ((__malloc__));extern int fclose (FILE *__stream) ;extern int fflush (FILE *__stream) ;extern int fflush_unlocked (FILE *__stream) ;extern int fcloseall (void) ;extern FILE *fopen (__const char *__restrict __filename,                    __const char *__restrict __modes) ;extern FILE *freopen (__const char *__restrict __filename,                      __const char *__restrict __modes,                      FILE *__restrict __stream) ;# 232 ""/usr/lib/gcc-lib/i686-redhat-linux/3.2/include/stdio.h"" 3extern FILE *fopen64 (__const char *__restrict __filename,                      __const char *__restrict __modes) ;extern FILE *freopen64 (__const char *__restrict __filename,                        __const char *__restrict __modes,                        FILE *__restrict __stream) ;extern FILE *fdopen (int __fd, __const char *__modes) ;extern FILE *fopencookie (void *__restrict __magic_cookie,                          __const char *__restrict __modes,                          _IO_cookie_io_functions_t __io_funcs) ;extern FILE *fmemopen (void *__s, size_t __len, __const char *__modes) ;extern FILE *open_memstream (char **__restrict __bufloc,                             size_t *__restrict __sizeloc) ;extern void setbuf (FILE *__restrict __stream, char *__restrict __buf) ;extern int setvbuf (FILE *__restrict __stream, char *__restrict __buf,                    int __modes, size_t __n) ;extern void setbuffer (FILE *__restrict __stream, char *__restrict __buf,                       size_t __size) ;extern void setlinebuf (FILE *__stream) ;extern int fprintf (FILE *__restrict __stream,                    __const char *__restrict __format, ...) ;extern int printf (__const char *__restrict __format, ...) ;extern int sprintf (char *__restrict __s,                    __const char *__restrict __format, ...) ;extern int vfprintf (FILE *__restrict __s, __const char *__restrict __format,                     __gnuc_va_list __arg) ;extern int vprintf (__const char *__restrict __format, __gnuc_va_list __arg)     ;extern int vsprintf (char *__restrict __s, __const char *__restrict __format,                     __gnuc_va_list __arg) ;extern int snprintf (char *__restrict __s, size_t __maxlen,                     __const char *__restrict __format, ...)     __attribute__ ((__format__ (__printf__, 3, 4)));extern int vsnprintf (char *__restrict __s, size_t __maxlen,                      __const char *__restrict __format, __gnuc_va_list __arg)     __attribute__ ((__format__ (__printf__, 3, 0)));extern int vasprintf (char **__restrict __ptr, __const char *__restrict __f,                      __gnuc_va_list __arg)     __attribute__ ((__format__ (__printf__, 2, 0)));extern int __asprintf (char **__restrict __ptr,                       __const char *__restrict __fmt, ...)     __attribute__ ((__format__ (__printf__, 2, 3)));extern int asprintf (char **__restrict __ptr,                     __const char *__restrict __fmt, ...)     __attribute__ ((__format__ (__printf__, 2, 3)));extern int vdprintf (int __fd, __const char *__restrict __fmt,                     __gnuc_va_list __arg)     __attribute__ ((__format__ (__printf__, 2, 0)));extern int dprintf (int __fd, __const char *__restrict __fmt, ...)     __attribute__ ((__format__ (__printf__, 2, 3)));extern int fscanf (FILE *__restrict __stream,                   __const char *__restrict __format, ...) ;extern int scanf (__const char *__restrict __format, ...) ;extern int sscanf (__const char *__restrict __s,                   __const char *__restrict __format, ...) ;extern int vfscanf (FILE *__restrict __s, __const char *__restrict __format,                    __gnuc_va_list __arg)     __attribute__ ((__format__ (__scanf__, 2, 0)));extern int vscanf (__const char *__restrict __format, __gnuc_va_list __arg)     __attribute__ ((__format__ (__scanf__, 1, 0)));extern int vsscanf (__const char *__restrict __s,                    __const char *__restrict __format, __gnuc_va_list __arg)     __attribute__ ((__format__ (__scanf__, 2, 0)));extern int fgetc (FILE *__stream) ;extern int getc (FILE *__stream) ;extern int getchar (void) ;extern int getc_unlocked (FILE *__stream) ;extern int getchar_unlocked (void) ;extern int fgetc_unlocked (FILE *__stream) ;extern int fputc (int __c, FILE *__stream) ;extern int putc (int __c, FILE *__stream) ;extern int putchar (int __c) ;extern int fputc_unlocked (int __c, FILE *__stream) ;extern int putc_unlocked (int __c, FILE *__stream) ;extern int putchar_unlocked (int __c) ;extern int getw (FILE *__stream) ;extern int putw (int __w, FILE *__stream) ;extern char *fgets (char *__restrict __s, int __n, FILE *__restrict __stream)     ;extern char *fgets_unlocked (char *__restrict __s, int __n,                             FILE *__restrict __stream) ;extern char *gets (char *__s) ;# 436 ""/usr/lib/gcc-lib/i686-redhat-linux/3.2/include/stdio.h"" 3extern __ssize_t __getdelim (char **__restrict __lineptr,                               size_t *__restrict __n, int __delimiter,                               FILE *__restrict __stream) ;extern __ssize_t getdelim (char **__restrict __lineptr,                             size_t *__restrict __n, int __delimiter,                             FILE *__restrict __stream) ;extern __ssize_t getline (char **__restrict __lineptr,                            size_t *__restrict __n,                            FILE *__restrict __stream) ;extern int fputs (__const char *__restrict __s, FILE *__restrict __stream)     ;extern int fputs_unlocked (__const char *__restrict __s,                           FILE *__restrict __stream) ;extern int puts (__const char *__s) ;extern int ungetc (int __c, FILE *__stream) ;extern size_t fread (void *__restrict __ptr, size_t __size,                     size_t __n, FILE *__restrict __stream) ;extern size_t fwrite (__const void *__restrict __ptr, size_t __size,                      size_t __n, FILE *__restrict __s) ;extern size_t fread_unlocked (void *__restrict __ptr, size_t __size,                              size_t __n, FILE *__restrict __stream) ;extern size_t fwrite_unlocked (__const void *__restrict __ptr, size_t __size,                               size_t __n, FILE *__restrict __stream) ;extern int fseek (FILE *__stream, long int __off, int __whence) ;extern long int ftell (FILE *__stream) ;extern void rewind (FILE *__stream) ;# 499 ""/usr/lib/gcc-lib/i686-redhat-linux/3.2/include/stdio.h"" 3extern int fseeko (FILE *__stream, __off_t __off, int __whence) ;extern __off_t ftello (FILE *__stream) ;extern int fgetpos (FILE *__restrict __stream, fpos_t *__restrict __pos)     ;extern int fsetpos (FILE *__stream, __const fpos_t *__pos) ;# 533 ""/usr/lib/gcc-lib/i686-redhat-linux/3.2/include/stdio.h"" 3extern int fseeko64 (FILE *__stream, __off64_t __off, int __whence) ;extern __off64_t ftello64 (FILE *__stream) ;extern int fgetpos64 (FILE *__restrict __stream, fpos64_t *__restrict __pos)     ;extern int fsetpos64 (FILE *__stream, __const fpos64_t *__pos) ;extern void clearerr (FILE *__stream) ;extern int feof (FILE *__stream) ;extern int ferror (FILE *__stream) ;extern void clearerr_unlocked (FILE *__stream) ;extern int feof_unlocked (FILE *__stream) ;extern int ferror_unlocked (FILE *__stream) ;extern void perror (__const char *__s) ;extern int sys_nerr;extern __const char *__const sys_errlist[];extern int _sys_nerr;extern __const char *__const _sys_errlist[];extern int fileno (FILE *__stream) ;extern int fileno_unlocked (FILE *__stream) ;extern FILE *popen (__const char *__command, __const char *__modes) ;extern int pclose (FILE *__stream) ;extern char *ctermid (char *__s) ;extern char *cuserid (char *__s) ;struct obstack;extern int obstack_printf (struct obstack *__restrict __obstack,                           __const char *__restrict __format, ...) ;extern int obstack_vprintf (struct obstack *__restrict __obstack,                            __const char *__restrict __format,                            __gnuc_va_list __args) ;extern void flockfile (FILE *__stream) ;extern int ftrylockfile (FILE *__stream) ;extern void funlockfile (FILE *__stream) ;# 640 ""/usr/lib/gcc-lib/i686-redhat-linux/3.2/include/stdio.h"" 3# 1 ""/usr/include/bits/stdio.h"" 1 3# 39 ""/usr/include/bits/stdio.h"" 3extern __inline intvprintf (__const char *__restrict __fmt, __gnuc_va_list __arg){  return vfprintf (stdout, __fmt, __arg);}extern __inline intgetchar (void){  return _IO_getc (stdin);}extern __inline intgetc_unlocked (FILE *__fp){  return ((__fp)->_IO_read_ptr >= (__fp)->_IO_read_end ? __uflow (__fp) : *(unsigned char *) (__fp)->_IO_read_ptr++);}extern __inline intgetchar_unlocked (void){  return ((stdin)->_IO_read_ptr >= (stdin)->_IO_read_end ? __uflow (stdin) : *(unsigned char *) (stdin)->_IO_read_ptr++);}extern __inline intputchar (int __c){  return _IO_putc (__c, stdout);}extern __inline intfputc_unlocked (int __c, FILE *__stream){  return (((__stream)->_IO_write_ptr >= (__stream)->_IO_write_end) ? __overflow (__stream, (unsigned char) (__c)) : (unsigned char) (*(__stream)->_IO_write_ptr++ = (__c)));}extern __inline intputc_unlocked (int __c, FILE *__stream){  return (((__stream)->_IO_write_ptr >= (__stream)->_IO_write_end) ? __overflow (__stream, (unsigned char) (__c)) : (unsigned char) (*(__stream)->_IO_write_ptr++ = (__c)));}extern __inline intputchar_unlocked (int __c){  return (((stdout)->_IO_write_ptr >= (stdout)->_IO_write_end) ? __overflow (stdout, (unsigned char) (__c)) : (unsigned char) (*(stdout)->_IO_write_ptr++ = (__c)));}extern __inline __ssize_tgetline (char **__lineptr, size_t *__n, FILE *__stream){  return __getdelim (__lineptr, __n, '\n', __stream);}extern __inline intfeof_unlocked (FILE *__stream){  return (((__stream)->_flags & 0x10) != 0);}extern __inline intferror_unlocked (FILE *__stream){  return (((__stream)->_flags & 0x20) != 0);}# 641 ""/usr/lib/gcc-lib/i686-redhat-linux/3.2/include/stdio.h"" 2 3# 24 ""config/tc-ppc.c"" 2# 1 ""as.h"" 1# 40 ""as.h""# 1 ""config.h"" 1# 41 ""as.h"" 2# 1 ""../include/bin-bugs.h"" 1# 42 ""as.h"" 2# 77 ""as.h""# 1 ""/usr/include/string.h"" 1 3# 28 ""/usr/include/string.h"" 3# 1 ""/usr/lib/gcc-lib/i686-redhat-linux/3.2/include/stddef.h"" 1 3# 34 ""/usr/include/string.h"" 2 3extern void *memcpy (void *__restrict __dest,                     __const void *__restrict __src, size_t __n) ;extern void *memmove (void *__dest, __const void *__src, size_t __n)     ;extern void *memccpy (void *__restrict __dest, __const void *__restrict __src,                      int __c, size_t __n)     ;extern void *memset (void *__s, int __c, size_t __n) ;extern int memcmp (__const void *__s1, __const void *__s2, size_t __n)     __attribute__ ((__pure__));extern void *memchr (__const void *__s, int __c, size_t __n)      __attribute__ ((__pure__));extern void *rawmemchr (__const void *__s, int __c) __attribute__ ((__pure__));extern void *memrchr (__const void *__s, int __c, size_t __n)      __attribute__ ((__pure__));extern char *strcpy (char *__restrict __dest, __const char *__restrict __src)     ;extern char *strncpy (char *__restrict __dest,                      __const char *__restrict __src, size_t __n) ;extern char *strcat (char *__restrict __dest, __const char *__restrict __src)     ;extern char *strncat (char *__restrict __dest, __const char *__restrict __src,                      size_t __n) ;extern int strcmp (__const char *__s1, __const char *__s2)     __attribute__ ((__pure__));extern int strncmp (__const char *__s1, __const char *__s2, size_t __n)     __attribute__ ((__pure__));extern int strcoll (__const char *__s1, __const char *__s2)     __attribute__ ((__pure__));extern size_t strxfrm (char *__restrict __dest,                       __const char *__restrict __src, size_t __n) ;# 1 ""/usr/include/xlocale.h"" 1 3# 28 ""/usr/include/xlocale.h"" 3typedef struct __locale_struct{  struct locale_data *__locales[13];  const unsigned short int *__ctype_b;  const int *__ctype_tolower;  const int *__ctype_toupper;} *__locale_t;# 109 ""/usr/include/string.h"" 2 3extern int __strcoll_l (__const char *__s1, __const char *__s2, __locale_t __l)     __attribute__ ((__pure__));extern size_t __strxfrm_l (char *__dest, __const char *__src, size_t __n,                           __locale_t __l) ;extern char *strdup (__const char *__s) __attribute__ ((__malloc__));extern char *strndup (__const char *__string, size_t __n)     __attribute__ ((__malloc__));# 155 ""/usr/include/string.h"" 3extern char *strchr (__const char *__s, int __c) __attribute__ ((__pure__));extern char *strrchr (__const char *__s, int __c) __attribute__ ((__pure__));extern char *strchrnul (__const char *__s, int __c) __attribute__ ((__pure__));extern size_t strcspn (__const char *__s, __const char *__reject)     __attribute__ ((__pure__));extern size_t strspn (__const char *__s, __const char *__accept)     __attribute__ ((__pure__));extern char *strpbrk (__const char *__s, __const char *__accept)     __attribute__ ((__pure__));extern char *strstr (__const char *__haystack, __const char *__needle)     __attribute__ ((__pure__));extern char *strcasestr (__const char *__haystack, __const char *__needle)     __attribute__ ((__pure__));extern char *strtok (char *__restrict __s, __const char *__restrict __delim)     ;extern char *__strtok_r (char *__restrict __s,                         __const char *__restrict __delim,                         char **__restrict __save_ptr) ;extern char *strtok_r (char *__restrict __s, __const char *__restrict __delim,                       char **__restrict __save_ptr) ;extern void *memmem (__const void *__haystack, size_t __haystacklen,                     __const void *__needle, size_t __needlelen)     __attribute__ ((__pure__));extern void *__mempcpy (void *__restrict __dest,                        __const void *__restrict __src, size_t __n) ;extern void *mempcpy (void *__restrict __dest,                      __const void *__restrict __src, size_t __n) ;extern size_t strlen (__const char *__s) __attribute__ ((__pure__));extern size_t strnlen (__const char *__string, size_t __maxlen)     __attribute__ ((__pure__));extern char *strerror (int __errnum) ;extern char *strerror_r (int __errnum, char *__buf, size_t __buflen) ;extern void __bzero (void *__s, size_t __n) ;extern void bcopy (__const void *__src, void *__dest, size_t __n) ;extern void bzero (void *__s, size_t __n) ;extern int bcmp (__const void *__s1, __const void *__s2, size_t __n)     __attribute__ ((__pure__));extern char *index (__const char *__s, int __c) __attribute__ ((__pure__));extern char *rindex (__const char *__s, int __c) __attribute__ ((__pure__));extern int ffs (int __i) __attribute__ ((const));extern int ffsl (long int __l) __attribute__ ((const));__extension__ extern int ffsll (long long int __ll)     __attribute__ ((const));extern int strcasecmp (__const char *__s1, __const char *__s2)     __attribute__ ((__pure__));extern int strncasecmp (__const char *__s1, __const char *__s2, size_t __n)     __attribute__ ((__pure__));extern int __strcasecmp_l (__const char *__s1, __const char *__s2,                           __locale_t __loc) __attribute__ ((__pure__));extern int __strncasecmp_l (__const char *__s1, __const char *__s2,                            size_t __n, __locale_t __loc)     __attribute__ ((__pure__));extern char *strsep (char **__restrict __stringp,                     __const char *__restrict __delim) ;extern int strverscmp (__const char *__s1, __const char *__s2)     __attribute__ ((__pure__));extern char *strsignal (int __sig) ;extern char *__stpcpy (char *__restrict __dest, __const char *__restrict __src)     ;extern char *stpcpy (char *__restrict __dest, __const char *__restrict __src)     ;extern char *__stpncpy (char *__restrict __dest,                        __const char *__restrict __src, size_t __n) ;extern char *stpncpy (char *__restrict __dest,                      __const char *__restrict __src, size_t __n) ;extern char *strfry (char *__string) ;extern void *memfrob (void *__s, size_t __n) ;extern char *basename (__const char *__filename) ;# 356 ""/usr/include/string.h"" 3# 1 ""/usr/include/bits/string.h"" 1 3# 357 ""/usr/include/string.h"" 2 3# 1 ""/usr/include/bits/string2.h"" 1 3# 52 ""/usr/include/bits/string2.h"" 3# 1 ""/usr/include/endian.h"" 1 3# 37 ""/usr/include/endian.h"" 3# 1 ""/usr/include/bits/endian.h"" 1 3# 38 ""/usr/include/endian.h"" 2 3# 53 ""/usr/include/bits/string2.h"" 2 3# 217 ""/usr/include/bits/string2.h"" 3extern __inline void *__mempcpy_small (void *, char, char, char, char,                                       __uint16_t, __uint16_t, __uint32_t,                                       __uint32_t, size_t);extern __inline void *__mempcpy_small (void *__dest1,                 char __src0_1, char __src2_1, char __src4_1, char __src6_1,                 __uint16_t __src0_2, __uint16_t __src4_2,                 __uint32_t __src0_4, __uint32_t __src4_4,                 size_t __srclen){  union {    __uint32_t __ui;    __uint16_t __usi;    unsigned char __uc;    unsigned char __c;  } *__u = __dest1;  switch ((unsigned int) __srclen)    {    case 1:      __u->__c = __src0_1;      __u = __extension__ ((void *) __u + 1);      break;    case 2:      __u->__usi = __src0_2;      __u = __extension__ ((void *) __u + 2);      break;    case 3:      __u->__usi = __src0_2;      __u = __extension__ ((void *) __u + 2);      __u->__c = __sr",RESOLVED          FIXED      
8387,Dale Johannesen,[3.3 regression] -finline-limit behavior changed; new inlining flags need doc,"Several new flags to control inlining were committed without documention.  Also,  the behavior of -finline-limit was changed in a surprising way.   A patch for these was submitted but needs to be approved:http://gcc.gnu.org/ml/gcc-patches/2002-10/msg01367.htmlRelease:unknown",RESOLVED          FIXED      
42164,David Daney,"[4.5 Regression] internal compiler error: in simplify_subreg, at simplify-rtx.c:5138","I'm using the latest gcc 4.5 to compile the latest linux kernel(rc8).$ mips64el-unknown-linux-gnu-gcc --versionmips64el-unknown-linux-gnu-gcc (GCC) 4.5.0 20091123 (experimental)and encountered this error:$ make ARCH=mips CROSS_COMPILE=mips64el-unknown-linux-gnu- mm/rmap.o  CHK     include/linux/version.h  CHK     include/linux/utsrelease.h  SYMLINK include/asm -> include/asm-mips  Checking missing-syscalls for N32  CALL    scripts/checksyscalls.sh  Checking missing-syscalls for O32  CALL    scripts/checksyscalls.sh  CALL    scripts/checksyscalls.sh  CC      mm/rmap.omm/rmap.c: In function 'try_to_unmap_one':mm/rmap.c:860:1: internal compiler error: in simplify_subreg, atsimplify-rtx.c:5138Please submit a full bug report,I have tried to find the exact place which introduced this error and atlast found out this line of that file:818               swp_entry_t entry = { .val = page_private(page) };If I change that line to:        swp_entry_t entry = { .val = 1 };the error will go away.and I found that page_privete(page) is something like this:include/linux/mm.h:228 #define page_private(page)              ((page)->private)So, I moved that (page)->private to the above directly, and try it with:            swp_entry_t entry = { .val = ((page)->private) };and             swp_entry_t entry = { .val = (page)->private };and            swp_entry_t entry = { .val = page->private };and even tried with:             swp_entry_t entry;            entry.val = page->private;  All of them failed, at last, I found the line of gcc:5130 /* Simplify SUBREG:OUTERMODE(OP:INNERMODE, BYTE)5131    Return 0 if no simplifications are possible.  */5132 rtx5133 simplify_subreg (enum machine_mode outermode, rtx op, 5134                  enum machine_mode innermode, unsigned int byte)5135 {5136   /* Little bit of sanity checking.  */5137   gcc_assert (innermode != VOIDmode);5138   gcc_assert (outermode != VOIDmode);      --> This line.....5139   gcc_assert (innermode != BLKmode);5140   gcc_assert (outermode != BLKmode);",RESOLVED          FIXED      
40519,David Daney,[4.5 Regression] ICE with -O2 -ftracer __builtin_unreachable(),"> cat bug.ivoid f(int i, int j, int k) {        if (i == 0) k = 0;        if (j == 0) __builtin_unreachable();        if (k == 0) __builtin_unreachable();}> gcc -O2 -ftracer bug.ibug.i: In function ‘f’:bug.i:5:1: internal compiler error: Segmentation faultUsing SVN revision 148787.",RESOLVED          FIXED      
40445,David Daney,g++   void f() { __builtin_unreachable(); },"Compiling the single line programvoid f() { __builtin_unreachable(); }works fine with gcc, but triggers an ICE when compiled with g++unreachable.c:1:37: internal compiler error: in remove_insn, at emit-rtl.c:3796I'm using SVN revision 148487.",RESOLVED          FIXED      
39079,David Daney,MIPS: __builtin___clear_cache() broken on SMP ISA_HAS_SYNCI systems.,"We expand __builtin___clear_cache() to a 'synci' instruction on ISA_HAS_SYNCI systems, which invalidates the icache only on the local CPU.On an SMP system, the caches on all CPUs should be invalidated.  To achieve this we need to drop back to the old way of doing things by using the cache flush system call.",RESOLVED          FIXED      
39252,David Daney,Request new feature __builtin_unreachable (),"In the Linux kernel, we use assembly constructs (asm volatile) which trap or otherwise terminate execution.  gcc doesn't know about this, so it doesn't terminate its flow analysis.  These assembly constructs are more complex than a simple __builtin_trap(); will permit -- we have tried using assembly constructs in conjunction with __builtin_trap(); but that relies too much on undefined behaviour.A much better solution would be to give us __builtin_not_reached(); which is simply an annotation truncating the flow of control at that point.  You can think of it from an implementation perspective as __builtin_trap(); that doesn't actually generate any code.  This allows any arbitrary assembly that truncates the flow of control to be annotated as such, without the overhead of a compiler-generated catch loop which is never actually reached.",RESOLVED          FIXED      
37593,David Daney,-mlong-calls doesn't affect calls to _mcount generated with -pg,"$ cat c.c void blurb(void){}$ mips-linux-gcc -O2 -S -fno-pic -mno-abicalls c.c$ cat c.s 	.file	1 ""c.c""	.section .mdebug.abi32	.previous	.gnu_attribute 4, 1	.text	.align	2	.globl	blurb	.ent	blurb	.type	blurb, @functionblurb:	.set	nomips16	.frame	$sp,0,$31		# vars= 0, regs= 0/0, args= 0, gp= 0	.mask	0x00000000,0	.fmask	0x00000000,0	.set	noat	move	$1,$31		# save current return address	subu	$sp,$sp,8		# _mcount pops 2 words from  stack	jal	_mcount	.set	at	j	$31	.end	blurb	.ident	""GCC: (GNU) 4.3.0""$This breaks loadable kernel modules on Linux where _mcount is defined in the kernel itself thus outside the range of a jal instruction.",RESOLVED          FIXED      
36252,David Daney,OutOfMemoryError on simple text conversion.,"libgcj 4.3.0 as well as 3.4.3 and probably everything inbetween will get OOM on this simple program when run on glibc based systems:---------->8------------------import java.io.UnsupportedEncodingException;public class TextProb{  public static void main(String[] args)  {    try {      byte[] txt = new byte[] { -55, 87, -55, -42, -55, -20 };      String s = new String(txt, 0, 6, ""MS932"");      System.out.println(s);    } catch (UnsupportedEncodingException e) {      e.printStackTrace();    }  }}---------------->8------------------------I am testing a patch",RESOLVED          FIXED      
34144,David Daney,[4.3 Regression]  Revision 130005 causes bootstrap failure with --disable-checking,"On Linux/i686 and Linux/x86-64, revision 130005 causes bootstrapfailure with --disable-checking.",RESOLVED          FIXED      
32406,David Daney,[4.3 Regression] MIPS: FAIL in nestfunc-6.c at -O3,"Build from svn r125825 with:http://gcc.gnu.org/viewcvs?view=rev&revision=125852applied.Configured: ../trunk/configure --target=mipsel-linux --with-sysroot=/usr/local/mipsel-linux-test --prefix=/usr/local/mipsel-linux-test --with-arch=mips32 --with-float=soft --disable-java-awt --without-x --disable-tls --enable-__cxa_atexit --disable-jvmpi --disable-libmudflap --enable-languages=c,c++gcc.c-torture/execute/nestfunc-6.c is FAILing at -O2, -O3, and -Os.  This is a regression from:http://gcc.gnu.org/ml/gcc-testresults/2007-06/msg00546.htmlThis is the test case:-----------------------typedef __SIZE_TYPE__ size_t;extern void abort (void);extern void exit (int);extern void qsort(void *, size_t, size_t, int (*)(const void *, const void *));int main (){  __label__ nonlocal;  int compare (const void *a, const void *b)  {    goto nonlocal;  }  char array[3];  qsort (array, 3, 1, compare);  abort (); nonlocal:  exit (0);}------------------------------------------------Here is the generated assembly: /home/daney/gccsvn/mipsel-trunk/gcc/xgcc -B/home/daney/gccsvn/mipsel-trunk/gcc/ -O3 -S nestfunc-6.c-------------------------------	.file	1 ""nestfunc-6.c""	.section .mdebug.abi32	.previous	.abicalls	.rdata	.align	2$LTRAMP0:	.word	0x03e00821		# move   $1,$31	.word	0x04110001		# bgezal $0,.+8	.word	0x00000000		# nop	.word	0x8fe30014		# lw     $3,20($31)	.word	0x8fe20018		# lw     $2,24($31)	.word	0x0060c821		# move   $25,$3	.word	0x00600008		# jr     $3	.word	0x0020f821		# move   $31,$1	.word	0x00000000		# <function address>	.word	0x00000000		# <static chain value>	.globl	_flush_cache	.text	.align	2	.globl	main	.ent	main	.type	main, @functionmain:	.frame	$sp,96,$31		# vars= 64, regs= 2/0, args= 16, gp= 8	.mask	0xc0000000,-4	.fmask	0x00000000,0	.set	noreorder	.set	nomacro		lui	$28,%hi(__gnu_local_gp)	addiu	$sp,$sp,-96	addiu	$28,$28,%lo(__gnu_local_gp)	sw	$31,92($sp)	sw	$fp,88($sp)	.cprestore	16	lui	$2,%hi($LTRAMP0)	addiu	$6,$2,%lo($LTRAMP0)	addiu	$3,$sp,40	addiu	$2,$sp,24	sw	$2,84($sp)	sw	$3,80($sp)	sw	$2,28($sp)	sw	$sp,32($sp)	move	$7,$3	addiu	$8,$6,32$L2:	lw	$2,0($6)	lw	$3,4($6)	lw	$4,8($6)	lw	$5,12($6)	addiu	$6,$6,16	sw	$2,0($7)	sw	$3,4($7)	sw	$4,8($7)	sw	$5,12($7)	bne	$6,$8,$L2	addiu	$7,$7,16	lw	$2,4($6)	lw	$4,0($6)	sw	$2,4($7)	sw	$4,0($7)	lw	$2,80($sp)	lui	$3,%hi(compare.1584)	addiu	$3,$3,%lo(compare.1584)	sw	$3,32($2)	lw	$3,80($sp)	addiu	$2,$sp,28	sw	$2,36($3)	lw	$25,%call16(_flush_cache)($28)	lw	$4,80($sp)	li	$5,40			# 0x28	jalr	$25	li	$6,3			# 0x3	lw	$28,16($sp)	lw	$4,84($sp)	lw	$25,%call16(qsort)($28)	lw	$7,80($sp)	li	$5,3			# 0x3	jalr	$25	li	$6,1			# 0x1	lw	$28,16($sp)	lw	$25,%call16(abort)($28)	jalr	$25	nop$L3:$L4:	lw	$25,%call16(exit)($28)	jalr	$25	move	$4,$0	.set	macro	.set	reorder	.end	main	.align	2	.ent	compare.1584	.type	compare.1584, @functioncompare.1584:	.frame	$fp,8,$31		# vars= 0, regs= 1/0, args= 0, gp= 0	.mask	0x40000000,-8	.fmask	0x00000000,0	.set	noreorder	.set	nomacro		addiu	$sp,$sp,-8	sw	$fp,0($sp)	lw	$fp,0($2)	lw	$sp,4($2)	lui	$2,%hi($L3)	addiu	$2,$2,%lo($L3)	j	$2	nop	.set	macro	.set	reorder	.end	compare.1584	.ident	""GCC: (GNU) 4.3.0 20070618 (experimental)""------------------------------------------------Note that $gp ($28) is not restored at $L3 where it is used.  The compare function does 'goto nonlocal;' which is a jump to $L3, but $gp will have the wrong value and must be restored.This worked before the dataflow merge because the compare function would load $gp (unnecessarily).I think the fix is to load $gp at $L3.",RESOLVED          FIXED      
32437,David Daney,[4.3 Regression] MIPS: FAIL in gcc.dg/cleanup-[8|9|10|11].c,"Revision: 125825 with the patch 32406-v1.patch from PR 32406 applied.Configured: ../trunk/configure --target=mipsel-linux --with-sysroot=/usr/local/mipsel-linux-test --prefix=/usr/local/mipsel-linux-test --with-arch=mips32 --with-float=soft --disable-java-awt --without-x --disable-tls --enable-__cxa_atexit --disable-jvmpi --disable-libmudflap --enable-languages=c,c++These tests have new failures since: http://gcc.gnu.org/ml/gcc-testresults/2007-06/msg00546.htmlFAIL: gcc.dg/cleanup-10.c execution testFAIL: gcc.dg/cleanup-11.c execution testFAIL: gcc.dg/cleanup-8.c execution testFAIL: gcc.dg/cleanup-9.c execution testIt is possible that libgcc_s.so.1 is being miscompiled as substituting an older version of libgcc_s.so.1 seems to fix the problem.",RESOLVED          FIXED      
28313,David Daney,libffi has not been ported to mips64-linux-gnu,[forwarded from http://bugs.debian.org/358235]libffi has AFAIR no support for NewABI.,RESOLVED          FIXED      
33479,David Daney,SyncTest Intermittent failing on MIPS,As noted in:http://gcc.gnu.org/ml/gcc-testresults/2007-09/msg00818.htmlWith this configuration:../trunk/configure --prefix=/home/ddaney/gccsvn/trunk-install --target=mipsel-linux --build=mipsel-linux --host=mipsel-linux --with-gmp=/home/ddaney/mp --with-mpfr=/home/ddaney/mp --with-arch=sb1 --disable-java-awt --without-x --enable-__cxa_atexit --disable-jvmpi --disable-staticThe SyncTest test fails sometimes.,RESOLVED          FIXED      
33324,David Daney,[4.3 Regression] ICE on new array of objects with virtual destructors.,"On the trunk r128169, configured thusly:$ ../clean/configure --target=armv5tl-montavista-linuxeabi --prefix=/home/daney/mvl_ti/gcj --with-sysroot=/home/daney/mvl_ti/mv_pro_4.0/montavista/pro/devkit/arm/v5t_le/target --enable-languages=c,c++ --with-float=soft --disable-java-awt --without-x --disable-jvmpi --enable-__cxa_atexit --disable-sjlj-exceptionsI get the following ICE:$ /home/daney/gccsvn/arm-clean/gcc/g++ -B/home/daney/gccsvn/arm-clean/gcc/ -S foo.ccfoo.cc: In constructor ‘C::C(int)’:foo.cc:15: internal compiler error: in build2_stat, at tree.c:3110Please submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.There is no ICE on i686-pc-linux-gnu native build.Test case:----foo.cc-----------class A{public:    virtual ~A(){};};class C{public:    A *q;public:	    C(int x)    {        q = new A[x];    }};--------------------",RESOLVED          FIXED      
23935,David Daney,$PREFIX/include/ffi.h needs to go to a target- and -version-dependent location,"Currently ffi.h is installed into $PREFIX/include.  This breaks cases where different versions of GCC, or copies of GCC for different targets are installed into the same $PREFIX.",RESOLVED          FIXED      
32313,David Daney,[4.3 Regression] Bootstrap failure running gengtype in stage 2.,"At revision 125625 (and 125652) There is a bootstrap failure due to a SIGSEGV while running gengtype in stage 2.A successful bootstrap was done for r125494.I think the dataflow branch merge is a likely culprit here.The problem is that $gp is not being restored before a call to a local function.  Here is the dissassembly:00003498 <write_func_for_structure>:    3498:	3c1c0000 	lui	gp,0x0			3498: R_MIPS_HI16	__gnu_local_gp    349c:	27bdff58 	addiu	sp,sp,-168    34a0:	279c0000 	addiu	gp,gp,0			34a0: R_MIPS_LO16	__gnu_local_gp    34a4:	afbf00a4 	sw	ra,164(sp)    34a8:	afbe00a0 	sw	s8,160(sp)    34ac:	afb7009c 	sw	s7,156(sp)    34b0:	afb60098 	sw	s6,152(sp)    34b4:	afb50094 	sw	s5,148(sp)    34b8:	afb40090 	sw	s4,144(sp)    34bc:	afb3008c 	sw	s3,140(sp)    34c0:	afb20088 	sw	s2,136(sp)    34c4:	afb10084 	sw	s1,132(sp)    34c8:	afb00080 	sw	s0,128(sp)    34cc:	afbc0020 	sw	gp,32(sp)    34d0:	8cb00014 	lw	s0,20(a1)    34d4:	00c0a021 	move	s4,a2    34d8:	afa400a8 	sw	a0,168(sp)    34dc:	afa700b4 	sw	a3,180(sp)    34e0:	00a0f021 	move	s8,a1    34e4:	00002021 	move	a0,zero    34e8:	24070004 	li	a3,4    34ec:	24080006 	li	t0,6    34f0:	2406ffd8 	li	a2,-40    34f4:	02841021 	addu	v0,s4,a0    34f8:	12800007 	beqz	s4,3518 <write_func_for_structure+0x80>    34fc:	2484fffc 	addiu	a0,a0,-4    3500:	8c430024 	lw	v1,36(v0)    3504:	10600004 	beqz	v1,3518 <write_func_for_structure+0x80>    3508:	00000000 	nop    350c:	8c620000 	lw	v0,0(v1)    3510:	1047012e 	beq	v0,a3,39cc <write_func_for_structure+0x534>    3514:	00000000 	nop    3518:	1486fff7 	bne	a0,a2,34f8 <write_func_for_structure+0x60>    351c:	02841021 	addu	v0,s4,a0    3520:	8f990000 	lw	t9,0(gp)			3520: R_MIPS_CALL16	memset    3524:	27a20028 	addiu	v0,sp,40    3528:	00002821 	move	a1,zero    352c:	24060048 	li	a2,72    3530:	00402021 	move	a0,v0    3534:	0320f809 	jalr	t9    3538:	afa20078 	sw	v0,120(sp)    353c:	0c000000 	jal	0 <get_lang_bitmap>			353c: R_MIPS_26	get_output_file_with_visibility    3540:	02002021 	move	a0,s0After the call to memset the gp should be restored.  It is required by the call to get_output_file_with_visibility.",RESOLVED          FIXED      
31975,David Daney,[4.3 Regression] segfault in try_split on mips during bootstrap,"I'm getting a bootstrap error on mips with 4.3 SVN 20070515 revision 124745.The compiler segfaults when compiling libstdc++-v3/src/strstream.cc with:Program received signal SIGSEGV, Segmentation fault.0x0074701c in try_split (pat=<value optimized out>, trial=0x2bfb31e0, last=1)    at ../../src/gcc/emit-rtl.c:32863286      for (tem = NEXT_INSN (before); tem != after; tem = NEXT_INSN (tem))(gdb) where#0  0x0074701c in try_split (pat=<value optimized out>, trial=0x2bfb31e0, last=1)    at ../../src/gcc/emit-rtl.c:3286#1  0x008cbcb8 in split_insn (insn=0x2bfb31e0) at ../../src/gcc/recog.c:2742#2  0x008cbe78 in split_all_insns_noflow () at ../../src/gcc/recog.c:2888#3  0x00b6b638 in mips_output_mi_thunk (file=0xece868, thunk_fndecl=<value optimized out>, delta=0,    vcall_offset=-12, function=0x2bfb4000) at ../../src/gcc/config/mips/mips.c:7275#4  0x0059bd40 in use_thunk (thunk_fndecl=0x2baa6600, emit_p=<value optimized out>)    at ../../src/gcc/cp/method.c:441#5  0x005ab854 in expand_body (fn=0x2ba9e700) at ../../src/gcc/cp/semantics.c:3084#6  0x00b74090 in cgraph_expand_function (node=0x2ba9ea00) at ../../src/gcc/cgraphunit.c:1086#7  0x00b77d28 in cgraph_optimize () at ../../src/gcc/cgraphunit.c:1155#8  0x0051990c in cp_write_global_declarations () at ../../src/gcc/cp/decl2.c:3308#9  0x0095c08c in toplev_main (argc=<value optimized out>, argv=<value optimized out>)    at ../../src/gcc/toplev.c:1064#10 0x2abee050 in __libc_start_main () from /lib/libc.so.6#11 0x0043d9bc in _ftext ()(gdb)Command line:(sid)1846:tbm@bigsur: ..linux-gnu/libstdc++-v3/src] /home/tbm/src/gcc-snapshot-20070515/build/./gcc/xgcc -shared-libgcc -B/home/tbm/src/gcc-snapshot-20070515/build/./gcc -nostdinc++ -L/home/tbm/src/gcc-snapshot-20070515/build/mips-linux-gnu/libstdc++-v3/src -L/home/tbm/src/gcc-snapshot-20070515/build/mips-linux-gnu/libstdc++-v3/src/.libs -B/usr/lib/gcc-snapshot/mips-linux-gnu/bin/ -B/usr/lib/gcc-snapshot/mips-linux-gnu/lib/ -isystem /usr/lib/gcc-snapshot/mips-linux-gnu/include -isystem /usr/lib/gcc-snapshot/mips-linux-gnu/sys-include -I/home/tbm/src/gcc-snapshot-20070515/build/mips-linux-gnu/libstdc++-v3/include/mips-linux-gnu -I/home/tbm/src/gcc-snapshot-20070515/build/mips-linux-gnu/libstdc++-v3/include -I/home/tbm/src/gcc-snapshot-20070515/src/libstdc++-v3/libsupc++ -fno-implicit-templates -Wall -Wextra -Wwrite-strings -Wcast-qual -fdiagnostics-show-location=once -ffunction-sections -fdata-sections -g -O2 -D_GNU_SOURCE -I/home/tbm/src/gcc-snapshot-20070515/build/mips-linux-gnu/libstdc++-v3/include/backward -Wno-deprecated -c ../../../../src/libstdc++-v3/src/strstream.cc -o strstream.o../../../../src/libstdc++-v3/src/strstream.cc: In member function 'void std::strstream::_ZTv0_n12_NSt9strstreamD0Ev()':../../../../src/libstdc++-v3/src/strstream.cc:418: internal compiler error: Segmentation faultPlease submit a full bug report,with preprocessed source if appropriate.",RESOLVED          FIXED      
29324,David Daney,add wait handling hook,"Currently libgcj assumes it can waitpid(-1,...).This interacts poorly with other libraries which maywant to interact with subprocesses; for instance glibhas an API for spawning and waiting for children, andfrysk has to work around this problem (by disallowingthe use of Process).libgcj ought to have a way to hook into the low-levelprocess code so that it can interact gracefully withother libraries.  I think it is ok if this is CNI only.",RESOLVED          FIXED      
23758,David Daney,java::lang::ConcreteProcess::nativeSpawn unsafe,"java::lang::ConcreteProcess::nativeSpawn appears to call several functions that are not async-signal-safe between the fork and exec in the child, including _Jv_Malloc.  This is unsafe by Posix rules.  I'm unsure whether it can deadlock on Linux.These actions should be performed before the fork() call.  I don't see why that would be particularly difficult to do here.To my knowledge, the problem may never have been observed in practice.  I noticed it while reading the code, and didn't want it to get lost.",RESOLVED          FIXED      
31228,David Daney,Race condition between setting close-on-exec and Runtime.exec(),Runtime.exec() could fork/exec the external process between the time a file descriptor is opened and and when close-on-exec is set on it.,RESOLVED          FIXED      
29805,David Daney,[4.2/4.3 Regression] Write past end of array in java/typeck.c,With a bootstrap build of the 4.2 branch jc1 gets SIGSEGV compiling newarray_overflow.java from the java testsuite.This is the command to reproduce:./jc1 -fclasspath=../mipsel-unknown-linux-gnu/libjava/libgcj-4.3.0.jar ../../gcc/libjava/testsuite/libjava.lang/newarray_overflow.java -fhash-synchronization -fno-use-divide-subroutine -fuse-boehm-gc -fnon-call-exceptions -fkeep-inline-functions -quiet -dumpbase newarray_overflow.java -march=mips32 -msoft-float -mno-shared -auxbase newarray_overflow -g1 -version -o /junk/newarray_overflow.sIf I recompile java/typeck.c with -O0 there is no SIGSEGVThe same thing on the trunk (4.3) except 'internal compiler error: tree check' instead of SIGSEGV.A cross compiler built on i686-pc-linux-gnu does not have the problem.Looking at gcc-testresults leads me to think that this has been happening since at least June 2006.,RESOLVED          FIXED      
29519,David Daney,[4.2/4.3 Regression] Bad code on MIPS with -fnon-call-exceptions,"This is a reduced testcase from a failure I am seeing on libgcj testsuite.  java.lang.Class.isPrimitive() is being compiled incorrectly.This is a regression from 3.4.3.Configured as: ../clean/configure   --target=mipsel-linux --with-sysroot=/usr/local/mipsel-linux-test --prefix=/usr/local/mipsel-linux-test --with-arch=mips32 --with-float=soft --with-system-zlib --disable-java-awt --without-x --disable-libmudflap --disable-libgomp --disable-jvmpi --disable-tls --enable-languages=c,c++,javaon i686-pc-linux-gnuHere is the test case in C  isprim.c:-------------8<------------struct F;struct C{    struct F *f13;};int isM1(struct C *t){    return t->f13 == (struct F*)-1;}-------------8<------------$ mipsel-linux-gcc -O1 -S isprim.c -o isprim.sGenerates this correct code:	lw	$2,0($4)	addiu	$2,$2,1	j	$31	sltu	$2,$2,1$ mipsel-linux-gcc -fnon-call-exceptions -O1 -S isprim.c -o isprim.sGenerates this incorrect code that unconditionally returns 0:	lw	$2,0($4)	.set	noreorder	.set	nomacro	j	$31	move	$2,$0	.set	macro	.set	reorder",RESOLVED          FIXED      
28426,David Daney,libgcj header files installed in wrong location in cross build,libgcj headers are installed in: GCC_PREFIX/include/c++/4.2.0For a cross build g++ looks in GCC_PREFIX/${target}/include/c++/4.2.0The result is that (by default) cni include files like gcj/cni.h cannot be found by g++.For a native build there is no problem.,RESOLVED          FIXED      
25816,David Daney,"[4.1/4.2 Regression] Configure detects TLS, but glibc does not support it.","I have a mipsel-linux system with glibc 2.3.3 which does not support TLS.  Due to bugs in earlier binutils versions, I must use a binutils version that does support TLS on mips.  The GCC configure does an assembler check to see if TLS is supported and then generates code based on that decision.When this happens with no TLS support in glibc, there is a link error due to lack of TLS support in glibc.I am testing a patch that adds a --disable-tls option to configure to force it to not use TLS.This was not a problem on 4.0 and earlier as there was no mips TLS support in GCC in those versions.  I am calling it a regression as I used to be able to use GCC and with 4.1 I cannot.The test case is to compile any java program with mipsel-linux-gcj.  A linker error results.",RESOLVED          FIXED      
15430,David Daney,Cannot interrupt blocking I/O calls with close(),"When close() is called on a Socket or ServerSocket, it should cause aSocketException to be thrown on any thread which is blocked on I/O operations onthat socket.In libgcj, no exception is thrown, and the I/O thread remains blocked eventhough the socket has been closed.The attached test case demonstrates the problem for accept() and read(). Theproblem most likely occurs for other calls such as write() and connect() aswell. This test case should be extended to cover these other calls, and added tomauve.",RESOLVED          FIXED      
18220,David Daney,"Test case libjava.lang/Process_3 does not end if ""sed"" not available","libjava.lang/Process_3.java should be changed to do something other than hangforever if ""sed"" is not available on the target test platform.",RESOLVED          FIXED      
20389,David Daney,[4.0/4.1 Regression] BufferedInputStream gets ArrayIndexOutOfBoundsExeception, ,RESOLVED          FIXED      
13141,David Daney,FAIL: InvokeReturn output - source compiled test <libffi problem>,"$ mipsel-linux-gcj --versionmipsel-linux-gcj (GCC) 3.4 20031119 (experimental)configured as:../gcccvsw/gcc/configure  --host=i686-pc-linux-gnu --target=mipsel-linux--enable-languages=c,c++,java--with-headers=/home/mipsel-linux/mipsel-linux/include --prefix=/home/testcvs/--with-float=soft --with-arch=mips32make check in libjava results in:<...>Executing on host:/home/daney/mipsel-gcccvs/mipsel-linux/libjava/testsuite/../libtool --silent--tag=GCJ --mode=link /home/daney/mipsel-gcccvs/gcc/gcj-B/home/daney/mipsel-gcccvs/gcc/ --encoding=UTF-8-B/home/daney/mipsel-gcccvs/mipsel-linux/./libjava//home/daney/gcccvsw/gcc/libjava/testsuite/libjava.lang/InvokeReturn.java  -no-install --main=InvokeReturn -g -L/home/daney/mipsel-gcccvs/mipsel-linux/./libjava/.libs -lm   -o/home/daney/mipsel-gcccvs/mipsel-linux/libjava/testsuite/InvokeReturn.exe   (timeout = 300)PASS: InvokeReturn compilation from sourceput /home/daney/mipsel-gcccvs/mipsel-linux/libjava/testsuite/InvokeReturn.exe/tmp/InvokeRe turn.exe.6071local: /home/daney/mipsel-gcccvs/mipsel-linux/libjava/testsuite/InvokeReturn.exeremote: /tmp/InvokeReturn.exe.6071227 Entering Passive Mode (192,168,0,112,90,28)150 Opening BINARY mode data connection for /tmp/InvokeReturn.exe.6071.226 Transfer complete.60974 bytes sent in 0.0038 secs (1.6e+04 Kbytes/sec)ftp> site chmod 0755 /tmp/InvokeReturn.exe.6071200 CHMOD command successful.ftp> Executing on proton: /tmp/InvokeReturn.exe.6071    (timeout = 300)Executing on proton: rm -f  /tmp/InvokeReturn.exe.6071    (timeout = 300)Executed/home/daney/mipsel-gcccvs/mipsel-linux/libjava/testsuite/InvokeReturn.exe, status 0truefalsec56343597383750.00.0PASS: InvokeReturn execution - source compiled testFAIL: InvokeReturn output - source compiled test<...>It looks like long, float, and double return values are not correct.",RESOLVED          FIXED      
11801,David Daney,Problems with Process.waitFor() and exitValue(),"There are some bugs with libgcj's POSIX Runtime.exec implementation.Problem #1: Process.exitValue() only returns the processes exit code if waitFor() has already been called, because only waitFor() ever calls waitpid.Problem #2: Process.waitFor() and Process.exitValue() do not work if they are called from a thread other than the thread which called Runtime.exec().  This seems to be because the pid created in Runtime.exec() is only considered a child of the thread which created it.Currently the problem can be hidden in some cases because Process.waitFor() will actually return 0 if waitpid returns an error other than EINTR.Possible solution: SIGCHLD handler?",RESOLVED          FIXED      
14198,David Daney,[3.4.0][MIPS]FAIL: gcc.dg/cpp/assert4.c (test for excess errors),"$ mipsel-linux-gcc --versionmipsel-linux-gcc (GCC) 3.4.0 20040214 (prerelease)Copyright (C) 2004 Free Software Foundation, Inc.This is free software; see the source for copying conditions.  There is NOwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.Configured as:../gcccvsw/gcc/configure  --host=i686-pc-linux-gnu --target=mipsel-linux--enable-languages=c,c++,java--with-headers=/home/mipsel-linux/mipsel-linux/include --with-arch=mips32--with-float=soft --prefix=/home/testcvsFails gcc.dg/cpp/assert4.c because the #cpu(mips) assert fails for this platform.I will probably post a patch soon.",RESOLVED          FIXED      
7934,John David Anglin,[HP UX] definition of static member for template class missing in obj file,The definition of a static data member of a template class seems to be missing in produced obj file. HP's LD will report unresolved symbol for that static member.nm of the object file find the symbol to be 'U'.The same version on SunOS seems to work fine as there is a week object defined in object file.Release:gcc 3.1.1 (gcc or g++ compiler for C++)Environment:hp-ux 11,RESOLVED          FIXED      
9843,John David Anglin,[HPUX] -static still leaves the linker looking for shared library code,The -static option to g++ results in the following error message from the linker:/usr/ccs/bin/ld: Unsatisfied symbols:   shl_load (code)   shl_unload (code)   shl_findsym (code)For at least any file including <iostream>Release:GCC 3.2.1Environment:HP-UX B.11.11 U 9000/785How-To-Repeat:g++ -static -o hola hola.cpp,RESOLVED          FIXED      
55195,John David Anglin,[4.8 Regression] shorten_branches generates incorrect forward branch distances,"/bin/sh ./libtool --tag=GCJ   --mode=compile /home/dave/gnu/gcc/objdir/./gcc/gcj -B/home/dave/gnu/gcc/objdir/hppa-linux-gnu/libjava/ -B/home/dave/gnu/gcc/objdir/./gcc/ -B/home/dave/opt/gnu/gcc/gcc-4.8.0/hppa-linux-gnu/bin/ -B/home/dave/opt/gnu/gcc/gcc-4.8.0/hppa-linux-gnu/lib/ -isystem /home/dave/opt/gnu/gcc/gcc-4.8.0/hppa-linux-gnu/include -isystem /home/dave/opt/gnu/gcc/gcc-4.8.0/hppa-linux-gnu/sys-include    -fclasspath= -fbootclasspath=../../../gcc/libjava/classpath/lib --encoding=UTF-8 -Wno-deprecated -fbootstrap-classes -g -O2  -c -o gnu/javax/swing/text/html/parser/HTML_401F.lo -fsource-filename=/home/dave/gnu/gcc/objdir/hppa-linux-gnu/libjava/classpath/lib/classes -MT gnu/javax/swing/text/html/parser/HTML_401F.lo -MD -MP -MF gnu/javax/swing/text/html/parser/HTML_401F.deps @gnu/javax/swing/text/html/parser/HTML_401F.listlibtool: compile:  /home/dave/gnu/gcc/objdir/./gcc/gcj -B/home/dave/gnu/gcc/objdir/hppa-linux-gnu/libjava/ -B/home/dave/gnu/gcc/objdir/./gcc/ -B/home/dave/opt/gnu/gcc/gcc-4.8.0/hppa-linux-gnu/bin/ -B/home/dave/opt/gnu/gcc/gcc-4.8.0/hppa-linux-gnu/lib/ -isystem /home/dave/opt/gnu/gcc/gcc-4.8.0/hppa-linux-gnu/include -isystem /home/dave/opt/gnu/gcc/gcc-4.8.0/hppa-linux-gnu/sys-include -fclasspath= -fbootclasspath=../../../gcc/libjava/classpath/lib --encoding=UTF-8 -Wno-deprecated -fbootstrap-classes -g -O2 -c -fsource-filename=/home/dave/gnu/gcc/objdir/hppa-linux-gnu/libjava/classpath/lib/classes -MT gnu/javax/swing/text/html/parser/HTML_401F.lo -MD -MP -MF gnu/javax/swing/text/html/parser/HTML_401F.deps @gnu/javax/swing/text/html/parser/HTML_401F.list  -fPIC -o gnu/javax/swing/text/html/parser/.libs/HTML_401F.o/tmp/cc4e6qnd.s: Assembler messages:/tmp/cc4e6qnd.s:79330: Error: Field out of range [-8192..8191] (8316)./tmp/cc4e6qnd.s:79362: Error: Field out of range [-8192..8191] (8280)./tmp/cc4e6qnd.s:79395: Error: Field out of range [-8192..8191] (8244)./tmp/cc4e6qnd.s:79428: Error: Field out of range [-8192..8191] (8208).make[3]: *** [gnu/javax/swing/text/html/parser/HTML_401F.lo] Error 1/bin/sh ./libtool --tag=GCJ   --mode=compile /home/dave/gnu/gcc/objdir/./gcc/gcj -B/home/dave/gnu/gcc/objdir/hppa-linux-gnu/libjava/ -B/home/dave/gnu/gcc/objdir/./gcc/ -B/home/dave/opt/gnu/gcc/gcc-4.8.0/hppa-linux-gnu/bin/ -B/home/dave/opt/gnu/gcc/gcc-4.8.0/hppa-linux-gnu/lib/ -isystem /home/dave/opt/gnu/gcc/gcc-4.8.0/hppa-linux-gnu/include -isystem /home/dave/opt/gnu/gcc/gcc-4.8.0/hppa-linux-gnu/sys-include    -fclasspath= -fbootclasspath=../../../gcc/libjava/classpath/lib --encoding=UTF-8 -Wno-deprecated -fbootstrap-classes -g -O2  -c -o gnu/java/nio/charset.lo -fsource-filename=/home/dave/gnu/gcc/objdir/hppa-linux-gnu/libjava/classpath/lib/classes -MT gnu/java/nio/charset.lo -MD -MP -MF gnu/java/nio/charset.deps @gnu/java/nio/charset.listlibtool: compile:  /home/dave/gnu/gcc/objdir/./gcc/gcj -B/home/dave/gnu/gcc/objdir/hppa-linux-gnu/libjava/ -B/home/dave/gnu/gcc/objdir/./gcc/ -B/home/dave/opt/gnu/gcc/gcc-4.8.0/hppa-linux-gnu/bin/ -B/home/dave/opt/gnu/gcc/gcc-4.8.0/hppa-linux-gnu/lib/ -isystem /home/dave/opt/gnu/gcc/gcc-4.8.0/hppa-linux-gnu/include -isystem /home/dave/opt/gnu/gcc/gcc-4.8.0/hppa-linux-gnu/sys-include -fclasspath= -fbootclasspath=../../../gcc/libjava/classpath/lib --encoding=UTF-8 -Wno-deprecated -fbootstrap-classes -g -O2 -c -fsource-filename=/home/dave/gnu/gcc/objdir/hppa-linux-gnu/libjava/classpath/lib/classes -MT gnu/java/nio/charset.lo -MD -MP -MF gnu/java/nio/charset.deps @gnu/java/nio/charset.list  -fPIC -o gnu/java/nio/.libs/charset.o/tmp/ccKzEAz7.s: Assembler messages:/tmp/ccKzEAz7.s:105074: Error: Field out of range [-8192..8191] (9344)./tmp/ccKzEAz7.s:105079: Error: Field out of range [-8192..8191] (9288)./tmp/ccKzEAz7.s:105084: Error: Field out of range [-8192..8191] (9232)./tmp/ccKzEAz7.s:105089: Error: Field out of range [-8192..8191] (9176)./tmp/ccKzEAz7.s:105094: Error: Field out of range [-8192..8191] (9120)./tmp/ccKzEAz7.s:105099: Error: Field out of range [-8192..8191] (9064)./tmp/ccKzEAz7.s:105104: Error: Field out of range [-8192..8191] (9008)./tmp/ccKzEAz7.s:105109: Error: Field out of range [-8192..8191] (8952)./tmp/ccKzEAz7.s:105114: Error: Field out of range [-8192..8191] (8896)./tmp/ccKzEAz7.s:105119: Error: Field out of range [-8192..8191] (8836)./tmp/ccKzEAz7.s:105125: Error: Field out of range [-8192..8191] (8776)./tmp/ccKzEAz7.s:105130: Error: Field out of range [-8192..8191] (8720)./tmp/ccKzEAz7.s:105135: Error: Field out of range [-8192..8191] (8664)./tmp/ccKzEAz7.s:105140: Error: Field out of range [-8192..8191] (8608)./tmp/ccKzEAz7.s:105145: Error: Field out of range [-8192..8191] (8552)./tmp/ccKzEAz7.s:105150: Error: Field out of range [-8192..8191] (8496)./tmp/ccKzEAz7.s:105155: Error: Field out of range [-8192..8191] (8440)./tmp/ccKzEAz7.s:105160: Error: Field out of range [-8192..8191] (8384)./tmp/ccKzEAz7.s:105165: Error: Field out of range [-8192..8191] (8328)./tmp/ccKzEAz7.s:105170: Error: Field out of range [-8192..8191] (8268)./tmp/ccKzEAz7.s:105176: Error: Field out of range [-8192..8191] (8208).make[3]: *** [gnu/java/nio/charset.lo] Error 1All out of range targets are in the forward direction.Bug was introduced in revision 192634:2012-10-20  Joern Rennecke  <joern.rennecke@embecosm.com>            Richard Sandiford  <rdsandiford@googlemail.com>        * final.c (shorten_branches): When optimizing, start with small        length and increase from there, and don't decrease lengths.Problem goes away if I revert this change.",RESOLVED          FIXED      
43958,John David Anglin,"FAIL: gcc.dg/ipa/ipa-pta-10.c scan-ipa-dump pta ""ESCAPED = { }""","Executing on host: /test/gnu/gcc/objdir/gcc/xgcc -B/test/gnu/gcc/objdir/gcc/ /test/gnu/gcc/gcc/gcc/testsuite/gcc.dg/ipa/ipa-pta-10.c   -O2 -fipa-pta -fdump-ipa-pta-details  -lm   -o ./ipa-pta-10.exe    (timeout = 300)PASS: gcc.dg/ipa/ipa-pta-10.c (test for excess errors)Setting LD_LIBRARY_PATH to :/test/gnu/gcc/objdir/gcc::/test/gnu/gcc/objdir/gccPASS: gcc.dg/ipa/ipa-pta-10.c execution testFAIL: gcc.dg/ipa/ipa-pta-10.c scan-ipa-dump pta ""ESCAPED = { }""Generating constraints for global initializersANYTHING = &ANYTHINGREADONLY = &READONLYESCAPED = *ESCAPEDESCAPED = ESCAPED + UNKNOWN*ESCAPED = NONLOCALNONLOCAL = &NONLOCALNONLOCAL = &ESCAPEDINTEGER = &ANYTHINGGenerating constraints for mainfoo.varargs = &imain.clobber = foo.clobbermain.use = foo.usemain.use = ESCAPEDGenerating constraints for fooap = &ANYTHINGCALLCLOBBERED = &apap.1_1 = apD.1970_2 = ap.1_1 + -32ESCAPED = D.1970_2ap.2_5 = &ANYTHINGap = ap.2_5ap.1_6 = apap.3_7 = ap.1_6p_8 = *ap.3_7foo.use = ap.3_7foo.clobber = p_8Collapsing static cycles and doing variable substitutionBuilding predecessor graphDetecting pointer and location equivalencesFound location equivalence for node NONLOCALEquivalence classes for Indirect node node id 0:NULL are pointer: 1, location:0Equivalence classes for Indirect node node id 1:ANYTHING are pointer: 2, location:1Equivalence classes for Indirect node node id 2:READONLY are pointer: 3, location:2Equivalence classes for Indirect node node id 3:ESCAPED are pointer: 7, location:3Equivalence classes for Indirect node node id 4:NONLOCAL are pointer: 5, location:3Equivalence classes for Direct node node id 5:STOREDANYTHING are pointer: 0, location:0Equivalence classes for Indirect node node id 6:INTEGER are pointer: 8, location:0Equivalence classes for Direct node node id 7:main are pointer: 0, location:0Equivalence classes for Direct node node id 8:main.clobber are pointer: 9, location:0Equivalence classes for Direct node node id 9:main.use are pointer: 12, location:0Equivalence classes for Direct node node id 10:main.result are pointer: 0, location:0Equivalence classes for Direct node node id 11:main.varargs are pointer: 0, location:0Equivalence classes for Direct node node id 12:foo are pointer: 0, location:0Equivalence classes for Direct node node id 13:foo.clobber are pointer: 9, location:0Equivalence classes for Direct node node id 14:foo.use are pointer: 11, location:0Equivalence classes for Direct node node id 15:foo.result are pointer: 0, location:0Equivalence classes for Direct node node id 16:foo.arg0 are pointer: 0, location:0Equivalence classes for Direct node node id 17:foo.varargs are pointer: 13, location:0Equivalence classes for Indirect node node id 18:i are pointer: 14, location:4Equivalence classes for Direct node node id 19:abort are pointer: 0, location:0Equivalence classes for Indirect node node id 20:ap are pointer: 11, location:5Equivalence classes for Direct node node id 21:CALLUSED are pointer: 0, location:0Equivalence classes for Direct node node id 22:CALLCLOBBERED are pointer: 15, location:0Equivalence classes for Direct node node id 23:ap.1_1 are pointer: 11, location:0Equivalence classes for Indirect node node id 24:D.1970_2 are pointer: 4, location:0Equivalence classes for Direct node node id 25:ap.2_5 are pointer: 10, location:0Equivalence classes for Direct node node id 26:ap.1_6 are pointer: 11, location:0Equivalence classes for Direct node node id 27:ap.3_7 are pointer: 11, location:0Equivalence classes for Direct node node id 28:p_8 are pointer: 9, location:0STOREDANYTHING is a non-pointer variable, eliminating edges.main is a non-pointer variable, eliminating edges.main.result is a non-pointer variable, eliminating edges.main.varargs is a non-pointer variable, eliminating edges.foo is a non-pointer variable, eliminating edges.foo.result is a non-pointer variable, eliminating edges.foo.arg0 is a non-pointer variable, eliminating edges.abort is a non-pointer variable, eliminating edges.CALLUSED is a non-pointer variable, eliminating edges.Rewriting constraints and unifying variablesUnifying foo.clobber to main.clobberUnifying ap.1_1 to foo.useUnifying ap.1_6 to foo.useUnifying ap.3_7 to foo.useUnifying p_8 to main.clobberUniting pointer but not location equivalent variablesUnifying ap to foo.useFinding indirect cyclesSolving graphPoints-to setsANYTHING = { ANYTHING }READONLY = { READONLY }ESCAPED = { ANYTHING ESCAPED NONLOCAL }NONLOCAL = { ESCAPED NONLOCAL }STOREDANYTHING = { ESCAPED NONLOCAL }INTEGER = { ANYTHING }main.clobber = { ANYTHING ESCAPED NONLOCAL }main.use = { ANYTHING ESCAPED NONLOCAL }main.varargs = { }foo.clobber = { ANYTHING ESCAPED NONLOCAL } same as main.clobberfoo.use = { ANYTHING ESCAPED NONLOCAL }foo.varargs = { i }ap = { ANYTHING ESCAPED NONLOCAL } same as foo.useCALLUSED = { }CALLCLOBBERED = { ap }ap.1_1 = { ANYTHING ESCAPED NONLOCAL } same as foo.useD.1970_2 = { ANYTHING ESCAPED NONLOCAL }ap.2_5 = { ANYTHING }ap.1_6 = { ANYTHING ESCAPED NONLOCAL } same as foo.useap.3_7 = { ANYTHING ESCAPED NONLOCAL } same as foo.usep_8 = { ANYTHING ESCAPED NONLOCAL } same as main.clobber",RESOLVED          FIXED      
40919,John David Anglin,FAIL: 26_numerics/headers/cmath/c99_classification_macros_c.cc,"Here is another testsuite issue:Executing on host: /Users/dave/gnu/gcc/objdir/./gcc/g++ -shared-libgcc -B/Users/dave/gnu/gcc/objdir/./gcc -nostdinc++ -L/Users/dave/gnu/gcc/objdir/i686-apple-darwin9/libstdc++-v3/src -L/Users/dave/gnu/gcc/objdir/i686-apple-darwin9/libstdc++-v3/src/.libs -B/opt/gnu/gcc/gcc-4.5.0/i686-apple-darwin9/bin/ -B/opt/gnu/gcc/gcc-4.5.0/i686-apple-darwin9/lib/ -isystem /opt/gnu/gcc/gcc-4.5.0/i686-apple-darwin9/include -isystem /opt/gnu/gcc/gcc-4.5.0/i686-apple-darwin9/sys-include -g -O2 -D_GLIBCXX_ASSERT -fmessage-length=0 -ffunction-sections -fdata-sections -g -O2 -g -O2 -DLOCALEDIR=""."" -nostdinc++ -I/Users/dave/gnu/gcc/objdir/i686-apple-darwin9/libstdc++-v3/include/i686-apple-darwin9 -I/Users/dave/gnu/gcc/objdir/i686-apple-darwin9/libstdc++-v3/include -I/Users/dave/gnu/gcc/gcc/libstdc++-v3/libsupc++ -I/Users/dave/gnu/gcc/gcc/libstdc++-v3/include/backward -I/Users/dave/gnu/gcc/gcc/libstdc++-v3/testsuite/util /Users/dave/gnu/gcc/gcc/libstdc++-v3/testsuite/26_numerics/headers/cmath/c99_classification_macros_c.cc     -S  -o c99_classification_macros_c.s    (timeout = 600)/Users/dave/gnu/gcc/gcc/libstdc++-v3/testsuite/26_numerics/headers/cmath/c99_classification_macros_c.cc:39:16: error: macro ""isgreater"" requires 2 arguments, but only 1 given/Users/dave/gnu/gcc/gcc/libstdc++-v3/testsuite/26_numerics/headers/cmath/c99_classification_macros_c.cc:41:21: error: macro ""isgreaterequal"" requires 2 arguments, but only 1 given/Users/dave/gnu/gcc/gcc/libstdc++-v3/testsuite/26_numerics/headers/cmath/c99_classification_macros_c.cc:43:13: error: macro ""isless"" requires 2 arguments, but only 1 given/Users/dave/gnu/gcc/gcc/libstdc++-v3/testsuite/26_numerics/headers/cmath/c99_classification_macros_c.cc:45:18: error: macro ""islessequal"" requires 2 arguments, but only 1 given/Users/dave/gnu/gcc/gcc/libstdc++-v3/testsuite/26_numerics/headers/cmath/c99_classification_macros_c.cc:47:20: error: macro ""islessgreater"" requires 2 arguments, but only 1 given/Users/dave/gnu/gcc/gcc/libstdc++-v3/testsuite/26_numerics/headers/cmath/c99_classification_macros_c.cc:49:18: error: macro ""isunordered"" requires 2 arguments, but only 1 given/Users/dave/gnu/gcc/gcc/libstdc++-v3/testsuite/26_numerics/headers/cmath/c99_classification_macros_c.cc:27:6: error: expected unqualified-id before 'sizeof'/Users/dave/gnu/gcc/gcc/libstdc++-v3/testsuite/26_numerics/headers/cmath/c99_classification_macros_c.cc:27:6: error: expected ')' before 'sizeof'/Users/dave/gnu/gcc/gcc/libstdc++-v3/testsuite/26_numerics/headers/cmath/c99_classification_macros_c.cc:29:6: error: expected unqualified-id before 'sizeof'/Users/dave/gnu/gcc/gcc/libstdc++-v3/testsuite/26_numerics/headers/cmath/c99_classification_macros_c.cc:29:6: error: expected ')' before 'sizeof'/Users/dave/gnu/gcc/gcc/libstdc++-v3/testsuite/26_numerics/headers/cmath/c99_classification_macros_c.cc:31:6: error: expected unqualified-id before 'sizeof'/Users/dave/gnu/gcc/gcc/libstdc++-v3/testsuite/26_numerics/headers/cmath/c99_classification_macros_c.cc:31:6: error: expected ')' before 'sizeof'/Users/dave/gnu/gcc/gcc/libstdc++-v3/testsuite/26_numerics/headers/cmath/c99_classification_macros_c.cc:33:6: error: expected unqualified-id before 'sizeof'/Users/dave/gnu/gcc/gcc/libstdc++-v3/testsuite/26_numerics/headers/cmath/c99_classification_macros_c.cc:33:6: error: expected ')' before 'sizeof'/Users/dave/gnu/gcc/gcc/libstdc++-v3/testsuite/26_numerics/headers/cmath/c99_classification_macros_c.cc:35:6: error: expected unqualified-id before 'sizeof'/Users/dave/gnu/gcc/gcc/libstdc++-v3/testsuite/26_numerics/headers/cmath/c99_classification_macros_c.cc:35:6: error: expected ')' before 'sizeof'/Users/dave/gnu/gcc/gcc/libstdc++-v3/testsuite/26_numerics/headers/cmath/c99_classification_macros_c.cc:37:6: error: expected unqualified-id before 'sizeof'/Users/dave/gnu/gcc/gcc/libstdc++-v3/testsuite/26_numerics/headers/cmath/c99_classification_macros_c.cc:37:6: error: expected ')' before 'sizeof'/Users/dave/gnu/gcc/gcc/libstdc++-v3/testsuite/26_numerics/headers/cmath/c99_classification_macros_c.cc:39:6: error: variable or field 'isgreater' declared void/Users/dave/gnu/gcc/gcc/libstdc++-v3/testsuite/26_numerics/headers/cmath/c99_classification_macros_c.cc:39:6: warning: extended initializer lists only available with -std=c++0x or -std=gnu++0x/Users/dave/gnu/gcc/gcc/libstdc++-v3/testsuite/26_numerics/headers/cmath/c99_classification_macros_c.cc:43:6: error: variable or field 'isless' declared void/Users/dave/gnu/gcc/gcc/libstdc++-v3/testsuite/26_numerics/headers/cmath/c99_classification_macros_c.cc:43:6: warning: extended initializer lists only available with -std=c++0x or -std=gnu++0x/Users/dave/gnu/gcc/gcc/libstdc++-v3/testsuite/26_numerics/headers/cmath/c99_classification_macros_c.cc:47:6: error: variable or field 'islessgreater' declared void/Users/dave/gnu/gcc/gcc/libstdc++-v3/testsuite/26_numerics/headers/cmath/c99_classification_macros_c.cc:47:6: warning: extended initializer lists only available with -std=c++0x or -std=gnu++0xcompiler exited with status 1output is:/Users/dave/gnu/gcc/gcc/libstdc++-v3/testsuite/26_numerics/headers/cmath/c99_classification_macros_c.cc:39:16: error: macro ""isgreater"" requires 2 arguments, but only 1 given/Users/dave/gnu/gcc/gcc/libstdc++-v3/testsuite/26_numerics/headers/cmath/c99_classification_macros_c.cc:41:21: error: macro ""isgreaterequal"" requires 2 arguments, but only 1 given/Users/dave/gnu/gcc/gcc/libstdc++-v3/testsuite/26_numerics/headers/cmath/c99_classification_macros_c.cc:43:13: error: macro ""isless"" requires 2 arguments, but only 1 given/Users/dave/gnu/gcc/gcc/libstdc++-v3/testsuite/26_numerics/headers/cmath/c99_classification_macros_c.cc:45:18: error: macro ""islessequal"" requires 2 arguments, but only 1 given/Users/dave/gnu/gcc/gcc/libstdc++-v3/testsuite/26_numerics/headers/cmath/c99_classification_macros_c.cc:47:20: error: macro ""islessgreater"" requires 2 arguments, but only 1 given/Users/dave/gnu/gcc/gcc/libstdc++-v3/testsuite/26_numerics/headers/cmath/c99_classification_macros_c.cc:49:18: error: macro ""isunordered"" requires 2 arguments, but only 1 given/Users/dave/gnu/gcc/gcc/libstdc++-v3/testsuite/26_numerics/headers/cmath/c99_classification_macros_c.cc:27:6: error: expected unqualified-id before 'sizeof'/Users/dave/gnu/gcc/gcc/libstdc++-v3/testsuite/26_numerics/headers/cmath/c99_classification_macros_c.cc:27:6: error: expected ')' before 'sizeof'/Users/dave/gnu/gcc/gcc/libstdc++-v3/testsuite/26_numerics/headers/cmath/c99_classification_macros_c.cc:29:6: error: expected unqualified-id before 'sizeof'/Users/dave/gnu/gcc/gcc/libstdc++-v3/testsuite/26_numerics/headers/cmath/c99_classification_macros_c.cc:29:6: error: expected ')' before 'sizeof'/Users/dave/gnu/gcc/gcc/libstdc++-v3/testsuite/26_numerics/headers/cmath/c99_classification_macros_c.cc:31:6: error: expected unqualified-id before 'sizeof'/Users/dave/gnu/gcc/gcc/libstdc++-v3/testsuite/26_numerics/headers/cmath/c99_classification_macros_c.cc:31:6: error: expected ')' before 'sizeof'/Users/dave/gnu/gcc/gcc/libstdc++-v3/testsuite/26_numerics/headers/cmath/c99_classification_macros_c.cc:33:6: error: expected unqualified-id before 'sizeof'/Users/dave/gnu/gcc/gcc/libstdc++-v3/testsuite/26_numerics/headers/cmath/c99_classification_macros_c.cc:33:6: error: expected ')' before 'sizeof'/Users/dave/gnu/gcc/gcc/libstdc++-v3/testsuite/26_numerics/headers/cmath/c99_classification_macros_c.cc:35:6: error: expected unqualified-id before 'sizeof'/Users/dave/gnu/gcc/gcc/libstdc++-v3/testsuite/26_numerics/headers/cmath/c99_classification_macros_c.cc:35:6: error: expected ')' before 'sizeof'/Users/dave/gnu/gcc/gcc/libstdc++-v3/testsuite/26_numerics/headers/cmath/c99_classification_macros_c.cc:37:6: error: expected unqualified-id before 'sizeof'/Users/dave/gnu/gcc/gcc/libstdc++-v3/testsuite/26_numerics/headers/cmath/c99_classification_macros_c.cc:37:6: error: expected ')' before 'sizeof'/Users/dave/gnu/gcc/gcc/libstdc++-v3/testsuite/26_numerics/headers/cmath/c99_classification_macros_c.cc:39:6: error: variable or field 'isgreater' declared void/Users/dave/gnu/gcc/gcc/libstdc++-v3/testsuite/26_numerics/headers/cmath/c99_classification_macros_c.cc:39:6: warning: extended initializer lists only available with -std=c++0x or -std=gnu++0x/Users/dave/gnu/gcc/gcc/libstdc++-v3/testsuite/26_numerics/headers/cmath/c99_classification_macros_c.cc:43:6: error: variable or field 'isless' declared void/Users/dave/gnu/gcc/gcc/libstdc++-v3/testsuite/26_numerics/headers/cmath/c99_classification_macros_c.cc:43:6: warning: extended initializer lists only available with -std=c++0x or -std=gnu++0x/Users/dave/gnu/gcc/gcc/libstdc++-v3/testsuite/26_numerics/headers/cmath/c99_classification_macros_c.cc:47:6: error: variable or field 'islessgreater' declared void/Users/dave/gnu/gcc/gcc/libstdc++-v3/testsuite/26_numerics/headers/cmath/c99_classification_macros_c.cc:47:6: warning: extended initializer lists only available with -std=c++0x or -std=gnu++0xFAIL: 26_numerics/headers/cmath/c99_classification_macros_c.cc (test for excess errors)",RESOLVED          FIXED      
32296,John David Anglin,[4.3 Regression] Bootstrap failure in stage1 on hppa*-*-*,"In stage1,/home/dave/gnu/gcc-4.3/objdir/./gcc/xgcc -B/home/dave/gnu/gcc-4.3/objdir/./gcc/-B/home/dave/opt/gnu/gcc/gcc-4.3.0/hppa-linux/bin/ -B/home/dave/opt/gnu/gcc/gcc-4.3.0/hppa-linux/lib/ -isystem /home/dave/opt/gnu/gcc/gcc-4.3.0/hppa-linux/include -isystem /home/dave/opt/gnu/gcc/gcc-4.3.0/hppa-linux/sys-include -g -fkeep-inline-functions -O2  -O2 -g -O2  -DIN_GCC    -W -Wall -Wwrite-strings -Wstrict-prototypes -Wmissing-prototypes -Wold-style-definition  -isystem ./include  -fPIC-DELF=1 -DLINUX=1 -g -DHAVE_GTHR_DEFAULT -DIN_LIBGCC2 -D__GCC_FLOAT_NOT_NEEDED -I. -I. -I../.././gcc -I../../../gcc/libgcc -I../../../gcc/libgcc/. -I../../../gcc/libgcc/../gcc -I../../../gcc/libgcc/../include  -o _negdi2.o -MT _negdi2.o -MD -MP -MF _negdi2.dep -DL_negdi2 -c ../../../gcc/libgcc/../gcc/libgcc2.c \          -fvisibility=hidden -DHIDE_EXPORTS../../../gcc/libgcc/../gcc/libgcc2.c: In function '__muldi3':../../../gcc/libgcc/../gcc/libgcc2.c:566: error: unrecognizable insn:(jump_insn 83 82 84 2 ../../../gcc/libgcc/../gcc/libgcc2.c:566 (parallel [            (return)            (use (reg:SI 2 %r2))            (const_int 0 [0x0])        ]) -1 (nil))../../../gcc/libgcc/../gcc/libgcc2.c:566: internal compiler error: in extract_insn, at recog.c:1957Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.make[3]: *** [_muldi3.o] Error 1make[3]: *** Waiting for unfinished jobs....../../../gcc/libgcc/../gcc/libgcc2.c: In function '__negdi2':../../../gcc/libgcc/../gcc/libgcc2.c:80: error: unrecognizable insn:(jump_insn 44 43 45 2 ../../../gcc/libgcc/../gcc/libgcc2.c:80 (parallel [            (return)            (use (reg:SI 2 %r2))            (const_int 0 [0x0])        ]) -1 (nil))../../../gcc/libgcc/../gcc/libgcc2.c:80: internal compiler error: in extract_insn, at recog.c:1957Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.make[3]: *** [_negdi2.o] Error 1make[3]: Leaving directory `/home/dave/gnu/gcc-4.3/objdir/hppa-linux/libgcc'make[2]: *** [all-stage1-target-libgcc] Error 2make[2]: Leaving directory `/home/dave/gnu/gcc-4.3/objdir'make[1]: *** [stage1-bubble] Error 2make[1]: Leaving directory `/home/dave/gnu/gcc-4.3/objdir'make: *** [bootstrap] Error 2Mon Jun 11 17:56:33 EDT 2007",RESOLVED          FIXED      
25258,John David Anglin,[4.0 regression/hpux] gcc generates incorrect stabs debug output,"Programs compiled with gcc-4.x on 32-bit hpux targets cannot be debugged. When loaded into gdb, the programs behave as if no debugging information is present. For example, given:int foo(int x){        return x;}int main(int argc, char **argv){        return foo(argc);}Placing a breakpoint on foo gives:(gdb) b fooDuring symbol reading, unknown symbol type 0x2e.During symbol reading, block end address less than block start address in main (patched it).During symbol reading, inner block (0x2960-0x2960) not inside outer block (0x2920-0x2920).Breakpoint 1 at 0x292cThe ""unknown symbol type"" warning is for the new BNSYM stab entry that was added to gcc but not yet updated in gdb.this problem seems to only occur on the 32-bit HPUX port. On 64-bit HPUX and 32-bit Linux there does not appear to be any problems with slabs debugging.",RESOLVED          FIXED      
16459,John David Anglin,[3.3/3.4/4.0 Regression] ld: libbackend.a(expr.o)(.text+0x40c2c): cannot handle R_PARISC_PCREL17F for $$dyncall,"stage1/xgcc -Bstage1/ -B/home/dave/opt/gnu/gcc/gcc-3.5.0/hppa-linux/bin/   -g -O2 -mpa-risc-2-0 -fprofile-generate -DIN_GCC   -W -Wall -Wwrite-strings -Wstrict-prototypes -Wmissing-prototypes -pedantic -Wno-long-long -Wno-variadic-macros -Wold-style-definition -Werror -fno-common   -DHAVE_CONFIG_H  -o cc1 \        c-parse.o c-lang.o stub-objc.o attribs.o c-errors.o c-lex.o c-pragma.o c-decl.o c-typeck.o c-convert.o c-aux-info.o c-common.o c-opts.o c-format.o c-semantics.o c-incpath.o cppdefault.o c-ppoutput.o c-cppbuiltin.o prefix.o c-objc-common.o c-dump.o c-pch.o  c-gimplify.o tree-mudflap.o c-pretty-print.o main.o tree-browser.o libbackend.a ../libcpp/libcpp.a ../libcpp/libcpp.a ../libiberty/libiberty.a   ../libbanshee/points-to/libandersen.a ../libbanshee/engine/libbansheeengine.a ../libbanshee/libcompat/libbansheecompat.a/home/dave/opt/gnu/bin/ld: libbackend.a(expr.o)(.text+0x40c2c): cannot reach 000006ff_$$dyncall+0, recompile with -ffunction-sections/home/dave/opt/gnu/bin/ld: libbackend.a(expr.o)(.text+0x40c2c): cannot handle R_PARISC_PCREL17F for $$dyncall/home/dave/opt/gnu/bin/ld: final link failed: Bad valuecollect2: ld returned 1 exit statusmake[2]: *** [cc1] Error 1make[2]: Leaving directory `/home/dave/gcc-3.5/objdir/gcc'This is a PA 2.0 problem.  I forgot to change the pc-relative branch usedto call $$dyncall in an indirect call:   40c2c:       eb e0 00 00     b,l 40c34 <try_casesi+0xd4>,r31   40c30:       08 1f 02 42     copy r31,rpPA 2.0 has long pc-relative branches (22 bits versus 17 bits forPA 1.x) but only when %rp (%r2) is used as the link register.%rp and %r31 need to be interchanged to get the long branch version.The regression was introduced when I changed the length attribute.It is used to select the type of branch to use to call $$dyncall.Will fix shortly.",RESOLVED          FIXED      
6232,John David Anglin,gcc 3.0.4 fails on configure for HP-UX 11.0 V2200,"HP ANSI C is not present../configure incorrectly detects the ""host"" as hppa2.0w-hp-hpux11.00Correct is hppa64-hp-hpux11.00Release:unknownEnvironment:HP-UX 11.0 V2200How-To-Repeat:Run ./configure without any flags.",CLOSED          FIXED      
17005,John David Anglin,wide character strings don't work on HP-UX 11i using gcc 3.4.1,I just installed gcc 3.4.1 on HP-UX 11i and I'm unable to compile the following test case:#include <string>int main () {        std::wstring s;};with error about wstring not in std namespace because _GLIBCPP_USE_WCHAR_T is commented out in the c++config.h file.,RESOLVED          FIXED      
18730,John David Anglin,[3.3/3.4 Regression] cppexp.c:1076: error: unrecognizable insn,"stage1/xgcc -Bstage1/ -B/opt/gnu/gcc/gcc-3.4.4/hppa1.1-hp-hpux11.11/bin/ -c   -g -O2 -DIN_GCC   -W -Wall -Wwrite-strings -Wstrict-prototypes -Wmissing-prototypes -pedantic -Wno-long-long -Wold-style-definition     -DHAVE_CONFIG_H    -I. -I. -I../../gcc/gcc -I../../gcc/gcc/. -I../../gcc/gcc/../include  ../../gcc/gcc/cppexp.c -o cppexp.o../../gcc/gcc/cppexp.c: In function `num_negate':../../gcc/gcc/cppexp.c:1076: error: unrecognizable insn:(insn 188 115 0 ../../gcc/gcc/cppexp.c:1073 (sequence [            (jump_insn 165 115 82 (parallel [                        (set (pc)                            (label_ref 187))                        (set (reg:QI 24 %r24 [116])                            (const_int 1 [0x1]))                    ]) 230 {*pa.md:8757} (nil)                (expr_list:REG_BR_PRED (const_int 4 [0x4])                    (nil)))            (insn/s:TI 82 165 0 (set (mem/s:QI (plus:SI (reg/v/f:SI 3 %r3 [orig:95 num ] [95])                            (const_int 9 [0x9])) [22 num.overflow+0 S1 A8])                    (reg:QI 24 %r24 [116])) 57 {*pa.md:3003} (nil)                (nil))        ]) -1 (nil)    (nil))../../gcc/gcc/cppexp.c:1076: internal compiler error: in insn_default_length, at insn-attrtab.c:825Please submit a full bug report,with preprocessed source if appropriate.Bah, I know what's wrong.  The regression was caused by the followingfix:2004-11-22  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>        PR rtl-optimization/14838        * emit-rtl.c (get_first_nonnote_insn): Don't assume first insn is a        note.        (get_last_nonnote_insn): Don't assume last insn is a note.The above fix doesn't handle the case when the first/last insn is asequence.Patch in testing.",RESOLVED          FIXED      
13713,John David Anglin,[3.4/4.0 regression] gnat1 segmentation fault in stage 3 on hppa-linux,stage2/xgcc -Bstage2/ -B/home/dave/opt/gnu/gcc/gcc-3.4/hppa-linux/bin/ -c -gstabs -O2      -gnatpg -gnata -I- -I. -Iada -I../../gcc/gcc/ada ../../gcc/gcc/ada/ada.ads -o ada/ada.o+===========================GNAT BUG DETECTED==============================+| 3.4.0 20040116 (experimental) (hppa-unknown-linux-gnu) Segmentation fault|xgcc: Internal error: Segmentation fault (program gnat1)Please submit a full bug report.See <URL:http://gcc.gnu.org/bugs.html> for instructions.make[2]: *** [ada/ada.o] Error 1Update for last successful build was: Thu Jan 15 22:21:04 UTC 2004.Update for this build was: Fri Jan 16 18:34:46 UTC 2004.,RESOLVED          FIXED      
13324,John David Anglin,"[3.4/4.0 Regression] a-calend.adb:396:33: warning: value not in range of type ""Ada.Calendar.Day_Duration""","The following error occurs building gnatlib and tools:make[2]: Entering directory `/home/dave/gnu/gcc-3.4/objdir/gcc/ada/rts'../../xgcc -B../../ -c -g -O2      -W -Wall -gnatpg  a-caldel.adb -o a-caldel.o../../xgcc -B../../ -c -g -O2      -W -Wall -gnatpg  a-calend.adb -o a-calend.oa-calend.adb:396:33: warning: value not in range of type ""Ada.Calendar.Day_Duration""a-calend.adb:396:33: warning: ""Constraint_Error"" will be raised at run timea-calend.ads:70:33: warning: value not in range of type ""Ada.Calendar.Day_Duration""a-calend.ads:70:33: warning: ""Constraint_Error"" will be raised at run timemake[2]: *** [a-calend.o] Error 1make[2]: Leaving directory `/home/dave/gnu/gcc-3.4/objdir/gcc/ada/rts'make[1]: *** [gnatlib] Error 2",RESOLVED          FIXED      
10271,John David Anglin,[3.2/3.3/3.4 regression] [HPPA] Floating point args don't get reloaded across function calls at -O2,"When compiling the bug.c code below with -O2, the floating point argument to the fprintf does not get reloaded for the second fprintf() call, so the second call prints junk. At -O1 the arguments (r23/r24) are properly reloaded.Release:3.3 20030309 (Debian prerelease) (Debian testing/unstable) [and others]Environment:System: Linux gsyprf11.external.hp.com 2.4.20-pa18-UP #1 Sat Jan 4 22:06:52 PST 2003 parisc64 unknown unknown GNU/LinuxArchitecture: parisc64        <machine, os, target, libraries (multiple lines)>host: hppa-unknown-linux-gnubuild: hppa-unknown-linux-gnutarget: hppa-unknown-linux-gnuconfigured with: ../src/configure -v --enable-languages=c,c++,f77,objc,ada,treelang --prefix=/usr --mandir=/usr/share/man --infodir=/usr/share/info --with-gxx-include-dir=/usr/include/c++/3.3 --enable-shared --with-system-zlib --enable-nls --without-included-gettext --enable-__cxa_atexit --enable-sjlj-exceptions --enable-clocale=gnu --enable-debug --enable-objc-gc hppa-linuxHow-To-Repeat:Compile with gcc -O2 -o bug bug.c -lm$ ./bugnan1.422968e-309With -O1$ ./bugnannan------8< bug.c 8<--------#include <stdio.h>#include <math.h>void doprint(double dval){        fprintf(stdout, ""%e\n"", dval);        fprintf(stdout, ""%e\n"", dval);}int main(int argc, char **argv){        doprint(log(-8)); /* nan */        return 0;}",RESOLVED          FIXED      
10272,John David Anglin,[3.0/3.2/3.3/3.4] [HP-PA] Floating point args not correctly loaded for function calls,"This one looks similar to 10271, but filing separately because the test case is a bit different. Not sure if it's the same bug or not.At -O2 the floating point argument is not getting loaded into the right registers to pass to fprintf().Release:3.3 20030309 (Debian prerelease) (Debian testing/unstable) [and others]Environment:System: Linux gsyprf11.external.hp.com 2.4.20-pa18-UP #1 Sat Jan 4 22:06:52 PST 2003 parisc64 unknown unknown GNU/LinuxArchitecture: parisc64        <machine, os, target, libraries (multiple lines)>host: hppa-unknown-linux-gnubuild: hppa-unknown-linux-gnutarget: hppa-unknown-linux-gnuconfigured with: ../src/configure -v --enable-languages=c,c++,f77,objc,ada,treelang --prefix=/usr --mandir=/usr/share/man --infodir=/usr/share/info --with-gxx-include-dir=/usr/include/c++/3.3 --enable-shared --with-system-zlib --enable-nls --without-included-gettext --enable-__cxa_atexit --enable-sjlj-exceptions --enable-clocale=gnu --enable-debug --enable-objc-gc hppa-linuxHow-To-Repeat:$ gcc-3.3 -O2 -o bug bug.c -lm$ ./bug-1.488583e+284$ gcc-3.3 -O1 -o bug bug.c -lm$ ./bugnan-------8< bug.c 8<------------#include <stdio.h>#include <math.h>void doprint(double d){        int i = (int)d;        if ((double)i == d) {                fprintf(stdout, ""%d\n"", i);        } else {                fprintf(stdout, ""%e\n"", d);        }}int main(int argc, char **argv){        doprint(log(-8)); /* nan */        return 0;}",RESOLVED          FIXED      
13054,John David Anglin,compile/980310-3.f: insn does not satisfy its constraints,"Executing on host: /xxx/gnu/gcc-3.3/objdir/gcc/testsuite/../g77 -B/xxx/gnu/gcc-3.3/objdir/gcc/testsuite/../  -w  -O2   -c  -o /xxx/gnu/gcc-3.3/objdir/gcc/testsuite/980310-3.o /xxx/gnu/gcc-3.3/gcc/gcc/testsuite/g77.f-torture/compile/980310-3.f    (timeout = 300)/xxx/gnu/gcc-3.3/gcc/gcc/testsuite/g77.f-torture/compile/980310-3.f: In subroutine `scaleg':In file included from /xxx/gnu/gcc-3.3/gcc/gcc/testsuite/g77.f-torture/compile/980310-3.f:0:/xxx/gnu/gcc-3.3/gcc/gcc/testsuite/g77.f-torture/compile/980310-3.f:255: error: insn does not satisfy its constraints:(insn 4745 228 241 3 (set (mem/s/j:DF (plus:DI (reg/f:DI %r23 [2850])                (mult:DI (reg:DI %r10 [79])                    (const_int 8 [0x8]))) [0 (* wk) S8 A64])        (reg:DF %r21)) 116 {*pa.md:3595} (nil)    (nil))This failure was introduced by the following patch:2003-11-02  Richard Sandiford  <rsandifo@redhat.com>        * reload.c: Include target.h.        (find_reloads): If an alternative will force a constant into memory,        count an extra reload if constant pool symbols are not valid        addresses.  If an alternative uses memory to move values between        registers, count the move as two reloads rather than one.The insn doesn't match its constraints because only floating storessupport scaled indexed stores.  Integer stores don't.",RESOLVED          FIXED      
6483,John David Anglin,ada fails to build under hppa*-hp-hpux*,"Segmentation fault in gnat compiling ada.ads in stage 2.The problem is caused by not specify ""-mdisable-indexing""when building the C files comprising the ada compiling.The build configuration was changed last October bythis patch:2001-10-08  Zack Weinberg  <zack@codesourcery.com>        * aclocal.m4 (gcc_AC_PROG_GNAT): New.        * configure.in: Use it.        * configure: Regenerated.        * config/pa/t-linux, config/pa/t-pa, config/pa/t-pa64,        config/pa/t-pro: Set T_ADAFLAGS, not ADA_CFLAGS.ADA_CFLAGS is used in building both c and ada files in theada compiler.  T_ADAFLAGS is only used when compiling adafiles.  The above option needs to be specified for bothc and ada files for correct operation of gnat.A further problem is that T_ADAFLAGS is a target configurationflag.  The ""-mdisable-indexing"" option needs to be specifiedfor the host not the target.  This was observed recentlywhen a cross compiler was used to port ada to hppa-linux.The PR has been marked high-priority because it is aregression.Release:gcc 3.1 and 3.2Environment:hppa*-hp-hpux*",RESOLVED          FIXED      
5933,John David Anglin,HP-UX: broken MI of virtual classes,"When compiling the class defined in handler.h and handler.cppinto a shared library on HP-UX 11.00 (B.11.28 ld) a call tostart() from an application (main.cpp) succeeds but neverreturns.// handler.h#ifndef HANDLER_H#define HANDLER_Hclass H1 { public: virtual void foo() { } };class H2 { public: virtual void start() = 0; };class H12 : public H1, public H2 { public: void start(); };#endif// handler.cpp#include ""handler.h""void H12::start(){}// main.cpp#include ""handler.h""int main(){        H12 hnd;        H2* h2 = &hnd;        h2->start();        return 0;}Release:gcc version 3.1 20020308Environment:hppa1.1-hp-hpux11.00How-To-Repeat:g++ -shared -fPIC -o libhandler.sl handler.cppg++ main.cpp libhandler.sl./a.out   (hangs forever)",RESOLVED          FIXED      
6869,John David Anglin,G++ 3.1 generates incorrect assembler instructions for HPPA 2.0,"g++ generates in static initialization code:        addil LR%L$3244-$global$,%r27        ldw RR%L$3244-$global$(%r1),%r22        ldil L%$$dyncall,%r2-       ble  R%$$dyncall(%sr4,%r2)       <- for PA1.1+       be,l  R%$$dyncall(%sr4,%r2)      <- for PA2.0        copy %r31,%r2        ldw 12(%r3),%r19 GNU as complains about the ""be,l"" lines with the following error message:xxxx.s:197656: Error: Invalid Nullification: (l)Release:gcc-3.1, binutils-2.12.1Environment:hppa2.0-hp-hpux11.11How-To-Repeat:Unfortunately I couldn't create a small test file and the original file contains confidential information.",RESOLVED          FIXED      
3954,John David Anglin,simple returns are broken when the return value is in a pseudo,"This was first noticed with g++ but potentially affect C as well.  It only affects ports that don't use an epilogue for function returns.Incorrect code will be generated for the following test program when compiled with g++:char *srealloc (char *p, char *q, int i){  if (i == 0)    return p;  else    return q;}Release:gcc-3.0Environment:vax-dec-ultrix4.3",RESOLVED          FIXED      
4065,John David Anglin,[hppa] branch out of range,"We get an assembler error of the formError: Field out of range [-262144..262143] (640184)From the gas sources this is due to a branch offsetbeing too large.It looks like the compiler tries to generate too big abranch offset in a big switch (or large function ?)Release:gcc 2.95.2, gcc 3.0Environment:HP-UX 10.20How-To-Repeat:Compile and run the attached program. This generates aC source code with a switch that has n cases, n being theargument you gave to the attached program.Redirect the output to a file (say t.c) and compile t.cBoth gcc and g++ fail.n=10000 causes the error message.n=7000 causes a different error.We found the bug on a Bison generated file.",RESOLVED          FIXED      
4844,John David Anglin,Code generation bug for hppa64,"GCC produces incorrect code when compiling openssl-SNAP-011104.  The optimizergets the code completely wrong (see below).  I have a simple tset program thatworks and then the real program and the incorrect assembly.--- fred.c ---#include <stdio.h>struct BIGNUM {  int neg;};int main(){  struct BIGNUM a, b;  a.neg = 0;  b.neg = 1;  printf(""%d %d\n"", a, b);  a.neg = !a.neg;  b.neg = !b.neg;  printf(""%d %d\n"", a, b);  return 0;}--- fred.s --- ** lines of interest for a.neg != a.neg	.LEVEL 2.0w	.IMPORT printf,ENTRY	.IMPORT __main,ENTRY	.section	.rodata	.align 4L$C0000	.STRING ""%d %d\x0a\x00""	.text	.align 8	.EXPORT main,ENTRYmain	.PROC	.CALLINFO FRAME=256,CALLS,SAVE_RP,SAVE_SP,ENTRY_GR=3	.ENTRY	std %r2,-16(%r30)	copy %r3,%r1	copy %r30,%r3	std,ma %r1,256(%r30)	std %r27,24(%r3)	ldo -16(%r30),%r29	b,l __main,%r2	nop	ldd 24(%r3),%r27	stw %r0,8(%r3)	ldi 1,%r19	stw %r19,12(%r3)	addil LT'L$C0000,%r27	ldd RT'L$C0000(%r1),%r1	copy %r1,%r26	ldw 8(%r3),%r25	ldw 12(%r3),%r24	ldo -16(%r30),%r29	b,l printf,%r2	nop**	ldd 24(%r3),%r27**	stw %r0,32(%r3)**	ldw 8(%r3),%r19**	cmpib,<>,n 0,%r19,L$0002**	ldi 1,%r19**	stw %r19,32(%r3)L$0002**	ldw 32(%r3),%r19**	stw %r19,8(%r3)	stw %r0,36(%r3)	ldw 12(%r3),%r19	cmpib,<>,n 0,%r19,L$0003	ldi 1,%r19	stw %r19,36(%r3)L$0003	ldw 36(%r3),%r19	stw %r19,12(%r3)	addil LT'L$C0000,%r27	ldd RT'L$C0000(%r1),%r1	copy %r1,%r26	ldw 8(%r3),%r25	ldw 12(%r3),%r24	ldo -16(%r30),%r29	b,l printf,%r2	nop	ldd 24(%r3),%r27	ldi 0,%r28	ldd -16(%r3),%r2	ldo 64(%r3),%r30	ldd,mb -64(%r30),%r3	bve,n (%r2)	.EXIT	.PROCEND--- fred.out ---0 11 0--- bntest.c --- abbreviated --int test_add(BIO *bp)	{	BIGNUM a,b,c;	int i;	BN_init(&a);	BN_init(&b);	BN_init(&c);	BN_bntest_rand(&a,16,0,0);	for (i=0; i<num0; i++)		{		BN_bntest_rand(&b,10+i,0,0);		a.neg=rand_neg();		b.neg=rand_neg();		BN_add(&c,&a,&b);		if (bp != NULL)			{			if (!results)				{				BN_print(bp,&a);				BIO_puts(bp,"" + "");				BN_print(bp,&b);				BIO_puts(bp,"" = "");				}			BN_print(bp,&c);			BIO_puts(bp,""\n"");			}printf(""%d %d\n"", a.neg, b.neg);time(0);		a.neg=!a.neg;		b.neg=!b.neg;printf(""%d %d\n"", a.neg, b.neg);		BN_add(&c,&c,&b);		BN_add(&c,&c,&a);		if(!BN_is_zero(&c))		    {		    fprintf(stderr,""Add test failed!\n"");		    return 0;		    }		}	BN_free(&a);	BN_free(&b);	BN_free(&c);	return(1);	}--- bntest.s --- ** instructions of interest	copy %r1,%r26	ldw 24(%r3),%r25	ldw 48(%r3),%r24	ldo -16(%r30),%r29	b,l printf,%r2	nop	ldd 104(%r3),%r27	.loc 1 282 0	ldi 0,%r26	ldo -16(%r30),%r29	b,l time,%r2	nop	ldd 104(%r3),%r27	.loc 1 284 0**	stw %r0,24(%r3)**	ldw 24(%r3),%r19**	cmpib,<>,n 0,%r19,L$0042**	ldi 1,%r19**	stw %r19,24(%r3)L$0042	.loc 1 285 0	stw %r0,48(%r3)	ldw 48(%r3),%r19	cmpib,<>,n 0,%r19,L$0043	ldi 1,%r19	stw %r19,48(%r3)L$0043	.loc 1 287 0	addil LT'L$C0028,%r27	ldd RT'L$C0028(%r1),%r1	copy %r1,%r26	ldw 24(%r3),%r25	ldw 48(%r3),%r24	ldo -16(%r30),%r29	b,l printf,%r2	nop--- bntest.out ---test BN_addAdd test failed!obase=16ibase=16print ""test BN_add\n""B535 + 200 = B7350 01 1B535 + -4FF = B0360 11 11As you can see in bntest.i		stw	%r0,24(%r3)This sets a.neg to 0 (this is a bad instruction)		ldw	24(%r3),%r19This loads the variable (set to 0) into r19	cmpib,<>,n 0,%r19,L$0042This will now also fail so will not branch	ldi	1, %r19	stw	%r19, 24(%r3)This store 1 into the local variable.The result is a.neg is always set to 1.Release:3.0.2Environment:System: HP-UX styx B.11.00 U 9000/800 561706507 unlimited-user licensehost: hppa64-hp-hpux11.00build: hppa64-hp-hpux11.00target: hppa64-hp-hpux11.00configured with: /tmp/gcc-3.0.2/configure --prefix=/opt/dev64-hpld --with-gnu-as hppa64-hp-hpux11.00How-To-Repeat:Always happens.",RESOLVED          FIXED      
5295,John David Anglin,ICE in reload_cse_simplify on hppa-linux,"When compiling the attached file, gcc fails with the following message:legolas[8:37] lib% gcc -v -save-temps -DHAVE_CONFIG_H -I. -I. -I..     -O2 -fPIC -DPIC -c x509_ASN.cReading specs from /usr/lib/gcc-lib/hppa-linux/3.0.3/specsConfigured with: ../src/configure -v --enable-languages=c,c++,f77,proto,objc --prefix=/usr --infodir=/share/info --mandir=/share/man --enable-shared --with-gnu-as --with-gnu-ld --with-system-zlib --enable-long-long --enable-nls --without-included-gettext --disable-checking --enable-threads=posix --with-cpp-install-dir=bin hppa-linuxThread model: posixgcc version 3.0.3 /usr/lib/gcc-lib/hppa-linux/3.0.3/cpp0 -lang-c -v -I. -I. -I.. -D__GNUC__=3 -D__GNUC_MINOR__=0 -D__GNUC_PATCHLEVEL__=3 -D__ELF__ -Dunix -D__hppa__ -Dlinux -D__ELF__ -D__unix__ -D__hppa__ -D__linux__ -D__unix -D__linux -Asystem=unix -Asystem=posix -Acpu=hppa -Amachine=hppa -Amachine=bigendian -D__OPTIMIZE__ -D__STDC_HOSTED__=1 -D__PIC__ -D__pic__ -D_PA_RISC1_1 -DHAVE_CONFIG_H -DPIC x509_ASN.c x509_ASN.iGNU CPP version 3.0.3 (cpplib) (hppa)ignoring nonexistent directory ""/usr/hppa-linux/include""ignoring duplicate directory "".""#include ""..."" search starts here:#include <...> search starts here: . .. /usr/local/include /usr/lib/gcc-lib/hppa-linux/3.0.3/include /usr/includeEnd of search list. /usr/lib/gcc-lib/hppa-linux/3.0.3/cc1 -fpreprocessed x509_ASN.i -mno-space-regs -quiet -dumpbase x509_ASN.c -O2 -version -fPIC -o x509_ASN.sGNU CPP version 3.0.3 (cpplib) (hppa)GNU C version 3.0.3 (hppa-linux)        compiled by GNU C version 3.0.3./usr/share/misc/bison.simple: In function `yyparse':/usr/share/misc/bison.simple:761: Insn does not satisfy its constraints:(insn 7749 7746 59 (set (mem:SI (plus:SI (reg:SI 1 %r1)                (reg/f:SI 3 %r3)) 272)        (reg:SI 5 %r5)) 68 {*pa.md:2088} (nil)    (nil))/usr/share/misc/bison.simple:761: Internal compiler error in reload_cse_simplify_operands, at reload1.c:8364Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.The problem does not occur when compiling with -fno-gcse or without -fPIC.Release:3.0.3 (Debian testing/unstable)Environment:System: Linux legolas 2.4.16-pa20 #13 Mon Dec 17 21:43:03 PST 2001 parisc64 unknownArchitecture: parisc64	host: hppa-unknown-linux-gnubuild: hppa-unknown-linux-gnutarget: hppa-unknown-linux-gnuconfigured with: ../src/configure -v --enable-languages=c,c++,f77,proto,objc --prefix=/usr --infodir=/share/info --mandir=/share/man --enable-shared --with-gnu-as --with-gnu-ld --with-system-zlib --enable-long-long --enable-nls --without-included-gettext --disable-checking --enable-threads=posix --with-cpp-install-dir=bin hppa-linuxHow-To-Repeat:	.i for source with and without -fPIC attached. As describedabove the problem only occurs with -fPIC ...",RESOLVED          FIXED      
5371,John David Anglin,[hppa-linux-gcc] Internal error: Segmentation fault,"In the attached c.c which is a pre-process c fragment, the palinux gcc segfault.The same c.c core segfault on a i386 Linux box running the plinux xcompiler.The xc on the i386 box is 3.0.2This is for convenience, in case debuging gcc is done on a i386 linux box=========================================================On the palinux boxThe gcc on the palinux box is 3.0.3The packages on the palinux box are:$ dpkg -l  | grep -E 'binutils|gcc|glibc'ii  binutils       2.11.92.0.12.3 The GNU assembler, linker and binary utilitiii  binutils-dev   2.11.92.0.12.3 The GNU binary utilities (BFD development fiii  gcc            3.0.3-1        The GNU C compiler.ii  gcc-3.0        3.0.3-1        The GNU C compiler.ii  gcc-3.0-base   3.0.3-1        The GNU Compiler Collection (base package).ii  libgcc1        3.0.3-1        GCC support library.Release:hppa-linux-gcc --version 3.0.2Environment:Failure trigged on palinux box, reproduced on i386 linux box for convenience.Linux. Sounds like the Linux version is not a factor, may be the OS is not a factor.How-To-Repeat:On the i386 linux box:Install the latest xc for palinuxPATH=$PATH:/opt/palinux/bincd /tmp # Have c.c herehppa-linux-gcc -c -O4 c.con palinuxcd /tmp # have c.c heregcc -c -O4 c.c",RESOLVED          FIXED      
5470,John David Anglin,[hppa64-hp-hpux11.00] bad optimization,"A test case program runs incorrectly when compiled with -O1 or higher:#  define VERYBIGINT (9223372036854775807L) /* 2^63-1 */unsigned long bound(unsigned long b){  unsigned long w;  printf(""b=%ld\n"",b);  for(w=0;w<=b;w++)    {      puts(""loop gets executed"");      return(w);    }  puts(""loop doesn't get executed"");  return(-1);}main(){  printf(""size of unsigned long type is %d bytes\n"",sizeof(unsigned long));  exit(bound(VERYBIGINT));}Release:gcc-3.0.2Environment:hppa64-hp-hpux11.00How-To-Repeat:% gcc -o hpbug hpbug.c% ./hpbugsize of long type is 8 bytesb=9223372036854775807loop gets executed% gcc  -O1 -o hpbug hpbug.c% ./hpbugsize of long type is 8 bytesb=9223372036854775807loop doesn't get executed",RESOLVED          FIXED      
6180,John David Anglin,Infinite loop in cc1 during dbr pass,"Infinite loop occurs compiling nm.c (binutils 2.12.9020020404).  The final loop in dbr_sequence loops foreverbecause of a loop in the insn chain that occurs compilingthe function filter_symbols.  The insn chain appears okwhen dbr_sequence is called.The problem doesn't occur with 3.0.3.Release:gcc 3.1 (prerelease) and 3.2Environment:hppa-linuxHow-To-Repeat:""gcc -O2 nm.i"" with version 3.1 or 3.2 under hppa-linuxor hppa2.0w-hp-hpux11.11.",RESOLVED          FIXED      
6234,John David Anglin,HPPA NaN compares wrong,"In some cases comparing a not-a-number against an ordinary floating point value comes out true.Release:2.95.2Environment:HP-UX muneca B.11.00 A 9000/780How-To-Repeat:If the right code is generated then the it should print out GOODbash-2.04$ gcc -v -save-temps -Wall -O2 -fno-strict-aliasing gcc_nan_bug.c -lm -o gcc_nan_bug.exe && ./gcc_nan_bug.exe && echo OKReading specs from /src/sicstus/install/hppa-hpux-B.11.00/lib/gcc-lib/hppa2.0n-hp-hpux11.00/2.95.2/specsgcc version 2.95.2 19991024 (release)GNU CPP version 2.95.2 19991024 (release) (hppa)#include ""..."" search starts here:#include <...> search starts here: /src/sicstus/install/hppa-hpux-B.11.00/include /src/sicstus/install/hppa-hpux-B.11.00/lib/gcc-lib/hppa2.0n-hp-hpux11.00/2.95.2/../../../../hppa2.0n-hp-hpux11.00/include /src/sicstus/install/hppa-hpux-B.11.00/lib/gcc-lib/hppa2.0n-hp-hpux11.00/2.95.2/include /usr/includeEnd of search list.The following default directories have been omitted from the search path: /src/sicstus/install/hppa-hpux-B.11.00/lib/gcc-lib/hppa2.0n-hp-hpux11.00/2.95.2/../../../../include/g++-3End of omitted list. /src/sicstus/install/hppa-hpux-B.11.00/lib/gcc-lib/hppa2.0n-hp-hpux11.00/2.95.2/cc1 gcc_nan_bug.i -quiet -dumpbase gcc_nan_bug.c -O2 -Wall -version -fno-strict-aliasing -o gcc_nan_bug.sGNU C version 2.95.2 19991024 (release) (hppa2.0n-hp-hpux11.00) compiled by CC. as -o gcc_nan_bug.o gcc_nan_bug.s /src/sicstus/install/hppa-hpux-B.11.00/lib/gcc-lib/hppa2.0n-hp-hpux11.00/2.95.2/collect2 -L/lib/pa1.1 -L/usr/lib/pa1.1 -z -u main -o gcc_nan_bug.exe /lib/crt0.o -L/src/sicstus/install/hppa-hpux-B.11.00/lib/gcc-lib/hppa2.0n-hp-hpux11.00/2.95.2 -L/src/sicstus/install/hppa-hpux-B.11.00/lib gcc_nan_bug.o -lm -lgcc -lc -lgccisnan(posnan) posnan is nanERROR",RESOLVED          FIXED      
6288,John David Anglin,libg2c.sl.0.0 and libobjc.sl.1.0 are linked to libgcc_s.sl in build directory after installation,"In the process, I discovered that libg2c.sl.0.0 andlibobjc.sl.1.0 are linked to libgcc_s.slin the build directory after installation:# chatr libg2c.sl.0.0         [...]         internal name:             libg2c.sl.0         shared library list:             dynamic   /usr/lib/libm.2             dynamic   /usr/lib/libc.2             dynamic   /xxx/gnu/gcc-3.1/objdir/gcc/libgcc_s.slThe installation/build process has incorrectly linkedagainst libgcc_s.sl in my build directory rather thanagainst the newly installed version in the installationdirectory.  When libgcc_s.sl is removed from the builddirectory, the dynamic loader is unable to find libgcc_s.sland applications linked against the libraries nolongerrun.April 14, 2002Libstdc++.sl also has the same problem.  The problem islibtool doesn't do the necessary relinking of the libraryprior to installation.  This is necessary because anabsolute path is used for the dependency on libgcc_s.sl.Here is the installation log under hpux:/bin/sh ../libtool  --mode=install /bin/sh /xxx/gnu/gcc-3.2/gcc/install-sh -c libstdc++.la /opt/gnu/lib/libstdc++.la/bin/sh /xxx/gnu/gcc-3.2/gcc/install-sh -c .libs/libstdc++.sl.4.0 /opt/gnu/lib/libstdc++.sl.4.0(cd /opt/gnu/lib && rm -f libstdc++.sl.4 && ln -s libstdc++.sl.4.0 libstdc++.sl.4)(cd /opt/gnu/lib && rm -f libstdc++.sl && ln -s libstdc++.sl.4.0 libstdc++.sl)chmod 555 /opt/gnu/lib/libstdc++.sl.4.0/bin/sh /xxx/gnu/gcc-3.2/gcc/install-sh -c .libs/libstdc++.lai /opt/gnu/lib/libstdc++.la/bin/sh /xxx/gnu/gcc-3.2/gcc/install-sh -c .libs/libstdc++.a /opt/gnu/lib/libstdc++.atrue /opt/gnu/lib/libstdc++.achmod 644 /opt/gnu/lib/libstdc++.aIn general, libtool needs to relink shared libraries duringinstallation under hpux when these libraries depend on otherlibraries in the package being installed.  Another optionmight be not to hard code the paths used in the link forthe library.  This would then require the use of SHLIB_PATHduring testsuite execution, etc.Release:gcc 3.1 (prerelease)Environment:hppa[1.1,2.0w]-hp-hpux[10,11].*",RESOLVED          FIXED      
6370,John David Anglin,hppa2.0w-hp-hpux11.11 and hppa-linux gcc-3.2 bootstrap failure in stage2 compiling genrecog.c,"stage1/xgcc -Bstage1/ -B/opt/gnu/hppa2.0w-hp-hpux11.11/bin/ -c -DIN_GCC    -g -O2 -W -Wall -Wwrite-strings -Wstrict-prototypes -Wmissing-prototypes -Wtraditional -pedantic -Wno-long-long  -DHAVE_CONFIG_H -DGENERATOR_FILE    -I. -I. -I../../gcc/gcc -I../../gcc/gcc/. -I../../gcc/gcc/config -I../../gcc/gcc/../include ../../gcc/gcc/genrecog.c -o genrecog.o../../gcc/gcc/genrecog.c: In function `make_insn_sequence':../../gcc/gcc/genrecog.c:2609: Internal compiler error in simplify_gen_subreg, at simplify-rtx.c:2495This failure appears to be identical to target/6369.  Ithas been introduced in the last few hours.Release:gcc version 3.2 20020418 (experimental)Environment:hppa2.0w-hp-hpux11.11 and hppa-linux",RESOLVED          FIXED      
6394,John David Anglin,Bad register allocation and optimization causes address to be loaded into FP register and ICE,"An ICE occurs building gv.c from perl-5.7.3 when generatingPA2.0 code.  This is the default for hppa64 and can be specified with ""-mpa-risc-2-0"" for 32bit environments.The ICE is caused by the lack of an insn pattern to loadan address into floating point register:(insn 2998 2996 3000 (set (reg:DI 50 %fr22 [714])        (mem/u:DI (lo_sum:DI (reg:DI 1 %r1 [715])                (unspec:DI[                        (symbol_ref:DI (""PL_sv_yes""))                    ]  0)) [0 S8 A64])) 119 {*pa.md:3106} (insn_list 2996 (nil))    (nil))The cost for this opration is 16 and under normal situationsthis prevents it from ever happening.  This only occurs with-O1 and -O2 (-O).The machine definition could be fixed to handle this case.However, the root of the problem is a problem in registerallocation and optimization.  This is the final code at-O:        cmpib,= 0,%r3,L$1012        addil LT'PL_sv_no,%r27        addil LT'PL_sv_yes,%r27        b L$1013        fldd RT'PL_sv_yes(%r1),%fr22L$1012        fldd RT'PL_sv_no(%r1),%fr22L$1013        fstd %fr22,-272(%r30)        b L$0783        ldd -272(%r30),%r25        [...]L$1017        copy %r28,%r25L$0783        copy %r25,%r28        [restore registers and return]As can be seen, the resulting code is incredibly bad.  Theaddresses are loaded into %fr22, copied to the stack, thento %r25, then to %r28.  There was no reason to select %fr22 for the address.  Any of %r1, %r25 or %r28 (the return value) could have been used instead and resulted in better assemblycode.Release:gcc-3.1 (prerelease)Environment:hppa*-hp-* PA2.0 code generationHow-To-Repeat:gcc -O gv.i 64bitorgcc -O -mpa-risc-2-0 gv.i",RESOLVED          FIXED      
6455,John David Anglin,hppa1.1-proelf 3.1 ICE building newlib,"../../../../../gcc-3.1-20020423/newlib/libc/stdlib/ldtoa.c: In function `emovo':../../../../../gcc-3.1-20020423/newlib/libc/stdlib/ldtoa.c:652: Attempt to delete prologue/epilogue insn:(insn 275 291 277 (set (reg:SI 2 %r2)        (mem:SI (plus:SI (reg/f:SI 30 %r30)                (const_int -84 [0xffffffac])) [0 S4 A32])) -1 (nil)    (nil))../../../../../gcc-3.1-20020423/newlib/libc/stdlib/ldtoa.c:652: Internal compiler error in propagate_one_insn, at flow.c:1615Please submit a full bug report,with preprocessed source if appropriate.Release:gcc 3.1-20020423Environment:target hppa1.1-proelf, newlib CVS, binutils 2.12How-To-Repeat:Although this is tripped on an embedded target, I believethere is every chance it is applicable to HP-UX.  Pleasetry the attached code on HP-UX at -O2.",RESOLVED          FIXED      
6495,John David Anglin,"no entities of ""Os_Primitives"" are referenced","The following error occurs building gnatlib_and_tools:../../xgcc -B../../ -c -g -O2 -g -O2 -W -Wall -gnatpg -I. -I/home/dave/gcc-3.2/gcc/gcc/ada s-taprop.adbs-taprop.adb:48:12: warning: no entities of ""Os_Primitives"" are referencedmake[2]: *** [s-taprop.o] Error 1make[2]: Leaving directory `/home/dave/gcc-3.2/objdir/gcc/ada/rts'make[1]: *** [gnatlib] Error 2make[1]: Leaving directory `/home/dave/gcc-3.2/objdir/gcc/ada'make: *** [gnatlib] Error 2Release:gcc 3.2 20020426 (experimental)Environment:hppa-linux",RESOLVED          FIXED      
6501,John David Anglin,ctype_noninline.h:45: `__SB_masks' undeclared,"/xxx/gnu/gcc-3.1/objdir/gcc/xgcc -shared-libgcc -B/xxx/gnu/gcc-3.1/objdir/gcc/ -nostdinc++ -L/xxx/gnu/gcc-3.1/objdir/hppa1.1-hp-hpux10.20/libstdc++-v3/src -L/xxx/gnu/gcc-3.1/objdir/hppa1.1-hp-hpux10.20/libstdc++-v3/src/.libs -B/opt/gnu/hppa1.1-hp-hpux10.20/bin/ -B/opt/gnu/hppa1.1-hp-hpux10.20/lib/ -isystem /opt/gnu/hppa1.1-hp-hpux10.20/include -nostdinc++ -I/xxx/gnu/gcc-3.1/objdir/hppa1.1-hp-hpux10.20/libstdc++-v3/include/hppa1.1-hp-hpux10.20 -I/xxx/gnu/gcc-3.1/objdir/hppa1.1-hp-hpux10.20/libstdc++-v3/include -I../../../../gcc/libstdc++-v3/libsupc++ -I../../../../gcc/libstdc++-v3/libmath -g -O2 -fno-implicit-templates -Wall -Wno-format -W -Wwrite-strings -Winline -fdiagnostics-show-location=once -g -c ../../../../gcc/libstdc++-v3/src/locale.cc  -fPIC -DPIC -o .libs/locale.oIn file included from ../../../../gcc/libstdc++-v3/src/locale.cc:406:/xxx/gnu/gcc-3.1/objdir/hppa1.1-hp-hpux10.20/libstdc++-v3/include/hppa1.1-hp-hpux10.20/bits/ctype_noninline.h: In   constructor `std::ctype<char>::ctype(int*, const unsigned int*, bool,   unsigned int)':/xxx/gnu/gcc-3.1/objdir/hppa1.1-hp-hpux10.20/libstdc++-v3/include/hppa1.1-hp-hpux10.20/bits/ctype_noninline.h:45: `   __SB_masks' undeclared (first use this function)/xxx/gnu/gcc-3.1/objdir/hppa1.1-hp-hpux10.20/libstdc++-v3/include/hppa1.1-hp-hpux10.20/bits/ctype_noninline.h:45: (Each   undeclared identifier is reported only once for each function it appears   in.)Under hpux 11, the macro version of the ctype functions isthe default.  However, under hpux 10, it appears that weneed to define _SB_CTYPE_MACROS to obtain the macro versionof the ctype functions.Release:gcc 3.1 20020427 (prerelease)Environment:hppa1.1-hp-hpux10.20",RESOLVED          FIXED      
6550,John David Anglin,gcc.c-torture/compile/20000504-1.c:15: internal error: Segmentation fault,Executing on host: /xxx/gnu/gcc-3.2/objdir/gcc/xgcc -B/xxx/gnu/gcc-3.2/objdir/gcc/  -w  -O1   -c  -o /xxx/gnu/gcc-3.2/objdir/gcc/testsuite/20000504-1.o /xxx/gnu/gcc-3.2/gcc/gcc/testsuite/gcc.c-torture/compile/20000504-1.c    (timeout = 300)/xxx/gnu/gcc-3.2/gcc/gcc/testsuite/gcc.c-torture/compile/20000504-1.c: In function `func':/xxx/gnu/gcc-3.2/gcc/gcc/testsuite/gcc.c-torture/compile/20000504-1.c:15: internal error: Segmentation faultThis test does not fail on 3.1 branch.  This regression wasfirst observed on 20020306.Release:gcc 3.2 (experimental)Environment:hppa2.0w-hp-hpux11* and hppa-linux,RESOLVED          FIXED      
6551,John David Anglin,"FAIL: gcc.c-torture/execute/950704-1.c execution,  -O2 and -Os",The test aborts during execution.  This test does notfail on the 3.1 branch.  The FAIL on the mainline wasfirst observed on 20020501 and may be related to thenew DFA scheduler.Release:gcc 3.2 (experimental)Environment:hppa2.0w-hp-hpux11*,RESOLVED          FIXED      
6639,John David Anglin,Infinite loop in contrib/test_summary,"When the number of FAILs in a testsuite run is large,contrib/test_summary appears to processes the input logfiles more than once.  There must be a buffer overflowsomewhere.See<http://gcc.gnu.org/ml/gcc-testresults/2002-05/msg00437.html> for an example of the problem.  When the number of FAILs iseven larger, test_summary will loop until it fills the file system.Release:Various (gcc 3.x).Environment:Various (hppa*-*-*, vax*-*-*).",RESOLVED          FIXED      
6696,John David Anglin,/usr/ccs/bin/ld: Can't find library for -lpthread,"The following error occurs during ""make gnatlib_and_tools"":../../xgcc -B../../ -DIN_GCC   `echo -g -W -Wall -Wwrite-strings -Wstrict-prototypes -Wmissing-prototypes -Wtraditional -pedantic -Wno-long-long |sed -e 's/-pedantic//g' -e 's/-Wtraditional//g'`   -o ../../gnatmake b_gnatm.o ali.o ali-util.o alloc.o atree.o binderr.o butil.o casing.o csets.o debug.o einfo.o elists.o errout.o fmap.o fname.o fname-uf.o fname-sf.o gnatmake.o gnatvsn.o hostparm.o krunch.o lib.o make.o makeusg.o mlib.o mlib-fil.o mlib-prj.o mlib-tgt.o mlib-utl.o namet.o nlists.o opt.o osint.o osint-m.o output.o prj.o prj-attr.o prj-com.o prj-dect.o prj-env.o prj-ext.o prj-nmsc.o prj-pars.o prj-part.o prj-proc.o prj-strt.o prj-tree.o prj-util.o rident.o scans.o scn.o sdefault.o sfn_scan.o sinfo.o sinfo-cn.o sinput.o sinput-l.o sinput-p.o snames.o stand.o stringt.o style.o stylesw.o validsw.o switch.o switch-m.o switch-c.o table.o targparm.o tree_io.o types.o uintp.o uname.o urealp.o usage.o widechar.o \      ../../prefix.o ../rts/libgnat.a  ../../../libiberty/libiberty.a  /usr/lib/libcl.a -lpthread/usr/ccs/bin/ld: Can't find library for -lpthreadcollect2: ld returned 1 exit statusmake[2]: *** [../../gnatmake] Error 1make[2]: Leaving directory `/xxx/gnu/gcc-3.1/objdir/gcc/ada/tools'HPUX 10.20 uses dce threads, not pthreads.Release:gcc version 3.2 20020516 (experimental)Environment:hppa1.1-hp-hpux10.20",RESOLVED          FIXED      
6867,John David Anglin,GCC 3.1 bootstrap fails for HPPA with -march=2.0,"During the bootstrap the generated stage1 and stage2 compiler fail on the following modules:gcc/global.c:stage1/xgcc -Bstage1/ -B/disks/gsm_ui/software/hppa2.0-hp-hpux11.11/hppa2.0-hp-hpux11.11/bin/ -c -DIN_GCC    -g -O2 -W -Wall -Wwrite-strings -Wstrict-prototypes -Wmissing-prototypes -Wtraditional -pedantic -Wno-long-long  -DHAVE_CONFIG_H    -I. -I. -I../../../../src/gcc-3.1/gcc -I../../../../src/gcc-3.1/gcc/. -I../../../../src/gcc-3.1/gcc/config -I../../../../src/gcc-3.1/gcc/../include ../../../../src/gcc-3.1/gcc/global.c -o global.o../../../../src/gcc-3.1/gcc/global.c: In function `expand_preferences':../../../../src/gcc-3.1/gcc/global.c:882: insn does not satisfy its constraints:(insn 807 805 162 (set (reg:SI 72 %fr24)        (mem/f:SI (lo_sum:SI (reg/f:SI 9 %r9 [156])                (symbol_ref:SI (""allocno_row_words""))) [2 allocno_row_words+0 S4 A32])) 68 {*pa.md:2088} (nil)    (nil))../../../../src/gcc-3.1/gcc/global.c:882: Internal compiler error in reload_cse_simplify_operands, at reload1.c:8368gcc/sched-rgn.c:stage1/xgcc -Bstage1/ -B/disks/gsm_ui/software/hppa2.0-hp-hpux11.11/hppa2.0-hp-hpux11.11/bin/ -c -DIN_GCC    -g -O2 -W -Wall -Wwrite-strings -Wstrict-prototypes -Wmissing-prototypes -Wtraditional -pedantic -Wno-long-long  -DHAVE_CONFIG_H    -I. -I. -I../../../../src/gcc-3.1/gcc -I../../../../src/gcc-3.1/gcc/. -I../../../../src/gcc-3.1/gcc/config -I../../../../src/gcc-3.1/gcc/../include ../../../../src/gcc-3.1/gcc/sched-rgn.c -o sched-rgn.o../../../../src/gcc-3.1/gcc/sched-rgn.c: In function `init_ready_list':../../../../src/gcc-3.1/gcc/sched-rgn.c:2078: insn does not satisfy its constraints:(insn 836 834 106 (set (reg:SI 69 %fr22R)        (mem/f:SI (lo_sum:SI (reg/f:SI 5 %r5 [142])                (symbol_ref:SI (""rgn_nr_edges""))) [3 rgn_nr_edges+0 S4 A32])) 68 {*pa.md:2088} (nil)    (nil))../../../../src/gcc-3.1/gcc/sched-rgn.c:2078: Internal compiler error in reload_cse_simplify_operands, at reload1.c:8368gcc/f/data.c:stage1/xgcc -Bstage1/ -B/disks/gsm_ui/software/hppa2.0-hp-hpux11.11/hppa2.0-hp-hpux11.11/bin/ -c -DIN_GCC    -g -O2 -W -Wall -Wwrite-strings -Wstrict-prototypes -Wmissing-prototypes   -DHAVE_CONFIG_H    -I. -If -I../../../../src/gcc-3.1/gcc -I../../../../src/gcc-3.1/gcc/f -I../../../../src/gcc-3.1/gcc/config -I../../../../src/gcc-3.1/gcc/../include ../../../../src/gcc-3.1/gcc/f/data.c -o f/data.o../../../../src/gcc-3.1/gcc/f/data.c: In function `ffedata_advance_':../../../../src/gcc-3.1/gcc/f/data.c:655: insn does not satisfy its constraints:(insn 2674 552 571 (set (reg:DI 72 %fr24 [327])        (mem/f:DI (lo_sum:SI (reg/f:SI 5 %r5 [865])                (symbol_ref:SI (""ffedata_arraysize_""))) [28 ffedata_arraysize_+0 S8 A64])) 118 {*pa.md:3087} (nil)    (nil))../../../../src/gcc-3.1/gcc/f/data.c:655: Internal compiler error in reload_cse_simplify_operands, at reload1.c:8368The modules compile fine when I remove the ""-O2"" from the command line.Release:3.1Environment:hppa2.0-hp-hpux11.11How-To-Repeat:I wanted to create a GCC which generats PA2.0 code as default. I studied the configuration and modified in gcc/config.gcc hppa1.1-*-hpux11* | hppa2*-*-hpux11*)        target_cpu_default=""MASK_PA_11""to hppa1.1-*-hpux11* | hppa2*-*-hpux11*)        target_cpu_default=""(MASK_PA_11|MASK_PA_20)""After that I ran the configure & make bootstrap-lean.To verify the problem I bootstrapped GCC 3.1 without any changes, ie. it will generate PA1.1 code. After the bootstrap was complete I compiled the 3 modules with ""-march=2.0"" and got the same error message.",RESOLVED          FIXED      
6889,John David Anglin,"genattrtab: Internal error: abort in make_numeric_value, at ../../gcc/gcc/genattrtab.c:5931","./genattrtab ../../gcc/gcc/config/pa/pa.md > tmp-attrtab.cCheck description...doneReservation transformation...doneIn stage1, the following error occurs:Create automaton `pa700'...doneCreate automaton `pa7100'...doneCreate automaton `pa7100lc'...doneCreate automaton `pa8000'...doneGeneration of attributes...genattrtab: Internal error: abort in make_numeric_value, at ../../gcc/gcc/genattrtab.c:5931make[2]: *** [s-attrtab] Error 1Release:gcc 3.2 20020531 (experimental)Environment:hppa64-hp-hpux11*",RESOLVED          FIXED      
7162,John David Anglin,Miscellaneous ISO features in gengtype.c,"cc -c -DIN_GCC    -g    -DHAVE_CONFIG_H -DGENERATOR_FILE    -I. -I. -I../../gcc/gcc -I../../gcc/gcc/. -I../../gcc/gcc/config -I../../gcc/gcc/../include \  ../../gcc/gcc/gengtype.c -o gengtype.o(Bundled) cc: warning 480: The -g option is available only with the C/ANSI C product; ignored.(Bundled) cc: ""../../gcc/gcc/gengtype.c"", line 591: error 1588: ""o"" undefined.(Bundled) cc: ""../../gcc/gcc/gengtype.c"", line 591: error 1532: Reference through a non-pointer.(Bundled) cc: ""../../gcc/gcc/gengtype.c"", line 591: error 1532: Reference through a non-pointer.(Bundled) cc: ""../../gcc/gcc/gengtype.c"", line 591: error 1563: Expression in if must be scalar.(Bundled) cc: ""../../gcc/gcc/gengtype.c"", line 593: error 1532: Reference through a non-pointer.(Bundled) cc: ""../../gcc/gcc/gengtype.c"", line 593: error 1600: Type clash on initialization.(Bundled) cc: ""../../gcc/gcc/gengtype.c"", line 598: error 1532: Reference through a non-pointer.(Bundled) cc: ""../../gcc/gcc/gengtype.c"", line 596: error 1565: Expression in do must be scalar.(Bundled) cc: ""../../gcc/gcc/gengtype.c"", line 599: error 1532: Reference through a non-pointer.(Bundled) cc: ""../../gcc/gcc/gengtype.c"", line 599: error 1532: Reference through a non-pointer.(Bundled) cc: ""../../gcc/gcc/gengtype.c"", line 599: error 1549: Modifiable lvalue required for assignment operator.(Bundled) cc: ""../../gcc/gcc/gengtype.c"", line 600: error 1532: Reference through a non-pointer.(Bundled) cc: ""../../gcc/gcc/gengtype.c"", line 600: error 1549: Modifiable lvalue required for assignment operator.(Bundled) cc: ""../../gcc/gcc/gengtype.c"", line 602: error 1532: Reference through a non-pointer.(Bundled) cc: ""../../gcc/gcc/gengtype.c"", line 602: error 1532: Reference through a non-pointer.(Bundled) cc: ""../../gcc/gcc/gengtype.c"", line 603: error 1532: Reference through a non-pointer.(Bundled) cc: ""../../gcc/gcc/gengtype.c"", line 603: error 1549: Modifiable lvalue required for assignment operator.(Bundled) cc: ""../../gcc/gcc/gengtype.c"", line 610: error 1705: Function prototypes are an ANSI feature.Release:gcc 3.2 20020629 experimentalEnvironment:hppa2.0w-hp-hpux11.11",RESOLVED          FIXED      
7163,John David Anglin,gengtype-lex.c: libiberty.h: redeclaration of xmalloc,"cc -c -DIN_GCC    -g    -DHAVE_CONFIG_H -DGENERATOR_FILE    -I. -I. -I../../gcc/gcc -I../../gcc/gcc/. -I../../gcc/gcc/config -I../../gcc/gcc/../include \  ../../gcc/gcc/gengtype-lex.c -o gengtype-lex.o(Bundled) cc: warning 480: The -g option is available only with the C/ANSI C product; ignored.(Bundled) cc: ""../../gcc/gcc/../include/libiberty.h"", line 218: error 1584: Inconsistent type declaration: ""xmalloc"".(Bundled) cc: ""../../gcc/gcc/../include/libiberty.h"", line 224: error 1584: Inconsistent type declaration: ""xrealloc"".Release:gcc 3.2 20020629 experimentalEnvironment:hppa2.0w-hp-hpux11.11",RESOLVED          FIXED      
7169,John David Anglin,"/usr/ccs/bin/ld: Unsatisfied symbols: libiconv, libiconv_open, libiconv_close","stage1/xgcc -Bstage1/ -B/opt/gnu/hppa2.0w-hp-hpux11.11/bin/ -DIN_GCC    -g -O2 -W -Wall -Wwrite-strings -Wstrict-prototypes -Wmissing-prototypes -Wtraditional -pedantic -Wno-long-long  -DHAVE_CONFIG_H  -o jc1 \        java/parse.o java/class.o java/decl.o java/expr.o java/constants.o java/lang.o java/typeck.o java/except.o java/verify.o java/zextract.o java/jcf-io.o java/jcf-parse.o java/mangle.o java/mangle_name.o java/builtins.o java/jcf-write.o java/buffer.o java/check-init.o java/jcf-depend.o java/jcf-path.o java/xref.ojava/boehm.o mkdeps.o main.o libbackend.a -L../zlib -lz    ../libiberty/libiberty.a/usr/ccs/bin/ld: Unsatisfied symbols:   libiconv (first referenced in java/parse.o) (code)   libiconv_open (first referenced in java/parse.o) (code)   libiconv_close (first referenced in java/parse.o) (code)collect2: ld returned 1 exit statusI think what is happening is that the GNU version oflibiconv installed in /opt/gnu is not found becausethe GNU iconv.h has ""const"" in the prototype foriconv_open:  extern iconv_t iconv_open (const char* tocode, const char* fromcode);configure then detects the HP iconv in libc and as aresult we have#define HAVE_ICONV 1#define ICONV_CONSTin auto-host.h andLIBICONV=in the gcc/MakefileHowever, gcc uses the GNU iconv.h header in the build.I think the fix is for the configure test program to define""const"" to """" when it does its declaration checks witha non ISO compiler.Release:3.1.1 20020628 (prerelease)Environment:hppa2.0-hp-hpux11.11How-To-Repeat:export CC=cc../gcc/configure --with-gnu-as --with-as=/opt/gnu/bin/as --enable-shared --disable-nls --prefix=/opt/gnu &&make bootstrap &&",RESOLVED          FIXED      
7182,John David Anglin,"make[4]: *** No rule to make target `/xxx/gnu/gcc-3.2/gcc/libstdc++-v3/include/backward/strstream', needed by `stamp-backward'.","make[4]: *** No rule to make target `/xxx/gnu/gcc-3.2/gcc/libstdc++-v3/include/backward/strstream', needed by `stamp-backward'.  Stop.Release:3.2 20020701 (experimental)Environment:hppa2.0w-hp-hpux11.11",RESOLVED          FIXED      
7512,John David Anglin,ld getting passed incorrect options with hppa64-hp-hpux11.00,"When g++ is asked to build a shared library through the-shared option on hppa64-hp-hpux11.00 I get the followingerror:ld: Unrecognized argument: -sharedFatal error.collect2: ld returned 1 exit statusRelease:3.1.1How-To-Repeat:// Begin foo.C#include <iostream>int main() {  std::cout << ""Hello world."" << std::endl;}// End foo.CI built g++ using the configure options of--host=hppa64-hp-hpux11.00--disable-shared--disable-threads--without-gnu-ld--with-ld=/usr/ccs/bin/ld--with-gnu-as--with-as=/PATH_TO_BINUTILS/as--enable-languages=c,c++I get the error with the following compile lines:g++ -c foo.Cg++ -shared foo.o -o foo.sl",RESOLVED          FIXED      
8023,John David Anglin,Miscompilation of function grokdeclarator in c-decl.c at -O1 and above,"The following test program  char short *x23;should warn that a ""long or short"" was ""specified withchar"".  In trying to determine why the compiler doesn'twarn, I found that the variable specbits is treated ininconsistently.The type of specbits is int (32 bits) but it appears thatthe compiler decides to treat it as a long (64 bits).  However,there is a mixup in the subreg access.  In some cases, itis accessed at offset 4 (correct) and in other cases itis accessed at offset 0 (incorrect).We have the following code and corresponding rtl at -O1for the initialization of specbits at 387 of c-decl.c:  specbits |= 1 << (int) i;(note 511 510 512 (""grokdeclarator.c"") 387)(insn 512 511 513 0000000000000000 (set (reg:SI 215)        (minus:SI (const_int 31 [0x1f])            (subreg:SI (reg/v:DI 182) 4))) -1 (nil)    (nil))(insn 513 512 514 0000000000000000 (set (reg:SI 214)        (ashift:SI (const_int 1 [0x1])            (minus:SI (const_int 31 [0x1f])                (reg:SI 215)))) -1 (nil)    (expr_list:REG_EQUAL (ashift:SI (const_int 1 [0x1])            (subreg:SI (reg/v:DI 182) 4))        (nil)))(insn 514 513 515 0000000000000000 (set (reg:SI 216)        (ior:SI (reg:SI 214)            (subreg/s:SI (reg/v:DI 74) 4))) -1 (nil)    (nil))(insn 515 514 516 0000000000000000 (set (reg/v:DI 74)        (sign_extend:DI (reg:SI 216))) -1 (nil)    (nil))Then, up to line 478, specbits is accessed at offset 4in DI 74, but a line 478      if ((specbits & 1 << (int) RID_LONG)          && (specbits & 1 << (int) RID_SHORT))        error (""both long and short specified for `%s'"", name);the following rtl is generated(note 882 881 883 (""grokdeclarator.c"") 478)(insn 883 882 884 0000000000000000 (set (reg:SI 328)        (const_int 132 [0x84])) -1 (nil)    (nil))(insn 884 883 885 0000000000000000 (set (reg:SI 327)        (and:SI (subreg:SI (reg/v:DI 74) 0)            (reg:SI 328))) -1 (nil)    (nil))So, the generated assembly code ands SI 327 with thehigh-order 32 bits instead of the low-order 32 bitsof DI 74.  This is why the proper warnings are notbeing generated.This doesn't appear to be a regression as 3.2 has thesame behavior as 3.3.  The code generated at -O0 isok.Release:gcc 3.2 and 3.3 (experimental)Environment:hppa64-hp-hpux11.00",RESOLVED          FIXED      
8288,John David Anglin,gcc asm extension on hppa lakes to access parts of 64bits int,"(see PR 8162)On hppa linux (32bits), I try to implement evms tools to manage lvm. That works without problems until release 1.1.0 which used put_user(x,ptr) with x a 64bits long int (which seems to became 'legal'). But under hppa linux this code is not yet supported with a 32bits kernel (and it is written in asm extension).Even thought mips 32bits implements it. There (linux/include/asm-mips/uaccess.h) I discover that it is possible with some prefix (D, M, L, IIRC) to access to the two (32bits) int part of a 64bits long int.So I just try the small attached example to see if it is also foreseen with hppa release. As it failled by reporting me: Internal compiler error in print operand, at config/pa/pa.cplease submit a full bug report... , I do it because I reach to implement something working with pointer but it broken the  structure of the actual implementation and makes it also more complexe.Thanks in advance for your attention and futher help,    JoelRelease:3.0 (and later)Environment:hppa linux [Debian unstable];gcc -v       Reading specs from /usr/lib/gcc-lib/hppa-linux/3.0.4/specsConfigured with: ../src/configure -v --enable-languages=c,c++,f77,objc --prefix=/usr --infodir=/share/info --mandir=/share/man --enable-shared --with-gnu-as --with-gnu-ld --with-system-zlib --enable-long-long --enable-nls --without-included-gettext --disable-checking --enable-threads=posix --with-cpp-install-dir=bin --enable-objc-gc hppa-linuxThread model: posixgcc version 3.0.4How-To-Repeat:gcc -Wall -o tu64 TU64-3.c",RESOLVED          FIXED      
8360,John David Anglin,HP-UX gcc 3.2 does not construct global/static objects when using 'shl_load',"A problem exists where global/static objects are not getting constructed in a shared library that is dynamically loaded using HP 'shl_load' interface. If the library is linked during compile time, the objects are constructed without problem.The shared library and executable are both compiled using g++ 3.2. Here are the commands used to build,which are provided in a Makefile:        g++ -fPIC -c test_shared.cpp -o test_shared.o        g++ -shared -fPIC test_shared.o -o libtestsh.sl        g++ -fPIC -lpthread -ldld -L. test.cpp -o testThis problem seems to be related to HP-UX specific. The testcase provided works on Linux without errors.Please advise.Release:gcc 3.2 on HP-UXEnvironment:HP-UX 11.0How-To-Repeat:use testcase on a HP-UX 11.0 system",RESOLVED          FIXED      
8694,John David Anglin,<string> breaks <ctype.h> on HP-UX 10.20,"Including <string> breaks <ctype.h> on HP-UX 10.20 with gcc 3.1 or gcc 3.2. For example compiling the attached foo.cc results in an error:$ ####################################$ # with the gcc-3.2 compiler: ERROR #$ ####################################$ /usr/local/gcc-3.2.1/bin/g++ -vReading specs from /usr/local/gcc-3.2.1/lib/gcc-lib/hppa1.1-hp-hpux10.20/3.2.1/specsConfigured with: ../gcc-3.2.1/configure --prefix=/usr/local/gcc-3.2.1 --enable-shared --with-gnu-as --with-as=/opt/binutils/bin/as --without-gnu-ldThread model: singlegcc version 3.2.1$ /usr/local/gcc-3.2.1/bin/g++ -c foo.ccfoo.cc: In function `int main()':foo.cc:4: `_isprint' undeclared (first use this function)foo.cc:4: (Each undeclared identifier is reported only once for each function   it appears in.)$ $ #################################$ # with the gcc-3.0 compiler: OK #$ #################################$ /opt/gcc-3.0.2/bin/g++ -vReading specs from /opt/gcc-3.0.2/lib/gcc-lib/hppa1.1-hp-hpux10.20/3.0.2/specsConfigured with: /tmp/gcc-3.0.2/configure --prefix=/opt/gcc-3.0.2 --enable-shared --with-gnu-as --without-gnu-ld --enable-languages=c++Thread model: singlegcc version 3.0.2$ /opt/gcc-3.0.2/bin/g++ -c foo.cc$ The error seems to be caused by <string> defining _SB_CTYPE_MACROS, which breaks <ctype.h> on HP-UX 10.20.This error has been introduced in gcc-3.1. It looks like a regression caused by this bad fix:http://gcc.gnu.org/cgi-bin/gnatsweb.pl?cmd=view%20audit-trail&database=gcc&pr=6501The broken file is:include/c++/3.2.1/hppa1.1-hp-hpux10.20/bits/os_defines.hand it looks like:// Use macro form of ctype functions to ensure __SB_masks is defined.#define _SB_CTYPE_MACROS 1Release:gcc-3.2.1Environment:$ uname -srvmiHP-UX B.10.20 A 9000/715 2000649461How-To-Repeat:compile the attached file on HP-UX 10.20 using gcc-3.1 or gcc-3.2",RESOLVED          FIXED      
8705,John David Anglin,"[3.2 regression] [HP-PA] ICE in emit_move_insn_1, at expr.c:3101","Compile fails with internal compiler error when -O2 is used on this piece of code(preprocessed):# 1 ""bug.c""# 1 ""<built-in>""# 1 ""<command line>""# 1 ""bug.c""int main(void){        double a,b,c,eps;        a = 4.0e0/3.0e0;        eps = 0.0e0;        while (eps == 0.0e0) {                b = a - 1.0e0;        }        return 0;}gcc -v -O2 bug.cReading specs from /tools/local/gcc64/lib/gcc-lib/hppa64-hp-hpux11.00/3.2/specsConfigured with: ../gcc-3.2/configure --disable-nls --host=hppa64-hp-hpux11.00 --without-gnu-ld --with-ld=/usr/ccs/bin/ld --with-gnu-as --with-as=/tools/local/bin/as --prefix=/tools/local/gcc64 --with-nm=/tools/local/bin/nm --disable-sharedThread model: singlegcc version 3.2 /tools/local/gcc64/lib/gcc-lib/hppa64-hp-hpux11.00/3.2/cc1 -lang-c -v -D__GNUC__=3 -D__GNUC_MINOR__=2 -D__GNUC_PATCHLEVEL__=0 -D__GXX_ABI_VERSION=102 -Dhppa -Dhp9000s800 -D__hp9000s800 -Dhp9k8 -DPWB -Dhpux -Dunix -D__hppa__ -D__hp9000s800__ -D__hp9000s800 -D__hp9k8__ -D__PWB__ -D__hpux__ -D__unix__ -D__hppa -D__hp9000s800 -D__hp9k8 -D__PWB -D__hpux -D__unix -Asystem=unix -Asystem=hpux -Acpu=hppa -Amachine=hppa -D__OPTIMIZE__ -D__STDC_HOSTED__=1 -D_PA_RISC1_1 -D__hp9000s700 -D_PA_RISC2_0 -D__hp9000s800 -D__LP64__ -D__LONG_MAX__=9223372036854775807L -D_HPUX_SOURCE -D_HIUX_SOURCE -D__STDC_EXT__ -D_INCLUDE_LONGLONG bug.c -quiet -dumpbase bug.c -O2 -version -o /var/tmp//ccwPmTpQ.sGNU CPP version 3.2 (cpplib) (hppa)GNU C version 3.2 (hppa64-hp-hpux11.00)        compiled by GNU C version 3.2.ignoring nonexistent directory ""/tools/local/gcc64/hppa64-hp-hpux11.00/include""#include ""..."" search starts here:#include <...> search starts here: /usr/local/include /tools/local/gcc64/include/tools/local/gcc64/lib/gcc-lib/hppa64-hp-hpux11.00/3.2/include /usr/includeEnd of search list.bug.c: In function `main':bug.c:11: Internal compiler error in emit_move_insn_1, at expr.c:3101Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.Release:gcc version 3.2 official releaseEnvironment:Machine is: hppa64-hp-hpux11.00 model:9000/780/J282Process used to build gcc 3.2 on above machine:set path = ( /opt/ansic/bin $path )setenv CC 'cc -Ae +DA2.0W'Building binutils 2.13.1./configure --prefix=/tools/local --disable-shared \ --disable-nls --host=hppa64-hp-hpux11.00Then building gcc 3.2:../gcc-3.2/configure --disable-nls \ --host=hppa64-hp-hpux11.00 --without-gnu-ld \ --with-ld=/usr/ccs/bin/ld --with-gnu-as --with-as=/tools/local/bin/as --prefix=/tools/local/gcc64 \ --with-nm=/tools/local/bin/nm --disable-shared && make bootstrap-leanHow-To-Repeat:gcc -O2 bug.c",RESOLVED          FIXED      
8886,John David Anglin,config/pa/pa.c uses poisoned ASM_OUTPUT_INTERNAL_LABEL,"gcc/gcc/config/pa/pa.c:6257:15: attempt to use poisoned \""ASM_OUTPUT_INTERNAL_LABEL""gcc/gcc/config/pa/pa.c: In function `output_millicode_call':gcc/gcc/config/pa/pa.c:6257: warning: implicit declaration of function \`ASM_OUTPUT_INTERNAL_LABEL'I think that the ASM_OUTPUT_INTERNAL_LABEL was in a !gascodepath. Despite having configured with --with-gnu-as and--with-as=/usr/local/bin/as, config.cache doesn't seemto have set gcc_cv_gas_{major,minor}_version.Release:gcc-3.4 bib experimentalEnvironment:hppa2.0n-hp-hpux11.0 with gcc-3.2 --with-gnu-asgas 2.11.1 & gas 2.13.1",RESOLVED          FIXED      
9031,John David Anglin,Cygnus configure versus libtool AC_PROG_LD macro,"# gcc -v -print-prog-name=ldReading specs from /opt/gnu64/lib/gcc-lib/hppa64-hp-hpux11.11/3.3/specs/usr/ccs/bin/ldIn the configuration of zlib, you see:checking for ld used by GCC... ldchecking if the linker (ld) is GNU ld... yesThe ld actually used by gcc is /usr/ccs/bin/ld.In a native build, Cygnus configure sets LD to ""ld"".This default can't be changed by the user except byediting the configure script.  If LD is not definedand we are using GCC, the macro AC_PROG_LD will setLD to the linker used by gcc.  The linker used by gccis the linker that libtool needs to use.  If the linkerused by gcc and ld are not the same (i.e., a linkerfor gcc was specified with --with-ld), then the wronglinker is used by libtool.  This results in the wronglinker being used to build zlib, binutils/bfd, ...In the case of binutils/bfd with gcc configured withHP ld, it causes the wrong options to be used linkinglibbfd.The AC_PROG_LD script only works correctly when LD isnot defined, or is defined to the linker used by gccwhen gcc is being used.I don't think Cygnus configure should unilaterally defineLD, especially without providing a way to override thedefault.  However, removing the define would appear tohave ramifications for almost all packages using Cygnusconfigure.  I think libtool really wants the ld usedby gcc, not any old linker.Robert Boehne, one the libtool maintainers, states thatLD is incorrectly set.Release:gcc-3.3, gcc-3.4, and probably earlierEnvironment:hppa64-hp-hpux11*,",RESOLVED          FIXED      
9275,John David Anglin,Should _SB_CTYPE_MACROS be defined on HP-UX 10.20?,"GCC 3.2.1 on HP-UX 10.20:   $ cat test.c#include <deque>#include <ctype.h>       intmain (void) {  char a;  isspace(a);}$ g++ test.ctest.c: In function `int main()':test.c:7: `_isspace' undeclared (first use this function)test.c:7: (Each undeclared identifier is reported only once for each function   it appears in.)In <ctype.h>:#  if defined(_SB_CTYPE_MACROS) && !defined(__lint)     extern unsigned int *__SB_masks;...#    define isspace(__c)        (__alnum = (__c), __alnum == -1 ? 0           \                                : __SB_masks ? __SB_masks[__alnum] & _ISSPACE \                                             : _isspace(__alnum))And, in /usr/local/include/c++/3.2.1/hppa2.0-hp-hpux10.20/bits/os_defines.h:// Use macro form of ctype functions to ensure __SB_masks is defined.#define _SB_CTYPE_MACROS 1However, there is no prototype for _isspace hence the error above.HP-UX 11.x solves this with the following in <ctype.h>:       extern int _isspace(int);So, how do we solve this on 10.20?Release:3.2.1Environment:HP-UX 10.20How-To-Repeat:$ cat test.c#include <deque>#include <ctype.h>intmain (void) {  char a;  isspace(a);}$ g++ test.ctest.c: In function `int main()':test.c:7: `_isspace' undeclared (first use this function)test.c:7: (Each undeclared identifier is reported only once for each function   it appears in.)",RESOLVED          FIXED      
9892,John David Anglin,g++.old-deja/g++.pt/static9.C regression,"From: Mark Mitchell <mark@codesourcery.com>To: dave.anglin@nrc-cnrc.gc.caCc: gcc-gnats@gcc.gnu.orgSubject: Re: c++/9892: g++.old-deja/g++.pt/static9.C regressionDate: 28 Feb 2003 17:32:33 -0800 On Fri, 2003-02-28 at 13:36, dave.anglin@nrc-cnrc.gc.ca wrote: >  > >Number:         9892 > >Category:       c++ > >Synopsis:       g++.old-deja/g++.pt/static9.C regression > >Confidential:   no  Here's the fix, committed on the mainline and branch after testing on i686-pc-linux-gnu.  (I tested that particular program with a cross compiler.)  This was another ASM_OUT_EXTERNAL problem, FYI.  Unfortunately, assemble_external triggers the creation of DECL_RTL, which is probably a design bug, but never-the-less a fact.  Please confirm that this fixes the problem for you and close the PR.  Thanks,  --  Mark Mitchell CodeSourcery, LLC mark@codesourcery.com",RESOLVED          FIXED      
10062,John David Anglin,"internal compiler error: in output_cbranch, at config/pa/pa.c: 5515","While trying to build LyX 1.3.0:/opt/TWWfsw/gcc33/bin/g++ -v -save-temps -DHAVE_CONFIG_H -I. -I. -I../../../src -I../../../src/ -I../../../src/frontends/ -I../../../images -I./qt2 -I/opt/TWWfsw/libqt31/include -I../../../boost -I../../../src/frontends/controllers -I/opt/TWWfsw/aiksaurus01/include -I/opt/TWWfsw/xpm/include -isystem /usr/include/X11R6 -DQT_CLEAN_NAMESPACE -DQT_GENUINE_STR -DQT_NO_TRANSLATION -O2 -march=1.1 -c Dialogs.CReading specs from /opt/TWWfsw/gcc33/lib/gcc-lib/hppa2.0w-hp-hpux11.00/3.3/specsConfigured with: /opt/build/gcc-3.3/configure --with-gnu-as --with-as=/opt/TWWfsw/gcc33/hppa2.0w-hp-hpux11.00/bin/as --with-included-gettext --enable-shared --enable-threads=posix --with-local-prefix=/opt/TWWfsw/gcc33 --prefix=/opt/TWWfsw/gcc33Thread model: posixgcc version 3.3 20030312 (prerelease) /opt/TWWfsw/gcc33/lib/gcc-lib/hppa2.0w-hp-hpux11.00/3.3/cc1plus -E -D__GNUG__=3 -quiet -v -I. -I. -I../../../src -I../../../src/ -I../../../src/frontends/ -I../../../images -I./qt2 -I/opt/TWWfsw/libqt31/include -I../../../boost -I../../../src/frontends/controllers -I/opt/TWWfsw/aiksaurus01/include -I/opt/TWWfsw/xpm/include -D__GNUC__=3 -D__GNUC_MINOR__=3 -D__GNUC_PATCHLEVEL__=0 -DHAVE_CONFIG_H -DQT_CLEAN_NAMESPACE -DQT_GENUINE_STR -DQT_NO_TRANSLATION -isystem /usr/include/X11R6 Dialogs.C -march=1.1 -O2 Dialogs.iiignoring nonexistent directory ""qt2""ignoring nonexistent directory ""/opt/TWWfsw/gcc33/hppa2.0w-hp-hpux11.00/include""ignoring duplicate directory "".""ignoring duplicate directory ""../../../src""#include ""..."" search starts here:#include <...> search starts here: . ../../../src ../../../src/frontends ../../../images /opt/TWWfsw/libqt31/include ../../../boost ../../../src/frontends/controllers /opt/TWWfsw/aiksaurus01/include /opt/TWWfsw/xpm/include /usr/include/X11R6 /opt/TWWfsw/gcc33/include/c++/3.3 /opt/TWWfsw/gcc33/include/c++/3.3/hppa2.0w-hp-hpux11.00 /opt/TWWfsw/gcc33/include/c++/3.3/backward /opt/TWWfsw/gcc33/include /opt/TWWfsw/gcc33/lib/gcc-lib/hppa2.0w-hp-hpux11.00/3.3/include /usr/includeEnd of search list.In file included from ../../../boost/boost/config.hpp:35,                 from ../../../boost/boost/signals/signal_template.hpp:23,                 from ../../../boost/boost/signals/signal0.hpp:30,                 from ../../../src/frontends/Dialogs.h:22,                 from Dialogs_impl.h:18,                 from Dialogs.C:19:../../../boost/boost/config/compiler/gcc.hpp:57:7: warning: #warning ""Unknown compiler version - please run the configure tests and report the results"" /opt/TWWfsw/gcc33/lib/gcc-lib/hppa2.0w-hp-hpux11.00/3.3/cc1plus -fpreprocessed Dialogs.ii -quiet -dumpbase Dialogs.C -march=1.1 -auxbase Dialogs -O2 -version -o Dialogs.sGNU C++ version 3.3 20030312 (prerelease) (hppa2.0w-hp-hpux11.00)        compiled by GNU C version 3.3 20030312 (prerelease).GGC heuristics: --param ggc-min-expand=65 --param ggc-min-heapsize=65536Dialogs.C: In constructor `Dialogs::Impl::Impl(LyXView&, Dialogs&)':Dialogs.C:82: internal compiler error: in output_cbranch, at config/pa/pa.c:   5515Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.I think the above ICE is intentional. From line ~5512 of config/pa/pa.c:      case 20:        /* Very long branch.  Right now we only handle these when not           optimizing.  See ""jump"" pattern in pa.md for details.  */        if (optimize)          abort ();Looks like PA doesn't support long branches when optimizing yet.Release:GNU C++ version 3.3 20030312 (prerelease) (hppa2.0w-hp-hpux11.00Environment:HP-UX impulse B.11.00 U 9000/785 2009622912 unlimited-user license",RESOLVED          FIXED      
10237,John David Anglin,"[3.2 regression] [HPPA] Internal compiler error in insn_default_length, at insn-attrtab.c:1203","u_free.c: In function `free_picture_entry':u_free.c:16: unrecognizable insn:(insn 43 42 46 (clobber (reg/i:SI 28 %r28)) -1 (insn_list:REG_DEP_OUTPUT 40 (nil))    (nil))u_free.c:16: Internal compiler error in insn_default_length, at insn-attrtab.c:1203Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.Release:unknownEnvironment:System: Linux vega 2.5.65-pa3 #37 Sun Mar 23 17:41:14 MST 2003 parisc unknown unknown GNU/LinuxArchitecture: parischost: hppa-unknown-linux-gnubuild: hppa-unknown-linux-gnutarget: hppa-unknown-linux-gnuconfigured with: ../src/configure -v --enable-languages=c,c++,f77,proto,pascal,objc,ada --prefix=/usr --mandir=/usr/share/man --infodir=/usr/share/info --with-gxx-include-dir=/usr/include/c++/3.2 --enable-shared --with-system-zlib --enable-nls --without-included-gettext --enable-__cxa_atexit --enable-clocale=gnu --enable-objc-gc hppa-linuxHow-To-Repeat:gcc -O2 -g u_free.i",RESOLVED          FIXED      
11453,John David Anglin,gcc > 3.3 ICE,"Hi all,Here is the description of the ICE I encounter with last gcc 3.3.1 (but alsowith 3.3 but not with gcc-3.0):+ gcc -v -save-temps -D__KERNEL__-I/usr/src/kernel-source-2.4.21-pa02-lvm-107-20030707/include -Wall-Wstrict-prototypes -Wno-trigraphs -O2 -fno-strict-aliasing -fno-common-fomit-frame-pointer -D__linux__ -pipe -fno-strength-reduce -mno-space-regs-mfast-indirect-calls -mdisable-fpregs -ffunction-sections -march=1.1-mschedule=7100 -D_JFS_4K -nostdinc -I /usr/lib/gcc-lib/hppa-linux/3.3.1/include-DKBUILD_BASENAME=jfs_xtree -c -o jfs_xtree.o jfs_xtree.cgcc: warning: -pipe ignored because -save-temps specifiedReading specs from /usr/lib/gcc-lib/hppa-linux/3.3.1/specsConfigured with: ../src/configure -v--enable-languages=c,c++,f77,pascal,objc,ada,treelang --prefix=/usr--mandir=/usr/share/man --infodir=/usr/share/info--with-gxx-include-dir=/usr/include/c++/3.3 --enable-shared --with-system-zlib--enable-nls --without-included-gettext --enable-__cxa_atexit--enable-sjlj-exceptions --enable-clocale=gnu --enable-debug --enable-objc-gchppa-linuxThread model: posixgcc version 3.3.1 20030626 (Debian prerelease) /usr/lib/gcc-lib/hppa-linux/3.3.1/cc1 -E -quiet -nostdinc -v-I/usr/src/kernel-source-2.4.21-pa02-lvm-107-20030707/include -I/usr/lib/gcc-lib/hppa-linux/3.3.1/include -D__GNUC__=3 -D__GNUC_MINOR__=3-D__GNUC_PATCHLEVEL__=1 -D__KERNEL__ -D__linux__ -D_JFS_4K-DKBUILD_BASENAME=jfs_xtree jfs_xtree.c -mno-space-regs -mfast-indirect-calls-mdisable-fpregs -march=1.1 -mschedule=7100 -Wall -Wstrict-prototypes-Wno-trigraphs -fno-strict-aliasing -fno-common -fomit-frame-pointer-fno-strength-reduce -ffunction-sections -O2 jfs_xtree.i#include ""..."" search starts here:#include <...> search starts here: /usr/src/kernel-source-2.4.21-pa02-lvm-107-20030707/include /usr/lib/gcc-lib/hppa-linux/3.3.1/includeEnd of search list. /usr/lib/gcc-lib/hppa-linux/3.3.1/cc1 -fpreprocessed jfs_xtree.i -quiet-dumpbase jfs_xtree.c -mno-space-regs -mfast-indirect-calls -mdisable-fpregs-march=1.1 -mschedule=7100 -auxbase-strip jfs_xtree.o -O2 -Wall-Wstrict-prototypes -Wno-trigraphs -version -fno-strict-aliasing -fno-common-fomit-frame-pointer -fno-strength-reduce -ffunction-sections -o jfs_xtree.sGNU C version 3.3.1 20030626 (Debian prerelease) (hppa-linux)	compiled by GNU C version 3.3.1 20030626 (Debian prerelease).GGC heuristics: --param ggc-min-expand=38 --param ggc-min-heapsize=15788jfs_xtree.c: In function `xtUpdate':jfs_xtree.c:2351: error: insn does not satisfy its constraints:(insn 7698 1165 1168 29 (nil) (set (reg:SI 24 %r24)        (reg:SI 88 SAR [427])) 37 {*pa.md:2265} (nil)    (nil))jfs_xtree.c:2351: internal compiler error: in reload_cse_simplify_operands, atreload1.c:8345Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.I will attached jfs_xtree.[is] asap.Thanks in advance for your attention,    Joel",RESOLVED          FIXED      
68877,Daniel Krügler,[6 Regression] swap for multidimensional array of int ill-formed,"The following code example (A reduced form of an example from a recent LWG issue http://cplusplus.github.io/LWG/lwg-active.html#2554)/-----------------------------------------------#include <utility>int main() {  int x[2][3];  int y[2][3];  std::swap(x, y);}/-----------------------------------------------compiled with the flags-Wall -Wextraand targetting any of C++1z, C++14, or C++11 with or without GNU extensions is rejected in gcc HEAD 6.0.0 20151207 (experimental)(but not in previous releases such as 5.2.0) with the compiler diagnostics:<quote>In file included from /usr/local/gcc-head/include/c++/6.0.0/bits/move.h:57:0,                 from /usr/local/gcc-head/include/c++/6.0.0/bits/stl_pair.h:59,                 from /usr/local/gcc-head/include/c++/6.0.0/utility:70,                 from prog.cc:1:/usr/local/gcc-head/include/c++/6.0.0/type_traits: In instantiation of 'typename std::enable_if<std::__is_swappable_impl::__is_swappable<_Tp>::value>::type std::swap(_Tp (&)[_Nm], _Tp (&)[_Nm]) [with _Tp = int [2]; long unsigned int _Nm = 1ul; typename std::enable_if<std::__is_swappable_impl::__is_swappable<_Tp>::value>::type = void]':prog.cc:8:17:   required from here/usr/local/gcc-head/include/c++/6.0.0/type_traits:2594:27: error: no matching function for call to 'swap(int [2], int [2])'     noexcept(noexcept(swap(*__a, *__b)));                       ~~~~^~~~~~~~~~~~In file included from /usr/local/gcc-head/include/c++/6.0.0/bits/stl_pair.h:59:0,                 from /usr/local/gcc-head/include/c++/6.0.0/utility:70,                 from prog.cc:1:/usr/local/gcc-head/include/c++/6.0.0/bits/move.h:179:5: note: candidate: template<class _Tp> typename std::enable_if<std::__and_<std::is_move_constructible<_Tp>, std::is_move_assignable<_Tp> >::value>::type std::swap(_Tp&, _Tp&)     swap(_Tp& __a, _Tp& __b)     ^~~~/usr/local/gcc-head/include/c++/6.0.0/bits/move.h:179:5: note:   template argument deduction/substitution failed:/usr/local/gcc-head/include/c++/6.0.0/bits/move.h: In substitution of 'template<class _Tp> typename std::enable_if<std::__and_<std::is_move_constructible<_Tp>, std::is_move_assignable<_Tp> >::value>::type std::swap(_Tp&, _Tp&) [with _Tp = int [2]]':/usr/local/gcc-head/include/c++/6.0.0/type_traits:2594:27:   required from 'typename std::enable_if<std::__is_swappable_impl::__is_swappable<_Tp>::value>::type std::swap(_Tp (&)[_Nm], _Tp (&)[_Nm]) [with _Tp = int [2]; long unsigned int _Nm = 1ul; typename std::enable_if<std::__is_swappable_impl::__is_swappable<_Tp>::value>::type = void]'prog.cc:8:17:   required from here/usr/local/gcc-head/include/c++/6.0.0/bits/move.h:179:5: error: no type named 'type' in 'struct std::enable_if<false, void>'In file included from /usr/local/gcc-head/include/c++/6.0.0/bits/move.h:57:0,                 from /usr/local/gcc-head/include/c++/6.0.0/bits/stl_pair.h:59,                 from /usr/local/gcc-head/include/c++/6.0.0/utility:70,                 from prog.cc:1:/usr/local/gcc-head/include/c++/6.0.0/type_traits: In instantiation of 'typename std::enable_if<std::__is_swappable_impl::__is_swappable<_Tp>::value>::type std::swap(_Tp (&)[_Nm], _Tp (&)[_Nm]) [with _Tp = int [2]; long unsigned int _Nm = 1ul; typename std::enable_if<std::__is_swappable_impl::__is_swappable<_Tp>::value>::type = void]':prog.cc:8:17:   required from here/usr/local/gcc-head/include/c++/6.0.0/type_traits:2594:27: error: no matching function for call to 'swap(int [2], int [2])'     noexcept(noexcept(swap(*__a, *__b)));                       ~~~~^~~~~~~~~~~~In file included from /usr/local/gcc-head/include/c++/6.0.0/bits/stl_pair.h:59:0,                 from /usr/local/gcc-head/include/c++/6.0.0/utility:70,                 from prog.cc:1:/usr/local/gcc-head/include/c++/6.0.0/bits/move.h:179:5: note: candidate: template<class _Tp> typename std::enable_if<std::__and_<std::is_move_constructible<_Tp>, std::is_move_assignable<_Tp> >::value>::type std::swap(_Tp&, _Tp&)     swap(_Tp& __a, _Tp& __b)     ^~~~/usr/local/gcc-head/include/c++/6.0.0/bits/move.h:179:5: note:   template argument deduction/substitution failed:/usr/local/gcc-head/include/c++/6.0.0/bits/move.h: In substitution of 'template<class _Tp> typename std::enable_if<std::__and_<std::is_move_constructible<_Tp>, std::is_move_assignable<_Tp> >::value>::type std::swap(_Tp&, _Tp&) [with _Tp = int [2]]':/usr/local/gcc-head/include/c++/6.0.0/type_traits:2594:27:   required from 'typename std::enable_if<std::__is_swappable_impl::__is_swappable<_Tp>::value>::type std::swap(_Tp (&)[_Nm], _Tp (&)[_Nm]) [with _Tp = int [2]; long unsigned int _Nm = 1ul; typename std::enable_if<std::__is_swappable_impl::__is_swappable<_Tp>::value>::type = void]'prog.cc:8:17:   required from here/usr/local/gcc-head/include/c++/6.0.0/bits/move.h:179:5: error: no type named 'type' in 'struct std::enable_if<false, void>'</quote>It seems to me that gcc's extension usage of a constrained swap declaration (which is generally an improvement over what the standard specifies) interacts nastily with the currently required (but obviously defect, see issue above) exception-specification by the Standard Library. The effect of the expression-form swap(*__a, *__b) used in the function declarationtemplate<typename _Tp, size_t _Nm>    inline    typename enable_if<__is_swappable_impl::__is_swappable<_Tp>::value>::type    swap(_Tp (&__a)[_Nm], _Tp (&__b)[_Nm])    noexcept(noexcept(swap(*__a, *__b)));is, that lookup cannot yet see the just being declared swap overload for arrays (because the declaration is not completed within the noexcept declaration), therefore the expressionswap(*__a, *__b)is effectively evaluated in the context of the previously declared non-array overload:template<typename _Tp>    inline    typename enable_if<__and_<is_move_constructible<_Tp>,			      is_move_assignable<_Tp>>::value>::type    swap(_Tp&, _Tp&)    noexcept(__and_<is_nothrow_move_constructible<_Tp>,	            is_nothrow_move_assignable<_Tp>>::value);But this form is constrained in regard to is_move_constructible<_Tp> and is_move_assignable<_Tp>, none of which can evaluate to true for arrays. A possible fix would be to (a) remove the swap constraints (which presumably has other unwanted effects) or (b) replace the required noexcept expression noexcept(swap(*__a, *__b)) of the array form by __is_nothrow_swappable<_Tp>::value as suggested in the paperhttp://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/n4511.htmlBeing the author of that paper I'm interested to add a more complete __is_[nothrow_]swappable to libstdc++ that would also work for this example. So feel free to assign me to this bug.",RESOLVED          FIXED      
20345,Danny Smith,Warning on forward declaration of class with __dllexport__,"Forward-declaring a class with a __dllexport__ or __dllimport__attribute elicits the warning  ""type attributes are honored only at type definition""even when the same attribute is repeated on the class definition.Until recently, this usage was accepted with no diagnostic. Anoption to inhibit this warning with '-Wall -Wextra' would be welcome,at least on the ms windows platform (on other platforms, and forother attributes, this usage may be uncommon or nonexistent).Unlike the other cases considered in this patch:  http://gcc.gnu.org/ml/gcc-patches/2003-12/msg01004.htmlhere, the meaning is clear; the warning diagnoses only redundancy,which the 'native' compiler for ms windows documents as permissible:http://msdn.microsoft.com/library/default.asp?url=/library/en-us/vclang/html/_pluslang_using_dllimport_and_dllexport_in_c.2b2b.asp| You can declare C++ classes with the dllimport or dllexport attribute.Building a recent cvs snapshot of wxWidgets yields 33673 instancesof this warning with MinGW gcc-3.4.2, but only five other warnings.One of that library's maintainers states that they added theredundant declarations throughout because gcc-3.3 required them insome cases.How to reproduce:C:/tmp[0]$cat export_fwd_decl.cppclass __attribute__((__dllexport__)) E;class __attribute__((__dllimport__)) I;class __attribute__((__dllexport__)) E {};class __attribute__((__dllimport__)) I {};C:/tmp[0]$/MinGW/bin/g++ -v -save-temps -Wall -Wextra -c export_fwd_decl.cppReading specs from /MinGW/bin/../lib/gcc/mingw32/3.4.2/specsConfigured with: ../gcc/configure --with-gcc --with-gnu-ld --with-gnu-as --host=mingw32 --target=mingw32 --prefix=/mingw --enable-threads --disable-nls --enable-languages=c,c++,f77,ada,objc,java --disable-win32-registry --disable-shared --enable-sjlj-exceptions --enable-libgcj --disable-java-awt --without-x --enable-java-gc=boehm --disable-libgcj-debug --enable-interpreter --enable-hash-synchronization --enable-libstdcxx-debugThread model: win32gcc version 3.4.2 (mingw-special) /MinGW/bin/../libexec/gcc/mingw32/3.4.2/cc1plus.exe -E -quiet -v -iprefix \MinGW\bin\../lib/gcc/mingw32/3.4.2/ export_fwd_decl.cpp -Wall -Wextra -o export_fwd_decl.iiignoring nonexistent directory ""/MinGW/bin/../lib/gcc/mingw32/3.4.2/../../../../mingw32/include""ignoring nonexistent directory ""/mingw/lib/gcc/mingw32/3.4.2/../../../../mingw32/include""#include ""..."" search starts here:#include <...> search starts here: /MinGW/bin/../lib/gcc/mingw32/3.4.2/../../../../include/c++/3.4.2 /MinGW/bin/../lib/gcc/mingw32/3.4.2/../../../../include/c++/3.4.2/mingw32 /MinGW/bin/../lib/gcc/mingw32/3.4.2/../../../../include/c++/3.4.2/backward /MinGW/bin/../lib/gcc/mingw32/3.4.2/../../../../include /MinGW/bin/../lib/gcc/mingw32/3.4.2/include /mingw/lib/gcc/mingw32/3.4.2/../../../../include/c++/3.4.2 /mingw/lib/gcc/mingw32/3.4.2/../../../../include/c++/3.4.2/mingw32 /mingw/lib/gcc/mingw32/3.4.2/../../../../include/c++/3.4.2/backward /mingw/lib/gcc/mingw32/3.4.2/../../../../include /mingw/include /mingw/lib/gcc/mingw32/3.4.2/include /mingw/includeEnd of search list. /MinGW/bin/../libexec/gcc/mingw32/3.4.2/cc1plus.exe -fpreprocessed export_fwd_decl.ii -quiet -dumpbase export_fwd_decl.cpp -auxbase export_fwd_decl -Wall -Wextra -version -o export_fwd_decl.sGNU C++ version 3.4.2 (mingw-special) (mingw32)        compiled by GNU C version 3.4.2 (mingw-special).GGC heuristics: --param ggc-min-expand=99 --param ggc-min-heapsize=130943export_fwd_decl.cpp:1: warning: type attributes are honored only at type definitionexport_fwd_decl.cpp:2: warning: type attributes are honored only at type definition /MinGW/bin/../lib/gcc/mingw32/3.4.2/../../../../mingw32/bin/as.exe -o export_fwd_decl.o export_fwd_decl.sC:/tmp[0]$cat export_fwd_decl.i*# 1 ""export_fwd_decl.cpp""# 1 ""<built-in>""# 1 ""<command line>""# 1 ""export_fwd_decl.cpp""class __attribute__((__dllexport__)) E;class __attribute__((__dllimport__)) I;class __attribute__((__dllexport__)) E {};class __attribute__((__dllimport__)) I {};",RESOLVED          FIXED      
36834,Danny Smith,structure return ABI for windows targets differs from native MSVC,"Like i386-netware, the native MS Windows compiler assumes that the CALLER pops the stack for the implicit arguments pointing to aggregate return value.  This differs from the default i386 ABI which assumes the CALLEE pops the stack.This is documented at http://www.angelcode.com/dev/callconv/callconv.html in the section  on __cdecl calling convention.The bug was reported to mingw users list by Magnus Christensson at:http://www.nabble.com/Problem-returning-C-struct-from-MinGW-to-MSVC-td18444899.htmlThis report contains a testcase demostrating the problem. Danny",RESOLVED          FIXED      
34749,Danny Smith,Incorrect warning when applying dllimport to friend function,"I was playing with some code and got a warning about dllimport in someheaders.  I looked around a bit and came up with this test case.The warning seems to imply that dllimport is ignored on bar(), but looking at the output the call to bar() is indeed mangled with __imp prefix.I'm using MinGW g++ 4.2.1-dw2.## begin df.cpp__attribute__((dllimport)) int bar();class Foo{private:    int foo();    friend __attribute__((dllimport)) int bar();};int Foo::foo(){    return bar();}## end df.cppD:> g++ -S df.cppdf.cpp:7: warning: 'int bar()' redeclared without dllimport attribute:previous dllimport ignoredD:> g++ -vUsing built-in specs.Target: mingw32Configured with: ../gcc-4.2.1-2-src/configure --with-gcc--enable-libgomp --host =mingw32 --build=mingw32 --target=mingw32--program-suffix=-dw2 --with-arch=i486 --with-tune=generic--disable-werror --prefix=/mingw --with-local-prefix=/mingw--enable-threads --disable-nls --enable-languages=c,c++,fortran,objc,obj-c++,ad a --disable-win32-registry--disable-sjlj-exceptions --enable-libstdcxx-debug --enable-cxx-flags=-fno-function-sections -fno-data-sections--enable-version-spec ific-runtime-libs --disable-bootstrap Threadmodel: win32 gcc version 4.2.1-dw2 (mingw32-2)",RESOLVED          FIXED      
28627,Danny Smith,[cygwin/mingw32] Missing dllimport  diagnostic,"This change caused a new testsuite regression on windows32 targets 2006-08-01  Volker Reichelt  <reichelt@igpm.rwth-aachen.de>	PR c++/28250	PR c++/28257	PR c++/28259	PR c++/28267	* toplev.c (compile_file): Return early on errorcount or sorrycount.	* cgraphunit.c (cgraph_finalize_compilation_unit): Likewise.	(cgraph_optimize): Likewise.Here:FAIL: g++.dg/ext/dllimport7.C C++ specific error (test for errors, line 24)(see eg: <http://gcc.gnu.org/ml/gcc-testresults/2006-08/msg00086.html>The testcase expects error messages for each of two static data membersthat are declared in a dllimport'd class and later defined out of class.const int Bar::three = 3;       //  { dg-warning ""redeclared without dllimport"" }//  { dg-error ""definition of static data"" ""C++ specific error"" { target i?86-*-cygwin* i?86-*-mingw* } 21 }				const Baz Bar::null_baz;	// { dg-warning ""redeclared without dllimport"" }// { dg-error ""definition of static data"" ""C++ specific error"" { target i?86-*-cygwin* i?86-*-mingw* } 24 } only the first ""C++-specific error"" is emitted, Once errorcount > 0, nomore errors are reported.Commenting out the early return on errorcount in cgraph_optimize()restores the expected error message at line 24The error messages are emitted by winnt-cxx.c:i386_pe_type_dllimport_p(),a helper routine for targetm.encode_section_info.Changing the errors to warnings, I get all the messages. The reason theyare errors, rather than warnings is because (1) native MS compiler callsthe definition of a static data member of a dllimport'd class an error and(2) they usually indicate a silly dll[/im/ex/]port typo in the classdefinition or a serious misunderstanding of dllimport semantics.Danny",RESOLVED          FIXED      
41512,Danny Smith,dllexport broken on cygwin,"These new FAILs have been appearing on trunk since some time between 20090820 and 20090903:FAIL: g++.dg/ext/dllexport-MI1.C scan-assembler -export:_ZNK2D12vfEvFAIL: g++.dg/ext/dllexport-MI1.C scan-assembler -export:_ZNK2D22vfEvFAIL: g++.dg/ext/dllexport-MI1.C scan-assembler -export:_ZNK3MI12vfEvFAIL: g++.dg/ext/dllexport-MI1.C scan-assembler -export:_ZTV2D1,dataFAIL: g++.dg/ext/dllexport-MI1.C scan-assembler -export:_ZN2D2C2ERKS_FAIL: g++.dg/ext/dllexport1.C scan-assembler  -export:_ZN3Bar10inline_barEi(Refs: http://gcc.gnu.org/ml/gcc-testresults/2009-08/msg02276.html       http://gcc.gnu.org/ml/gcc-testresults/2009-09/msg00356.html )They seem to represent serious breakage of dllexport with cygwin as the latest testrun with my libstdc-as-dll patch is showing even more fails on top of these, but didn't fail before they appeared, and a quick investigation shows that the executables generated during the testsuite fail to import anything from the libstdc DLL!This could be either a target or a C++ problem since they both co-operate to manage the dllexport attribute.  I couldn't find any changes in that area of the backend in the relevant date range, so I've marked it C++ for now.  I'll attach preprocessed source for the testcase shortly.",VERIFIED          FIXED      
39660,Danny Smith,"Mingw Bootstrap stops with ""..host-mingw32.c:140: error: ISO C90 forbids mixed..""",Latest svn version (and for the past few weeks) stops in compilation with../../gcc4svnsource/gcc/config/i386/host-mingw32.c: In function 'mingw32_gt_pch_use_address':../../gcc4svnsource/gcc/config/i386/host-mingw32.c:140: error: ISO C90 forbids mixed declarations and codeMingw. Using a recent 4.4.,RESOLVED          FIXED      
38054,Danny Smith,Assertion failed in change_decl_assembler_name(),"mingw32-c++ (GCC) 4.4.0 20081031 (experimental)internal compiler error: in change_decl_assembler_name, at cgraph.c:1252C++ source is here: <http://svn.reactos.org/svn/reactos/trunk/reactos/base/shell/explorer/desktop/desktop.cpp?revision=34284&content-type=text%2Fplain>",RESOLVED          FIXED      
37989,Danny Smith,PR37528 fix broke --disable-shared on mingw32,"gcc-4.4-20081003 and later configured with --disable-shared for mingw32 attempt to link with libgcc_eh.a even though it never built libgcc_eh.a (those object files are included in libgcc.a):/home/mikpe/gcc-4.4-20081031/configure --target=x86_64-pc-mingw32 --prefix=/tmp/cross-mingw64 --disable-nls --disable-shared --enable-threads=win32 --enable-languages=c --with-gmp=/opt/local/gmp-4.2.4 --with-mpfr=/opt/local/mpfr-2.3.2 --disable-win32-registry --enable-sjlj-exceptionsmakemake installecho ""int main(void) { return 0; }"" > trivial.c/tmp/cross-mingw64/bin/x86_64-pc-mingw32-gcc trivial.c/tmp/cross-mingw64/lib/gcc/x86_64-pc-mingw32/4.4.0/../../../../x86_64-pc-mingw32/bin/ld: cannot find -lgcc_ehcollect2: ld returned 1 exit statusThe fix for PR37528 changed mingw32.h to #define REAL_LIBGCC_SPEC, and it alsochanged it to unconditionally link with -lgcc_eh for !shared-libgcc.That only works if libgcc_eh.a actually was built, which isn't the case whengcc was configured with --disable-shared.",RESOLVED          FIXED      
37528,Danny Smith,[4.4 Regression] boostrap failure due to configure problems,"doing bootstrap of 20080912 snapshot with optionsconfigure --enable-languages=c,c++,fortran --disable-nls --without-included-gettext --enable-version-specific-runtime-libs --without-x --with-system-zlib --enable-interpreter --enable-threads=posix --disable-win32-registry --disable-sjlj-exceptions --enable-hash-synchronization --enable-libstdcxx-debug  --enable-libgomp --disable-werror  --disable-symvers --program-suffix=-4.4 --enable-version-specific-runtime-libsboostrap dies in libgcc, doing-------------------------------------------------------------------------------ln -s libgcc.map libgcc.map.def && if [ ! -d ./shlib ]; then mkdir ./shlib else true; fi && /home/seb/gcc-4.4-20080905/build/./gcc/xgcc -B/home/seb/gcc-4.4-20080905/build/./gcc/ -B/usr/local/i686-pc-cygwin/bin/ -B/usr/local/i686-pc-cygwin/lib/ -isystem /usr/local/i686-pc-cygwin/include -isystem /usr/local/i686-pc-cygwin/sys-include -O2 -I../../gcc-4.4-20080905/gcc/../winsup/w32api/include -g -O2 -DIN_GCC   -W -Wall -Wwrite-strings -Wstrict-prototypes -Wmissing-prototypes -Wcast-qual -Wold-style-definition  -isystem ./include   -g -DHAVE_GTHR_DEFAULT -DIN_LIBGCC2 -D__GCC_FLOAT_NOT_NEEDED  -shared -nodefaultlibs libgcc.map.def -Wl,--out-implib,./shlib/libgcc_s.a.tmp -o ./shlib/libgcc_s_1.dll.tmp -g -O2 -B./ _chkstk_s.o _muldi3_s.o _negdi2_s.o _lshrdi3_s.o _ashldi3_s.o _ashrdi3_s.o _cmpdi2_s.o _ucmpdi2_s.o _clear_cache_s.o _enable_execute_stack_s.o _trampoline_s.o __main_s.o _absvsi2_s.o _absvdi2_s.o _addvsi3_s.o _addvdi3_s.o _subvsi3_s.o _subvdi3_s.o _mulvsi3_s.o _mulvdi3_s.o _negvsi2_s.o _negvdi2_s.o _ctors_s.o _ffssi2_s.o _ffsdi2_s.o _clz_s.o _clzsi2_s.o _clzdi2_s.o _ctzsi2_s.o _ctzdi2_s.o _popcount_tab_s.o _popcountsi2_s.o _popcountdi2_s.o _paritysi2_s.o _paritydi2_s.o _powisf2_s.o _powidf2_s.o _powixf2_s.o _powitf2_s.o _mulsc3_s.o _muldc3_s.o _mulxc3_s.o _multc3_s.o _divsc3_s.o _divdc3_s.o _divxc3_s.o _divtc3_s.o _bswapsi2_s.o _bswapdi2_s.o _fixunssfsi_s.o _fixunsdfsi_s.o _fixunsxfsi_s.o _fixsfdi_s.o _fixdfdi_s.o _fixxfdi_s.o _fixtfdi_s.o _fixunssfdi_s.o _fixunsdfdi_s.o _fixunsxfdi_s.o _fixunstfdi_s.o _floatdisf_s.o _floatdidf_s.o _floatdixf_s.o _floatditf_s.o _floatundisf_s.o _floatundidf_s.o _floatundixf_s.o _floatunditf_s.o _divdi3_s.o _moddi3_s.o _udivdi3_s.o _umoddi3_s.o _udiv_w_sdiv_s.o _udivmoddi4_s.o unwind-dw2_s.o unwind-dw2-fde_s.o unwind-sjlj_s.o gthr-gnat_s.o unwind-c_s.o emutls_s.o -luser32 -lkernel32 -ladvapi32 -lshell32 -------------------------------------------------------------------------------because of lots of unresolved symbols.if -lcygwin is added to the link options of the part/home/seb/gcc-4.4-20080905/build/./gcc/xgcc ... -lshell32,this compiles fine, but then the next command-------------------------------------------------------------------------------ar -r ./shlib/libgcc_s.a.tmp _chkstk.o _ctors.o gthr-win32.o -------------------------------------------------------------------------------fails because gthr-win32.o does not exist.I fixed this in an improper way by changing gcc\config\i386\t-cygming: adding -lcygwin to SHLIB_LC definition fixes first error, and adding -------------------------------------------------------------------------------# We hide calls to w32api needed for w32 thread support here:LIB2FUNCS_EXTRA = $(srcdir)/config/i386/gthr-win32.c-------------------------------------------------------------------------------(taken from t-gthr-win32)fixes 2nd error.I guess similar changes should be added is some cygwin-specific place?",RESOLVED          FIXED      
28287,Danny Smith,[4.1 regression] ICE with misplaced attribute weak,"The following invalid code snippet triggers an ICE since GCC 4.1.0:=============================================void foo(int __attribute__((weak)));=============================================bug.c:1: error: weak declaration of '({anonymous})' must be publicbug.c:1: internal compiler error: tree check: expected tree that contains 'decl with visibility' structure, have 'parm_decl'  in mark_weak, at varasm.c:4506Please submit a full bug report, [etc.]This happens with the C and C++ frontend.",RESOLVED          FIXED      
35921,Danny Smith,Con/de-structor definition fails to override dllimport declaration,"When the attached file is compiled with a mingw32 build of GCC 4.3.0, the constructor definition for ""foo"" does not fully override the declaration in the struct which inherits the dllimport attribute, and a dllimport reference is incorrectly emitted. The member function ""bar()"" is provided as an example of correctly overriding the dllimport declaration; this issue only occurs with constructors and destructors.Compilation command line and output:> g++ -c impoverride.cppimpoverride.cpp:8: warning: 'foo::foo()' redeclared without dllimport attribute: previous dllimport ignoredimpoverride.cpp:12: warning: 'void foo::bar()' redeclared without dllimport attribute: previous dllimport ignored> nm impoverride.o00000000 b .bss00000000 d .data00000000 t .text00000011 T __Z3depv0000000c T __ZN3foo3barEv00000006 T __ZN3fooC1Ev00000000 T __ZN3fooC2Ev         U __imp___ZN3fooC1Ev << Shouldn't be there!> g++ -vUsing built-in specs.Target: mingw32Configured with: ../../gcc-4.3.0-ehstatic/configure --prefix=/mingw --build=mingw32 --enable-languages=c,c++ --disable-nls --disable-win32-registry --enable-sjlj-exceptions --enable-libgomp --with-gmp=/d/cygdev/gccbuild/libsfor43/debug/gmp-install --with-mpfr=/d/cygdev/gccbuild/libsfor43/debug/mpfr-install --with-libiconv-prefix=/d/cygdev/gccbuild/libsfor43/debug/iconv-install --disable-werror --enable-threads --enable-libstdcxx-debug --enable-cxx-flags='-fno-function-sections -fno-data-sections' --disable-symversThread model: win32gcc version 4.3.0 (GCC)",RESOLVED          FIXED      
35916,Danny Smith,problem running GCC under Vista with relocated directory,"I wanted to upgrade (Windows Vista) from 4.3.0 (20071017) to the latest stable 4.3.x The Windows installer apparently is for 4.4.0. After installing it, I get the following error when compiling a simple program that worked fine under 4.3.0:gfortran: CreateProcess: No such file or directoryDo you have a solution for this, or at least a pointer to the latest stable 4.3.x installer for Vista?Thnx in advancePS: this is a critical problem for me, I build virtally all my applications with gfortran and need to deliver one in the next few days...",RESOLVED          FIXED      
35054,Danny Smith,"No documentation of  #pragma push_macro(""macro_name"")","The new feature #pragma push_macro(""macro_name"") and #pragma pop_macro(""macro_name"") enabled by 2007-03-30  Richard Henderson  <rth@redhat.com>	    Kai Tietz  <kai.tietz@onevision.com>	* c-pragma.c (struct def_pragma_macro_value): New.	(struct def_pragma_macro): New.	(pushed_macro_table): New.	(dpm_hash, dpm_eq): New.	(handle_pragma_push_macro, handle_pragma_pop_macro): New.	(init_pragma): Install them.	* doc/tm.texi (HANDLE_PRAGMA_PUSH_POP_MACRO): New.is not documented as a user extension in extend.texi",RESOLVED          FIXED      
35061,Danny Smith,#pragma pop_macro causes ICE if no  macro value on stack,"A ""#pragma pop_macro"" without a preceding ""#pragma push_macro""  triggers an ICE on  mingw32// pop_macro.c #define X  1int main(){// # pragma push_macro(""X"")# undef X# define X 2# pragma pop_macro(""X"")return 0;}gcc pop_macro.cpop_macro.c: In function 'main':pop_macro.c:9: internal compiler error: Segmentation faultPlease submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.",RESOLVED          FIXED      
32915,Danny Smith,ICE while compiling libgfortran/io/write.c,"Bootstrap including gfortran has been broken on native i386-pc-mingw32 for at least 10 days, with the C compiler having an ICE while compiling libgfortran/io/write.c. I finally found the opportunity to reduce the ICE to the following code:$ cat write.iextern void fflush (int);extern __attribute__ ((__dllimport__)) int _iob[];static int __gthrw_pthread_once () __attribute__ ((__weakref__(""pthread_once"")));void flush_if_preconnected (){  fflush (_iob[0]);}$ C:/msys/1.0.10/home/FX/ibin/gcc/cc1.exe write.i -quietwrite.i:8: internal compiler error: Segmentation faultThe backtrace I could get from gdb looks seriously garbled:Program received signal SIGSEGV, Segmentation fault.decl_assembler_name_equal (decl=0x2ae2360, asmname=0x2ae1930)    at ../../trunk/gcc/tree.c:323323       if (IDENTIFIER_POINTER (decl_asmname)[0] == '*')(gdb) where#0  decl_assembler_name_equal (decl=0x2ae2360, asmname=0x2ae1930)    at ../../trunk/gcc/tree.c:323#1  0x00512973 in decl_assembler_name_equal (decl=0x2ae1930,     asmname=0x290f200) at ../../trunk/gcc/tree.c:314#2  0x00512973 in decl_assembler_name_equal (decl=0x0, asmname=0x3d2412)    at ../../trunk/gcc/tree.c:314#3  0x00512973 in decl_assembler_name_equal (decl=0x3d2412, asmname=0x0)    at ../../trunk/gcc/tree.c:314#4  0x00512973 in decl_assembler_name_equal (decl=0x3d2412, asmname=0x0)    at ../../trunk/gcc/tree.c:314#5  0x00512973 in decl_assembler_name_equal (decl=0x0, asmname=0x0)    at ../../trunk/gcc/tree.c:314#6  0x00512973 in decl_assembler_name_equal (decl=0x3, asmname=0x3d24a0)    at ../../trunk/gcc/tree.c:314#7  0x00512973 in decl_assembler_name_equal (decl=0x3a, asmname=0x4)    at ../../trunk/gcc/tree.c:314#8  0x00512973 in decl_assembler_name_equal (decl=0x1, asmname=0x9)    at ../../trunk/gcc/tree.c:314#9  0x00512973 in decl_assembler_name_equal (decl=0x0, asmname=0x2)    at ../../trunk/gcc/tree.c:314#10 0x00512973 in decl_assembler_name_equal (decl=0x401280, asmname=0x0)    at ../../trunk/gcc/tree.c:314#11 0x00512973 in decl_assembler_name_equal (decl=)    at ../../trunk/gcc/tree.c:314Backtrace stopped: previous frame inner to this frame (corrupt stack?)",RESOLVED          FIXED      
34970,Danny Smith,[4.3 regression] name mangling broken for __attributte__((fastcall)),"BOOL FASTCALL DdHmgDestroy(); .def	_@DdHmgDestroy@0;	.scl	2;	.type	32;	.endef ""Cannot export @DdHmgDestroy@0: symbol not found""",RESOLVED          FIXED      
33774,Danny Smith,Cygwin/mingw do not support 16 byte alignment of struct/union  fields,"The following testcase fails on mingw32 =======================================================================typedef int __m128 __attribute__ ((__vector_size__ (16), __may_alias__));typedef union {   float f[4];   __m128 m;} foo;int test1[__alignof(__m128) >= 16 ? 1 : -1 ];  // OKint test2[__alignof(foo) >= 16 ? 1 : -1 ]; // Fails: alignof foo = 8========================================================================with:> foo.c:11: error: size of array 'test2' is negative.The problem is config/i386/cygming.h #define BIGGEST_FIELD_ALIGNMENT 64which is a leftover from a time when this define was necessary andsufficient to enable 8 byte alignment for doubles--consistent with thetarget default MASK_ALIGN_DOUBLE--and when GNU ld could only handle 8byte alignment.Currently testing a patch.",RESOLVED          FIXED      
30335,Danny Smith,CreateFileMapping fails in Vista due to lack of admin privileges,CreateFileMapping fails in Vista due to lack of admin privileges,RESOLVED          FIXED      
31965,Danny Smith,_INTEGRAL_MAX_BITS defined incorrectly,"The macro _INTEGRAL_MAX_BITS is a defined as a builtin macro with an incorrect value on mingw32.  This Microsoft C specific macro is supposed to report ""the maximum size (in bits) for an integral type"".  In GCC's case this would be 64, the size of a long long, not 32 as it currently defines the macro.(Perhaps the real problem is that this macro is defined at all.  It's specific to the Microsoft C/C++ compiler and not part of the Windows API.)",RESOLVED          FIXED      
31680,Danny Smith,Cannot create DLL with exported stdcall functions because compiler exports the functions without the @N decoration,"Take the following C test code. I want to make a DLL which exports stdcall HelloWorld function.test.c:__attribute__((dllexport)) void __attribute__((__stdcall__)) HelloWorld(){}Compiling & linking it gives the following error during linking with GCC 4.3.0, while it works fine with GCC 3.4.5.$ i586-mingw32msvc-gcc -c -o test.o test.c$ i586-mingw32msvc-gcc -shared -o test.dll test.oCannot export HelloWorld: symbol not foundcollect2: ld returned 1 exit statusExamining the object file seems to reveal the problem, especially when compared to the GCC 3.4.5 mingw crosscompiler which is in Debian.GCC 4.3.0:$ i586-mingw32msvc-nm test.o | grep HelloWorld00000000 T _HelloWorld@0$ strings test.o | grep HelloWorld -export:HelloWorld_HelloWorld@0GCC 3.4.5:$ i586-mingw32msvc-nm test.o | grep HelloWorld00000000 T _HelloWorld@0$ strings test.o | grep HelloWorld -export:HelloWorld@0_HelloWorld@0Notice the subtle difference in output of the last command. Between 3.4.5 and 4.3.0 the @0 stdcall decoration in the -export:HelloWorld@0 line got lost, which makes it impossible to link DLLs with exported stdcall functions.Here are some details about the compiler versions used for testing:$ i586-mingw32msvc-gcc-4.3.0 -vUsing built-in specs.Target: i586-mingw32msvcConfigured with: ../gcc/configure --prefix=/opt/mingw --target=i586-mingw32msvc --enable-languages=c --disable-multilib --disable-shared --enable-threads=win32 --enable-version-specific-runtime-libs --enable-sjlj-exceptions : (reconfigured) ../gcc/configure --prefix=/opt/mingw --target=i586-mingw32msvc --enable-languages=c,c++ --disable-multilib --disable-shared --enable-threads=win32 --enable-version-specific-runtime-libs --enable-sjlj-exceptionsThread model: win32gcc version 4.3.0 20070424 (experimental)$ i586-mingw32msvc-gcc-3.4.5 -vReading specs from /usr/lib/gcc/i586-mingw32msvc/3.4.5/specsConfigured with: /build/buildd/mingw32-3.4.5.20060117.1.dfsg/build_dir/src/gcc-3.4.5-20060117-1-dfsg/configure -v --prefix=/usr --target=i586-mingw32msvc --enable-languages=c,c++ --enable-threads --enable-sjlj-exceptions --disable-multilib --enable-version-specific-runtime-libsThread model: win32gcc version 3.4.5 (mingw special)",RESOLVED          FIXED      
28427,Danny Smith,warning: alignment of '__FUNCTION__' is greater than maximum object file alignment.,This2006-07-13  Jan Hubicka  <jh@suse.cz>	* cgraphunit.c (cgraph_varpool_analyze_pending_decls): Call	align_variable.has lead to very many warnings of the form ../../gcc/gcc/fortran/array.c:0: warning: alignment of '__FUNCTION__' is greater than maximum object file alignment.  Using 16../../gcc/gcc/fortran/array.c:1141: warning: alignment of 'current_expand' is greater than maximum object file alignment.  Using 16on mingw32 target and prevents building with -Werror enabled.,RESOLVED          FIXED      
27650,Danny Smith,internal compiler error while compiling Gecode,"On cygwin system, used gcc 3.4.4 to compile gcc 4.1.0.  Installed gcc 4.1.0 in /usr/local.While compiling Gecode (with ""make""), from gecode-1.1.0.tar.gz, encountered the following error:search/reco-stack.cc:85: internal compiler error: in maybe_emit_vtables, at cp/decl2.c:1548exact command sequence in top directory of gecode source tree:$ ./configure CC=""/usr/local/bin/gcc.exe"" CXX=""/usr/local/bin/g++.exe""(lots of output)$ make(some output)ERROR MESSAGE AS ABOVE",RESOLVED          FIXED      
28828,Danny Smith,FAIL: gcc.dg/attr-invalid.c,"Executing on host: /home/dave/gcc-4.2/objdir/gcc/xgcc -B/home/dave/gcc-4.2/objdir/gcc/ /home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c    -fno-show-column -S  -o attr-invalid.s    (timeout = 300)/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c:12: warning: 'noinline' attribute ignored/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c:14: warning: 'noinline' attribute ignored/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c:17: warning: 'noinline' attribute ignored/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c:18: warning: 'noinline' attribute does not apply to types/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c:20: warning: 'noinline' attribute ignored/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c: In function 'noinline_fn_knrarg':/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c:23: warning: 'noinline' attribute ignored/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c: At top level:/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c:26: warning: 'noinline' attribute ignored/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c: In function 'noinline_fn_vars':/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c:29: warning: 'noinline' attribute ignored/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c:30: warning: 'noinline' attribute ignored/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c: At top level:/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c:38: warning: 'used' attribute ignored/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c:40: warning: 'used' attribute ignored/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c:43: warning: 'used' attribute ignored/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c:44: warning: 'used' attribute does not apply to types/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c: In function 'used_fn_knrarg':/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c:49: warning: 'used' attribute ignored/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c: At top level:/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c:52: warning: 'used' attribute ignored/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c: In function 'used_fn_vars':/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c:56: warning: 'used' attribute ignored/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c: At top level:/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c:67: warning: 'weak' attribute ignored/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c:69: warning: 'weak' attribute ignored/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c:72: warning: 'weak' attribute ignored/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c: In function 'weak_fn_knrarg':/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c:76: warning: 'weak' attribute ignored/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c: At top level:/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c:79: warning: 'weak' attribute ignored/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c:88: warning: 'dllimport' attribute directive ignored/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c:90: warning: 'dllimport' attribute directive ignored/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c:93: warning: 'dllimport' attribute directive ignored/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c: In function 'dllimport_fn_knrarg':/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c:97: warning: 'dllimport' attribute directive ignored/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c: At top level:/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c:100: warning: 'dllimport' attribute directive ignoredoutput is:/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c:12: warning: 'noinline' attribute ignored/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c:14: warning: 'noinline' attribute ignored/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c:17: warning: 'noinline' attribute ignored/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c:18: warning: 'noinline' attribute does not apply to types/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c:20: warning: 'noinline' attribute ignored/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c: In function 'noinline_fn_knrarg':/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c:23: warning: 'noinline' attribute ignored/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c: At top level:/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c:26: warning: 'noinline' attribute ignored/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c: In function 'noinline_fn_vars':/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c:29: warning: 'noinline' attribute ignored/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c:30: warning: 'noinline' attribute ignored/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c: At top level:/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c:38: warning: 'used' attribute ignored/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c:40: warning: 'used' attribute ignored/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c:43: warning: 'used' attribute ignored/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c:44: warning: 'used' attribute does not apply to types/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c: In function 'used_fn_knrarg':/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c:49: warning: 'used' attribute ignored/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c: At top level:/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c:52: warning: 'used' attribute ignored/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c: In function 'used_fn_vars':/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c:56: warning: 'used' attribute ignored/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c: At top level:/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c:67: warning: 'weak' attribute ignored/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c:69: warning: 'weak' attribute ignored/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c:72: warning: 'weak' attribute ignored/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c: In function 'weak_fn_knrarg':/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c:76: warning: 'weak' attribute ignored/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c: At top level:/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c:79: warning: 'weak' attribute ignored/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c:88: warning: 'dllimport' attribute directive ignored/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c:90: warning: 'dllimport' attribute directive ignored/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c:93: warning: 'dllimport' attribute directive ignored/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c: In function 'dllimport_fn_knrarg':/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c:97: warning: 'dllimport' attribute directive ignored/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c: At top level:/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c:100: warning: 'dllimport' attribute directive ignoredPASS: gcc.dg/attr-invalid.c  (test for warnings, line 12)PASS: gcc.dg/attr-invalid.c  (test for warnings, line 14)PASS: gcc.dg/attr-invalid.c  (test for warnings, line 17)PASS: gcc.dg/attr-invalid.c  (test for warnings, line 18)PASS: gcc.dg/attr-invalid.c  (test for warnings, line 20)PASS: gcc.dg/attr-invalid.c  (test for warnings, line 23)PASS: gcc.dg/attr-invalid.c  (test for warnings, line 26)PASS: gcc.dg/attr-invalid.c  (test for warnings, line 29)PASS: gcc.dg/attr-invalid.c  (test for warnings, line 30)PASS: gcc.dg/attr-invalid.c  (test for warnings, line 38)PASS: gcc.dg/attr-invalid.c  (test for warnings, line 40)PASS: gcc.dg/attr-invalid.c  (test for warnings, line 43)PASS: gcc.dg/attr-invalid.c  (test for warnings, line 44)PASS: gcc.dg/attr-invalid.c  (test for warnings, line 49)PASS: gcc.dg/attr-invalid.c  (test for warnings, line 52)PASS: gcc.dg/attr-invalid.c  (test for warnings, line 56)PASS: gcc.dg/attr-invalid.c  (test for warnings, line 67)PASS: gcc.dg/attr-invalid.c  (test for warnings, line 69)PASS: gcc.dg/attr-invalid.c  (test for warnings, line 72)PASS: gcc.dg/attr-invalid.c  (test for warnings, line 76)PASS: gcc.dg/attr-invalid.c  (test for warnings, line 79)FAIL: gcc.dg/attr-invalid.c  (test for warnings, line 88)FAIL: gcc.dg/attr-invalid.c  (test for warnings, line 90)FAIL: gcc.dg/attr-invalid.c  (test for warnings, line 93)FAIL: gcc.dg/attr-invalid.c  (test for warnings, line 97)FAIL: gcc.dg/attr-invalid.c  (test for warnings, line 100)FAIL: gcc.dg/attr-invalid.c (test for excess errors)Excess errors:/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c:88: warning: 'dllimport' attribute directive ignored/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c:90: warning: 'dllimport' attribute directive ignored/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c:93: warning: 'dllimport' attribute directive ignored/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c:97: warning: 'dllimport' attribute directive ignored/home/dave/gcc-4.2/gcc/gcc/testsuite/gcc.dg/attr-invalid.c:100: warning: 'dllimport' attribute directive ignored",RESOLVED          FIXED      
28648,Danny Smith,[4.2 regression] ICE with invalid dllimport attribute,"The following causes ICE on windows targets on mainline.  void foo (int __attribute__ ((dllimport)) bar); dllimp_parm.c:1: internal compiler error: tree check: expected tree that contains 'decl with visibility' structure, have 'parm_decl'  in handle_dll_attribute, at tree.c:3762Please submit a full bug report,I believe this is a regression from 3.4.5, but that is only because tree check now picks up the bug.",RESOLVED          FIXED      
27789,Danny Smith,[4.2 Regression] attribute handling fallout from DECL_INITIAL changes,"This revision to gcc/cp2006-05-24  Mark Mitchell  <mark@codesourcery.com>	PR c++/20103	* decl.c (cp_make_fname_decl): Don't set DECL_INITIAL to	error_mark_node to indicate an initialization is OK.	(start_decl): Likewise.  Adjust call to start_decl_1.	(start_decl_1): Add initialized parameter.  Simplify.	* except.c (initialize_handler_parm): Adjust call to	setart_decl_1.	(expand_start_catch_block): Let cp_finish_decl initialize catch	parameters.	* cp-tree.h (start_decl_1): Adjust prototype.	* pt.c (tsubst_expr): Don't set DECL_INITIAL to error_mark_node.	(instantiate_decl): Let cp_finish_decl handle initialization.	* semantics.c (finish_compound_literal): Create a temporary	variable for the literal.	* typeck.c (build_unary_op): Remove COMPOUND_LITERAL_P special	cases.	* decl2.c (finish_static_data_member_decl): Don't set	DECL_INITIAL.	(grokfield): Do not try to initialize functions.has resulted in 3 new testsuite failures:FAIL: g++.dg/ext/dllimport4.C  (test for errors, line 6)FAIL: g++.dg/ext/selectany1.C (test for excess errors)FAIL: g++.dg/ext/selectany2.C (test for excess errors)The dllimport failure is because handle_dllimport_atribute in tree.cuses DECL_INITIAL to disallow adding the attribute to the definitionof a variable.The selectany failures are because ix86_handle_selectany_attribute inconfig/i386/winnt.c uses DECL_INITIAL to disallow adding the attributeto a variable that is _not_ initialized.For both attributes, the test for DECL_INITIAL still work in C testcases.Danny",RESOLVED          FIXED      
11455,Danny Smith,Bootstrap failure in Cygwin,"GCC 3.4 under Cygwin currently fails due to incorrect format specifiers inconfig/i386/winnt.cThe cause of this failure was Danny Smith's patch located athttp://gcc.gnu.org/ml/gcc-patches/2003-06/msg01681.html which uses ""%D"".According to Kaveh Ghzazi, the use of ""%D"" is likely incorrect.  But in case itis correct, he gives pointers on how to correct it if here:http://gcc.gnu.org/ml/gcc/2003-07/msg00484.html",RESOLVED          FIXED      
8750,Danny Smith,Cygwin prolog generation erroneously emitting __alloca as regular function call,"(Note: please ignore my prior email to gcc-bugs@gcc.gnu.org as this bug report replaces it. The .zip file included in my priot email didn't include the -save-temps .i output, whereas the .zip file attached to this report does)Dr. Ulrich Weigand (weigand@informatik.uni-erlangen.de) has analyzed this bug as follows:""This would appear to be a gcc bug.  Specifically, what appears to happen here is that instruction scheduling moves the leal across the call to __alloca.  This in turn is caused by a bug in the cygwin prolog generation code that emits the __alloca call as a regular function call.""  ""As regular function calls do not change the stack pointer, the instruction scheduling pass concluded that it was safe to move the leal 16(%esp),%edi across the call (%edi is preserved across calls as well).""  ""Instead, the __alloca call should have been annotated to express the fact that it changes %esp in a special way. How to best fix this I'd leave to the i386 backend maintainers; please report this bug (with testcase and explanation) to the gcc bug-tracking system.""  ""(From what I can see, the same bug exists unchanged in gcc 3.2.1 and the current pre-3.3 sources. As this particular code path is only used for cygwin, it probably wasn't noticed earlier ...)""Release:gcc version 3.2 20020927 (prerelease)Environment:PIII 800MHzWindows 2000 Pro SP3Cygwin 1.3.16-1gcc 3.2-3$ uname -aCYGWIN_NT-5.0 (censored) 1.3.16(0.65/3/2) 2002-11-22 22:18 i686 unknownHow-To-Repeat:fish@foobar ~/fishtest$ cat fish.c#include <stdio.h>#include <string.h>void foo (){    char a[15000];    a[0]=0;    printf(""String length=%d\n"",strlen(a));    memset( &a[0], 0xCD, 13371 );    a[13371]=0;    printf(""String length=%d\n"",strlen(a));}int main ( int argc, char* argv[] ){    foo();    return 0;}fish@foobar ~/fishtest$ gcc -march=i686 -g -O2 -fomit-frame-pointer -c fish.c-Wa,-adhln=fish.c.listing.txtfish@foobar ~/fishtest$ gcc -march=i686 -g -O2 -fomit-frame-pointer -o fish.exe fish.ofish@foobar ~/fishtest$ fishString length=2",RESOLVED          FIXED      
5287,Danny Smith,[3.3/3.4 regression] [mingw/cygwin] ICE with dllimport (two other testcases),"Got an internal compiler error.Release:3.0.3Environment:Win98, Cygwin, MingwSystem: CYGWIN_98-4.10 VLADA 1.3.3s(0.40/3/2) 2001-07-04 23:55 i586 unknownArchitecture: i686host: i686-pc-cygwinbuild: i686-pc-cygwintarget: i386-pc-mingw32configured with: ../gcc-3.0.3/configure --verbose --enable-threads=win32 --with-system-zlib --disable-nls --disable-shared --enable-static --with-gnu-as --with-gnu-ld --program-prefix=new- --enable-languages=c,c++ --disable-libgcj --disable-checking --enable-sjlj-exceptions --host=i686-pc-cygwin --enable-haifa --target=mingw32 --srcdir=/usr/local/gcc-3.0.3 --prefix=/usr/local/gcc-3.0.3-cygwin-mingw32/install-mingw",RESOLVED          FIXED      
7910,Danny Smith,[3.3/3.4 regression] [cygwin] Seg fault when compiling OpenSceneGraph 0.9.1,"The file to compile comes from the OpenSceneGraph project (version 0.9.1). I have simplified it a little bit.When compiling with the command line:c++ -c AppVisitor.cpp -o AppVisitor.o -I.the following error occurs:osg/ConvexPlanarOccluder:57: internal error: Segmentation faultThe same error occurs with the beta version gcc version 3.3 20020909.Release:unknownEnvironment:Cygwin 1.3.12-2Pentium III 800MHzReading specs from /usr/local/gcc-3.2/lib/gcc-lib/i686-pc-cygwin/3.2/specsConfigured with: ../gcc/configure --prefix=/usr/local/gcc-3.2 --enable-shared --enable-threads=win32 --enable-languages=c,c++,f77 --disable-libgcjThread model: win32gcc version 3.2How-To-Repeat:With the attached file, the commandc++ -c AppVisitor.ii -o AppVisitor.oreproduces the problem.",RESOLVED          FIXED      
6771,Danny Smith,"[3.4 regression] [cygwin] ICE in in rest_of_compilation, at toplev.c:3761 for code with dllimport/dllexport","*locally* unused class with __attribute__(dllexport) does not emit any code. This is a problem because the corresponding __attribute__(dllimport) in the client module would leave unresolved externals during linking.e.g.namespace{  int blah = 0;};struct __attribute__((dllexport)) foo{  void foofunction () { ++blah; }};generates *no code* for foo::foofunction, but a client module with the corresponding __attribute__(dllimport) would require the code. e.g.:struct __attribute__((dllimport)) bar{  void barfunction () { };};void __attribute__((dllexport)) blahblah (){  bar b;  b.barfunction ();}Leaves an unresolved external bar::barfunction. My guess is that barfunction was not inlined because it is dllimport, whereas foofunction was not generated because it is erroneously expected to be inlined. gcc 2.95.3-5 (cygwin special) used to emit the required code.Release:3.4 CVS 20030430Environment:CygwinHow-To-Repeat:Don't try to link the attached code - it's cut down too far. Compile the example code with -save-temps and inspect the .s file for the absence of foofunction, and requirement for external barfunction.",RESOLVED          FIXED      
9021,Danny Smith,[win32] No exports possible when using a class pointer in an union,"When creating a class with in it an union, not all exports come inthe object fileRelease:${DEFAULT_RELEASE-$RELEASE_C}Environment:System: NT4.0Architecture: pentium 4host: i386-pc-mingw32build: i386-pc-mingw32target: i386-pc-mingw32configured with: ../gcc/configure --with-gcc --with-gnu-ld --with-gnu-as--host=mingw32 --target=mingw32 --prefix=/mingw --enable-threads--disable-nls --enable-languages=f77,c++,objc,ada --disable-win32-registry--disable-shared : (reconfigured) ../gcc/configure --with-gcc --with-gnu-ld--with-gnu-as --host=mingw32 --target=mingw32 --prefix=/mingw--enable-threads --disable-nls --enable-languages=f77,c++,objc,ada--disable-win32-registry --disable-sharedHow-To-Repeat:when compiling the following code with g++ -DWITH_BUG=1 -c BugDemo.cpp the generated object file will not contain exportswhen compiling withg++ -DWITH_BUG=0 -c BugDemo.cpp the generated object file will contain exports/*** Start of code ***/// BugDemo.cpp: demonstration of export bug////////////////////////////////////////////////////////////////////////class __declspec (dllexport) BugDemo {public:	BugDemo();	virtual ~BugDemo();	union	{#if WITH_BUG	    class BugDemo*	m_pBugDemo;#else		       		BugDemo*	m_pBugDemo;#endif	};};BugDemo::BugDemo(){}BugDemo::~BugDemo(){}/*** End of code ***/---Jaap de WolffWolff@NewBridges.nlNew Bridges B.V.Calandstraat 443316 EA DordrechtTel. 078 6548787Fax 078 6548788www.NewBridges.nlUnformatted: If the bug report must be sent to someone else, please inform me!",RESOLVED          FIXED      
11005,Danny Smith,[win32] Declaration of class as friend overrides dllimport attribute.,"When a dllimport'ed class is declared as friend, the attribute is lost _unless_ the declaration has aleady been instantiated.The following demonstrates.  The symbol Bar::bar should be marked as dllimport ('_imp__' prefix in assembler name).  It doesn't. If the decl is instantiated by moving function test1() to before the declaration of Foo, then the symbol _is_ marked as dllimport.This is in both 3.4 and 3.3.1 (and all earlier 3.x I have tested)// dllfriend.C// { dg-do compile { target i?86-*-cygwin* i?86-*-mingw*} }class  __attribute__((dllimport)) Bar{  public:    static int bar;};class Foo{  public:    friend class  Bar ;    int foo();};int Foo::foo(){  return Bar::bar;}int test1(){  return Bar::bar;}int test2(){  Foo aFoo;;  return aFoo.foo();}// { dg-final { scan-assembler ""__imp___ZN3Bar3barE"" } }",RESOLVED          FIXED      
10148,Danny Smith,[3.3 regression] [MingW/CygWin] Compiler dumps core,"D:\Gerhard\src\db_row-0.71>gcc -vReading specs from c:/MinGW/bin/../lib/gcc-lib/mingw32/3.2/specsConfigured with: ../gcc/configure --with-gcc --with-gnu-ld --with-gnu-as --host=mingw32 --target=mingw32 --prefix=/mingw --enable-threads --disable-nls --enable-languages=f77,c++,objc,ada --disable-win32-registry --disable-sharedThread model: win32gcc version 3.2 (mingw special 20020817-1)D:\Gerhard\src\db_row-0.71>c:\MinGW\bin\gcc.exe -save-temps -mno-cygwin -mdll -O -Wall -I. -Ic:\python22\include -c fields.c -o build\temp.win32-2.2\Release\fields.ofields.c:451: warning: static declaration for `fields_ass_item' follows non-staticfields.c:804: internal error: Segmentation faultPlease submit a full bug report,with preprocessed source if appropriate.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.Release:3.2Environment:Windows 2000SP3 x86How-To-Repeat:Compile attached file.",RESOLVED          FIXED      
9738,Danny Smith,"[3.3 regression] [mingw] Internal compiler error in rest_of_compilation, at toplev.c: 3491","preproc1.cpp: In function `TOperandType GetOperandType(TString)':preproc1.cpp:1394: Internal compiler error in rest_of_compilation, at toplev.c:   3491Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.make: *** [preproc1.o] Error 1Release:gcc version 3.2 (mingw special 20020817-1)Environment:win2000MinGW",RESOLVED          FIXED      
17242,John David Anglin,Testsuite fails due to duplicate symbols,"Executing on host: /xxx/gnu/gcc-3.3/objdir/gcc/g++ -shared-libgcc -B/xxx/gnu/gcc-3.3/objdir/gcc/ -nostdinc++ -L/xxx/gnu/gcc-3.3/objdir/hppa1.1-hp-hpux10.20/libstdc++-v3/src -L/xxx/gnu/gcc-3.3/objdir/hppa1.1-hp-hpux10.20/libstdc++-v3/src/.libs -B/opt/gnu/gcc/gcc-3.5.0/hppa1.1-hp-hpux10.20/bin/ -B/opt/gnu/gcc/gcc-3.5.0/hppa1.1-hp-hpux10.20/lib/ -isystem /opt/gnu/gcc/gcc-3.5.0/hppa1.1-hp-hpux10.20/include -isystem /opt/gnu/gcc/gcc-3.5.0/hppa1.1-hp-hpux10.20/sys-include -g -O2 -D_GLIBCXX_ASSERT -fmessage-length=0 -DLOCALEDIR=""/xxx/gnu/gcc-3.3/objdir/hppa1.1-hp-hpux10.20/libstdc++-v3/po/share/locale"" -nostdinc++ -I/xxx/gnu/gcc-3.3/objdir/hppa1.1-hp-hpux10.20/libstdc++-v3/include/hppa1.1-hp-hpux10.20 -I/xxx/gnu/gcc-3.3/objdir/hppa1.1-hp-hpux10.20/libstdc++-v3/include -I/xxx/gnu/gcc-3.3/gcc/libstdc++-v3/libsupc++ -I/xxx/gnu/gcc-3.3/gcc/libstdc++-v3/libsupc++ -I/xxx/gnu/gcc-3.3/gcc/libstdc++-v3/include/backward -I/xxx/gnu/gcc-3.3/gcc/libstdc++-v3/testsuite /xxx/gnu/gcc-3.3/gcc/libstdc++-v3/testsuite/21_strings/basic_string/inserters_extractors/pod/10081-in.cc    -include bits/stdc++.h  -L/xxx/gnu/gcc-3.3/objdir/hppa1.1-hp-hpux10.20/./libstdc++-v3/testsuite -lv3test -lm   -o ./10081-in.exe   (timeout = 300)/usr/ccs/bin/ld: Duplicate symbol ""guard variable for std::basic_string<__gnu_cxx::character<unsigned short, unsigned int, mbstate_t>, std::char_traits<__gnu_cxx::character<unsigned short, unsigned int, mbstate_t> >, std::allocator<__gnu_cxx::character<unsigned short, unsigned int, mbstate_t> > >::_Rep::_S_terminal"" in files /var/tmp//cc63UnQK.o and /xxx/gnu/gcc-3.3/objdir/hppa1.1-hp-hpux10.20/./libstdc++-v3/testsuite/libv3test.a(testsuite_hooks.o)/usr/ccs/bin/ld: Duplicate symbol ""std::basic_string<__gnu_cxx::character<unsigned short, unsigned int, mbstate_t>, std::char_traits<__gnu_cxx::character<unsigned short, unsigned int, mbstate_t> >, std::allocator<__gnu_cxx::character<unsigned short, unsigned int, mbstate_t> > >::_Rep::_S_empty_rep_storage"" in files /var/tmp//cc63UnQK.o and /xxx/gnu/gcc-3.3/objdir/hppa1.1-hp-hpux10.20/./libstdc++-v3/testsuite/libv3test.a(testsuite_hooks.o)/usr/ccs/bin/ld: Duplicate symbol ""std::basic_string<__gnu_cxx::character<unsigned short, unsigned int, mbstate_t>, std::char_traits<__gnu_cxx::character<unsigned short, unsigned int, mbstate_t> >, std::allocator<__gnu_cxx::character<unsigned short, unsigned int, mbstate_t> > >::_Rep::_S_terminal"" in files /var/tmp//cc63UnQK.o and /xxx/gnu/gcc-3.3/objdir/hppa1.1-hp-hpux10.20/./libstdc++-v3/testsuite/libv3test.a(testsuite_hooks.o)/usr/ccs/bin/ld: Found 3 duplicate symbol(s)collect2: ld returned 1 exit statuscompiler exited with status 1...FAIL: 21_strings/basic_string/inserters_extractors/pod/10081-in.cc (test for excess errors)The following tests fail due to the same problem:FAIL: 21_strings/basic_string/inserters_extractors/pod/10081-out.cc (test for excess errors)FAIL: 22_locale/numpunct/members/pod/1.cc (test for excess errors)FAIL: 22_locale/numpunct/members/pod/2.cc (test for excess errors)FAIL: 27_io/basic_istream/sentry/pod/1.cc (test for excess errors)FAIL: 27_io/basic_ostream/sentry/pod/1.cc (test for excess errors)We have one-only support on this target, but no weak support.  I checkedthe first duplicate and it is not being output as a one-only symbol.",RESOLVED          FIXED      
6191,Wolfgang Bangerth,[HP-PA] ICE doing pointer math with -fPIC,"ICE when doing math on &foo where foo is extern, with -fPICRelease:3.0.4Environment:HPPA Debian w/ gcc-3.0 3.0.4-6",RESOLVED          FIXED      
14331,Dave Korn,"please add option to suppress warning message ""no newline at end of file""","I checked through the gcc manual, and didn't found any optionto suppress the warning message ""no newline at end of file"".It clutters the error log when I'm compiling a lot of files.Thanks,Alex",RESOLVED          FIXED      
43601,Dave Korn,Enormous increase in DLL object files size in 4.5,"Hello, This is not necessarily a bug but I don't know about any other place todiscuss this so I'm reporting it here -- please let me know if I should postsomewhere else. Anyhow, there seems to be a big problem with building shared C++ librariesusing the typical	class __attribute(dllexport) SomePublicClass	{	public:		... a lot of inline functions without dllexport ...		... and also a lot of non-inline functions ...	};pattern, wxWidgets being one particular example (but AFAIK there is reallynothing special about wxWidgets here). I've described the problem in detailsin http://thread.gmane.org/gmane.comp.gnu.mingw.user/32435 but, basically,the size of object files produced by mingw32 4.5 has been multiplied by 10compared to mingw32 4.4 making linking them extremely time consuming andplainly impossible on machines with modest amounts of RAM. This seems to be due to the following change in gcc itself (and notmingw32): http://gcc.gnu.org/viewcvs?view=revision&revision=147799 and I'dlike to know if there is any way to undo its effect. For example, the replyfrom Cesar Strauss in the thread above suggested using -fhide-inline-functionsoption for this. IMHO ideal would be to revert to the old behaviour atleast until some better approach can be found but any solution would benicer than nothing. Thanks in advance,VZ",RESOLVED          FIXED      
40125,Dave Korn,libgcc_s DLL installed in wrong directory in cross toolchain,"GCC 4.4 or later configured with --enable-shared for i686-mingw32installs a libgcc DLL (e.g. libgcc_s_dw2-1.dll) in $(bindir).  Asthis is a binary for the target not the host, this is an inappropriatelocation in a cross toolchain; some target-specific directory (e.g.i686-mingw32/bin or i686-mingw32/lib) should be used instead.",RESOLVED          FIXED      
47218,Dave Korn,[4.6 regression] C++ multiple definitions of non-virtual thunk problem,"Sometime between 2010-12-22 and rev.167484, something changed in the behaviour of the C++ compiler w.r.t the way it handles non-virtual thunks.  I have just discovered this while working on a patch for PR43601; a compiler built from trunk on the earlier date reproduces the problem described there, ending in an out-of-memory error during the final link:Creating library file: /tmp/wx/obj-x-ming-new/lib/libwx_mswd_core-2.8.dll.a/opt/mingw-new/lib/gcc/i686-pc-mingw32/4.6.0/../../../../i686-pc-mingw32/bin/ld: final link failed: Memory exhaustedcollect2: ld returned 1 exit status... whereas a compiler built from r.167484 emits a whole lot of multiple-definition errors, and stops before trying to complete the link:Creating library file: /tmp/wx/obj-x-ming-clean/lib/libwx_based-2.8.dll.abasedll_wfstream.o:/tmp/wx/wxWidgets-2.8.11/src/common/wfstream.cpp:407: multiple definition of `non-virtual thunk to wxFFileStream::~wxFFileStream()'basedll_filesys.o:/tmp/wx/wxWidgets-2.8.11/src/common/filesys.cpp:697: first defined herebasedll_wfstream.o:/tmp/wx/wxWidgets-2.8.11/src/common/wfstream.cpp:407: multiple definition of `non-virtual thunk to wxFFileStream::~wxFFileStream()'basedll_filesys.o:/tmp/wx/wxWidgets-2.8.11/src/common/filesys.cpp:697: first defined herebasedll_wfstream.o:/tmp/wx/wxWidgets-2.8.11/src/common/wfstream.cpp:407: multiple definition of `non-virtual thunk to wxFileStream::~wxFileStream()'basedll_filesys.o:/tmp/wx/wxWidgets-2.8.11/src/common/filesys.cpp:697: first defined herebasedll_wfstream.o:/tmp/wx/wxWidgets-2.8.11/src/common/wfstream.cpp:407: multiple definition of `non-virtual thunk to wxFileStream::~wxFileStream()'basedll_filesys.o:/tmp/wx/wxWidgets-2.8.11/src/common/filesys.cpp:697: first defined herebasedll_zipstrm.o:/tmp/wx/wxWidgets-2.8.11/src/common/zipstrm.cpp:2423: multiple definition of `non-virtual thunk to wxFFileStream::~wxFFileStream()'basedll_filesys.o:/tmp/wx/wxWidgets-2.8.11/src/common/filesys.cpp:697: first defined herebasedll_zipstrm.o:/tmp/wx/wxWidgets-2.8.11/src/common/zipstrm.cpp:2423: multiple definition of `non-virtual thunk to wxFFileStream::~wxFFileStream()'basedll_filesys.o:/tmp/wx/wxWidgets-2.8.11/src/common/filesys.cpp:697: first defined herebasedll_zipstrm.o:/tmp/wx/wxWidgets-2.8.11/src/common/zipstrm.cpp:2423: multiple definition of `non-virtual thunk to wxFileStream::~wxFileStream()'basedll_filesys.o:/tmp/wx/wxWidgets-2.8.11/src/common/filesys.cpp:697: first defined herebasedll_zipstrm.o:/tmp/wx/wxWidgets-2.8.11/src/common/zipstrm.cpp:2423: multiple definition of `non-virtual thunk to wxFileStream::~wxFileStream()'basedll_filesys.o:/tmp/wx/wxWidgets-2.8.11/src/common/filesys.cpp:697: first defined herebasedll_registry.o:/tmp/wx/wxWidgets-2.8.11/src/msw/registry.cpp:1428: multiple definition of `non-virtual thunk to wxFFileStream::~wxFFileStream()'basedll_filesys.o:/tmp/wx/wxWidgets-2.8.11/src/common/filesys.cpp:697: first defined herebasedll_registry.o:/tmp/wx/wxWidgets-2.8.11/src/msw/registry.cpp:1428: multiple definition of `non-virtual thunk to wxFFileStream::~wxFFileStream()'basedll_filesys.o:/tmp/wx/wxWidgets-2.8.11/src/common/filesys.cpp:697: first defined herebasedll_registry.o:/tmp/wx/wxWidgets-2.8.11/src/msw/registry.cpp:1428: multiple definition of `non-virtual thunk to wxFileStream::~wxFileStream()'basedll_filesys.o:/tmp/wx/wxWidgets-2.8.11/src/common/filesys.cpp:697: first defined herebasedll_registry.o:/tmp/wx/wxWidgets-2.8.11/src/msw/registry.cpp:1428: multiple definition of `non-virtual thunk to wxFileStream::~wxFileStream()'basedll_filesys.o:/tmp/wx/wxWidgets-2.8.11/src/common/filesys.cpp:697: first defined herecollect2: ld returned 1 exit statusIn both cases the build was configured with a cygwin-x-mingw cross compiler using the same command line:$ /tmp/wx/wxWidgets-2.8.11/configure --with-msw --enable-debug --enable-debug_gdb --enable-shared 2>&1 --host=i686-pc-mingw32 More once I've diagnosed what's going on in some of the generated object files.  I've marked this major as it could easily affect a whole lot of c++ library builds, but may reduce that severity if it turns out to be something unusual that wx is doing.  However it's still a regression.",RESOLVED          FIXED      
46221,Dave Korn,"[4.6 Regression] huge number of c++ testsuite failures, libstdc++.so alias missing","Created attachment 22196 [details]locale-inst.iiCurrent mainline miscompiles locale-inst.cc, resulting in most c++ tests complaining/home/alan/build/ppc/gcc-curr/powerpc-linux/./libstdc++-v3/src/.libs/libstdc++.so: undefined reference to `std::ostreambuf_iterator<wchar_t, std::char_traits<wchar_t> > std::num_put<wchar_t, std::ostreambuf_iterator<wchar_t, std::char_traits<wchar_t> > >::_M_insert_float<long double>(std::ostreambuf_iterator<wchar_t, std::char_traits<wchar_t> >, std::ios_base&, wchar_t, char, long double) const'Ah, I thought, long double compat missing, but _GLIBCXX_LONG_DOUBLE_COMPAT is defined, and preprocessed locale-inst.cc shows the alias is thereextern ""C"" void _ZNKSt7num_putIcSt19ostreambuf_iteratorIcSt11char_traitsIcEEE15_M_insert_floatIeEES3_S3_RSt8ios_baseccT_ (void) __attribute__ ((alias (""_ZNKSt7num_putIcSt19ostreambuf_iteratorIcSt11char_traitsIcEEE15_M_insert_floatIdEES3_S3_RSt8ios_baseccT_""), weak))but, no sign of it in the assembly output.",RESOLVED          FIXED      
46674,Dave Korn,[4.6 Regression] Weak alias is mistakenly optimized away,"Created attachment 22537 [details]The test caseThis patchhttp://gcc.gnu.org/ml/gcc-patches/2010-10/msg02275.htmlcauses a failure when building glibc for arm-none-linux-gnueabi target. The reduced test case is attached.Without this patch, memchr is defined in the assembly:    .size    __memchr, .-__memchr    .weak   __GI_memchr    .hidden __GI_memchr    .set    __GI_memchr,__memchr    .global memchr    .set    memchr,__GI_memchr    .ident    ""GCC: (GNU) 4.6.0 20101026 (experimental)""but with this patch, memchr is not defined:    .size    __memchr, .-__memchr    .weak    __GI_memchr    .hidden    __GI_memchr    .set    __GI_memchr,__memchr    .ident    ""GCC: (GNU) 4.6.0 20101026 (experimental)""When compiling the test case, -O is used on the command line.",RESOLVED          FIXED      
46938,Dave Korn,FAIL: gcc.dg/pr43157.c (test for excess errors),"Executing on host: /test/gnu/gcc/objdir/gcc/xgcc -B/test/gnu/gcc/objdir/gcc/ /test/gnu/gcc/gcc/gcc/testsuite/gcc.dg/pr43157.c   -O1 -flto -fuse-linker-plugin  -lm   -o pr43157.exe    (timeout = 300)xgcc: fatal error: -fuse-linker-plugin, but liblto_plugin.so not foundcompilation terminated.compiler exited with status 1output is:xgcc: fatal error: -fuse-linker-plugin, but liblto_plugin.so not foundcompilation terminated.FAIL: gcc.dg/pr43157.c (test for excess errors)Excess errors:xgcc: fatal error: -fuse-linker-plugin, but liblto_plugin.so not foundcompilation terminated.With -v:Reading specs from /test/gnu/gcc/objdir/gcc/specsCOLLECT_GCC=/test/gnu/gcc/objdir/gcc/xgccCOLLECT_LTO_WRAPPER=/test/gnu/gcc/objdir/gcc/lto-wrapperTarget: hppa64-hp-hpux11.11Configured with: ../gcc/configure --with-gnu-as --with-as=/opt/gnu64/bin/as --with-ld=/usr/ccs/bin/ld --enable-shared --with-local-prefix=/opt/gnu64 --prefix=/opt/gnu64/gcc/gcc-4.6.0 --build=hppa64-hp-hpux11.11 --enable-threads=posix --disable-nls --with-gmp=/opt/gnu64/gcc/gcc-4.6.0 --with-libelf=/opt/gnu64 --enable-languages=c,c++,objc,obj-c++,fortran,ltoThread model: posixgcc version 4.6.0 20101214 (experimental) [trunk revision 167781] (GCC) COLLECT_GCC_OPTIONS='-B' '/test/gnu/gcc/objdir/gcc/' '-O1' '-flto' '-fuse-linker-plugin' '-o' 'pr43157.exe' '-v' /test/gnu/gcc/objdir/gcc/cc1 -quiet -v -iprefix /test/gnu/gcc/objdir/gcc/../lib/gcc/hppa64-hp-hpux11.11/4.6.0/ -isystem /test/gnu/gcc/objdir/gcc/include -isystem /test/gnu/gcc/objdir/gcc/include-fixed /test/gnu/gcc/gcc/gcc/testsuite/gcc.dg/pr43157.c -quiet -dumpbase pr43157.c -auxbase pr43157 -O1 -version -flto -fuse-linker-plugin -o /var/tmp//cc8dn1cK.sGNU C (GCC) version 4.6.0 20101214 (experimental) [trunk revision 167781] (hppa64-hp-hpux11.11)	compiled by GNU C version 4.6.0 20101214 (experimental) [trunk revision 167781], GMP version 5.0.1, MPFR version 2.4.2, MPC version 0.8.2GGC heuristics: --param ggc-min-expand=30 --param ggc-min-heapsize=4096ignoring nonexistent directory ""/test/gnu/gcc/objdir/gcc/../lib/gcc/hppa64-hp-hpux11.11/4.6.0/include""ignoring nonexistent directory ""/test/gnu/gcc/objdir/gcc/../lib/gcc/hppa64-hp-hpux11.11/4.6.0/include-fixed""ignoring nonexistent directory ""/test/gnu/gcc/objdir/gcc/../lib/gcc/hppa64-hp-hpux11.11/4.6.0/../../../../hppa64-hp-hpux11.11/include""ignoring nonexistent directory ""/test/gnu/gcc/objdir/gcc/../lib/gcc/../../lib/gcc/hppa64-hp-hpux11.11/4.6.0/include""ignoring nonexistent directory ""/test/gnu/gcc/objdir/gcc/../lib/gcc/../../include""ignoring nonexistent directory ""/test/gnu/gcc/objdir/gcc/../lib/gcc/../../lib/gcc/hppa64-hp-hpux11.11/4.6.0/include-fixed""ignoring nonexistent directory ""/test/gnu/gcc/objdir/gcc/../lib/gcc/../../lib/gcc/hppa64-hp-hpux11.11/4.6.0/../../../../hppa64-hp-hpux11.11/include""#include ""..."" search starts here:#include <...> search starts here: /test/gnu/gcc/objdir/gcc/include /test/gnu/gcc/objdir/gcc/include-fixed /opt/gnu64/include /usr/includeEnd of search list.GNU C (GCC) version 4.6.0 20101214 (experimental) [trunk revision 167781] (hppa64-hp-hpux11.11)	compiled by GNU C version 4.6.0 20101214 (experimental) [trunk revision 167781], GMP version 5.0.1, MPFR version 2.4.2, MPC version 0.8.2GGC heuristics: --param ggc-min-expand=30 --param ggc-min-heapsize=4096Compiler executable checksum: 7ccd9647394182dfe07867e5fd941d9cCOLLECT_GCC_OPTIONS='-B' '/test/gnu/gcc/objdir/gcc/' '-O1' '-flto' '-fuse-linker-plugin' '-o' 'pr43157.exe' '-v' /opt/gnu64/bin/as -v -o /var/tmp//ccAnbwpu.o /var/tmp//cc8dn1cK.sGNU assembler version 2.20.51 (hppa64-hp-hpux11.11) using BFD version (GNU Binutils) 2.20.51.20100309xgcc: fatal error: -fuse-linker-plugin, but liblto_plugin.so not foundcompilation terminated.HP linker doesn't support linker plugins.",RESOLVED          FIXED      
42690,Dave Korn,Undefined reference errors with -flto -fuse-linker-plugin, ,RESOLVED          FIXED      
46695,Dave Korn,[4.6 regression] failure to build X from darwin to cris-elf with lto enabled,"with host = i686-darwin9target = cris-elf[current trunk = 167198]configure:Configured with: ../combined-trunk/configure --prefix=/GCC/cross --with-libelf=/GCC/libelf/ --target=cris-elf --disable-nls --enable-version-specific-runtime-libs --build=i686-apple-darwin9 --host=i686-apple-darwin9 --enable-sim --enable-languages=c,c++,fortran,lto,objc,obj-c++ --with-gmp=/GCC/multiprec-math/x86 --with-mpfr=/GCC/multiprec-math/x86 --with-mpc=/GCC/multiprec-math/x86 CC=/GCC/current/bin/gcc-4.6trunk CXX=/GCC/current/bin/g++-4.6trunkfails:/bin/sh ./libtool --tag=CC   --mode=compile /GCC/current/bin/gcc-4.6trunk -DHAVE_CONFIG_H -I. -I../../combined-trunk/lto-plugin  -I../../combined-trunk/lto-plugin/../include -DHAVE_CONFIG_H  -Wall -Werror -g -O2 -c -o lto-plugin.lo ../../combined-trunk/lto-plugin/lto-plugin.clibtool: compile:  /GCC/current/bin/gcc-4.6trunk -DHAVE_CONFIG_H -I. -I../../combined-trunk/lto-plugin -I../../combined-trunk/lto-plugin/../include -DHAVE_CONFIG_H -Wall -Werror -g -O2 -c ../../combined-trunk/lto-plugin/lto-plugin.c  -fno-common -DPIC -o .libs/lto-plugin.olibtool: compile:  /GCC/current/bin/gcc-4.6trunk -DHAVE_CONFIG_H -I. -I../../combined-trunk/lto-plugin -I../../combined-trunk/lto-plugin/../include -DHAVE_CONFIG_H -Wall -Werror -g -O2 -c ../../combined-trunk/lto-plugin/lto-plugin.c -o lto-plugin.o >/dev/null 2>&1/bin/sh ./libtool --tag=CC   --mode=link /GCC/current/bin/gcc-4.6trunk -Wall -Werror -g -O2 -no-undefined -bindir /GCC/cross/libexec/gcc/cris-elf/4.6.0   -o liblto_plugin.la -rpath /GCC/cross/libexec/gcc/cris-elf/4.6.0 lto-plugin.lo ../libiberty/pic/libiberty.a *** Warning: Linking the shared library liblto_plugin.la against the*** static library ../libiberty/pic/libiberty.a is not portable!libtool: link: /GCC/current/bin/gcc-4.6trunk -dynamiclib  -o .libs/liblto_plugin.0.dylib  .libs/lto-plugin.o   ../libiberty/pic/libiberty.a    -install_name  /GCC/cross/libexec/gcc/cris-elf/4.6.0/liblto_plugin.0.dylib -compatibility_version 1 -current_version 1.0 -Wl,-single_moduleUndefined symbols:  ""_environ"", referenced from:      _environ$non_lazy_ptr in libiberty.a(pex-unix.o)      _environ$non_lazy_ptr in libiberty.a(xmalloc.o)ld: symbol(s) not foundcollect2: ld returned 1 exit statusmake[2]: *** [liblto_plugin.la] Error 1make[1]: *** [all-lto-plugin] Error 2make: *** [all] Error 2=== This is attributed to the inclusion of liblto_plugin_la_LDFLAGS = -no-undefined -bindir $(libexecsubdir) \        $(if $(wildcard ../libiberty/pic/libiberty.a),,-Wc,../libiberty/libiberty.a)in lto-plugin/Makefile.am====works OK when the link is passed ""-undefined dynamic_lookup"" so that _environ can be resolved from crt at load time.",RESOLVED          FIXED      
43738,Dave Korn,"basic_file_stdio.cc uses ioctl on a fd, but not available on mingw32","basic_file_stdio.cc in __basic_file<char>::showmanyc()uses ioctl with FIONREAD, but the equivalent on win32 is ioctlsocket,perhaps not usable here, because I think there is not support for socket here in gcc (I'm wrong?)anyway it does not compilesI solve this by commenting out that part    int __r = ioctl(this->fd(), FIONREAD, &__num);    if (!__r && __num >= 0)      return __num;the problem still there since 4.3 iirc, I'm the only that noticed it?there is something wrong in my setup?my configure options:../gcc/configure                            \    --prefix=/mingw                         \    --disable-bootstrap                     \    --with-gnu-ld                           \    --target=i686-pc-mingw32                \    --with-tune=generic                     \    --with-cpu=i686                         \    --disable-cpp                           \    --disable-win32-registry                \    --disable-shared                        \    --enable-static                         \    --program-suffix=-4.6                   \    --enable-version-specific-runtime-libs  \    --enable-languages=c,c++                \    --enable-cld                            \    --enable-__cxa_atexit                   \    --disable-werror                        \    --disable-checking                      \    --enable-multilib                       \    --enable-threads=posix                  \    --disable-libssp                        \    --with-dwarf2                           \    --disable-nls                           \    --with-ppl                              \    --disable-cloog                         \    --enable-libgomp",RESOLVED          FIXED      
46709,Dave Korn,[4.6 regression] internal compiler error: process_function_and_variable_attributes gcc/cgraphunit.c:847,"Created attachment 22566 [details]preprocessed sourcegcc ctype_.i -vUsing built-in specs.COLLECT_GCC=gccCOLLECT_LTO_WRAPPER=/usr/libexec/gcc/i686-pc-cygwin/4.6.0/lto-wrapper.exeTarget: i686-pc-cygwinConfigured with: ./configure --prefix=/usr --disable-win32-registry --enable-threads=posix --enable-languages=c,c++,lto --with-win32-nlsapi=unicode --enable-tls --disable-bootstrap --enable-shared --disable-sjlj-exceptions --enable-gompThread model: posixgcc version 4.6.0 20101129 (experimental) (GCC)COLLECT_GCC_OPTIONS='-v' '-mtune=generic' '-march=pentiumpro' /usr/libexec/gcc/i686-pc-cygwin/4.6.0/cc1.exe -fpreprocessed ctype_.i -quiet -dumpbase ctype_.i -mtune=generic -march=pentiumpro -auxbase ctype_ -version -o /cygdrive/d/temp/cache/ccXLGxhF.sGNU C (GCC) version 4.6.0 20101129 (experimental) (i686-pc-cygwin)        compiled by GNU C version 4.6.0 20101129 (experimental), GMP version 5.0.0, MPFR version 2.4.2, MPC version 0.8.1GGC heuristics: --param ggc-min-expand=30 --param ggc-min-heapsize=4096GNU C (GCC) version 4.6.0 20101129 (experimental) (i686-pc-cygwin)        compiled by GNU C version 4.6.0 20101129 (experimental), GMP version 5.0.0, MPFR version 2.4.2, MPC version 0.8.1GGC heuristics: --param ggc-min-expand=30 --param ggc-min-heapsize=4096Compiler executable checksum: fc44f5abb6a0b2db9b440e397cdf946e../../../.././newlib/libc/ctype/ctype_.c:115:1: internal compiler error: Segmentation faultPlease submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.",RESOLVED          FIXED      
46362,Dave Korn,[4.6 regression] lto-plugin.c doesn't compile on IRIX 6.5,"Since the lto-plugin has been converted to the simple-object interface and isalways enabled on ELF targets, mainline doesn't bootstrap any longer on IRIX 6.5:/vol/gcc/src/hg/trunk/local/lto-plugin/lto-plugin.c: In function 'claim_file_handler':/vol/gcc/src/hg/trunk/local/lto-plugin/lto-plugin.c:829: error: expected ')' before 'PRIx64'cc1: warnings being treated as errors/vol/gcc/src/hg/trunk/local/lto-plugin/lto-plugin.c:830: error: too few arguments for formatmake[3]: *** [lto-plugin.lo] Error 1make[3]: Leaving directory `/var/gcc/regression/trunk/6.5-gcc/build/lto-plugin'The problem is this piece of code:     int t = asprintf (&objname, ""%s@0x%"" PRIx64, file->name,                        (int64_t) file->offset);IRIX 6.5 only defines PRIx64 in <inttypes.h> inside __c99.  Unless we compilethe lto-plugin in C99 mode (which isn't guaranteed to be available in the bootstrap compiler), this won't work.Besides, the plugin is useless on IRIX 6.5 anyway since neither gold nor gldwork (cf. PR target/43533).",RESOLVED          FIXED      
46397,Dave Korn,lto-plugin.c does not build on Solaris 10/SPARC,"lto-plugin.c does not build after 166233:make[3]: Entering directory `/var/opt/BUILD/gcc-trunk.2010-11-08/lto-plugin'/usr/bin/bash ./libtool --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I.-I/var/opt/SOURCES/gcc-trunk/lto-plugin -I/var/opt/SOURCES/gcc-trunk/lto-plugin/../include -DHAVE_CONFIG_H  -Wall-Werror -g -fkeep-inline-functions -c -o lto-plugin.lo/var/opt/SOURCES/gcc-trunk/lto-plugin/lto-plugin.clibtool: compile:  gcc -DHAVE_CONFIG_H -I.-I/var/opt/SOURCES/gcc-trunk/lto-plugin-I/var/opt/SOURCES/gcc-trunk/lto-plugin/../include -DHAVE_CONFIG_H -Wall-Werror -g -fkeep-inline-functions -c/var/opt/SOURCES/gcc-trunk/lto-plugin/lto-plugin.c  -fPIC -DPIC -o.libs/lto-plugin.oIn file included from /var/opt/SOURCES/gcc-trunk/lto-plugin/lto-plugin.c:48:/usr/include/stdbool.h:42:2: #error ""Use of <stdbool.h> is valid only in ac99 compilation environment.""/var/opt/SOURCES/gcc-trunk/lto-plugin/lto-plugin.c:141: error: syntax errorbefore ""debug""/var/opt/SOURCES/gcc-trunk/lto-plugin/lto-plugin.c:141: warning: typedefaults to `int' in declaration of `debug'/var/opt/SOURCES/gcc-trunk/lto-plugin/lto-plugin.c:141: warning: datadefinition has no type or storage class/var/opt/SOURCES/gcc-trunk/lto-plugin/lto-plugin.c:142: error: syntax errorbefore ""nop""/var/opt/SOURCES/gcc-trunk/lto-plugin/lto-plugin.c:142: warning: typedefaults to `int' in declaration of `nop'/var/opt/SOURCES/gcc-trunk/lto-plugin/lto-plugin.c:142: warning: datadefinition has no type or storage class/var/opt/SOURCES/gcc-trunk/lto-plugin/lto-plugin.c:151: error: syntax errorbefore ""gate""/var/opt/SOURCES/gcc-trunk/lto-plugin/lto-plugin.c: In function `check':/var/opt/SOURCES/gcc-trunk/lto-plugin/lto-plugin.c:153: error: `gate'undeclared (first use in this function)/var/opt/SOURCES/gcc-trunk/lto-plugin/lto-plugin.c:153: error: (Eachundeclared identifier is reported only once/var/opt/SOURCES/gcc-trunk/lto-plugin/lto-plugin.c:153: error: for eachfunction it appears in.)/var/opt/SOURCES/gcc-trunk/lto-plugin/lto-plugin.c:157: error: `level'undeclared (first use in this function)/var/opt/SOURCES/gcc-trunk/lto-plugin/lto-plugin.c:157: error: `text'undeclared (first use in this function)/var/opt/SOURCES/gcc-trunk/lto-plugin/lto-plugin.c: In function`parse_table_entry':/var/opt/SOURCES/gcc-trunk/lto-plugin/lto-plugin.c:208: error: `false'undeclared (first use in this function)make[3]: *** [lto-plugin.lo] Error 1make[3]: Leaving directory `/var/opt/BUILD/gcc-trunk.2010-11-08/lto-plugin'make[2]: *** [all-stage1-lto-plugin] Error 2make[2]: Leaving directory `/var/opt/BUILD/gcc-trunk.2010-11-08'make[1]: *** [stage1-bubble] Error 2make[1]: Leaving directory `/var/opt/BUILD/gcc-trunk.2010-11-08'make: *** [bootstrap] Error 2It appears to require a C99 compiler which /usr/sfw/bin/gcc (3.4.3) bundled with Solaris 10 does not do by default.",RESOLVED          FIXED      
46319,Dave Korn,LTO plugin test failures with --with-build-config=bootstrap-lto --with-plugin-ld=ld,"On Linux/x86-64, with binutils from CVS on 2010-11-05,revision 166360 gave extra failures:FAIL: gcc.dg/plugin/finish_unit-test-1.c -fplugin=./finish_unit_plugin.so (test for excess errors)FAIL: gcc.dg/plugin/finish_unit-test-1.c -fplugin=./finish_unit_plugin.so (test for excess errors)FAIL: gcc.dg/plugin/ggcplug-test-1.c -fplugin=./ggcplug.so (test for excess errors)FAIL: gcc.dg/plugin/ggcplug-test-1.c -fplugin=./ggcplug.so (test for excess errors)FAIL: gcc.dg/plugin/one_time-test-1.c -fplugin=./one_time_plugin.so (test for excess errors)FAIL: gcc.dg/plugin/one_time-test-1.c -fplugin=./one_time_plugin.so (test for excess errors)FAIL: gcc.dg/plugin/self-assign-test-1.c -fplugin=./selfassign.so (test for excess errors)FAIL: gcc.dg/plugin/self-assign-test-1.c -fplugin=./selfassign.so (test for excess errors)FAIL: gcc.dg/plugin/self-assign-test-1.c -fplugin=./selfassign.so  (test for warnings, line 15)FAIL: gcc.dg/plugin/self-assign-test-1.c -fplugin=./selfassign.so  (test for warnings, line 15)FAIL: gcc.dg/plugin/self-assign-test-1.c -fplugin=./selfassign.so  (test for warnings, line 19)FAIL: gcc.dg/plugin/self-assign-test-1.c -fplugin=./selfassign.so  (test for warnings, line 19)FAIL: gcc.dg/plugin/self-assign-test-1.c -fplugin=./selfassign.so  (test for warnings, line 20)FAIL: gcc.dg/plugin/self-assign-test-1.c -fplugin=./selfassign.so  (test for warnings, line 20)FAIL: gcc.dg/plugin/self-assign-test-1.c -fplugin=./selfassign.so  (test for warnings, line 21)FAIL: gcc.dg/plugin/self-assign-test-1.c -fplugin=./selfassign.so  (test for warnings, line 21)FAIL: gcc.dg/plugin/self-assign-test-1.c -fplugin=./selfassign.so  (test for warnings, line 22)FAIL: gcc.dg/plugin/self-assign-test-1.c -fplugin=./selfassign.so  (test for warnings, line 22)FAIL: gcc.dg/plugin/self-assign-test-2.c -fplugin=./selfassign.so (test for excess errors)FAIL: gcc.dg/plugin/self-assign-test-2.c -fplugin=./selfassign.so (test for excess errors)FAIL: gcc.dg/plugin/start_unit-test-1.c -fplugin=./start_unit_plugin.so (test for excess errors)FAIL: gcc.dg/plugin/start_unit-test-1.c -fplugin=./start_unit_plugin.so (test for excess errors)FAIL: g++.dg/plugin/attribute_plugin-test-1.C -fplugin=./attribute_plugin.so (test for excess errors)FAIL: g++.dg/plugin/attribute_plugin-test-1.C -fplugin=./attribute_plugin.so (test for excess errors)FAIL: g++.dg/plugin/attribute_plugin-test-1.C -fplugin=./attribute_plugin.so  (test for warnings, line )FAIL: g++.dg/plugin/attribute_plugin-test-1.C -fplugin=./attribute_plugin.so  (test for warnings, line )FAIL: g++.dg/plugin/attribute_plugin-test-1.C -fplugin=./attribute_plugin.so  (test for warnings, line 16)FAIL: g++.dg/plugin/attribute_plugin-test-1.C -fplugin=./attribute_plugin.so  (test for warnings, line 16)FAIL: g++.dg/plugin/attribute_plugin-test-1.C -fplugin=./attribute_plugin.so  (test for warnings, line 7)FAIL: g++.dg/plugin/attribute_plugin-test-1.C -fplugin=./attribute_plugin.so  (test for warnings, line 7)FAIL: g++.dg/plugin/attribute_plugin-test-1.C -fplugin=./attribute_plugin.so  (test for warnings, line 7)FAIL: g++.dg/plugin/attribute_plugin-test-1.C -fplugin=./attribute_plugin.so  (test for warnings, line 7)FAIL: g++.dg/plugin/dumb-plugin-test-1.C -fplugin=./dumb_plugin.so (test for excess errors)FAIL: g++.dg/plugin/dumb-plugin-test-1.C -fplugin=./dumb_plugin.so (test for excess errors)FAIL: g++.dg/plugin/dumb-plugin-test-1.C -fplugin=./dumb_plugin.so  (test for warnings, line 10)FAIL: g++.dg/plugin/dumb-plugin-test-1.C -fplugin=./dumb_plugin.so  (test for warnings, line 10)FAIL: g++.dg/plugin/dumb-plugin-test-1.C -fplugin=./dumb_plugin.so  (test for warnings, line 14)FAIL: g++.dg/plugin/dumb-plugin-test-1.C -fplugin=./dumb_plugin.so  (test for warnings, line 14)FAIL: g++.dg/plugin/dumb-plugin-test-1.C -fplugin=./dumb_plugin.so  (test for warnings, line 18)FAIL: g++.dg/plugin/dumb-plugin-test-1.C -fplugin=./dumb_plugin.so  (test for warnings, line 18)FAIL: g++.dg/plugin/dumb-plugin-test-1.C -fplugin=./dumb_plugin.so  (test for warnings, line 19)FAIL: g++.dg/plugin/dumb-plugin-test-1.C -fplugin=./dumb_plugin.so  (test for warnings, line 19)FAIL: g++.dg/plugin/dumb-plugin-test-1.C -fplugin=./dumb_plugin.so  (test for warnings, line 24)FAIL: g++.dg/plugin/dumb-plugin-test-1.C -fplugin=./dumb_plugin.so  (test for warnings, line 24)FAIL: g++.dg/plugin/dumb-plugin-test-1.C -fplugin=./dumb_plugin.so  (test for warnings, line 50)FAIL: g++.dg/plugin/dumb-plugin-test-1.C -fplugin=./dumb_plugin.so  (test for warnings, line 50)FAIL: g++.dg/plugin/dumb-plugin-test-1.C -fplugin=./dumb_plugin.so  (test for warnings, line 50)FAIL: g++.dg/plugin/dumb-plugin-test-1.C -fplugin=./dumb_plugin.so  (test for warnings, line 50)FAIL: g++.dg/plugin/dumb-plugin-test-1.C -fplugin=./dumb_plugin.so  (test for warnings, line 50)FAIL: g++.dg/plugin/dumb-plugin-test-1.C -fplugin=./dumb_plugin.so  (test for warnings, line 50)FAIL: g++.dg/plugin/header-plugin-test.C -fplugin=./header_plugin.so (test for excess errors)FAIL: g++.dg/plugin/header-plugin-test.C -fplugin=./header_plugin.so (test for excess errors)FAIL: g++.dg/plugin/pragma_plugin-test-1.C -fplugin=./pragma_plugin.so (test for excess errors)FAIL: g++.dg/plugin/pragma_plugin-test-1.C -fplugin=./pragma_plugin.so (test for excess errors)FAIL: g++.dg/plugin/pragma_plugin-test-1.C -fplugin=./pragma_plugin.so  (test for warnings, line )FAIL: g++.dg/plugin/pragma_plugin-test-1.C -fplugin=./pragma_plugin.so  (test for warnings, line )FAIL: g++.dg/plugin/pragma_plugin-test-1.C -fplugin=./pragma_plugin.so  (test for warnings, line 14)FAIL: g++.dg/plugin/pragma_plugin-test-1.C -fplugin=./pragma_plugin.so  (test for warnings, line 14)FAIL: g++.dg/plugin/pragma_plugin-test-1.C -fplugin=./pragma_plugin.so  (test for warnings, line 5)FAIL: g++.dg/plugin/pragma_plugin-test-1.C -fplugin=./pragma_plugin.so  (test for warnings, line 5)FAIL: g++.dg/plugin/pragma_plugin-test-1.C -fplugin=./pragma_plugin.so  (test for warnings, line 9)FAIL: g++.dg/plugin/pragma_plugin-test-1.C -fplugin=./pragma_plugin.so  (test for warnings, line 9)FAIL: g++.dg/plugin/self-assign-test-1.C -fplugin=./selfassign.so (test for excess errors)FAIL: g++.dg/plugin/self-assign-test-1.C -fplugin=./selfassign.so (test for excess errors)FAIL: g++.dg/plugin/self-assign-test-1.C -fplugin=./selfassign.so  (test for warnings, line 10)FAIL: g++.dg/plugin/self-assign-test-1.C -fplugin=./selfassign.so  (test for warnings, line 10)FAIL: g++.dg/plugin/self-assign-test-1.C -fplugin=./selfassign.so  (test for warnings, line 13)FAIL: g++.dg/plugin/self-assign-test-1.C -fplugin=./selfassign.so  (test for warnings, line 13)FAIL: g++.dg/plugin/self-assign-test-1.C -fplugin=./selfassign.so  (test for warnings, line 26)FAIL: g++.dg/plugin/self-assign-test-1.C -fplugin=./selfassign.so  (test for warnings, line 26)FAIL: g++.dg/plugin/self-assign-test-1.C -fplugin=./selfassign.so  (test for warnings, line 27)FAIL: g++.dg/plugin/self-assign-test-1.C -fplugin=./selfassign.so  (test for warnings, line 27)FAIL: g++.dg/plugin/self-assign-test-1.C -fplugin=./selfassign.so  (test for warnings, line 33)FAIL: g++.dg/plugin/self-assign-test-1.C -fplugin=./selfassign.so  (test for warnings, line 33)FAIL: g++.dg/plugin/self-assign-test-1.C -fplugin=./selfassign.so  (test for warnings, line 34)FAIL: g++.dg/plugin/self-assign-test-1.C -fplugin=./selfassign.so  (test for warnings, line 34)FAIL: g++.dg/plugin/self-assign-test-1.C -fplugin=./selfassign.so  (test for warnings, line 40)FAIL: g++.dg/plugin/self-assign-test-1.C -fplugin=./selfassign.so  (test for warnings, line 40)FAIL: g++.dg/plugin/self-assign-test-1.C -fplugin=./selfassign.so  (test for warnings, line 41)FAIL: g++.dg/plugin/self-assign-test-1.C -fplugin=./selfassign.so  (test for warnings, line 41)FAIL: g++.dg/plugin/self-assign-test-1.C -fplugin=./selfassign.so  (test for warnings, line 42)FAIL: g++.dg/plugin/self-assign-test-1.C -fplugin=./selfassign.so  (test for warnings, line 42)FAIL: g++.dg/plugin/self-assign-test-1.C -fplugin=./selfassign.so  (test for warnings, line 43)FAIL: g++.dg/plugin/self-assign-test-1.C -fplugin=./selfassign.so  (test for warnings, line 43)FAIL: g++.dg/plugin/self-assign-test-1.C -fplugin=./selfassign.so  (test for warnings, line 44)FAIL: g++.dg/plugin/self-assign-test-1.C -fplugin=./selfassign.so  (test for warnings, line 44)FAIL: g++.dg/plugin/self-assign-test-1.C -fplugin=./selfassign.so  (test for warnings, line 46)FAIL: g++.dg/plugin/self-assign-test-1.C -fplugin=./selfassign.so  (test for warnings, line 46)FAIL: g++.dg/plugin/self-assign-test-1.C -fplugin=./selfassign.so  (test for warnings, line 47)FAIL: g++.dg/plugin/self-assign-test-1.C -fplugin=./selfassign.so  (test for warnings, line 47)FAIL: g++.dg/plugin/self-assign-test-2.C -fplugin=./selfassign.so (test for excess errors)FAIL: g++.dg/plugin/self-assign-test-2.C -fplugin=./selfassign.so (test for excess errors)FAIL: g++.dg/plugin/self-assign-test-2.C -fplugin=./selfassign.so  (test for warnings, line 10)FAIL: g++.dg/plugin/self-assign-test-2.C -fplugin=./selfassign.so  (test for warnings, line 10)FAIL: g++.dg/plugin/self-assign-test-2.C -fplugin=./selfassign.so  (test for warnings, line 13)FAIL: g++.dg/plugin/self-assign-test-2.C -fplugin=./selfassign.so  (test for warnings, line 13)FAIL: g++.dg/plugin/self-assign-test-2.C -fplugin=./selfassign.so  (test for warnings, line 26)FAIL: g++.dg/plugin/self-assign-test-2.C -fplugin=./selfassign.so  (test for warnings, line 26)FAIL: g++.dg/plugin/self-assign-test-2.C -fplugin=./selfassign.so  (test for warnings, line 27)FAIL: g++.dg/plugin/self-assign-test-2.C -fplugin=./selfassign.so  (test for warnings, line 27)FAIL: g++.dg/plugin/self-assign-test-2.C -fplugin=./selfassign.so  (test for warnings, line 33)FAIL: g++.dg/plugin/self-assign-test-2.C -fplugin=./selfassign.so  (test for warnings, line 33)FAIL: g++.dg/plugin/self-assign-test-2.C -fplugin=./selfassign.so  (test for warnings, line 34)FAIL: g++.dg/plugin/self-assign-test-2.C -fplugin=./selfassign.so  (test for warnings, line 34)FAIL: g++.dg/plugin/self-assign-test-2.C -fplugin=./selfassign.so  (test for warnings, line 40)FAIL: g++.dg/plugin/self-assign-test-2.C -fplugin=./selfassign.so  (test for warnings, line 40)FAIL: g++.dg/plugin/self-assign-test-2.C -fplugin=./selfassign.so  (test for warnings, line 41)FAIL: g++.dg/plugin/self-assign-test-2.C -fplugin=./selfassign.so  (test for warnings, line 41)FAIL: g++.dg/plugin/self-assign-test-2.C -fplugin=./selfassign.so  (test for warnings, line 42)FAIL: g++.dg/plugin/self-assign-test-2.C -fplugin=./selfassign.so  (test for warnings, line 42)FAIL: g++.dg/plugin/self-assign-test-2.C -fplugin=./selfassign.so  (test for warnings, line 46)FAIL: g++.dg/plugin/self-assign-test-2.C -fplugin=./selfassign.so  (test for warnings, line 46)FAIL: g++.dg/plugin/self-assign-test-2.C -fplugin=./selfassign.so  (test for warnings, line 47)FAIL: g++.dg/plugin/self-assign-test-2.C -fplugin=./selfassign.so  (test for warnings, line 47)FAIL: g++.dg/plugin/self-assign-test-3.C -fplugin=./selfassign.so (test for excess errors)FAIL: g++.dg/plugin/self-assign-test-3.C -fplugin=./selfassign.so (test for excess errors)Executing on host: /export/build/gnu/gcc-lto/build-x86_64-linux/gcc/xgcc -B/export/build/gnu/gcc-lto/build-x86_64-linux/gcc/ /export/gnu/import/git/gcc/gcc/testsuite/gcc.dg/plugin/finish_unit-test-1.c  -fplugin=./finish_unit_plugin.so -O -S  -m32 -o finish_unit-test-1.s    (timeout = 300)cc1: error: Fail to initialize plugin ./finish_unit_plugin.so^Mcompiler exited with status 1GCC is configured with--enable-clocale=gnu --with-system-zlib --with-demangler-in-ld  --enable-shared --enable-threads=posix --enable-haifa  --prefix=/usr/gcc-4.6.0 --with-local-prefix=/usr/local --with-fpmath=sse --with-build-config=bootstrap-lto --with-plugin-ld=ld",RESOLVED          FIXED      
46291,Dave Korn,[4.6 Regression] Failed to bootstrap-lto,"On Linux/86-64, bootstrap-lto failed:http://gcc.gnu.org/ml/gcc-regression/2010-11/msg00024.htmlld.gold: fatal error: .././libiberty/libiberty.a: lseek: Bad file descriptorcollect2: ld returned 1 exit statusmake[6]: *** [build/genhooks] Error 1Revision 166230 is OK. It may be caused by revision 166233:http://gcc.gnu.org/ml/gcc-cvs/2010-11/msg00119.html",RESOLVED          FIXED      
46273,Dave Korn,[4.6 Regression] Failed to bootstrap,"On Linux/x86, revision 166200 gaveconfigure:10754: result: yes configure:10794: error: LTO plugin is not supported on this target....make[2]: *** [configure-lto-plugin] Error 1",RESOLVED          FIXED      
44139,Dave Korn,Exporting emutls symbols from a DLL broken on w32 targets,"Windows targets that use emutls add a ""."" character as a separator from the _emutls_{t,v} and the true symbol name.  However, exporting these symbol names from a DLL is problematic (i.e. a thread local data variable), because the ""."" in the symbol name tells the Windows loader to treat the symbol as a forwarding RVA to a second DLL (in this case, it will look for the symbol ""varname"" in __emutls_v.dll, the symbol exported is __emutls_v.varname).  Note that this is a runtime issue, not a compile/link issue.This can be worked around by#define TARGET_EMUTLS_VAR_PREFIX ""__emutls_v_""#define TARGET_EMUTLS_TMPL_PREFIX ""__emutls_t_""in the config header (e.g. config/i386/cygming.h or config/i386/mingw-w64.h, etc).However, this breaks backward compatibility with object files that were built with previous versions of the compiler (e.g libold.a would have a global name of __emutls_v.varname, while the patch would cause gcc to look for __emutls_v_varname, which would cause linker errors).",RESOLVED          FIXED      
42776,Dave Korn,LTO doesn't work on non-ELF platforms.,"As per title, and see also the discussion in bug 41529.There is no fundamental requirement for ELF to be the object format, as the object file sections are just used as dumb containers for arbitrary binary data.  The interface between lto-elf.c and the rest of lto1 needs only the ability to create sections and to place and retrieve binary data in/from them, so should be easy to implement for any object format that allows arbitrarily-named sections; that's everything except a.out I would suppose.I'm only planning to fix this for the PE-COFF (windows) platforms, but I'll try and make the code general enough so that it works on other COFF platforms and just needs enabling by the relevant target maintainer.",RESOLVED          FIXED      
42811,Dave Korn,[4.5 regression] java.lang.ExceptionInInitializerError in ecj1,"configuration./configure --prefix=/usr --disable-win32-registry --enable-threads=posix --enable-languages=c,c++,java --with-win32-nlsapi=unicode --enable-tls --disable-bootstrap --enable-shared --enable-interpreter --disable-sjlj-exceptions --enable-load-librarytestcasepublic class java{   public static void main(String arg[])   {     System.out.println(""Hello World!"");   } }debug sessionReading symbols from /usr/libexec/gcc/i686-pc-cygwin/4.5.0/ecj1.exe...done.(gdb) set args java.java -g1 -fbootclasspath=./:/usr/share/java/libgcj-4.5.0.jar -g1 -fsource=1.5 -ftarget=1.5 -fzip-dependency java.zip -fzip-target java.jar(gdb) directory /tmp/gcc/t/t/t/tWarning: /tmp/gcc/t/t/t/t: No such file or directory.Source directories searched: /tmp/gcc/t/t/t/t:$cdir:$cwd(gdb) startTemporary breakpoint 1 at 0x40112e: file /cygdrive/d/Temp/cache/ccnRjjtS.i, line 11.Starting program: /usr/libexec/gcc/i686-pc-cygwin/4.5.0/ecj1.exe java.java -g1 -fbootclasspath=./:/usr/share/java/libgcj-4.5.0.jar -g1 -fsource=1.5 -ftarget=1.5 -fzip-dependency java.zip -fzip-target java.jar[New Thread 2040.0x1020]warning: section .gnu_debuglink not found in /usr/bin/cygwin1.dbg[New Thread 2040.0x1338]Temporary breakpoint 1, main (argc=<value optimized out>,    argv=<value optimized out>) at /cygdrive/d/Temp/cache/ccnRjjtS.i:1111      /cygdrive/d/Temp/cache/ccnRjjtS.i: No such file or directory.        in /cygdrive/d/Temp/cache/ccnRjjtS.i(gdb) disp /i $eip1: x/i $eip=> 0x40112e <main+14>:  mov    0xc(%ebp),%eax(gdb) b Calendar.java:500Breakpoint 2 at 0x6c1b0ed6: file ../../../.././libjava/classpath/java/util/Calendar.java, line 500.(gdb) cContinuing.[New Thread 2040.0x119c][New Thread 2040.0x1704]Breakpoint 2, java.util.Calendar.<clinit>()void ()    at ../../../.././libjava/classpath/java/util/Calendar.java:500500         properties = new Properties();1: x/i $eip=> 0x6c1b0ed6 <java.util.Calendar.<clinit>()void+6>:    movl   $0x6c5d0fe0,(%esp)(gdb) n503             properties.load(Calendar.class.getResourceAsStream(""weeks.properties""));1: x/i $eip=> 0x6c1b0eec <java.util.Calendar.<clinit>()void+28>:   mov    0x6c5d5350,%eax(gdb) n500         properties = new Properties();1: x/i $eip=> 0x6c1b0ef1 <java.util.Calendar.<clinit>()void+33>:   mov    %ebx,0x6cabc75c(gdb) n503             properties.load(Calendar.class.getResourceAsStream(""weeks.properties""));1: x/i $eip=> 0x6c1b0ef7 <java.util.Calendar.<clinit>()void+39>:    movl   $0x6c5c84e0,(%esp)(gdb) nException in thread ""main"" java.lang.ExceptionInInitializerError   at java.lang.Class.initializeClass(Unknown Source)   at java.util.Calendar.getInstance(Unknown Source)   at java.util.zip.ZipEntry.getDOSTime(Unknown Source)   at java.util.zip.ZipOutputStream.putNextEntry(Unknown Source)   at org.eclipse.jdt.internal.compiler.batch.GCCMain.getZipOutput(GCCMain.java:110)   at org.eclipse.jdt.internal.compiler.batch.GCCMain.configure(GCCMain.java:459)   at org.eclipse.jdt.internal.compiler.batch.Main.compile(Main.java:1628)   at org.eclipse.jdt.internal.compiler.batch.GCCMain.compile(GCCMain.java:481)   at org.eclipse.jdt.internal.compiler.batch.GCCMain.main(GCCMain.java:498)Caused by: java.lang.NullPointerException   at java.io.InputStreamReader.read(Unknown Source)   at java.io.BufferedReader.fill(Unknown Source)   at java.io.BufferedReader.readLine(Unknown Source)   at java.util.Properties.load(Unknown Source)   at java.util.Properties.load(Unknown Source)   at java.util.Calendar.<clinit>(Unknown Source)   at java.lang.Class.initializeClass(Unknown Source)   ...8 moreProgram exited with code 01.(gdb)it seems that libgcj-bc is disabled except linux (libjava/configure.host)but SUPPRESS_LIBGCJ_BC_TRUE is enabled because it is default. and problematic switches ""-fzip-dependency java.zip -fzip-target java.jar"" try to load weeks.properties resource. then it invokes url classloader and find resource in libgcj-.jar so results exception.i tried to compile with --disable-libgcj-bc, but it has undefined symbol with namespace org.xml (showing that there is no choice but to use libgcj-bc)",RESOLVED          FIXED      
43888,Dave Korn,[4.5/4.6 Regression] FAIL: gcc.dg/alias-7.c execution test,"Here's what the alias-7.c test looks like, after preprocessing:> int foo __asm__ (""_"" ""foo"") __attribute__((nocommon));> extern __typeof (foo) bar __attribute__ ((weak, alias (""foo"")));> > int> main (void)> {>   if (&foo != &bar || foo || bar)>     abort ();>   return bar;> }  But here's how it compiles down using 4.5.0 on i686-pc-cygwin:> alias-7.c.003t.original:> ;; Function main (null)> ;; enabled by -tree-original> > > {>   if (1)>     {>       abort ();>     }>   return bar;> }  I've established that fold_comparison is returning (integer_cst 1) for the""&foo != &bar"" test.  In this clause,>       /* For non-equal bases we can simplify if they are addresses> 	 of local binding decls or constants.  */>       else if (indirect_base0 && indirect_base1> 	       /* We know that !operand_equal_p (base0, base1, 0)> 		  because the if condition was false.  But make> 		  sure two decls are not the same.  */> 	       && base0 != base1> 	       && TREE_CODE (arg0) == ADDR_EXPR> 	       && TREE_CODE (arg1) == ADDR_EXPR> 	       && (((TREE_CODE (base0) == VAR_DECL> 		     || TREE_CODE (base0) == PARM_DECL)> 		    && (targetm.binds_local_p (base0)> 			|| CONSTANT_CLASS_P (base1)))> 		   || CONSTANT_CLASS_P (base0))> 	       && (((TREE_CODE (base1) == VAR_DECL> 		     || TREE_CODE (base1) == PARM_DECL)> 		    && (targetm.binds_local_p (base1)> 			|| CONSTANT_CLASS_P (base0)))> 		   || CONSTANT_CLASS_P (base1)))> 	{> 	  if (code == EQ_EXPR)> 	    return omit_two_operands_loc (loc, type, boolean_false_node,> 				      arg0, arg1);> 	  else if (code == NE_EXPR)> 	    return omit_two_operands_loc (loc, type, boolean_true_node,> 				      arg0, arg1);> 	}it seems that i386_pe_binds_local_p is incorrectly returning true even for theweak symbol.  I have a patch.",RESOLVED          FIXED      
42609,Dave Korn,[4.5 regression] undesired operation when working with mno-cygwin,"hi i'm using gcc in i686-pc-cygwin and building djvulibre library for target i686-pc-mingw32 version of gcc in two platform is from latest git reprository.and i'm using following configuration for djvulibre./configure --prefix=/usr/i686-pc-mingw32 CC='gcc -mno-cygwin' CXX='g++ -mno-cygwin -I/usr/include/w32api' --target=i686-pc-mingw32 --host=i686-pc-mingw32at link step, there is problem for new, delete operator function wrapper(defined in cygwin.h #define CXX_WRAP_SPEC_LIST)below are trial and error.------------i686-pc-mingw32-g++ -shared  .libs/DjVuGlobal.o .libs/DjVuGlobalMemory.o .libs/GOS.o .libs/GException.o .libs/GContainer.o .libs/GString.o .libs/GThreads.o .libs/GRect.o .libs/atomic.o .libs/GSmartPointer.o .libs/MMX.o .libs/Arrays.o .libs/GBitmap.o .libs/GPixmap.o .libs/GScaler.o .libs/DjVuPalette.o .libs/ByteStream.o .libs/IFFByteStream.o .libs/BSByteStream.o .libs/BSEncodeByteStream.o .libs/ZPCodec.o .libs/JB2Image.o .libs/JB2EncodeCodec.o .libs/IW44Image.o .libs/IW44EncodeCodec.o .libs/MMRDecoder.o .libs/JPEGDecoder.o .libs/DataPool.o .libs/GURL.o .libs/DjVuFileCache.o .libs/DjVuPort.o .libs/GMapAreas.o .libs/DjVuAnno.o .libs/GIFFManager.o .libs/DjVuText.o .libs/DjVuInfo.o .libs/DjVuFile.o .libs/DjVuImage.o .libs/DjVuDocument.o .libs/DjVmDir.o .libs/DjVmDoc.o .libs/DjVmDir0.o .libs/DjVmNav.o .libs/DjVuNavDir.o .libs/DjVuErrorList.o .libs/DjVuDocEditor.o .libs/DjVuToPS.o .libs/DjVuDumpHelper.o .libs/DjVuMessageLite.o .libs/DjVuMessage.o .libs/GUnicode.o .libs/UnicodeByteStream.o .libs/XMLParser.o .libs/XMLTags.o .libs/miniexp.o .libs/ddjvuapi.o .libs/debug.o  /usr/i686-pc-mingw32/lib/libjpeg.dll.a  -mtune=i686 -mthreads -Wl,--export-all-symbols -o .libs/libdjvulibre-21.dll -Wl,--image-base=0x10000000 -Wl,--out-implib,.libs/libdjvulibre.dll.aCreating library file: .libs/libdjvulibre.dll.a---------------------------------g++ -mno-cygwin -shared  .libs/DjVuGlobal.o .libs/DjVuGlobalMemory.o .libs/GOS.o .libs/GException.o .libs/GContainer.o .libs/GString.o .libs/GThreads.o .libs/GRect.o .libs/atomic.o .libs/GSmartPointer.o .libs/MMX.o .libs/Arrays.o .libs/GBitmap.o .libs/GPixmap.o .libs/GScaler.o .libs/DjVuPalette.o .libs/ByteStream.o .libs/IFFByteStream.o .libs/BSByteStream.o .libs/BSEncodeByteStream.o .libs/ZPCodec.o .libs/JB2Image.o .libs/JB2EncodeCodec.o .libs/IW44Image.o .libs/IW44EncodeCodec.o .libs/MMRDecoder.o .libs/JPEGDecoder.o .libs/DataPool.o .libs/GURL.o .libs/DjVuFileCache.o .libs/DjVuPort.o .libs/GMapAreas.o .libs/DjVuAnno.o .libs/GIFFManager.o .libs/DjVuText.o .libs/DjVuInfo.o .libs/DjVuFile.o .libs/DjVuImage.o .libs/DjVuDocument.o .libs/DjVmDir.o .libs/DjVmDoc.o .libs/DjVmDir0.o .libs/DjVmNav.o .libs/DjVuNavDir.o .libs/DjVuErrorList.o .libs/DjVuDocEditor.o .libs/DjVuToPS.o .libs/DjVuDumpHelper.o .libs/DjVuMessageLite.o .libs/DjVuMessage.o .libs/GUnicode.o .libs/UnicodeByteStream.o .libs/XMLParser.o .libs/XMLTags.o .libs/miniexp.o .libs/ddjvuapi.o .libs/debug.o  /usr/i686-pc-mingw32/lib/libjpeg.dll.a  -mtune=i686 -mthreads -Wl,--export-all-symbols -o .libs/libdjvulibre-21.dll -Wl,--image-base=0x10000000 -Wl,--out-implib,.libs/libdjvulibre.dll.aKNS_4GURLE[DJVU::lt_XMLTags::create(DJVU::GURL const&)]+0x17): undefined reference to `___wrap__Znwj'.libs/DjVuMessageLite.o:DjVuMessageLite.cpp:(.text$_ZN4DJVU10lt_XMLTags6createERKNS_4GURLE[DJVU::lt_XMLTags::create(DJVU::GURL const&)]+0x56): undefined reference to `___wrap__ZdlPv'.libs/DjVuMessageLite.o:DjVuMessageLite.cpp:(.text$_ZN4DJVU10lt_XMLTags6createERKNS_2GPINS_10ByteStreamEEE[DJVU::lt_XMLTags::create(DJVU::GP<DJVU::ByteStream> const&)]+0x17): undefined reference to `___wrap__Znwj'.libs/DjVuMessageLite.o:DjVuMessageLite.cpp:(.text$_ZN4DJVU10lt_XMLTags6createERKNS_2GPINS_10ByteStreamEEE[DJVU::lt_XMLTags::create(DJVU::GP<DJVU::ByteStream> const&)]+0x56): undefined reference to `___wrap__ZdlPv'.libs/DjVuMessageLite.o:DjVuMessageLite.cpp:(.text$_ZN4DJVU10lt_XMLTags6createERNS_13XMLByteStreamE[DJVU::lt_XMLTags::create(DJVU::XMLByteStream&)]+0x17): undefined reference to `___wrap__Znwj'.libs/DjVuMessageLite.o:DjVuMessageLite.cpp:(.text$_ZN4DJVU10lt_XMLTags6createERNS_13XMLByteStreamE[DJVU::lt_XMLTags::create(DJVU::XMLByteStream&)]+0x56): undefined reference to `___wrap__ZdlPv'.libs/DjVuMessageLite.o:DjVuMessageLite.cpp:(.text$_ZN4DJVU10lt_XMLTags6addtagENS_2GPIS0_EE[DJVU::lt_XMLTags::addtag(DJVU::GP<DJVU::lt_XMLTags>)]+0x32): undefined reference to `___wrap__Znwj'.libs/DjVuMessageLite.o:DjVuMessageLite.cpp:(.text$_ZN4DJVU10lt_XMLTags6addtagENS_2GPIS0_EE[DJVU::lt_XMLTags::addtag(DJVU::GP<DJVU::lt_XMLTags>)]+0x107): undefined reference to `___wrap__Znwj'.libs/DjVuMessageLite.o:DjVuMessageLite.cpp:(.text$_ZN4DJVU10lt_XMLTags6addtagENS_2GPIS0_EE[DJVU::lt_XMLTags::addtag(DJVU::GP<DJVU::lt_XMLTags>)]+0x158): undefined reference to `___wrap__Znwj'.libs/DjVuMessage.o:DjVuMessage.cpp:(.text+0x33e): undefined reference to `___wrap__Znwj'.libs/DjVuMessage.o:DjVuMessage.cpp:(.text+0x579): undefined reference to `___wrap__Znwj'.libs/DjVuMessage.o:DjVuMessage.cpp:(.text+0x71c): more undefined references to`___wrap__Znwj' follow.libs/DjVuMessage.o:DjVuMessage.cpp:(.text+0x28f5): undefined reference to `___wrap__ZdlPv'.libs/DjVuMessage.o:DjVuMessage.cpp:(.text+0x5b): undefined reference to `___wrap__ZdlPv'.libs/GUnicode.o:GUnicode.cpp:(.text+0x2fa): undefined reference to `___wrap__Znwj'.libs/GUnicode.o:GUnicode.cpp:(.text+0x358): undefined reference to `___wrap__Znwj'.libs/GUnicode.o:GUnicode.cpp:(.text+0x385): undefined reference to `___wrap__ZdlPv'.libs/GUnicode.o:GUnicode.cpp:(.text+0x1e7): undefined reference to `___wrap__ZdlPv'.libs/UnicodeByteStream.o:UnicodeByteStream.cpp:(.text+0x14dd): undefined reference to `___wrap__Znwj'.libs/UnicodeByteStream.o:UnicodeByteStream.cpp:(.text+0x1534): undefined reference to `___wrap__ZdlPv'.libs/UnicodeByteStream.o:UnicodeByteStream.cpp:(.text+0x157): undefined reference to `___wrap__ZdlPv'.libs/UnicodeByteStream.o:UnicodeByteStream.cpp:(.text+0x1c7): undefined reference to `___wrap__ZdlPv'.libs/XMLParser.o:XMLParser.cpp:(.text+0x2e8): undefined reference to `___wrap__Znwj'.libs/XMLParser.o:XMLParser.cpp:(.text+0xd66): undefined reference to `___wrap__Znwj'.libs/XMLParser.o:XMLParser.cpp:(.text+0x1607): undefined reference to `___wrap__Znwj'.libs/XMLParser.o:XMLParser.cpp:(.text+0x1635): undefined reference to `___wrap__ZdlPv'.libs/XMLParser.o:XMLParser.cpp:(.text+0x171f): undefined reference to `___wrap__Znwj'.libs/XMLParser.o:XMLParser.cpp:(.text+0x17ca): undefined reference to `___wrap__Znwj'.libs/XMLParser.o:XMLParser.cpp:(.text+0x1c42): undefined reference to `___wrap__Znwj'.libs/XMLParser.o:XMLParser.cpp:(.text+0x1d33): undefined reference to `___wrap__Znwj'.libs/XMLParser.o:XMLParser.cpp:(.text+0x1db3): undefined reference to `___wrap__Znwj'.libs/XMLParser.o:XMLParser.cpp:(.text+0x1eca): more undefined references to `___wrap__Znwj' follow.libs/XMLParser.o:XMLParser.cpp:(.text+0x39e3): undefined reference to `___wrap__ZdlPv'.libs/XMLParser.o:XMLParser.cpp:(.text+0x3a7e): undefined reference to `___wrap__ZdlPv'.libs/XMLParser.o:XMLParser.cpp:(.text+0x4168): undefined reference to `___wrap__Znwj'.libs/XMLParser.o:XMLParser.cpp:(.text+0x41de): undefined reference to `___wrap__Znwj'.libs/XMLParser.o:XMLParser.cpp:(.text+0x5f3a): undefined reference to `___wrap__Znwj'.libs/XMLParser.o:XMLParser.cpp:(.text+0x5f9d): undefined reference to `___wrap__Znwj'.libs/XMLParser.o:XMLParser.cpp:(.text+0x6000): undefined reference to `___wrap__Znwj'.libs/XMLParser.o:XMLParser.cpp:(.text+0x6063): more undefined references to `___wrap__Znwj' follow.libs/XMLParser.o:XMLParser.cpp:(.text+0x7b): undefined reference to `___wrap__ZdlPv'.libs/XMLParser.o:XMLParser.cpp:(.text+0x450): undefined reference to `___wrap__ZdlPv'.libs/XMLTags.o:XMLTags.cpp:(.text+0x6b8): undefined reference to `___wrap__Znwj'.libs/XMLTags.o:XMLTags.cpp:(.text+0xec8): undefined reference to `___wrap__Znwj'.libs/XMLTags.o:XMLTags.cpp:(.text+0x14a4): undefined reference to `___wrap__Znwj'.libs/XMLTags.o:XMLTags.cpp:(.text+0x1a5e): undefined reference to `___wrap__Znwj'.libs/XMLTags.o:XMLTags.cpp:(.text+0x1b1e): undefined reference to `___wrap__Znwj'.libs/XMLTags.o:XMLTags.cpp:(.text+0x223d): undefined reference to `___wrap__ZdlPv'.libs/XMLTags.o:XMLTags.cpp:(.text+0x27a8): undefined reference to `___wrap__Znwj'.libs/XMLTags.o:XMLTags.cpp:(.text+0xdb): undefined reference to `___wrap__ZdlPv'.libs/miniexp.o:miniexp.cpp:(.text+0x34b): undefined reference to `___wrap__ZdaPv'.libs/miniexp.o:miniexp.cpp:(.text+0x390): undefined reference to `___wrap__Znaj'.libs/miniexp.o:miniexp.cpp:(.text+0x433): undefined reference to `___wrap__Znaj'.libs/miniexp.o:miniexp.cpp:(.text+0x463): undefined reference to `___wrap__ZdaPv'.libs/miniexp.o:miniexp.cpp:(.text+0x56b): undefined reference to `___wrap__ZdaPv'.libs/miniexp.o:miniexp.cpp:(.text+0xdd5): undefined reference to `___wrap__ZdaPv'.libs/miniexp.o:miniexp.cpp:(.text+0x1043): undefined reference to `___wrap__Znaj'.libs/miniexp.o:miniexp.cpp:(.text+0x111a): undefined reference to `___wrap__Znwj'.libs/miniexp.o:miniexp.cpp:(.text+0x1140): undefined reference to `___wrap__Znaj'.libs/miniexp.o:miniexp.cpp:(.text+0x118a): undefined reference to `___wrap__Znaj'.libs/miniexp.o:miniexp.cpp:(.text+0x11f3): undefined reference to `___wrap__ZdaPv'.libs/miniexp.o:miniexp.cpp:(.text+0x1213): undefined reference to `___wrap__Znwj'.libs/miniexp.o:miniexp.cpp:(.text+0x1239): undefined reference to `___wrap__Znaj'.libs/miniexp.o:miniexp.cpp:(.text+0x12bb): undefined reference to `___wrap__ZdaPv'.libs/miniexp.o:miniexp.cpp:(.text+0x12e6): undefined reference to `___wrap__Znaj'.libs/miniexp.o:miniexp.cpp:(.text+0x136b): undefined reference to `___wrap__ZdaPv'.libs/miniexp.o:miniexp.cpp:(.text+0x13a7): undefined reference to `___wrap__ZdlPv'.libs/miniexp.o:miniexp.cpp:(.text+0x1ceb): undefined reference to `___wrap__Znwj'.libs/miniexp.o:miniexp.cpp:(.text+0x1e89): undefined reference to `___wrap__Znwj'.libs/miniexp.o:miniexp.cpp:(.text+0x22bf): undefined reference to `___wrap__Znwj'.libs/miniexp.o:miniexp.cpp:(.text+0x255d): undefined reference to `___wrap__Znwj'.libs/miniexp.o:miniexp.cpp:(.text+0x288a): undefined reference to `___wrap__Znwj'.libs/miniexp.o:miniexp.cpp:(.text+0x2b07): more undefined references to `___wrap__Znwj' follow.libs/miniexp.o:miniexp.cpp:(.text+0x2b22): undefined reference to `___wrap__Znaj'.libs/miniexp.o:miniexp.cpp:(.text+0x2b54): undefined reference to `___wrap__ZdlPv'.libs/miniexp.o:miniexp.cpp:(.text+0x2edc): undefined reference to `___wrap__Znaj'.libs/miniexp.o:miniexp.cpp:(.text+0x2f04): undefined reference to `___wrap__ZdaPv'.libs/miniexp.o:miniexp.cpp:(.text+0x3054): undefined reference to `___wrap__Znaj'.libs/miniexp.o:miniexp.cpp:(.text+0x307c): undefined reference to `___wrap__ZdaPv'.libs/miniexp.o:miniexp.cpp:(.text+0x32a0): undefined reference to `___wrap__Znaj'.libs/miniexp.o:miniexp.cpp:(.text+0x32c7): undefined reference to `___wrap__ZdaPv'.libs/miniexp.o:miniexp.cpp:(.text+0x32fc): undefined reference to `___wrap__ZdaPv'.libs/miniexp.o:miniexp.cpp:(.text+0x332b): undefined reference to `___wrap__ZdaPv'.libs/miniexp.o:miniexp.cpp:(.text+0x3589): undefined reference to `___wrap__Znaj'.libs/miniexp.o:miniexp.cpp:(.text+0x35b5): undefined reference to `___wrap__ZdaPv'.libs/miniexp.o:miniexp.cpp:(.text+0x3602): undefined reference to `___wrap__ZdaPv'.libs/miniexp.o:miniexp.cpp:(.text+0x365c): undefined reference to `___wrap__Znaj'.libs/miniexp.o:miniexp.cpp:(.text+0x367e): undefined reference to `___wrap__Znwj'.libs/miniexp.o:miniexp.cpp:(.text+0x3700): undefined reference to `___wrap__Znaj'.libs/miniexp.o:miniexp.cpp:(.text+0x3740): undefined reference to `___wrap__Znwj'.libs/miniexp.o:miniexp.cpp:(.text+0x3768): undefined reference to `___wrap__Znaj'.libs/miniexp.o:miniexp.cpp:(.text+0x3a1a): undefined reference to `___wrap__ZdaPv'.libs/miniexp.o:miniexp.cpp:(.text+0x3a78): undefined reference to `___wrap__ZdaPv'.libs/miniexp.o:miniexp.cpp:(.text+0x3bec): undefined reference to `___wrap__ZdlPv'.libs/miniexp.o:miniexp.cpp:(.text+0x3c1c): undefined reference to `___wrap__ZdlPv'.libs/miniexp.o:miniexp.cpp:(.text+0x3c67): undefined reference to `___wrap__ZdaPv'.libs/miniexp.o:miniexp.cpp:(.text+0x3c6f): undefined reference to `___wrap__ZdlPv'.libs/miniexp.o:miniexp.cpp:(.text+0x3c93): undefined reference to `___wrap__ZdaPv'.libs/miniexp.o:miniexp.cpp:(.text+0x3c9b): undefined reference to `___wrap__ZdlPv'.libs/miniexp.o:miniexp.cpp:(.text+0x301): undefined reference to `___wrap__ZdlPv'.libs/miniexp.o:miniexp.cpp:(.text+0x32b): undefined reference to `___wrap__ZdlPv'.libs/miniexp.o:miniexp.cpp:(.text+0x580): undefined reference to `___wrap__ZdlPv'.libs/miniexp.o:miniexp.cpp:(.text+0x75a): undefined reference to `___wrap__ZdlPv'.libs/miniexp.o:miniexp.cpp:(.text+0x22ff): more undefined references to `___wrap__ZdlPv' follow.libs/ddjvuapi.o:ddjvuapi.cpp:(.text+0x699): undefined reference to `___wrap__Znwj'.libs/ddjvuapi.o:ddjvuapi.cpp:(.text+0x10be): undefined reference to `___wrap__Znwj'.libs/ddjvuapi.o:ddjvuapi.cpp:(.text+0x1118): undefined reference to `___wrap__Znwj'.libs/ddjvuapi.o:ddjvuapi.cpp:(.text+0x1501): undefined reference to `___wrap__Znwj'.libs/ddjvuapi.o:ddjvuapi.cpp:(.text+0x1850): undefined reference to `___wrap__Znwj'.libs/ddjvuapi.o:ddjvuapi.cpp:(.text+0x1d36): more undefined references to `___wrap__Znwj' follow.libs/ddjvuapi.o:ddjvuapi.cpp:(.text+0x28ca): undefined reference to `___wrap__ZdlPv'.libs/ddjvuapi.o:ddjvuapi.cpp:(.text+0x2936): undefined reference to `___wrap__Znwj'.libs/ddjvuapi.o:ddjvuapi.cpp:(.text+0x3b73): undefined reference to `___wrap__Znwj'.libs/ddjvuapi.o:ddjvuapi.cpp:(.text+0x3c25): undefined reference to `___wrap__Znwj'.libs/ddjvuapi.o:ddjvuapi.cpp:(.text+0x3d06): undefined reference to `___wrap__ZdlPv'.libs/ddjvuapi.o:ddjvuapi.cpp:(.text+0x3d55): undefined reference to `___wrap__ZdlPv'.libs/ddjvuapi.o:ddjvuapi.cpp:(.text+0x4883): undefined reference to `___wrap__Znwj'.libs/ddjvuapi.o:ddjvuapi.cpp:(.text+0x5774): undefined reference to `___wrap__Znwj'.libs/ddjvuapi.o:ddjvuapi.cpp:(.text+0x8451): undefined reference to `___wrap__Znwj'.libs/ddjvuapi.o:ddjvuapi.cpp:(.text+0x84a4): undefined reference to `___wrap__ZdlPv'.libs/ddjvuapi.o:ddjvuapi.cpp:(.text+0x86e4): undefined reference to `___wrap__Znwj'.libs/ddjvuapi.o:ddjvuapi.cpp:(.text+0x8735): undefined reference to `___wrap__ZdlPv'.libs/ddjvuapi.o:ddjvuapi.cpp:(.text+0x87cf): undefined reference to `___wrap__ZdlPv'.libs/ddjvuapi.o:ddjvuapi.cpp:(.text+0x889f): undefined reference to `___wrap__ZdlPv'.libs/ddjvuapi.o:ddjvuapi.cpp:(.text+0x92d5): undefined reference to `___wrap__Znwj'.libs/ddjvuapi.o:ddjvuapi.cpp:(.text+0x936a): undefined reference to `___wrap__Znwj'.libs/ddjvuapi.o:ddjvuapi.cpp:(.text+0x94ef): undefined reference to `___wrap__ZdlPv'.libs/ddjvuapi.o:ddjvuapi.cpp:(.text+0x98dd): undefined reference to `___wrap__Znwj'.libs/ddjvuapi.o:ddjvuapi.cpp:(.text+0x9b5c): undefined reference to `___wrap__Znwj'.libs/ddjvuapi.o:ddjvuapi.cpp:(.text+0xccfb): undefined reference to `___wrap__Znwj'.libs/ddjvuapi.o:ddjvuapi.cpp:(.text+0xd21f): undefined reference to `___wrap__ZdlPv'.libs/ddjvuapi.o:ddjvuapi.cpp:(.text+0xec51): undefined reference to `___wrap__Znwj'.libs/ddjvuapi.o:ddjvuapi.cpp:(.text+0xeeaf): undefined reference to `___wrap__Znwj'.libs/ddjvuapi.o:ddjvuapi.cpp:(.text+0xefa9): undefined reference to `___wrap__Znwj'.libs/ddjvuapi.o:ddjvuapi.cpp:(.text+0xf0cc): undefined reference to `___wrap__Znwj'.libs/ddjvuapi.o:ddjvuapi.cpp:(.text+0xf1fb): undefined reference to `___wrap__Znwj'.libs/ddjvuapi.o:ddjvuapi.cpp:(.text+0xf29d): more undefined references to `___wrap__Znwj' follow.libs/ddjvuapi.o:ddjvuapi.cpp:(.text+0x851f): undefined reference to `___wrap__ZdlPv'.libs/ddjvuapi.o:ddjvuapi.cpp:(.text+0x89f8): undefined reference to `___wrap__ZdlPv'.libs/ddjvuapi.o:ddjvuapi.cpp:(.text$_ZN4DJVU15ddjvu_message_pD0Ev[DJVU::ddjvu_message_p::~ddjvu_message_p()]+0x37): undefined reference to `___wrap__ZdlPv'.libs/ddjvuapi.o:ddjvuapi.cpp:(.text$_ZN4DJVU17ddjvu_thumbnail_pD0Ev[DJVU::ddjvu_thumbnail_p::~ddjvu_thumbnail_p()]+0x37): undefined reference to `___wrap__ZdlPv'.libs/ddjvuapi.o:ddjvuapi.cpp:(.text$_ZN4DJVU15ddjvu_context_sD0Ev[DJVU::ddjvu_context_s::~ddjvu_context_s()]+0x4d): undefined reference to `___wrap__ZdlPv'.libs/ddjvuapi.o:ddjvuapi.cpp:(.text$_ZN4DJVU8GMapImplINS_11GUTF8StringEiE13get_or_createERKS1_[DJVU::GMapImpl<DJVU::GUTF8String, int>::get_or_create(DJVU::GUTF8String const&)]+0x68): undefined reference to `___wrap__Znwj'collect2: ld returned 1 exit status------------------------------------------------------------------------djvulibre is using its own new, delete operator function.when we use -mno-cygwin flag for gcc with host i686-pc-cygwin,stdcxx wrappers for cygwin must be disabled because of libcygwin.a is not linked with it.but, when building gcc for target i686-pc-cygwin , USE_CYGWIN_LIBSTDCXX_WRAPPERS and -mno-use-libstdc-wrappers seems to be enabled.then, CXX_WRAP_SPEC_LIST will be enabled although it must be disabled when added flag -mno-cygwin. causing undefined symbol problem which i had.but when linking with i686-pc-mingw32-g++, it has no undefined symbol problem. because there is no --wrap argument.please consider to fix this problem",RESOLVED          FIXED      
30445,Dave Korn,Fix for FIXME in gcc-4_2-branch/libobjc/Makefile.in,"This info is a fix for a ""FIXME"" in gcc-4_2-branch/libobjc/Makefile.inTo create libobjc.dll a fix to /cygdrive/C/makecygwin/gcc-4_2-branch/libobjc/Makefile, is needed. This makefile is created from gcc-4_2-branch/libobjc/Makefile.inThere is no author name or e-mail given but these words are enclosed in the file:## FIXME -- The following part does not fit in the libtool context. # Libtool is supposed to [going to] be able to create a win 32 DLL # without extra code but since I don't have a win machine to test # if it already works, I leave the old code here.##Origonal:#libobjc_s.a: libobjc.la	mv libobjc.a libobjc_s.a# Create a relocatable DLLlibobjc.dll: libobjc_s.a libobjc_entry.o	$(CC) -mdll -Wl,--base-file -Wl,libobjc.base \		-o libobjc.dll libobjc_s.a libobjc_entry.o -lkernel32	$(DLLTOOL) --dllname libobjc.dll --def $(srcdir)/libobjc.def \		--base-file libobjc.base --output-exp libobjc.exp	$(GCC_FOR_TARGET) -mdll -Wl,--base-file libobjc.base libobjc.exp \		-o libobjc.dll libobjc_s.a libobjc_entry.o -lkernel32	$(DLLTOOL) --dllname libobjc.dll --def $(srcdir)/libobjc.def \		--base-file libobjc.base --output-exp libobjc.exp	$(GCC_FOR_TARGET) libobjc.exp -mdll \		-o libobjc.dll libobjc_s.a libobjc_entry.o -lkernel32	$(DLLTOOL) --dllname libobjc.dll --def $(srcdir)/libobjc.def \		--output-lib libobjc.a###New: (change ""mv"" to ""cp ./libs"" and add 3 -lobjc 's#libobjc_s.a: libobjc.la	cp .libs/libobjc.a libobjc_s.a#	mv libobjc.a libobjc_s.a# Create a relocatable DLLlibobjc.dll: libobjc_s.a libobjc_entry.o	$(CC) -mdll -Wl,--base-file -Wl,libobjc.base \		-o libobjc.dll libobjc_s.a libobjc_entry.o -lkernel32 -lobjc	$(DLLTOOL) --dllname libobjc.dll --def $(srcdir)/libobjc.def \		--base-file libobjc.base --output-exp libobjc.exp	$(GCC_FOR_TARGET) -mdll -Wl,--base-file libobjc.base libobjc.exp \		-o libobjc.dll libobjc_s.a libobjc_entry.o -lkernel32 -lobjc	$(DLLTOOL) --dllname libobjc.dll --def $(srcdir)/libobjc.def \		--base-file libobjc.base --output-exp libobjc.exp	$(GCC_FOR_TARGET) libobjc.exp -mdll \		-o libobjc.dll libobjc_s.a libobjc_entry.o -lkernel32 -lobjc	$(DLLTOOL) --dllname libobjc.dll --def $(srcdir)/libobjc.def \		--output-lib libobjc.a##Then, use these commands to run make and create libobjc_entry.o and libobjc.dll:cd /cygdrive/c/gcc-4_2-branch-build/athlon_xp-pc-cygwin/libobjcmake libobjc_entry.lomake -i -k libobjc.dll DLLTOOL=dlltool GCC_FOR_TARGET=""/cygdrive/c/gcc-4_2-branch-build/gcc/xgcc -B/cygdrive/c/cygwin/lib/gcc/athlon_xp-pc-cygwin/4.1.1/ -B/cygdrive/c/gcc-4_2-branch-build/gcc/ -B/usr/athlon_xp-pc-cygwin/bin/ -B/usr/athlon_xp-pc-cygwin/lib/ -isystem /usr/athlon_xp-pc-cygwin/include -isystem /usr/athlon_xp-pc-cygwin/sys-include""Result (which is likely to be different depending on your initial ./configure and CFLAGS:/bin/sh ./libtool --mode=compile /cygdrive/c/gcc-4_2-branch-build/./gcc/xgcc -B/cygdrive/c/gcc-4_2-branch-build/./gcc/ -B/usr/athlon_xp-pc-cygwin/bin/ -B/usr/athlon_xp-pc-cygwin/lib/ -isystem /usr/athlon_xp-pc-cygwin/include -isystem /usr/athlon_xp-pc-cygwin/sys-include -c -I. -I/cygdrive/C/makecygwin/gcc-4_2-branch/libobjc -I/usr/include -I/include -I/usr/local/include  -O2 -march=athlon-xp -ffast-math -mfancy-math-387 -mmmx -m3dnow -msse -msse2 -msse3 -mfpmath=sse,387 -pipe -mthreads -fno-eliminate-unused-debug-types  -W -Wall -Wwrite-strings -Wstrict-prototypes -DIN_GCC -DIN_TARGET_LIBS -fno-strict-aliasing -fexceptions -I/cygdrive/C/makecygwin/gcc-4_2-branch/libobjc/objc  -I/cygdrive/C/makecygwin/gcc-4_2-branch/libobjc/../gcc -I/cygdrive/C/makecygwin/gcc-4_2-branch/libobjc/../gcc/config -I../.././gcc -I/cygdrive/C/makecygwin/gcc-4_2-branch/libobjc/../include -I/cygdrive/C/makecygwin/gcc-4_2-branch/libobjc/../boehm-gc/include -I../boehm-gc/include /cygdrive/C/makecygwin/gcc-4_2-branch/libobjc/libobjc_entry.c/cygdrive/c/gcc-4_2-branch-build/./gcc/xgcc -B/cygdrive/c/gcc-4_2-branch-build/./gcc/ -B/usr/athlon_xp-pc-cygwin/bin/ -B/usr/athlon_xp-pc-cygwin/lib/ -isystem /usr/athlon_xp-pc-cygwin/include -isystem /usr/athlon_xp-pc-cygwin/sys-include -c -I. -I/cygdrive/C/makecygwin/gcc-4_2-branch/libobjc -I/usr/include -I/include -I/usr/local/include -O2 -march=athlon-xp -ffast-math -mfancy-math-387 -mmmx -m3dnow -msse -msse2 -msse3 -mfpmath=sse,387 -pipe -mthreads -fno-eliminate-unused-debug-types -W -Wall -Wwrite-strings -Wstrict-prototypes -DIN_GCC -DIN_TARGET_LIBS -fno-strict-aliasing -fexceptions -I/cygdrive/C/makecygwin/gcc-4_2-branch/libobjc/objc -I/cygdrive/C/makecygwin/gcc-4_2-branch/libobjc/../gcc -I/cygdrive/C/makecygwin/gcc-4_2-branch/libobjc/../gcc/config -I../.././gcc -I/cygdrive/C/makecygwin/gcc-4_2-branch/libobjc/../include -I/cygdrive/C/makecygwin/gcc-4_2-branch/libobjc/../boehm-gc/include -I../boehm-gc/include /cygdrive/C/makecygwin/gcc-4_2-branch/libobjc/libobjc_entry.c -o libobjc_entry.o/cygdrive/C/makecygwin/gcc-4_2-branch/libobjc/libobjc_entry.c: In function 'DllMain':/cygdrive/C/makecygwin/gcc-4_2-branch/libobjc/libobjc_entry.c:34: warning: unused parameter 'hInst'/cygdrive/C/makecygwin/gcc-4_2-branch/libobjc/libobjc_entry.c:35: warning: unused parameter 'lpReserved'/cygdrive/c/gcc-4_2-branch-build/./gcc/xgcc -B/cygdrive/c/gcc-4_2-branch-build/./gcc/ -B/usr/athlon_xp-pc-cygwin/bin/ -B/usr/athlon_xp-pc-cygwin/lib/ -isystem /usr/athlon_xp-pc-cygwin/include -isystem /usr/athlon_xp-pc-cygwin/sys-include -mdll -Wl,--base-file -Wl,libobjc.base \                -o libobjc.dll libobjc_s.a libobjc_entry.o -lkernel32 -lobjcdlltool --dllname libobjc.dll --def /cygdrive/C/makecygwin/gcc-4_2-branch/libobjc/libobjc.def \                --base-file libobjc.base --output-exp libobjc.exp/cygdrive/c/gcc-4_2-branch-build/gcc/xgcc -B/cygdrive/c/cygwin/lib/gcc/athlon_xp-pc-cygwin/4.1.1/ -B/cygdrive/c/gcc-4_2-branch-build/gcc/ -B/usr/athlon_xp-pc-cygwin/bin/ -B/usr/athlon_xp-pc-cygwin/lib/ -isystem /usr/athlon_xp-pc-cygwin/include -isystem /usr/athlon_xp-pc-cygwin/sys-include -mdll -Wl,--base-file libobjc.base libobjc.exp \                -o libobjc.dll libobjc_s.a libobjc_entry.o -lkernel32 -lobjcdlltool --dllname libobjc.dll --def /cygdrive/C/makecygwin/gcc-4_2-branch/libobjc/libobjc.def \                --base-file libobjc.base --output-exp libobjc.exp/cygdrive/c/gcc-4_2-branch-build/gcc/xgcc -B/cygdrive/c/cygwin/lib/gcc/athlon_xp-pc-cygwin/4.1.1/ -B/cygdrive/c/gcc-4_2-branch-build/gcc/ -B/usr/athlon_xp-pc-cygwin/bin/ -B/usr/athlon_xp-pc-cygwin/lib/ -isystem /usr/athlon_xp-pc-cygwin/include -isystem /usr/athlon_xp-pc-cygwin/sys-include libobjc.exp -mdll \                -o libobjc.dll libobjc_s.a libobjc_entry.o -lkernel32 -lobjcdlltool --dllname libobjc.dll --def /cygdrive/C/makecygwin/gcc-4_2-branch/libobjc/libobjc.def \                --output-lib libobjc.aNote: You DO need to define DLLTOOL and GCC_FOR_TARGET since neither is defined and you MUST use      4.1.1's libobjc.a since 4.2.0's libobjc.a does not seem to have the ""hash_*"" functions.      Failing to add ""-B/cygdrive/c/cygwin/lib/gcc/athlon_xp-pc-cygwin/4.1.1/"" (or wherever      the gcc 4.1.1 libobjc.a file is on YOUR system) gives these errors:libobjc.exp:fake:(.edata+0xb0): undefined reference to `_hash_add'libobjc.exp:fake:(.edata+0xb4): undefined reference to `_hash_delete'libobjc.exp:fake:(.edata+0xb8): undefined reference to `_hash_is_key_in_hash'libobjc.exp:fake:(.edata+0xbc): undefined reference to `_hash_new'libobjc.exp:fake:(.edata+0xc0): undefined reference to `_hash_next'libobjc.exp:fake:(.edata+0xc4): undefined reference to `_hash_remove'libobjc.exp:fake:(.edata+0xc8): undefined reference to `_hash_value_for_key'It may be an omission in the gcc-4_2-branch CVS that these functions are unavailable. They are mentioned in the source code in file gcc-4_2-branch/libobjc/libobjc.def and nowhere else. I imagine we need to addthese functions from 4.1.1 so 4.2.0 will be able to make this .dll .",RESOLVED          FIXED      
40578,Dave Korn,FOPEN double defined used in ada/adaint.h:58,"As of commit r149007 (enabling -Werror when building with language Ada), I get these errors on current cygwin:/usr/local/src/trunk/objdir/./prev-gcc/xgcc -B/usr/local/src/trunk/objdir/./prev-gcc/ -B/usr/local/i686-pc-cygwin/bin/ -B/usr/local/i686-pc-cygwin/bin/ -B/usr/local/i686-pc-cygwin/lib/ -isystem /usr/local/i686-pc-cygwin/include -isystem /usr/local/i686-pc-cygwin/sys-include    -c  -g -O2 -DIN_GCC   -W -Wall -Wwrite-strings -Wcast-qual -Wstrict-prototypes -Wmissing-prototypes  -Wmissing-format-attribute -Wno-long-long -Wno-variadic-macros -Wno-overlength-strings -Werror -Wold-style-definition -Wc++-compat -fno-common  -DHAVE_CONFIG_H -I. -Iada -I../../gcc/gcc -I../../gcc/gcc/ada -I../../gcc/gcc/../include -I../../gcc/gcc/../libcpp/include -Iyes/include   -I../../gcc/gcc/../libdecnumber -I../../gcc/gcc/../libdecnumber/dpd -I../libdecnumber    ../../gcc/gcc/ada/cstreams.c -o ada/cstreams.occ1: warnings being treated as errorsIn file included from ../../gcc/gcc/ada/cstreams.c:47:0:../../gcc/gcc/ada/adaint.h:58:0: error: ""FOPEN"" redefined/usr/include/sys/_default_fcntl.h:95:0: note: this is the location of the previous definitionmake[3]: *** [ada/cstreams.o] Error 1/usr/local/src/trunk/objdir/./prev-gcc/xgcc -B/usr/local/src/trunk/objdir/./prev-gcc/ -B/usr/local/i686-pc-cygwin/bin/ -B/usr/local/i686-pc-cygwin/bin/ -B/usr/local/i686-pc-cygwin/lib/ -isystem /usr/local/i686-pc-cygwin/include -isystem /usr/local/i686-pc-cygwin/sys-include    -c  -g -O2 -DIN_GCC   -W -Wall -Wwrite-strings -Wcast-qual -Wstrict-prototypes -Wmissing-prototypes  -Wmissing-format-attribute -Wno-long-long -Wno-variadic-macros -Wno-overlength-strings -Werror -Wold-style-definition -Wc++-compat -fno-common  -DHAVE_CONFIG_H  \		 -I. -Iada -I../../gcc/gcc -I../../gcc/gcc/ada -I../../gcc/gcc/../include -I../../gcc/gcc/../libcpp/include -Iyes/include   -I../../gcc/gcc/../libdecnumber -I../../gcc/gcc/../libdecnumber/dpd -I../libdecnumber    -I. -Iada -I../../gcc/gcc -I../../gcc/gcc/ada -I../../gcc/gcc/../include -I../../gcc/gcc/../libcpp/include -Iyes/include   -I../../gcc/gcc/../libdecnumber -I../../gcc/gcc/../libdecnumber/dpd -I../libdecnumber   ../../gcc/gcc/ada/cio.c -o ada/cio.occ1: warnings being treated as errorsIn file included from ../../gcc/gcc/ada/cio.c:41:0:../../gcc/gcc/ada/adaint.h:58:0: error: ""FOPEN"" redefined/usr/include/sys/_default_fcntl.h:95:0: note: this is the location of the previous definitionmake[3]: *** [ada/cio.o] Error 1/usr/local/src/trunk/objdir/./prev-gcc/xgcc -B/usr/local/src/trunk/objdir/./prev-gcc/ -B/usr/local/i686-pc-cygwin/bin/ -B/usr/local/i686-pc-cygwin/bin/ -B/usr/local/i686-pc-cygwin/lib/ -isystem /usr/local/i686-pc-cygwin/include -isystem /usr/local/i686-pc-cygwin/sys-include    -c  -g -O2 -DIN_GCC   -W -Wall -Wwrite-strings -Wcast-qual -Wstrict-prototypes -Wmissing-prototypes  -Wmissing-format-attribute -Wno-long-long -Wno-variadic-macros -Wno-overlength-strings -Werror -Wold-style-definition -Wc++-compat -fno-common  -DHAVE_CONFIG_H  \		 -I. -Iada -I../../gcc/gcc -I../../gcc/gcc/ada -I../../gcc/gcc/../include -I../../gcc/gcc/../libcpp/include -Iyes/include   -I../../gcc/gcc/../libdecnumber -I../../gcc/gcc/../libdecnumber/dpd -I../libdecnumber    -I. -Iada -I../../gcc/gcc -I../../gcc/gcc/ada -I../../gcc/gcc/../include -I../../gcc/gcc/../libcpp/include -Iyes/include   -I../../gcc/gcc/../libdecnumber -I../../gcc/gcc/../libdecnumber/dpd -I../libdecnumber   ../../gcc/gcc/ada/cio.c -o ada/cio.occ1: warnings being treated as errorsIn file included from ../../gcc/gcc/ada/cio.c:41:0:../../gcc/gcc/ada/adaint.h:58:0: error: ""FOPEN"" redefined/usr/include/sys/_default_fcntl.h:95:0: note: this is the location of the previous definitionmake[3]: *** [ada/cio.o] Error 1/usr/local/src/trunk/objdir/./prev-gcc/xgcc -B/usr/local/src/trunk/objdir/./prev-gcc/ -B/usr/local/i686-pc-cygwin/bin/ -B/usr/local/i686-pc-cygwin/bin/ -B/usr/local/i686-pc-cygwin/lib/ -isystem /usr/local/i686-pc-cygwin/include -isystem /usr/local/i686-pc-cygwin/sys-include    -c  -g -O2 -DIN_GCC   -W -Wall -Wwrite-strings -Wcast-qual -Wstrict-prototypes -Wmissing-prototypes  -Wmissing-format-attribute -Wno-long-long -Wno-variadic-macros -Wno-overlength-strings -Werror -Wold-style-definition -Wc++-compat -fno-common  -DHAVE_CONFIG_H  \		 -I. -Iada -I../../gcc/gcc -I../../gcc/gcc/ada -I../../gcc/gcc/../include -I../../gcc/gcc/../libcpp/include -Iyes/include   -I../../gcc/gcc/../libdecnumber -I../../gcc/gcc/../libdecnumber/dpd -I../libdecnumber    -I. -Iada -I../../gcc/gcc -I../../gcc/gcc/ada -I../../gcc/gcc/../include -I../../gcc/gcc/../libcpp/include -Iyes/include   -I../../gcc/gcc/../libdecnumber -I../../gcc/gcc/../libdecnumber/dpd -I../libdecnumber   ../../gcc/gcc/ada/raise.c -o ada/raise.occ1: warnings being treated as errorsIn file included from ../../gcc/gcc/ada/raise.c:46:0:../../gcc/gcc/ada/adaint.h:58:0: error: ""FOPEN"" redefined/usr/include/sys/_default_fcntl.h:95:0: note: this is the location of the previous definitionmake[3]: *** [ada/raise.o] Error 1/usr/local/src/trunk/objdir/./prev-gcc/xgcc -B/usr/local/src/trunk/objdir/./prev-gcc/ -B/usr/local/i686-pc-cygwin/bin/ -B/usr/local/i686-pc-cygwin/bin/ -B/usr/local/i686-pc-cygwin/lib/ -isystem /usr/local/i686-pc-cygwin/include -isystem /usr/local/i686-pc-cygwin/sys-include    -c  -g -O2 -DIN_GCC   -W -Wall -Wwrite-strings -Wcast-qual -Wstrict-prototypes -Wmissing-prototypes  -Wmissing-format-attribute -Wno-long-long -Wno-variadic-macros -Wno-overlength-strings -Werror -Wold-style-definition -Wc++-compat -fno-common  -DHAVE_CONFIG_H  \		 -I. -Iada -I../../gcc/gcc -I../../gcc/gcc/ada -I../../gcc/gcc/../include -I../../gcc/gcc/../libcpp/include -Iyes/include   -I../../gcc/gcc/../libdecnumber -I../../gcc/gcc/../libdecnumber/dpd -I../libdecnumber    -I. -Iada -I../../gcc/gcc -I../../gcc/gcc/ada -I../../gcc/gcc/../include -I../../gcc/gcc/../libcpp/include -Iyes/include   -I../../gcc/gcc/../libdecnumber -I../../gcc/gcc/../libdecnumber/dpd -I../libdecnumber   ../../gcc/gcc/ada/raise.c -o ada/raise.occ1: warnings being treated as errorsIn file included from ../../gcc/gcc/ada/raise.c:46:0:../../gcc/gcc/ada/adaint.h:58:0: error: ""FOPEN"" redefined/usr/include/sys/_default_fcntl.h:95:0: note: this is the location of the previous definitionmake[3]: *** [ada/raise.o] Error 1/usr/local/src/trunk/objdir/./prev-gcc/xgcc -B/usr/local/src/trunk/objdir/./prev-gcc/ -B/usr/local/i686-pc-cygwin/bin/ -B/usr/local/i686-pc-cygwin/bin/ -B/usr/local/i686-pc-cygwin/lib/ -isystem /usr/local/i686-pc-cygwin/include -isystem /usr/local/i686-pc-cygwin/sys-include    -c  -g -O2 -DIN_GCC   -W -Wall -Wwrite-strings -Wcast-qual -Wstrict-prototypes -Wmissing-prototypes  -Wmissing-format-attribute -Wno-long-long -Wno-variadic-macros -Wno-overlength-strings -Werror -Wold-style-definition -Wc++-compat -fno-common  -DHAVE_CONFIG_H -I. -Iada -I../../gcc/gcc -I../../gcc/gcc/ada -I../../gcc/gcc/../include -I../../gcc/gcc/../libcpp/include -Iyes/include   -I../../gcc/gcc/../libdecnumber -I../../gcc/gcc/../libdecnumber/dpd -I../libdecnumber    ../../gcc/gcc/ada/exit.c -o ada/exit.occ1: warnings being treated as errorsIn file included from ../../gcc/gcc/ada/exit.c:45:0:../../gcc/gcc/ada/adaint.h:58:0: error: ""FOPEN"" redefined/usr/include/sys/_default_fcntl.h:95:0: note: this is the location of the previous definitionmake[3]: *** [ada/exit.o] Error 1",RESOLVED          FIXED      
40807,Dave Korn,[4.5 Regression] : libffi.call/return_sc.c,"+++ This bug was initially created as a clone of Bug #32843 +++> > On Linux/ia32, this patch> > http://gcc.gnu.org/ml/gcc-cvs/2007-07/msg00336.html> > caused> > FAIL: libffi.call/return_sc.c -O0 -W -Wall execution test> FAIL: libffi.call/return_sc.c -O2 e",RESOLVED          FIXED      
41357,Dave Korn,libgomp build fail,"libtool: link: /home/jie/blackfin-sources/build45220-5/gcc_build-4.5/./gcc/xgcc -B/home/jie/blackfin-sources/build45220-5/gcc_build-4.5/./gcc/ -B/home/jie/installs/bfin-45-220-5/bfin-linux-uclibc/bin/ -B/home/jie/installs/bfin-45-220-5/bfin-linux-uclibc/lib/ -isystem /home/jie/installs/bfin-45-220-5/bfin-linux-uclibc/include -isystem /home/jie/installs/bfin-45-220-5/bfin-linux-uclibc/sys-include    -shared  .libs/alloc.o .libs/barrier.o .libs/critical.o .libs/env.o .libs/error.o .libs/iter.o .libs/iter_ull.o .libs/loop.o .libs/loop_ull.o .libs/ordered.o .libs/parallel.o .libs/sections.o .libs/single.o .libs/task.o .libs/team.o .libs/work.o .libs/lock.o .libs/mutex.o .libs/proc.o .libs/sem.o .libs/bar.o .libs/ptrlock.o .libs/time.o .libs/fortran.o .libs/affinity.o    -pthread -Wl,-O1   -Wl,-soname -Wl,libgomp.so.1 -o .libs/libgomp.so.1.0.0/home/jie/installs/bfin-45-220-5/bfin-linux-uclibc/bin/ld: fde encoding in /home/jie/blackfin-sources/build45220-5/gcc_build-4.5/./gcc/libgcc.a(_udivdi3.o)(.eh_frame) prevents .eh_frame_hdr table being created..libs/iter.o:(.debug_info+0x8fb): undefined reference to `_gomp_tls_data'.libs/iter.o:(.debug_info+0x98e): undefined reference to `_gomp_tls_data'.libs/iter.o:(.debug_info+0xa73): undefined reference to `_gomp_tls_data'.libs/iter.o:(.debug_info+0xb2d): undefined reference to `_gomp_tls_data'.libs/iter_ull.o:(.debug_info+0x90e): undefined reference to `_gomp_tls_data'.libs/iter_ull.o:(.debug_info+0x9a5): more undefined references to `_gomp_tls_data' follow/home/jie/installs/bfin-45-220-5/bfin-linux-uclibc/bin/ld: .libs/libgomp.so.1.0.0: hidden symbol `_gomp_tls_data' isn't defined/home/jie/installs/bfin-45-220-5/bfin-linux-uclibc/bin/ld: final link failed: Nonrepresentable section on outputcollect2: ld returned 1 exit statusmake[4]: *** [libgomp.la] Error 1make[4]: Leaving directory `/home/jie/blackfin-sources/build45220-5/gcc_build-4.5/bfin-linux-uclibc/libgomp'",RESOLVED          FIXED      
42271,Dave Korn,os_defines.h:60:1: error: expected '{' before '_GLIBCXX_PSEUDO_VISIBILITY',"/test/gnu/gcc/objdir/./gcc/xgcc -shared-libgcc -B/test/gnu/gcc/objdir/./gcc -nostdinc++ -L/test/gnu/gcc/objdir/hppa2.0w-hp-hpux11.11/libstdc++-v3/src -L/test/gnu/gcc/objdir/hppa2.0w-hp-hpux11.11/libstdc++-v3/src/.libs -B/opt/gnu/gcc/gcc-4.5.0/hppa2.0w-hp-hpux11.11/bin/ -B/opt/gnu/gcc/gcc-4.5.0/hppa2.0w-hp-hpux11.11/lib/ -isystem /opt/gnu/gcc/gcc-4.5.0/hppa2.0w-hp-hpux11.11/include -isystem /opt/gnu/gcc/gcc-4.5.0/hppa2.0w-hp-hpux11.11/sys-include    -x c++-header -g -O2 -I/test/gnu/gcc/objdir/hppa2.0w-hp-hpux11.11/libstdc++-v3/include/hppa2.0w-hp-hpux11.11 -I/test/gnu/gcc/objdir/hppa2.0w-hp-hpux11.11/libstdc++-v3/include -I/test/gnu/gcc/gcc/libstdc++-v3/libsupc++ -O2 -g -std=gnu++0x /test/gnu/gcc/gcc/libstdc++-v3/include/precompiled/stdc++.h \        -o hppa2.0w-hp-hpux11.11/bits/stdc++.h.gch/O2ggnu++0x.gchIn file included from /test/gnu/gcc/objdir/hppa2.0w-hp-hpux11.11/libstdc++-v3/include/hppa2.0w-hp-hpux11.11/bits/c++config.h:275:0,                 from /test/gnu/gcc/objdir/hppa2.0w-hp-hpux11.11/libstdc++-v3/include/cctype:43,                 from /test/gnu/gcc/gcc/libstdc++-v3/include/precompiled/stdc++.h:36:/test/gnu/gcc/objdir/hppa2.0w-hp-hpux11.11/libstdc++-v3/include/hppa2.0w-hp-hpux11.11/bits/os_defines.h:60:1: error: expected '{' before '_GLIBCXX_PSEUDO_VISIBILITY'/test/gnu/gcc/objdir/hppa2.0w-hp-hpux11.11/libstdc++-v3/include/hppa2.0w-hp-hpux11.11/bits/os_defines.h:60:1: error: expected constructor, destructor, or type conversion before '(' token...-bash-3.2$ ./xgcc -B./ -vReading specs from ./specsCOLLECT_GCC=./xgccCOLLECT_LTO_WRAPPER=./lto-wrapperTarget: hppa2.0w-hp-hpux11.11Configured with: ../gcc/configure --with-gnu-as --with-as=/opt/gnu/bin/as --enable-shared --with-local-prefix=/opt/gnu --prefix=/opt/gnu/gcc/gcc-4.5.0 --with-gmp=/opt/gnu/gcc/gcc-4.5.0 --enable-threads=posix --enable-debug=no --disable-nls --without-cloog --without-ppl --enable-languages=c,c++,objc,fortran,java,ada,obj-c++Thread model: posixgcc version 4.5.0 20091203 (experimental) [trunk revision 154954] (GCC)",RESOLVED          FIXED      
42531,Dave Korn,FAIL: gcc.c-torture/compile/20011119-1.c,"GCC: HEAD@155348, i686-pc-cygwin native, libelf-0.8.13:> > FAIL: gcc.c-torture/compile/20011119-1.c (test for excess errors)> > Excess errors:> > /win/c/DOCUME~1/ADMINI~1/LOCALS~1/Temp/cccnrdgl.s:13: Error: junk at end of> > line, first unrecognized character is `*'  Looking at the generated assembly using --save-temps:> >     32          .section        .gnu.lto_*_xxx,""dr""Ref: http://gcc.gnu.org/ml/gcc/2009-12/threads.html#00292Source not attached because it's in the testsuite.Patch to follow.",VERIFIED          FIXED      
42377,Dave Korn,libstdc++.dll.a misses a definition of std::string::reserve,"Even though libstdc++-6.dll has: 000000006fc94700 T std::string::reserve(unsigned long long),libstdc++.dll.a misses a definition of std::string::reserve!Which makes it impossible to build libgmpxx against a shared version of libstdc++-6, see:/bin/sh ./libtool --mode=link g++  -O2 -pedantic -m64 -mtune=k8   -o libgmpxx.la -rpath /home/rainer/tmp/install/lib -no-undefined -Wl,--export-all-symbols -Wl,--output-def,.libs/libgmp-3.dll.def -Wl,--output-def,.libs/libgmpxx-3.dll.def -version-info 5:0:1 dummy.lo cxx/isfuns.lo cxx/ismpf.lo cxx/ismpq.lo cxx/ismpz.lo cxx/ismpznw.lo cxx/osdoprnti.lo cxx/osfuns.lo cxx/osmpf.lo cxx/osmpq.lo cxx/osmpz.lo libgmp.la rm -fr  .libs/libgmpxx.dll.ag++ -shared -nostdlib c:/mingw/x86_64-w64/x86_64-w64/x86_64-w64/gcc-4.5.0-test/mingw/bin/../lib/gcc/x86_64-w64-mingw32/4.5.0/../../../../x86_64-w64-mingw32/lib/dllcrt2.o c:/mingw/x86_64-w64/x86_64-w64/x86_64-w64/gcc-4.5.0-test/mingw/bin/../lib/gcc/x86_64-w64-mingw32/4.5.0/../../../../x86_64-w64-mingw32/lib/crtbegin.o  .libs/dummy.o cxx/.libs/isfuns.o cxx/.libs/ismpf.o cxx/.libs/ismpq.o cxx/.libs/ismpz.o cxx/.libs/ismpznw.o cxx/.libs/osdoprnti.o cxx/.libs/osfuns.o cxx/.libs/osmpf.o cxx/.libs/osmpq.o cxx/.libs/osmpz.o  ./.libs/libgmp.dll.a -Lc:/mingw/x86_64-w64/x86_64-w64/x86_64-w64/gcc-4.5.0-test/mingw/bin/../lib/gcc/x86_64-w64-mingw32/4.5.0 -Lc:/mingw/x86_64-w64/x86_64-w64/x86_64-w64/gcc-4.5.0-test/mingw/bin/../lib/gcc -Lc:/mingw/x86_64-w64/x86_64-w64/x86_64-w64/gcc-4.5.0-test/mingw/bin/../lib/gcc/x86_64-w64-mingw32/4.5.0/../../../../lib64 -Lc:/mingw/x86_64-w64/x86_64-w64/x86_64-w64/gcc-4.5.0-test/mingw/bin/../lib/gcc/x86_64-w64-mingw32/4.5.0/../../../../x86_64-w64-mingw32/lib -Lc:/mingw/x86_64-w64/x86_64-w64/x86_64-w64/gcc-4.5.0-test/mingw/bin/../lib/gcc/x86_64-w64-mingw32/4.5.0/../../.. -Lc:/mingw/x86_64-w64/x86_64-w64/x86_64-w64/gcc-4.5.0-test/mingw/bin/../../mingw/mingw/lib /mingw/x86_64-w64/x86_64-w64/x86_64-w64/gcc-4.5.0-test/mingw/lib/../lib64/libstdc++.dll.a -L/home/rainer/software/build/x86_64-w64/x86_64-w64/x86_64-w64/gcc-4.5.0-test/gcc-4.5.0-bootstrap/x86_64-w64-mingw32/libstdc++-v3/src -L/home/rainer/software/build/x86_64-w64/x86_64-w64/x86_64-w64/gcc-4.5.0-test/gcc-4.5.0-bootstrap/x86_64-w64-mingw32/libstdc++-v3/src/.libs -L/mingw/x86_64-w64/x86_64-w64/x86_64-w64/gcc-4.5.0-test/mingw/x86_64-w64-mingw32/lib -L/mingw/x86_64-w64/x86_64-w64/x86_64-w64/gcc-4.5.0-test/mingw/mingw/lib -lmingw32 -lgcc_s -lgcc -lmoldname -lmingwex -lmsvcrt -luser32 -lkernel32 -ladvapi32 -lshell32 -lmingw32 -lgcc_s -lgcc -lmoldname -lmingwex -lmsvcrt c:/mingw/x86_64-w64/x86_64-w64/x86_64-w64/gcc-4.5.0-test/mingw/bin/../lib/gcc/x86_64-w64-mingw32/4.5.0/../../../../x86_64-w64-mingw32/lib/crtend.o  -m64 -mtune=k8 -Wl,--export-all-symbols -Wl,--output-def -Wl,.libs/libgmp-3.dll.def -Wl,--output-def -Wl,.libs/libgmpxx-3.dll.def -o .libs/libgmpxx-4.dll -Wl,--enable-auto-image-base -Xlinker --out-implib -Xlinker .libs/libgmpxx.dll.aInfo: resolving std::basic_string<char, std::char_traits<char>, std::allocator<char> >::_Rep::_S_empty_rep_storage by linking to __imp___ZNSs4_Rep20_S_empty_rep_storageE (auto-import)Creating library file: .libs/libgmpxx.dll.ac:/mingw/x86_64-w64/x86_64-w64/x86_64-w64/gcc-4.5.0-test/mingw/bin/../lib/gcc/x86_64-w64-mingw32/4.5.0/../../../../x86_64-w64-mingw32/bin/ld.exe: warning: auto-importing has been activated without --enable-auto-import specified on the command line.This should work unless it involves constant data structures referencing symbols from auto-imported DLLs.cxx/.libs/isfuns.o:isfuns.cc:(.text+0x180): undefined reference to `std::string::reserve(unsigned long long)'cxx/.libs/isfuns.o:isfuns.cc:(.text+0x228): undefined reference to `std::string::reserve(unsigned long long)'cxx/.libs/isfuns.o:isfuns.cc:(.text+0x2a8): undefined reference to `std::string::reserve(unsigned long long)'cxx/.libs/ismpf.o:ismpf.cc:(.text+0x2f8): undefined reference to `std::string::reserve(unsigned long long)'cxx/.libs/ismpf.o:ismpf.cc:(.text+0x3a7): undefined reference to `std::string::reserve(unsigned long long)'/bin/sh ./libtool --mode=link g++  -O2 -pedantic -m64 -mtune=k8   -o libgmpxx.la -rpath /home/rainer/tmp/install/lib -no-undefined -Wl,--export-all-symbols -Wl,--output-def,.libs/libgmp-3.dll.def -Wl,--output-def,.libs/libgmpxx-3.dll.def -version-info 5:0:1 dummy.lo cxx/isfuns.lo cxx/ismpf.lo cxx/ismpq.lo cxx/ismpz.lo cxx/ismpznw.lo cxx/osdoprnti.lo cxx/osfuns.lo cxx/osmpf.lo cxx/osmpq.lo cxx/osmpz.lo libgmp.la rm -fr  .libs/libgmpxx.dll.ag++ -shared -nostdlib c:/mingw/x86_64-w64/x86_64-w64/x86_64-w64/gcc-4.5.0-test/mingw/bin/../lib/gcc/x86_64-w64-mingw32/4.5.0/../../../../x86_64-w64-mingw32/lib/dllcrt2.o c:/mingw/x86_64-w64/x86_64-w64/x86_64-w64/gcc-4.5.0-test/mingw/bin/../lib/gcc/x86_64-w64-mingw32/4.5.0/../../../../x86_64-w64-mingw32/lib/crtbegin.o  .libs/dummy.o cxx/.libs/isfuns.o cxx/.libs/ismpf.o cxx/.libs/ismpq.o cxx/.libs/ismpz.o cxx/.libs/ismpznw.o cxx/.libs/osdoprnti.o cxx/.libs/osfuns.o cxx/.libs/osmpf.o cxx/.libs/osmpq.o cxx/.libs/osmpz.o  ./.libs/libgmp.dll.a -Lc:/mingw/x86_64-w64/x86_64-w64/x86_64-w64/gcc-4.5.0-test/mingw/bin/../lib/gcc/x86_64-w64-mingw32/4.5.0 -Lc:/mingw/x86_64-w64/x86_64-w64/x86_64-w64/gcc-4.5.0-test/mingw/bin/../lib/gcc -Lc:/mingw/x86_64-w64/x86_64-w64/x86_64-w64/gcc-4.5.0-test/mingw/bin/../lib/gcc/x86_64-w64-mingw32/4.5.0/../../../../lib64 -Lc:/mingw/x86_64-w64/x86_64-w64/x86_64-w64/gcc-4.5.0-test/mingw/bin/../lib/gcc/x86_64-w64-mingw32/4.5.0/../../../../x86_64-w64-mingw32/lib -Lc:/mingw/x86_64-w64/x86_64-w64/x86_64-w64/gcc-4.5.0-test/mingw/bin/../lib/gcc/x86_64-w64-mingw32/4.5.0/../../.. -Lc:/mingw/x86_64-w64/x86_64-w64/x86_64-w64/gcc-4.5.0-test/mingw/bin/../../mingw/mingw/lib /mingw/x86_64-w64/x86_64-w64/x86_64-w64/gcc-4.5.0-test/mingw/lib/../lib64/libstdc++.dll.a -L/home/rainer/software/build/x86_64-w64/x86_64-w64/x86_64-w64/gcc-4.5.0-test/gcc-4.5.0-bootstrap/x86_64-w64-mingw32/libstdc++-v3/src -L/home/rainer/software/build/x86_64-w64/x86_64-w64/x86_64-w64/gcc-4.5.0-test/gcc-4.5.0-bootstrap/x86_64-w64-mingw32/libstdc++-v3/src/.libs -L/mingw/x86_64-w64/x86_64-w64/x86_64-w64/gcc-4.5.0-test/mingw/x86_64-w64-mingw32/lib -L/mingw/x86_64-w64/x86_64-w64/x86_64-w64/gcc-4.5.0-test/mingw/mingw/lib -lmingw32 -lgcc_s -lgcc -lmoldname -lmingwex -lmsvcrt -luser32 -lkernel32 -ladvapi32 -lshell32 -lmingw32 -lgcc_s -lgcc -lmoldname -lmingwex -lmsvcrt c:/mingw/x86_64-w64/x86_64-w64/x86_64-w64/gcc-4.5.0-test/mingw/bin/../lib/gcc/x86_64-w64-mingw32/4.5.0/../../../../x86_64-w64-mingw32/lib/crtend.o  -m64 -mtune=k8 -Wl,--export-all-symbols -Wl,--output-def -Wl,.libs/libgmp-3.dll.def -Wl,--output-def -Wl,.libs/libgmpxx-3.dll.def -o .libs/libgmpxx-4.dll -Wl,--enable-auto-image-base -Xlinker --out-implib -Xlinker .libs/libgmpxx.dll.aInfo: resolving std::basic_string<char, std::char_traits<char>, std::allocator<char> >::_Rep::_S_empty_rep_storage by linking to __imp___ZNSs4_Rep20_S_empty_rep_storageE (auto-import)Creating library file: .libs/libgmpxx.dll.ac:/mingw/x86_64-w64/x86_64-w64/x86_64-w64/gcc-4.5.0-test/mingw/bin/../lib/gcc/x86_64-w64-mingw32/4.5.0/../../../../x86_64-w64-mingw32/bin/ld.exe: warning: auto-importing has been activated without --enable-auto-import specified on the command line.This should work unless it involves constant data structures referencing symbols from auto-imported DLLs.cxx/.libs/isfuns.o:isfuns.cc:(.text+0x180): undefined reference to `std::string::reserve(unsigned long long)'cxx/.libs/isfuns.o:isfuns.cc:(.text+0x228): undefined reference to `std::string::reserve(unsigned long long)'cxx/.libs/isfuns.o:isfuns.cc:(.text+0x2a8): undefined reference to `std::string::reserve(unsigned long long)'cxx/.libs/ismpf.o:ismpf.cc:(.text+0x2f8): undefined reference to `std::string::reserve(unsigned long long)'cxx/.libs/ismpf.o:ismpf.cc:(.text+0x3a7): undefined reference to `std::string::reserve(unsigned long long)'beyond that libstdc++.la on *-*-mingw32 has strange dependency_libs definition.For x86_64-w64-mingw32:# Libraries that this one depends upon.dependency_libs=' -L/home/rainer/software/build/x86_64-w64/x86_64-w64/x86_64-w64/gcc-4.5.0/gcc-4.5.0-bootstrap/x86_64-w64-mingw32/libstdc++-v3/src -L/home/rainer/software/build/x86_64-w64/x86_64-w64/x86_64-w64/gcc-4.5.0/gcc-4.5.0-bootstrap/x86_64-w64-mingw32/libstdc++-v3/src/.libs -L/mingw/x86_64-w64/x86_64-w64/x86_64-w64/gcc-4.5.0/mingw/x86_64-w64-mingw32/lib -L/mingw/x86_64-w64/x86_64-w64/x86_64-w64/gcc-4.5.0/mingw/mingw/lib'Which contains build locations!On my linux system dependency_libs is empty:# Libraries that this one depends upon.dependency_libs=''what I think is right.this is for trunk rev. 155209gcc build with static gmp, mpfr, mpc , ppl, cloog and libelf.configure:../../../../../../src/gcc-4.5.0/configure- --prefix=/mingw/x86_64-w64/x86_64-w64/x86_64-w64/gcc-4.5.0-test/mingw- --with-sysroot=/mingw/x86_64-w64/x86_64-w64/x86_64-w64/gcc-4.5.0-test/mingw- --with-gmp=/mingw/x86_64-w64/x86_64-w64/x86_64-w64/gcc-4.5.0-test/mingw- --with-mpfr=/mingw/x86_64-w64/x86_64-w64/x86_64-w64/gcc-4.5.0-test/mingw- --with-mpc=/mingw/x86_64-w64/x86_64-w64/x86_64-w64/gcc-4.5.0-test/mingw- --with-ppl=/mingw/x86_64-w64/x86_64-w64/x86_64-w64/gcc-4.5.0-test/mingw- --with-cloog=/mingw/x86_64-w64/x86_64-w64/x86_64-w64/gcc-4.5.0-test/mingw- --with-libelf=/mingw/x86_64-w64/x86_64-w64/x86_64-w64/gcc-4.5.0-test/mingw- --with-gnu-as- --with-as=/mingw/x86_64-w64/x86_64-w64/x86_64-w64/gcc-4.5.0-test/mingw/bin/as.exe- --with-gnu-ld- --with-ld=/mingw/x86_64-w64/x86_64-w64/x86_64-w64/gcc-4.5.0-test/mingw/bin/ld.exe- --enable-bootstrap --enable-threads=win32 --enable-languages=c,c++- --enable-checking=release --disable-werror --disable-multilib- --build=x86_64-w64-mingw32 --host=x86_64-w64-mingw32 --target=x86_64-w64-mingw32Rainer",VERIFIED          FIXED      
38903,Dave Korn,Bootstrap failure on Cygwin vs. libiberty.,"[refs: http://gcc.gnu.org/ml/gcc/2009-01/threads.html#00060       http://gcc.gnu.org/ml/gcc/2009-01/threads.html#00216 ]Bootstrap on cygwin is currently failing during stage 3 with:	  /home/andy/live-gcc/my_gcc/./gcc/xgcc-B/home/andy/live-gcc/my_gcc/./gcc/ -B/usr/local/i686-pc-cygwin/bin/-B/usr/local/i686-pc-cygwin/lib/ -isystem/usr/local/i686-pc-cygwin/include -isystem/usr/local/i686-pc-cygwin/sys-include -c -DHAVE_CONFIG_H -g -O2    -I.-I../../../gcc/libiberty/../include  -W -Wall -Wwrite-strings-Wc++-compat -Wstrict-prototypes -pedantic../../../gcc/libiberty/strsignal.c -o pic/strsignal.o; \	else true; fi/home/andy/live-gcc/my_gcc/./gcc/xgcc-B/home/andy/live-gcc/my_gcc/./gcc/ -B/usr/local/i686-pc-cygwin/bin/-B/usr/local/i686-pc-cygwin/lib/ -isystem/usr/local/i686-pc-cygwin/include -isystem/usr/local/i686-pc-cygwin/sys-include -c -DHAVE_CONFIG_H -g -O2    -I.-I../../../gcc/libiberty/../include  -W -Wall -Wwrite-strings-Wc++-compat -Wstrict-prototypes -pedantic../../../gcc/libiberty/strsignal.c -o strsignal.o../../../gcc/libiberty/strsignal.c:408: error: conflicting types for 'strsignal'/usr/include/string.h:78: note: previous declaration of 'strsignal' was heremake[2]: *** [strsignal.o] Error 1make[2]: Leaving directory `/home/andy/live-gcc/my_gcc/i686-pc-cygwin/libiberty'make[1]: *** [all-target-libiberty] Error 2make[1]: Leaving directory `/home/andy/live-gcc/my_gcc'make: *** [all] Error 2This happens because libiberty configure has a hard-coded hack that kicks in when building libiberty as a target library, which causes strsignal (and a couple of others) to be removed from the list of functions for configure to check against the system libraries, causing the libiberty versions to be built when they aren't needed.  (They used to be required; formerly, Cygwin pulled in the object files from libiberty when linking the DLL, but this was fixed some time ago and the hack has been obsolete since then).  I am testing a patch to remove the hack.",RESOLVED          FIXED      
6092,David S. Miller,sparc-sun-solaris2.7 gcc-3.1 has hundreds of libjava failures with -m64,"When running the libjava testsuite with -m64, I see hundreds of extra failures.  E.g. see:http://gcc.gnu.org/ml/gcc-testresults/2002-03/msg00645.htmlRelease:3.1 20020324 (prerelease)Environment:sparc-sun-solaris2.7 native as/ldHow-To-Repeat:Use RUNTESTFLAGS=""--target_board 'unix{-m64,}'""",RESOLVED          FIXED      
55211,Mikael Pettersson,[4.8 regression] sparc64-linux bootstrap fails with SIGILL while compiling __mulvti3,"Attempting to bootstrap 4.8-20121104 on sparc64-linux fails with:/mnt/scratch/objdir48/./gcc/xgcc -B/mnt/scratch/objdir48/./gcc/ -B/mnt/scratch/install48/sparc64-unknown-linux-gnu/bin/ -B/mnt/scratch/install48/sparc64-unknown-linux-gnu/lib/ -isystem /mnt/scratch/install48/sparc64-unknown-linux-gnu/include -isystem /mnt/scratch/install48/sparc64-unknown-linux-gnu/sys-include    -g -O2 -m64 -O2  -g -O2 -DIN_GCC   -W -Wall -Wno-narrowing -Wwrite-strings -Wcast-qual -Wstrict-prototypes -Wmissing-prototypes -Wold-style-definition  -isystem ./include   -fPIC -g -DIN_LIBGCC2 -fbuilding-libgcc -fno-stack-protector   -fPIC -I. -I. -I../../.././gcc -I/mnt/scratch/gcc-4.8-20121104/libgcc -I/mnt/scratch/gcc-4.8-20121104/libgcc/. -I/mnt/scratch/gcc-4.8-20121104/libgcc/../gcc -I/mnt/scratch/gcc-4.8-20121104/libgcc/../include  -DHAVE_CC_TLS  -o _mulvdi3.o -MT _mulvdi3.o -MD -MP -MF _mulvdi3.dep -DL_mulvdi3 -c /mnt/scratch/gcc-4.8-20121104/libgcc/libgcc2.c -fvisibility=hidden -DHIDE_EXPORTS/mnt/scratch/gcc-4.8-20121104/libgcc/libgcc2.c: In function '__mulvti3':/mnt/scratch/gcc-4.8-20121104/libgcc/libgcc2.c:397:1: internal compiler error: Illegal instruction } ^/mnt/scratch/gcc-4.8-20121104/libgcc/libgcc2.c:397:1: internal compiler error: Abortedxgcc: internal compiler error: Aborted (program cc1)make[5]: *** [_mulvdi3.o] Abortedmake[5]: Leaving directory `/mnt/scratch/objdir48/sparc64-unknown-linux-gnu/64/libgcc'make[4]: *** [multi-do] Error 1make[4]: Leaving directory `/mnt/scratch/objdir48/sparc64-unknown-linux-gnu/libgcc'make[3]: *** [all-multi] Error 2make[3]: Leaving directory `/mnt/scratch/objdir48/sparc64-unknown-linux-gnu/libgcc'make[2]: *** [all-stage2-target-libgcc] Error 2make[2]: Leaving directory `/mnt/scratch/objdir48'make[1]: *** [stage2-bubble] Error 2make[1]: Leaving directory `/mnt/scratch/objdir48'make: *** [bootstrap] Error 2Re-running cc1 in gdb shows:Program received signal SIGILL, Illegal instruction.0x00575f94 in emit_note_insn_var_location(void**, void*) ()Missing separate debuginfos, use: debuginfo-install glibc-2.13.90-4.1.sparcv9(gdb) bt#0  0x00575f94 in emit_note_insn_var_location(void**, void*) ()#1  0x00734b7c in htab_traverse_noresize ()#2  0x00576a64 in emit_notes_for_changes(rtx_def*, emit_note_where, shared_hash_def*) ()#3  0x00577118 in vt_emit_notes() ()#4  0x0057a378 in variable_tracking_main() ()#5  0x002f8454 in execute_one_pass(opt_pass*) ()#6  0x002f8954 in execute_pass_list(opt_pass*) ()#7  0x002f8978 in execute_pass_list(opt_pass*) ()#8  0x002f8978 in execute_pass_list(opt_pass*) ()#9  0x00111ad8 in expand_function(cgraph_node*) ()#10 0x001134fc in compile() ()#11 0x00113c8c in finalize_compilation_unit() ()#12 0x00034a14 in c_write_global_declarations() ()#13 0x003a62bc in compile_file() ()#14 0x003a7c04 in toplev_main(int, char**) ()#15 0xf7d44234 in __libc_start_main () from /lib/libc.so.6#16 0x00023798 in _start ()Disassembling the faulting instruction shows:(gdb) disassemble 0x575f80,0x575fa0Dump of assembler code from 0x575f80 to 0x575fa0:   0x00575f80 <_ZL27emit_note_insn_var_locationPPvS_+1584>:     clr  %i3   0x00575f84 <_ZL27emit_note_insn_var_locationPPvS_+1588>:     add  %fp, -192, %i2   0x00575f88 <_ZL27emit_note_insn_var_locationPPvS_+1592>:     add  %fp, -128, %i0   0x00575f8c <_ZL27emit_note_insn_var_locationPPvS_+1596>:     add  %i5, %i5, %g1   0x00575f90 <_ZL27emit_note_insn_var_locationPPvS_+1600>:     ld  [ %i2 + %i5 ], %i1=> 0x00575f94 <_ZL27emit_note_insn_var_locationPPvS_+1604>:     ldd  [ %i0 + %g1 ], %o1   0x00575f98 <_ZL27emit_note_insn_var_locationPPvS_+1608>:     call  0x1835a0 <_Z17gen_rtx_CONST_INT12machine_modex>   0x00575f9c <_ZL27emit_note_insn_var_locationPPvS_+1612>:     clr  %o0End of assembler dump.(gdb) print/x $i0$1 = 0xffffc5b8(gdb) print/x $g1$2 = 0x0The same problem occurred with the previous weekly snapshot, 4.8-20121028, while the one before that (4.8-20121021) was Ok.Configuration parameters:/mnt/scratch/gcc-4.8-20121104/configure --prefix=/mnt/scratch/install48 --with-gmp=/home/mikpe/pkgs/linux-sparc64/gmp-5.0.5 --with-mpfr=/home/mikpe/pkgs/linux-sparc64/mpfr-3.1.1 --with-mpc=/home/mikpe/pkgs/linux-sparc64/mpc-1.0.1 --with-cpu=v8 --enable-multilib --disable-plugin --disable-lto --disable-nls --enable-threads=posix --enable-checking=release --disable-libmudflap --enable-languages=c,c++,fortran,ada",RESOLVED          FIXED      
52684,Eric Botcazou,[4.7 regression] glibc long double math tests fail on sparc 64-bit,"When built with gcc-4.7, several glibc long double mathtests fail on 64-bit sparc.This might be more fallout from the rewrite of the sparcmovcc patterns, but that's just a hunch.",RESOLVED          FIXED      
11556,David S. Miller,ICE in gen_reg_rtx() while compiling 2.6.x Linux kernel,gcc dies with an ice in gen_reg_rtx() while compilingnet/sunrpc/svcauth_unix.c in the 2.6.x Linux kernel.,RESOLVED          FIXED      
6689,David S. Miller,GCC-3.1: ICE / insn does not satisfy its constraints,"Output generated by ""gcc -v -save-temps -O2 -c test.c"":------Reading specs from /usr/local/gcc-3.1/lib/gcc-lib/sparc-sun-solaris2.7/3.1/specsConfigured with: ../gcc-3.1/configure --prefix=/usr/local/gcc-3.1Thread model: posixgcc version 3.1GNU CPP version 3.1 (cpplib) (sparc ELF)ignoring nonexistent directory ""/usr/local/lib/gcc-lib/sparc-sun-solaris2.7/3.1/include""ignoring nonexistent directory ""/usr/local/lib/gcc-lib/sparc-sun-solaris2.7/3.1/../../../../sparc-sun-solaris2.7/include""ignoring nonexistent directory ""/usr/local/gcc-3.1/sparc-sun-solaris2.7/include""#include ""..."" search starts here:#include <...> search starts here: /usr/local/include /usr/local/gcc-3.1/include /usr/local/gcc-3.1/lib/gcc-lib/sparc-sun-solaris2.7/3.1/include /usr/includeEnd of search list. /usr/local/gcc-3.1/lib/gcc-lib/sparc-sun-solaris2.7/3.1/cc1 -fpreprocessed test.i -quiet -dumpbase test.c -O2 -version -o test.sGNU CPP version 3.1 (cpplib) (sparc ELF)GNU C version 3.1 (sparc-sun-solaris2.7)        compiled by GNU C version 3.1.test.c: In function `bar':test.c:30: insn does not satisfy its constraints:(insn 337 62 57 (set (reg:SI 8 %o0)        (reg/f:SI 184)) 51 {*movsi_insn} (nil)    (nil))test.c:30: Internal compiler error in reload_cse_simplify_operands, at reload1.c:8368Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.------Similar results with -O3. No problem with -O. No problem on FreeBSD/i386 platform.See the preprocessed (test.i) source code in ""How-To-Repeat"" section.The sample code is a modified and simplified version of progs/infocomp.c from GNU ncurses-5.2 package, original code Copyright (c) 1998,1999,2000 Free Software Foundation, Inc. I noticed the bug as ""configure && make"" of ncurses-5.2 failed after installing gcc-3.1.Release:gcc (GCC) 3.1Environment:sparc-sun-solaris2.7How-To-Repeat:# 1 ""test.c""# 1 ""<built-in>""# 1 ""<command line>""# 1 ""test.c""typedef struct {    char *a;} X;static X x[2];static int c;int foo(short);int bar(int k, int l) {    X *p;    int y = 0;    switch (k) {    case 0:        for (p = &x[1]; p < x + c; p++)            if (p->a[l] == 1) {                y = x[0].a[l];                break;            }        return y != x[0].a[l];    case 1:        for (p = &x[1]; p < x + c; p++)            if (p->a[l] == 1) {                y = x[0].a[l];                break;            }        return y != x[0].a[l];    }    return 0;}",RESOLVED          FIXED      
6525,David S. Miller,libjava won't build on Red Hat Linux 6.2/sparc,"libjava fails to link one of its binaries (IIRC) because of an unresolved reference to __libc_sigaction.Release:2002-04-29's snapshotEnvironment:Red Hat Linux 6.2 for sparc with all updates to dateHow-To-Repeat:bootstrap (make all is enough, actually) without disabling Java on sparc-linux-gnulibc2.1.",RESOLVED          FIXED      
12496,David S. Miller,"wrong result for __atomic_add(&value, -1) when using -O0 -m64","First of all I don't know wether it is a library or code generation problem, as I don't know wether the inline assembler in atomicity.h *should* produce correct code.With -o0 __atomic_add with -1 as the second argument results in 4294967305. With all other optimization levels it results in the right value.The output of the program below is:bash-2.03$ g++ -m64 atomic_add_bug.cpp bash-2.03$ a.out__atomic_add(10,  1) = 11__atomic_add(10, -1) = 4294967305/* Compile this on Sparc: * ""g++ -o0 -m64 atomic_add_bug.cpp"" * Execute a.out and see that the output for adding -1 is incorrect! * * Repeating the same procedure for -o1, -o2, -o3 shows that those * optimization levels produce expected output. */#include <iostream>using namespace std;#include <bits/atomicity.h>int main(int argc, char** argv){  _Atomic_word inc_result = 10;  _Atomic_word dec_result = 10;  __atomic_add(&inc_result, 1);  __atomic_add(&dec_result, -1);  cout << ""__atomic_add(10,  1) = "" << inc_result << endl;  cout << ""__atomic_add(10, -1) = "" << dec_result << endl;  return 0;}",RESOLVED          FIXED      
6420,David S. Miller,libstdc++ failures on sparc-linux-gnu,"The following libstdc++ tests are failing on sparc-linux:27_io/filebuf_virtuals.cc27_io/streambuf.cc27_io/stringbuf.ccRelease:unknownEnvironment:gcc 3.1 CVS, sparc-linuxHow-To-Repeat:Configure gcc-3.1 CVS on sparc-linux hostRun testsuite",RESOLVED          FIXED      
8017,David S. Miller,[3.3 regression] ICE at cp/search.c:282 building complex_io.o on sparcv9-sun-solaris2.8,"make bootstrap ends with/export/u3/lucier/programs/gcc/gcc-3.3/objdir/gcc/xgcc -shared-libgcc -B/export/u3/lucier/programs/gcc/gcc-3.3/objdir/gcc/ -nostdinc++ -L/export/u3/lucier/programs/gcc/gcc-3.3/objdir/sparcv9-sun-solaris2.8/libstdc++-v3/src -L/export/u3/lucier/programs/gcc/gcc-3.3/objdir/sparcv9-sun-solaris2.8/libstdc++-v3/src/.libs -B/home/c/lucier/local/gcc-test/sparcv9-sun-solaris2.8/bin/ -B/home/c/lucier/local/gcc-test/sparcv9-sun-solaris2.8/lib/ -isystem /home/c/lucier/local/gcc-test/sparcv9-sun-solaris2.8/include -nostdinc++ -I/export/u3/lucier/programs/gcc/gcc-3.3/objdir/sparcv9-sun-solaris2.8/libstdc++-v3/include/sparcv9-sun-solaris2.8 -I/export/u3/lucier/programs/gcc/gcc-3.3/objdir/sparcv9-sun-solaris2.8/libstdc++-v3/include -I../../../../libstdc++-v3/libsupc++ -I../../../../libstdc++-v3/libmath -g -O2 -fno-implicit-templates -Wall -Wno-format -W -Wwrite-strings -Winline -fdiagnostics-show-location=once -ffunction-sections -fdata-sections -g -c ../../../../libstdc++-v3/src/complex_io.cc  -fPIC -DPIC -o .libs/complex_io.oIn file included from /export/u3/lucier/programs/gcc/gcc-3.3/objdir/sparcv9-sun-solaris2.8/libstdc++-v3/include/sstream:367,                 from /export/u3/lucier/programs/gcc/gcc-3.3/objdir/sparcv9-sun-solaris2.8/libstdc++-v3/include/complex:51,                 from ../../../../libstdc++-v3/src/complex_io.cc:30:/export/u3/lucier/programs/gcc/gcc-3.3/objdir/sparcv9-sun-solaris2.8/libstdc++-v3/include/iosfwd: In instantiation of `std::basic_iostream<char, std::char_traits<char> >':/export/u3/lucier/programs/gcc/gcc-3.3/objdir/sparcv9-sun-solaris2.8/libstdc++-v3/include/bits/sstream.tcc:234:   instantiated from `std::basic_stringstream<char, std::char_traits<char>, std::allocator<char> >'/export/u3/lucier/programs/gcc/gcc-3.3/objdir/sparcv9-sun-solaris2.8/libstdc++-v3/include/bits/sstream.tcc:234:   instantiated from here/export/u3/lucier/programs/gcc/gcc-3.3/objdir/sparcv9-sun-solaris2.8/libstdc++-v3/include/iosfwd:64: internal compiler error: in   lookup_base_r, at cp/search.c:282Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.make[4]: *** [complex_io.lo] Error 1Release:gcc version 3.3 20020923 (experimental)Environment:sparcv9-sun-solaris2.8Solaris as/ldbash shellHow-To-Repeat:do a bootstrap",RESOLVED          FIXED      
4328,David S. Miller,"Internal compiler error in gen_reg_rtx, at emit-rtl.c:542","Compiling fivel.c optimized for Ultrasparc generates aninternal compiler errorRelease:3.0.1Environment:System: SunOS scooby 5.8 Generic_108528-10 sun4u sparc SUNW,Sun-Blade-100Architecture: sun4	host: sparc-sun-solaris2.8build: sparc-sun-solaris2.8target: sparc-sun-solaris2.8configured with: ../gcc-3.0.1/configure --prefix=/opt/local --enable-threads --enable-gcjHow-To-Repeat:scooby> gcc -v --save-temps -ansi -c -mcpu=v9 -mtune=ultrasparc -Wa,-xarch=v8plus -O2 -Wall -I../../source fivel.cReading specs from /opt/local/lib/gcc-lib/sparc-sun-solaris2.8/3.0.1/specsConfigured with: ../gcc-3.0.1/configure --prefix=/opt/local --enable-threads --enable-gcjThread model: posixgcc version 3.0.1 /opt/local/lib/gcc-lib/sparc-sun-solaris2.8/3.0.1/cpp0 -lang-c -std=c89 -v -I../../source -D__GNUC__=3 -D__GNUC_MINOR__=0 -D__GNUC_PATCHLEVEL__=1 -D__sparc__ -D__sun__ -D__unix__ -D__svr4__ -D__SVR4 -D__sparc -D__sun -D__unix -Asystem=unix -Asystem=svr4 -D__OPTIMIZE__ -D__STDC_HOSTED__=1 -Wall -D__sparc_v9__ -D__GCC_NEW_VARARGS__ -Acpu=sparc -Amachine=sparc fivel.c fivel.iGNU CPP version 3.0.1 (cpplib) (sparc)#include ""..."" search starts here:#include <...> search starts here: ../../source /usr/local/include /opt/local/lib/gcc-lib/sparc-sun-solaris2.8/3.0.1/include /opt/local/sparc-sun-solaris2.8/include /usr/includeEnd of search list. /opt/local/lib/gcc-lib/sparc-sun-solaris2.8/3.0.1/cc1 -fpreprocessed fivel.i -quiet -dumpbase fivel.c -mcpu=v9 -mtune=ultrasparc -ansi -O2 -Wall -ansi -version -o fivel.sGNU CPP version 3.0.1 (cpplib) (sparc)GNU C version 3.0.1 (sparc-sun-solaris2.8)        compiled by GNU C version 3.0.1.fivel.c: In function `fivel':fivel.c:310: Internal compiler error in gen_reg_rtx, at emit-rtl.c:542Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.",RESOLVED          FIXED      
4367,David S. Miller,Sparc atomicity.h routines can lock up on some OS.,"The sparc version of the routines in atomicity.h can lock upon operating systems which provide strict priority-basedscheduling (e.g. vxWorks, pSOS+, eCOS, RTEMS).  Here's thescenario:1) Low priority task enters __exchange_and_add and sets   the lock.2) While low-priority task is still active in   __exchange_and_add a higher-priority task preempts.3) The higher-priority task enters __exchange_and_add and   enters an infinite loop trying to set the lock.Release:gcc-3.0Environment:Real-time OS environments (e.g. vxWorks, pSOS+, eCOS, RTEMS)",RESOLVED          FIXED      
6082,David S. Miller,memory model wrong for FreeBSD/sparc64,Both GCC 3.1 branch and mainline have the wrong memory model for	FreeBSD/sparc64 (it changed).  Please change from CM_MEDMID to	CM_MEDLOW.  With out this change GCC will not work on FreeBSD/sparc64.Release:3.1 20020325 (prerelease)Environment:System: FreeBSD dragon.nuxi.com 5.0-CURRENT FreeBSD 5.0-CURRENT #238: Fri Feb 22 21:56:02 PST 2002 rootk@dragon.nuxi.com:/FBSD/src/sys/i386/compile/DRAGON i386target: sparc64-portbld-freebsd5.0,RESOLVED          FIXED      
6383,David S. Miller,boehm-gc busted on all sparc64 targets,"boehm-gc doesn't seem to work on any sparc64 targetAt a minimum Solaris and Linux sparc64 are bothbroken currently.Release:gcc-3.1 CVSEnvironment:sparc64-linux-gnuHow-To-Repeat:Build in boehm-gc, run testsuite, boehm-gc testfails.",RESOLVED          FIXED      
6422,David S. Miller,libjava failures on sparc-linux,"The following libjava testsuite failures are occuringon sparc-linux:Array_3.javaRelease:unknownEnvironment:GCC 3.1 CVS - sparc-linuxHow-To-Repeat:Build 3.1 cvs on sparc-linux, run libjava testsuite.",RESOLVED          FIXED      
6719,David S. Miller,"Internal compiler error in change_address_1, at emit-rtl.c:1921","The compiler generates an internal compiler error while trying to	optimize for an ultrasparc architecture. The attached code will	compile OK with any of the 3.0.x versions of gcc.Release:3.1Environment:System: SunOS scooby 5.8 Generic_108528-14 sun4u sparc SUNW,Sun-Blade-100Architecture: sun4	host: sparc-sun-solaris2.8build: sparc-sun-solaris2.8target: sparc-sun-solaris2.8configured with: ../gcc-3.1/configure --prefix=/opt/local --enable-threadsHow-To-Repeat:	scooby> gcc -v -save-temps -ansi -c -O3 -mcpu=ultrasparc -ffast-math -I../../c95/source/ -Wall qheat.cReading specs from /opt/local/lib/gcc-lib/sparc-sun-solaris2.8/3.1/specsConfigured with: ../gcc-3.1/configure --prefix=/opt/local --enable-threadsThread model: posixgcc version 3.1GNU CPP version 3.1 (cpplib) (sparc ELF)ignoring duplicate directory ""/opt/local/include""#include ""..."" search starts here:#include <...> search starts here: ../../c95/source /usr/local/include /opt/local/lib/gcc-lib/sparc-sun-solaris2.8/3.1/include /opt/local/sparc-sun-solaris2.8/include /usr/includeEnd of search list. /opt/local/lib/gcc-lib/sparc-sun-solaris2.8/3.1/cc1 -fpreprocessed qheat.i -quiet -dumpbase qheat.c -mcpu=ultrasparc -ansi -O3 -Wall -ansi -version -ffast-math -o qheat.sGNU CPP version 3.1 (cpplib) (sparc ELF)GNU C version 3.1 (sparc-sun-solaris2.8)        compiled by GNU C version 3.1.qheat.c: In function `GetProbDistr_HighLimit':qheat.c:228: Internal compiler error in change_address_1, at emit-rtl.c:1921Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.See attachments for qheat.i.bz2Unformatted: Subject: Internal compiler error in change_address_1, at emit-rtl.c:1921 Reply-To: p.van-hoof@qub.ac.uk Date: Sat, 18 May 2002 15:49:21 +0100 (WEST) X-send-pr-version: 3.113 X-GNATS-Notify:",RESOLVED          FIXED      
6770,David S. Miller,"""-mcpu=ultrasparc -O3"": Internal compiler error in change_addres","GCC fails with:ssh-rand-helper.c: In function `main':ssh-rand-helper.c:864: Internal compiler error in change_address_1, at emit-rtl.c:1921while compiling ssh-rand-helper.c from OpenSSH 3.2.3p1,ftp://ftp.openbsd.org/pub/OpenBSD/OpenSSH/portable/openssh-3.2.3p1.tar.gzRelease:3.1Environment:System: SunOS s7 5.8 Generic_108528-12 sun4u sparc SUNW,UltraAX-i2Architecture: sun4Sun Netra T1 200, 500MHz UltraSPARC IIe, 1GB, 2x18GBSun Solaris 8 7/01 MU 6host: sparc-sun-solaris2.8build: sparc-sun-solaris2.8target: sparc-sun-solaris2.8configured with: ../gcc-3.1/configure --enable-shared --with-gnu-as --with-gnu-ld --enable-threads --with-cpu=ultrasparc --enable-libgcj --with-system-zlibHow-To-Repeat:gcc -v -save-temps -mcpu=ultrasparc -O3 -g1 -Wall -Wpointer-arith -Wno-uninitialized -I. -I. -I/usr/local/include -DSSHDIR=\""/usr/local/etc\"" -D_PATH_SSH_PROGRAM=\""/usr/local/bin/ssh\"" -D_PATH_SSH_ASKPASS_DEFAULT=\""/usr/local/libexec/ssh-askpass\"" -D_PATH_SFTP_SERVER=\""/usr/local/libexec/sftp-server\"" -D_PATH_SSH_PIDDIR=\""/var/run\"" -D_PATH_PRIVSEP_CHROOT_DIR=\""/var/empty\"" -DSSH_RAND_HELPER=\""/usr/local/libexec/ssh-rand-helper\"" -DHAVE_CONFIG_H -c ssh-rand-helper.cReading specs from /usr/local/lib/gcc-lib/sparc-sun-solaris2.8/3.1/specsConfigured with: ../gcc-3.1/configure --enable-shared --with-gnu-as --with-gnu-ld --enable-threads --with-cpu=ultrasparc --enable-libgcj --with-system-zlibThread model: posixgcc version 3.1 /usr/local/lib/gcc-lib/sparc-sun-solaris2.8/3.1/cpp0 -lang-c -v -I. -I. -I/usr/local/include -D__GNUC__=3 -D__GNUC_MINOR__=1 -D__GNUC_PATCHLEVEL__=0 -Dsparc -Dsun -Dunix -D__svr4__ -D__SVR4 -D__PRAGMA_REDEFINE_EXTNAME -D__sparc__ -D__sun__ -D__unix__ -D__svr4__ -D__SVR4 -D__PRAGMA_REDEFINE_EXTNAME -D__sparc -D__sun -D__unix -Asystem=unix -Asystem=svr4 -D__OPTIMIZE__ -D__STDC_HOSTED__=1 -D__sparcv8 -D__SIZE_TYPE__=unsigned int -D__PTRDIFF_TYPE__=int -D__WCHAR_TYPE__=long int -D__WINT_TYPE__=long int -D__GCC_NEW_VARARGS__ -Acpu=sparc -Amachine=sparc -DSSHDIR=""/usr/local/etc"" -D_PATH_SSH_PROGRAM=""/usr/local/bin/ssh"" -D_PATH_SSH_ASKPASS_DEFAULT=""/usr/local/libexec/ssh-askpass"" -D_PATH_SFTP_SERVER=""/usr/local/libexec/sftp-server"" -D_PATH_SSH_PIDDIR=""/var/run"" -D_PATH_PRIVSEP_CHROOT_DIR=""/var/empty"" -DSSH_RAND_HELPER=""/usr/local/libexec/ssh-rand-helper"" -DHAVE_CONFIG_H ssh-rand-helper.c -Wall -Wpointer-arith -Wno-uninitialized ssh-rand-helper.iGNU CPP version 3.1 (cpplib) (sparc ELF)ignoring nonexistent directory ""NONE/include""ignoring nonexistent directory ""/usr/local/lib/gcc-lib/../../sparc-sun-solaris2.8/include""ignoring duplicate directory "".""cpp0: warning: changing search order for system directory ""/usr/local/include""cpp0: warning:   as it has already been specified as a non-system directoryignoring duplicate directory ""/usr/local/include""#include ""..."" search starts here:#include <...> search starts here: . /usr/local/include /usr/local/lib/gcc-lib/sparc-sun-solaris2.8/3.1/include /usr/includeEnd of search list. /usr/local/lib/gcc-lib/sparc-sun-solaris2.8/3.1/cc1 -fpreprocessed ssh-rand-helper.i -quiet -dumpbase ssh-rand-helper.c -mcpu=ultrasparc -g1 -O3 -Wall -Wpointer-arith -Wno-uninitialized -version -o ssh-rand-helper.sGNU CPP version 3.1 (cpplib) (sparc ELF)GNU C version 3.1 (sparc-sun-solaris2.8)        compiled by GNU C version 3.1.ssh-rand-helper.c: In function `prng_check_seedfile':ssh-rand-helper.c:535: warning: int format, uid_t arg (arg 3)ssh-rand-helper.c: In function `prng_write_seedfile':ssh-rand-helper.c:552: warning: int format, uid_t arg (arg 2)ssh-rand-helper.c: In function `prng_read_seedfile':ssh-rand-helper.c:590: warning: int format, uid_t arg (arg 2)ssh-rand-helper.c: In function `main':ssh-rand-helper.c:864: Internal compiler error in change_address_1, at emit-rtl.c:1921Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.",RESOLVED          FIXED      
6836,David S. Miller,crtfastmath.o is not built as 64-bit with sparc-sun-solaris2.8 32-bit and 64-bit multilib,"When I first configured gcc-3.1 for this machine, the gcc-3.1/lib/gcc-lib/sparc-sun-solaris2.8/3.1/sparcv9/crtfastmath.o file was not installed.  I investigated and discovered that it was not being built as a 64-bit object when building gcc as a 32-bit program (but capable of building 64-bit and 32-bit applications).It looks like a Makefile issue.  See below.Release:gcc-3.1Environment:netra-map1:~$ uname -a SunOS netra-map1 5.8 Generic_108528-09 sun4u sparc SUNW,UltraAX-i2netra-map1:~$ gcc -vReading specs from /opt/gcc-3.1/lib/gcc-lib/sparc-sun-solaris2.8/3.1/specsConfigured with: ../gcc-3.1/configure --with-dwarf2 --enable-languages=c,c++ --enable-threads=single --disable-shared --with-gnu-as --with-gnu-ld --with-as=/opt/bin/as --with-ld=/opt/bin/ld --prefix=/opt/gcc-3.1Thread model: singlegcc version 3.1How-To-Repeat:Configure and build gcc-3.1 out of the box...",RESOLVED          FIXED      
6841,David S. Miller,ICE on ssh-rand-helper.c from openssh-3.2.3p1 with -mcpu=ultrasparc -O3,"GCC 3.1 on SPARC gives an internal compiler error compiling ssh-random-helper.c from openssh-3.2.3p1 with -mcpu=ultrasparc and -O3.Using -mcpu=v9 or -O2 or less works fine.The report has been generated on a sun4m but the problem was originally seen on a sun4u.$ gcc -fomit-frame-pointer -Wall -Wpointer-arith -Wno-uninitialized -I. -I../openssl-0.9.6d/include -DSSHDIR=\""/usr/local/etc\"" -D_PATH_SSH_PROGRAM=\""/usr/local/bin/ssh\"" -D_PATH_SSH_ASKPASS_DEFAULT=\""/usr/local/libexec/ssh-askpass\"" -D_PATH_SFTP_SERVER=\""/usr/local/libexec/sftp-server\"" -D_PATH_SSH_PIDDIR=\""/var/run\"" -D_PATH_PRIVSEP_CHROOT_DIR=\""/var/empty\"" -DSSH_RAND_HELPER=\""/usr/local/libexec/ssh-rand-helper\"" -DHAVE_CONFIG_H -c -mcpu=ultrasparc -v -save-temps ssh-rand-helper.c -O3 -WallReading specs from /usr/local/lib/gcc-lib/sparc-sun-solaris2.8/3.1/specsConfigured with: ../gcc-3.1/configure --with-as=/usr/local/bin/as --with-gnu-as --with-ld=/usr/local/bin/ld --with-gnu-ld --disable-multilibThread model: posixgcc version 3.1GNU CPP version 3.1 (cpplib) (sparc ELF)ignoring nonexistent directory ""NONE/include""#include ""..."" search starts here:#include <...> search starts here: . ../openssl-0.9.6d/include /usr/local/include /usr/local/lib/gcc-lib/sparc-sun-solaris2.8/3.1/include /usr/local/sparc-sun-solaris2.8/include /usr/includeEnd of search list. /usr/local/lib/gcc-lib/sparc-sun-solaris2.8/3.1/cc1 -fpreprocessed ssh-rand-helper.i -quiet -dumpbase ssh-rand-helper.c -mcpu=ultrasparc -O3 -Wall -Wpointer-arith -Wno-uninitialized -Wall -version -fomit-frame-pointer -o ssh-rand-helper.sGNU CPP version 3.1 (cpplib) (sparc ELF)GNU C version 3.1 (sparc-sun-solaris2.8)        compiled by GNU C version 3.1.ssh-rand-helper.c: In function `prng_check_seedfile':ssh-rand-helper.c:535: warning: int format, uid_t arg (arg 3)ssh-rand-helper.c: In function `prng_write_seedfile':ssh-rand-helper.c:552: warning: int format, uid_t arg (arg 2)ssh-rand-helper.c: In function `prng_read_seedfile':ssh-rand-helper.c:590: warning: int format, uid_t arg (arg 2)ssh-rand-helper.c: In function `main':ssh-rand-helper.c:864: Internal compiler error in change_address_1, at emit-rtl.c:1921Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.Release:3.1Environment:System: SunOS platypus 5.8 Generic_108528-14 sun4m sparc SUNW,SPARCstation-5Architecture: sun4	host: sparc-sun-solaris2.8build: sparc-sun-solaris2.8target: sparc-sun-solaris2.8configured with: ../gcc-3.1/configure --with-as=/usr/local/bin/as --with-gnu-as --with-ld=/usr/local/bin/ld --with-gnu-ld --disable-multilib",RESOLVED          FIXED      
7117,David S. Miller,long double miscompilation on SparcV9,"The following rather trivial code is miscompiled on64bit Sparc when using -m64:-----------------------#include <stdio.h>int main () {  long double some_variable  = 1.;  z = z-z/2;  printf(""%f\n"", (double)z);  };-----------------------It should of course print 0.500000, but prints 0.000000:examples/step-11> gcc x.c ; ./a.out0.500000examples/step-11> gcc -m64 x.c ; ./a.out 0.000000Regards  WolfgangRelease:gcc 3.1.0Environment:solaris 2.9, sparcv9How-To-Repeat:See above",RESOLVED          FIXED      
7118,David S. Miller,Compiler generates code that cannot be executed.,"The following code compiles without error or warning,and generates a program that will not run on my Sun Blade.  It crashes with a SEGV on first instruction.The cause is obvious.  In GDB, set a break on main.  Beforeexecuting any instructions, examine the values for a, b,c, d, e, and f.A single step in the debugger causes the SEGV. Luckily I was able to find the problem with only an hour's work.  With a more complex program, I might have lost days.intmain(     int argc,     char* argv[]     ){  int a = 5;  int b = 6;  int c = 7;  int array[1000000];  int d = 8;  int e = 9;  int f;  f = a + b + c + d + e;  array[1] = f;  return( 0 );}Release:2.9-gnupro-99r1How-To-Repeat:Compile the above code with -g.  No header files are required.",RESOLVED          FIXED      
7335,David S. Miller,Sparc: ICE in verify_wide_reg (flow.c:557) with long double and optimization,"gcc ICEs upon the following (simple, common) code when compiling with -O1 on sparc machines:-------------------------------------------------double* copy(long double* first, long double* last, double* result){  int n;  for (n = last - first; n > 0; --n) {    *result = *first;    ++first;    ++result;  }  return result;}void f(){  long double *p1, *p2;  double *p3;  copy (p1, p2, p3);  p3 = copy (p1, p2, p3);};----------------------------------------------------deal.II/base> ~/bin/sparc-sun-solaris2.9/bin/gcc -vReading specs from /home/atlas2/wolf/bin/sparc-sun-solaris2.9/bin/../lib/gcc-lib/sparc-sun-solaris2.9/3.1.1/specsConfigured with: ../gcc-20020624/configure --prefix=/home/people/wolf/bin/sparc-sun-solaris2.9 --enable-languages=c,c++Thread model: posixgcc version 3.1.1 20020624 (prerelease)deal.II/base> ~/bin/sparc-sun-solaris2.9/bin/gcc -O1 -c t.ct.c: In function `copy':t.c:10: Internal compiler error in verify_wide_reg, at flow.c:557Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.Release:gcc3.1, gcc3.1.1 pre of 20020624Environment:sparc-sun-solaris2.8/9",RESOLVED          FIXED      
7842,David S. Miller,[REGRESSION] sparc code gen bug,"The tiny g() function in the attached testcase is miscompiled by gcc 3.2 (and 3.1, 3.0.4) with -O2 -mcpu=ultrasparc. The testcase returns nonzero if the bug is present.This is a regression - the bug seems not to be present in gcc 2.95.3.The code generated by 3.0.4 contains the instruction    and %reg, -1, %regwhich is a no-op, but from inspection it looks like the compiler really wanted to AND with 0xffffffff. Gcc 3.{1,2} do not have this error but still generate wrong code.The bug is especially evil because in certain contexts, itmay appear to work when single-stepping with a debugger. This depends on the register assignments, since the high 32 bits of local/input registers are trashed on cpu traps.Release:gcc-3.2Environment:Solaris 8 on SPARC",RESOLVED          FIXED      
69532,Tom de Vries,"FAIL: gcc.target/arm/{vect-,}fmaxmin.c execution test on armv7","The testcase contains an effective target test:.../* { dg-require-effective-target arm_v8_neon_ok } */...But that test just checks compilation:...# Return 1 if this is an ARM target supporting -mfpu=neon-fp-armv8# -mfloat-abi=softfp or equivalent options.  Some multilibs may be# incompatible with these options.  Also set et_arm_v8_neon_flags to the# best options to add.proc check_effective_target_arm_v8_neon_ok_nocache { } {    global et_arm_v8_neon_flags    set et_arm_v8_neon_flags """"    if { [check_effective_target_arm32] } {	foreach flags {"""" ""-mfloat-abi=softfp"" ""-mfpu=neon-fp-armv8"" ""-mfpu=neon-fp-armv8 -mfloat-abi=softfp""} {	    if { [check_no_compiler_messages_nocache arm_v8_neon_ok object {		#if __ARM_ARCH < 8		#error not armv8 or later		#endif		#include ""arm_neon.h""		void		foo ()		{		  __asm__ volatile (""vrintn.f32 q0, q0"");		}	    } ""$flags -march=armv8-a""] } {		set et_arm_v8_neon_flags $flags		return 1	    }	}    }    return 0}...Compiling goes fine, but execution fails:...Program received signal SIGILL, Illegal instruction.0x000085b8 in test_fmaxf (r=r@entry=0xbefff3a0, a=a@entry=0xbefff380, b=b@entry=0xbefff390)    at src/gcc/testsuite/gcc.target/arm/fmaxmin.x:2222	DEF_MAXMIN (float, fmaxf)(gdb) display/i $pc1: x/i $pc=> 0x85b8 <test_fmaxf+8>:	vmaxnm.f32	q8, q8, q9...",RESOLVED          FIXED      
21854,David Ung,[4.1 Regression] irix6.5 bootstrap fails due to warning in mips.c,"mips-sgi-irix6.5 bootstrap of 4.1 fails in stage2 when compiling config/mips.ccc1: warnings being treated as errors/disk4/billingd/src/gcc/gcc/config/mips/mips.c:4176: warning: no previous prototype for 'mips_use_ins_ext_p'This function was introduced by2005-05-26  David Ung  <davidu@mips.com>        * config/mips/mips.c (mips_use_ins_ext_p): New helper function        that determines whether the MIPS32/64 R2 ext/ins should be used. Declaring the function as static in mips.c doesn't work, as then we get a warning about unused functions.  The patch below enables bootstrap to continue, but I don't think it is correct.--- mips.c      27 May 2005 23:08:31 -0000      1.507+++ mips.c      1 Jun 2005 01:07:11 -0000@@ -369,6 +369,7 @@ static rtx mips_expand_builtin_compare (enum mips_builtin_type,                                        enum insn_code, enum mips_fp_condition,                                        rtx, tree);+bool mips_use_ins_ext_p (rtx op, rtx size, rtx position);  /* Structure to be filled in by compute_frame_size with register    save masks, and offsets for the current function.  */",RESOLVED          FIXED      
41012,davidxl,Missing inlining after indirect call promotion,"Compiling the following test case with FDO, virtual call base->Foo(id) is promoted/specialized in valueProf transformation. However the resulting direct call is not inlined due to type mismatch.The problem is that the  2nd ARG_TYPE associated with the indirect call is a record type, but the actual argument type is a reference/pointer type -- this is required by C++ ABI for passing record typed object with nontrival constructor. During gimple-lowering, the callsite is marked as cannot_be_inlined and this attribute is copied to the promoted direct callsite.// ========class DocId { public: DocId() { } DocId(const DocId &other) {  }};class Base { public: virtual void Foo(DocId id) { }};class Super: public Base { public: void Foo(DocId id) { } void Bar(Base *base, DocId id);};void Super::Bar(Base *base, DocId id) { Super::Foo(id); // direct call is inlined base->Foo(id); // indirect call is marked do not inline}int main(void){ Base bah; Super baz; DocId gid; baz.Bar(&bah, gid); return 0;}",RESOLVED          FIXED      
39548,davidxl,gcc ICE compiling code with option -fprofile-generate,"The tot compile ICEs when compiling the following code with these options. -Wno-error -fno-exceptions -fno-tree-vrp -O2 -fprofile-generate=.copyprop.C: In member function 'void foo_14::hmmmmh_29(blah_46)':copyprop.C:1051: error: definition in block 29 does not dominate use in block 30for SSA_NAME: D.43954_350 in statement:prephitmp.3431_374 = PHI <pretmp.3430_375(4), D.43954_350(30), D.32226_44(31)>PHI argumentD.43954_350for PHI nodeprephitmp.3431_374 = PHI <pretmp.3430_375(4), D.43954_350(30), D.32226_44(31)>copyprop.C:1051: internal compiler error: verify_ssa failedPlease submit a full bug report,with preprocessed source if appropriate.See <http://gcc.gnu.org/bugs.html> for instructions.The problem is that the legality check done in copy-prop simulation Iphi node visiting) stage and the actual substitute and folding stage is not consistent -- the former is more relaxed. For some phi, the one of the phi argument is propagated to LHS and lead to cfg's virtual simplification (edge pruning) -- the  simplified CFG leads to RHS ARG propagation of more PHI nodes.  In the final stage, the copy-prop that leads to the simplified CFG may be found legal and abandoned -- the end result is inconsistent data flow (SSA) and CFG.",RESOLVED          FIXED      
19910,Daniel Berlin,[4.2 regression] ICE with -ftree-loop-linear,"The following gets an ICE with -O3 -ftree-loop-linear:int x[6][5][4];int y[6][5][4];void initx(void){  int a,b,c;  int index = 0;  for(a = 5; a >=2; a--)    for (b = (a - 1); b >=1; b--)      for (c = (b - 1); c >=0; c--)        x[a][b][c] = index++;}void inity(void){  int d,e,f;  int index = 0;  for(d = 5; d >=2; d--)    for (e = (d - 1); e >=1; e--)      for (f = (e - 1); f >=0; f--)        y[d][e][f] = index++;}void foo() {  initx();  inity();}",RESOLVED          FIXED      
28778,Daniel Berlin,[4.1 Regression] alias bug with cast and call clobbered,"mrs $ cat /tmp/t2.cctypedef long GLint;void aglChoosePixelFormat(const GLint *);void find(const int *alistp) {  const int *blist;  int list[32];  if (alistp)    blist = alistp;  else {    list[3] = 42;       /* this store disappears with -fstrict-aliasing */    blist = list;  }  aglChoosePixelFormat((GLint*)blist);}mrs $ ./xgcc -B./ -S -O1 /tmp/t2.cc -fno-strict-aliasing && grep 42 t2.s        li r0,42mrs $ ./xgcc -B./ -S -O1 /tmp/t2.cc -fstrict-aliasing && grep 42 t2.smrs $ The store cannot be removed, as the converted pointer can be used inside the aglChoosePixelFormat function to access the value.  Since the optimizer can't see that it isn't used, the optimizer must assume it can as the function isn't marked pure.  If it had been, then the optimization would be ok.t2.cc.035t.dce1 is the first pass that doesn't have the store, t2.cc.034t.fre has the store.This worked in 3.3, but not 4.0.1.  This doesn't work in gcc version 4.2.0 20060815 (experimental) on powerpc-apple-darwin9.0.0d1, nor on i686-apple-darwin8.",RESOLVED          FIXED      
13761,Daniel Berlin,[tree-ssa] component refs to the same struct should not alias,"struct s {   int s;  int s2;  char p;  int arr[10];};int foo0 (struct s * f){  f->s = 1;  f->s2 = 2;  if (f->s != 1)    link_error ();}The ""if"" is not optimized because, presumably, the 2 stores are not considerednot to alias.The .optimized dump:foo0 (f){<bb 0>:  f->s = 1;  f->s2 = 2;  if (f->s != 1) goto <L0>; else goto <L1>;<L0>:;  link_error ();<L1>:;  return;}",RESOLVED          FIXED      
30610,Daniel Berlin,huge memory consumption with -O3,"Happen with gcc43 snapshot 20070105 (experimental).gcc configured with: ./..//gcc-4.3-20070105/configure --disable-nls --with-system-zlib --with-libiconv-prefix=/usr/local --with-gmp=/usr/local --program-suffix=43 --libdir=/usr/local/lib/gcc-4.3.0 --with-gxx-include-dir=/usr/local/lib/gcc-4.3.0/include/c++/ --infodir=/usr/local/info/gcc43 --disable-libgcj --prefix=/usr/local x86_64-portbld-freebsd6.2$ time gcc43 -O3 -c f5.c -Walluser    8m0.834smax memory usage 1321 MB.It takes too long time and huge memory to compile, compared to gcc4.2 or -O2:$ time gcc42 -O3 -c f5.cuser    0m0.575s$ time gcc43 -O2 -c f5.c -finline-functions -funswitch-loops -fgcse-after-reload                 user    0m0.602sAnd the memory usage is less than 10 MB.",RESOLVED          FIXED      
29415,Daniel Berlin,[4.2 Regression] bad code reordering around inline asm block,"Using gcc 4.2 snapshot 20061007 on x86, the compiler is miscompiling glibc 2.5(see http://sourceware.org/bugzilla/show_bug.cgi?id=3328)What is happening is that a test of a variable after an inline asm block is moved around so that the load of the struct member is moved above the asm block even though it should not do that.The miscompilation only seems to appear in that particular constellation, all tries to reproduce the problem using a simpler hand-made test case have failed. So I've attached the whole preprocessed source file.Compiler simply called with ""gcc -O2 -o test.o -c pthread_mutex_lock.c"".The problem appears in the function __pthread_mutex_lock. There's a switch statement with some common stuff in the different cases which the compiler seems to optimize. The case in question (the most common one):switch (__builtin_expect (mutex->__data.__kind, PTHREAD_MUTEX_TIMED_NP)) {...    case PTHREAD_MUTEX_TIMED_NP:    simple:      /* Normal mutex.  */      LLL_MUTEX_LOCK (mutex->__data.__lock);      assert (mutex->__data.__owner == 0);      break;...}The LLL_MUTEX_LOCK is a macro with an inline assembler statement (cmpxchg and a conditional jump to another section) that is annotated to tell the compiler that it clobbers memory, so gcc should never move loads around the inline asm block. But in this case the load from mutex->__data.__owner (for the assertion) is executed above LLL_MUTEX_LOCK and the register content is tested below LLL_MUTEX_LOCK. The content will have changed, but the old value in the register is wrong and the assertion triggers.The broken generated code looks like (note that the jump to <_L_mutex_lock_78> is just an out-of-line call to another function that can wait for some time, modify the mutex->__data.__owner = 0x8(%ebx) here, and then jump back):loading mutex->__data.__owner (into %edx):  2f:   8b 53 08                mov    0x8(%ebx),%edxlll_mutex_lock:  32:   31 c0                   xor    %eax,%eax  34:   b9 01 00 00 00          mov    $0x1,%ecx  39:   f0 0f b1 0b             lock cmpxchg %ecx,(%ebx)  3d:   0f 85 f3 05 00 00       jne    636 <_L_mutex_lock_78>testing mutex->__data.__owner (%edx from above!):  43:   85 d2                   test   %edx,%edx  45:   0f 85 7f 04 00 00       jne    4ca <__pthread_mutex_lock+0x4ca>                                        -> __assert_failIn constrast, gcc 4.1.1 generated the following correct piece of code:acquiring mutex (lll_mutex_lock):  3d:   31 c0                   xor    %eax,%eax  3f:   b9 01 00 00 00          mov    $0x1,%ecx  44:   f0 0f b1 0b             lock cmpxchg %ecx,(%ebx)  48:   0f 85 ed 05 00 00       jne    63b <_L_mutex_lock_86>loading and testing owner:  4e:   8b 43 08                mov    0x8(%ebx),%eax  51:   85 c0                   test   %eax,%eax  53:   0f 85 71 05 00 00       jne    5ca <__pthread_mutex_lock+0x5ca>                                        -> __assert_fail",RESOLVED          FIXED      
33340,Daniel Berlin,[4.3 Regression] ICE: SSA corruption   with -O (FRE),"> cat bug.iivoid* operator new(unsigned long, void* __p) { }struct auto_ptr {        int* p;        ~auto_ptr() { delete p; }};typedef void* T;struct vector {        void push_back(const T& __x) {                ::new(0) T(__x);                insert(__x);        }        void insert(const T& __x);} v;void g();void f() {        auto_ptr ap;        if (ap.p) {                ap.p = new int();        }        g();        int* tmp = ap.p;        ap.p = 0;        v.push_back(tmp);}> g++ -O bug.iiUnable to coalesce ssa_names 13 and 16 which are marked as MUST COALESCE.ap$p_13(ab) and  ap$p_16(ab)bug.ii: In function ‘void f()’:bug.ii:18: internal compiler error: SSA corruptionTested with SVN revision 128251 on linux_x86_64.",RESOLVED          FIXED      
31797,Daniel Berlin,[4.2/4.3 Regression] infinite loop in tree-ssa-pre or ICE,"When building RTEMS with gcc-4.2.0-20070430, gcc races on one file of the RTEMS sources. It consumes up all available CPU time, gradually (very slowly) seems consume all memory and doesn't seem to finish:  PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND                                                                                     6176 joel      18   0 1614m 937m  604 D    2 92.9 491:53.20 cc1                  # ps ax | grep cc1 6176 ?        D    491:55 /opt/rtems-4.8/libexec/gcc/powerpc-rtems4.8/4.2.0/cc1 -quiet -imultilib m7400 -isystem ../../../../../.././mvme5500/lib/include -MD network_rel-GT64260eth.d -MF .deps/network_rel-GT64260eth.Tpo -MP -MT network_rel-GT64260eth.o -MQ network_rel-GT64260eth.o -DHAVE_CONFIG_H -D_KERNEL -Dmpc7455 -isystem ../../../../../.././mvme5500/lib/include ../../../../../../../../current/c/src/lib/libbsp/powerpc/mvme5500/network/GT64260eth.c -quiet -dumpbase GT64260eth.c -mcpu=7450 -mno-altivec -mabi=altivec -mvrsave=no -mmultiple -mstring -mstrict-align -ansi -auxbase-strip network_rel-GT64260eth.o -g -O2 -Wall -ansi -fasm -o -This issue is reproduceable on i386-FC5 and FC6.I would try to attach the *.i, but bugzilla refuses to let to do so, ATM. The same piece of code compiles fine with gcc-4.1.2 and older, so I am inclined to call this to be a regression.",RESOLVED          FIXED      
30089,Daniel Berlin,[4.3 Regression] Compiling FreeFem3d uses unreasonable amount of time and memory,"Two testcases will follow, build with -O2.",RESOLVED          FIXED      
28544,Daniel Berlin,"[4.2 regression] ICE in add_virtual_operand, at tree-ssa-operands.c:1309","I get the following gcc 4.2 regression:11031:tbm@deprecation: ~] /usr/lib/gcc-snapshot/bin/g++ -c -O2 mysql-sp_cache.ccmysql-sp_cache.cc: In function 'void sp_cache_invalidate()':mysql-sp_cache.cc:20: internal compiler error: in add_virtual_operand, at tree-ssa-operands.c:1309Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.11032:tbm@deprecation: ~] /usr/lib/gcc-snapshot/bin/g++ -c -O mysql-sp_cache.cc11033:tbm@deprecation: ~] g++-4.1 -c -O2 mysql-sp_cache.cc11034:tbm@deprecation: ~] g++-4.0 -c -O2 mysql-sp_cache.cc11035:tbm@deprecation: ~] cat mysql-sp_cache.ccextern ""C""{  extern ""C""  {    typedef unsigned long int ulong;  }  typedef struct  {    volatile int counter;  }  atomic_t;  static __inline__ void atomic_inc (atomic_t * v)  {    __asm__ __volatile__ (""lock ; ""                          ""incl %0"":""=m"" (v->counter):""m"" (v->counter));  }}static ulong volatile Cversion = 0;voidsp_cache_invalidate (){  atomic_inc ((atomic_t *) & Cversion);}",RESOLVED          FIXED      
14784,Daniel Berlin,[Tree-ssa] alias analysis deficiency,"Tree-ssa alias analysis does not take information about structurefields into account.  Consequently head->using_obstack and bitmap_freeaccesses in the following testcase are believed to alias, which preventsfurther optimizations (load motion, unswitching) on tree level.typedef struct bitmap_element_def{  unsigned int indx;} bitmap_element;typedef struct bitmap_head_def {  bitmap_element *first;  int using_obstack;} bitmap_head;typedef struct bitmap_head_def *bitmap;bitmap_element *bitmap_free;void foo (bitmap head, bitmap_element *elt){  while (1)    {      if (head->using_obstack)        bitmap_free = elt;    }}",RESOLVED          FIXED      
29156,Daniel Berlin,[4.2 Regression] Misscompilation with structs due to  new struct alias,"The testcase below gets misscompiled at -O2.The alias info looks this way:Dereferenced pointersxa, UID 1527, struct test1 *, symbol memory tag: SMT.4, default def: xa_4xb, UID 1528, struct test2 *, symbol memory tag: SMT.5, default def: xb_3Symbol memory tagsSMT.4, UID 1547, struct test1, is addressable, is global, call clobbered, may aliases: { global }SMT.5, UID 1548, struct test2, is addressable, is global, call clobbered, may aliases: { global }The alias sets for SMT.4 and SMT.5 intersect, so everything looks OK here.  However, access_can_touch_variable (correctly) determines that the dereferences of xa and xb cannot touch ""global""; hence we create the following virual operands:  #   SMT.5_8 = V_MAY_DEF <SMT.5_7>;  xb_3->sub.a = 1;  #   SMT.4_10 = V_MAY_DEF <SMT.4_9>;  xa_4->a = 8;  #   VUSE <SMT.5_8>;  D.1531_5 = xb_3->sub.a;The accesses to xa and xb appear to be independent, which leads to a misscompilation.struct test1{  int a;  int b;};struct test2{  float d;  struct test1 sub;};int global;int bla(struct test1 *xa, struct test2 *xb){  global = 1;  xb->sub.a = 1;  xa->a = 8;  return xb->sub.a;}int main(void){  struct test2 pom;  if (bla (&pom.sub, &pom) != 8)    abort ();  return 0;}",RESOLVED          FIXED      
20256,Daniel Berlin,Perfect nest transformation not conservative enough,"This is a small extract from a benchmark. It shows that -O1 -ftree-loop-linear generates a coupleof empty loops, and incorrect behavior. /* main.c */#include <stdio.h>extern void init();double mid_wts[8][35];double  in_pats[1][35];double  do_mid_forward(int patt){double  sum;int     neurode, i;for (neurode=0;neurode<8; neurode++){        sum = 0.0;        for (i=0; i<35; i++)        {                 sum += mid_wts[neurode][i]*in_pats[patt][i];        }        sum = 1.0/(1.0+sum);}return sum;}double value;main(){  init();  printf("" %e\n"", do_mid_forward (0));}/* init.c */extern double mid_wts[8][35];extern double  in_pats[1][35];double value;void init(){int i;int neurode;value=(double)1.0 - (double) 0.5;for (neurode = 0; neurode<8; neurode++)   for (i=0; i<35; i++)      mid_wts[neurode][i] = value;for (i=0; i<35; i++)   in_pats[0][i] = 1.234;}% cc -c -O0 init.c% cc -O1 -ftree-loop-linear main.c init.o% ./a.out -2.384238e+11Assembly file for ppc-darwin shows a couple of do-nothing empty loops. Remove -ftree-loop-linear and program behaves correctly.",RESOLVED          FIXED      
20458,Daniel Berlin,[4.1 regression] structure aliasing causes wrong code,$ g++ bug.cc -O2$ ./a.out Segmentation fault$ g++ bug.cc -O2 -fno-tree-salias$ ./a.out $ testcase:------------------------------------------------------------------------------#include <sstream>void foo (){  std::stringbuf b;}int main(){  foo ();  return 0;}------------------------------------------------------------------------------,RESOLVED          FIXED      
16700,Daniel Berlin,[bugzilla] weird HTML generated for attachments with a bug number in their filenames,"Check out this bizarro HTML (from bug 16684):<pre id=""comment_text_4""><a href=""attachment.cgi?id=6819&amp;action=view""class="""" title=""<a href=""show_bug.cgi?id=16684"" title=""NEW - [3.4/3.5Regression] GCC should not warn about redundant redeclarations ofbuilt-ins"">pr16684</a>.diff"">Created an attachment (id=6819)</a></pre>I think what's happened is the ""turn anything that looks like a bug number intoa hyperlink"" magic is firing on the name of the attached file, thus producingmangled HTML.",RESOLVED          FIXED      
19624,Daniel Berlin,PRE pessimizes ivopts,"The attached testcase is pessimized by PRE.  Be sure to get tree-level completeloop unrolling enabled, f.i. with -O2 -funroll-loops with current mainline.With PRE, a lot less computations are hoisted out of the inner loop.  Note thisis not a regression to 3.4, which is not able to decompose Loc<Dim> appropriatelyor avoid instantiating temporary objects of this type.",RESOLVED          FIXED      
19124,Daniel Berlin,[4.0 regression]  gcc generates incorrect dwarf2 debug info,"With gcc 4.0 checked out at Tue Dec 21 23:14:35 UTC 2004, I got[hjl@gnu-10 thread]$ gdb gdbGNU gdb 6.3.0.90_2004-12-14-cvsCopyright 2004 Free Software Foundation, Inc.GDB is free software, covered by the GNU General Public License, and you arewelcome to change it and/or distribute copies of it under certain conditions.Type ""show copying"" to see the conditions.There is absolutely no warranty for GDB.  Type ""show warranty"" for details.This GDB was configured as ""i686-pc-linux-gnu""...Using host libthread_db library""/lib/tls/libthread_db.so.1"".Setting up the environment for debugging gdb.Breakpoint 1 at 0x8084ce3: file /net/gnu/export/gnu/src/gdb-6.3/gdb/gdb/utils.c,line 849.Breakpoint 2 at 0x80af162: file/net/gnu/export/gnu/src/gdb-6.3/gdb/gdb/cli/cli-cmds.c, line 193.(top-gdb) r /export/build/gnu/gcc/build-i686-linux/gcc/cc1Starting program: /usr/local/bin/gdb /export/build/gnu/gcc/build-i686-linux/gcc/cc1GNU gdb 6.3.0.90_2004-12-14-cvsCopyright 2004 Free Software Foundation, Inc.GDB is free software, covered by the GNU General Public License, and you arewelcome to change it and/or distribute copies of it under certain conditions.Type ""show copying"" to see the conditions.There is absolutely no warranty for GDB.  Type ""show warranty"" for details.This GDB was configured as ""i686-pc-linux-gnu""...Using host libthread_db library""/lib/tls/libthread_db.so.1"".Setting up the environment for debugging gdb.Breakpoint 1 at 0x812d410: file/net/gnu/export/gnu/src/gcc/gcc/gcc/diagnostic.c, line 496.Function ""info_command"" not defined.(top-gdb) b  tls_symbolic_operandBreakpoint 2 at 0x826c1d0: file insn-preds.c, line 471.(top-gdb) r -fpreprocessed foo.i -quiet -dumpbase foo.i -mtune=pentiumpro-auxbase foo -O -version -o foo.sStarting program: /export/build/gnu/gcc/build-i686-linux/gcc/cc1 -fpreprocessedfoo.i -quiet -dumpbase foo.i -mtune=pentiumpro -auxbase foo -O -version -ofoo.sDetaching after fork from child process 6975.Detaching after fork from child process 6976.GNU C version 4.0.0 20041221 (experimental) (i686-pc-linux-gnu)        compiled by GNU C version 4.0.0 20041221 (experimental).GGC heuristics: --param ggc-min-expand=97 --param ggc-min-heapsize=127207Program received signal SIGSEGV, Segmentation fault.dwarf_expr_frame_base (baton=0xbfffecf0, start=0xbfffec90, length=0xbfffec94)    at /net/gnu/export/gnu/src/gdb-6.3/gdb/gdb/dwarf2loc.c:171171           *length = symbaton->size;(top-gdb) p symbaton$1 = (struct dwarf2_locexpr_baton *) 0x0[hjl@gnu-10 gcc]$ readelf -w insn-preds.o > /dev/nullreadelf: Error: Not enough comp units for .debug_loc section[hjl@gnu-10 gcc]$ readelf -w stage1/insn-preds.o > /dev/nullIt seems that gcc 4.0 generates incorrect .debug_loc section.",RESOLVED          FIXED      
12720,Daniel Berlin,Some suggestions for 'enter_bug.cgi',"This page ""Enter a Bug -  http://gcc.gnu.org/bugzilla/enter_bug.cgi"" could beimproved, IMO. (I'm a one-bug-in-a-year reporter)1.The link to the generic bug-page""http://gcc.gnu.org/bugzilla/bugwritinghelp.html"" is nice but an additional linkto http://gcc.gnu.org/bugs.html#report would be better.2.Host,Target,Build triplet should be linked to an explanation with one or twoexamples.What do you think?",RESOLVED          FIXED      
18792,Daniel Berlin,ICE with -O1 -ftree-loop-linear on small test case,"Following small test case, extraced from a SPEC2004 benchmark ICEs when compiled with gcc-4.0and -O1 -ftree-loop-linear/* test */void put_atoms_in_triclinic_unitcell(float x[][3]){  int i=0,d;      while (x[i][3] < 0)           for (d=0; d<=3; d++)              x[i][d] = 0;      while (x[i][3] >= 0)           for (d=0; d<=3; d++)              x[i][d] = 0;}% gcc-4.0 -c bad.c -O1 -ftree-loop-linearbad.c: In function 'put_atoms_in_triclinic_unitcell':bad.c:2: internal compiler error: in build_classic_dist_vector, at tree-data-ref.c:1871Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.",RESOLVED          FIXED      
17924,Daniel Berlin,[4.0 Regression] gcc.dg/debug/dwarf2/dwarf-die7.c fails,FAIL: gcc.dg/debug/dwarf2/dwarf-die7.c scan-assembler 1.*DW_AT_inlineFAIL: gcc.dg/debug/dwarf2/dwarf-die7.c scan-assembler 1.*DW_AT_inlineFails on the mainline.,RESOLVED          FIXED      
14638,Daniel Berlin,[4.0 Regression] Variables disappear from debug info at -O1,"foo (int b){  int a = b;loop:  if (b > 0)    {      b--;      goto loop;    }  return a + b;}main(){  printf (""%d\n"", foo (93));}Compile with '-g -O1'GNU C version 3.5-tree-ssa 20040318 (merged 20040307) (i686-pc-linux-gnu)        compiled by GNU C version 3.5-tree-ssa 20040318 (merged 20040307).$ gcc -O1 -g a.c -o a$ gdb ./a(gdb) runThe program being debugged has been started already.Start it from the beginning? (y or n) yStarting program: /to/scratch/dnovillo/tree-ssa-00/native/00wrk/14511/aBreakpoint 1, foo (b=93) at a.c:88             b--;(gdb) p b$2 = 93(gdb) n6         if (b > 0)(gdb) n8             b--;(gdb) n6         if (b > 0)(gdb) n8             b--;(gdb) n6         if (b > 0)(gdb) p b$3 = 93(gdb) p aNo symbol ""a"" in current context.(gdb)Notice how 'b' never seems to change value and 'a' just doesn't exist.  Thisworks fine with GCC 3.2.3 and mainline as of 2004-03-16.The problem in this case is that we don't map good debugging information to theoriginal symbols when we take the program out of SSA.  The final tree dump filecontains:foo (b){  int b.0, a;<bb 0>:  if (b > 0) goto <L8>; else goto <L9>;<L8>:;  b.0 = b;  goto <bb 2> (<L1>);loop:;  if (b.0 > 0) goto <L1>; else goto <L2>;<L1>:;  b.0 = b.0 - 1;  goto <bb 1> (loop);<L9>:;  b.0 = b;<L2>:;  return b + b.0;}Notice how 'b.0' has taken the place of 'b' and 'a' has disappeared completely. As a temporary workaround, we could perhaps not do copy propagation at -O1.Long term, we need to explore the ideas of not coming out of SSA ever and do abetter job at mapping debugging information to symbols.",RESOLVED          FIXED      
16221,Daniel Berlin,"Bugzilla, choosing ""Accept Bug"" when not logged in get assigned to unassigned@gcc.gnu.org","If you choose to ""Accept Bug (Change State to ASSIGNED)"" when not logged in.Bugzilla will correctly prompt you to log in.After logging in bug state will be set to ASSIGNED, but instead of assigning itto your ID, it will assign it to unassigned@gcc.gnu.org.To repeat:Log out of bugzilla.Find an unassigned bug.Click on the radio button for ""Accept bug (change state to ASSIGNED)""Click on COMMIT.Bugzilla will prompt you to log in, do so.Bugzila will then inform you that the bug was changed and emails were sent.Look at the bug, it will be now correctly be ""ASSIGNED"", but instead ofassigning to you, it will assign it to ""unassigned@gcc.gnu.org"".BTW, should there not be a ""bugzilla"" component within GCC's bugzilla?",RESOLVED          FIXED      
12804,Daniel Berlin,zone allocator is broken on 64bit,"See also the discussion starting at:http://gcc.gnu.org/ml/gcc-patches/2003-10/msg02401.htmlI tried to bootstrap on x86_64-linux-gnu using --with-gc=zone andfull checking (including GCAC) and get this ICE:./xgcc -B./ -B/opt/gcc/3.4-devel/x86_64-suse-linux-gnu/bin/ -isystem/opt/gcc/3.4-devel/x86_64-suse-linux-gnu/include -isystem/opt/gcc/3.4-devel/x86_64-suse-linux-gnu/sys-include-L/abuild/aj/builds/gcc/misc/gcc/../ld -O2 -DIN_GCC    -W -Wall -Wwrite-strings-Wstrict-prototypes -Wmissing-prototypes -isystem ./include  -I. -I.-I/usr/src/aj/cvs/gcc/gcc -I/usr/src/aj/cvs/gcc/gcc/.-I/usr/src/aj/cvs/gcc/gcc/../include   -g0 -finhibit-size-directive-fno-inline-functions -fno-exceptions -fno-zero-initialized-in-bss-fno-unit-at-a-time -fno-omit-frame-pointer -fno-asynchronous-unwind-tables \   -c /usr/src/aj/cvs/gcc/gcc/crtstuff.c -DCRT_END \  -o crtend.oIn file included from /usr/src/aj/cvs/gcc/gcc/tsystem.h:89,                 from /usr/src/aj/cvs/gcc/gcc/crtstuff.c:62:/usr/include/stdlib.h:394: internal compiler error: in sweep_pages, atggc-zone.c:1333Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.make: *** [crtend.o] Error 1Running gdb gives some more insight:(gdb) r -fpreprocessed crtstuff.i -quiet -dumpbase crtstuff.c -mtune=k8-auxbase-strip crtend.o -g0 -O2 -W -Wall -Wwrite-strings -Wstrict-prototypes-Wmissing-prototypes -version -finhibit-size-directive -fno-inline-functions-fno-exceptions -fno-zero-initialized-in-bss -fno-unit-at-a-time-fno-omit-frame-pointer -fno-asynchronous-unwind-tables -o crtstuff.sStarting program: /abuild/aj/builds/gcc/misc/gcc/cc1 -fpreprocessed crtstuff.i-quiet -dumpbase crtstuff.c -mtune=k8 -auxbase-strip crtend.o -g0 -O2 -W -Wall-Wwrite-strings -Wstrict-prototypes -Wmissing-prototypes -version-finhibit-size-directive -fno-inline-functions -fno-exceptions-fno-zero-initialized-in-bss -fno-unit-at-a-time -fno-omit-frame-pointer-fno-asynchronous-unwind-tables -o crtstuff.sBreakpoint 2 at 0x2a9569fc30Breakpoint 3 at 0x2a9569ed00GNU C version 3.4 20031027 (experimental) (x86_64-suse-linux-gnu)        compiled by GNU C version 3.3.1 (SuSE Linux).GGC heuristics: --param ggc-min-expand=0 --param ggc-min-heapsize=0Breakpoint 1, fancy_abort (file=0xf98440 ""/usr/src/aj/cvs/gcc/gcc/ggc-zone.c"",line=1333, function=0xf984c1 ""sweep_pages"")    at /usr/src/aj/cvs/gcc/gcc/diagnostic.c:584584       internal_error (""in %s, at %s:%d"", function, trim_filename (file), line);(gdb) bt#0  fancy_abort (file=0xf98440 ""/usr/src/aj/cvs/gcc/gcc/ggc-zone.c"", line=1333,function=0xf984c1 ""sweep_pages"")    at /usr/src/aj/cvs/gcc/gcc/diagnostic.c:584#1  0x0000000000c8bfd8 in sweep_pages (zone=0x11895a0) at/usr/src/aj/cvs/gcc/gcc/ggc-zone.c:1333#2  0x0000000000c8c2a0 in ggc_collect_1 (zone=0x11895a0, need_marking=true) at/usr/src/aj/cvs/gcc/gcc/ggc-zone.c:1401#3  0x0000000000c8c3f9 in ggc_collect () at /usr/src/aj/cvs/gcc/gcc/ggc-zone.c:1472#4  0x00000000004029f6 in yyparse () at c-parse.y:295#5  0x000000000040d94c in c_parse_file () at c-parse.y:2834#6  0x000000000047f827 in c_common_parse_file (set_yydebug=0) at/usr/src/aj/cvs/gcc/gcc/c-opts.c:1226#7  0x0000000000c3599a in compile_file () at /usr/src/aj/cvs/gcc/gcc/toplev.c:1836#8  0x0000000000c3abb7 in do_compile () at /usr/src/aj/cvs/gcc/gcc/toplev.c:4689#9  0x0000000000c3ac4f in toplev_main (argc=26, argv=0x7fbfffeec8) at/usr/src/aj/cvs/gcc/gcc/toplev.c:4729#10 0x00000000004a76cb in main (argc=26, argv=0x7fbfffeec8) at/usr/src/aj/cvs/gcc/gcc/main.c:35(gdb) up#1  0x0000000000c8bfd8 in sweep_pages (zone=0x11895a0) at/usr/src/aj/cvs/gcc/gcc/ggc-zone.c:13331333                    abort ();(gdb) p p$1 = (page_entry *) 0x123c130(gdb) p *p$2 = {next = 0x123c0f0, bytes = 4096, survived = 2, page = 0x2a95a2e000 """",bytes_free = 6990, context_depth = 0, large_p = false,   zone = 0x11895a0}To reproduce on my x86-64 system:- start with an empty directory- configure with:$ /usr/src/aj/cvs/gcc/configure  --prefix=/opt/gcc/3.4-devel --disable-nls--enable-threads=posix --enable-clocale=gnu --enable-__cxa_atexit--enable-shared --enable-languages=c,c++,ada,treelang,java,f77,objc--enable-checking=misc,tree,rtl,gc,rtlflag,gcac --with-gc=zone--with-system-zlib x86_64-suse-linux-gnu- make bootstrap",RESOLVED          FIXED      
18673,Daniel Berlin,[4.0 Regression] Tree-PRE is O(N^4) in the depth of the dominator tree,"using same awk script as in comment #2 to bug 18595 and -O1 -fno-ivopts one canshow that pre is O(N^4):Nloops      Time, s 50         1.12 60         3.02 70         6.41 80        11.4 90        19.4100        30.1110        44.7120        64.8150       163.5",RESOLVED          FIXED      
18611,Daniel Berlin,"[4.0 Regression] ICE: in bitmap_ior, at bitmap.c:704 with -O1 -fmove-loop-invariants","With the snapshot 20041121 I get an ICE bitmap_ior, at bitmap.c:704if I use the options -O1 (or higher) and -fmove-loop-invariantsSnapshot 20041121 has the same problem.Michael Cieslinskigcc40a  -c -O2 -fmove-loop-invariants -o cineonlib.o cineonlib.i -v -pipeReading specs from /usr/local/gcc40a/lib/gcc/powerpc-unknown-linux-gnu/4.0.0/specsConfigured with: ../gcc40/configure --prefix=/usr/local/gcc40a --program-suffix=40a --with-cpu=G5 --enable-altivec --enable-languages=c,c++ --enable-checkingThread model: posixgcc version 4.0.0 20041121 (experimental) /usr/local/gcc40a/libexec/gcc/powerpc-unknown-linux-gnu/4.0.0/cc1 -fpreprocessed cineonlib.i -quiet -dumpbase cineonlib.i -mcpu=G5 -auxbase-strip cineonlib.o -O2 -version -fmove-loop-invariants -o - | as -mpower4 -maltivec -many -V -Qy -o cineonlib.o -GNU C version 4.0.0 20041121 (experimental) (powerpc-unknown-linux-gnu)        compiled by GNU C version 4.0.0 20041107 (experimental).GGC heuristics: --param ggc-min-expand=30 --param ggc-min-heapsize=4096GNU assembler version 2.15.90 (ppc-redhat-linux) using BFD version 2.15.90 20040225cineonlib.c: In function dumpCineonGenericHeader:cineonlib.c:282: internal compiler error: in bitmap_ior, at bitmap.c:704Please submit a full bug report, with preprocessed source if appropriate.",RESOLVED          FIXED      
18519,Daniel Berlin,[4.0 Regression] ICE: Segmentation fault with optimization,"When I compile qt-x11-free-3.3.3 with -O3 I get a segmentation fault.This ICE doesn't occur at -O2Snapshot 20041024 works, snapshot 20041107 and 20041114 segfaults.Michael Cieslinskig++40f -c -O3  -o .obj/release-shared-mt/qscriptengine.o qscriptengine.ii -vReading specs from /usr/local/gcc40f/lib/gcc/powerpc-unknown-linux-gnu/4.0.0/specsConfigured with: ../gcc40/configure --prefix=/usr/local/gcc40f --program-suffix=40f --with-cpu=G5 --enable-altivec --enable-languages=c,c++ --enable-checkingThread model: posixgcc version 4.0.0 20041114 (experimental) /usr/local/gcc40f/libexec/gcc/powerpc-unknown-linux-gnu/4.0.0/cc1plus -fpreprocessed qscriptengine.ii -quiet -dumpbase qscriptengine.ii -mcpu=G5 -auxbase-strip .obj/release-shared-mt/qscriptengine.o -O3 -version -o /tmp/ccMzuroF.sGNU C++ version 4.0.0 20041114 (experimental) (powerpc-unknown-linux-gnu)        compiled by GNU C version 4.0.0 20041114 (experimental).GGC heuristics: --param ggc-min-expand=30 --param ggc-min-heapsize=4096kernel/qscriptengine_x11.cpp: In function â?~void tibetan_shape(int, const QString&, int, int, QTextEngine*, QScriptItem*)â?T:kernel/qscriptengine_x11.cpp:2072: internal compiler error: Segmentation faultPlease submit a full bug report, with preprocessed source if appropriate.",RESOLVED          FIXED      
18168,Daniel Berlin,SPEC CPU2000 173.applu tree-loop-linear ICE,gcc -O3 -ftree-loop-linear applu.f produces error:Dependence relation cannot be represented by distance vector.,RESOLVED          FIXED      
17672,Daniel Berlin,[4.0 Regression] ICE in build_classic_dist_vector,"gcc build failsconfigured with:../gcc/configure --prefix=/beta --enable-shared --enable-languages=c,c++,objc--enable-threads=posix --enable-__cxa_atexit --enable-libada --disable-libgcjbuilt with:make BOOT_CFLAGS=""-save-temps -march=pentium4 -O3 -fweb -fprefetch-loop-arrays-funroll-loops -fpeel-loops -fmodulo-sched -ftree-loop-linear  -fsched-spec-load -mfpmath=sse -maccumulate-outgoing-args -momit-leaf-frame-pointer""STAGE1_CFLAGS=""-march=pentium4 -O2 -fweb -fprefetch-loop-arrays -funroll-loops-fpeel-loops -fsched-spec-load -mfpmath=sse -pipe"" bootstrapfails with:stage1/xgcc -Bstage1/ -B/beta/i686-pc-linux-gnu/bin/ -c   -save-temps-march=pentium4 -O3 -fweb -fprefetch-loop-arrays -funroll-loops -fpeel-loops-fmodulo-sched -ftree-loop-linear  -fsched-spec-load  -mfpmath=sse-maccumulate-outgoing-args -momit-leaf-frame-pointer -DIN_GCC   -W -Wall-Wwrite-strings -Wstrict-prototypes -Wmissing-prototypes -pedantic-Wno-long-long -Wno-variadic-macros -Wold-style-definition  -fno-common  -DHAVE_CONFIG_H    -I. -I. -I../../gcc/gcc -I../../gcc/gcc/.-I../../gcc/gcc/../include -I../../gcc/gcc/../libcpp/include ../../gcc/gcc/sbitmap.c -o sbitmap.o../../gcc/gcc/sbitmap.c: In function 'dump_sbitmap_vector':../../gcc/gcc/sbitmap.c:753: internal compiler error: inbuild_classic_dist_vector, at tree-data-ref.c:1525Will attach .i",RESOLVED          FIXED      
17587,Daniel Berlin,[4.0 regression] Mauve's UnicodeBase.java fails to compile,"cvs trunk gcj gets ICE while compiling UnicodeBase.javafrom Mauve.  To see this you must edit the mauve-libgcjfile and comment out the line referring to the unicodetests.CLASSPATH=.:../mauve gcj -fassume-compiled -g -O2 -c -ognu/testlet/java/lang/Character/UnicodeBase.o../mauve/gnu/testlet/java/lang/Character/UnicodeBase.java../mauve/gnu/testlet/java/lang/Character/UnicodeBase.java: In class`gnu.testlet.java.lang.Character.UnicodeBase':../mauve/gnu/testlet/java/lang/Character/UnicodeBase.java: In method`gnu.testlet.java.lang.Character.UnicodeBase.performTests()':../mauve/gnu/testlet/java/lang/Character/UnicodeBase.java:617: warning: Themethod `isJavaLetter' in class `java.lang.Character' has been deprecated.                Character.isJavaLetter(i))                            ^../mauve/gnu/testlet/java/lang/Character/UnicodeBase.java:620: warning: Themethod `isJavaLetter' in class `java.lang.Character' has been deprecated.                            (Character.isJavaLetter(i)? ""javaletter"" :                                         ^../mauve/gnu/testlet/java/lang/Character/UnicodeBase.java:626: warning: Themethod `isJavaLetter' in class `java.lang.Character' has been deprecated.            if ((Character.isJavaLetter(i) || Character.isDigit(i) ||                             ^../mauve/gnu/testlet/java/lang/Character/UnicodeBase.java:628: warning: Themethod `isJavaLetterOrDigit' in class `java.lang.Character' has been deprecated.                Character.isJavaLetterOrDigit(i)                            ^../mauve/gnu/testlet/java/lang/Character/UnicodeBase.java:632: warning: Themethod `isJavaLetterOrDigit' in class `java.lang.Character' has been deprecated.                            (Character.isJavaLetterOrDigit(i) ?                                         ^../mauve/gnu/testlet/java/lang/Character/UnicodeBase.java:639: warning: Themethod `isSpace' in class `java.lang.Character' has been deprecated.                  i == '\f')) != Character.isSpace(i))                                             ^../mauve/gnu/testlet/java/lang/Character/UnicodeBase.java:642: warning: Themethod `isSpace' in class `java.lang.Character' has been deprecated.                            (Character.isSpace(i) ? ""space"" : ""non-space""));                                         ^7 warnings../mauve/gnu/testlet/java/lang/Character/UnicodeBase.java:326: internal compilererror: Segmentation faultPlease submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.",RESOLVED          FIXED      
17111,Daniel Berlin,[4.0 Regression] tree check ICE in value_insert_into_set_bitmap on inlining a memcmp-like function,"If I try to compile a file that looks like this at -O3:int memcmp_like(const void *v1, const void *v2, int count) {    int i;    const char *s1 = (const char *)v1, *s2 = (const char *)v2;    for (i = 0; i < count; i++) {        if (s1[i] != s2[i])            return 1;    }    return 0;}int g(void);int f(void) {    return memcmp_like (""hello"", ""bye"", g()) + 5;}recent GCC development snapshots die with the following message:bad.c:11: internal compiler error: tree check: expected value_handle, haveaddr_expr in value_insert_into_set_bitmap, at tree-ssa-pre.c:471For instance, if the attached file is named ""bad.c"", I get an errorfromgcc -O3 -c bad.cI can reproduce this with a recent version of the Debian ""gcc-snapshot""package, which is the 20040717 snapshot configured as follows:Configured with: ../src/configure -v --enable-languages=c,c++,java,f95,objc--prefix=/usr/lib/gcc-snapshot --enable-shared --with-system-zlib --enable-nls--enable-threads=posix --without-included-gettext --disable-werror--enable-__cxa_atexit --enable-libstdcxx-allocator=mt --enable-clocale=gnu--enable-libstdcxx-debug --enable-java-gc=boehm --enable-java-awt=gtk i486-linux-gnuor with a fresh checkout from CVS, 3.5.0 20040819 configured with no argumentson an i686.The problem seems to be triggered by inlining, since it's present under ""-O3""and ""-O2 -finline-functions"" but not ""-O2"" or ""-O3 -fno-inline"".",RESOLVED          FIXED      
15920,Daniel Berlin,[4.0 Regression] gcc.c-torture/compile/930523-1.c everywhere,"Looks like more checking found some bugs:/Users/regress/tbox/cvs-gcc/gcc/gcc/testsuite/gcc.c-torture/compile/930523-1.c: In function `f':^M/Users/regress/tbox/cvs-gcc/gcc/gcc/testsuite/gcc.c-torture/compile/930523-1.c:4: error: Makes aliased stores, but no VDEFS^M/Users/regress/tbox/cvs-gcc/gcc/gcc/testsuite/gcc.c-torture/compile/930523-1.c:4: error: Makes aliased stores, but no VDEFS^M/Users/regress/tbox/cvs-gcc/gcc/gcc/testsuite/gcc.c-torture/compile/930523-1.c:4: error: Makes aliased stores, but no VDEFS^M/Users/regress/tbox/cvs-gcc/gcc/gcc/testsuite/gcc.c-torture/compile/930523-1.c:4: error: Makes aliased stores, but no VDEFS^M/Users/regress/tbox/cvs-gcc/gcc/gcc/testsuite/gcc.c-torture/compile/930523-1.c:4: error: Makes aliased stores, but no VDEFS^M/Users/regress/tbox/cvs-gcc/gcc/gcc/testsuite/gcc.c-torture/compile/930523-1.c:4: error: Makes aliased stores, but no VDEFS^M/Users/regress/tbox/cvs-gcc/gcc/gcc/testsuite/gcc.c-torture/compile/930523-1.c:4: error: Makes aliased stores, but no VDEFS^M/Users/regress/tbox/cvs-gcc/gcc/gcc/testsuite/gcc.c-torture/compile/930523-1.c:4: error: Makes aliased stores, but no VDEFS^M/Users/regress/tbox/cvs-gcc/gcc/gcc/testsuite/gcc.c-torture/compile/930523-1.c:4: error: Makes aliased stores, but no VDEFS^M/Users/regress/tbox/cvs-gcc/gcc/gcc/testsuite/gcc.c-torture/compile/930523-1.c:4: error: Makes aliased stores, but no VDEFS^M/Users/regress/tbox/cvs-gcc/gcc/gcc/testsuite/gcc.c-torture/compile/930523-1.c:4: error: Makes aliased stores, but no VDEFS^M",RESOLVED          FIXED      
15979,Daniel Berlin,"[4.0 Regression] ICE, segfault in insert_aux at tree-ssa-pre.c:1329","-------------------------------------------------------------------------------void x_handle_selection_request (int a, int b, int c){  int i;   if (a)    {      if (b)	{	  i = c;	  	  foo (i + 0xDEADBEEF);	}    }  else    {      i = 0;    }    bar (i + 0x",RESOLVED          FIXED      
15981,Daniel Berlin,"[4.0 Regression] internal compiler error: in insert_aux, at tree-ssa-pre.c:1363","I get this internal compiler error on one of the Perl 5.8.4 source files(preprocessed file is attached) with -O2 and -O3. With -O1 option it passes.logout ~/tmp/perl-5.8.4/ext/File/Glob>gcc -save-temps -c   -DHAS_FPSETMASK-DHAS_FLOATINGPOINT_H -fno-strict-aliasing -I/usr/local/include-I/home/4/wilx/include -O2 -march=pentium3   -DVERSION=\""1.02\""-DXS_VERSION=\""1.02\"" -shared ""-I../../..""   bsd_glob.cbsd_glob.c: In function `glob0':bsd_glob.c:610: internal compiler error: in insert_aux, at tree-ssa-pre.c:1363Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.",RESOLVED          FIXED      
15982,Daniel Berlin,[4.0 Regression] ICE in tree-ssa-pre due to GVN-PRE,"subroutine ssbgst(kb, ab, ldab, bb, ldbb)    implicit  none    integer kb, ldab, ldbb, i, j, k, kbt    real ab(ldab,*), bb(ldbb,*)    i = 1    kbt = 4    do k = i + 1, i + kbt       do j = k, i + kbt          ab(j-k+1,k) = bb(j-i+1,i) * ab(k-i+1,i) - bb(k-i+1,i) * ab(j-i+1,i)       end do    end do  end subroutine ssbgst",RESOLVED          FIXED      
16158,Daniel Berlin,[4.0 Regression] O(N^2) in tree-ssa-pre.c,#define F0(i) a[i] = 0;#define F1(a) F0(a##0) F0(a##1) F0(a##2) F0(a##3) F0(a##4) F0(a##5) F0(a##6)F0(a##7)#define F2(a) F1(a##0) F1(a##1) F1(a##2) F1(a##3) F1(a##4) F1(a##5) F1(a##6)F1(a##7)#define F3(a) F2(a##0) F2(a##1) F2(a##2) F2(a##3) F2(a##4) F2(a##5) F2(a##6)F2(a##7)#define F4(a) F3(a##0) F3(a##1) F3(a##2) F3(a##3) F3(a##4) F3(a##5) F3(a##6)F3(a##7)void f (int a[]){	F4(0)/* 	F4(1) *//* 	F4(2) */},RESOLVED          FIXED      
15627,Daniel Berlin,[4.0 Regression] Sun CC cannot bootstrap GCC,"I get with Sun CC 5.0, 5.3 and 5.5:cc -erroff -DHAVE_CONFIG_H -I. -I/home/eric/cvs/gcc/libbanshee/engine -I..   -I/home/eric/cvs/gcc/libbanshee/engine/../libcompat-I/home/eric/cvs/gcc/libbanshee/../include-I/home/eric/cvs/gcc/libbanshee/engine/../include -I. -Ddeletes= -Dtraditional=-Dsameregion= -Dparentptr=  -g  -c `test -f'/home/eric/cvs/gcc/libbanshee/engine/util.c' || echo'/home/eric/cvs/gcc/libbanshee/engine/'`/home/eric/cvs/gcc/libbanshee/engine/util.c""/home/eric/cvs/gcc/libbanshee/engine/util.c"", line 199: identifier redefined: min        current : function(int, int) returning int        previous: function(int, int) returning int :""/home/eric/cvs/gcc/libbanshee/engine/util.h"", line 104""/home/eric/cvs/gcc/libbanshee/engine/util.c"", line 200: identifier redefined: max        current : function(int, int) returning int        previous: function(int, int) returning int :""/home/eric/cvs/gcc/libbanshee/engine/util.h"", line 105cc: acomp failed for /home/eric/cvs/gcc/libbanshee/engine/util.cgmake[3]: *** [util.o] Error 2",RESOLVED          FIXED      
12899,Daniel Berlin,[tree-ssa] ICE in cprop_into_phis,"This first produced the same ICE as Bug 12870, but now gives a differentmessage. Does not occur at -O0.gcc version 3.5-tree-ssa 20031104 (merged 20031026)falk@juist:/tmp% cat test.cvoidbb_getopt_ulflags (char *s){  for (;;)    if (s[1])      do        s++;      while (*s);}falk@juist:/tmp% gcc -O -c test.ctest.c: In function `bb_getopt_ulflags':test.c:3: internal compiler error: in cprop_into_phis, at tree-ssa-dom.c:1781Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.",RESOLVED          FIXED      
14562,Daniel Berlin,[tree-ssa] Incorrect loop code caused by PRE,"Following test case produces incorrect PHI functions in pacc_ch, when compiled withtree-ssa compiler with -O1 on ppc-darwin. This prevents gap of the SPEC benchmarkto build correctly with -O1 and higher optimizations.typedef struct TypHeader {    unsigned long size;    struct TypHeader * * ptr;} * TypHandle;TypHandle gorf (unsigned long h, unsigned long k, TypHandle hdRes, TypHandle hdTmp){    while ( hdTmp < ((hdRes)->ptr)[k-h] ) {         ((hdRes)->ptr)[k] = ((hdRes)->ptr)[k-h];         k = k-h;    }    return hdRes;}gorf (h, k, hdRes, hdTmp){  struct TypHeader * * T.8;  struct TypHeader * * T.7;  long unsigned int T.6;  struct TypHeader * T.5;  struct TypHeader * * T.4;  struct TypHeader * * T.3;  long unsigned int T.2;  long unsigned int T.1;  struct TypHeader * * T.0;    # BLOCK 0  # PRED: ENTRY (fallthru)  T.0<D1054>_26 = hdRes<D1048>_3->ptr;  T.1<D1055>_27 = k<D1047>_2 - h<D1046>_5;  T.2<D1056>_28 = T.1<D1055>_27 * 4;  T.3<D1057>_29 = (struct TypHeader * *)T.2<D1056>_28;  T.4<D1058>_30 = T.0<D1054>_26 + T.3<D1057>_29;  T.5<D1059>_31 = *T.4<D1058>_30;  if (T.5<D1059>_31 > hdTmp<D1049>_11) goto <L0>; else goto <L2>;  # SUCC: 1 (true) 2 (false)  # BLOCK 1  # PRED: 0 (true) 1 (true)  # T.3<D1057>_25 = PHI <T.3<D1057>_29(0), T.3<D1057>_40(1)>;  # T.1<D1055>_24 = PHI <T.1<D1055>_27(0), T.1<D1055>_38(1)>;  # k<D1047>_1 = PHI <k<D1047>_2(0), k<D1047>_36(1)>;<L0>:;  T.0<D1054>_32 = hdRes<D1048>_3->ptr;  T.6<D1061>_14 = k<D1047>_1 * 4;  T.7<D1062>_15 = (struct TypHeader * *)T.6<D1061>_14;  T.8<D1063>_16 = T.0<D1054>_32 + T.7<D1062>_15;  T.0<D1054>_33 = hdRes<D1048>_3->ptr;  T.4<D1058>_34 = T.0<D1054>_33 + T.3<D1057>_25;  T.5<D1059>_35 = *T.4<D1058>_34;  *T.8<D1063>_16 = T.5<D1059>_35;  k<D1047>_36 = T.1<D1055>_24;  T.0<D1054>_37 = hdRes<D1048>_3->ptr;  T.1<D1055>_38 = k<D1047>_36 - h<D1046>_5;  T.2<D1056>_39 = T.1<D1055>_38 * 4;  T.3<D1057>_40 = (struct TypHeader * *)T.2<D1056>_39;  T.4<D1058>_41 = T.0<D1054>_37 + T.3<D1057>_40;  T.5<D1059>_42 = *T.4<D1058>_41;  if (T.5<D1059>_42 > hdTmp<D1049>_11) goto <L0>; else goto <L2>;  # SUCC: 2 (false) 1 (true)  # BLOCK 2  # PRED: 0 (false) 1 (false)<L2>:;  return hdRes<D1048>_3;  # SUCC: EXIT}2004-02-20  Zdenek Dvorak  <rakdver@atrey.karlin.mff.cuni.cz>...      * tree-optimize.c (init_tree_optimization_passes): Add pass_ch.        * tree-pass.h (pass_ch): Declare.        * tree-ssa-loop.c: Include tree-inline.h.        (call_expr_p, should_duplicate_loop_header_p, mark_defs_for_rewrite,        duplicate_blocks, copy_loop_headers, gate_ch): New functions.        (pass_ch): New....- fariborz (fjahanian@apple.com)",RESOLVED          FIXED      
13352,Daniel Berlin,ICE SIGSEGV during bootstrap on libstdc++-v3/testsuite/testsuite_hooks.cc with the zone GC,"I get this SIGSEGV during GCC bootstrap. What is interesting is that adding-save-temps to g++'s parameters gets me over this ICE.libstdc++-v3/testsuite/testsuite_allocator.cc compilation which is right aftertestsuite_hooks.cc ends with ICE too.logout~/tmp/gcc34/objdir/i386-unknown-freebsd4.9/libstdc++-v3/testsuite>/home/4/wilx/tmp/gcc34/objdir/gcc/g++-vReading specs from /home/4/wilx/lib/gcc/i386-unknown-freebsd4.9/3.4/specsConfigured with: ../srcdir/configure --disable-nls--enable-version-specific-runtime-libs --enable-dwarf2 --with-cpu=i686--with-arch=i686 --with-system-zlib --disable-shared --prefix=/home/4/wilx--enable-languages=c,c++ --with-gc=zone --disable-sjlj-exceptionsThread model: posixgcc version 3.4 20031208 (experimental)/home/4/wilx/tmp/gcc34/objdir/gcc/cc1plus -quiet -nostdinc++ -v -I.-I../../../../srcdir/libstdc++-v3/testsuite -I..-I/home/4/wilx/tmp/gcc34/objdir/i386-unknown-freebsd4.9/libstdc++-v3/include/i386-unknown-freebsd4.9-I/home/4/wilx/tmp/gcc34/objdir/i386-unknown-freebsd4.9/libstdc++-v3/include-I/home/4/wilx/tmp/gcc34/srcdir/libstdc++-v3/libsupc++ -I/usr/X11R6/include-iprefix/home/4/wilx/tmp/gcc34/objdir/gcc/../lib/gcc/i386-unknown-freebsd4.9/3.4/-isystem /home/4/wilx/tmp/gcc34/objdir/gcc/include -isystem/home/4/wilx/i386-unknown-freebsd4.9/bin/include -isystem/home/4/wilx/i386-unknown-freebsd4.9/lib/include -DHAVE_CONFIG_H -isystem/home/4/wilx/i386-unknown-freebsd4.9/include -isystem/home/4/wilx/i386-unknown-freebsd4.9/sys-include -include bits/stdc++.h../../../../srcdir/libstdc++-v3/testsuite/testsuite_hooks.cc -quiet -dumpbasetestsuite_hooks.cc -march=i686 -auxbase-strip testsuite_hooks.o -g -O2 -O2-version -o /home/4/wilx/tmp/tmp/ccNqcKWa.sGNU C++ version 3.4 20031208 (experimental) (i386-unknown-freebsd4.9)        compiled by GNU C version 3.4 20031208 (experimental).GGC heuristics: --param ggc-min-expand=30 --param ggc-min-heapsize=4096In file included from /home/4/wilx/tmp/gcc34/objdir/gcc/include/stddef.h:57,                 from/home/4/wilx/tmp/gcc34/objdir/i386-unknown-freebsd4.9/libstdc++-v3/include/cstddef:48,                 from../../../../srcdir/libstdc++-v3/testsuite/testsuite_hooks.h:63,                 from../../../../srcdir/libstdc++-v3/testsuite/testsuite_hooks.cc:31:/home/4/wilx/tmp/gcc34/objdir/gcc/include/machine/ansi.h:156: error: conflictingdeclaration 'typedef union __mbstate_t __mbstate_t'/home/4/wilx/tmp/gcc34/objdir/gcc/include/machine/ansi.h:156: error:'__mbstate_t' has a previous declaration as `typedef union __mbstate_t __mbstate_t'/home/4/wilx/tmp/gcc34/objdir/gcc/include/machine/ansi.h:156: error: declarationof `typedef union __mbstate_t __mbstate_t'/home/4/wilx/tmp/gcc34/objdir/gcc/include/machine/ansi.h:156: error: conflictswith previous declaration `typedef union __mbstate_t __mbstate_t'/home/4/wilx/tmp/gcc34/objdir/gcc/include/machine/ansi.h:156: error: declarationof `typedef union __mbstate_t __mbstate_t'/home/4/wilx/tmp/gcc34/objdir/gcc/include/machine/ansi.h:156: error: conflictswith previous declaration `typedef union __mbstate_t __mbstate_t'/home/4/wilx/tmp/gcc34/objdir/gcc/include/machine/ansi.h:156: error: declarationof `typedef union __mbstate_t __mbstate_t'/home/4/wilx/tmp/gcc34/objdir/gcc/include/machine/ansi.h:156: error: conflictswith previous declaration `typedef union __mbstate_t __mbstate_t'Program received signal SIGSEGV, Segmentation fault.0x083ca973 in ggc_get_size (p=0x2a35d8de) at ../../srcdir/gcc/ggc-zone.c:473473       L2 = LOOKUP_L2 (p);(gdb) bt#0  0x083ca973 in ggc_get_size (p=0x2a35d8de) at ../../srcdir/gcc/ggc-zone.c:473#1  0x08261501 in ggc_realloc (x=0x2a35d8de, size=197632) at../../srcdir/gcc/ggc-common.c:149#2  0x081cfcf9 in equate_decl_number_to_die (decl=0xc, decl_die=0x2873d670)    at ../../srcdir/gcc/dwarf2out.c:5184#3  0x081dc5c9 in gen_subprogram_die (decl=0x2874fc60, context_die=0x0)    at ../../srcdir/gcc/dwarf2out.c:10738#4  0x081d6be3 in gen_decl_die (decl=0x2874fc60, context_die=0x2873d3bc)    at ../../srcdir/gcc/dwarf2out.c:11869#5  0x081d8f7f in gen_type_die (type=0x2874eca4, context_die=0x2ae99c3f)    at ../../srcdir/gcc/dwarf2out.c:11302#6  0x081d9eab in modified_type_die (type=0x2874eca4, is_const_type=0,is_volatile_type=0,    context_die=0x2ae99c3f) at ../../srcdir/gcc/dwarf2out.c:7937#7  0x081da336 in add_type_attribute (object_die=0x2873d348, type=0xc,decl_const=0, decl_volatile=0,    context_die=0x0) at ../../srcdir/gcc/dwarf2out.c:10112#8  0x081d7418 in gen_decl_die (decl=0x28750484, context_die=0x2ae99c3f)    at ../../srcdir/gcc/dwarf2out.c:11436#9  0x083a0140 in rest_of_decl_compilation (decl=0x28750484,    asmspec=0x1 <Error reading address 0x1: Bad address>, top_level=1, at_end=0)    at ../../srcdir/gcc/toplev.c:1990#10 0x0807a602 in cp_finish_decl (decl=0x28750484, init=0x0, asmspec_tree=0xc,flags=0)    at ../../srcdir/gcc/cp/decl.c:4748#11 0x080efd90 in cp_parser_init_declarator (parser=0x2873cc20,decl_specifiers=0x2874ec4c,    prefix_attributes=0x0, function_definition_allowed_p=true, member_p=false,    declares_class_or_enum=2, function_definition_p=0xbfbff377) at../../srcdir/gcc/cp/parser.c:9712#12 0x080eff92 in cp_parser_simple_declaration (parser=0x2873cc20,function_definition_allowed_p=true)    at ../../srcdir/gcc/cp/parser.c:6296#13 0x080f00e8 in cp_parser_block_declaration (parser=0x2873cc20, statement_p=false)    at ../../srcdir/gcc/cp/parser.c:6212#14 0x080f0cbf in cp_parser_declaration (parser=0x2873cc20) at../../srcdir/gcc/cp/parser.c:6132#15 0x080f0f7f in cp_parser_declaration_seq_opt (parser=0x2873cc20)    at ../../srcdir/gcc/cp/parser.c:6041#16 0x080f112f in c_parse_file () at ../../srcdir/gcc/cp/parser.c:2245#17 0x0817cd5e in c_common_parse_file (set_yydebug=0) at../../srcdir/gcc/c-opts.c:1227#18 0x083a3e6e in toplev_main (argc=0, argv=0xbfbffa82) at../../srcdir/gcc/toplev.c:1808#19 0x0818055e in main (argc=0, argv=0x0) at ../../srcdir/gcc/main.c:35",RESOLVED          FIXED      
14153,Daniel Berlin,[tree-ssa] ICE in tree-ssa-operands.c:add_stmt_operand,"GNU C version 3.5-tree-ssa 20040214 (merged 20040211) (i686-pc-linux-gnu)         compiled by GNU C version 3.5-tree-ssa 20040214 (merged 20040211). GGC heuristics: --param ggc-min-expand=30 --param ggc-min-heapsize=4096  -------------------------- typedef union tree_node *tree;  struct tree_exp {   tree operands[1]; };  union tree_node {   struct tree_exp exp; };  extern tree global_trees;  typedef struct {   tree *tp; } tree_stmt_iterator;  static __inline__ _Bool tsi_end_p (tree_stmt_iterator i) {   return (i.tp == ((void *) 0) || *(i.tp) == global_trees); }  static __inline__ void tsi_next (tree_stmt_iterator * i) {   tree t = *(i->tp);   i->tp = &t->exp.operands[1]; }  extern int is_gimple_stmt (tree); extern void abort ();  void dump_generic_node (tree node) {   tree_stmt_iterator si;   if (is_gimple_stmt (node) == 0)     abort ();   si.tp = &node->exp.operands[1];   while (1)     if (tsi_end_p (si))       tsi_next (&si); } --------------------------  Starting program: /home/steven/devel/tree-ssa-build/gcc/cc1 -O test.c  tsi_end_p  tsi_next  dump_generic_node  Program received signal SIGSEGV, Segmentation fault. 0x080f92b7 in add_stmt_operand (var_p=0x4020e408, stmt=0x40210dec, flags=0, prev_vops=0xbfffe580)     at ../../tree-ssa/gcc/tree-ssa-operands.c:1132 1132      STRIP_NOPS (var); (gdb) p var $1 = 0x0 (gdb) bt #0  0x080f92b7 in add_stmt_operand (var_p=0x4020d408, stmt=0x40210dc8, flags=0, prev_vops=0xbfffe580)     at ../../tree-ssa/gcc/tree-ssa-operands.c:1132 #1  0x080fa168 in get_expr_operands (stmt=0x40210dc8, expr_p=Variable ""expr_p"" is not available. ) at ../../tree-ssa/gcc/tree-ssa-operands.c:944 #2  0x080fae09 in get_stmt_operands (stmt=0x40210dc8) at ../../tree-ssa/gcc/tree-ssa-operands.c:711 #3  0x080ead8d in subst_phis (ei=0x4020de60, Z=0x40210da4, pred=0x4020e89c, bb=0x40211bc8)     at ../../tree-ssa/gcc/tree-ssa-pre.c:1291 #4  0x080ed0bc in finalize_1 (ei=0x4020de60) at ../../tree-ssa/gcc/tree-ssa-pre.c:2098 #5  0x080efecb in pre_expression (slot=0x4020de60, data=Variable ""data"" is not available. ) at ../../tree-ssa/gcc/tree-ssa-pre.c:3137 #6  0x080f2517 in execute_pre () at ../../tree-ssa/gcc/tree-ssa-pre.c:3325 #7  0x080c6709 in execute_pass_list (pass=0x84a7740) at ../../tree-ssa/gcc/tree-optimize.c:400 #8  0x080c677e in execute_pass_list (pass=0x84a74c0) at ../../tree-ssa/gcc/tree-optimize.c:430 #9  0x080c6a8a in tree_rest_of_compilation (fndecl=0x4020a0e8, nested_p=false)     at ../../tree-ssa/gcc/tree-optimize.c:520 #10 0x08062396 in c_expand_body_1 (fndecl=0x4020a0e8, nested_p=0) at ../../tree-ssa/gcc/c-decl.c:6205 #11 0x0806257e in c_expand_body (fndecl=0x0) at ../../tree-ssa/gcc/c-decl.c:6237 #12 0x0838798d in cgraph_expand_function (node=0x4020a9f8) at ../../tree-ssa/gcc/cgraphunit.c:787 #13 0x08387b23 in cgraph_assemble_pending_functions () at ../../tree-ssa/gcc/cgraphunit.c:287 #14 0x0838815c in cgraph_finalize_function (decl=0x4020a0e8, nested=false)     at ../../tree-ssa/gcc/cgraphunit.c:368 #15 0x080626bc in c_finalize (fndecl=0x4020a0e8) at ../../tree-ssa/gcc/c-decl.c:6037 #16 0x08062a78 in finish_function () at ../../tree-ssa/gcc/c-decl.c:6150 #17 0x0804bd98 in yyparse () at c-parse.y:349 #18 0x08051d0b in c_parse_file () at c-parse.y:2830 #19 0x0809234f in c_common_parse_file (set_yydebug=1075893256) at ../../tree-ssa/gcc/c-opts.c:1227 #20 0x08338954 in toplev_main (argc=1075893256, argv=0xbffff274) at ../../tree-ssa/gcc/toplev.c:1870 #21 0x080a8f5e in main (argc=1075893256, argv=0x4020d408) at ../../tree-ssa/gcc/main.c:35 (gdb)",RESOLVED          FIXED      
12220,Daniel Berlin,"[tree-ssa] bootstrap error with gmake,cc on mips-sgi-IRIX6.5","../gcc/configure --prefix=/usr/gFORTRAN --with-gmp=/usr/GMP --enable-languages=c,f95gmake CC=""cc -save-temps"" bootstrap===================================octane % cc -versionMIPSpro Compilers: Version 7.4===================================gmake[1]: Entering directory `/usr/people/wstan/objdir/libbanshee'gmake ""AR_FLAGS=rc"" ""CC_FOR_BUILD=cc -save-temps"" ""CFLAGS=-g -O2"" ""CXXFLAGS=-g -O2"" ""CFLAGS_FOR_BUILD="" ""CFLAGS_FOR_TARGET=-O2 -g -O2"" ""INSTALL=../gcc/install-sh -c"" ""INSTALL_DATA=../gcc/install-sh -c -m 644"" ""INSTALL_PROGRAM=../gcc/install-sh -c"" ""INSTALL_SCRIPT=../gcc/install-sh -c"" ""LDFLAGS="" ""LIBCFLAGS=-g -O2"" ""LIBCFLAGS_FOR_TARGET=-O2 -g -O2"" ""MAKE=gmake"" ""MAKEINFO=/usr/people/wstan/gcc/missing makeinfo --split-size=5000000 "" ""PICFLAG="" ""PICFLAG_FOR_TARGET="" ""SHELL=/bin/sh"" ""EXPECT=expect"" ""RUNTEST=runtest"" ""RUNTESTFLAGS="" ""exec_prefix=/usr/gFORTRAN"" ""infodir=/usr/gFORTRAN/info"" ""libdir=/usr/gFORTRAN/lib"" ""prefix=/usr/gFORTRAN"" ""tooldir=/usr/gFORTRAN/mips-sgi-irix6.5"" ""AR=ar"" ""AS=as"" ""CC=cc -save-temps"" ""CXX=c++"" ""LD=/usr/bin/ld"" ""LIBCFLAGS=-g -O2"" ""NM=nm"" ""PICFLAG="" ""RANLIB=:"" ""DESTDIR="" all-recursivegmake[2]: Entering directory `/usr/people/wstan/objdir/libbanshee'Making all in enginegmake[3]: Entering directory `/usr/people/wstan/objdir/libbanshee/engine'cc -save-temps -DHAVE_CONFIG_H -I. -I../../../gcc/libbanshee/engine -I..    -I../../../gcc/libbanshee/engine/../libcompat -I../../../gcc/libbanshee/engine/../include -I. -Ddeletes= -Dtraditional= -Dsameregion= -Dparentptr= -fno-strict-aliasing -g -O2 -c ../../../gcc/libbanshee/engine/array.cWarning: Malformed file option (-fn) in ""-fno-strict-aliasing""cc-3569 cc: ERROR  invalid macro definition:cc-1040 cc: ERROR  An identifier is expected.cc-1005 cc: ERROR  The source file "".deps/array.pp"" is unavailable.1 error and 2 catastrophic errors detected in the compilation of "".deps/array.pp"".Compilation terminated.gmake[3]: *** [array.o] Error 2gmake[3]: Leaving directory `/usr/people/wstan/objdir/libbanshee/engine'gmake[2]: *** [all-recursive] Error 1gmake[2]: Leaving directory `/usr/people/wstan/objdir/libbanshee'gmake[1]: *** [all-recursive-am] Error 2gmake[1]: Leaving directory `/usr/people/wstan/objdir/libbanshee'gmake: *** [all-libbanshee] Error 2",RESOLVED          FIXED      
10976,Daniel Berlin,"[bugzilla] URL for ""target milestone"" is wrong","When I look at a bug, for example http://gcc.gnu.org/bugzilla/show_bug.cgi?id=10962, the URL for the ""target milestone"" description is <a href=""http://gcc/gnu.org"">, which is wrong.This can be seen in the source fragment       <td align=""right"">          <b>              <a href=""http://gcc/gnu.org"">            <u>T</u>arget Milestone:</a>          </b>        </td><td>    <label for=""target_milestone"" accesskey=""t"">      <select name=""target_milestone"" id=""target_milestone"">          <option value=""3.3.1"" selected>3.3.1          </option>          <option value=""3.4"">3.4          </option>          <option value=""---"">---          </option>      </select>    </label>  </td>",RESOLVED          FIXED      
12781,Daniel Berlin,ICE in cprop_into_phis,"The tree-ssa compiler recently stopped building bfd.  The change happened sometime on Oct 24 or 25.  I'll upload the preprocessed test source.$ gcc --versiongcc (GCC) 3.5-tree-ssa 20031025 (merged 20031017)Copyright (C) 2003 Free Software Foundation, Inc.This is free software; see the source for copying conditions.  There is NOwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.$ gcc -O1 syms.i../../src/HEAD-2003-10-25/bfd/syms.c: In function`_bfd_stab_section_find_nearest_line': ../../src/HEAD-2003-10-25/bfd/syms.c:891: internal compiler error: incprop_into_phis, at tree-ssa-dom.c:1696Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.",RESOLVED          FIXED      
13209,Daniel Berlin,Precompiled header support is broken with the zone collector,I see lots of PCH failures with the zone collector.  See for example http://gcc.gnu.org/ml/gcc-testresults/2003-11/msg01120.html,RESOLVED          FIXED      
13177,Daniel Berlin,"[tree-ssa] ICE in calculate_live_on_entry, at tree-ssa-live.c:753","Found builing frv-elf gdb with tree-ssa compiler.  I'll upload the .i file.$ gcc --versiongcc (GCC) 3.5-tree-ssa 20031123 (merged 20031111)Copyright (C) 2003 Free Software Foundation, Inc.This is free software; see the source for copying conditions.  There is NOwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.$ gcc -O1 -c completer.isymbol_start_213 is defined  in BB19, by:symbol_start_213 = pretmp.261_30It is also live-on-entry to entry BB 0 So it appears to have multiple defs.../../src/HEAD-2003-11-23/gdb/completer.c: In function `location_completer': ../../src/HEAD-2003-11-23/gdb/completer.c:200: internal compiler error: incalculate_live_on_entry, at tree-ssa-live.c:753Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.",RESOLVED          FIXED      
12936,Daniel Berlin,[tree-ssa] ICE in expr_phi_insertion at -O3,"I'll upload the .i file.$ gcc --versiongcc (GCC) 3.5-tree-ssa 20031107 (merged 20031026)Copyright (C) 2003 Free Software Foundation, Inc.This is free software; see the source for copying conditions.  There is NOwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. $ gcc -O3 -c match.i../../src/HEAD-2003-11-07/gcc/fortran/match.c: In function `gfc_match': ../../src/HEAD-2003-11-07/gcc/fortran/match.c:616: internal compiler error: treecheck: accessed operand 2 of va_arg_expr with 1 operands in expr_phi_insertion,at tree-ssa-pre.c:770Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.",RESOLVED          FIXED      
12870,Daniel Berlin,"ICE: opnum_of_phi, at tree-ssa-pre.c:1151","gcc-Version 3.5-tree-ssa 20031030 (merged 20031026)  gcc -O2 -c xx.c xx.c: In function `g':  xx.c:5: internal compiler error: in opnum_of_phi, at tree-ssa-pre.c:1151",RESOLVED          FIXED      
12447,Daniel Berlin,[tree-ssa] ICE: segfault in require_phi,gcc -O2 -c xx.i xx.i: In function `d':  xx.i:6: internal compiler error: Segmentation fault,RESOLVED          FIXED      
35880,Pierre-Marie de Rodat,GNAT does not generate debugging information on imported entities,"GNAT (GCC) Ada does not generate symbolic debug for shared memory.'gdb' says""No definition of ""pacs_cp"" in current context.""comment ""pragma IMPORT"" staement and symbolic debug is present.complete details and step-by-step instructions in README.I have 'makefile' and short sample source to illustrate problem.",RESOLVED          FIXED      
78112,Pierre-Marie de Rodat,[7 regression] invalid DWARF generated by the compiler: DIE has multiple  AT_inline attributes,"Between 20161007 and 20161014, many libstdc++ tests started FAILing on (at leastMac OS X 10.7 and macOS 10.12.1, x86_64-apple-darwin11.4.2 and x86_64-apple-darwin16.1.0):FAIL: 23_containers/unordered_map/allocator/copy.cc (test for excess errors)FAIL: 23_containers/unordered_map/allocator/minimal.cc (test for excess errors)FAIL: 23_containers/unordered_map/allocator/move.cc (test for excess errors)FAIL: 23_containers/unordered_map/debug/construct5_neg.cc (test for excess errors)FAIL: 23_containers/unordered_map/debug/move_neg.cc (test for excess errors)and many more.FAIL: 23_containers/unordered_map/allocator/copy.cc (test for excess errors)Excess errors:warning: invalid DWARF generated by the compiler: DIE 0x000412a9 has multiple  AT_inline attributes in '/var/folders/zz/zyxvpxvq6csfxvn_n000087r00021y/T//ccj0diNw.o'.warning: invalid DWARF generated by the compiler: DIE 0x00044900 has multiple  AT_inline attributes in '/var/folders/zz/zyxvpxvq6csfxvn_n000087r00021y/T//ccj0diNw.o'.warning: invalid DWARF generated by the compiler: DIE 0x00045751 has multiple  AT_inline attributes in '/var/folders/zz/zyxvpxvq6csfxvn_n000087r00021y/T//ccj0diNw.o'.Maybe this is due to2016-10-13  Jakub Jelinek  <jakub@redhat.com>	* dwarf2out.c (gen_member_die): Handle inline static data member	definitions.but I haven't started reghunting yet.I meant to attach the assembler output (with -dA -fverbose-asm), but the machinewhere I ran the bootstrap is down currently.  Rainer",RESOLVED          FIXED      
43954,Daniel Franke,"[4.4 regression] gfortran does not support -Wp, -MD  for *.F","Hello,Like with gcc and g++, for compiling .F sources with gfortran, Ithankfully use automatic dependencies generator built into gcc's cpp.E.g. for    $ cat test.F    #include ""test.h""          program test          print *,'Hello World!'          print *,ZZZ          end    $ cat test.h    #define ZZZ 'Hello up there qqq!'gfortran-4.3 correctly generates .d file for make:    $ gfortran-4.3 -Wp,-MD,test.d test.F    $ cat test.d    test.o: test.F test.hbut gfortran-4.4 fails:    $ rm test.d    $ gfortran-4.4 -Wp,-MD,test.d test.F    f951: warning: command line option ""-MD"" is valid for C/C++/ObjC/ObjC++ but not for Fortran    $ cat test.d    cat: test.d: No such file or directoryI think gfortran-4.4 behaviour is incorrect, since .F files (contrastwith .f) by definition should be passed through preprocessor, and if so,why dropping automatic dependencies generation which worked in 4.3?I guess the regression is somehow related to the fact, that starting fromgcc-4.4, ""GNU Fortran now employs libcpp directly instead ofusing cc1 as an external preprocessor."" [1]    $ gfortran-4.3 -v -Wp,-MD,test.d test.F    Driving: gfortran-4.3 -v -Wp,-MD,test.d test.F -lgfortranbegin -lgfortran -lm -shared-libgcc    ...    gcc version 4.3.4 (Debian 4.3.4-6)    COLLECT_GCC_OPTIONS='-v' '-shared-libgcc' '-mtune=generic'     /usr/lib/gcc/i486-linux-gnu/4.3.4/cc1 -E -lang-fortran -traditional-cpp -D_LANGUAGE_FORTRAN -quiet -v -MD test.d test.F -mtune=generic -o /tmp/cclR3nYK.f    ...     /usr/lib/gcc/i486-linux-gnu/4.3.4/f951 /tmp/cclR3nYK.f -ffixed-form -quiet -dumpbase test.F -mtune=generic -auxbase test -version -fpreprocessed -fintrinsic-modules-path /usr/lib/gcc/i486-linux-gnu/4.3.4/finclude -o /tmp/cc0ZnWFl.s(compare to)    $ gfortran-4.4 -v -Wp,-MD,test.d test.F    Driving: gfortran-4.4 -v -Wp,-MD,test.d test.F -lgfortranbegin -lgfortran -lm -shared-libgcc    ...    gcc version 4.4.3 20100108 (prerelease) (Debian 4.4.2-9)    COLLECT_GCC_OPTIONS='-v' '-shared-libgcc' '-mtune=generic' '-march=i486'     /usr/lib/gcc/i486-linux-gnu/4.4.3/f951 test.F -ffixed-form -cpp /tmp/ccE2JRYl.f90 -quiet -v -MD test.d test.F -quiet -dumpbase test.F -mtune=generic -march=i486 -auxbase test -version -fintrinsic-modules-path /usr/lib/gcc/i486-linux-gnu/4.4.3/finclude -o /tmp/ccwptNMx.s    f951: warning: command line option ""-MD"" is valid for C/C++/ObjC/ObjC++ but not for FortranAnd since -MD was declared to be C/C++/ObjC/ObjC++ only option for ages(at least since 2003-06-01 d821d2 in gcc.git), now for 4.4. it does notwork. It worked for 4.3 because there `cc1 -E` is explicitly called asseparate step... And for 4.4. calling cc1 explicitly works too    $ /usr/lib/gcc/i486-linux-gnu/4.4.3/cc1 -E -D_LANGUAGE_FORTRAN -quiet -v -MD test.d test.F -o test.f    $ cat test.d    test.o: test.F test.hbut is of no help because cc1 is internal.--------Clearly this is functional regression to me. If possible please fix.Thanks beforehand,KirillP.S. this is somehow related to bug #31588[1] http://gcc.gnu.org/gcc-4.4/changes.html[2] http://git.infradead.org/gcc.git/commit/d821d2e95e00a93f2edb5f6d3decc9c83ceb9c61$ gfortran-4.4 -vUsing built-in specs.Target: i486-linux-gnuConfigured with: ../src/configure -v --with-pkgversion='Debian 4.4.2-9' --with-bugurl=file:///usr/share/doc/gcc-4.4/README.Bugs --enable-languages=c,c++,fortran,objc,obj-c++ --prefix=/usr --enable-shared --enable-multiarch --enable-linker-build-id --with-system-zlib --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.4 --program-suffix=-4.4 --enable-nls --enable-clocale=gnu --enable-libstdcxx-debug --enable-objc-gc --enable-targets=all --with-arch-32=i486 --with-tune=generic --enable-checking=release --build=i486-linux-gnu --host=i486-linux-gnu --target=i486-linux-gnuThread model: posixgcc version 4.4.3 20100108 (prerelease) (Debian 4.4.2-9)",RESOLVED          FIXED      
34533,Daniel Franke,DTIME returns total process time and not since last invocation,"Found by Dominique.For the first call, DTIME and ETIME (should) behave identical: The elapsed time since invocation should be returned. (This works.)ETIME does this also for the following calls, but DTIME shall do the following:""Subsequent invocations of DTIME return values accumulated since the previous invocation.""However, gfortran currently calls _gfortran_etime_sub for both, which in turn calls getrusage. Thus ETIME is ok, but for DTIME the wrong result is returned.Documentation:http://gcc.gnu.org/onlinedocs/gfortran/DTIME.htmlhttp://gcc.gnu.org/onlinedocs/gfortran/ETIME.html",RESOLVED          FIXED      
34536,Daniel Franke,Make support of 2.0**-3*5 tighter: Print warning by default,"The problem with  2.0**-3*5is whether it should be interpreted as ""2.0**(-3) * 5"" or as ""2.0**(-3*5)"". gfortran does the former, ifort the latter.g95, openf95, sunf95 and (of cause) NAG f95 reject it always.ifort: Accepts it, unless -stand f* is used.gfortran: Warning for -pedantic, Error for -std=f*. Nothing for -Wall.I would suggest to print at least a warning by default; or to shift it to legacy, but having it without diagnostics by default can lead to wrong results.",RESOLVED          FIXED      
34495,Daniel Franke,[4.3 Regression] accepts invalid initialization expressions withTRANSFER,"Adapted from a test case from c.l.f, from James van Buskirk:$ cat foo.f90 program main   integer, parameter :: ipi = 1078530011   real pi   parameter(pi=transfer(ipi,pi))   real, parameter :: z = transfer(ipi,z)   real, parameter :: y = real(1,kind(y))   write(*,*) pi, z, yend$ gfortran -std=f95 -pedantic foo.f90 $ ./a.out   3.1415927       3.1415927      1.00000000 JvB's explanation:# the second# and third treat transfer as a specification inquiry even thought# that is not permitted even in f03, and the fourth has that pesky# REAL intrinsic, which is not an elemental function of type integer# or character.gfortran 4.2 still generates some error messages:$ gfortran-4.2 foo.f90 foo.f90:4.29:   parameter(pi=transfer(ipi,pi))                            1Error: Parameter 'pi' at (1) has not been declared or is a variable, which does not reduce to a constant expressionfoo.f90:5.35:   real, parameter :: z = transfer(ipi,z)                                  1Error: TRANSFER intrinsic not implemented for initialization at (1)",RESOLVED          FIXED      
34324,Daniel Franke,Module files on CRLF systems,Someone reported a problem with the Windows binaries that is related to how we deal with CRLF-formatted module files. This issue can be reproduced on non-CRLF systems by the following:$ cat a.f90                   module fooend module foo$ gfortran -c a.f90$ cat b.f90 use fooend$ gfortran -c b.f90$ unix2dos foo.mod $ gfortran -c b.f90Fatal Error: Reading module foo at line 3 column 2: Bad name,RESOLVED          FIXED      
30947,Daniel Franke,intrinsic: ALARM,"$> cat alarm.f90program test_alarm  integer(kind=1) :: sec  = 1  integer(kind=1) :: h    = 0  integer(kind=1) :: stat = -1  CALL alarm(sec, h, stat)  if (stat == -1) call abort()end program$> gfortran-svn -fdump-tree-original alarm.f90$> cat alarm.f90.003t.originalMAIN__ (){  static int1 h = 0;  static int1 stat = -1;  static int1 sec = 1;  _gfortran_set_std (70, 127, 0, 0);  {    int4 D.1005;    int4 D.1004;    int4 D.1003;    D.1003 = (int4) sec;    D.1004 = (int4) h;    D.1005 = (int4) stat;    _gfortran_alarm_sub_int (&D.1003, &D.1004, &D.1005);  }  if (stat == -1)    {      _gfortran_abort ();    }}Here, the status (optional return value) is lost.",RESOLVED          FIXED      
32945,Daniel Franke,[4.3 regression] ICE with initialization expressions,"$> cat ice.f90MODULE EGOPS_UtilitiesCONTAINS  FUNCTION dirname(fullfilename)    Character(LEN=*),  Intent(In)    :: fullfilename    Character(LEN=LEN(fullfilename)) :: dirname    dirname = ''  END FUNCTIONEND MODULE EGOPS_UtilitiesMODULE AtmoIono  CHARACTER(LEN=10), PARAMETER :: ComputeDryAtmModel = 'Dry Atm.  '  type AtmModel    character (len=len(ComputeDryAtmModel)) :: moistDryStr  end type AtmModelEND MODULE AtmoIonomodule AtmoIonoSphere  use AtmoIono  use EGOPS_Utilitiesend module AtmoIonoSphere$> gfortran-svn -g -Wall -c ice.f90:6: internal compiler error: Segmentation faultPlease submit a full bug report,Backtrace:Program received signal SIGSEGV, Segmentation fault.0x08064163 in check_specification_function (e=<value optimized out>) at ../../../gcc/gcc/fortran/expr.c:696696       sym = e->symtree->n.sym;(gdb) bt#0  0x08064163 in check_specification_function (e=<value optimized out>) at ../../../gcc/gcc/fortran/expr.c:696#1  0x0806505d in gfc_is_constant_expr (e=0x88c2d70) at ../../../gcc/gcc/fortran/expr.c:740#2  0x080a2482 in resolve_symbol (sym=0x88c2b10) at ../../../gcc/gcc/fortran/resolve.c:6695#3  0x080ac99d in traverse_ns (st=0x88c3460, func=0x80a13f0 <resolve_symbol>) at ../../../gcc/gcc/fortran/symbol.c:2875#4  0x080ac983 in traverse_ns (st=0x88c2c30, func=0x80a13f0 <resolve_symbol>) at ../../../gcc/gcc/fortran/symbol.c:2878#5  0x0809da06 in resolve_types (ns=0x88ae4f0) at ../../../gcc/gcc/fortran/resolve.c:8444#6  0x080a13cc in gfc_resolve (ns=0x88ae4f0) at ../../../gcc/gcc/fortran/resolve.c:8523#7  0x08093720 in gfc_parse_file () at ../../../gcc/gcc/fortran/parse.c:3288#8  0x080b8f2d in gfc_be_parse_file (set_yydebug=0) at ../../../gcc/gcc/fortran/f95-lang.c:301#9  0x0832cf50 in toplev_main (argc=2, argv=0xbfaa2064) at ../../../gcc/gcc/toplev.c:1043#10 0x080ffeef in main (argc=143319578, argv=0x88ae201) at ../../../gcc/gcc/main.c:35",RESOLVED          FIXED      
32906,Daniel Franke,Error: Parameter array ... cannot be automatic or assumed shape,"--------------------------------------------program test_gfortranimplicit none   !test case 1, similar to PR26074   integer, parameter :: len = 1   integer, parameter :: arr(max(len,1)) = (/1/)   !test case 2   character(len=*), dimension (1),",RESOLVED          FIXED      
32905,Daniel Franke,NAMELIST accepts types with ultimate POINTER components,"F95, 5.4 Namelist Statement, 1st Constraint:""A namelist-group-object shall not be [...] a pointer, a variable of a type that has an ultimate component that is a pointer [...].""This code is accepted by gfortran-20070725:TYPE :: tt  INTEGER, POINTER :: xEND TYPETYPE(tt) :: tNAMELIST /nl2/ tEND",RESOLVED          FIXED      
32876,Daniel Franke,Wrongly accepts private items in public NAMELISTs,"integer,private :: i  namelist /c/ iis correctly diagnosed as invalid: ""PRIVATE symbol '%s' cannot be member of PUBLIC namelist at %L""; however, for derived types this fails. Note that NAG f95 only gives an error for ""B"" and not for ""A"":Error: mod.f90, line 14: PUBLIC NAMELIST /B/ has member T2 with PRIVATE components(I don't know in how far ""A"" is valid or what happens if T1 or T2 contains other type(*)s which are private.)module x  type tp1    integer, private :: i  end type tp1  type tp2    private    integer :: i  end type tp2  type(tp1) :: t1  type(tp2) :: t2  integer :: j1,j2  namelist /a/ t1,j  namelist /b/ t2,jend module x",RESOLVED          FIXED      
31818,Daniel Franke,Wrongly accepts namelists with assumed-shape arrays,"subroutine test(cha)  implicit none  character(len=10) :: cha(:)  namelist /z/  chaend subroutine testSee also:  gfortran.dg/namelist_14.f90This is invalid:""5.4 NAMELIST statement""""C574 (R553) A namelist-group-object shall not be an assumed-size array.""Other compilers reject this:ifort:  A NAMELIST group object must not be an array with nonconstant bounds. [CHA]g95:  Variable 'cha' at (1) must have an explicit shape to be in a NAMELISTNAG f95: Namelist-group-object CHA is an array dummy with non-constant bounds",RESOLVED          FIXED      
32867,Daniel Franke,[4.3 Regression]  ICE on nested initialization expressions,"This patchhttp://gcc.gnu.org/ml/gcc-cvs/2007-07/msg00685.htmlcauses(gdb) r readdata.f90 -quiet -dumpbase readdata.f90 -mtune=generic -auxbase readdata -O2 -version -ffast-math -o readdata.s -fintrinsic-modules-path /export/gnu/import/rrs/126826/usr/lib/gcc/x86_64-unknown-linux-gnu/4.3.0/fincludeStarting program: /export/gnu/import/rrs/126826/usr/libexec/gcc/x86_64-unknown-linux-gnu/4.3.0/f951 readdata.f90 -quiet -dumpbase readdata.f90 -mtune=generic -auxbase readdata -O2 -version -ffast-math -o readdata.s -fintrinsic-modules-path /export/gnu/import/rrs/126826/usr/lib/gcc/x86_64-unknown-linux-gnu/4.3.0/fincludeGNU F95 version 4.3.0 20070722 (experimental) (x86_64-unknown-linux-gnu)        compiled by GNU C version 3.4.6 20060404 (Red Hat 3.4.6-8), GMP version 4.2.1, MPFR version 2.2.1.GGC heuristics: --param ggc-min-expand=100 --param ggc-min-heapsize=131072Program received signal SIGSEGV, Segmentation fault.0x00000000004072b5 in gfc_compare_string (a=0xe78f90, b=0xe79710)    at ../../src/gcc/fortran/arith.c:11711171          ac = (unsigned char) ((i < alen) ? a->value.character.string[i] : ' ');(gdb) p a->value$1 = {logical = 15170912, integer = {{_mp_alloc = 15170912, _mp_size = 0,      _mp_d = 0xe660fd}}, real = {{_mpfr_prec = 15170912,      _mpfr_sign = 15098109, _mpfr_exp = 14833104, _mpfr_d = 0x0}}, complex = {    r = {{_mpfr_prec = 15170912, _mpfr_sign = 15098109, _mpfr_exp = 14833104,        _mpfr_d = 0x0}}, i = {{_mpfr_prec = 0, _mpfr_sign = 0, _mpfr_exp = 0,        _mpfr_d = 0x0}}}, op = {operator = 15170912, uop = 0xe660fd,    op1 = 0xe255d0, op2 = 0x0}, function = {actual = 0xe77d60,    name = 0xe660fd ""__trim_1"", isym = 0xe255d0, esym = 0x0}, character = {    length = 15170912, string = 0xe660fd ""__trim_1""}, constructor = 0xe77d60}(gdb) p a->value.character$2 = {length = 15170912, string = 0xe660fd ""__trim_1""}(gdb) list11661167      for (i = 0; i < len; i++)1168        {1169          /* We cast to unsigned char because default char, if it is signed,1170             would lead to ac < 0 for string[i] > 127.  */1171          ac = (unsigned char) ((i < alen) ? a->value.character.string[i] : ' ');1172          bc = (unsigned char) ((i < blen) ? b->value.character.string[i] : ' ');11731174          if (ac < bc)1175            return -1;(gdb) p b->value.character.string$3 = 0xe660fd ""__trim_1""(gdb) p a->value.character.string$4 = 0xe660fd ""__trim_1""(gdb) p i$5 = 741123(gdb) p len$6 = 15180528(gdb) bt#0  0x00000000004072b5 in gfc_compare_string (a=0xe78f90, b=0xe79710)    at ../../src/gcc/fortran/arith.c:1171#1  0x0000000000407393 in gfc_compare_expr (op1=0xe78f90, op2=0xe79710)    at ../../src/gcc/fortran/arith.c:1126#2  0x000000000045567a in resolve_code (code=0xe78b30, ns=0xe6e770)    at ../../src/gcc/fortran/resolve.c:4541#3  0x00000000004558e4 in gfc_resolve_blocks (b=0xe75530, ns=0xe6e770)    at ../../src/gcc/fortran/resolve.c:5699#4  0x0000000000454150 in resolve_code (code=0xe71740, ns=0xe6e770)    at ../../src/gcc/fortran/resolve.c:5758#5  0x000000000045771b in resolve_codes (ns=0xe6e770)    at ../../src/gcc/fortran/resolve.c:8463#6  0x00000000004576da in resolve_codes (ns=0xe63e70)    at ../../src/gcc/fortran/resolve.c:8455#7  0x0000000000457755 in gfc_resolve (ns=0xe63e70)    at ../../src/gcc/fortran/resolve.c:8482#8  0x000000000044acac in gfc_parse_file ()    at ../../src/gcc/fortran/parse.c:3270#9  0x000000000046d7ce in gfc_be_parse_file (set_yydebug=<value optimized out>)    at ../../src/gcc/fortran/f95-lang.c:301#10 0x00000000005f9f7e in toplev_main (argc=<value optimized out>,    argv=<value optimized out>) at ../../src/gcc/toplev.c:1044#11 0x00000033b381c3fb in __libc_start_main () from /lib64/tls/libc.so.6---Type <return> to continue, or q <return> to quit---#12 0x00000000004053da in _start ()(gdb)Daniel, does it ring a bell?",RESOLVED          FIXED      
32710,Daniel Franke,ICE: namelist and subroutine with the same name,"program samenamecontains  subroutine readInput    implicit none    integer:: a,b,c    NAMELIST /name/ a,b,c    read(5,nml=name)  end subroutine readInput  subroutine name()  end subroutine nameend programthis code fails with the following error (gfortran 4.3 and 4.1.3):samename.f90: In function ‘readinput’:samename.f90:6: internal compiler error: Segmentation faultfor gfortran 4.2 the error message is:samename.f90: In function ‘readinput’:samename.f90:6: internal compiler error: in gfc_typenode_for_spec, at fortran/trans-types.c:693just defining the namelist works fine, only the read statement triggers the ICE",RESOLVED          FIXED      
32704,Daniel Franke,#NAME?,"PR 31400 added -static-libgfortran, but a documentation is missing.(One should probably also update http://gcc.gnu.org/wiki/GFortranGettingStarted)",RESOLVED          FIXED      
31129,Daniel Franke,No warning on unused parameters,"I think this is what #31124 is really about.Consider the following:program fredinteger::iinteger,parameter::j=9endWith -Wunused a warning is generated for i, but not j.  (At least with my 4.2 prerelease.)",RESOLVED          FIXED      
29876,Daniel Franke,ICE on bad operator in ONLY clause of USE statement,"The first error below is expected, but the second one should not be printed out that way :)$ cat translation_tests.f90 module fooend module fooprogram test  use foo, only : bar, operator(.none.)end program test$ gfortran translation_tests.f90translation_tests.f90:5.17:  use foo, only : bar, operator(.none.)                1Error: Symbol 'bar' referenced at (1) not found in module 'foo'translation_tests.f90:5.39:  use foo, only : bar, operator(.none.)                                      1Internal Error at (1):gfc_code2string(): Bad code",RESOLVED          FIXED      
24784,Daniel Franke,"Warning about unused routine argument should not read ""unused variable""","The Fortran code$ cat unused.f90 subroutine a(x)  implicit none  real xend subroutine agives the warning$ ~/gcc/bin/gfortran -c unused.f90 -Wallunused.f90: In function ‘a’:unused.f90:1: warning: unused variable ‘x’when compiled with$ ~/gcc/bin/gfortran --versionGNU Fortran 95 (GCC) 4.1.0 20051030 (experimental)I find the text of this warning confusing, because the unused entity is an argument, not a variable.  It is always possible to remove unused local variables from a routine's body, but changing a routine's list of arguments is sometimes not feasible.  Warnings about unused variables and unused arguments should therefore be separate.  The warning should instead read ""unused argument 'x'"".",RESOLVED          FIXED      
25094,Daniel Franke,Procedure with public generic identifier allowed to have argument of private type,"using GNU Fortran 95 (GCC) 4.1.0 20051126 (prerelease)  with '-g -pedantic -std=f95', I get a bad / no diagnostic for the following invalid code:MODULE M1 TYPE T1  INTEGER :: I END TYPE T1 INTERFACE I  MODULE PROCEDURE F1 END INTERFACE PRIVATE :: T1,F1 PUBLIC  :: ICONTAINS INTEGER FUNCTION F1(D)  TYPE(T1) :: D END FUNCTIONEND MODULE USE M1 END",RESOLVED          FIXED      
17711,Daniel Franke,Wrong operator name in error message,"With GNU Fortran 95 (GCC 4.0.0 20040928 (experimental)), I get the error message   In file /home/eschnett/Calpha/Cactus/configs/einstein-gcc-debug/build/BHInfo/Initial.f90:130      if( allocated( bhinfo_pos ) == .false. ) allocate( bhinfo_pos(n_holes,3) )        1 Error: Operands of comparison operator '.eq.' at (1) are LOGICAL(4)/LOGICAL(4)  In file /home/eschnett/Calpha/Cactus/configs/einstein-gcc-debug/build/BHInfo/Initial.f90:131    The offending code uses the operator ""=="", but the error message speaks of "".eq."".  The error message should use the same operator name as the code.",RESOLVED          FIXED      
32633,Daniel Franke,bogus error,"MODULE test  IMPLICIT NONE  CHARACTER(len=1), PARAMETER :: backslash = '\\'  PUBLIC :: backslashEND MODULE> gfortran  test.f90test.f90:4.21:  PUBLIC :: backslash                    1Error: PARAMETER attribute conflicts with SAVE attribute in 'backslash' at (1)",RESOLVED          FIXED      
20373,Daniel Franke,INTRINSIC symbols can be given the wrong type,"INTRINSIC dsqrtINTEGER dsqrtENDcompiles without giving an error.  This is invalid: and intrinsic always has thetype defined by 13.13 in the standard, it may only be reaffirmed but notoverwritten.",RESOLVED          FIXED      
31580,Daniel Franke,Better error message for not-found operator,"Example:  implicit none  real :: a,b  if(a .nonex. b) stop  endExpected:  Error: Unknown user operator 'nonex' at (1)Current gfortran result:  Error: Operands of user operator 'nonex' at (1) are REAL(4)/REAL(4)NAG f95:  Error: x.f90, line 3: Unknown operator .NONEX.ifort:  fortcom: Error: x.f90, line 3: Dotted string neither a defined operator nor a structure component [NONEX]sunf95:  ""x.f90"", Line = 3, Column = 8: ERROR: The operator ""nonex"" has not been declared as a user defined operator.I though one could simply change resolve.c's resolve_operator such as e.g.Index: resolve.c===================================================================--- resolve.c   (revision 123843)+++ resolve.c   (working copy)@@ -2242,6 +2242,14 @@       goto bad_op;     case INTRINSIC_USER:+      if (NULL == gfc_find_symtree (gfc_current_ns->uop_root,+                                   e->value.op.uop->name))+       {+         sprintf (msg, _(""Unknown operator '%s'  at %%L""),+                  e->value.op.uop->name);+       }+      else+       {       if (op2 == NULL)        sprintf (msg, _(""Operand of user operator '%s' at %%L is %s""),                 e->value.op.uop->name, gfc_typename (&op1->ts));@@ -2249,6 +2257,7 @@        sprintf (msg, _(""Operands of user operator '%s' at %%L are %s/%s""),                 e->value.op.uop->name, gfc_typename (&op1->ts),                 gfc_typename (&op2->ts));+       }       goto bad_op;However, this fails as ""gfc_get_uop"" automatically creates the symbol if it cannot find it. And putting it into matchexp.c's gfc_match_defined_op_name is of cause way too early.",RESOLVED          FIXED      
32467,Daniel Franke,structure containing allocatable array is accepted in COPYIN clause,"Description:This negative test case was derived from OpenMP test omp1/F2_6_1_5a.f90.  Onp. 85 of the OpenMP API Version 2.5 May 2005 line 22 states:""* Allocatable arrays may not appear in a copyin clause.""The structure struct1 is made up of an allocatable array a.  The structureappears in a threadprivate directive and in a copyin clause.  This errorshould probably be detected at compile-time.> gfortran -vUsing built-in specs.Target: x86_64-suse-linuxConfigured with: ../xt-gcc-4.2.0/configure --prefix=/opt/gcc/4.2.0/snos --disable-nls --libdir=/opt/gcc/4.2.0/snos/lib --enable-languages=c,c++,fortran --with-gxx-include-dir=/opt/gcc/4.2.0/snos/include/g++ --with-slibdir=/opt/gcc/4.2.0/snos/lib --with-system-zlib --enable-shared --enable-__cxa_atexit x86_64-suse-linuxThread model: posixgcc version 4.2.0 20070514 (rpm:4)> cat bug2832.f90! Derived from OpenMP test omp1/F2_6_1_5a.f90      use omp_lib      implicit none      integer, parameter :: NT = 4      integer :: nThreads(NT)      type structure_1          integer, allocatable :: a(:)      end type structure_1      type(structure_1),save :: struc1!$omp threadprivate(struc1)!$    call omp_set_dynamic(.true.)!$    call omp_set_num_threads(NT)      allocate(struc1 % a(2))      struc1 % a(1) = 1      struc1 % a(2) = 2!$omp parallel copyin(struc1)      nThreads(omp_get_thread_num()+1) = struc1 % a(1)!$omp end parallel      print *, nThreads      deallocate(struc1 % a)      END> ftn -O3 -fopenmp -o x bug2832.f90/opt/xt-pe/2.1/bin/snos64/ftn: INFO: linux target is being used> aprun -n 1 ./x           1           0           0           0Application 217647 resources: utime 0, stime 0NOTE: A compile-time message rejecting the use of struc1 in copyin is expected.Or, the restriction imposed by the API version 2.5 should be ignored and thecorrect answer produced, which is four 1's.------Note: ftn is an alias for:/opt/gcc/4.2.0/bin/../snos/bin/gfortran -static -v -I/opt/xt-mpt/2.1/mpich2-64/GP/include -I/opt/xt-mpt/2.1/mpich2-64/GP/include -L/opt/xt-mpt/2.1/mpich2-64/GP/lib -I/opt/acml/3.6.1/gnu64/include -I/opt/xt-libsci/10.1.0/gnu/snos64/include -I/opt/xt-libsci/10.1.0/gnu/snos64/include/superlu -I/opt/xt-mpt/2.1/sma/P/include -L/opt/acml/3.6.1/gnu64/lib -L/opt/xt-libsci/10.1.0/gnu/snos64/lib -L/opt/xt-mpt/2.1/sma/P/lib -lmpichf90 -lsci -lacml -lsma -lmpichf90 -lmpich -lrt -D__CRAYXT_COMPUTE_LINUX_TARGET -D__TARGET_LINUX__ -fno-second-underscore -I/notbackedup/users/rsrel/rs64.DEV.070604.Mon/install/include -I/opt/xt-catamount/2.1/catamount/linux/include -I/opt/xt-service/2.1/include -L/notbackedup/users/rsrel/rs64.DEV.070604.Mon/install/lib/snos64 -L/opt/xt-pe/2.1/cnos/linux/64/lib -L/opt/xt-mpt/2.1/lib/snos64 -L/opt/xt-service/2.1/lib/snos64 -Wl,--start -lpct -lalpslli -lalpsutil -lportals -lpthread -Wl,--end -lgfortranbegin -lgfortran -lm",RESOLVED          FIXED      
31473,Daniel Franke,gfortran does not detect duplicate EXTERNAL or INTRINSIC declarations,gfortran does not detect duplicate EXTERNAL or INTRINSIC declarations:SUBROUTINE test217EXTERNAL test217aEXTERNAL test217aENDSUBROUTINE test218INTRINSIC absINTRINSIC absEND,RESOLVED          FIXED      
32002,Daniel Franke,[4.2 regression] insufficient conformance check when assigning the result of an elemental function to an array,"The problem shown here applies to elemental functions in general, not only (elemental) intrinsics, see below for an example:$> cat assign.f90real :: a(3) = 0.0, b(2) = (/ 0.0, 0.1 /)a = COS(b)print *, aend$> gfortran-svn assign.f90 && ./a.out   1.000000      0.9950042       1.000000$> ifort -warn all assign.f90 && ./a.outfortcom: Error: assign.f90, line 2: The shapes of the array expressions do not conform.   [A]a = COS(b)^compilation aborted for assign.f90 (code 1)$> sunf95 -w4 assign.f90 && ./a.outa = COS(b)  ^""assign.f90"", Line = 2, Column = 3: ERROR: The left and right hand sides of this array syntax assignment must be conformable arrays.f90comp: 4 SOURCE LINESf90comp: 1 ERRORS, 0 WARNINGS, 0 OTHER MESSAGES, 0 ANSISame example as above with elemental function:$> cat assign.f90real :: a(3) = 0.0, b(2) = (/ 0.0, 0.1 /)a = f(b)print *, acontains  real elemental function f(x)    real, INTENT(iN) :: x    f = cos(x)  end functionend$> gfortran-svn assign.f90 && ./a.out   1.000000      0.9950042       1.000000",RESOLVED          FIXED      
31929,Daniel Franke,[4.1/4.2 only] atan2 accepts non-conforming array shapes,"The following code is invalid as shapes of X and Y are not identical:$> cat atan2.f90real :: x(3), y(2)     ! same rank but different shapesx = atan2(x,y)end$> gfortran-svn -fdump-tree-original atan2.f90$> cat atan2.f90.003t.originalMAIN__ (){  real4 y[2];  real4 x[3];  _gfortran_set_std (68, 127, 0, 0, 0);  {    int4 S.0;    S.0 = 1;    while (1)      {        if (S.0 > 3) goto L.1;        x[S.0 + -1] = __builtin_atan2f (x[S.0 + -1], y[S.0 + -1]);        S.0 = S.0 + 1;      }    L.1:;  }}$> gfortran-svn -vgcc version 4.3.0 20070502 (experimental)",RESOLVED          FIXED      
31919,Daniel Franke,[4.1/4.2 only] min/max do not check array conformance,"On amd64 debian gfortran fails (both trunk and recent 4.2 from GFortran wiki):module materials   implicit none   integer,parameter :: dr = kind(1.0d0)   private   type md_field       real(dr),dimension(1:3,1:99) :: realspeed       real(dr),dimension(1:99) :: mass,kinenergy   end type md_fieldcontains   function getTemperature(x,selector) result(temp)      type(md_field),intent(in) :: x;      integer,dimension(:),intent(in),optional :: selector;      real(kind=dr) :: temp;! realspeed has wrong dimensions      print *,min(x % kinenergy,x % realspeed)   end function getTemperatureend module materialsOutput is:$ gfortran-trunk matbug.F90matbug.F90: In function &#8216;gettemperature&#8217;:matbug.F90:12: internal compiler error: in fold_binary, at fold-const.c:8923Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.It's not valid I guess, but gfortran should not fail.",RESOLVED          FIXED      
31930,Daniel Franke,[4.1/4.2 only] bes[jy]n intrinsics do not follow definition of elemental functions,"F95, 7.1.5, Conformability rules for elemental operations""An elemental operation is an intrinsic operation or a de&#64257;ned elemental operation. Two entities are in shape conformance if both are arrays of the same shape, or one or both are scalars.""Thus, for bes[jy]n the following should be allowed: 1. n scalar, x scalar 2. n array,  x scalar 3. n scalar, x array 4. n array,  x array  (arrays of same shape)$> cat besxy.f90real :: x(2)integer :: n(2)x = besjn(n, x)end$>gfortran-svn besxy.f90besxy.f90:3.10:x = besjn(n, x)         1Error: 'ncopies' argument of 'besjn' intrinsic at (1) must be a scalarIn addition, the name of the dummy argument N should not be NCOPIES.",RESOLVED          FIXED      
32001,Daniel Franke,[4.3 regression] MAX intrinsic with large number of arguments,"Following the SPEC report at http://gcc.gnu.org/ml/fortran/2007-05/msg00326.html, here's a minimal reproducer:$ cat a.f90  integer, dimension(10,10) :: i1,i2,i3,i4,i5,i6,i7,i8,i9,i10,i11,i12,i13  integer, dimension(10) :: j  print *, max(i1,i2,i3,i4,i5,i6,i7,i8,i9,i10,i11,i12,i13,j)  end$ gfortran a.f90a.f90:0: internal compiler error: Segmentation fault",RESOLVED          FIXED      
31760,Daniel Franke,missing elemental applicability,"The gfortran intrinsics ERF,BESXX cannot be used as elemental.",RESOLVED          FIXED      
30546,Daniel Franke,[4.2/4.3 regression] build fail in libgomp when building from SVN because makeinfo is missing,"While it was bootstrapping fine on 2006-10-21, mainline now fails to build on my mingw setup because libgomp wants to run makeinfo, which I don't have. It says make can be buggy, but it's not (it's GNU make 3.79.1).if /home/coudert/trunk/missing makeinfo --split-size=5000000  -I ../../../trunk/libgomp/../gcc/doc/include -I ../../../trunk/libgomp \ -o libgomp.info `test -f 'libgomp.texi' || echo '../../../trunk/libgomp/'`libgomp.texi; \then \  rc=0; \else \  rc=$?; \  $restore $backupdir/* `echo ""./libgomp.info"" | sed 's|[^/]*$||'`; \fi; \rm -rf $backupdir; exit $rcWARNING: `makeinfo' is missing on your system.  You should only need it if         you modified a `.texi' or `.texinfo' file, or any other file         indirectly affecting the aspect of the manual.  The spurious         call might also be the consequence of using a buggy `make' (AIX,         DU, IRIX).  You might want to install the `Texinfo' package or         the `GNU make' package.  Grab either from any GNU archive site.make[2]: *** [libgomp.info] Error 1make[2]: Leaving directory `/home/coudert/ibin/i386-pc-mingw32/libgomp'",RESOLVED          FIXED      
30540,Daniel Franke,Document default value of implementation-dependent OpenMP settings,"http://gcc.gnu.org/onlinedocs/libgomp.pdf2.1 omp_get_dynamic – Dynamic teams settingetc.Here, the default value is not documented; it can be found in""3 Environment Variables"" (""If undefined, dynamic adjustment is disabled by default.""), but this is not obvious. Especially, since the omp_get_* functions only link to omp_set_* and not to the OMP_* environment variables.And OMP_NUM_THREADS's default setting is completely undefined; does it use by default one or the maximal number of available processors?",RESOLVED          FIXED      
28209,Daniel Franke,None of the GOMP_* environment variables are documented,"While watching Diego give his talk, I decided to look for the environment variables to see what all the variables he was talking about.  I could not find them.  Even the new ones with proposed patches in the last month or two:http://gcc.gnu.org/ml/gcc-patches/2006-05/msg00982.htmlhttp://gcc.gnu.org/ml/gcc-patches/2006-06/msg00493.htmlThey don't have documentation of the new enviroment.",RESOLVED          FIXED      
31103,Martin Michlmayr,[4.3 Regression] same canonical type node for VLAs,"warning: same canonical type node for different types - with long int% /usr/lib/gcc-snapshot/bin/g++ -c -g -O2 icu-dtfmtsym.ii dtfmtsym.cpp: In member function 'void icu_3_6::DateFormatSymbols::setMonths(const icu_3_6::UnicodeString*, int32_t, icu_3_6::DateFormatSymbols::DtContextType, icu_3_6::DateFormatSymbols::DtWidthType)':dtfmtsym.cpp:738: warning: same canonical type node for different types icu_3_6::UnicodeString [(longint)iftmp.95] and icu_3_6::UnicodeString [(long int)iftmp.95] <array_type 0x2b142b100600    type <record_type 0x2b142b13b600 UnicodeString sizes-gimplified addressable asm_written tree_2 needs-constructing type_1 type_4 type_5 type_6 BLK        size <integer_cst 0x2b142ab7be40 constant invariant 320>        unit size <integer_cst 0x2b142ab831e0 constant invariant 40>        align 64 symtab 722782848 alias set 4 canonical type 0x2b142b13b600        fields <field_decl 0x2b142b1b2000 D.4165 type <record_type 0x2b142b13b6c0 Replaceable>            ignored decl_6 BLK file ../common/unicode/unistr.h line 188            size <integer_cst 0x2b142aa0fb70 constant invariant 64>            unit size <integer_cst 0x2b142aa0fba0 constant invariant 8>            align 64 offset_align 128            offset <integer_cst 0x2b142aa0f720 constant invariant 0>            bit offset <integer_cst 0x2b142aa30360 constant invariant 0> context <record_type 0x2b142b13b600 UnicodeString> chain <const_decl 0x2b142b152280 kInvariant>> context <namespace_decl 0x2b142b11a340 icu_3_6>       needs-constructor needs-destructor X() X(constX&) new new[] delete delete[] this=(X&) n_parents=1 use_template=0 interface-only        pointer_to_this <pointer_type 0x2b142b1739c0> reference_to_this <reference_type 0x2b142b13f240> chain <type_decl 0x2b142b11add0 UnicodeString>>    needs-constructing type_4 BLK    size <mult_expr 0x2b142b593080        type <integer_type 0x2b142aa210c0 bit_size_type public unsigned sizetype DI size <integer_cst0x2b142aa0fb70 64> unit size <integer_cst 0x2b142aa0fba0 8>            align 64 symtab 0 alias set -1 canonical type 0x2b142aa21e40 precision 64 min <integer_cst 0x2b142aa30360 0> max <integer_cst 0x2b142aa30330 18446744073709551615>>        side-effects invariant        arg 0 <nop_expr 0x2b142b5930c0 type <integer_type 0x2b142aa210c0 bit_size_type>            side-effects invariant...",RESOLVED          FIXED      
35113,H.J. Lu,[4.3 Regression] g++.dg/ext/vector13.C doesn't work,[hjl@gnu-27 g++]$ /export/build/gnu/gcc/build-x86_64-linux/gcc/testsuite/g++/../../g++ -B/export/build/gnu/gcc/build-x86_64-linux/gcc/testsuite/g++/../../ /net/gnu-13/export/gnu/src/gcc/gcc/gcc/testsuite/g++.dg/ext/vector13.C  -nostdinc++ -I/export/build/gnu/gcc/build-x86_64-linux/x86_64-unknown-linux-gnu/libstdc++-v3/include/x86_64-unknown-linux-gnu -I/export/build/gnu/gcc/build-x86_64-linux/x86_64-unknown-linux-gnu/libstdc++-v3/include -I/net/gnu-13/export/gnu/src/gcc/gcc/libstdc++-v3/libsupc++ -I/net/gnu-13/export/gnu/src/gcc/gcc/libstdc++-v3/include/backward -I/net/gnu-13/export/gnu/src/gcc/gcc/libstdc++-v3/testsuite/util -fmessage-length=0   -ansi -pedantic-errors -Wno-long-long  -fno-show-column -S  -o vector13.s  /net/gnu-13/export/gnu/src/gcc/gcc/gcc/testsuite/g++.dg/ext/vector13.C:6: error: zero-size array ‘x’[hjl@gnu-27 g++]$,RESOLVED          FIXED      
32597,patchapp@dberlin.org,New operation with empty parameter pack does not value-initialize,"The following program fails because when the new-expression is instantiated with no arguments in ""args"", k is not value-initialized (although it should be).#include <assert.h>#include <new>int k = 5;template< class... Args > void f( Args... args ){   new( &k ) int( args... );}int main(){   f();   assert( k == 0 );}",RESOLVED          FIXED      
37342,Martin Michlmayr,[4.4 Regression] same canonical type node for different types void (Asm::*)(std::ostream&) and void (Asm::* const)(std::ostream&),"With current SVN (revision 139927):./g++ -c -B. ~/pasmo-pasmo.iipasmo.cpp: In member function 'void (Asm::*<unnamed>::Options::getemit() const)(std::ostream&)':pasmo.cpp:90: internal compiler error: same canonical type node for different types void (Asm::*)(std::ostream&) and void (Asm::* const)(std::ostream&)Please submit a full bug report,",RESOLVED          FIXED      
35704,Dominique d'Humieres,Bootstrap failure on i686-apple-darwin9 at revision 133519 (take 2).,The failure is:.../gcc/objc -I../../gcc-4.4-work/gcc/cp -fno-common   -DHAVE_CONFIG_H -I. -Iobjcp -I../../gcc-4.4-work/gcc -I../../gcc-4.4-work/gcc/objcp -I../../gcc-4.4-work/gcc/../include -I./../intl -I../../gcc-4.4-work/gcc/../libcpp/include -I/sw/include  -I../../gcc-4.4-work/gcc/../libdecnumber -I../../gcc-4.4-work/gcc/../libdecnumber/dpd -I../libdecnumber    -o objcp/objcp-act.o -MT objcp/objcp-act.o -MMD -MP -MF objcp/.deps/objcp-act.Po ../../gcc-4.4-work/gcc/objc/objc-act.c../../gcc-4.4-work/gcc/objc/objc-act.c: In function 'objc_build_component_ref':../../gcc-4.4-work/gcc/objc/objc-act.c:1258: error: too few arguments to function 'finish_class_member_access_expr'../../gcc-4.4-work/gcc/objc/objc-act.c: In function 'objc_generate_cxx_ctor_or_dtor':../../gcc-4.4-work/gcc/objc/objc-act.c:4496: error: too few arguments to function 'build_special_member_call'../../gcc-4.4-work/gcc/objc/objc-act.c: In function 'generate_shared_structures':../../gcc-4.4-work/gcc/objc/objc-act.c:5744: error: too few arguments to function 'build_c_cast'../../gcc-4.4-work/gcc/objc/objc-act.c:5750: error: too few arguments to function 'build_c_cast'../../gcc-4.4-work/gcc/objc/objc-act.c: In function 'build_objc_method_call':../../gcc-4.4-work/gcc/objc/objc-act.c:6502: error: too few arguments to function 'build_c_cast'../../gcc-4.4-work/gcc/objc/objc-act.c: In function 'get_super_receiver':../../gcc-4.4-work/gcc/objc/objc-act.c:8746: error: too few arguments to function 'build_c_cast'../../gcc-4.4-work/gcc/objc/objc-act.c:8767: error: too few arguments to function 'build_c_cast'../../gcc-4.4-work/gcc/objc/objc-act.c:8770: error: too few arguments to function 'build_compound_expr'../../gcc-4.4-work/gcc/objc/objc-act.c:8773: error: too few arguments to function 'build_compound_expr'make[3]: *** [objcp/objcp-act.o] Error 1make[3]: *** Waiting for unfinished jobs....rm gcj-dbtool.pod gcov.pod build/genmodes.o gcj.pod fsf-funding.pod build/gengtype.o build/genchecksum.o jv-convert.pod gc-analyze.pod gfdl.pod build/gengenrtl.o cpp.pod jcf-dump.pod gij.pod gpl.pod grmic.pod gcc.pod gfortran.podmake[2]: *** [all-stage2-gcc] Error 2make[1]: *** [stage2-bubble] Error 2make: *** [all] Error 2This is the second time in less than a week that thefile gcc/objc/objc-act.c is forgotten in C++ changes.  Would it be possible to find a way to not repeat it again?,RESOLVED          FIXED      
35026,Volker Reichelt,[4.3 regression] ICE with parameter pack in pointer type,"The following invalid code snippet is accepted on mainline:=====================================template<typename... T> struct A{  T* x[1];};A<int> a;=====================================One can also trigger ICEs with the snippet if one compiles it with ""-g"":bug.cc: In instantiation of 'A<int>':bug.cc:6:   instantiated from herebug.cc:2: internal compiler error: in gen_type_die_with_usage, at dwarf2out.c:13432Please submit a full bug report, [etc.]or with ""-gstabs"":bug.cc: In instantiation of 'A<int>':bug.cc:6:   instantiated from herebug.cc:2: internal compiler error: in dbxout_type, at dbxout.c:2237Please submit a full bug report, [etc.]",RESOLVED          FIXED      
35024,Volker Reichelt,[4.3 regression] ICE with parameter pack in nested type,"The following invalid code snippet triggers an ICE on mainline since today:=============================================================template<typename... T> int foo(){  typename T::X x;  return x;}void bar(){  foo<int>();}=============================================================bug.cc: In function 'int foo()':bug.cc:3: error: parameter packs not expanded with `...':bug.cc:3: note:         'T'bug.cc: In function 'int foo() [with T = int]':bug.cc:9:   instantiated from herebug.cc:3: internal compiler error: in dependent_type_p, at cp/pt.c:15553Please submit a full bug report, [etc.]The code is similar to PR35023, but crashes at a different position.",RESOLVED          FIXED      
35023,Volker Reichelt,[4.3 regression] ICE with parameter pack in variable declaration,"The following invalid code snippet triggers an ICE on mainline since today:=============================================================template<typename... T> int foo(){  T t;  return t;}void bar(){  foo<int>();}=============================================================bug.cc: In function 'int foo()':bug.cc:3: error: parameter packs not expanded with `...':bug.cc:3: note:         'T'bug.cc: In function 'int foo() [with T = int]':bug.cc:9:   instantiated from herebug.cc:4: internal compiler error: tree check: expected record_type or union_type or qual_union_type, have template_type_parm in lookup_conversions, at cp/search.c:2444Please submit a full bug report, [etc.]",RESOLVED          FIXED      
34050,Volker Reichelt,[4.3 regression] ICE derived classes and variadic templates,"The following code snippet triggers an ICE on mainline:===========================================struct A {};template<typename... T> struct B : T...{  B() : T()... {}};B<A> b;===========================================bug.cc: In constructor 'B<T>::B() [with T = A]':bug.cc:8:   instantiated from herebug.cc:5: internal compiler error: tree check: expected tree_list, have void_type in tsubst_initializer_list, at cp/pt.c:14981Please submit a full bug report, [etc.]I guess, the code is invalid, but I'm not sure.",RESOLVED          FIXED      
35115,Dominique d'Humieres,[4.3 Regression] ../../gcc-4.3-work/gcc/objcp/objcp-decl.c:98: error: implicit declaration of function 'comptypes',"Rebuilding gcc rev. 132160 from scratch failed with:.../opt/gcc/i686-darwin/./prev-gcc/xgcc -B/opt/gcc/i686-darwin/./prev-gcc/ -B/opt/gcc/gcc4.3w/i686-apple-darwin9/bin/ -c   -g -O2 -fomit-frame-pointer -DIN_GCC   -W -Wall -Wwrite-strings -Wstrict-prototypes -Wmissing-prototypes -Wold-style-definition -Wmissing-format-attribute -pedantic -Wno-long-long -Wno-variadic-macros                                     -Wno-overlength-strings -Werror -DOBJCPLUS -I../../gcc-4.3-work/gcc/objc -I../../gcc-4.3-work/gcc/cp -fno-common   -DHAVE_CONFIG_H -I. -Iobjcp -I../../gcc-4.3-work/gcc -I../../gcc-4.3-work/gcc/objcp -I../../gcc-4.3-work/gcc/../include -I./../intl -I../../gcc-4.3-work/gcc/../libcpp/include -I/sw/include  -I../../gcc-4.3-work/gcc/../libdecnumber -I../../gcc-4.3-work/gcc/../libdecnumber/dpd -I../libdecnumber    ../../gcc-4.3-work/gcc/objcp/objcp-decl.c -o objcp/objcp-decl.occ1: warnings being treated as errors../../gcc-4.3-work/gcc/objcp/objcp-decl.c: In function 'objcp_comptypes':../../gcc-4.3-work/gcc/objcp/objcp-decl.c:98: error: implicit declaration of function 'comptypes'Note that it is again a ""cc1: warnings being treated as errors"".",RESOLVED          FIXED      
35049,Dominique d'Humieres,[4.3 Regression] g++.dg/conversion/simd3.C:12: error: invalid operands to binary + (have 'float __vector__' and 'int __vector__'),"At rev. 131985 with the last patch for PR35035, g++.dg/conversion/simd3.C fails on i686-apple-darwin9 for both 32 and 64 bit modes with:/opt/gcc/_gcc_clean/gcc/testsuite/g++.dg/conversion/simd3.C: In function 'void foo()':/opt/gcc/_gcc_clean/gcc/testsuite/g++.dg/conversion/simd3.C:12: error: invalid operands to binary + (have 'float __vector__' and 'int __vector__')",RESOLVED          FIXED      
35074,Volker Reichelt,"[4.3 regression] ICE with attribute ""aligned"" for template classes","The following valid code snippet triggers an ICE on mainline:==========================================template<typename T> struct A{  void foo() const;} __attribute((aligned(4)));template<typename T> void A<T>::foo() const {}==========================================bug.cc:6: internal compiler error: canonical types differ for identical types const A<T> and const A<T>Please submit a full bug report, [etc.]The ICE is pretty recent, it appeared between 2008-01-22 and 2008-01-28.",RESOLVED          FIXED      
34936,Volker Reichelt,ICE with double and attribute may_alias,"The following valid code snippet triggers an ICE since GCC 3.3:============================================typedef double X __attribute((may_alias)) ;template<typename> struct A{  A();};A<X> a;============================================bug.cc: In function 'void __static_initialization_and_destruction_0(int, int)':bug.cc:8: internal compiler error: in write_builtin_type, at cp/mangle.c:1849Please submit a full bug report, [etc.]The code compiles if I use char or int instead of double.",RESOLVED          FIXED      
34935,Volker Reichelt,[4.3 regression] ICE with attribute may_alias,"The following valid code snippet triggers an ICE on mainline:============================================typedef int X __attribute((may_alias));void foo(X);void foo(int,int);============================================bug.cc:4: internal compiler error: same canonical type node for different types int and XPlease submit a full bug report, [etc.]",RESOLVED          FIXED      
34961,Volker Reichelt,[4.3 Regression] ICE with invalid use of parameter pack in attribute,"The following invalid code snippet triggers an ICE on mainline:=================================================================template<typename... T> struct A{  static const int i __attribute__((aligned(__alignof(T)))) = 0; }; A<int> a; =================================================================bug.cc: In instantiation of 'A<int>':bug.cc:6:   instantiated from herebug.cc:3: internal compiler error: in dependent_type_p, at cp/pt.c:15582Please submit a full bug report, [etc.]",RESOLVED          FIXED      
34919,Volker Reichelt,[4.3 Regression] ICE with invalid use of parameter pack,"The following invalid testcase triggers an ICE on mainline:=====================================================template<int... N> struct A{  static void foo()  {    int i = N;  }};void bar(){  A<0>::foo();}=====================================================bug.cc: In static member function 'static void A<N>::foo() [with int ...N = 0]':bug.cc:11:   instantiated from herebug.cc:5: internal compiler error: in gimplify_expr, at gimplify.c:6108Please submit a full bug report, [etc.]",RESOLVED          FIXED      
34755,Volker Reichelt,[4.3 regression] ICE with invalid argument in variadic template function,"The following invalid code snippet triggers an ICE on mainline:================================================================template<typename> struct A {};template<template<typename> class... T> void foo(T<int>) {}template void foo<A>(A<int>);================================================================bug.cc:3: error: parameter packs not expanded with `...':bug.cc:3: note:         'template<class> class T'bug.cc:5: internal compiler error: tree check: expected template_type_parm or template_template_parm or bound_template_template_parm, have error_mark in fn_type_unification, at cp/pt.c:11623Please submit a full bug report, [etc.]The ICE appeared between 2007-10-13 and 2007-11-13.Maybe related to PR 34754.",RESOLVED          FIXED      
34754,Volker Reichelt,[4.3 regression] ICE with invalid function arguments in variadic template,"The following invalid code snippet triggers an ICE on mainline:================================================================template<template<int> class... T> struct A{  void foo(T<0>);  void bar(T<0>);};================================================================bug.cc:3: error: parameter packs not expanded with `...':bug.cc:3: note:         'template<int <anonymous> > class T'bug.cc:4: internal compiler error: tree check: expected class 'type', have 'exceptional' (error_mark) in bind_template_template_parm, at cp/tree.c:1242Please submit a full bug report, [etc.]The ICE appeared between 2007-10-13 and 2007-11-13.",RESOLVED          FIXED      
34753,Volker Reichelt,[4.3 regression] ICE with invalid template parameter in variadic template,"The following invalid code snippet triggers an ICE on mainline:================================================================template<typename... T> struct A{  template<T> struct B {};};A<int>::B<0> b;================================================================bug.cc:3: error: parameter packs not expanded with `...':bug.cc:3: note:         'T'bug.cc: In instantiation of 'A<int>':bug.cc:6:   instantiated from herebug.cc:3: internal compiler error: Segmentation faultPlease submit a full bug report, [etc.]The ICE appeared between 2007-11-30 and 2007-12-11.",RESOLVED          FIXED      
34606,Volker Reichelt,[4.3 regression] ICE with invalid specialization of variadic template,"The following invalid code snippet triggers an ICE on mainline:=======================================================template<typename...> struct A;template<typename T, typename... U> struct A<T, U>{  template<typename> struct B;  template<typename X> struct B<X*> {};};=======================================================bug.cc:3: error: parameter packs not expanded with `...':bug.cc:3: note:         'U'bug.cc:7: internal compiler error: tree check: expected class 'type', have 'exceptional' (error_mark) in template_class_depth, at cp/pt.c:312Please submit a full bug report, [etc.]The bug appeared between 2007-10-13 and 2007-11-13.",RESOLVED          FIXED      
31431,Volker Reichelt,[4.3 regression] ICE with invalid parameter pack,"The following (IMHO invalid) code snippet triggers an ICE on mainline:===========================================================template<typename..., typename> void foo();void bar(){  foo<int>();}===========================================================bug.cc: In function 'void bar()':bug.cc:5: internal compiler error: tree check: expected class 'expression', have 'type' (integer_type) in fn_type_unification, at cp/pt.c:11058Please submit a full bug report, [etc.]The slightly modified version below triggers a segfault:===========================================================template<typename, typename..., typename> void foo();void bar(){  foo<int>();}===========================================================bug.cc: In function 'void bar()':bug.cc:5: internal compiler error: Segmentation faultPlease submit a full bug report, [etc.]Doug, looks like fallout from your variadic template patch.Btw., although it's not easter yet, I found a couple of morevariadic easter eggs. They should appear on bugzilla soon. ;-)",RESOLVED          FIXED      
31437,Volker Reichelt,[4.3 regression] ICE with invalid use of parameter pack in member function arg,"More fallout from the variadic templates on mainline:===========================================================template <typename... T> struct A{  A(T* p) { (A<T...>*)(p); }};A<int> a(0);===========================================================bug.cc:3: error: parameter packs not expanded with `...':bug.cc:3: note:         'T'bug.cc:3: error: parameter packs not expanded with `...':bug.cc:3: note:         'T'bug.cc: In constructor 'A<T>::A(T*) [with T = int]':bug.cc:6:   instantiated from herebug.cc:3: internal compiler error: tree check: expected record_type or union_type or qual_union_type, have template_type_parm in lookup_base, at cp/search.c:213Please submit a full bug report, [etc.]Similar to PR31436 as this is also invalid use of a parameter packin a function argument and triggers an ICE in a lookup_* function.",RESOLVED          FIXED      
31443,Volker Reichelt,[4.3 regression] ICE with invalid use of parameter pack in member template,"More fallout from the variadic templates on mainline:===========================================================template<int, typename... T> struct A{  template<int N> void foo(A<N,T>);};void bar(){  A<0,int>().foo(A<0,int>());};===========================================================bug.cc:3: error: parameter packs not expanded with `...':bug.cc:3: note:         'T'bug.cc: In function 'void bar()':bug.cc:8: internal compiler error: tree check: accessed elt 2 of tree_vec with 1 elts in unify, at cp/pt.c:12126Please submit a full bug report, [etc.]Although this ICE is also in unify as PR31441 and PR31442,it's in a different location.",RESOLVED          FIXED      
31445,Volker Reichelt,[4.3 regression] type_argument_pack not supported by dump_type,More fallout from the variadic templates on mainline:===========================================================template <typename... T> struct A{  void foo(T...);  A(T... t) { foo(t); }};A<int> a(0);===========================================================This is only a diagnostic problem in the second to last line:bug.cc: In constructor 'A<T>::A(T ...)':bug.cc:4: error: parameter packs not expanded with `...':bug.cc:4: note:         't'bug.cc: In constructor 'A<T>::A(T ...) [with T = int]':bug.cc:7:   instantiated from herebug.cc:4: error: no matching function for call to 'A<int>::foo(#'type_argument_pack' not supported by dump_type#<type error>)'bug.cc:3: note: candidates are: void A<T>::foo(T ...) [with T = int],RESOLVED          FIXED      
31078,Martin Michlmayr,[4.3 Regression] warning: same canonical type node for different types with const strings,"I'm not quite sure what to make of this.  It's not an ICE, but it still looks like a compiler bug.  GCC 4.2 doesn't show this, only current 4.3 does:(cross)1591:tbm@em64t: ~] /usr/lib/gcc-snapshot/bin/g++ -c firebird2-jrn.ccfirebird2-jrn.cc: In function 'void error(ISC_STATUS*, jrn*, int, TEXT*)':firebird2-jrn.cc:29: warning: same canonical type node for different types TEXT [1] and const char [1] <array_type 0x2ba387b70480    type <integer_type 0x2ba387b64840 TEXT string-flag QI        size <integer_cst 0x2ba3879cd7b0 constant invariant 8>        unit size <integer_cst 0x2ba3879cd7e0 constant invariant 1>        align 8 symtab 0 alias set -1 canonical type 0x2ba3879df300 precision 8 min <integer_cst 0x2ba3879cd750 -128> max <integer_cst 0x2ba3879cd8a0 127>        pointer_to_this <pointer_type 0x2ba387b70540>>    QI size <integer_cst 0x2ba3879cd7b0 8> unit size <integer_cst 0x2ba3879cd7e0 1>    align 8 symtab 0 alias set -1 canonical type 0x2ba387b70600    domain <integer_type 0x2ba3879f5780        type <integer_type 0x2ba3879df000 long unsigned int public unsigned sizetype DI            size <integer_cst 0x2ba3879cdb40 constant invariant 64>            unit size <integer_cst 0x2ba3879cdb70 constant invariant 8>            align 64 symtab 0 alias set -1 canonical type 0x2ba3879dfd80 precision 64 min <integer_cst 0x2ba3879cdba0 0> max <integer_cst 0x2ba3879ee420 -1>>        DI size <integer_cst 0x2ba3879cdb40 64> unit size <integer_cst 0x2ba3879cdb70 8>        align 64 symtab 0 alias set -1 canonical type 0x2ba3879f5780 precision 64 min <integer_cst 0x2ba3879cd6f0 0> max <integer_cst 0x2ba3879cd6f0 0>>> <array_type 0x2ba387b70e40    type <integer_type 0x2ba3879f5e40 char readonly string-flag QI        size <integer_cst 0x2ba3879cd7b0 constant invariant 8>        unit size <integer_cst 0x2ba3879cd7e0 constant invariant 1>        align 8 symtab 0 alias set -1 canonical type 0x2ba3879f5e40 precision 8 min <integer_cst 0x2ba3879cd750 -128> max <integer_cst 0x2ba3879cd8a0 127>        pointer_to_this <pointer_type 0x2ba3879f5f00>>    QI size <integer_cst 0x2ba3879cd7b0 8> unit size <integer_cst 0x2ba3879cd7e0 1>    align 8 symtab 0 alias set -1 canonical type 0x2ba387b70600    domain <integer_type 0x2ba3879f5780        type <integer_type 0x2ba3879df000 long unsigned int public unsigned sizetype DI            size <integer_cst 0x2ba3879cdb40 constant invariant 64>            unit size <integer_cst 0x2ba3879cdb70 constant invariant 8>            align 64 symtab 0 alias set -1 canonical type 0x2ba3879dfd80 precision 64 min <integer_cst 0x2ba3879cdba0 0> max <integer_cst 0x2ba3879ee420 -1>>        DI size <integer_cst 0x2ba3879cdb40 64> unit size <integer_cst 0x2ba3879cdb70 8>        align 64 symtab 0 alias set -1 canonical type 0x2ba3879f5780 precision 64 min <integer_cst 0x2ba3879cd6f0 0> max <integer_cst 0x2ba3879cd6f0 0>>>firebird2-jrn.cc:29: warning: same canonical type node for different types TEXT [1] and const char [1] <array_type 0x2ba387b70480    type <integer_type 0x2ba387b64840 TEXT string-flag QI        size <integer_cst 0x2ba3879cd7b0 constant invariant 8>        unit size <integer_cst 0x2ba3879cd7e0 constant invariant 1>        align 8 symtab 0 alias set -1 canonical type 0x2ba3879df300 precision 8 min <integer_cst 0x2ba3879cd750 -128> max <integer_cst 0x2ba3879cd8a0 127>        pointer_to_this <pointer_type 0x2ba387b70540>>    QI size <integer_cst 0x2ba3879cd7b0 8> unit size <integer_cst 0x2ba3879cd7e0 1>    align 8 symtab 0 alias set -1 canonical type 0x2ba387b70600    domain <integer_type 0x2ba3879f5780        type <integer_type 0x2ba3879df000 long unsigned int public unsigned sizetype DI            size <integer_cst 0x2ba3879cdb40 constant invariant 64>            unit size <integer_cst 0x2ba3879cdb70 constant invariant 8>            align 64 symtab 0 alias set -1 canonical type 0x2ba3879dfd80 precision 64 min <integer_cst 0x2ba3879cdba0 0> max <integer_cst 0x2ba3879ee420 -1>>        DI size <integer_cst 0x2ba3879cdb40 64> unit size <integer_cst 0x2ba3879cdb70 8>        align 64 symtab 0 alias set -1 canonical type 0x2ba3879f5780 precision 64 min <integer_cst 0x2ba3879cd6f0 0> max <integer_cst 0x2ba3879cd6f0 0>>> <array_type 0x2ba387b70e40    type <integer_type 0x2ba3879f5e40 char readonly string-flag QI        size <integer_cst 0x2ba3879cd7b0 constant invariant 8>        unit size <integer_cst 0x2ba3879cd7e0 constant invariant 1>        align 8 symtab 0 alias set -1 canonical type 0x2ba3879f5e40 precision 8 min <integer_cst 0x2ba3879cd750 -128> max <integer_cst 0x2ba3879cd8a0 127>        pointer_to_this <pointer_type 0x2ba3879f5f00>>    QI size <integer_cst 0x2ba3879cd7b0 8> unit size <integer_cst 0x2ba3879cd7e0 1>    align 8 symtab 0 alias set -1 canonical type 0x2ba387b70600    domain <integer_type 0x2ba3879f5780        type <integer_type 0x2ba3879df000 long unsigned int public unsigned sizetype DI            size <integer_cst 0x2ba3879cdb40 constant invariant 64>            unit size <integer_cst 0x2ba3879cdb70 constant invariant 8>            align 64 symtab 0 alias set -1 canonical type 0x2ba3879dfd80 precision 64 min <integer_cst 0x2ba3879cdba0 0> max <integer_cst 0x2ba3879ee420 -1>>        DI size <integer_cst 0x2ba3879cdb40 64> unit size <integer_cst 0x2ba3879cdb70 8>        align 64 symtab 0 alias set -1 canonical type 0x2ba3879f5780 precision 64 min <integer_cst 0x2ba3879cd6f0 0> max <integer_cst 0x2ba3879cd6f0 0>>>firebird2-jrn.cc:29: warning: same canonical type node for different types TEXT [1] and const char [1] <array_type 0x2ba387b70480    type <integer_type 0x2ba387b64840 TEXT string-flag QI        size <integer_cst 0x2ba3879cd7b0 constant invariant 8>        unit size <integer_cst 0x2ba3879cd7e0 constant invariant 1>        align 8 symtab 0 alias set -1 canonical type 0x2ba3879df300 precision 8 min <integer_cst 0x2ba3879cd750 -128> max <integer_cst 0x2ba3879cd8a0 127>        pointer_to_this <pointer_type 0x2ba387b70540>>    QI size <integer_cst 0x2ba3879cd7b0 8> unit size <integer_cst 0x2ba3879cd7e0 1>    align 8 symtab 0 alias set -1 canonical type 0x2ba387b70600    domain <integer_type 0x2ba3879f5780        type <integer_type 0x2ba3879df000 long unsigned int public unsigned sizetype DI            size <integer_cst 0x2ba3879cdb40 constant invariant 64>            unit size <integer_cst 0x2ba3879cdb70 constant invariant 8>            align 64 symtab 0 alias set -1 canonical type 0x2ba3879dfd80 precision 64 min <integer_cst 0x2ba3879cdba0 0> max <integer_cst 0x2ba3879ee420 -1>>        DI size <integer_cst 0x2ba3879cdb40 64> unit size <integer_cst 0x2ba3879cdb70 8>        align 64 symtab 0 alias set -1 canonical type 0x2ba3879f5780 precision 64 min <integer_cst 0x2ba3879cd6f0 0> max <integer_cst 0x2ba3879cd6f0 0>>> <array_type 0x2ba387b70e40    type <integer_type 0x2ba3879f5e40 char readonly string-flag QI        size <integer_cst 0x2ba3879cd7b0 constant invariant 8>        unit size <integer_cst 0x2ba3879cd7e0 constant invariant 1>        align 8 symtab 0 alias set -1 canonical type 0x2ba3879f5e40 precision 8 min <integer_cst 0x2ba3879cd750 -128> max <integer_cst 0x2ba3879cd8a0 127>        pointer_to_this <pointer_type 0x2ba3879f5f00>>    QI size <integer_cst 0x2ba3879cd7b0 8> unit size <integer_cst 0x2ba3879cd7e0 1>    align 8 symtab 0 alias set -1 canonical type 0x2ba387b70600    domain <integer_type 0x2ba3879f5780        type <integer_type 0x2ba3879df000 long unsigned int public unsigned sizetype DI            size <integer_cst 0x2ba3879cdb40 constant invariant 64>            unit size <integer_cst 0x2ba3879cdb70 constant invariant 8>            align 64 symtab 0 alias set -1 canonical type 0x2ba3879dfd80 precision 64 min <integer_cst 0x2ba3879cdba0 0> max <integer_cst 0x2ba3879ee420 -1>>        DI size <integer_cst 0x2ba3879cdb40 64> unit size <integer_cst 0x2ba3879cdb70 8>        align 64 symtab 0 alias set -1 canonical type 0x2ba3879f5780 precision 64 min <integer_cst 0x2ba3879cd6f0 0> max <integer_cst 0x2ba3879cd6f0 0>>>",RESOLVED          FIXED      
31141,Volker Reichelt,[4.3 regression] ICE with ellipsis in template parameter list,"The following invalid code snippet triggers an ICE on mainline:========================================template<int N...> void foo(int x[1][N]);void bar(){  int x[1][1];  foo(x);}========================================bug.cc:1: error: ISO C++ does not include variadic templatesbug.cc: In function 'void bar()':bug.cc:1: internal compiler error: tree check: expected class 'expression', have 'constant' (integer_cst) in tsubst_pack_expansion, at cp/pt.c:6829Please submit a full bug report, [etc.]Looks like this was caused by your patch for variadic templates, Douglas:2007-03-09  Douglas Gregor  <doug.gregor@gmail.com>	PR c++/20599	* typeck.c (check_return_expr): Check for bare parameter packs.	(comptypes): Compare template parameter packs and	type pack expansions.        ...",RESOLVED          FIXED      
31140,Volker Reichelt,[4.3 regression] ICE with ellipsis in template parameter list,"The following invalid code snippet triggers an ICE on mainline:========================================template<typename T...> void foo(){  T t;}========================================bug.cc:1: error: expected nested-name-specifier before 'T'bug.cc:1: error: ISO C++ does not include variadic templatesbug.cc: In function 'void foo()':bug.cc:3: error: expected `;' before 't'bug.cc:3: error: parameter packs not expanded with `...':bug.cc:3: internal compiler error: tree check: expected tree that contains 'decl minimal' structure, have 'template_parm_index' in check_for_bare_parameter_packs, at cp/pt.c:2620Please submit a full bug report, [etc.]Looks like this was caused by your patch for variadic templates, Douglas:2007-03-09  Douglas Gregor  <doug.gregor@gmail.com>	PR c++/20599	* typeck.c (check_return_expr): Check for bare parameter packs.	(comptypes): Compare template parameter packs and	type pack expansions.        ...",RESOLVED          FIXED      
31138,Volker Reichelt,[4.3 regression] ICE with ellipsis,"The following valid code snippet triggers an ICE on mainline:=====================void foo(long ...);=====================bug.cc:1: internal compiler error: Segmentation faultPlease submit a full bug report, [etc.]The same thing happens for the following invalid variation:=====================void foo(const ...);=====================",RESOLVED          FIXED      
30666,Uroš Bizjak,[4.3 Regression] warning: canonical types differ for identical types double __complex__ and double __complex__,"Attached testcase (delta didn't reduce it any further) produces several warnings, when compiled with -O2:gcc -O2 -S render_1.iirender_1.ii: In function âint pov::create_ray(pov::RAY*, double, double, int)â:render_1.ii:6494: warning: canonical types differ for identical types double __complex__ and double __complex__ <complex_type 0xb77a2b60    type <real_type 0xb7ce06e8 double sizes-gimplified type_6 DF        size <integer_cst 0xb7cc2420 constant invariant 64>        unit size <integer_cst 0xb7cc2438 constant invariant 8>        align 64 symtab 0 alias set 2 canonical type 0xb7ce06e8 precision 64        pointer_to_this <pointer_type 0xb7ce0820> reference_to_this <reference_type 0xb793b6e8>>    DC    size <integer_cst 0xb7cc24f8 type <integer_type 0xb7cd8068 bit_size_type> constant invariant 128>    unit size <integer_cst 0xb7cc2510 type <integer_type 0xb7cd8000 unsigned int> constant invariant 16>    align 64 symtab 0 alias set -1 canonical type 0xb77a2b60> <complex_type 0xb7ce0d68 complex double    type <real_type 0xb7ce06e8 double sizes-gimplified type_6 DF        size <integer_cst 0xb7cc2420 constant invariant 64>        unit size <integer_cst 0xb7cc2438 constant invariant 8>        align 64 symtab 0 alias set 2 canonical type 0xb7ce06e8 precision 64        pointer_to_this <pointer_type 0xb7ce0820> reference_to_this <reference_type 0xb793b6e8>>    DC    size <integer_cst 0xb7cc24f8 type <integer_type 0xb7cd8068 bit_size_type> constant invariant 128>    unit size <integer_cst 0xb7cc2510 type <integer_type 0xb7cd8000 unsigned int> constant invariant 16>    align 64 symtab 0 alias set -1 canonical type 0xb7ce0d68>render_1.ii:6494: warning: canonical types differ for identical types double __complex__ and double __complex__ <complex_type 0xb77a2b60    type <real_type 0xb7ce06e8 double sizes-gimplified type_6 DF        size <integer_cst 0xb7cc2420 constant invariant 64>        unit size <integer_cst 0xb7cc2438 constant invariant 8>        align 64 symtab 0 alias set 2 canonical type 0xb7ce06e8 precision 64        pointer_to_this <pointer_type 0xb7ce0820> reference_to_this <reference_type 0xb793b6e8>>    DC    size <integer_cst 0xb7cc24f8 type <integer_type 0xb7cd8068 bit_size_type> constant invariant 128>    unit size <integer_cst 0xb7cc2510 type <integer_type 0xb7cd8000 unsigned int> constant invariant 16>    align 64 symtab 0 alias set -1 canonical type 0xb77a2b60> <complex_type 0xb7ce0d68 complex double    type <real_type 0xb7ce06e8 double sizes-gimplified type_6 DF        size <integer_cst 0xb7cc2420 constant invariant 64>        unit size <integer_cst 0xb7cc2438 constant invariant 8>        align 64 symtab 0 alias set 2 canonical type 0xb7ce06e8 precision 64        pointer_to_this <pointer_type 0xb7ce0820> reference_to_this <reference_type 0xb793b6e8>>    DC    size <integer_cst 0xb7cc24f8 type <integer_type 0xb7cd8068 bit_size_type> constant invariant 128>    unit size <integer_cst 0xb7cc2510 type <integer_type 0xb7cd8000 unsigned int> constant invariant 16>    align 64 symtab 0 alias set -1 canonical type 0xb7ce0d68>",RESOLVED          FIXED      
63582,DJ Delorie,"[5 Regression]:  g++.dg/init/enum1.C ... (test for errors, line 12)","This test used to pass and now fails.Last known previous revision it passed: r216206.First known revision where FAIL is seen: r216224.A commit in the revision range (216206:216224] caused this test to fail as follows:FAIL: g++.dg/init/enum1.C  -std=gnu++98  (test for errors, line 12)FAIL: g++.dg/init/enum1.C  -std=gnu++11  (test for errors, line 12)FAIL: g++.dg/init/enum1.C  -std=gnu++1y  (test for errors, line 12)The g++.log has nothing to add; there's simply no error for the enum, which seems like a gcc bug rather than a required test-suite tweak.In gcc-testresults@, I see similar errors for arm7l-unknown-linux-gnueabihf and hppa2.0w-hp-hpux11.11.  Not sure of the other systems, but there's no target-specific support for __int128 for cris-elf.Author of suspected commit in revision-range CC:ed.",RESOLVED          FIXED      
46878,DJ Delorie,"[4.6 regression] V850 ICE in in maybe_add_or_update_dep_1, at sched-deps.c:854","/Volumes/git/pf3gnuchains4x/newlib/libc/search/hash_bigkey.c:669:1: internal compiler error: in maybe_add_or_update_dep_1, at sched-deps.c:854The error message is avobe.Attachment is the pre-processed source",RESOLVED          FIXED      
17383,DJ Delorie,[4.0 Regression] Building in src dir fails,I checked out the CVS main branch today.cd gcc && ./configure && make fails with the error message:./config.status: line 909: ./../../config-ml.in: No such file or directorymake: *** [configure-zlib] Error 1cd gcc && mkdir builddir && cd builddir && ../configure && make works just fine.,RESOLVED          FIXED      
12315,DJ Delorie,[3.4 Regression] ICE using -p with functions returning structs,"During bootstrap, stage1/cc1 segfaulted.(The bug seems triggered because I am trying to builda C compiler with -pg, gprof feature. Not many people seemto use gprof feature of the C compiler, I am afraid, and thus it probably is notexercised much.)I hope this gets fixed soon. ========================================THE BUG:----------------------------------------stage1/xgcc -Bstage1/ -B/usr/local/i686-pc-linux-gnu/bin/ -c   -march=athlon-xp-mtune=athlon-xp -g -pg -O2  -DIN_GCC   -W -Wall -Wwrite-strings-Wstrict-prototypes -Wmissing-prototypes -pedantic -Wno-long-long -Werror-fno-common   -DHAVE_CONFIG_H    -I. -I. -I/u2/tools/gcc-mainline-cvs/gcc/gcc-I/u2/tools/gcc-mainline-cvs/gcc/gcc/.-I/u2/tools/gcc-mainline-cvs/gcc/gcc/../include /u2/tools/gcc-mainline-cvs/gcc/gcc/cppexp.c -o cppexp.o/u2/tools/gcc-mainline-cvs/gcc/gcc/cppexp.c: In function `num_trim':/u2/tools/gcc-mainline-cvs/gcc/gcc/cppexp.c:1014: internal compiler error:Segmentation faultPlease submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.make[2]: *** [cppexp.o] Error 1make[2]: Leaving directory `/u2/tools/gcc-mainline-obj-dir/gcc'make[1]: *** [stage2_build] Error 2make[1]: Leaving directory `/u2/tools/gcc-mainline-obj-dir/gcc'make: *** [bootstrap] Error 2========================================Quote from GDB session:----------------------------------------I checked the value of svrtx using gdb, andfound that it is 0 (NULL) and GET_CODE(svrtx) is called.ishikawa@duron$  stage1/cc1 -quiet -v -I. -I.-I/u2/tools/gcc-mainline-cvs/gcc/gcc -I/u2/tools/gcc-mainline-cvs/gcc/gcc/.-I/u2/tools/gcc-mainline-cvs/gcc/gcc/../include -iprefix/u2/tools/gcc-mainline-obj-dir/gcc/stage1/../lib/gcc/i686-pc-linux-gnu/3.4/-isystem include -isystem stage1/include -isystem/usr/local/i686-pc-linux-gnu/bin/include -DIN_GCC -DHAVE_CONFIG_H/u2/tools/gcc-mainline-cvs/gcc/gcc/cppexp.c -quiet -dumpbase cppexp.c-march=athlon-xp -mtune=athlon-xp -auxbase-strip cppexp.o -g -O2 -W -Wall-Wwrite-strings -Wstrict-prototypes -Wmissing-prototypes -pedantic-Wno-long-long -Werror -version -p -fno-common -o /tmp/ccTCMJqs.signoring nonexistent directory ""stage1/include""ignoring nonexistent directory ""/usr/local/i686-pc-linux-gnu/bin/include""ignoring nonexistent directory""/u2/tools/gcc-mainline-obj-dir/gcc/stage1/../lib/gcc/i686-pc-linux-gnu/3.4/include""ignoring nonexistent directory""/u2/tools/gcc-mainline-obj-dir/gcc/stage1/../lib/gcc/i686-pc-linux-gnu/3.4/../../../../i686-pc-linux-gnu/include""ignoring nonexistent directory ""NONE/include""ignoring nonexistent directory ""/usr/local/lib/gcc/i686-pc-linux-gnu/3.4/include""ignoring nonexistent directory ""/usr/local/lib/../i686-pc-linux-gnu/include""ignoring duplicate directory "".""ignoring duplicate directory ""/u2/tools/gcc-mainline-cvs/gcc/gcc/.""#include ""..."" search starts here:#include <...> search starts here: . /u2/tools/gcc-mainline-cvs/gcc/gcc /u2/tools/gcc-mainline-cvs/gcc/gcc/../include include /usr/local/include /usr/includeEnd of search list.GNU C version 3.4 20030916 (experimental) (i686-pc-linux-gnu)	compiled by GNU C version 3.3.GGC heuristics: --param ggc-min-expand=30 --param ggc-min-heapsize=4096/u2/tools/gcc-mainline-cvs/gcc/gcc/cppexp.c: In function `num_trim':/u2/tools/gcc-mainline-cvs/gcc/gcc/cppexp.c:1014: internal compiler error:Segmentation faultPlease submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.ishikawa@duron$ gdb stage1/cc1GNU gdb 5.3-debianCopyright 2002 Free Software Foundation, Inc.GDB is free software, covered by the GNU General Public License, and you arewelcome to change it and/or distribute copies of it under certain conditions.Type ""show copying"" to see the conditions.There is absolutely no warranty for GDB.  Type ""show warranty"" for details.This GDB was configured as ""i386-linux""...Breakpoint 1 at 0x814f12c: file /u2/tools/gcc-mainline-cvs/gcc/gcc/diagnostic.c,line 593.Breakpoint 2 at 0x8049804Breakpoint 3 at 0x80495a4(gdb) run   -quiet -v -I. -I. -I/u2/tools/gcc-mainline-cvs/gcc/gcc-I/u2/tools/gcc-mainline-cvs/gcc/gcc/.-I/u2/tools/gcc-mainline-cvs/gcc/gcc/../include -iprefix/u2/tools/gcc-mainline-obj-dir/gcc/stage1/../lib/gcc/i686-pc-linux-gnu/3.4/-isystem include -isystem stage1/include -isystem/usr/local/i686-pc-linux-gnu/bin/include -DIN_GCC -DHAVE_CONFIG_H/u2/tools/gcc-mainline-cvs/gcc/gcc/cppexp.c -quiet -dumpbase cppexp.c-march=athlon-xp -mtune=athlon-xp -auxbase-strip cppexp.o -g -O2 -W -Wall-Wwrite-strings -Wstrict-prototypes -Wmissing-prototypes -pedantic-Wno-long-long -Werror -version -p -fno-common -o /tmp/ccTCMJqs.sStarting program: /u2/tools/gcc-mainline-obj-dir/gcc/stage1/cc1 -quiet -v -I.-I. -I/u2/tools/gcc-mainline-cvs/gcc/gcc -I/u2/tools/gcc-mainline-cvs/gcc/gcc/.-I/u2/tools/gcc-mainline-cvs/gcc/gcc/../include -iprefix/u2/tools/gcc-mainline-obj-dir/gcc/stage1/../lib/gcc/i686-pc-linux-gnu/3.4/-isystem include -isystem stage1/include -isystem/usr/local/i686-pc-linux-gnu/bin/include -DIN_GCC -DHAVE_CONFIG_H/u2/tools/gcc-mainline-cvs/gcc/gcc/cppexp.c -quiet -dumpbase cppexp.c-march=athlon-xp -mtune=athlon-xp -auxbase-strip cppexp.o -g -O2 -W -Wall-Wwrite-strings -Wstrict-prototypes -Wmissing-prototypes -pedantic-Wno-long-long -Werror -version -p -fno-common -o /tmp/ccTCMJqs.sBreakpoint 2 at 0x4004b81eBreakpoint 3 at 0x4004a8c0ignoring nonexistent directory ""stage1/include""ignoring nonexistent directory ""/usr/local/i686-pc-linux-gnu/bin/include""ignoring nonexistent directory""/u2/tools/gcc-mainline-obj-dir/gcc/stage1/../lib/gcc/i686-pc-linux-gnu/3.4/include""ignoring nonexistent directory""/u2/tools/gcc-mainline-obj-dir/gcc/stage1/../lib/gcc/i686-pc-linux-gnu/3.4/../../../../i686-pc-linux-gnu/include""ignoring nonexistent directory ""NONE/include""ignoring nonexistent directory ""/usr/local/lib/gcc/i686-pc-linux-gnu/3.4/include""ignoring nonexistent directory ""/usr/local/lib/../i686-pc-linux-gnu/include""ignoring duplicate directory "".""ignoring duplicate directory ""/u2/tools/gcc-mainline-cvs/gcc/gcc/.""#include ""..."" search starts here:#include <...> search starts here: . /u2/tools/gcc-mainline-cvs/gcc/gcc /u2/tools/gcc-mainline-cvs/gcc/gcc/../include include /usr/local/include /usr/includeEnd of search list.GNU C version 3.4 20030916 (experimental) (i686-pc-linux-gnu)	compiled by GNU C version 3.3.GGC heuristics: --param ggc-min-expand=30 --param ggc-min-heapsize=4096Program received signal SIGSEGV, Segmentation fault.0x081c67b5 in profile_function (file=0x86660a0)    at /u2/tools/gcc-mainline-cvs/gcc/gcc/final.c:14401440	  if (sval && GET_CODE (svrtx) == REG)(gdb) list1435	    }1436	1437	  function_section (current_function_decl);1438	1439	#if defined(ASM_OUTPUT_REG_PUSH)1440	  if (sval && GET_CODE (svrtx) == REG)1441	    ASM_OUTPUT_REG_PUSH (file, REGNO (svrtx));1442	#endif1443	1444	#if defined(STATIC_CHAIN_INCOMING_REGNUM) && defined(ASM_OUTPUT_REG_PUSH)(gdb) print sval$1 = 1(gdb) print svrtx$2 = 0x0(gdb) quitA debugging session is active.Do you still want to close the debugger?(y or n) yishikawa@duron$ cf.Quote from ""pr -n cppexp.c"":  995	/* Clears the unused high order bits of the number pointed to by PNUM.  */  996	static cpp_num  997	num_trim (cpp_num num, size_t precision)  998	{  999	  if (precision > PART_PRECISION) 1000	    { 1001	      precision -= PART_PRECISION; 1002	      if (precision < PART_PRECISION) 1003		num.high &= ((cpp_num_part) 1 << precision) - 1; 1004	    } 1005	  else 1006	    { 1007	      if (precision < PART_PRECISION) 1008		num.low &= ((cpp_num_part) 1 << precision) - 1; 1009	      num.high = 0; 1010	    } 1011	 1012	  return num; 1013	} 1014	This is how I configured GCC for bootstrap.(I updated my local source CVS tree a few hours ago.):#set -vxLANG=CLC_ALL=Cexport LANGexport LC_ALLmake distclean cleanrm config.cache##--enable-languages=c## Use absolute pathnaes# env CC=gcc-cvs#env CC=gcc /u2/tools/gcc-mainline-cvs/gcc/configure  \	--enable-languages=c,c++,objc	\	--program-suffix=-mainline-cvs --enable-nls##env CC=gcc-cvs make BOOT_CFLAGS=""-g -pg -O2 -ftest-coverage -fprofile-arcs""bootstrap# doesn't work#env CC=""gcc"" make BOOT_CFLAGS=""-march=athlon-xp -mtune=athlon-xp -g -pg -O2 ""bootstrap# bootstrap-lean",RESOLVED          FIXED      
7090,DJ Delorie,libstdc++ (or libffi) configure script fails to find install-sh when cross-compiling in srcdir,"When attempting to build a cross compiler for powerpc-linux, the build proceeds until the configure script for libstdc++-v3 is executed.  This script fails with the message ""configure: error: can not find install-sh or install.sh in . ./.. ./../.."".  The directory in which the script is executed is ""gcc-3.1/powerpc-linux/nof/libstdc++-v3""; thus, it does not find the install-sh file in the root of the gcc source tree.There appears to be a similar problem with config.sub.Release:3.1Environment:Debian GNU/Linux 3.0 on x86How-To-Repeat:./configure --target=powerpc-linuxmake",RESOLVED          FIXED      
7971,DJ Delorie,[Solaris] fixing pthread.h for Solaris v2.6,"GCC complains about ""partly bracketed initialiser"" whenusing any >> or << operators in C++ to stdin/stdout/stderr.The reason is a bug in the Solaris v2.6 supplied pthread.h.As fixincludes is already making a copy of this fileand modifies the very same line that contains the incomplete initialiser, I don't see why fixincludes cannotfix this file properly.As far as I understand Sun Microsystems is not willing to fix this bug.The original file (line 54):#define	PTHREAD_MUTEX_INITIALIZER	{0, 0, 0}	/* = DEFAULTMUTEX */The GCC version after fixincludes (now line 63):#if __STDC__ - 0 == 0 && !defined(_NO_LONGLONG)#define	PTHREAD_MUTEX_INITIALIZER	{0, 0, 0}	/* = DEFAULTMUTEX */#else#define	PTHREAD_MUTEX_INITIALIZER	{0, 0, {0}}	/* = DEFAULTMUTEX */#endifShould be (line 63):#if __STDC__ - 0 == 0 && !defined(_NO_LONGLONG)#define	PTHREAD_MUTEX_INITIALIZER	{{{0}, 0}, {{{0}}}, 0}	/* = DEFAULTMUTEX */#else#define	PTHREAD_MUTEX_INITIALIZER	{0, 0, {0}}	/* = DEFAULTMUTEX */#endifRelease:all 3.x GCC releasesEnvironment:Solaris 2.6",RESOLVED          FIXED      
68192,David Edelsohn,AIX libstdc++ TLS symbols not exported,"Libtool does not recognize TLS symbols designated by ""L"" in AIX nm command output and does not add them to the export list.",RESOLVED          FIXED      
77349,David Edelsohn,AIX DWARF debugging offset in 64 bit mode,"The AIX assembler implicitly inserts the length information at the beginning of DWARF debugging sections.  In 64 bit mode, it also implicitly inserts the 64 bit DWARF extension escape sequence. This requires that GCC emit 64 bit offsets to match the directive emitted by the assembler.",RESOLVED          FIXED      
2714,David Edelsohn,Stabs truncated on AIX,"gcc believes that it can emit arbitrarily long stab stringson AIX (xcoffout.h contains  #define DBX_CONTIN_LENGTH 0).Howeverm the assembler truncates stabs trings after 32767characters.In C++ code using the STL it is possible to exceed this limit.Release:2.95.2Environment:AIXHow-To-Repeat:Compile the code -g and then objdump --syms the .o file.Observe that the stabs for _Rb_tree<basic_string<char,string_char_traits<char>,etc... is truncated after 32767 characters.",RESOLVED          FIXED      
10399,David Edelsohn,[AIX 5.2] make bootstrap error,"libgcc2.c: In function `__fixunsdfsi':libgcc2.c:1174: unrecognizable insn:(insn 13 12 14 (set (reg:CCEQ 119)        (compare:CCEQ (ior:SI (gt:SI (reg:CCFP 118)                    (const_int 0 [0x0]))                (eq:SI (reg:CCFP 118)                    (const_int 0 [0x0])))            (const_int 1 [0x1]))) -1 (insn_list 12 (nil))    (expr_list:REG_DEAD (reg:CCFP 118)        (nil)))libgcc2.c:1174: Internal compiler error in extract_insn, at recog.c:2148Release:gcc 3..2.2Environment:AIX 5.2.0.0gcc -vReading specs from /usr/bin/../lib/gcc-lib/powerpc-ibm-aix5.1.0.0/2.9-aix51-020209/specsgcc version 2.9-aix51-020209How-To-Repeat:./configure --prefix=/opt/freewaremake bootstrap",RESOLVED          FIXED      
56948,David Edelsohn,PPC V2DI ICE when loading zero into GPRs,"error: insn does not satisfy its constraints:(insn 1660 219 207 21 (set (reg:V2DI 9 9)        (const_vector:V2DI [                (const_int 0 [0])                (const_int 0 [0])            ])) /gsa/yktgsa-p4/06/gnu/aix/7.1/power/include/c++/4.8.1/bits/stl_vector.h:87 686 {*vsx_movv2di}     (nil))internal compiler error: in reload_cse_simplify_operands, at postreload.c:411",RESOLVED          FIXED      
4435,David Edelsohn,Object file has undefined basic_string symbol as local.,"A simple C++ program tries to access the private symbol	_Rep::_max_size in the basic_string module.  Here is the	loadmap output:	(ld): halt 4	(ld): setopt r/o->w 	(ld): setopt nodelcsect 	(ld): savename a.out	(ld): filelist 8 2	(ld): i /lib/crt0.o	(ld): i /tmp/cccZ9m7a.o	(ld): i /tmp/ccECfIAF.o	(ld): lib /usr/local/lib/gcc-lib/powerpc-ibm-aix4.3.3.0/3.0.1/../../../libstdc++.a	(ld): lib /usr/lib/libm.a	(ld): lib /usr/local/lib/gcc-lib/powerpc-ibm-aix4.3.3.0/3.0.1/../../../libgcc_s.a	(ld): i /usr/local/lib/gcc-lib/powerpc-ibm-aix4.3.3.0/3.0.1/libgcc.a	(ld): lib /usr/lib/libc.a	LIBRARY: Shared object libstdc++.a[libstdc++.so.3]: 1247 symbols imported.	LIBRARY: Shared object libgcc_s.a[shr.o]: 88 symbols imported.	LIBRARY: Shared object libc.a[shr.o]: 2206 symbols imported.	LIBRARY: Shared object libc.a[meth.o]: 2 symbols imported.	LIBRARY: Shared object libc.a[aio.o]: 11 symbols imported.	LIBRARY: Shared object libc.a[pse.o]: 78 symbols imported.	LIBRARY: Shared object libc.a[dl.o]: 4 symbols imported.	LIBRARY: Shared object libc.a[pty.o]: 1 symbols imported.	FILELIST: Number of previously inserted files processed: 8	(ld): exports /tmp/cc0MalCI.x 	EXPORTS: Symbols exported: 32	(ld): initfini _GLOBAL__FI_a_out _GLOBAL__FD_a_out 	(ld): resolve	RESOLVE: 160 of 4936 symbols were kept.	(ld): addgl /usr/lib/glink.o	ADDGL: Glink code added for 34 symbols.	(ld): er full	ld: 0711-318 ERROR: Undefined symbols were found.		The following symbols are in error:	 Symbol                    Inpndx  TY CL Source-File(Object-File) OR Import-File{Shared-object}				      RLD: Address  Section  Rld-type Referencing Symbol	 ----------------------------------------------------------------------------------------------	 _ZNSs4_Rep11_S_max_sizeE  [52]    ER RW try.C(/tmp/ccECfIAF.o)					   00005d48 .data    R_POS    [542]   <_ZNSs4_Rep11_S_max_sizeE>	 .pthread_mutex_lock       [94]    ER PR try.C(/tmp/ccECfIAF.o)					   000047fc .text    R_RBR    [296]   <._Z20__gthread_mutex_lockP15pthread_mutex_t>	 .pthread_mutex_unlock     [96]    ER PR try.C(/tmp/ccECfIAF.o)					   00004894 .text    R_RBR    [298]   <._Z22__gthread_mutex_unlockP15pthread_mutex_t>	ER: The return code is 8.	Moreover, the output of ""nm try.o | fgrep _S_max_size"" identifies	the symbol _ZNSs4_Rep11_S_max_sizeE in one place as undefined, and	in another as local data:	_ZNSs4_Rep11_S_max_sizeE U          -	_ZNSs4_Rep11_S_max_sizeE d      23880       4	So far as I can tell, this symbol is not defined in the module.	It does not appear as a definition in the assembler output.Release:3.0.1Environment:System: AIX aocsmro3 3 4 000383244C00Architecture: powerpc-ibmhost: aix4.3.3.0build: aix4.3.3.0target: aix4.3.3.0configured with: /home/gcc/gcc-3.0.1/configure --with-gcc-version-trigger=/home/gcc/gcc-3.0.1/gcc/version.c --host=powerpc-ibm-aix4.3.3.0 --without-java --without-zlib --without-info --norecursionHow-To-Repeat:	I compiled this simple C++ file try.C:	#include <iostream.h>	main()	{		cout << ""hello, world\n"";	}	This was the compiler command:	g++ -Wl,-bloadmap:/tmp/loadmap try.C -lstdc++",RESOLVED          FIXED      
37878,David Edelsohn,[4.4 regression] PPC64 ldu command generated with invalid offset,"With this compiler:[descartes:gcc/objdirs/gambc-v4_1_2] lucier% /pkgs/gcc-4.4.0-64/bin/gcc -vUsing built-in specs.Target: powerpc64-apple-darwin9.5.0Configured with: ../../mainline/configure CC='/usr/bin/gcc-4.0 -mcpu=970 -m64' --disable-werror --build=powerpc64-apple-darwin9.5.0 --host=powerpc64-apple-darwin9.5.0 --target=powerpc64-apple-darwin9.5.0 --with-gmp-include=/sw/include/ --with-gmp-lib=/sw/lib/ppc64 --with-mpfr-include=/sw/include/ --with-mpfr-lib=/sw/lib/ppc64 --prefix=/pkgs/gcc-4.4.0-64 --with-libiconv-prefix=/usr --with-system-zlibThread model: posixgcc version 4.4.0 20081020 (experimental) [trunk revision 141240] (GCC) I get this error:[descartes:gcc/objdirs/gambc-v4_1_2] lucier% /pkgs/gcc-4.4.0-64/bin/gcc -save-temps -mcpu=970 -m64 -I../include -I. -no-cpp-precomp -Wall -W -Wno-unused -O1 -fno-math-errno -fschedule-insns2 -fno-trapping-math -fno-strict-aliasing -fwrapv -fomit-frame-pointer -fPIC -fno-common -DHAVE_CONFIG_H -D___PRIMAL -D___LIBRARY -c assemtest.igcc: unrecognized option '-no-cpp-precomp'assemtest.s:69:Parameter error: expression must be a multiple of 4 (parameter 2)The offending assembler command is        ldu r0,7(r9)I'll include assemtest.i; the code itself is about 50 lines of machine-generated C code, plus a lot of declarations so I could get it to compile separately.",RESOLVED          FIXED      
21730,David Edelsohn,[4.0 only] Character length incorrect.,"character*2 a      character*4 b      parameter(a=""12"")      parameter (b = a)      write (*, *) b      endgfortran output: ""12""correct output: ""12  """,RESOLVED          FIXED      
28753,David Edelsohn,"[4.2 regression] ICE in extract_insn, at recog.c:2075 on powerpc","The following ICE on powerpc with gcc 4.2 appeared between 20051124 and 20060218:(sid)362:tbm@test: ~] /usr/lib/gcc-snapshot/bin/gcc -c -O2 pyepl-environment.cpyepl-environment.c: In function '__pyx_f_11environment_15LowVEnvironment_near_callback':pyepl-environment.c:148: error: unrecognizable insn:(insn 295 122 296 11 (set (reg:CC 0 0)        (const_int 0 [0x0])) -1 (nil)    (nil))pyepl-environment.c:148: internal compiler error: in extract_insn, at recog.c:2075Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.zsh: exit 1     /usr/lib/gcc-snapshot/bin/gcc -c -O2 pyepl-environment.c(sid)363:tbm@test: ~] /usr/lib/gcc-snapshot/bin/gcc -c -O1 pyepl-environment.c(sid)364:tbm@test: ~]",RESOLVED          FIXED      
26350,David Edelsohn,"ICE in extract_insn, at recog.c:2084, -fPIC -mlong-double-128","We ICE building hercules for powerpc32.  Reduced testcase, build with-O2 -fPIC -mlong-double-128:  typedef int int32_t __attribute__ ((__mode__ (__SI__)));  typedef unsigned char uint8_t;  typedef unsigned int uint32_t;  typedef struct REGS REGS;  typedef union { uint32_t F; } FW;  typedef union { struct { FW L; } F; } DW;  typedef struct _PSW {          DW ia;  } PSW;  struct REGS {          PSW psw;          DW cr[16];  };  struct ebfp {     long double v;  };void ( s390_convert_fix32_to_bfp_ext_reg) (REGS *regs){      struct ebfp op1;      int32_t op2; ((regs))->psw.ia.F.L.F += (4); if(!((regs)->cr[(0)].F.L.F & 0x00040000))   op1.v = (long double)op2; put_ebfp(&op1);}",RESOLVED          FIXED      
24953,David Edelsohn,"[4.1/4.2 Regression] RTL check: access of elt 1 of vector with last elt 0 in vrsave_operation_1, at config/rs6000/predicates.md:1041","Running the GCC testsuite I see the following ICE:Executing on host: /abuild/aj/gcc/gcc/xgcc -B/abuild/aj/gcc/gcc/ /aj-cvs/gcc-svn/branches/gcc-4_1-branch/gcc/testsuite/gcc.dg/vmx/gcc-bug-b.c   -O1  -maltivec -mabi=altivec -std=gnu99 -fno-show-column -S  -m64 -o gcc-bug-b.s    (timeout = 300)/aj-cvs/gcc-svn/branches/gcc-4_1-branch/gcc/testsuite/gcc.dg/vmx/gcc-bug-b.c: In function 'test':/aj-cvs/gcc-svn/branches/gcc-4_1-branch/gcc/testsuite/gcc.dg/vmx/gcc-bug-b.c:23: internal compiler error: RTL check: access of elt 1 of vector with last elt 0 in vrsave_operation_1, at config/rs6000/predicates.md:1041Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.compiler exited with status 1output is:/aj-cvs/gcc-svn/branches/gcc-4_1-branch/gcc/testsuite/gcc.dg/vmx/gcc-bug-b.c: In function 'test':/aj-cvs/gcc-svn/branches/gcc-4_1-branch/gcc/testsuite/gcc.dg/vmx/gcc-bug-b.c:23: internal compiler error: RTL check: access of elt 1 of vector with last elt 0 in vrsave_operation_1, at config/rs6000/predicates.md:1041Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.FAIL: gcc.dg/vmx/gcc-bug-b.c  -O1  (test for excess errors)Compiler is:/opt/gcc/4.1-devel/bin/gcc -vUsing built-in specs.Target: powerpc64-suse-linux-gnuConfigured with: /aj-cvs/gcc-svn/branches/gcc-4_1-branch/configure --prefix=/opt/gcc/4.1-devel --enable-checking=misc,tree,gc,rtl,rtlflag,assert --enable-threads=posix --enable-clocale=gnu --enable-__cxa_atexit --enable-shared --enable-languages=c,c++,treelang,java,f95,objc --with-system-zlib --with-cpu=default32 powerpc64-suse-linux-gnuThread model: posixgcc version 4.1.0 20051119 (prerelease)",RESOLVED          FIXED      
24772,David Edelsohn,[4.1 Regression] Lots of ICEs in vrsave_operation_1 while running the testsuite on powerpc,"Executing on host: /abuild/aj/gcc/gcc/xgcc -B/abuild/aj/gcc/gcc/ /aj-cvs/gcc-svn/trunk/gcc/testsuite/gcc.dg/vect/vect-46.c   -O2 -ftree-vectorize -maltivec -ftree-vectorizer-verbose=4 -fdump-tree-vect-stats -fno-show-column  -lm   -m64 -o ./vect-46.exe    (timeout = 300)/aj-cvs/gcc-svn/trunk/gcc/testsuite/gcc.dg/vect/vect-46.c: In function 'main1':/aj-cvs/gcc-svn/trunk/gcc/testsuite/gcc.dg/vect/vect-46.c:45: internal compiler error: RTL check: expected code 'reg', have 'unspec_volatile' in vrsave_operation_1, at config/rs6000/predicates.md:1041Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://gcc.gnu.org/bugs.html> for instructions.The same ICE occurs for more than 50 testcases.This is with:$ /opt/gcc/4.1-devel/bin/gcc -vUsing built-in specs.Target: powerpc64-suse-linux-gnuConfigured with: /aj-cvs/gcc-svn/trunk/configure --prefix=/opt/gcc/4.1-devel --enable-checking=misc,tree,gc,rtl,rtlflag,assert --enable-threads=posix --enable-clocale=gnu --enable-__cxa_atexit --enable-shared --enable-languages=c,c++,treelang,java,f95,objc --with-system-zlib --with-cpu=default32 powerpc64-suse-linux-gnuThread model: posixgcc version 4.1.0 20051109 (experimental)",RESOLVED          FIXED      
23539,David Edelsohn,C & C++ compiler generating misaligned references regardless of compiler flags,"This issue was uncovered in porting our existing software to the GNU tool-chain.  We have a number of structures that contain 3 individual bytes of data.  When the GNU tool-chain compiles the source code, it creates a load/store byte instruction followed by a load/store half-word instruction with an odd (1,3,5,7,9,11,etc) memory offset.  This causes a data alignment exception to occur.We have tried all combinations of the compiler flags for structure packing, alignment (natural, power), and anything else that we have been able to uncover in the GCC documentation.This behavior exists at optimization levels, 0,1 and 2.  We haven't tried any other levels as of yet.There should be a means of having the compiler override mis-aligned address references.  This is supported at a software level (if the authors of the OS or software handle this exception).  However, the authors of this component did not, and it would cause far too much of a runtime hit to implement this.  A code sample is included below that will re-create this problem.----  File test.cc -----struct foo {   char bar1;   char bar2;   char bar3;};int foobarStruct(foo fubarStruct) {   if(fubarStruct.bar1 == 'A' &&      fubarStruct.bar2 == 'B' &&      fubarStruct.bar3 == 'C')   {      return 1;   }   else {      return 0;   }}int main(int argc, char **argv) {   int rVal1;   int rVal2;   foo barStruct;   barStruct.bar1 = 'A';   barStruct.bar2 = 'B';   barStruct.bar3 = 'C';   rVal1 = foobarStruct(barStruct);   barStruct.bar1 = 'A';   barStruct.bar2 = 'C';   barStruct.bar3 = 'B';   rVal1 = foobarStruct(barStruct);   return (rVal1 || rVal2);}------------- End of file ---------------------Again using any combinations of compiler flags -malign-natural, -malign-power, -fpack-struct=2, -fno-pack-struct, etc have not given us the desired behavior.Here's the assembly output from the command(s):(1)> g++ test.cc -o test(2)> ppcobjdump -C -S test.otest.o:     file format elf32-powerpcDisassembly of section .text:00000000 <foobarStruct(foo)>:   0:   94 21 ff e8     stwu    r1,-24(r1)   4:   93 e1 00 14     stw     r31,20(r1)   8:   7c 3f 0b 78     mr      r31,r1   c:   90 7f 00 0c     stw     r3,12(r31)  10:   81 3f 00 0c     lwz     r9,12(r31)  14:   88 09 00 00     lbz     r0,0(r9)  18:   54 00 06 3e     clrlwi  r0,r0,24  1c:   2f 80 00 41     cmpwi   cr7,r0,65  20:   40 9e 00 38     bne-    cr7,58 <foobarStruct(foo)+0x58>  24:   81 3f 00 0c     lwz     r9,12(r31)  28:   88 09 00 01     lbz     r0,1(r9)  2c:   54 00 06 3e     clrlwi  r0,r0,24  30:   2f 80 00 42     cmpwi   cr7,r0,66  34:   40 9e 00 24     bne-    cr7,58 <foobarStruct(foo)+0x58>  38:   81 3f 00 0c     lwz     r9,12(r31)  3c:   88 09 00 02     lbz     r0,2(r9)  40:   54 00 06 3e     clrlwi  r0,r0,24  44:   2f 80 00 43     cmpwi   cr7,r0,67  48:   40 9e 00 10     bne-    cr7,58 <foobarStruct(foo)+0x58>  4c:   38 00 00 01     li      r0,1  50:   90 1f 00 08     stw     r0,8(r31)  54:   48 00 00 0c     b       60 <foobarStruct(foo)+0x60>  58:   39 20 00 00     li      r9,0  5c:   91 3f 00 08     stw     r9,8(r31)  60:   80 1f 00 08     lwz     r0,8(r31)  64:   7c 03 03 78     mr      r3,r0  68:   81 61 00 00     lwz     r11,0(r1)  6c:   83 eb ff fc     lwz     r31,-4(r11)  70:   7d 61 5b 78     mr      r1,r11  74:   4e 80 00 20     blr00000078 <main>:  78:   94 21 ff a8     stwu    r1,-88(r1)  7c:   7c 08 02 a6     mflr    r0  80:   93 e1 00 54     stw     r31,84(r1)  84:   90 01 00 5c     stw     r0,92(r1)  88:   7c 3f 0b 78     mr      r31,r1  8c:   90 7f 00 28     stw     r3,40(r31)  90:   90 9f 00 2c     stw     r4,44(r31)  94:   48 00 00 01     bl      94 <main+0x1c>  98:   38 00 00 41     li      r0,65  9c:   98 1f 00 16     stb     r0,22(r31)  a0:   38 00 00 42     li      r0,66  a4:   98 1f 00 17     stb     r0,23(r31)  a8:   38 00 00 43     li      r0,67  ac:   98 1f 00 18     stb     r0,24(r31)  b0:   88 1f 00 16     lbz     r0,22(r31)  b4:   a1 3f 00 17     lhz     r9,23(r31)    <-- Notice the odd offset  b8:   98 1f 00 13     stb     r0,19(r31)  bc:   b1 3f 00 14     sth     r9,20(r31)  c0:   88 1f 00 13     lbz     r0,19(r31)  c4:   a1 3f 00 14     lhz     r9,20(r31)  c8:   98 1f 00 30     stb     r0,48(r31)  cc:   b1 3f 00 31     sth     r9,49(r31)    <-- Notice the off offset  d0:   38 1f 00 30     addi    r0,r31,48  d4:   7c 03 03 78     mr      r3,r0  d8:   48 00 00 01     bl      d8 <main+0x60>  dc:   7c 60 1b 78     mr      r0,r3  e0:   90 1f 00 0c     stw     r0,12(r31)  e4:   38 00 00 41     li      r0,65  e8:   98 1f 00 16     stb     r0,22(r31)  ec:   38 00 00 43     li      r0,67  f0:   98 1f 00 17     stb     r0,23(r31)  f4:   38 00 00 42     li      r0,66  f8:   98 1f 00 18     stb     r0,24(r31)  fc:   88 1f 00 16     lbz     r0,22(r31) 100:   a1 3f 00 17     lhz     r9,23(r31)    <-- Again odd offsets 104:   98 1f 00 10     stb     r0,16(r31) 108:   b1 3f 00 11     sth     r9,17(r31)    <-- Again odd offsets 10c:   88 1f 00 10     lbz     r0,16(r31) 110:   a1 3f 00 11     lhz     r9,17(r31) 114:   98 1f 00 30     stb     r0,48(r31) 118:   b1 3f 00 31     sth     r9,49(r31) 11c:   38 1f 00 30     addi    r0,r31,48 120:   7c 03 03 78     mr      r3,r0 124:   48 00 00 01     bl      124 <main+0xac> 128:   7c 60 1b 78     mr      r0,r3 12c:   90 1f 00 0c     stw     r0,12(r31) 130:   80 1f 00 0c     lwz     r0,12(r31) 134:   2f 80 00 00     cmpwi   cr7,r0,0 138:   40 9e 00 10     bne-    cr7,148 <main+0xd0> 13c:   80 1f 00 08     lwz     r0,8(r31) 140:   2f 80 00 00     cmpwi   cr7,r0,0 144:   41 9e 00 10     beq-    cr7,154 <main+0xdc> 148:   38 00 00 01     li      r0,1 14c:   90 1f 00 40     stw     r0,64(r31) 150:   48 00 00 0c     b       15c <main+0xe4> 154:   38 00 00 00     li      r0,0 158:   90 1f 00 40     stw     r0,64(r31) 15c:   80 1f 00 40     lwz     r0,64(r31) 160:   7c 03 03 78     mr      r3,r0 164:   81 61 00 00     lwz     r11,0(r1) 168:   80 0b 00 04     lwz     r0,4(r11) 16c:   7c 08 03 a6     mtlr    r0 170:   83 eb ff fc     lwz     r31,-4(r11) 174:   7d 61 5b 78     mr      r1,r11 178:   4e 80 00 20     blrFrom Section 3.3.1 Alignment and Misaligned AccessesThe operand of a single-register memory access instruction has a natural alignment boundary equal to the operand length.  The ""natural"" address of an operand is an integral multiple of the operand length, ......I can understand what the compiler is trying to achieve here in the sense of doing two loads/stores versus three, however it is performing misaligned loads/stores as a result.  This optimization actually becomes a performance hit if the underlying system is forced to perform the exception handling and piece the parts together.Perhaps it's not a ""real"" bug, however not being able to override this behavior probably is.This behavior has been observed in 4.0.1, 4.0.0, 3.4.4 and 3.3.1",RESOLVED          FIXED      
18720,David Edelsohn,collect2 uses wrong search order if -brtl specified,"I tried building libsigc++-2.0.6 (http://libsigc.sourceforge.net/) onAIX 5.2 with GCC 3.3.2 and 3.4.2. GCC 3.4.2 worked fine. However, withGCC 3.3.2, I ran into the following problem:  ..  /bin/sh ../libtool --mode=link g++  -O2 -mcpu=common  -Wl,-blibpath:/opt/TWWfsw/gcc332r/lib -Wl,-brtl -Wl,-blibpath:/usr/lib  -o test_trackable  test_trackable.o ../sigc++/libsigc-2.0.la  g++ -O2 -mcpu=common -Wl,-blibpath:/opt/TWWfsw/gcc332r/lib  -Wl,-brtl -Wl,-blibpath:/usr/lib -o .libs/test_trackable test_trackable.o  -L../sigc++/.libs -lsigc-2.0 -L/opt/TWWfsw/gcc332/lib -lstdc++  -Wl,-blibpath:/opt/TWWfsw/libsigc++20/lib/gcc32:\  /opt/TWWfsw/gcc332/lib:/opt/TWWfsw/gcc332r/lib:/usr/lib  ld: 0711-317 ERROR: Undefined symbol: _GLOBAL__F_signal.ccAo6sTo  ld: 0711-317 ERROR: Undefined symbol: _GLOBAL__F_functors_slot.cccL3CqqBecause I set LDFLAGS=""-Wl,-brtl"" during the ./configure state,libtool will create a static and shared version of the libsigc++library. The two undefined symbols, _GLOBAL__F_signal.ccAo6sTo and_GLOBAL__F_functors_slot.cccL3Cqq, come from the static version of thelibsigc++ library, ../sigc++/.libs/libsigc-2.0.a. I thought it odd thelinker would use ../sigc++/.libs/libsigc-2.0.a rather than../sigc++/.libs/libsigc-2.0.so. However, after adding ""-v -Wl,-v"" tothe final link command, I found the following:  g++ -v -Wl,-v -O2 -mcpu=common -Wl,-blibpath:/opt/TWWfsw/gcc332r/lib  -Wl,-brtl -Wl,-blibpath:/usr/lib -o .libs/test_trackable test_trackable.o  -L../sigc++/.libs -lsigc-2.0 -L/opt/TWWfsw/gcc332/lib -lstdc++  -Wl,-blibpath:/opt/TWWfsw/libsigc++20/lib/gcc32:\  /opt/TWWfsw/gcc332/lib:/opt/TWWfsw/gcc332r/lib:/usr/lib  ...  /opt/TWWfsw/gcc332/bin/g++ -x c -c -o /tmp//ccI74qdc.o -mcpu=common  -fno-exceptions -w /tmp//ccgMXWab.c  ...Looking at the /tmp/ccgMXWab.c file, I see:  extern void *x13 __asm__ (""_GLOBAL__F_signal.ccAo6sTo"");  extern void *x19 __asm__ (""_GLOBAL__F_functors_slot.cccL3Cqq"");If I change these two lines to match the corresponding entries in../sigc++/.libs/libsigc-2.0.so:  extern void *x13 __asm__ (""_GLOBAL__F_signal.ccKvSdiF"");  extern void *x19 __asm__ (""_GLOBAL__F_functors_slot.ccHOMFb6"");then the link step that failed above succeeds.The problem is that collect2 first looks in "".a"" libraries for symbols and thenin "".so"" libraries. It ignores -brtl (which redefines the library search orderto "".so"" first and "".a"" second).",RESOLVED          FIXED      
21742,David Edelsohn,[4.1 Regression] unrecognized insn for struct-layout-1 tests with complex members,"Generated tests t154 and t199 from gcc.dg/compat/struct-layout-1 failwith an ICE compiling c_compat_y_tst.o with -m64 on powerpc64-linux.The first started failing on 20050424, the second on 20050501, and bothhave failed regularly since then, but it seems to be a latent bugbecause results for regression hunts don't match up with those dates.                                                                                I'll attach minimized test cases for both.  Here's the output I get fromtoday's mainline:                                                                                elm3b11% /opt/gcc-nightly/mline/bin/gcc -m64 -c bug_t154.cbug_t154.c: In function ‘check13995’:bug_t154.c:36: error: unrecognizable insn:(insn 25 24 26 1 (set (reg:DF 130 [ D.1250+8 ])        (subreg:DF (mem/s/j:DC (plus:DI (reg/f:DI 114 virtual-stack-vars)                    (const_int 33112 [0x8158])) [0 <variable>.e.m+0 S16 A64])8)) -1 (nil)    (nil))bug_t154.c:36: internal compiler error: in extract_insn, at recog.c:2082                                                                                elm3b11% /opt/gcc-nightly/mline/bin/gcc -m64 -c bug_t199.cbug_t199.c: In function ‘check18102’:bug_t199.c:23: error: unrecognizable insn:(insn 29 28 30 1 (set (reg:SF 130 [ D.1239+4 ])        (subreg:SF (mem/s/j:SC (plus:DI (reg/f:DI 114 virtual-stack-vars)                    (const_int 56000 [0xdac0])) [0 arg2.y+0 S8 A512]) 4)) -1 (nil)    (nil))bug_t199.c:23: internal compiler error: in extract_insn, at recog.c:2082",RESOLVED          FIXED      
21760,David Edelsohn,[4.1 Regression] Powerpc atomic builtins missing PPC405 errata,"In libstdc++-v3, atomicity.h for powerpc used to include:#ifdef __PPC405__#define _STWCX ""sync \n\tstwcx. ""#else#define _STWCX ""stwcx. ""#endifThis work around is still missing from the powerpc implementation of thebuiltins for atomic memory operations.",RESOLVED          FIXED      
18033,David Edelsohn,[3.4/4.0 Regression] --disable-aix64 doesn't remove ppc64 from multilib list,"The --disable-aix64 (--enable-aix64=no) configuration switch claims to remove ppc64 from the multilib list; however, it doesn't seem to work.  On a 32-bit AIX system, it must be disabled or the build fails when ""checking whether the C compiler works"".  The larger --disable-multilib switch works, but is not desirable since it disables all other libraries including libgcc_s_pthread.config.status:#! /bin/sh# Generated automatically by configure.# Run this file to recreate the current configuration.# This directory was configured as follows,# on host askees-aix:## /home/downloads/gcc/gcc-3.4.2/configure  --enable-threads=posix --prefix=/usr/local/gcc/gcc-3.4.2 --enable-languages=c,c++ --enable-aix64=no --with-gcc-version-trigger=/home/downloads/gcc/gcc-3.4.2/gcc/version.cBootstrap failure (you can see it entering ppc64 despite being disable):gmake[2]: Leaving directory `/home/downloads/gcc/gcc-3.4.2.objdir3/powerpc-ibm-aix5.1.0.0/powerpc/libstdc++-v3/include'Running configure in multilib subdir ppc64pwd: /home/downloads/gcc/gcc-3.4.2.objdir3/powerpc-ibm-aix5.1.0.0mkdir ppc64configure: creating cache ./config.cachechecking build system type... powerpc-ibm-aix5.1.0.0checking host system type... powerpc-ibm-aix5.1.0.0checking target system type... powerpc-ibm-aix5.1.0.0checking for a BSD-compatible install... /home/downloads/gcc/gcc-3.4.2/install-sh -cchecking whether build environment is sane... yeschecking for gawk... nochecking for mawk... nochecking for nawk... nawkchecking whether gmake sets $(MAKE)... yeschecking for powerpc-ibm-aix5.1.0.0-gcc... /home/downloads/gcc/gcc-3.4.2.objdir3/gcc/xgcc -B/home/downloads/gcc/gcc-3.4.2.objdir3/gcc/ -B/usr/local/gcc/gcc-3.4.2/powerpc-ibm-aix5.1.0.0/bin/ -B/usr/local/gcc/gcc-3.4.2/powerpc-ibm-aix5.1.0.0/lib/ -isystem /usr/local/gcc/gcc-3.4.2/powerpc-ibm-aix5.1.0.0/include -isystem /usr/local/gcc/gcc-3.4.2/powerpc-ibm-aix5.1.0.0/sys-include  -maix64checking for C compiler default output... a.outchecking whether the C compiler works... configure: error: cannot run C compiled programs.If you meant to cross compile, use `--host'.See `config.log' for more details.gmake[1]: *** [configure-target-libstdc++-v3] Error 1gmake[1]: Leaving directory `/home/downloads/gcc/gcc-3.4.2.objdir3'gmake: *** [bootstrap] Error 2",RESOLVED          FIXED      
19052,David Edelsohn,unit 0 not preconnected to standard error,"This is different from g77 (and to allUnix fortran compilers that I know of).$ cat unit_0.f      write (0,*) ""hello""      end$ rm -f fort.0$ gfortran unit_0.f$ ./a.out$ cat fort.0 hello$ rm -f fort.0$ g77 unit_0.f$ ./a.out hello$ cat fort.0cat: fort.0: No such file or directory",RESOLVED          FIXED      
19491,David Edelsohn,"va_start incorrect, Number of floating point and integer registers counted incorrectly","I couldn't find a description of Host, Target and Build Triplet insidegcc.gnu.org.Here is my gcc version$ gcc -vReading specs from /usr/lib/gcc-lib/powerpc-linux/3.3.4/specsConfigured with: ../src/configure -v--enable-languages=c,c++,java,f77,pascal,objc,ada --prefix=/usr--mandir=/usr/share/man --infodir=/usr/share/info--with-gxx-include-dir=/usr/include/c++/3.3 --enable-shared --with-system-zlib--enable-nls --without-included-gettext --enable-__cxa_atexit--enable-clocale=gnu --enable-debug --enable-java-gc=boehm--enable-java-awt=xlib --enable-objc-gc --disable-multilib powerpc-linuxThread model: posixgcc version 3.3.4 (Debian 1:3.3.4-2)The function rs6000_va_start() in gcc/gcc/config/rs6000/rs6000.c incorrectlysets va_list.gpr (and fpr). gpr should have a maximum value equal to the numberof integer registers available for parameter passing. If gpr takes greaternumber of values, this results in a wraparound, as in the example below, where256 integer parameters are passed.I don't know if I looking at the correct function corresponding to the target,but the bug exists. Using gdb and inspecting the va_list after the va_startfunction shows that va_list.gpr wraps around.The preprocessed file is (also) available athttp://www.cs.utexas.edu/users/suriya/va_list.i# 1 ""va_list.c""# 1 ""<built-in>""# 1 ""<command line>""# 1 ""va_list.c""# 1 ""/usr/lib/gcc-lib/powerpc-linux/3.3.4/include/stdarg.h"" 1 3 4# 43 ""/usr/lib/gcc-lib/powerpc-linux/3.3.4/include/stdarg.h"" 3 4typedef __builtin_va_list __gnuc_va_list;# 105 ""/usr/lib/gcc-lib/powerpc-linux/3.3.4/include/stdarg.h"" 3 4typedef __gnuc_va_list va_list;# 2 ""va_list.c"" 2int foo(        int a0x00, int a0x01, int a0x02, int a0x03, int a0x04, int a0x05, inta0x06, int a0x07,        int a0x08, int a0x09, int a0x0a, int a0x0b, int a0x0c, int a0x0d, inta0x0e, int a0x0f,        int a0x10, int a0x11, int a0x12, int a0x13, int a0x14, int a0x15, inta0x16, int a0x17,        int a0x18, int a0x19, int a0x1a, int a0x1b, int a0x1c, int a0x1d, inta0x1e, int a0x1f,        int a0x20, int a0x21, int a0x22, int a0x23, int a0x24, int a0x25, inta0x26, int a0x27,        int a0x28, int a0x29, int a0x2a, int a0x2b, int a0x2c, int a0x2d, inta0x2e, int a0x2f,        int a0x30, int a0x31, int a0x32, int a0x33, int a0x34, int a0x35, inta0x36, int a0x37,        int a0x38, int a0x39, int a0x3a, int a0x3b, int a0x3c, int a0x3d, inta0x3e, int a0x3f,        int a0x40, int a0x41, int a0x42, int a0x43, int a0x44, int a0x45, inta0x46, int a0x47,        int a0x48, int a0x49, int a0x4a, int a0x4b, int a0x4c, int a0x4d, inta0x4e, int a0x4f,        int a0x50, int a0x51, int a0x52, int a0x53, int a0x54, int a0x55, inta0x56, int a0x57,        int a0x58, int a0x59, int a0x5a, int a0x5b, int a0x5c, int a0x5d, inta0x5e, int a0x5f,        int a0x60, int a0x61, int a0x62, int a0x63, int a0x64, int a0x65, inta0x66, int a0x67,        int a0x68, int a0x69, int a0x6a, int a0x6b, int a0x6c, int a0x6d, inta0x6e, int a0x6f,        int a0x70, int a0x71, int a0x72, int a0x73, int a0x74, int a0x75, inta0x76, int a0x77,        int a0x78, int a0x79, int a0x7a, int a0x7b, int a0x7c, int a0x7d, inta0x7e, int a0x7f,        int a0x80, int a0x81, int a0x82, int a0x83, int a0x84, int a0x85, inta0x86, int a0x87,        int a0x88, int a0x89, int a0x8a, int a0x8b, int a0x8c, int a0x8d, inta0x8e, int a0x8f,        int a0x90, int a0x91, int a0x92, int a0x93, int a0x94, int a0x95, inta0x96, int a0x97,        int a0x98, int a0x99, int a0x9a, int a0x9b, int a0x9c, int a0x9d, inta0x9e, int a0x9f,        int a0xa0, int a0xa1, int a0xa2, int a0xa3, int a0xa4, int a0xa5, inta0xa6, int a0xa7,        int a0xa8, int a0xa9, int a0xaa, int a0xab, int a0xac, int a0xad, inta0xae, int a0xaf,        int a0xb0, int a0xb1, int a0xb2, int a0xb3, int a0xb4, int a0xb5, inta0xb6, int a0xb7,        int a0xb8, int a0xb9, int a0xba, int a0xbb, int a0xbc, int a0xbd, inta0xbe, int a0xbf,        int a0xc0, int a0xc1, int a0xc2, int a0xc3, int a0xc4, int a0xc5, inta0xc6, int a0xc7,        int a0xc8, int a0xc9, int a0xca, int a0xcb, int a0xcc, int a0xcd, inta0xce, int a0xcf,        int a0xd0, int a0xd1, int a0xd2, int a0xd3, int a0xd4, int a0xd5, inta0xd6, int a0xd7,        int a0xd8, int a0xd9, int a0xda, int a0xdb, int a0xdc, int a0xdd, inta0xde, int a0xdf,        int a0xe0, int a0xe1, int a0xe2, int a0xe3, int a0xe4, int a0xe5, inta0xe6, int a0xe7,        int a0xe8, int a0xe9, int a0xea, int a0xeb, int a0xec, int a0xed, inta0xee, int a0xef,        int a0xf0, int a0xf1, int a0xf2, int a0xf3, int a0xf4, int a0xf5, inta0xf6, int a0xf7,        int a0xf8, int a0xf9, int a0xfa, int a0xfb, int a0xfc, int a0xfd, inta0xfe, int a0xff,        ...){    va_list list;    int i;    __builtin_va_start(list,a0xff);    i = __builtin_va_arg(list,int);    return i;}int main(){    return foo(        689 + 0x00, 689 + 0x01, 689 + 0x02, 689 + 0x03, 689 + 0x04, 689 + 0x05,689 + 0x06, 689 + 0x07,        689 + 0x08, 689 + 0x09, 689 + 0x0a, 689 + 0x0b, 689 + 0x0c, 689 + 0x0d,689 + 0x0e, 689 + 0x0f,        689 + 0x10, 689 + 0x11, 689 + 0x12, 689 + 0x13, 689 + 0x14, 689 + 0x15,689 + 0x16, 689 + 0x17,        689 + 0x18, 689 + 0x19, 689 + 0x1a, 689 + 0x1b, 689 + 0x1c, 689 + 0x1d,689 + 0x1e, 689 + 0x1f,        689 + 0x20, 689 + 0x21, 689 + 0x22, 689 + 0x23, 689 + 0x24, 689 + 0x25,689 + 0x26, 689 + 0x27,        689 + 0x28, 689 + 0x29, 689 + 0x2a, 689 + 0x2b, 689 + 0x2c, 689 + 0x2d,689 + 0x2e, 689 + 0x2f,        689 + 0x30, 689 + 0x31, 689 + 0x32, 689 + 0x33, 689 + 0x34, 689 + 0x35,689 + 0x36, 689 + 0x37,        689 + 0x38, 689 + 0x39, 689 + 0x3a, 689 + 0x3b, 689 + 0x3c, 689 + 0x3d,689 + 0x3e, 689 + 0x3f,        689 + 0x40, 689 + 0x41, 689 + 0x42, 689 + 0x43, 689 + 0x44, 689 + 0x45,689 + 0x46, 689 + 0x47,        689 + 0x48, 689 + 0x49, 689 + 0x4a, 689 + 0x4b, 689 + 0x4c, 689 + 0x4d,689 + 0x4e, 689 + 0x4f,        689 + 0x50, 689 + 0x51, 689 + 0x52, 689 + 0x53, 689 + 0x54, 689 + 0x55,689 + 0x56, 689 + 0x57,        689 + 0x58, 689 + 0x59, 689 + 0x5a, 689 + 0x5b, 689 + 0x5c, 689 + 0x5d,689 + 0x5e, 689 + 0x5f,        689 + 0x60, 689 + 0x61, 689 + 0x62, 689 + 0x63, 689 + 0x64, 689 + 0x65,689 + 0x66, 689 + 0x67,        689 + 0x68, 689 + 0x69, 689 + 0x6a, 689 + 0x6b, 689 + 0x6c, 689 + 0x6d,689 + 0x6e, 689 + 0x6f,        689 + 0x70, 689 + 0x71, 689 + 0x72, 689 + 0x73, 689 + 0x74, 689 + 0x75,689 + 0x76, 689 + 0x77,        689 + 0x78, 689 + 0x79, 689 + 0x7a, 689 + 0x7b, 689 + 0x7c, 689 + 0x7d,689 + 0x7e, 689 + 0x7f,        689 + 0x80, 689 + 0x81, 689 + 0x82, 689 + 0x83, 689 + 0x84, 689 + 0x85,689 + 0x86, 689 + 0x87,        689 + 0x88, 689 + 0x89, 689 + 0x8a, 689 + 0x8b, 689 + 0x8c, 689 + 0x8d,689 + 0x8e, 689 + 0x8f,        689 + 0x90, 689 + 0x91, 689 + 0x92, 689 + 0x93, 689 + 0x94, 689 + 0x95,689 + 0x96, 689 + 0x97,        689 + 0x98, 689 + 0x99, 689 + 0x9a, 689 + 0x9b, 689 + 0x9c, 689 + 0x9d,689 + 0x9e, 689 + 0x9f,        689 + 0xa0, 689 + 0xa1, 689 + 0xa2, 689 + 0xa3, 689 + 0xa4, 689 + 0xa5,689 + 0xa6, 689 + 0xa7,        689 + 0xa8, 689 + 0xa9, 689 + 0xaa, 689 + 0xab, 689 + 0xac, 689 + 0xad,689 + 0xae, 689 + 0xaf,        689 + 0xb0, 689 + 0xb1, 689 + 0xb2, 689 + 0xb3, 689 + 0xb4, 689 + 0xb5,689 + 0xb6, 689 + 0xb7,        689 + 0xb8, 689 + 0xb9, 689 + 0xba, 689 + 0xbb, 689 + 0xbc, 689 + 0xbd,689 + 0xbe, 689 + 0xbf,        689 + 0xc0, 689 + 0xc1, 689 + 0xc2, 689 + 0xc3, 689 + 0xc4, 689 + 0xc5,689 + 0xc6, 689 + 0xc7,        689 + 0xc8, 689 + 0xc9, 689 + 0xca, 689 + 0xcb, 689 + 0xcc, 689 + 0xcd,689 + 0xce, 689 + 0xcf,        689 + 0xd0, 689 + 0xd1, 689 + 0xd2, 689 + 0xd3, 689 + 0xd4, 689 + 0xd5,689 + 0xd6, 689 + 0xd7,        689 + 0xd8, 689 + 0xd9, 689 + 0xda, 689 + 0xdb, 689 + 0xdc, 689 + 0xdd,689 + 0xde, 689 + 0xdf,        689 + 0xe0, 689 + 0xe1, 689 + 0xe2, 689 + 0xe3, 689 + 0xe4, 689 + 0xe5,689 + 0xe6, 689 + 0xe7,        689 + 0xe8, 689 + 0xe9, 689 + 0xea, 689 + 0xeb, 689 + 0xec, 689 + 0xed,689 + 0xee, 689 + 0xef,        689 + 0xf0, 689 + 0xf1, 689 + 0xf2, 689 + 0xf3, 689 + 0xf4, 689 + 0xf5,689 + 0xf6, 689 + 0xf7,        689 + 0xf8, 689 + 0xf9, 689 + 0xfa, 689 + 0xfb, 689 + 0xfc, 689 + 0xfd,689 + 0xfe, 689 + 0xff,            5555) - 5555;}",RESOLVED          FIXED      
13674,David Edelsohn,"[4.0 Regression] ICE in reload_cse_simplify_operands, at postreload.c:378 on PPC64","With this compiler:[dhcp10:~/programs/gambc40b4] lucier% gcc -vReading specs from /pkgs/gcc-3.4/lib/gcc/powerpc-apple-darwin7.2.0/3.4.0/specsConfigured with: ../configure --prefix=/pkgs/gcc-3.4Thread model: posixgcc version 3.4.0 20040113 (experimental)and the following input, you get the following ICE:[dhcp10:~/programs/gambc40b4] lucier% gcc -I../include -I. -no-cpp-precomp -Wall-W -Wno-unused -O1 -fno-math-errno -fschedule-insns2 -fno-trapping-math-fno-strict-aliasing -fomit-frame-pointer -fPIC -fno-common -mcpu=G5 -save-temps-DHAVE_CONFIG_H -D___PRIMAL -D___LIBRARY -D___GAMBCDIR=\""/usr/local/\"" testppc.igcc: unrecognized option `-no-cpp-precomp'testppc.i: In function `___H__23__23_integer_3f_':testppc.i:69: error: insn does not satisfy its constraints:(insn 360 307 97 8 (set (reg:DF 0 r0)        (mem:DF (plus:SI (reg/v:SI 30 r30 [orig:125 ___r1 ] [125])                (const_int 3 [0x3])) [0 S8 A64])) 318 {*movdf_hardfloat64} (nil)    (nil))testppc.i:69: internal compiler error: in reload_cse_simplify_operands, atpostreload.c:378/* test file */static int      ___lp;typedef struct ___processor_state_struct {	int             r[5];	int             pc;	int             temp1;	int             na;	int             handler_wrong_nargs;}               ___processor_state_struct, *___processor_state;typedef int     (*___host) (___processor_state);typedef struct ___label_struct {	void           *host_label;	___host         host;}               ___label_struct;extern int      ___isfinite                (double x);extern double   floor(double);static int ___H__23__23_integer_3f_(___processor_state ___ps){	register int    ___pc, ___start, ___temp;	register unsigned long long ___temp64;	register int    ___r0;	register int    ___r1;	double          ___F64V1;	double          ___F64V2;	static void    *___hlbl_tbl[] = {		0,		&&___L0__23__23_integer_3f_,	0};	if (___ps == 0)		return (int) ___hlbl_tbl;	___r0 = ___ps->r[0];	___r1 = ___ps->r[1];	___start = ___lp + ((137) * 4 * 4);	___pc = ___ps->pc;	goto *((___label_struct *) (___pc - 1))->host_label;___L0__23__23_integer_3f_:	if (___ps->na == 1) {	} else {		___ps->temp1 = ___start + ((137 - 137 + 0) * 4 * 4); {{				___pc = ___ps->handler_wrong_nargs;				goto ___jumpext;		}		}	}___L__23__23_integer_3f_:	if (((___r1 & ((1 << 2) - 1)) == (0))) {		goto ___L3__23__23_integer_3f_;	}	if (!(((___temp = (___r1)) & ((1 << 2) - 1)) == 1 && ((((*((int *) ((___temp) -(1))))) & (((1 << 5) - 1) << 3)) == (((30)) << 3)))) {		goto ___L1__23__23_integer_3f_;	}	___F64V1 = (*((double *) ((((void *) ((___r1) - (1))) + 4))));	if (!___isfinite(___F64V1)) {		goto ___L2__23__23_integer_3f_;	}	___F64V1 = (*((double *) ((((void *) ((___r1) - (1))) + 4))));	___F64V2 = floor(___F64V1);	___r1 = (((___F64V1 == ___F64V2)) ? ((((int) (-2)) << 2) + 2) : ((((int) (-1))<< 2) + 2));	{{			void           *___host_label;			___pc = ___r0;			___host_label = ((___label_struct *) (___pc - 1))->host_label;			if (((___label_struct *) (___pc - 1))->host == ___H__23__23_integer_3f_)				goto *___host_label;			goto ___jumpext;	}	}___L1__23__23_integer_3f_:	if (!((___r1 & ((1 << 2) - 1)) == (1))) {		goto ___L2__23__23_integer_3f_;	}	___r1 = ((((*((int *) ((___r1) - (1)))) & (((1 << 5) - 1) << 3)) >> (3 - 2)));	if ((___r1 == (((int) (31L)) << 2))) {		goto ___L3__23__23_integer_3f_;	}	if ((___r1 == (((int) (2L)) << 2))) {		goto ___L2__23__23_integer_3f_;	}	if (!(___r1 == (((int) (3L)) << 2))) {		goto ___L2__23__23_integer_3f_;	}___L2__23__23_integer_3f_:	___r1 = (((((int) (-1)) << 2) + 2));	{{			void           *___host_label;			___pc = ___r0;			___host_label = ((___label_struct *) (___pc - 1))->host_label;			if (((___label_struct *) (___pc - 1))->host == ___H__23__23_integer_3f_)				goto *___host_label;			goto ___jumpext;	}	}___L3__23__23_integer_3f_:	___r1 = (((((int) (-2)) << 2) + 2));	{{			void           *___host_label;			___pc = ___r0;			___host_label = ((___label_struct *) (___pc - 1))->host_label;			if (((___label_struct *) (___pc - 1))->host == ___H__23__23_integer_3f_)				goto *___host_label;			goto ___jumpext;	}	}___jumpext:	___ps->pc = ___pc;	___ps->r[1] = ___r1;	return ___pc;}",RESOLVED          FIXED      
17956,David Edelsohn,"[4.0 Regression] ICE in rs6000_emit_minmax, config/rs6000/rs6000.c:11725","This causes an Ada bootstrap, ../../xgcc -B../../ -c -g -O2 -W -Wall -gnatpg s-fore.adb -o s-fore.oThe trees look like:  natural___XDLU_0__2147483647 r;  long_long_float t;<bb 0>:  t = MAX_EXPR <ABS_EXPR <lo>, ABS_EXPR <hi>>;  if (t >= 1.0e+1 == 0) goto <L11>; else goto <L12>;<L11>:;  r = 2;  goto <bb 2> (<L2>);<L12>:;  r = 2;<L1>:;  t = t / 1.0e+1;  r = r + 1;  if (t >= 1.0e+1 == 0) goto <L2>; else goto <L1>;<L2>:;  return r;}I cannot reproduce this with the C compiler as MAX_EXPR is not generated without -ffast-math.The closest C code I could get is:#include <math.h>long double fabsl(long double);long double Fore (long double lo, long double hi){  long double r;  long double t;  long double t1;  long double t2;  int tt;  //t = MAX_EXPR <ABS_EXPR <lo>,   <hi>>;  t1 = fabsl(lo);  t2 = fabsl(hi);  t = t1 >= t2 ? t1 : t2;  tt = (t >= 1.0e+1L);  if (tt == 0) goto L12;L11:;  r = 2;  goto L2;L12:;  r = 2;L1:;  t = t / 1.0e+1L;  r = r + 1;  tt = (t >= 1.0e+1L);  if (tt == 0) goto L1;L2:;  return r;}",RESOLVED          FIXED      
9656,David Edelsohn,[aix64] 3.3 bootstrap failure,"""gmake bootstrap"" ran for 12 hours and ended withchecking whether the C compiler (/software/gcc-3.2.2-obj/gcc/xgcc -B/software/gcc-3.2.2-obj/gcc/ -B/usr/local/powerpc-ibm-aix5.1.0.0/bin/ -B/usr/local/powerpc-ibm-aix5.1.0.0/lib/ -isystem /usr/local/powerpc-ibm-aix5.1.0.0/include  -maix64 -O2 -g -O2 ) works... noconfigure: error: installation or configuration problem: C compiler cannot create executables.gmake[1]: *** [configure-target-libiberty] Error 1gmake[1]: Leaving directory `/software/gcc-3.2.2-obj'gmake: *** [bootstrap] Error 2Further attempts to ""gmake boostrap"" end withgmake[4]: Entering directory `/software/gcc-3.2.2-obj/powerpc-ibm-aix5.1.0.0/ppc64/libiberty'gmake[4]: *** No rule to make target `all'.  Stop.gmake[4]: Leaving directory `/software/gcc-3.2.2-obj/powerpc-ibm-aix5.1.0.0/ppc64/libiberty'gmake[3]: *** [multi-do] Error 1gmake[3]: Leaving directory `/software/gcc-3.2.2-obj/powerpc-ibm-aix5.1.0.0/libiberty'gmake[2]: *** [all] Error 2gmake[2]: Leaving directory `/software/gcc-3.2.2-obj/powerpc-ibm-aix5.1.0.0/libiberty'gmake[1]: *** [all-target-libiberty] Error 2gmake[1]: Leaving directory `/software/gcc-3.2.2-obj'Release:gcc-3.2.2Environment:AIX 5.1-10Intellistation 64bit",RESOLVED          FIXED      
355,David Edelsohn,Compiler takes up an extra 4 bytes when using double in an union in a structure,"The problem is that when you compile a program where it has a union inside a structure which contains a double the structure take up an extra 4 bytes. The is a problem because this structure is being returned to my program from a library not compiled with gcc, and doesn't have this extra 4 bytes before the union. The attached program is what I used to determine what was causing the displacement. I was compileing with cc and the with gcc to see the difference.Release:gcc 2.95.2 from the precompiled versions.Environment:AIX 4.3.3How-To-Repeat:just do a gcc a.c and run.",RESOLVED          FIXED      
440,David Edelsohn,Can't compile on powerpc-ibm-aix4.3.0.0,"I tried to build gcc 2.95.2 on AIX 4.3.0, and all three stages and thecomparison between stage two and three went well. But when the buildprocess came to libstdc++, it failed:/home/f993590/pub/gnu/gcc-obj/gcc/xgcc -B/home/f993590/pub/gnu/gcc-obj/gcc/ -B/usr/local/powerpc-ibm-aix4.3.0.0/bin/ -g -O2 -fno-implicit-templates  -maix64 -Wl,-unix -shared -o libstdc++.so.2.10.0 `cat piclist` -lmld: 0711-301 WARNING: Symbol specified with the -u flag not defined: nixld: 0711-317 ERROR: Undefined symbol: .coshld: 0711-317 ERROR: Undefined symbol: .cosld: 0711-317 ERROR: Undefined symbol: .sinhld: 0711-317 ERROR: Undefined symbol: .sinld: 0711-317 ERROR: Undefined symbol: .expld: 0711-317 ERROR: Undefined symbol: .hypotld: 0711-317 ERROR: Undefined symbol: .logld: 0711-317 ERROR: Undefined symbol: .atan2ld: 0711-317 ERROR: Undefined symbol: .sqrtld: 0711-345 Use the -bloadmap or -bnoquiet option to obtain more information.collect2: ld returned 8 exit statusmake[4]: *** [libstdc++.so.2.10.0] Error 1make[4]: Leaving directory `/homep9/f993590/pub/gnu/gcc-obj/powerpc-ibm-aix4.3.0.0/aix64/libstdc++'make[3]: *** [multi-do] Error 1make[3]: Leaving directory `/homep9/f993590/pub/gnu/gcc-obj/powerpc-ibm-aix4.3.0.0/libstdc++'make[2]: *** [multi-all] Error 2make[2]: Leaving directory `/homep9/f993590/pub/gnu/gcc-obj/powerpc-ibm-aix4.3.0.0/libstdc++'make[1]: *** [all-target-libstdc++] Error 2make[1]: Leaving directory `/homep9/f993590/pub/gnu/gcc-obj'make: *** [bootstrap3-lean] Error 2The contents of config.status are:#!/bin/sh# This file was generated automatically by configure.  Do not edit.# This directory was configured as follows:../gcc-2.95.2/configure --with-gcc-version-trigger=/home/f993590/pub/gnu/gcc-2.95.2/gcc/version.c --host=powerpc-ibm-aix4.3.0.0 --enable-shared --enable-threads --norecursion # using ""mh-frag"" and ""mt-frag""    Was it a bad idea of me to say --enable-shared to configure or what isgoing wrong here?Thanks,    - Stephan Niemz.Release:gcc-2.95.2Environment:gcc-2.95.2powerpc-ibm-aix4.3.0.0",RESOLVED          FIXED      
480,David Edelsohn,"[AIX 4.1] non-standard suffix for object files may cause ""illegal instruction"" in code with g++ 2.95","Not using .o as suffix for an object file leads to SIGILLin rather special conditions involving virtual functions (cf. code): The error occurs only for a derived class andonly with an external object.In most other situations (and on other systems like Linuxor HP-UX), non-.o is no problem.Release:gcc version 2.95.2 19991024 (release)Environment:rs6000, aix 4.1How-To-Repeat:""g++ ext.ii -c -o ext.obj; g++ main.ii ext.obj; a.out"" crashes""g++ ext.ii -c; g++ main.ii ext.o; a.out"" works fine",RESOLVED          FIXED      
493,David Edelsohn,"gcc creates incorrect code generated with x ? L""X"":L""Y""",When compiling the attached c code it incorrectly outputs:XXinstead of:YXIt seems that the compiler is assuming that the value==1 is always true.Note that this doesn't happen on gcc 2.8.1 ix86 on solaris 2.7Release:gcc 2.95.2 powerpc and gcc 2.8.1 sparcEnvironment:aix 4.3.3.0 (powerpc-ibm-aix4.3.3.0)Solaris 2.6How-To-Repeat:compile code:$gcc gccifbug.c$./a.outXX,RESOLVED          FIXED      
559,David Edelsohn,Alignment problem - difference to gcc 2.7.2,"If you have a struct likestruct{ int a; int b; union {   double c; } ...then element c has an offset of 8 byte. With version 2.7.2 on AIX 4.2.1 it was only 4 bytes. If you omit the union putting the double directly in the structure, there is an offset of 4, too.We have a 3rd party library. And now the structure layout in the library is different from the layout in our module we link to this library. -fpack_struct does not help. What to do?Release:2.95.2Environment:AIX 4.3.3How-To-Repeat:#include <stdio.h>typedef struct{ char a; char b; union {  double d; } u;} struktur;  int main (void){ struktur teststruct; printf (""offset b: %d, offset d: %d\n"",   (int) &teststruct.b - (int) &teststruct,   (int) &teststruct.u.d - (int) &teststruct); return (0);}",RESOLVED          FIXED      
738,David Edelsohn,The displacement must be greater than or equal to -32768 and less than or equal to 32767,"When compiling a large C file on AIX 4.3 (RS/6000 7043 43P), the gcc compiler (2.95.2) displays error message -- ""The displacement must be greater than or equal to -32768 and less than or equal to 32767.""Thanks for your help!Release:unknownEnvironment:AIX 4.3How-To-Repeat:gcc -save-temps -DYY_USE_PROTOS -mcpu=common -mminimal-toc -I. -I./src/includes -I./src/machine/power/aix-3.2.5 -I./src/progs/util -c ./src/machine/power/aix-3.2.5/out.c -o src/../obj/machine/power/aix-3.2.5/out.o",RESOLVED          FIXED      
812,David Edelsohn,C++ doesnt work with threads on AIX,C++ doesnt work with threads on AIX4.3Release:gcc version 2.95.2 1999102Environment:Reading specs from /usr/local/lib/gcc-lib/powerpc-ibm-aix4.3.1.0/2.95.2/specs,RESOLVED          FIXED      
1032,David Edelsohn,Building gcc-2.95.2 on AIX 4.1.5.0 proceeds without finding cpp,"During the configuration stage of building gcc-2.95.2, theconfig script barfed on locating the c preprocessor and leftit set to the default of '/lib/cpp'. The results were thatmany, if not most, of the configuration thought there wereno include files, nor many system calls. This made itselfevident when running 'make bootstrap' as conflicts betweenmacros showed up, etc.Once i finally diagnosed the problem as above, i make asymlink from '/lib/cpp' to the real cpp that was:	/usr/vac/exe/xlCcppHope this helps the next builder on 4.1.5.0.Release:gcc version 2.95.2 19991024 (release)Environment:powerpc-ibm-aix4.1.5.0How-To-Repeat:Try a fresh clean config and build.",RESOLVED          FIXED      
1518,David Edelsohn,Installing GCC on AIX has errors,"cc -c  -DIN_GCC    -g     -I. -I.. -I. -I./.. -I./../config -I./../../include tree.c""tree.c"", line 2155.18: 1506-334 (S) Identifier code has already been defined on line 2152 of ""tree.c"".""tree.c"", line 2193.18: 1506-334 (S) Identifier code has already been defined on line 2190 of ""tree.c"".""tree.c"", line 2194.8: 1506-334 (S) Identifier tt has already been defined on line 2190 of ""tree.c"".make: 1254-004 The error code from the last command is 1.See the make.txt file attached for more details.I looked into the error for tree.c errors and found that if I commented around the following sections of code of /home/4000rf/gcc-2.95.2/gcc/cp/tree.c, the make would continue:tree build_min_nt VPROTO((enum tree_code code, ...)){/*#ifndef __STDC__  enum tree_code code;#endif*/ANDtree build_min VPROTO((enum tree_code code, tree tt, ...)){/*#ifndef __STDC__  enum tree_code code;  tree tt;#endif*/It seems that the ifndef section was redefining the parameters of the function.  Anyway, the make continued after this change for a long time until it reached following error:        /home/4000rf/gcc-2.95.2/gcc/xgcc -B/home/4000rf/gcc-2.95.2/gcc/ -B/usr/local/exceed_build_tools/powerpc-ibm-aix4.3.2.0/bin/ -c -g -O2 -fno-implicit-templates -I. -I. -nostdinc++  iomanip.ccIn file included from iomanip.cc:29:iomanip.h: In method `sapp<TP>::sapp(ios & (*)(ios &, TP))':iomanip.h:47: Internal compiler error.iomanip.h:47: Please submit a full bug report.iomanip.h:47: See <URL:http://www.gnu.org/software/gcc/faq.html#bugreport> for instructions.make: 1254-004 The error code from the last command is 1.Stop.make: 1254-004 The error code from the last command is 2.See make-part2.doc for a little more information on this error.I dont know if the fix for ifndef caused this error or if I am looking at two errors here.  Either way, I am not able get the GNU gcc source code compiled in order to get my c++ code.Any help that you could give me to get me past this step would be greatly appreciated.Paul WielardEXE TechnologiesPaul_Wielard@exe.com(214)775-5988Release:unknownEnvironment:AIXHow-To-Repeat:I was able to reproduce this issue by removing the directory that tar created and then un-tar'd the application again.  I did the configure and make steps again.",RESOLVED          FIXED      
1626,David Edelsohn,Failure during 'make install' (AIX 4.3.3),"Failure messages during 'make install'Using GCC 2.95.2Make GNU 3.79.1IBM AIX 4.3.3Since I did the 'make bootstrap', I seemed to be committed to getting this to work.  It appears that the GNU 'make bootstrap' updates code in all of the various c files throughout the server.Going back to my IBM C compiler v 3.6.6.6 seems to be impossible.Help!!!?Release:GCC  2.95.2 AIX v4.3.3Environment:IBM RS6000 PowerServer 550AIX v4.3.3How-To-Repeat:Start with clean hard drives, install AIX v4.3.3.  It does not come with a compiler.  Download IBM C compiler v3.6.6.6 and go through the try and buy licensing and build process.  Install the GNU Make v. 3.79.1 and install per instructions.  Download GNU C version 2.95.2.  Follow the GNU installation instructions.  Do not provide any paramters.",RESOLVED          FIXED      
1801,David Edelsohn,"gcc on AIX 4.3.3 doesn`t support ""long double"" type","printf ("" sizeof(long double)=%d"",sizeof(long double));  and   printf ("" sizeof( double)=%d"",sizeof( double));  gives same size = 8Release:gcc 2.95.2 19991024Environment:AIX 4.3.3 hardware model RS 6000 E-30How-To-Repeat:just compile these 2 lines",RESOLVED          FIXED      
1918,David Edelsohn,A called function incorrectly accesses args in a list of 16 arguments,"The problem occurs with gcc-2.95.2, but not with gcc-2.8.1.In the attached test.540.i file:'main' calls 'foo' with 16 args, all are int's except twowhich are double float's.  The double float args are in argposition 10 and 12.'foo' accesses arg 11, arg 13 and up at incorrect offsetsThe correct output should be:01:102:203:304:405:506:607:708:809:910:10.10000011:1112:12.12000013:1314:1415:1516:16Instead, the actual output is:01:102:203:304:405:506:607:708:809:910:10.10000011:1312:12.12000013:1514:1615:016:268810208Release:GNU C version 2.95.2 19991024Environment:Compiled with no optimization.Target code: PowerPC 603eCompiled on Solaris 5.5.1The compiler was configured for target powerpc-eabi fromgcc-2.95.2How-To-Repeat:Compile with the following switches:cc1 <given i> -quiet -dumpbase test.c -fsigned-char -ansi -msdata=none -Wimport -W -Wimplicit -Wreturn-type -Wunused -Wswitch -Wcomment -Wtrigraphs -Wformat -Wchar-subscripts -Wparentheses -Wno-long-long -Wstrict-prototypes -Wmissing-prototypes -O0 -version -finhibit-size-directive -o test.sppc",RESOLVED          FIXED      
2016,David Edelsohn,o _AND_ -funroll_all_loops causes segfaults on PPC,"This is as found in OMS http://www.linuxvideo.org/The file in question is http://fit.edu/~ewindisc/decode.cThe default arguments that would possibly cause error are:""-O6 -fomit-frame-pointer -funroll-all-loops""Works with:   -O -fomit-frame-pointer     OR   -fomit-frame-pointer -funroll-all-loopsWith -O AND -funroll-all-loops of any level on the ppc arch, oms seems to crash at ""semi-random"" places.. it crashes atthe same place within each datafile. With -O, the crash occurs ""apparently"" is caused by assigning a variable the value of 0. Commenting out the line and using optimizations removes the crash, but sound still does not work.  Removing either -O or -funroll_all_loops (and uncommenting the forementioned line) fixed everything, but atlas giving 5-6fps.. not ideal for watching dvds :)With -O6 and -funroll_all_loops we should expect (and does achieve before it crashes), about 27fps.for reference the original code used a goto statement, during debugging I removed this (afraid of possible goto/funroll_all_loops error).. and gained considerablespeed, now we know why goto is evil :)--Eric WindischRelease:gcc 2.95.2Environment:Debian Gnu/Linux PowerPC and LinuxPPCHow-To-Repeat:Compile current oms cvs with gcc on powerpc :)",RESOLVED          FIXED      
2076,David Edelsohn,scheduler ignores data dependency,"c-torture/execute/980205.c demonstrates a bug where thefirst scheduler pass moves a load of a parameter from thestack argument area before the parameter has been spilledto the argument area.  Compiler pass 980205.c.16.regmoveshows the arguments spilled to the argument area beforeFP pseudo is loaded.  After the scheduling pass, the loadfrom the pseudo has been moved to the beginning of thebasic block before the argument area on the stack is valid.Release:gcc-3.0 20010413 (prerelease)Environment:rs6000-ibm-aix4.3.3.0How-To-Repeat:# 1 ""980205.c""# 1 ""include/stdarg.h"" 1 3# 43 ""include/stdarg.h"" 3typedef __builtin_va_list __gnuc_va_list;# 110 ""include/stdarg.h"" 3typedef __gnuc_va_list va_list;# 2 ""980205.c"" 2void fdouble (double one, ...){  double value;  va_list ap;  __builtin_stdarg_start((ap),one);  value = __builtin_va_arg (ap, double);  __builtin_va_end (ap);  if (one != 1.0 || value != 2.0)    abort ();}int main (){  fdouble (1.0, 2.0);  exit (0);}-----gcc -O2 980205.i(Fails with -O2, -O3, and -Os; succeeds with -O0 and -O1)",RESOLVED          FIXED      
2203,David Edelsohn,dlopen() crashes on AIX when compiling with g++,"I can't use dlopen() in a program I compile with g++ 2.95.2.It appears to crash in some initialisation done by dlopen(),but I don't quite understand why.  Nor what to do about it.Any help/pointers/ideas would be appreciated.Since I don't quite understand why this goes wrong, I can'tbe sure it is an error in the compiler.  But it does workwith IBM's xlC, so it is at least compiler RELATED.I've tried gcc configured without ""--enable-shared"" too,with any apparent difference.Release:gcc version 2.95.2 19991024 (release)Environment:AIX 4.3.2IBM RS/6000 43P/140 (333 MHz MPC604e CPU) gcc configured with --enable-shared --prefix=/opt/gnuHow-To-Repeat:I compile the attached program with  g++ -g -o sample-main -Wl,-brtl sample-main.ccThen I create a file ""shared.cc"" with the single line  int i;and compile it with  g++ -g -o shared.so -shared shared.ccThis generates four warnings (which I don't understandeither)  ld: 0711-224 WARNING: Duplicate symbol: ._GLOBAL__DI  ld: 0711-224 WARNING: Duplicate symbol: ._GLOBAL__DD  ld: 0711-224 WARNING: Duplicate symbol: _GLOBAL__DI  ld: 0711-224 WARNING: Duplicate symbol: _GLOBAL__DD  ld: 0711-345 Use the -bloadmap or -bnoquiet option to obtain more information.Now, running sample-main stops in a segmentation violation.A stack trace looks like this:(gdb) bt#0  0xd0442bac in ostream_withassign::operator= ()#1  0xd0453ae4 in Iostream_init::__ct ()#2  0xd0453850 in __sinit64_x_2fu_5fC_2b_2b_2fmcnamara_2fuslppk299_2fstream_2fcstreams_2ec ()#3  0xd045fd28 in initialize_one_library ()#4  0xd045efc0 in initialize_libs ()#5  0xd045f644 in grab_orig_libs ()#6  0xd0460488 in loadAndInit ()#7  0xd0246fb4 in dlopen ()#8  0x10000370 in main (argc=1, argv=0x2ff22498) at sample-main.cc:8#9  0x100001dc in __start ()",RESOLVED          FIXED      
2359,David Edelsohn,Problem building gcc 2.95.3 on AIX 4.3.3.0,"Hello!I have tried to build the gcc on the above mentioned machine.To configure, I used: ./configure --enable-languages=c,c++,f77and then started compiling with  makeThis worked some time, and then the linker ( = AIX native )failed, because the toc > 64K.As a compiler for the gcc I used gcc version 2.95.1 and AIX make...I also tried to use the AIX cc to comile, but this got stuck somewhere in the C-code.Trying to use gmake 3.79.1 made the same problem with the toc-size.Release:2.95.3Environment:IBM RS/6000 using AIX version 4.3.3.0",RESOLVED          FIXED      
2600,David Edelsohn,[rs6000-bull-bosx] gcc fails to increment a signed int variable by one with -O2,A variable plus one operation is not done if the program is compiled with optimisation -O2 in a very simple c program.example of output :$ gcc -O1 bug-gcc.c$ a.outi = 1; plus_one = 2$ gcc -O2 bug-gcc.c$ a.outi = 1; plus_one = 1Release:gcc version 2.95.3Environment:AIX on bull (8 procs)How-To-Repeat:compile with -O1 and -O2,RESOLVED          FIXED      
2611,David Edelsohn,fixincludes removes an */ from Xm/XmStrDefs.h on AIX,"The ""fixed"" versions of the include files has an */ removed in one file which breaks everything that includes this file.--- /usr/include/Motif2.1/Xm/XmStrDefs.h        Fri Sep 19 00:29:51 1997+++ /pkg/gcc/2.95.3/lib/gcc-lib/powerpc-ibm-aix4.3.3.0/2.95.3/include/Xm/XmStrDefs.h    Sun Apr 22 13:43:34 2001@@ -5469,9 +5469,9 @@ /*#ifdef IBM_MOTIF*/ #define XmSTRING_DEFAULT_CHARSET      XmSFONTLIST_DEFAULT_TAG_STRING /*#else #define XmSTRING_DEFAULT_CHARSET       XmS-#endif IBM_MOTIF*/+#endifThe result is a missing */ which is caught later on, but with an #ifdef commented out as a result. This gives an ""unbalanced `#endif'"" error while compiling.Breaks on both gcc 2.95.2 with AIX 4.3.2 and gcc 2.95.3 with AIX 4.3.3.Release:gcc 2.95.3Environment:AIX 4.3.3How-To-Repeat:Install gcc",RESOLVED          FIXED      
2702,David Edelsohn,expr.c:emit_group_load() constant handling broken,"The 2000-08-14 patch by Richard Henderson to not forceconstants into registers went too far: it assumes thatconstants always can be loaded into parameter registersdirectly.  Without an intermediate pseudo, GCC failsbefore reload has a chance to fixup the load because ittries to load the constant directly, then in pieces,then change the address of the constant, then aborts.Release:gcc 3.0 20010430 (prerelease)Environment:AIX 4.3.3.0How-To-Repeat:c-torture/compile/960829-1.c",RESOLVED          FIXED      
2750,David Edelsohn,[PowerPC] Bug: Internal compiler error in `gen_tagged_type_instantiation_die',"I was just compiling my program when the following happened:fields.c:151: Internal compiler error:fields.c:151: Internal compiler error in `gen_tagged_type_instantiation_die', at dwarf2out.c:9315Please submit a full bug report.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.So I decided to submit a bug report. Maybe this is nothing serious, maybe it's been reported a thousand times already. I don't know.But I hope that you can use this for something... I ran ""gcc -v -save-temps (my usual options) fields.c"" and bzip2-compressedthe output, which should come with this bug report. Your page aboutbugreporting said that that should be all the information you need.Best wishes and thanks for a great compiler :)JohanRelease:gcc version 2.95.4 20010319 (Debian prerelease)Environment:Debian GNU/Linux (testing) powerpc with kernel 2.4.4",RESOLVED          FIXED      
3369,David Edelsohn,powerpc-unknown-eabi fails to compile on gcc 3.0 CVS branch,"../gcc/configure --target=powerpc-unknown-eabi --with-gnu-as --with-gnu-ld --with-newlib --verbose --prefix=/usr1/tmp-tools --enable-languages=c,c++ && makefails with this error:/tmp/ccwWZTZk.s: Assembler messages:/tmp/ccwWZTZk.s:234: Error: Relocation cannot be done when using -mrelocatablemake[7]: *** [new_op.lo] Error 1make[7]: Leaving directory `/usr3/ftp_archive/gnu/gcc/ss/b3/b-powerpc-unknown-eabi/powerpc-unknown-eabi/nof/libstdc++-v3/libsupc++'Release:gcc 3.0 CVS branchEnvironment:GNU/Linux RedHat 6.2 targetting powerpc-unknown-eabiHow-To-Repeat:configure and build per description.I used binutils 2.10 and newlib 1.9.0",RESOLVED          FIXED      
3384,David Edelsohn,PowerPC -funroll-loops -fbranch-count-reg misoptimization,"gcc-3.0 miscompiles code with -O2 -funroll-loopsWorkaround: use -fno-branch-count-reg or do not use -funroll-loopsThis is a regression to 2.95.3 but only if you use -funroll-loops.The testcase:------------ BEGIN ---------------typedef unsigned long ulong;voidset_offsets(ulong *t, ulong idx, ulong n, ulong v){    ulong i;    for (i = idx; i < n; i += 2) {	t[i] = v;    }}intmain(void){    ulong a[8];    set_offsets(a, 0, 7, 0xdeafcabe);    return 1;}------------- END ----------------Release:3.0Environment:System: AIX vlad 3 4 0005BA2F4C00	host: powerpc-ibm-aix4.3.3.0build: powerpc-ibm-aix4.3.3.0target: powerpc-ibm-aix4.3.3.0configured with: ../gcc-3.0/configure --enable-languages=c,c++,java --enable-version-specific-runtime-libs --disable-nlsHow-To-Repeat:% gcc -O2 -funroll-loops -o bug bug.c % ./bugzsh: 16798 segmentation fault  ./bug",RESOLVED          FIXED      
3464,David Edelsohn,simple comparision gives wrong result on -maix64 with any optimization,"(long long ANY < long long X=almost min_int) and   (long long ANY > long long ANY) where ANY seems to be almost any signed 64bits integer, and X is some crucial signed long. Bug occurs when X < (32768 - (1<<30))bug: the expression evaluates to 0 where it should to 1 when compiling with any optimiziation.without optimization, it works.I do not understand the generated assembly. it does strange things with 32768 and ORI, where I would expect simple comparions and AND.Release:gcc 2.95.2Environment:AIX 4.3.3 on powerpc64How-To-Repeat:main(int argc, char** argv) {	int i = atoi(argv[1]);	long long l = (long long) i;	printf(""%d\n"", (l > -2147450880) && (l < 42));	printf(""%d\n"", (l > -2147450881) && (l < 42));}/*Reading specs from /usr/local/lib/gcc-lib/powerpc-ibm-aix4.3.2.0/2.95.2/specsgcc version 2.95.2 19991024 (release) /usr/local/lib/gcc-lib/powerpc-ibm-aix4.3.2.0/2.95.2/cpp -lang-c -v -D__GNUC__=2 -D__GNUC_MINOR__=95 -D_IBMR2 -D_POWER -D_AIX -D_AIX32 -D_AIX41 -D_AIX43 -D_LONG_LONG -D_IBMR2 -D_POWER -D_AIX -D_AIX32 -D_AIX41 -D_AIX43 -D_LONG_LONG -Asystem(unix) -Asystem(aix) -D__CHAR_UNSIGNED__ -D__OPTIMIZE__ -D__64BIT__ -D_ARCH_PPC b.c b.iGNU CPP version 2.95.2 19991024 (release)#include ""..."" search starts here:#include <...> search starts here: /usr/local/include /usr/local/lib/gcc-lib/powerpc-ibm-aix4.3.2.0/2.95.2/../../../../powerpc-ibm-aix4.3.2.0/include /usr/local/lib/gcc-lib/powerpc-ibm-aix4.3.2.0/2.95.2/include /usr/includeEnd of search list.The following default directories have been omitted from the search path: /usr/local/lib/gcc-lib/powerpc-ibm-aix4.3.2.0/2.95.2/../../../../include/g++-3End of omitted list. /usr/local/lib/gcc-lib/powerpc-ibm-aix4.3.2.0/2.95.2/cc1 b.i -quiet -dumpbase b.c -maix64 -O -version -fcse -o b.scc1: Invalid option `-fcse'GNU C version 2.95.2 19991024 (release) (powerpc-ibm-aix4.3.2.0) compiled by GNU C version 2.95.2 19991024 (release).*//*	.file	""b.c""	.machine	""ppc64"".toc.csect .text[PR],3gcc2_compiled.:__gnu_compiled_c:.csect _b.rw_c[RO],3	.align 3LC..0:	.byte ""%d""	.byte 10, 0.tocLC..1:	.tc LC..0[TC],LC..0.csect .text[PR],3	.align 2	.globl main	.globl .main.csect main[DS],3main:	.llong .main, TOC[tc0], 0.csect .text[PR].main:	mflr 0	std 29,-24(1)	std 30,-16(1)	std 31,-8(1)	std 0,16(1)	stdu 1,-144(1)	mr 29,4	bl .__main	cror 31,31,31	ld 3,8(29)	bl .atoi	cror 31,31,31	mr 29,3	addis 9,29,0x7fff	addi 9,9,32767	lis 0,0x7fff	ori 0,0,32808	cmpld 7,9,0	cror 31,30,28	mfcr 4	rlwinm 4,4,0,1	ld 3,LC..1(2)	extsw 4,4	bl .printf	cror 31,31,31	addis 29,29,0x8000	addi 29,29,-32768	lis 0,0x7fff	ori 0,0,32809	cmpld 7,29,0	cror 31,30,28	mfcr 4	rlwinm 4,4,0,1	ld 3,LC..1(2)	extsw 4,4	bl .printf	cror 31,31,31	la 1,144(1)	ld 0,16(1)	mtlr 0	ld 29,-24(1)	ld 30,-16(1)	ld 31,-8(1)	blrLT..main:	.long 0	.byte 0,0,32,65,128,3,2,0	.long 0	.long LT..main-.main	.short 4	.byte ""main""_section_.text:.csect .data[RW],3	.long _section_.text*/",RESOLVED          FIXED      
3557,David Edelsohn,constructing stream from rdbuf does not work on AIX,"A stream created from cout.rdbuf() gets SEGV when printingnumbers on PPC AIX-4.3.This does not happen on x86 Linux.Release:gcc-3.0Environment:powerpc-ibm-aix4.3.3.0binutils-2.11How-To-Repeat:$ g++ rdbuf.cc$ ./a.outcout printing works, and can print numbers like 10out printing fails, it crashes printing numbers like Abort (core dumped)",RESOLVED          FIXED      
3570,David Edelsohn,"Undefined symbol: ""std::string::_Rep::_S_max_size"" on AIX with g++ 3.0","When compiling the following very simple c++ program on AIX with g++ 3.0,I receive the messages  ld: 0711-317 ERROR: Undefined symbol: std::string::_Rep::_S_max_size  ld: 0711-345 Use the -bloadmap or -bnoquiet option to obtain more information.  collect2: ld returned 8 exit statusand no executable will be created.The compiler is invoked by the command:  g++ -o hello hello.CThe contents of the source file `hello.C' is the following:  #include <iostream>  int main( void )  {    std::cout << ""hello, world"" << std::endl;  }When I look at the preprocessed code, generated by the command:  g++ -E -o hello.i hello.Cthen there exists an template that defines this symbol:  ...  template<typename _CharT, typename _Traits, typename _Alloc>    const typename basic_string<_CharT, _Traits, _Alloc>::size_type    basic_string<_CharT, _Traits, _Alloc>::    _Rep::_S_max_size = (((npos - sizeof(_Rep))/sizeof(_CharT)) - 1) / 4;  ...I don't have any idea why the symbol is not instantiated from thattemplate.Any help would be greatly appreciated.Release:gcc version 3.0Environment:powerpc-ibm-aix4.3.3.0",RESOLVED          FIXED      
3660,David Edelsohn,"powerpc, variadic function, option -mstring --> ICE","---- Source file foo.c: ---------------------------------------------void foo(int x, ...){}---- Command line: --------------------------------------------------/home/wtq/gcc-inst/bin/gcc -v -mstring -c foo.c---- Standard error: ---------------------------",RESOLVED          FIXED      
3856,David Edelsohn,GNU/Linux i586 cross compiler powerpc,"failed to build a GNU/Linux cross compiler for powerpc using BINUTIL-2.11, GNU CC 3.0 and NEWLIB-1.9.0.Compilation stopped at cross compilation of libstdc++v3 new_op.cc with assembly error Error: Relocation cannot be done when using -mrelocatableshort assembly output within the source code and a markwhere assembly complain (LGLA).Release:unknownEnvironment:GNU/Linux of Debian 2.2r and Redhat 7.1Building a cross compiler for powerpc using GNU CC 3.0How-To-Repeat:build instruction within the source code abovepowerpc-eabi-gcc -v -save-temps -mrelocatable -o no.o -c no.ccorpowerpc-eabi-g++ -v -save-temps -mrelocatable-lib -o no.o -c no.cc",RESOLVED          FIXED      
3866,David Edelsohn,"g++ : multiple ""template with C linkage"" in any stl","the programme#include<iostream>produces a long string of ""Template with C linkage"" errorsbeginning withIn file included from /rccp/AIX/include/g++-v3/bits/std_iosfwd.h:40,                 from /rccp/AIX/include/g++-v3/bits/std_ios.h:39,                 from /rccp/AIX/include/g++-v3/bits/std_ostream.h:39,                 from /rccp/AIX/include/g++-v3/bits/std_iostream.h:40,                 from /rccp/AIX/include/g++-v3/iostream:31,                 from test.C:1:/rccp/AIX/include/g++-v3/bits/stringfwd.h:44: template with C linkage/rccp/AIX/include/g++-v3/bits/stringfwd.h:52: template with C linkage/rccp/AIX/include/g++-v3/bits/stringfwd.h:56: template with C linkagedoes not produce .o file.Release:gcc-3.0Environment:powerpc-ibm-aix4.3.2.0Configured with: ../gcc-3.0/configure --prefix=/rccp/AIXHow-To-Repeat:cat> test.C#include<iostream>ctrl-Dg++ -c test.C",RESOLVED          FIXED      
4085,David Edelsohn,PPC -fPIC code generation problem,"The following (admittedly bogus) code does not link on ppc Linux.$ gcc -O2 -fPIC -o ppcbug ppcbug.c/tmp/ccCbVD67.o(.rodata+0x10): undefined reference to `.L23'/tmp/ccCbVD67.o(.rodata+0x14): undefined reference to `.L23'/tmp/ccCbVD67.o(.rodata+0x18): undefined reference to `.L23'/tmp/ccCbVD67.o(.rodata+0x1c): undefined reference to `.L23'/tmp/ccCbVD67.o(.rodata+0x20): undefined reference to `.L22'collect2: ld returned 1 exit statusIt looks like gcc is creating a jump table for the switch.  It'srealizing that it can optimize away all cases except for default, butreferences to the deleted code are left arount in the jump table.#include <stdio.h>int main (int argc, char *argv[]){  char *foo;   switch (argc)     {    case 1:      foo = ""one"";    case 2:      foo = ""two"";    case 3:      foo = ""three"";    case 4:      foo = ""four"";    case 5:      foo = ""five"";    default:      foo = ""default"";    }  puts (foo);  return 0;}Release:3.1 20010811 (experimental)Environment:System: Linux peach.cygnus.co.uk 2.2.17pre20-ben3 #2 Wed Sep 6 01:14:01 CEST 2000 ppc unknownArchitecture: ppc	host: powerpc-unknown-linux-gnubuild: powerpc-unknown-linux-gnutarget: powerpc-unknown-linux-gnuconfigured with: /peach/green/net/trunk/gcc/configure --prefix=/peach/green/net/trunk/i --enable-threads --enable-language=c,c++,java --enable-languages=c,c++,java --disable-multilibs --disable-multilib : (reconfigured)  : (reconfigured)  : (reconfigured)  : (reconfigured)How-To-Repeat:	Try compiling the code above with ""-O2 -fPIC"".",RESOLVED          FIXED      
4235,David Edelsohn,Exception handling on AIX 4.2 does not catch,"It is not possible to catch an exception in the AIX environment.When cxa_throw() is invoked abort() will be called as if there are no catch handlers.If looking closer to the libgcc source you will notice that there are two calls to __register_frame_info_table_bases() in unwind-dw2-fde.c using different instances of the object_mutex declared statically in this file.The first __register_frame_info_table_bases() is called from the file generated by collect2 and contains the correct frame information.  I can't find the origin of the second call to __register_frame_info_table_bases(). Anyway the calls above register the frame information in different instances of unseen_objects.When cxa_throw() is called only the latter frame information in unseen_object is used. The first registration is never used, and therefore no handler is found.===Reading specs from /usr/local/lib/gcc-lib/powerpc-ibm-aix4.2.0.0/3.0.1/specsConfigured with: ../gcc-3.0.1/configure --prefix=/usr/local --with-gnu-as --with-as=/usr/local/bin/as --enable-threads=aix --enable-sharedThread model: aixgcc version 3.0.1 /usr/local/lib/gcc-lib/powerpc-ibm-aix4.2.0.0/3.0.1/cpp0 -lang-c++ -D__GNUG__=3 -D__GXX_DEPRECATED -D__EXCEPTIONS -D__GXX_ABI_VERSION=100 -v -D__GNUC__=3 -D__GNUC_MINOR__=0 -D__GNUC_PATCHLEVEL__=1 -D_IBMR2 -D_POWER -D_AIX -D_AIX32 -D_AIX41 -D_LONG_LONG -D_IBMR2 -D_POWER -D_AIX -D_AIX32 -D_AIX41 -D_LONG_LONG -Asystem=unix -Asystem=aix -D__CHAR_UNSIGNED__ -D__NO_INLINE__ -D__STDC_HOSTED__=1 -D_ARCH_COM simple.cpp simple.iiGNU CPP version 3.0.1 (cpplib)#include ""..."" search starts here:#include <...> search starts here: /usr/local/include/g++-v3 /usr/local/include/g++-v3/powerpc-ibm-aix4.2.0.0 /usr/local/include/g++-v3/backward /usr/local/include /usr/local/lib/gcc-lib/powerpc-ibm-aix4.2.0.0/3.0.1/include /usr/local/powerpc-ibm-aix4.2.0.0/include /usr/includeEnd of search list. /usr/local/lib/gcc-lib/powerpc-ibm-aix4.2.0.0/3.0.1/cc1plus -fpreprocessed simple.ii -quiet -dumpbase simple.cpp -version -o simple.sGNU CPP version 3.0.1 (cpplib)GNU C++ version 3.0.1 (powerpc-ibm-aix4.2.0.0)	compiled by GNU C version 2.95.3 20010315 (release). /usr/local/bin/as --traditional-format -u -mcom -o simple.o simple.s /usr/local/lib/gcc-lib/powerpc-ibm-aix4.2.0.0/3.0.1/collect2 -bpT:0x10000000 -bpD:0x20000000 -btextro -bnodelcsect /lib/crt0.o -L/usr/local/lib/gcc-lib/powerpc-ibm-aix4.2.0.0/3.0.1 -L/usr/local/lib/gcc-lib/powerpc-ibm-aix4.2.0.0/3.0.1/../../.. -lstdc++ simple.o /usr/local/lib/gcc-lib/powerpc-ibm-aix4.2.0.0/3.0.1/libgcc.a -lc /usr/local/lib/gcc-lib/powerpc-ibm-aix4.2.0.0/3.0.1/libgcc.aIt aborts also when --enable-shared is not specified with configure.Release:gcc version 3.0.1Environment:powerpc-ibm-aix4.2.0.0How-To-Repeat:int main(int argc, char **argv){  int x = 0;  try {    throw new int;    x = 1;  } catch (int *) {    x = 2;  }  return x;}",RESOLVED          FIXED      
4393,David Edelsohn,can't build QT using g++ 2.9-aix43-010414,"g++ -c -Wall -W -O2 -mminimal-toc -D_THREAD_SAFE -DQT_THREAD_SUPPORT -DQT_NO_XINERAMA -DQT_NO_XRENDER -DQT_NO_XFTFREETYPE -DQT_NO_XKB -DQT_NO_IMAGEIO_MNG -DQT_NO_IMAGEIO_JPEG -DQT_NO_STYLE_AQUA -DQT_NO_STYLE_MAC -DQT_NO_STYLE_INTERLACE -DQT_NO_STYLE_COMPACT -DQT_NO_DEBUG -DQT_THREAD_SUPPORT -I3rdparty/libpng -I3rdparty/zlib -I/afs/haifa/proj6/namc/personal/shapir/qt/include -I/usr/X11R6/include -I.moc/release-mt/ -I/afs/haifa/proj6/namc/personal/shapir/qt/mkspecs/aix-g++ -o .obj/release-mt/qcursor_x11.o kernel/qcursor_x11.cppkernel/qcursor_x11.cpp: In method `void QCursor::update () const':kernel/qcursor_x11.cpp:489: Internal compiler error in `expand_expr', at expr.c:5990Please submit a full bug report.See <URL:http://www.gnu.org/software/gcc/faq.html#bugreport> for instructions.make: The error code from the last command is 1.Stop.make: The error code from the last command is 2.Stop.make: The error code from the last command is 2.Release:gcc version 2.9-aix43-010414Environment:AIX 4.3.3",RESOLVED          FIXED      
4483,David Edelsohn,"powerpc, -O2, ICE (affects building linux kernel)","input file ice.c:-------------------------------------------------------int ugh(int to, int from, int size){}static inline int grmpf(int to, int from, int n){	if (n <= 0x80000000UL) {		return ugh(to, from, n);	}	return n;}static inline int blchh(int to, int from, int n){	if ( n == 0 || (n <= 0x80000000UL)&&(to <= 0x80000000UL-n)) {		return ugh(to, from, n);	}	return n;}void func(void){	int x = 42;	grmpf(7, 11, x);	blchh(13, 17, x);}-------------------------------------------------------command line:-------------------------------------------------------/home/wtq/gcc-inst/bin/gcc -v -O2 -c ice.c-------------------------------------------------------standard error:-------------------------------------------------------Reading specs from /home/wtq/gcc-inst/lib/gcc-lib/powerpc-unknown-linux-gnu/3.1/specsConfigured with: ../gcc/configure --prefix=/home/wtq/gcc-inst --enable-languages=cThread model: singlegcc version 3.1 20010930 (experimental)GNU CPP version 3.1 20010930 (experimental) (cpplib) (PowerPC GNU/Linux)GNU C version 3.1 20010930 (experimental) (powerpc-unknown-linux-gnu)	compiled by GNU C version 2.95.2 20000220 (Debian GNU/Linux).ignoring nonexistent directory ""/home/wtq/gcc-inst/powerpc-unknown-linux-gnu/include""#include ""..."" search starts here:#include <...> search starts here: /usr/local/include /home/wtq/gcc-inst/include /home/wtq/gcc-inst/lib/gcc-lib/powerpc-unknown-linux-gnu/3.1/include /usr/includeEnd of search list.ice.c: In function `func':ice.c:27: Could not split insn(insn 95 23 94 (set (reg:SI 9 r9 [95])        (const_int -2147483690 [0xffffffff7fffffd6])) 289 {*movsi_internal1} (insn_list:REG_DEP_ANTI 23 (nil))    (expr_list:REG_EQUIV (const_int -2147483690 [0xffffffff7fffffd6])        (nil)))ice.c:27: Internal compiler error in final_scan_insn, at final.c:2912Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.-------------------------------------------------------Release:3.1 20010930 (experimental)Environment:System: Linux tulgey 2.4.9-pre3 #10 Wed Oct 3 16:18:13 UTC 2001 ppc unknownArchitecture: ppchost: powerpc-unknown-linux-gnubuild: powerpc-unknown-linux-gnutarget: powerpc-unknown-linux-gnuconfigured with: ../gcc/configure --prefix=/home/wtq/gcc-inst --enable-languages=c",RESOLVED          FIXED      
4737,David Edelsohn,Exception handling on AIX 4.3.3 does not catch,"Regarding the closed PR #4235 (not working exception handling under AIX):I have experienced exact the same effect in my environment (AIX 4.3.3, GCC 3.0.1).Could you please explain me in more detail how to apply the supposed solution: > Fix: Install shared libraries (both libgcc_s_*.a and libstdc++.a > with chmod a+x,o-r mode so that the shared objects are loaded > into the process private segment. GCC exception handling > places private data in the library preventing it from being > shared.This solution does not solve the problem in my environment as well, so I am wondering why this has been closed.Are there any further steps to be recognized in order to solve the broken exception handling under AIX?Release:gcc 3.0.1Environment:powerpc-ibm-aix4.3.3.0How-To-Repeat:see PR #4235",RESOLVED          FIXED      
4817,David Edelsohn,[aix] Multib lib configuration C++ link failed,"g++ 3.0.2, AIX 4.3.3 configured with --enable-multilib --enable-threads=posix failed to link single threaded programbecause _NOTHREADS is not defined for libstc++. Thus thelinker complains about undefined symbols (pthread_lock, etc..)Release:gcc 3.0.2",RESOLVED          FIXED      
4913,David Edelsohn,"""gcc -gstabs"" behaves differently than ""gcc -g"" for c++","Here is a script that shows the problem.  Basically examining a class which inherits from a parent class looks different depending on how it was compiled.  Since gcc uses stabs by default (on a linux box anyway), then gcc -g should give the same results as gcc -gstabs.  This test case shows that it does not.Script started on Tue Nov 20 11:10:59 2001marcind@stimpy:~$ cat testit.cc#include <stdio.h>class A {public:        int a;        int b;        int c;    virtual void foo(int arg) = 0;private:        int d;        int e;};class B : public A {public:        void foo(int arg);};void B::foo(int arg){        a = arg;        b = arg;        c = arg;}void main( ){        B* pA = new(B);        pA->foo(55);        pA->a = 1;	pA->b = 2;        pA->c = 3;}marcind@stimpy:~$ g++ -g -o testit testit.ccmarcind@stimpy:~$ gdb testitGNU gdb 5.0.90-cvs (MI_OUT)Copyright 2001 Free Software Foundation, Inc.GDB is free software, covered by the GNU General Public License, and you arewelcome to change it and/or distribute copies of it under certain conditions.Type ""show copying"" to see the conditions.There is absolutely no warranty for GDB.  Type ""show warranty"" for details.This GDB was configured as ""i386-linux""...(gdb) b mainBreakpoint 1 at 0x804873c: file testit.cc, line 34.(gdb) rStarting program: /home/marcind/testitBreakpoint 1, main () at testit.cc:3434              B* pA = new(B);(gdb) n36              pA->foo(55);(gdb) print *pA$1 = {<A> = {a = 0, b = 0, c = 0, d = 0, e = 0, _vptr. = 0x804997c}, <No data fields>}(gdb) print pA->a$2 = 0(gdb) info sourceCurrent source file is testit.ccCompilation directory is /home/marcind/Located in /home/marcind/testit.ccContains 42 lines.Source language is c++.Compiled with stabs debugging format.(gdb) The program is running.  Exit anyway? (y or n) ymarcind@stimpy:~$ gcc -gstabs -o testit testit.ccmarcind@stimpy:~$ gdb testitGNU gdb 5.0.90-cvs (MI_OUT)Copyright 2001 Free Software Foundation, Inc.GDB is free software, covered by the GNU General Public License, and you arewelcome to change it and/or distribute copies of it under certain conditions.Type ""show copying"" to see the conditions.There is absolutely no warranty for GDB.  Type ""show warranty"" for details.This GDB was configured as ""i386-linux""...(gdb) b mainBreakpoint 1 at 0x804936c: file testit.cc, line 34.(gdb) rStarting program: /home/marcind/testit Breakpoint 1, main () at testit.cc:3434              B* pA = new(B);(gdb) n36              pA->foo(55);(gdb) print pA$1 = (B *) 0x8050470(gdb) print *pA$2 = {A = {a = 0, b = 0, c = 0, d = 0, e = 0, _vptr.A = 0x804e3c8}}(gdb) print pA->aThere is no member named a.(gdb) print pA->A->a$3 = 0(gdb) info sourceCurrent source file is testit.ccLocated in /home/marcind/testit.ccContains 42 lines.Source language is c++.Compiled with stabs debugging format.(gdb) The program is running.  Exit anyway? (y or n) ymarcind@stimpy:~$ exitScript done on Tue Nov 20 11:13:39 2001Release:gcc-2.95.4Environment:Debian Gnu/Linux testingLinux stimpy 2.2.17 #1 Sun Jun 25 09:24:41 EST 2000 i686 unknownHow-To-Repeat:see above",RESOLVED          FIXED      
5217,David Edelsohn,gcc-3.0.3 ICE on ppc 750 with -ffast-math,"gcc-3.0 -vReading specs from /usr/lib/gcc-lib/powerpc-linux/3.0.3/specsConfigured with: ../src/configure -v --enable-languages=c,c++,java,f77,proto,objc --prefix=/usr --infodir=/share/info --mandir=/share/man --enable-shared --with-gnu-as --with-gnu-ld --with-system-zlib --enable-long-long --enable-nls --without-included-gettext --disable-checking --enable-threads=posix --enable-java-gc=boehm --with-cpp-install-dir=bin --enable-objc-gc powerpc-linuxThread model: posixgcc version 3.0.3	p.c contents:static void couple_point(float A, float B, float *mag){	if (fabs(A) > fabs(B))		*mag = A;	else		*mag = B;}	gcc-3.0 -O1 -ffast-math -mcpu=750 p.cp.c: In function `couple_point':p.c:7: Unrecognizable insn:(insn 42 41 45 (set (reg:SF 90)        (if_then_else:DF (ge (reg:DF 92)                (const_double:DF (cc0) 0 [0x0] 0 [0x0] 0 [0x0] 0 [0x0] 0 [0x0]))            (reg/v:SF 83)            (reg/v:SF 82))) -1 (insn_list 41 (nil))    (expr_list:REG_DEAD (reg:DF 92)        (expr_list:REG_DEAD (reg/v:SF 83)            (expr_list:REG_DEAD (reg/v:SF 82)                (nil)))))p.c:7: Internal compiler error in extract_insn, at recog.c:2218Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.Release:3.0.3Environment:powerpc 750, linux",RESOLVED          FIXED      
5262,David Edelsohn,PPC linux requires --enable-sjlj-exceptions,"exceptions don't work unless you configure with --enable-sjlj-exceptions on some platforms. Shouldn't this be the default on those platforms until they get their act together?Release:3.0.3Environment:ppc-yellowdog-linux, cygwin, probably others",RESOLVED          FIXED      
5276,David Edelsohn,crosscompile ia64 -> ppc64 fails with gcc 3.0.3,"building a cross compiler on ia64 linux for ppc64 linuxthis patch is needed:ftp://ftp.linuxppc64.org/pub/people/amodra/gcc-20011220-ppc64.diff.gz+ ../configure --enable-languages=c --prefix=/opt/cross --target=powerpc64-linux --disable-nlsConfiguring for a ia64-unknown-linux host.*** This configuration is not supported in the following subdirectories:     target-libstdc++-v3 target-libf2c target-libffi target-boehm-gc target-zlib target-libjava zlib fastjar ta    (Any other directories should still work fine.)Created ""Makefile"" in /usr/src/packages/BUILD/gcc-3.0.3/obj-powerpc64-linux using ""mt-frag""Configuring libiberty...creating cache ../config.cachechecking host system type... ia64-unknown-linux-gnuchecking build system type... ia64-unknown-linux-gnuIn file included from ../../gcc/unwind-dw2.c:25:../../gcc/unwind-pe.h: In function `size_of_encoded_value':../../gcc/unwind-pe.h:76: warning: implicit declaration of function `abort'../../gcc/unwind-dw2.c: In function `extract_cie_info':../../gcc/unwind-dw2.c:220: warning: implicit declaration of function `strlen'../../gcc/unwind-dw2.c: In function `execute_stack_op':../../gcc/unwind-dw2.c:303: warning: `result' might be used uninitialized in this function../../gcc/unwind-dw2.c: In function `execute_cfa_program':../../gcc/unwind-dw2.c:778: warning: implicit declaration of function `alloca'../../gcc/unwind-dw2.c: In function `uw_frame_state_for':../../gcc/unwind-dw2.c:889: warning: implicit declaration of function `memset'../../gcc/unwind-dw2.c: In function `uw_install_context_1':../../gcc/unwind-dw2.c:1167: warning: implicit declaration of function `memcpy'In file included from ../../gcc/unwind-dw2.c:1184:../../gcc/unwind.inc: In function `_Unwind_RaiseException':../../gcc/unwind.inc:129: Could not split insn(insn 333 242 267 (set (reg:SI 0 r0 [131])        (const_int 3896573952 [0xe8410000])) 287 {*movsi_internal1} (insn_list:REG_DEP_ANTI 242 (insn_list:REG_DEP_OUTPUT 364 (insn_list:REG_DEP_ANTI 239 (nil))))    (nil))../../gcc/unwind.inc:129: Internal compiler error in final_scan_insn, at final.c:2951Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.reproducable since a few weeks.works ok on ppc, sparc, i386.Release:gcc 3.0.3How-To-Repeat:you need an ia64 box ;)",RESOLVED          FIXED      
5422,David Edelsohn,powerpc -O2 -fssa -fdce misoptimization,"gcc-3.0.3 miscompiles code with -O2 -fssa -fdceThe testcase:------------ BEGIN -------------volatile int check = 0;extern void waitcheck (){  while (!check) {}}-------------- END ----------------Since volatilization specification ofthe ""check"" is carried out, it is a meaningful code.However, if optimization is applied, it will become the function ended immediately.Release:3.0.3Environment:Configured with: ./configure --target=ppc-eabi --enable-languages=c,c++ --disable-multilibHow-To-Repeat:compile with -O2 (or higher) and -fssa and -fdce options.---I am sorry that it is poor at English.",RESOLVED          FIXED      
5649,David Edelsohn,"O2 on PowerPC yields ICE, affects linux/drivers/ieee1394/ohci1394.c","$ cat bug.cint foo(void);void bar(int x) {  if (foo()) {    if (x==0) return;    if (foo()) { if (foo()) x++; if (x>0) foo(); }  }}$ gcc -v -O2 -Wall bug.cReading specs from /room/newnew/gcc-inst/lib/gcc-lib/powerpc-unknown-linux-gnu/3.1/specsConfigured with: ../gcc/configure --prefix=/room/newnew/gcc-inst --enable-languages=cThread model: singlegcc version 3.1 20020209 (experimental) /room/newnew/gcc-inst/lib/gcc-lib/powerpc-unknown-linux-gnu/3.1/cc1 -lang-c -v -D__GNUC__=3 -D__GNUC_MINOR__=1 -D__GNUC_PATCHLEVEL__=0 -DPPC -D__ELF__ -Dpowerpc -D__PPC__ -D__ELF__ -D__powerpc__ -D__PPC -D__powerpc -Acpu=powerpc -Amachine=powerpc -D__OPTIMIZE__ -D__STDC_HOSTED__=1 -D_CALL_SYSV -D_BIG_ENDIAN -D__BIG_ENDIAN__ -Amachine=bigendian -D_ARCH_PPC -D__unix__ -D__linux__ -Dunix -D__unix -Dlinux -D__linux -Asystem=unix -Asystem=posix bug.c -quiet -dumpbase bug.c -O2 -version -o /tmp/ccSidxm6.sGNU CPP version 3.1 20020209 (experimental) (cpplib) (PowerPC GNU/Linux)GNU C version 3.1 20020209 (experimental) (powerpc-unknown-linux-gnu)	compiled by GNU C version 3.1 20020209 (experimental).ignoring nonexistent directory ""/room/newnew/gcc-inst/powerpc-unknown-linux-gnu/include""#include ""..."" search starts here:#include <...> search starts here: /usr/local/include /room/newnew/gcc-inst/include /room/newnew/gcc-inst/lib/gcc-lib/powerpc-unknown-linux-gnu/3.1/include /usr/includeEnd of search list.bug.c: In function `bar':bug.c:7: unrecognizable insn:(insn 82 31 83 (set (reg:SI 0 r0)        (plus:SI (lshiftrt:SI (neg:SI (abs:SI (reg:SI 3 r3 [121])))                (const_int 31 [0x1f]))            (reg/v:SI 31 r31 [115]))) -1 (nil)    (nil))bug.c:7: Internal compiler error in extract_insn, at recog.c:2129Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.Release:3.1 20020209 (experimental)Environment:System: Linux manelan061.rz.tu-ilmenau.de 2.4.18-pre9 #2 Sat Feb 9 22:10:54 UTC 2002 ppc unknownArchitecture: ppchost: powerpc-unknown-linux-gnubuild: powerpc-unknown-linux-gnutarget: powerpc-unknown-linux-gnuconfigured with: ../gcc/configure --prefix=/room/newnew/gcc-inst --enable-languages=c",RESOLVED          FIXED      
5703,David Edelsohn,gcc powerpc64: -mcpu=630 links as 32-bits,"If -mcpu=630 is given, the linker appears to be invoked without thegcc ppc64 directories.Release:3.0.3Environment:System: AIX panther 3 4 000785504C00host: powerpc-ibm-aix4.3.2.0build: powerpc-ibm-aix4.3.2.0target: powerpc-ibm-aix4.3.2.0configured with: /u/gcc/gcc-3.0.3/configureHow-To-Repeat:I'm afraid I don't have a simple case of something failing, I noticedthis on a GMP pre-release.  But the output of gcc -v is, I hope,fairly clear.A program foo.c        int main (){}compiled with        gcc -maix64 -mpowerpc64 -mcpu=630 -c foo.cwhen linked with        gcc -v -maix64 -mpowerpc64 -mcpu=630 foo.oreveals,Reading specs from /usr/local/lib/gcc-lib/powerpc-ibm-aix4.3.2.0/3.0.3/specsConfigured with: /u/gcc/gcc-3.0.3/configure Thread model: singlegcc version 3.0.3 /usr/local/lib/gcc-lib/powerpc-ibm-aix4.3.2.0/3.0.3/collect2 -bpT:0x10000000 -bpD:0x20000000 -btextro -bnodelcsect -b64 /lib/crt0_64.o -L/usr/local/lib/gcc-lib/powerpc-ibm-aix4.3.2.0/3.0.3 -L/usr/local/lib/gcc-lib/powerpc-ibm-aix4.3.2.0/3.0.3/../../.. foo.o /usr/local/lib/gcc-lib/powerpc-ibm-aix4.3.2.0/3.0.3/libgcc.a -lc /usr/local/lib/gcc-lib/powerpc-ibm-aix4.3.2.0/3.0.3/libgcc.awhereas linking with        gcc -v -maix64 -mpowerpc64 foo.ogives,Reading specs from /usr/local/lib/gcc-lib/powerpc-ibm-aix4.3.2.0/3.0.3/specsConfigured with: /u/gcc/gcc-3.0.3/configure Thread model: singlegcc version 3.0.3I think the latter is what should be used, irrespective of whether-mcpu=630 is given or not.",RESOLVED          FIXED      
5717,David Edelsohn,ppc-eabi-g++ emits wrong relocation type for typeid(std::bad_exception) when -meabi specified.,"When the attached code is compiled with -meabi -msdata=default command-lineoptions, the resulting assembler code refers to the ""_ZTISt13bad_exception""symbol as if it is placed in small constant data section. The wrong asmstatement is:la %r3,_ZTISt13bad_exception@sda21(0)However, the symbol itself is in the section"".gnu.linkonce.r._ZTISt13bad_exception"" that is not a small data section.Attempt to link the resulting code then fails with the following error:"".../ld: test.o: The target (typeinfo for std::bad_exception) of aR_PPC_EMB_SDA21 relocation is in the wrong output section (.rodata)""Release:3.0.4 20020218Environment:Linux falcon 2.2.14 #2 SMP Sat Apr 15 13:24:18 MSD 2000 i686 unknownHow-To-Repeat:Compile/link attached ""test.cc"" like this:~/try/eabi/bin/ppc-eabi-g++ -v -O2 -meabi -msdata=default -save-temps -mregnames -nostartfiles test.cc Reading specs from /home/osv/try/eabi/lib/gcc-lib/ppc-eabi/3.0.4/specsConfigured with: /home/osv/cygnus/gcc/configure --prefix=/home/osv/try/eabi --target=ppc-eabi --disable-nls --with-gnu-as --with-gnu-ld -with-newlibThread model: singlegcc version 3.0.4 20020218 (prerelease) /home/osv/try/eabi/lib/gcc-lib/ppc-eabi/3.0.4/cpp0 -lang-c++ -D__GNUG__=3 -D__GXX_DEPRECATED -D__EXCEPTIONS -D__GXX_ABI_VERSION=100 -v -D__GNUC__=3 -D__GNUC_MINOR__=0 -D__GNUC_PATCHLEVEL__=4 -DPPC -D__embedded__ -D__PPC__ -D__embedded__ -D__PPC -Asystem=embedded -Acpu=powerpc -Amachine=powerpc -D__CHAR_UNSIGNED__ -D__OPTIMIZE__ -D__STDC_HOSTED__=1 -D_CALL_SYSV -D_BIG_ENDIAN -D__BIG_ENDIAN__ -Amachine=bigendian -D_ARCH_PPC test.cc test.iiGNU CPP version 3.0.4 20020218 (prerelease) (cpplib) (PowerPC Embedded)ignoring nonexistent directory ""/home/osv/try/eabi/ppc-eabi/sys-include""#include ""..."" search starts here:#include <...> search starts here: /home/osv/try/eabi/include/g++-v3 /home/osv/try/eabi/include/g++-v3/ppc-eabi /home/osv/try/eabi/include/g++-v3/backward /home/osv/try/eabi/include /home/osv/try/eabi/lib/gcc-lib/ppc-eabi/3.0.4/include /home/osv/try/eabi/ppc-eabi/includeEnd of search list. /home/osv/try/eabi/lib/gcc-lib/ppc-eabi/3.0.4/cc1plus -fpreprocessed test.ii -mcall-sysv -quiet -dumpbase test.cc -meabi -msdata=default -mregnames -O2 -version -o test.sGNU CPP version 3.0.4 20020218 (prerelease) (cpplib) (PowerPC Embedded)GNU C++ version 3.0.4 20020218 (prerelease) (ppc-eabi)	compiled by GNU C version 2.95.2 20000313 (Debian GNU/Linux). /home/osv/try/eabi/lib/gcc-lib/ppc-eabi/3.0.4/../../../../ppc-eabi/bin/as -mppc -V -Qy -o test.o test.sGNU assembler version 2.11.2 (ppc-eabi) using BFD version 2.11.2 /home/osv/try/eabi/lib/gcc-lib/ppc-eabi/3.0.4/collect2 -V -Qy -dn -Bstatic -L/home/osv/try/eabi/lib/gcc-lib/ppc-eabi/3.0.4 -L/home/osv/try/eabi/lib/gcc-lib/ppc-eabi/3.0.4/../../../../ppc-eabi/lib test.o -lstdc++ -lm -lgcc -lgcc/home/osv/try/eabi/lib/gcc-lib/ppc-eabi/3.0.4/../../../../ppc-eabi/bin/ld: test.o: The target (typeinfo for std::bad_exception) of a R_PPC_EMB_SDA21 relocation is in the wrong output section (.rodata)/home/osv/try/eabi/lib/gcc-lib/ppc-eabi/3.0.4/../../../../ppc-eabi/bin/ld: final link failed: Bad valueGNU ld version 2.11.2 (with BFD 2.11.2)  Supported emulations:   elf32ppc   elf32ppclinux   elf32ppcsimcollect2: ld returned 1 exit status",RESOLVED          FIXED      
5736,David Edelsohn,bootstraping CVS HEAD on powerpc fails in checked build,"Bootstrapping CVS HEAD with -O2 fails when compiling libgcc2, specifically _negdi2 withcc1: RTL check: expected code `const_int', have `plus' in rs6000_legitimate_address, at config/rs6000/rs6000.c:2014Compiling at lower optimisation succeeds.Release:3.1 20020220Environment:powerpc-suse-linux-gnugcc configured with:--enable-shared --with-system-zlib --enable-threads --host=powerpc-suse-linux-gnu --target=powerpc-suse-linux-gnu --build=powerpc-suse-linux-gnu --enable-checking=misc,tree,rtl,gc,gcacThread model: posixHow-To-Repeat:Compile attatched _negdi2.i with:./xgcc -B./ -O2 -DIN_GCC -fPIC -g1 -DHAVE_GTHR_DEFAULT -DIN_LIBGCC2 -D__GCC_FLOAT_NOT_NEEDED -fPIC -mstrict-align -DL_negdi2 -c _negdi2.i",RESOLVED          FIXED      
5774,David Edelsohn,[AIX] gcc -O causes local const structure to be corrupted.,When compiling without -O the output from the sample code isas expected.  When -O is used the values are garbage.  Thesample code attached illustrates this by the printf() statements.Release:3.0.4Environment:System: AIX tatooine 3 4 004107134600	host: powerpc-ibm-aix4.3.1.0build: powerpc-ibm-aix4.3.1.0target: powerpc-ibm-aix4.3.1.0configured with: ../gcc-3.0.4/configure --prefix=/usr/local-gcc-3.0.4How-To-Repeat:Compile the sample code attached with  gcc -O simple_aix_gcc_bug.c./a.outdist  val=0.000000speed val=0.000000Expected output (which gcc produces without -O):./a.outdist  val=13.000000speed val=5.000000,RESOLVED          FIXED      
5842,David Edelsohn,[AIX] g++/collect2 extracts all static objects from archives,Static object in archive files are searched by collect2 and added	to export listRelease:3.0.4Environment:System: AIX flooz 1 5 0009274F4C00host: powerpc-ibm-aix5.1.0.0build: powerpc-ibm-aix5.1.0.0target: powerpc-ibm-aix5.1.0.0configured with: ../gcc-3.0.4/configureHow-To-Repeat:	See attached tarball	The object test2 will be constructed when running ./test	even though libtest(test2.o) is not needed for the executableSee attachments for tar.bz2,RESOLVED          FIXED      
5872,David Edelsohn,gcc-20020304 bootstrap failure on IBM SP/2 AIX 4.3: ld reports TOC overflow,"gcc has become complex enough that the default 64KB TOC size isinadequate, causing a link failure during the bootstrap process:gcc -DIN_GCC -g -W -Wall -Wwrite-strings -Wstrict-prototypes \        -Wmissing-prototypes -Wtraditional -pedantic -Wno-long-long \        -DHAVE_CONFIG_H -o cc1 \ c-parse.o c-lang.o attribs.o \        c-errors.o c-lex.o c-pragma.o c-decl.o c-typeck.o c-convert.o \        c-aux-info.o c-common.o c-format.o c-semantics.o \        c-objc-common.o libcpp.a main.o libbackend.a ./intl/libintl.a \        -liconv ../libiberty/libiberty.ald: 0711-781 ERROR: TOC overflow. TOC size: 73584       Maximum size: 65536collect2: ld returned 12 exit statusmake[2]: *** [cc1] Error 1IBM's manual pages contains this commentary:	% man ld	...	Options (-bOptions)	The following values are possible for the Options variable of the -b flag. You	can list more than one option after the -b flag, separating them with a single	blank.	...	bigtoc Generates extra code if the size of the table of contents (TOC) is	greater than 64KB. Extra code is needed for every reference to a TOC symbol that	cannot be addressed with a 16-bit offset. Because a program containing generated	code may have poor performance, you should reduce the number of TOC entries	needed by the program before using this option. The default is the nobigtoc	option.This build was bootstrapped with gcc-2.95.3.  I then made a second attempt using the native cc; it too failed, butdifferently; that problem will be reported separately.Release:3.1 20020304 (prerelease)Environment:	IBM SP2 (166 MHz);  AIX 4.3.2.0	% uname -a	AIX sp-i 3 4 000152774C00	% oslevel	4.3.2.0	% cc -V	...	VisualAge C++ Professional / C for AIX Compiler, Version 5	...host: powerpc-ibm-aix4.3.2.0build: powerpc-ibm-aix4.3.2.0target: powerpc-ibm-aix4.3.2.0configured with: ../gcc-20020304/configure --prefix=/usr/local/test --enable-cpplib --enable-libgcj --enable-shared --enable-version-specific-runtime-libs --with-local-prefix=/usr/local --enable-threadsHow-To-Repeat:../gcc-20020304/configure \	--prefix=/usr/local/test \	--enable-cpplib \	--enable-libgcj \	--enable-shared \	--enable-version-specific-runtime-libs \	--with-local-prefix=/usr/local \	--enable-threads && \		make bootstrap",RESOLVED          FIXED      
5918,David Edelsohn,While trying to bootstrap on ppc fails with undefined references (ada),"While trying to bootstrap compiler on powerpc-linux using:   --enable-shared \   --enable-threads=posix \   --enable-languages=""c,c++,f77,gcov,java,objc,ksi,ada"" \          --enable-long-long \   --enable-multilib \   --with-gnu-as \   --with-gnu-ld \   --with-system-zlib \binutils-2.12.90.0.1-1it fails with undefined reference:../xgcc -B../ -DIN_GCC   `echo -g -W -Wall -Wwrite-strings -Wstrict-prototypes -Wmissing-prototypes -Wtraditional -pedantic -Wno-long-long -W -Wall -Wwrite-strings -Wstrict-prototypes -Wmissing-prototypes -Wtraditional -pedantic -Wno-long-long |sed -e 's/-pedantic//g' -e 's/-Wtraditional//g'`   -o ../gnatpsta b_gnatpa.o gnatpsta.o types.o ttypes.o gnatvsn.o ttypef.o adaint.o argv.o cstreams.o cio.o deftarg.o a-except.o targtyps.o tracebak.o s-memory.o s-traceb.o s-mastop.o s-except.o exit.o a-filico.o final.o a-finali.o init.o a-ioexce.o raise.o a-stream.o get_targ.o gnat.o g-hesora.o sysdep.o a-tags.o a-textio.o i-cstrea.o system.o s-assert.o s-exctab.o s-fatllf.o s-ficobl.o s-fileio.o s-finimp.o s-finroo.o s-imgint.o s-imgrea.o s-imglli.o s-imgllu.o s-imguns.o s-parame.o s-powtab.o s-sopco3.o s-sopco4.o s-sopco5.o s-secsta.o s-stache.o s-stalib.o s-stoele.o s-stratt.o s-strops.o s-soflin.o s-imgenu.o g-htable.o ../prefix.o \	 ../../libiberty/libiberty.a targtyps.o: In function `get_target_long_double_size':/home/users/builder/rpm/BUILD/gcc-20020304/obj-ppc-pld-linux/gcc/ada/../../../gcc/ada/targtyps.c:169: undefined reference to `rs6000_long_double_type_size'/home/users/builder/rpm/BUILD/gcc-20020304/obj-ppc-pld-linux/gcc/ada/../../../gcc/ada/targtyps.c:169: undefined reference to `rs6000_long_double_type_size'collect2: ld returned 1 exit statusmake[2]: *** [../gnatpsta] Error 1make[2]: Leaving directory `/home/users/builder/rpm/BUILD/gcc-20020304/obj-ppc-pld-linux/gcc/ada'make[1]: *** [gnatpsta] Error 2make[1]: Leaving directory `/home/users/builder/rpm/BUILD/gcc-20020304/obj-ppc-pld-linux/gcc'make: *** [gnattools] Error 2make: Leaving directory `/home/users/builder/rpm/BUILD/gcc-20020304/obj-ppc-pld-linux/gcc'error: Bad exit status from /var/tmp/rpm-tmp.62239 (%build)Complete buildlog is available at:ftp://buildlogs.pld.org.pl/nest/ppc/FAIL/_r_GCC31_gcc.bz2Release:3.1 20020304 prereleaseHow-To-Repeat:Recompile on powerpc-linux.",RESOLVED          FIXED      
6022,David Edelsohn,unable to generate reloads,t5.c:222: unable to generate reloads for:(jump_insn 2837 2863 3625 (parallel[             (set (pc)                (if_then_else (ne (reg/v:DI 63 f31 [121])                        (const_int 1 [0x1]))                    (label_ref 2868)                    (pc)))            (set (reg/v:DI 63 f31 [121])                (plus:DI (reg/v:DI 63 f31 [121])                    (const_int -1 [0xffffffffffffffff])))            (clobber (scratch:CC))            (clobber (scratch:DI))        ] ) 501 {*ctrdi_internal1}Release:3.1 20020319Environment:--build=i686-linux --host=i686-linux --target=powerpc64-linuxHow-To-Repeat:-O2 -S on testcase attached to http://gcc.gnu.org/ml/gcc-patches/2002-02/msg01377.html,RESOLVED          FIXED      
6241,David Edelsohn,bad code gen on ppc (C++ only),"ppc parameter passing is incorrect in certain C++ cases.   The executable example below illustrates.  The testcase is compilable as either C or C++.It works as C, not as C++.  The difference is thatthe struct-valued parameter to foo is passed as a TARGET_EXPR in C++.   This causes the following sequence of events:store_one_arg for foo() marks the appropriate cells of stack_usage_map as dirty, then calls expand_expr on the TARGET_EXPR.  This maps onto a memcpy() call, which gets back into store_one_arg, which carefully saves and restores the garbage on the stack around =the memcpy.  Not good.  I'm not sure which phase of this is wrong.This works if the struct size is a multiple of 4.It can probably be fixed by tweaking MUST_PASS_IN_STACK, and that should be done,but I suspect a similar case with a constructor call could be, um, constructed that cannot be fixed that way.This bug existed as far back as 2.95.extern #ifdef __cplusplus""C"" #endifvoid abort();struct FSSpec { unsigned char name[70]; };typedef struct FSSpec FSSpec;extern void ResolveAlias (const FSSpec*, void** , FSSpec*, unsigned char*);extern void foo(void*, FSSpec);int main() {  FSSpec fs;  ResolveAlias(0, 0, &fs, 0);  foo(0, fs);  return 0;}void ResolveAlias (const FSSpec* a, void** b, FSSpec* c, unsigned char* d){  int i;  for ( i=0; i<sizeof(c->name); i++ )    c->name[i] = i;}void foo (void* a, FSSpec b){  int i;  for ( i=0; i<sizeof(b.name); i++ )    if ( b.name[i] != i )      abort();}Release:GNU C++ version 3.2 20020409 (experimental) (powerpc-apple-darwin1.4)Environment:Darwin and, I suspect, other PowerPcHow-To-Repeat:Compile and run above example.",RESOLVED          FIXED      
6543,David Edelsohn,"Internal compiler error in extract_insn, at recog.c:2132","gcc -DHAVE_CONFIG_H -I. -I. -I. -O2 -fsigned-char -c ltdl.c  -Wall  -fPIC -DPIC -save-temps -o .libs/ltdl.loltdl.c: In function `try_dlopen':ltdl.c:2883: unrecognizable insn:(insn 2417 1249 2418 (parallel[            (set (reg/v:SI 24 r24 [128])                (plus:SI (eq:SI (reg:SI 0 r0 [421])                        (const_int 0 [0x0]))                    (reg/v:SI 24 r24 [128])))            (clobber (reg:SI 9 r9))        ] ) -1 (nil)    (nil))ltdl.c:2883: Internal compiler error in extract_insn, at recog.c:2132Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.Release:gcc version 3.1 20020502 (prerelease)Environment:glibc-2.2.5 cvsGNU ld version 2.12.90.0.3 20020323gcc version 3.1 20020502 (prerelease)How-To-Repeat:rpm --rebuild libtool-1.4.2-8.rpm from redhat rawhide",RESOLVED          FIXED      
6768,David Edelsohn,stage2 xgcc segfaults on PowerPC NetBSD 1.5.2,"[morth@moroten ~/gcc-build]$ ../gcc-3.1/configure --prefix=/sw/gcc/3.1[morth@moroten ~/gcc-build]$ make bootstraptrue ""AR_FLAGS=rc""  ""CC_FOR_BUILD=gcc""  ""CFLAGS=-g -O2""  ""CXXFLAGS=-g -O2""  ""CFLAGS_FOR_BUILD=""  ""CFLAGS_FOR_TARGET=-g -O2""  ""INSTALL=/bin/sh /home/users/morth/gcc-3.1/install-sh -c""  ""INSTALL_DATA=/bin/sh /home/users/morth/gcc-3.1/install-sh -c -m 644""  ""INSTALL_PROGRAM=/bin/sh /home/users/morth/gcc-3.1/install-sh -c ""  ""INSTALL_SCRIPT=/bin/sh /home/users/morth/gcc-3.1/install-sh -c""  ""LDFLAGS=""  ""LIBCFLAGS=-g -O2""  ""LIBCFLAGS_FOR_TARGET=-g -O2""  ""MAKE=make""  ""MAKEINFO=makeinfo  ""  ""PICFLAG=""  ""PICFLAG_FOR_TARGET=""  ""SHELL=/bin/sh""  ""EXPECT=expect""  ""RUNTEST=runtest""  ""RUNTESTFLAGS=""  ""exec_prefix=/sw/gcc/3.1""  ""infodir=/sw/gcc/3.1/info""  ""libdir=/sw/gcc/3.1/lib""  ""prefix=/sw/gcc/3.1""  ""tooldir=/sw/gcc/3.1/powerpc-unknown-netbsd1.5.2""  ""AR=ar""  ""AS=as""  ""CC=gcc""  ""CXX=c++""  ""LD=ld""  ""LIBCFLAGS=-g -O2""  ""NM=nm""  ""PICFLAG=""  ""RANLIB=ranlib""  ""DESTDIR="" DO=all multi-doBootstrapping the compilermake CC=""stage1/xgcc -Bstage1/ -B/sw/gcc/3.1/powerpc-unknown-netbsd1.5.2/bin/""  STAGE_PREFIX=stage1/  CFLAGS=""-g -O2""  LDFLAGS=""""  WARN_CFLAGS=""\$(GCC_WARN_CFLAGS)""  STRICT_WARN=""-Wtraditional -pedantic -Wno-long-long""  libdir=/sw/gcc/3.1/lib  LANGUAGES=""c gcov c++ f77 java objc""  MAKEOVERRIDES=  OUTPUT_OPTION=""-o \$@""(cd intl && make all)echo ""int xxy_us_dummy;"" >tmp-dum.c./xgcc -B./ -B/sw/gcc/3.1/powerpc-unknown-netbsd1.5.2/bin/ -isystem /sw/gcc/3.1/powerpc-unknown-netbsd1.5.2/include -isystem /sw/gcc/3.1/powerpc-unknown-netbsd1.5.2/sys-include -S tmp-dum.cüx: internal error: SegmentfelPlease submit a full bug report,with preprocessed source if appropriate.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.*** Error code 1Stop.*** Error code 1Stop.*** Error code 1Stop.Exit 1[morth@moroten ~/gcc-build/gcc]$ ./xgcc -v -save-temps -B./ -B/sw/gcc/3.1/powerpc-unknown-netbsd1.5.2/bin/ -isystem /sw/gcc/3.1/powerpc-unknown-netbsd1.5.2/include -isystem /sw/gcc/3.1/powerpc-unknown-netbsd1.5.2/sys-include -S tmp-dum.cSegmentation fault (core dumped)Exit 139Looks like strcmp() with second argument == 0x11 for some reason (first argument ""gcc""), called from dcigettext__ + 336:[morth@moroten ~/gcc-build/gcc]$ gdb xgcc xgcc.coreGNU gdb 4.17Copyright 1998 Free Software Foundation, Inc.GDB is free software, covered by the GNU General Public License, and you arewelcome to change it and/or distribute copies of it under certain conditions.Type ""show copying"" to see the conditions.There is absolutely no warranty for GDB.  Type ""show warranty"" for details.This GDB was configured as ""powerpc--netbsd""...Core was generated by `xgcc'.Program terminated with signal 11, Segmentfel.Reading symbols from /usr/libexec/ld.elf_so...done.Reading symbols from /usr/lib/libc.so.12...done.#0  0x418f1650 in ?? () from /usr/lib/libc.so.12Breakpoint 1 at 0x180cac8: file ../../gcc-3.1/gcc/gcc.c, line 6336.Breakpoint 2 at 0x4185a220Breakpoint 3 at 0x4185b1c8(gdb) disass 0x418f1644 0x418f169cDump of assembler code from 0x418f1644 to 0x418f169c:0x418f1644:     lbz     r0,0(r3)0x418f1648:     mr      r11,r00x418f164c:     clrlwi  r0,r0,240x418f1650:     lbz     r9,0(r4)0x418f1654:     addi    r4,r4,10x418f1658:     cmpw    r0,r90x418f165c:     bne     0x418f168c0x418f1660:     addi    r3,r3,10x418f1664:     cmpwi   r11,00x418f1668:     bne     0x418f16740x418f166c:     li      r3,00x418f1670:     blr0x418f1674:     lbz     r11,0(r3)0x418f1678:     clrlwi  r9,r11,240x418f167c:     lbz     r0,0(r4)0x418f1680:     addi    r4,r4,10x418f1684:     cmpw    r9,r00x418f1688:     beq     0x418f16600x418f168c:     lbz     r0,0(r3)0x418f1690:     lbz     r3,-1(r4)0x418f1694:     subf    r3,r3,r00x418f1698:     blrEnd of assembler dump.(gdb) info registersr0             0x67     103r1             0x7fffccd0       2147470544r2             0x0      0r3             0x185f030        25554992r4             0x11     17r5             0x180ef44        25227076r6             0x0      0r7             0x0      0r8             0x14     20r9             0x1860000        25559040r10            0x7fffccf8       2147470584r11            0x67     103r12            0x4186d000       1099354112r13            0x0      0r14            0x0      0r15            0x17     23r16            0x6      6r17            0x0      0r18            0x0      0r19            0x0      0r20            0x0      0r21            0x9      9r22            0x185f030        25554992r23            0x181a3d0        25273296r24            0x1      1r25            0x1860000        25559040r26            0x1860000        25559040r27            0x1810000        25231360r28            0x1867000        25587712r29            0x64     100r30            0x40000000       1073741824r31            0x7fffcd10       2147470608pc             0x418f1650       1099896400ps             0x0      0cnd            0x44002044       1140858948lr             0x180f100        25227520cnt            0x418f1644       1099896388xer            0x0      0mq             0x0      0cycles         0x0      0insns          0x0      0stalls         0x0      0(gdb) x/s $r30x185f030:       ""gcc""(gdb) info symbol $lrdcigettext__ + 336 in section .text(gdb) list *$lr0x180f100 is in dcigettext__ (../../../gcc-3.1/gcc/intl/dcigettext.c:480).475     476       /* First find matching binding.  */477       for (binding = _nl_domain_bindings; binding != NULL; binding = binding->next)478         {479           int compare = strcmp (domainname, binding->domainname);480           if (compare == 0)481             /* We found it!  */482             break;483           if (compare < 0)484             {Release:gcc-3.1Environment:NetBSD moroten 1.5.2 NetBSD 1.5.2 (morth) #9: Fri May 10 23:29:30 CEST 2002     root@moroten:/usr/src/sys/arch/macppc/compile/morth macppc[morth@moroten ~/gcc-build/gcc]$ gcc -v                                   16:06Using builtin specs.gcc version egcs-2.91.66 19990314 (egcs-1.1.2 release)How-To-Repeat:Completely reproducible with the steps above.",RESOLVED          FIXED      
6935,David Edelsohn,g++ doesn't find std::cout and other standard symbols on AIX,"When linking a program which uses any of a number of common standard C++ library functions, for example, std::cout or std::endl, the linking fails with these symbols undefined.  This happens only with the default dynamic linking, static linking works.Release:3.1Environment:AIX juarez 3 4 00D4DF734C00powerpc-ibm-aix4.3.2.0../configure --enable-languages=c,c++,java --enable-version-specific-runtime-libs --prefix=/opt/gnu --disable-multilib --enable-threads=aix --with-system-zlibHow-To-Repeat:Compile this file:   #include <iostream>   int main()   {     std::cout << std::endl;     return 0;   }(the preprocessor-expanded version is enclosed) with this command   g++ n.cc -o nThis will give the following error messages:ld: 0711-317 ERROR: Undefined symbol: std::basic_ostream<char, std::char_traits<char> >& std::endl<char, std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&)ld: 0711-317 ERROR: Undefined symbol: .std::basic_ostream<char, std::char_traits<char> >::operator<<(std::basic_ostream<char, std::char_traits<char> >& (*)(std::basic_ostream<char, std::char_traits<char> >&))ld: 0711-317 ERROR: Undefined symbol: .std::ios_base::Init::Init[in-charge]()ld: 0711-317 ERROR: Undefined symbol: .std::ios_base::Init::~Init [in-charge]()ld: 0711-345 Use the -bloadmap or -bnoquiet option to obtain more information.collect2: ld returned 8 exit status",RESOLVED          FIXED      
6991,David Edelsohn,Seg fault in std::num_put (called from ostringstream::operator<<) while putting numbers,"- Seg fault when writing (operator<<) numbers to   ostringstream.- BUT seg fault only if os << i statement is followed by  os.str() call. If os.str() is removed, it does not crash.  e.g.     ostringstream os;    int i = 1234;    os << i; // crashes here",RESOLVED          FIXED      
7011,David Edelsohn,"[aix] internal compiler error in elimination_effects, at reload1.c:2838","c++ -v -save-temps -I. -I../../include  -fpermissive   -I/users/tools/AIX4.2//include  -c Traversal_impl.cc -o Traversal_impl.o -O2Reading specs from /users/tools/AIX4.3/GCC3/lib/gcc-lib/powerpc-ibm-aix4.3.3.0/3.1/specsConfigured with: ./configure --prefix=/users/tools/AIX4.3/GCC3 --enable-multilib --enable-threads=posix --with-libiconv-prefix=/users/tools/AIX4.2/ --enable-c-mbchar --enable-shared=noThread model: aixgcc version 3.1 /users/tools/AIX4.3/GCC3/lib/gcc-lib/powerpc-ibm-aix4.3.3.0/3.1/cpp0 -lang-c++ -D__GNUG__=3 -D__DEPRECATED -D__EXCEPTIONS -D__GXX_ABI_VERSION=100 -v -I. -I../../include -I/users/tools/AIX4.2//include -D__GNUC__=3 -D__GNUC_MINOR__=1 -D__GNUC_PATCHLEVEL__=0 -D_IBMR2 -D_POWER -D_AIX -D_AIX32 -D_AIX41 -D_AIX43 -D_LONG_LONG -D_IBMR2 -D_POWER -D_AIX -D_AIX32 -D_AIX41 -D_AIX43 -D_LONG_LONG -Asystem=unix -Asystem=aix -D__OPTIMIZE__ -D__STDC_HOSTED__=1 -D_XOPEN_SOURCE=500 -D_XOPEN_SOURCE_EXTENDED=1 -D_LARGE_FILE_API -D_ALL_SOURCE -D_ARCH_COM Traversal_impl.cc Traversal_impl.iiGNU CPP version 3.1 (cpplib)ignoring nonexistent directory ""/users/tools/AIX4.3/GCC3/powerpc-ibm-aix4.3.3.0/include""#include ""..."" search starts here:#include <...> search starts here: . ../../include /users/tools/AIX4.2/include /users/tools/AIX4.3/GCC3/include/g++-v3 /users/tools/AIX4.3/GCC3/include/g++-v3/powerpc-ibm-aix4.3.3.0 /users/tools/AIX4.3/GCC3/include/g++-v3/backward /usr/local/include /users/tools/AIX4.3/GCC3/include /users/tools/AIX4.3/GCC3/lib/gcc-lib/powerpc-ibm-aix4.3.3.0/3.1/include /usr/includeEnd of search list. /users/tools/AIX4.3/GCC3/lib/gcc-lib/powerpc-ibm-aix4.3.3.0/3.1/cc1plus -fpreprocessed Traversal_impl.ii -quiet -dumpbase Traversal_impl.cc -O2 -version -fpermissive -o Traversal_impl.sGNU CPP version 3.1 (cpplib)GNU C++ version 3.1 (powerpc-ibm-aix4.3.3.0)        compiled by GNU C version 3.1 20020429 (prerelease).Traversal_impl.cc: In member function `void    Traversal_impl::traverse(CosGraphs::NodeHandle)':Traversal_impl.cc:79: Internal compiler error in elimination_effects, at    reload1.c:2838Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructionsRelease:gcc 3.1Environment:g++ 3.1 AIX 4.3.3",RESOLVED          FIXED      
7067,David Edelsohn,-Os with -mcpu=powerpc optimizes for speed (?) instead of space,"File test4.c:unsigned f (unsigned v) {  return v * 10;}Command line:ppc-eabi-gcc -S -Os test4.cProduced code (right, space optimized):f:  mulli 3,3,10  blrCommand line:ppc-eabi-gcc -S -Os -mcpu=powerpc test4.cProduced code (wrong, probably speed optimized ?):f:  mr 0,3  slwi 3,3,2  add 3,3,0  slwi 3,3,1  blrNote: instruction ""mulli"" present in powerpc and even used by the same compiler and same command line for the very alike function, so problem is somewhere in optimization.File test4a.c:unsigned f (unsigned v) {  return v * 11;}Command line:ppc-eabi-gcc -S -Os -mcpu=powerpc test4a.cProduced code (right):f:  mulli 3,3,11  blrRelease:3.1 20020510 (prerelease)Environment:../gcc-3.1/configure --with-gcc-version-trigger=/home/install/gcc-3.1/gcc/version.c --host=i686-pc-linux-gnu --with-newlib --enable-target-optspace --target=ppc-eabi --prefix=/home/crossGCC/ppc-eabi --with-local-prefix=/home/crossGCC/ppc-eabi --program-prefix=ppc-eabi- --enable-languages=c,c++ -v --norecursionHow-To-Repeat:ppc-eabi-gcc -S -Os test4.cppc-eabi-gcc -S -Os -mcpu=powerpc test4.cppc-eabi-gcc -S -Os -mcpu=powerpc test4a.c",RESOLVED          FIXED      
7085,David Edelsohn,Wrong assembler cpu selection entries for PPC 4xx in spec file,"The ""*asm_cpu"" clause of the spec file defines wrong assembler cpu seletion options for (at least) PPC403 and PPC405 (-mppc instead of -m403 / -m405). This results in an error message from the assembler while compiling files containing PPC4xx specific opcodes.Release:gcc-3.1Environment:ix86-linux -> powerpc-linux cross compiler, powerpc-linux native compilerHow-To-Repeat:$> powerpc-linux-gcc -v -mcpu=405 -c ct.SReading specs from /usr/local/lib/gcc-lib/powerpc-linux/3.1/specsConfigured with: ../gcc-3.1/configure -v --target=powerpc-linux --prefix=/usr/local --enable-shared --disable-static --enable-languages=c,c++ --with-cpu=405 --enable-threads --with-gnu-as --with-as=/usr/local/bin/powerpc-linux-as --with-gnu-ld --with-ld=/usr/local/bin/powerpc-linux-ldThread model: posixgcc version 3.1 /usr/local/lib/gcc-lib/powerpc-linux/3.1/cpp0 -lang-asm -v -D__GNUC__=3 -D__GNUC_MINOR__=1 -D__GNUC_PATCHLEVEL__=0 -DPPC -D__ELF__ -Dpowerpc -D__PPC__ -D__ELF__ -D__powerpc__ -D__PPC -D__powerpc -Acpu=powerpc -Amachine=powerpc -D__NO_INLINE__ -D__STDC_HOSTED__=1 -D_CALL_SYSV -D_SOFT_FLOAT -D_BIG_ENDIAN -D__BIG_ENDIAN__ -Amachine=bigendian -D_ARCH_PPC -D__unix__ -D__gnu_linux__ -D__linux__ -Dunix -D__unix -Dlinux -D__linux -Asystem=unix -Asystem=posix ct.S -o /tmp/ccUbGAkx.sGNU CPP version 3.1 (cpplib) (PowerPC GNU/Linux)ignoring nonexistent directory ""/usr/local/powerpc-linux/sys-include""#include ""..."" search starts here:#include <...> search starts here: /usr/local/lib/gcc-lib/powerpc-linux/3.1/include /usr/local/powerpc-linux/includeEnd of search list. /usr/local/bin/powerpc-linux-as -mppc -V -Qy -o ct.o /tmp/ccUbGAkx.sGNU assembler version 2.12.1 (powerpc-linux) using BFD version 2.12.1ct.S: Assembler messages:ct.S:1: Error: Unrecognized opcode: `mttcr'ct.S:2: Error: Unrecognized opcode: `mtdbsr'ct.S:3: Error: Unrecognized opcode: `mtexisr'ct.S:4: Error: Unrecognized opcode: `mtiocr'ct.S:5: Error: Unrecognized opcode: `iccci'ct.S:6: Error: Unrecognized opcode: `dccci'ct.S:7: Error: Unrecognized opcode: `mticcr'ct.S:8: Error: Unrecognized opcode: `mtdccr'$> powerpc-linux-gcc -v -mcpu=405 -c -Wa,-m405 ct.SReading specs from /usr/local/lib/gcc-lib/powerpc-linux/3.1/specsConfigured with: ../gcc-3.1/configure -v --target=powerpc-linux --prefix=/usr/local --enable-shared --disable-static --enable-languages=c,c++ --with-cpu=405 --enable-threads --with-gnu-as --with-as=/usr/local/bin/powerpc-linux-as --with-gnu-ld --with-ld=/usr/local/bin/powerpc-linux-ldThread model: posixgcc version 3.1 /usr/local/lib/gcc-lib/powerpc-linux/3.1/cpp0 -lang-asm -v -D__GNUC__=3 -D__GNUC_MINOR__=1 -D__GNUC_PATCHLEVEL__=0 -DPPC -D__ELF__ -Dpowerpc -D__PPC__ -D__ELF__ -D__powerpc__ -D__PPC -D__powerpc -Acpu=powerpc -Amachine=powerpc -D__NO_INLINE__ -D__STDC_HOSTED__=1 -D_CALL_SYSV -D_SOFT_FLOAT -D_BIG_ENDIAN -D__BIG_ENDIAN__ -Amachine=bigendian -D_ARCH_PPC -D__unix__ -D__gnu_linux__ -D__linux__ -Dunix -D__unix -Dlinux -D__linux -Asystem=unix -Asystem=posix ct.S -o /tmp/cctywKsd.sGNU CPP version 3.1 (cpplib) (PowerPC GNU/Linux)ignoring nonexistent directory ""/usr/local/powerpc-linux/sys-include""#include ""..."" search starts here:#include <...> search starts here: /usr/local/lib/gcc-lib/powerpc-linux/3.1/include /usr/local/powerpc-linux/includeEnd of search list. /usr/local/bin/powerpc-linux-as -mppc -V -Qy -m405 -o ct.o /tmp/cctywKsd.sGNU assembler version 2.12.1 (powerpc-linux) using BFD version 2.12.1",RESOLVED          FIXED      
7228,David Edelsohn,ICE when using member template and template function,"The following code crushes gcc 3.1.1 and 3.0.4 (but not 2.95.4).-----------------------#include<iostream>template<int N>struct S {    enum {I = N};    template<int NN>    struct rebind {        typedef S<NN> Type;    };};template<class S,class T>void f(S& s, T& t){    typename S::rebind<t.I>::Type ss;    std::cout << ss.I << std::endl; }int main(){     S<0> s;     S<1> t;     f(s,t); }------------------$ g++ test.cctest.cc: In function `void f(S&, T&) [with S = S<0>, T = S<1>]':test.cc:21:   instantiated from heretest.cc:14: internal error: Segmentation faultPlease submit a full bug report,with preprocessed source if appropriate.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.Also fails without iostream:template<int N>struct S {  enum {I = N};  template<int NN>  struct rebind {    typedef S<NN> Type;  };};template<class S,class T>int f(S& s, T& t){  typename S::rebind<t.I>::Type ss;  return ss.I;}int main(){   S<0> s;   S<1> t;   f(s,t); }The SEGV occurs in cp/decl.c:check_initializer.  The DECLtype is TYPENAME_TYPE which matches IS_AGGR_TYPE, but itdoes not have a TYPE_LANG_SPECIFIC node attached, soLANG_TYPE_CLASS_CHECK dereferences NULL.Release:3.1.1pr and 3.0.4How-To-Repeat:Compile the above.",RESOLVED          FIXED      
7234,David Edelsohn,"Link Problem, GCC 3.1 on AIX 4.3.3","When linking an executable, not referenced objects from a library are pulled in, maybe due to static objects initialization code, even if there is no C++ code. The garbarge collection of the AIX Linker fails.If the code is compiled as .c (not .cc) files with gcc (not g++) there is no problem.Release:gcc version 3.1Environment:AIX 4.3.3 ML 10Configured with: ../configure --prefix=/tools/pkg/gcc/3.1 --disable-threadsThread model: aixHow-To-Repeat:Symbol fct3 is missing even fct2 is unused. > g++ -vReading specs from /tools/pkg/gcc/3.1/lib/gcc-lib/powerpc-ibm-aix4.3.3.0/3.1/specsConfigured with: ../configure --prefix=/tools/pkg/gcc/3.1 --disable-threadsThread model: aixgcc version 3.1> ar -VGNU ar 2.12.1> g++ -Wall -c -o fct1.o fct1.cc> g++ -Wall -c -o fct2.o fct2.cc> g++ -Wall -c -o main.o main.cc> ar -rv libTst.a fct1.o fct2.o> g++ -Wall -o main main.o libTst.a/* --- fct1.cc --- */void fct3( void );void fct2( void ){  fct3( );}/* --- fct2.cc --- */void fct1( void ){}/* --- main.cc --- */void fct1( void );int main( void ){  fct1( );  return 0;}",RESOLVED          FIXED      
7310,David Edelsohn,"""inline"" with ""-g -gdwarf -O"" for PowerPC fails to be linked","File test6.c:inline externint fff () {    return 0;}int main (void) {    return fff ();}When compiled with options ""-g -gdwarf -O"" produces link error:test6.o(.debug+0xa2): undefined reference to `.L_E327'Notes:Compiled OK with -gdwarf-2Compiled OK with -OsCompiled OK with -O2Compiled OK without ""inline extern""Release:3.1.1 20020617 (prerelease)Environment:Configured with: ../gcc-20020617/configure --with-newlib --enable-target-optspace --target=ppc-eabi --prefix=/home/crossGCC/ppc-eabi --with-local-prefix=/home/crossGCC/ppc-eabi --program-prefix=ppc-eabi- --enable-languages=c,c++ -vHow-To-Repeat:Command line:ppc-eabi-gcc test6.c -msim -O -g -gdwarfppc-eabi-gcc test6.c -msim -O -g -gdwarf+",RESOLVED          FIXED      
7383,David Edelsohn,atomic operations not atomic on ppc405,"Routines such as atomic_add() that use the stwcxinstruction fail occasionally, as the ppc405croccasionally misbehaves if the stwcx instructioninterrupted.  See erratum 77 inhttp://www-3.ibm.com/chips/techlib/techlib.nsf/techdocs/89DED00DEBFF54BF87256A8000491BA2/$file/405CR_C_errata_1_2.pdfSee also http://www.kegel.com/xgcc3/ppc405erratum77.htmlRelease:gcc-3.1Environment:IBM PPC405 embedded processorHow-To-Repeat:Difficult.  We have reproduced it by running alarge C++ program under network load on a 128-computerfarm of uniprocessor machines; failure usually happenswithin 1000 to 2000 cpu-minutes.  We have not yet founda small testcase; we're still trying.",RESOLVED          FIXED      
7463,David Edelsohn,[AIX] In function `__muldi3': ../../gcc-3.1.1/gcc/libgcc2.c:367: internal error: Illegal instruction,"I'm installing 3.1.1 gcc by commands:../gcc-3.1.1/configure --prefix=/v/aix51_rs/gnu/gcc/3.1.1gmake -j 8 CFLAGS='-O2' LIBCFLAGS='-g -O2' LIBCXXFLAGS='-g -O2 -fno-implicit-templates' bootstrapmake installand during installation      /wrk/pj/obj/gcc/xgcc -B/wrk/pj/obj/gcc/ -B/v/aix51_rs/gnu/gcc/3.1.1/powerpc-ibm-aix5.1.0.0/bin/ -B/v/aix51_rs/gnu/gcc/3.1.1/powerpc-ibm-aix5.1.0.0/lib/ -isystem /v/aix51_rs/gnu/gcc/3.1.1/powerpc-ibm-aix5.1.0.0/include -O2  -DIN_GCC    -W -Wall -Wwrite-strings -Wstrict-prototypes -Wmissing-prototypes -isystem ./include   -g -DHAVE_GTHR_DEFAULT -DIN_LIBGCC2 -D__GCC_FLOAT_NOT_NEEDED  -I. -I. -I../../gcc-3.1.1/gcc -I../../gcc-3.1.1/gcc/.  -I../../gcc-3.1.1/gcc/config -I../../gcc-3.1.1/gcc/../include  -DL_muldi3 -c ../../gcc-3.1.1/gcc/libgcc2.c -o libgcc/./_muldi3.o../../gcc-3.1.1/gcc/libgcc2.c: In function `__muldi3':../../gcc-3.1.1/gcc/libgcc2.c:367: internal error: Illegal instructionPlease submit a full bug report,Release:3.1.1Environment:aix51 IBM pSeries 690 with 32 Power4-prosessorsp690a /wrk/pj/obj> gcc -vReading specs from /usr/bin/../lib/gcc-lib/powerpc-ibm-aix5.1.0.0/2.9-aix43-010414/specsgcc version 2.9-aix43-010414How-To-Repeat:I can send files if you really likebut it's plain gcc-3.1.1 source",RESOLVED          FIXED      
7634,David Edelsohn,gcc-3.2/aix-4.2.1: Core dump while compiling libgcc/_muldi3.o,"During ""make bootstrap"", I get the following error message:if [ -f stmp-dirs ]; then true; else touch stmp-dirs; fi./xgcc -B./ -B/usr/local/rs6000-ibm-aix4.2.1.0/bin/ -isystem /usr/local/rs6000-ibm-aix4.2.1.0/include -isystem /usr/local/rs6000-ibm-aix4.2.1.0/sys-include -O2  -DIN_GCC    -W -Wall -Wwrite-strings -Wstrict-prototypes -Wmissing-prototypes -isystem ./include   -g  -DIN_LIBGCC2 -D__GCC_FLOAT_NOT_NEEDED  -I. -I. -I../../gcc-3.2/gcc -I../../gcc-3.2/gcc/. -I../../gcc-3.2/gcc/config -I../../gcc-3.2/gcc/../include  -DL_muldi3 -c ../../gcc-3.2/gcc/libgcc2.c -o libgcc/./_muldi3.oxgcc: Internal error: Segmentation fault (program as)Please submit a full bug report.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.make[3]: *** [libgcc/./_muldi3.o] Fehler 1make[3]: Verlassen des Verzeichnisses Verzeichnis »/dpdata/beasty_local/src/gcc-3.2-build/gcc«make[2]: *** [stmp-multilib] Fehler 2make[2]: Verlassen des Verzeichnisses Verzeichnis »/dpdata/beasty_local/src/gcc-3.2-build/gcc«make[1]: *** [stage1_build] Fehler 2make[1]: Verlassen des Verzeichnisses Verzeichnis »/dpdata/beasty_local/src/gcc-3.2-build/gcc«make: *** [bootstrap] Fehler 2Everything is OK if I use a newer machine (F40)(powerpc-ibm-aix4.2.1.0).I'm going to rerun the bootstrap procedurewithout requesting usage of GNU as/ld. I expectthis to work, at least it worked on GCC-3.1 and 3.1.1.Release:gcc-3.2Environment:Very old IBM RS/6000 machine (model 320H) running under AIX-4.2.1 (rs6000-ibm-aix4.2.1.0),binutils-2.13, ""--with-gnu-as"" etc, gnu makeHow-To-Repeat:- gzip -cd gcc-3.2.tar.gz|tar xf -- patch -p0 <gcc-3.2-aix42.diff (see attachement)- mkdir gcc-3.2-build- cd gcc-3.2-build- ../gcc-3.2/configure --prefix=/usr/local\   --with-gnu-as --with-as=/usr/local/bin/as\   --with-gnu-ld --with-ld=/usr/local/bin/ld- /usr/local/bin/make bootstrap",RESOLVED          FIXED      
7663,David Edelsohn,AIX-LD fails with TOC overflow,when compiling cc1plus the AIX-ld fails withgcc -DIN_GCC    -g -O2 -W -Wall -Wwrite-strings -Wstrict-prototypes -Wmissing-prototypes -Wtraditional -pedantic -Wno-long-long  -DHAVE_CONFIG_H  -o cc1plus \      cp/call.o cp/decl.o cp/expr.o cp/pt.o cp/typeck2.o cp/class.o cp/decl2.o cp/error.o cp/lex.o cp/parse.o cp/ptree.o cp/rtti.o cp/spew.o cp/typeck.o cp/cvt.o cp/except.o cp/friend.o cp/init.o cp/method.o cp/search.o cp/semantics.o cp/tree.o cp/repo.o cp/dump.o cp/optimize.o cp/mangle.o cp/cp-lang.o attribs.o c-common.o c-format.o c-pragma.o c-semantics.o c-lex.o  main.o libbackend.a libcpp.a ./intl/libintl.a  -liconv  ../libiberty/libiberty.ald: 0711-781 ERROR: TOC overflow. TOC size: 77396       Maximum size: 65536According to the manpage big TOC's carry a heavy performance penalty on AIX.Release:unknownEnvironment:creating aix 4.2.0gcc version 2.95.2 compiling gcc-3.2,RESOLVED          FIXED      
7990,David Edelsohn,tradcif.y fails on AIX 4.3.3 build using native compiler,"make bootstrap fails with the following""tradcif.y"", line 438.1: 1506-343 (S) Redeclaration of parse_escape differs from previous declaration on line 35 of ""tradcif.y"".bison version is 1.35 make version is 3.79.1Release:gcc-3.2Environment:AIX 4.3AIX tigger 3 4 0002155F4C00How-To-Repeat:env CC=cc ./configuremake bootstrap",RESOLVED          FIXED      
8326,David Edelsohn,Undefined symbols in iostreams with --enable-threads on AIX,"Building hello world with --enable-threads on AIX results in undefined symbols in the iostreams libraryRelease:3.2Environment:Reading specs from /home/mpeck/usr/local/lib/gcc-lib/powerpc-ibm-aix4.3.3.0/3.2/specs Configured with: /home/mpeck/build/gcc/gcc-3.2/configure --prefix=/home/mpeck/usr/local --with-local-prefix=/home/mpeck/usr/local --enable-threads --enable-languages=c,c++ --disable-nls Thread model: aix gcc version 3.2  /home/mpeck/usr/local/lib/gcc-lib/powerpc-ibm-aix4.3.3.0/3.2/cpp0 -lang-c++ -D__GNUG__=3 -D__DEPRECATED -D__EXCEPTIONS -v -D__GNUC__=3 -D__GNUC_MINOR__=2 -D__GNUC_PATCHLEVEL__=0 -D__GXX_ABI_VERSION=102 -D_IBMR2 -D_POWER -D_AIX -D_AIX32 -D_AIX41 -D_AIX43 -D_LONG_LONG -D_IBMR2 -D_POWER -D_AIX -D_AIX32 -D_AIX41 -D_AIX43 -D_LONG_LONG -Asystem=unix -Asystem=aix -D__NO_INLINE__ -D__STDC_HOSTED__=1 -D_XOPEN_SOURCE=500 -D_XOPEN_SOURCE_EXTENDED=1 -D_LARGE_FILE_API -D_ALL_SOURCE -D_ARCH_COM text.cxx text.iiHow-To-Repeat:$ g++ -v --save-temps text.cxx Reading specs from /home/mpeck/usr/local/lib/gcc-lib/powerpc-ibm-aix4.3.3.0/3.2\/specs Configured with: /home/mpeck/build/gcc/gcc-3.2/configure --prefix=/home/mpeck/u\sr/local --with-local-prefix=/home/mpeck/usr/local --enable-threads --enable-la\nguages=c,c++ --disable-nls Thread model: aix gcc version 3.2  /home/mpeck/usr/local/lib/gcc-lib/powerpc-ibm-aix4.3.3.0/3.2/cpp0 -lang-c++ -D\sr/local --with-local-prefix=/home/mpeck/usr/local --enable-threads --enable-languages=c,c++ --disable-nls Thread model: aix gcc version 3.2  /home/mpeck/usr/local/lib/gcc-lib/powerpc-ibm-aix4.3.3.0/3.2/cpp0 -lang-c++ -D__GNUG__=3 -D__DEPRECATED -D__EXCEPTIONS -v -D__GNUC\__=3 -D__GNUC_MINOR__=2 -D__GNUC_PATCHLEVEL__=0 -D__GXX_ABI_VERSION=102 -D_IBMR2 -D_POWER -D_AIX -D_AIX32 -D_AIX41 -D_AIX43 -D_LONG\_LONG -D_IBMR2 -D_POWER -D_AIX -D_AIX32 -D_AIX41 -D_AIX43 -D_LONG_LONG -Asystem=unix -Asystem=aix -D__NO_INLINE__ -D__STDC_HOSTED__\=1 -D_XOPEN_SOURCE=500 -D_XOPEN_SOURCE_EXTENDED=1 -D_LARGE_FILE_API -D_ALL_SOURCE -D_ARCH_COM text.cxx text.ii GNU CPP version 3.2 (cpplib) ignoring nonexistent directory ""/home/mpeck/usr/local/powerpc-ibm-aix4.3.3.0/include"" ignoring duplicate directory ""/home/mpeck/usr/local/include"" #include ""..."" search starts here: #include <...> search starts here:  /home/mpeck/usr/local/include/c++/3.2  /home/mpeck/usr/local/include/c++/3.2/powerpc-ibm-aix4.3.3.0  /home/mpeck/usr/local/include/c++/3.2/backward  /home/mpeck/usr/local/include  /home/mpeck/usr/local/lib/gcc-lib/powerpc-ibm-aix4.3.3.0/3.2/include  /usr/include End of search list.  /home/mpeck/usr/local/lib/gcc-lib/powerpc-ibm-aix4.3.3.0/3.2/cc1plus -fpreprocessed text.ii -quiet -dumpbase text.cxx -version -o \text.s GNU CPP version 3.2 (cpplib) GNU C++ version 3.2 (powerpc-ibm-aix4.3.3.0)         compiled by GNU C version 3.2.  as -u -mcom -o text.o text.s  /home/mpeck/usr/local/lib/gcc-lib/powerpc-ibm-aix4.3.3.0/3.2/collect2 -bpT:0x10000000 -bpD:0x20000000 -btextro -bnodelcsect /lib/c\rt0.o -L/home/mpeck/usr/local/lib/gcc-lib/powerpc-ibm-aix4.3.3.0/3.2 -L/home/mpeck/usr/local/lib/gcc-lib/powerpc-ibm-aix4.3.3.0/3.2\/../../.. text.o -lstdc++ -lm -lgcc_s /home/mpeck/usr/local/lib/gcc-lib/powerpc-ibm-aix4.3.3.0/3.2/libgcc.a -lc -lgcc_s /home/mpeck\/usr/local/lib/gcc-lib/powerpc-ibm-aix4.3.3.0/3.2/libgcc.a ld: 0711-317 ERROR: Undefined symbol: .std::ios_base::Init::Init[in-charge]() ld: 0711-317 ERROR: Undefined symbol: .std::ios_base::Init::~Init [in-charge]() ld: 0711-345 Use the -bloadmap or -bnoquiet option to obtain more information. collect2: ld returned 8 exit status",RESOLVED          FIXED      
8362,David Edelsohn,hard reg not substituted for all pseudos on PowerPC,"AIX bootstrap on the 3.2 branch ICEs while buildinglibstdc++-v3 abi_check.cc with -mcpu=power option.  Thefailure turns out to be more general and more seriousbecause I can reproduce it with a PowerPC compiler usingthe string instructions, not POWER-specific instructions.The ICE is in reload1.c:reload_combine_note_use() testingthat a REG is a hard register and not still a pseudo.  gregdump file shows:Reloads for insn # 1856Reload 0: reload_in (SI) = (plus:SI (reg/f:SI 1 r1)                                                    (const_int 520 [0x208]))        BASE_REGS, RELOAD_FOR_INPUT (opnum = 2)        reload_in_reg: (plus:SI (reg/f:SI 1 r1)                                                    (const_int 520 [0x208]))        reload_reg_rtx: (reg:SI 11 r11)(insn 16488 1853 1856 (set (reg:SI 11 r11)        (plus:SI (reg/f:SI 1 r1)            (const_int 520 [0x208]))) 36 {*addsi3_internal1} (nil)    (nil))(insn 1856 16488 16458 (parallel[             (set (reg:SI 4 r4)                (mem/s:SI (reg:SI 11 r11) [0 S4 A128]))            (set (reg:SI 5 r5)                (mem/s:SI (plus:SI (reg/f:SI 929)                        (const_int 4 [0x4])) [0 S4 A32]))            (set (reg:SI 6 r6)                (mem/s:SI (plus:SI (reg/f:SI 929)                        (const_int 8 [0x8])) [0 S4 A64]))            (set (reg:SI 7 r7)                (mem/s:SI (plus:SI (reg/f:SI 929)                        (const_int 12 [0xc])) [0 S4 A32]))        ] ) 322 {*rs6000.md:8737} (insn_list:REG_DEP_OUTPUT 1843 (insn_list:REG_DEP_OUTPUT 1846 (insn_list 1842 (insn_list:REG_DEP_ANTI 1849 (nil)))))    (nil))r11 only was substituted for the pseudo in one location, notthe multiple locations in the instruction.Release:gcc version 3.3Environment:powerpc-ibm-aix.4.3.3.0How-To-Repeat:cd powerpc-ibm-aix4.3.3.0/libstdc++-v3/testsuitegcc -mstring -O2 -c abi_check.cc",RESOLVED          FIXED      
8784,David Edelsohn,[AIX] Internal compiler error in simplify_gen_subreg,"I use GCC and G++ to compile OmniORB 4.0.0 (available at http://omniorb.sourceforge.net). To do so, I use the powerpc_aix_4.3_gcc.mk make configuration file.When I compile OmniORB, with a 'make export', at a moment, I get the following error:making export in src/lib/omniORB/orbcore...make[3]: Entering directory `/home/tz/omni400/src/lib/omniORB/orbcore'g++ -c -O  -I.. -I./.. -I../../../../include/omniORB4/internal -D_REENTRANT -D_THHREAD_SAFE -DUSE_omniORB_logStream -D_OMNIORB_LIBRARY -DCONFIG_DEFAULT_LOCATION='""/etc/omniORB.cfg""' -DCONFIG_ENV='""OMNIORB_CONFIG""' -DUnixArchitecture -I. -I. -I../../../../include -D__aix__ -D__powerpc__ -D__OSVERSION__=4 -o static/Namingstub.o Namingstub.cc                                               ../omniORB4/NamingSK.cc: In function `void   __static_initialization_and_destruction_0(int, int)':../omniORB4/NamingSK.cc:1413: Internal compiler error in simplify_gen_subreg,   at simplify-rtx.c:2711Please submit a full bug report,              with preprocessed source if appropriate.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.make[3]: *** [static/Namingstub.o] Error 1make[3]: Leaving directory `/home/tz/omni400/src/lib/omniORB/orbcore'make[2]: *** [export] Error 2make[2]: Leaving directory `/home/tz/omni400/src/lib/omniORB'make[1]: *** [export] Error 2make[1]: Leaving directory `/home/tz/omni400/src/lib'make: *** [export] Error 2Release:GCC 3.2.1Environment:AIX 4.3.3 RS6000binutils 2.12.1GCC (G++) 3.2.1 (see below)Reading specs from /bv_tmp/gcc-3.2.1/lib/gcc-lib/powerpc-ibm-aix4.3.3.0/3.2.1/specsConfigured with: /home/tz/gcc-3.2.1/configure --prefix=/bv_tmp/gcc-3.2.1 --with-as=/usr/ccs/bin/as --with-ld=/usr/ccs/bin/ld --enable-threads=posix --enable-languages=c,c++ --disable-nlsThread model: aixgcc version 3.2.1How-To-Repeat:Simply try to compile OmniORB4 with G++",RESOLVED          FIXED      
9091,David Edelsohn,[3.3 branch regression] Ada bootstrap failure on powerpc-linux,"../../gnatlink -v gnatpsta -o ../../gnatpsta --GCC=""../../xgcc -B../../ -I../rts -I. -I/build/buildd/gcc-snapshot-20021228/src/gcc/ada""\                      ../targtyps.o deftarg.o ../../prefix.o ../../version.o ../rts/libgnat.a  ../../../libiberty/libiberty.a  GNATLINK 3.3 20021228 (prerelease) Copyright 1996-2002 Free Software Foundation, Inc.xgcc -c -gnatA -gnatWb -gnatiw -B../../ -I../rts -I. -I/build/buildd/gcc-snapshot-20021228/src/gcc/ada -gnatws b~gnatpsta.adb../../xgcc b~gnatpsta.o ../targtyps.o deftarg.o ../../prefix.o ../../version.o ../rts/ada.o ../rts/gnat.o ../rts/g-hesora.o ../rts/g-htable.o ../rts/interfac.o ../rts/system.o ../rts/s-parame.o ../rts/i-cstrea.o ../rts/s-powtab.o ../rts/s-exctab.o ../rts/a-ioexce.o ../rts/s-assert.o ../rts/s-except.o ../rts/s-stoele.o ../rts/s-mastop.o ../rts/s-imgint.o ../rts/a-tags.o ../rts/a-stream.o ../rts/s-soflin.o ../rts/s-stache.o ../rts/s-secsta.o ../rts/s-finroo.o ../rts/s-memory.o ../rts/s-stalib.o ../rts/s-strops.o ../rts/s-sopco3.o ../rts/s-sopco4.o ../rts/s-sopco5.o ../rts/s-traceb.o ../rts/a-except.o ../rts/s-unstyp.o ../rts/s-fatllf.o ../rts/s-imgllu.o ../rts/s-imguns.o ../rts/s-imgrea.o ../rts/s-stratt.o ../rts/s-finimp.o ../rts/a-finali.o ../rts/a-filico.o ../rts/s-ficobl.o ../rts/s-fileio.o ../rts/a-textio.o ./ttypef.o ./types.o ./get_targ.o ./ttypes.o ./gnatpsta.o -o ../../gnatpsta ../rts/libgnat.a ../../../libiberty/libiberty.a -L./ -L../rts/ -L/build/buildd/gcc-snapshot-20021228/src/gcc/ada/ -L/usr/lib/gcc-snapshot/lib/gcc-lib/powerpc-linux/3.3/adalib/ ../rts/libgnat.a -B../../ -I../rts -I. -I/build/buildd/gcc-snapshot-20021228/src/gcc/ada../targtyps.o(.text+0x6a): In function `get_target_long_double_size':: undefined reference to `rs6000_long_double_type_size'../targtyps.o(.text+0x6e): In function `get_target_long_double_size':: undefined reference to `rs6000_long_double_type_size'collect2: ld returned 1 exit statusgnatlink: cannot call ../../xgccmake[4]: *** [../../gnatpsta] Error 4make[4]: Leaving directory `/build/buildd/gcc-snapshot-20021228/build/gcc/ada/tools'make[3]: *** [gnattools2] Error 2make[3]: Leaving directory `/build/buildd/gcc-snapshot-20021228/build/gcc/ada'make[2]: *** [gnattools] Error 2make[2]: Leaving directory `/build/buildd/gcc-snapshot-20021228/build/gcc'not more information, the autobuilders remove the build directoriesafter a build ...Release:gcc-3_3-branch 20021228Environment:powerpc-linux glibc-2.3.1",RESOLVED          FIXED      
9220,David Edelsohn,fixincl hangs on AIX 4.3.3,The fixincl program hangs while fixing some header file after it fixes the string.h file. The fixinc process can't be killed even with a -9. the only way to kill is reboot.Release:3.2.1Environment:AIX 4.3.3 Level 10How-To-Repeat:run make bootstrap on AIX 4.3.3 Maintaince level 10,RESOLVED          FIXED      
9607,David Edelsohn,problem with PowerPC compiler with special optimization switches,"When compiling for PowerPC with following optionspowerpc-gcc-3.2.2  -O  -msoft-float -mstring -fforce-addrand following C file with the below line2resulting ""Internal compiler error""Removing any of above switches the error does not occur.Release:3.2.2Environment:gcc-3.2.2/configure --build=i686-pc-linux-gnu --host=i686-pc-linux-gnu --target=powerpc-linux-gnu --prefix=/home/ppc/cdk --with-cpu=823 --enable-target-optspace --enable-languages=c,c++ --enable-shared --enable-threads --disable-nls --nfpHow-To-Repeat:Build a powerpc cross compiler with above configurationcreate a C file with ""void prt(char *fmt,...) { }"" line.And compile it with above switches...",RESOLVED          FIXED      
9784,David Edelsohn,gcc 3.2.2 bootstrap on AIX 5.2 fails with GCC 2.9 as compiler,"In directory /usr/local/gcc-obj/gccCommand:./xgcc -B./ -B/usr/local/powerpc-ibm-aix5.2.0.0/bin/ -isystem /usr/local/powerpc-ibm-aix5.2.0.0/include -isystem /usr/local/powerpc-ibm-aix5.2.0.0/sys-include -O2  -DIN_GCC    -W -Wall -Wwrite-strings -Wstrict-prototypes -Wmissing-prototypes -isystem ./include   -g -DHAVE_GTHR_DEFAULT -DIN_LIBGCC2 -D__GCC_FLOAT_NOT_NEEDED  -I. -I. -I../../gcc-3.2.2/gcc -I../../gcc-3.2.2/gcc/. -I../../gcc-3.2.2/gcc/config -I../../gcc-3.2.2/gcc/../include  -DL_fixunsdfsi -c ../../gcc-3.2.2/gcc/libgcc2.c -o libgcc/./_fixunsdfsi.oOutput:../../gcc-3.2.2/gcc/libgcc2.c: In function `__fixunsdfsi':../../gcc-3.2.2/gcc/libgcc2.c:1174: unrecognizable insn:(insn 13 12 14 (set (reg:CCEQ 119)        (compare:CCEQ (ior:SI (gt:SI (reg:CCFP 118)                    (const_int 0 [0x0]))                (eq:SI (reg:CCFP 118)                    (const_int 0 [0x0])))            (const_int 1 [0x1]))) -1 (insn_list 12 (nil))    (expr_list:REG_DEAD (reg:CCFP 118)        (nil)))../../gcc-3.2.2/gcc/libgcc2.c:1174: Internal compiler error in extract_insn, at recog.c:2148Please submit a full bug report,with preprocessed source if appropriate.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.make[3]: *** [libgcc/./_fixunsdfsi.o] Error 1make[3]: Leaving directory `/usr/local/gcc-obj/gcc'make[2]: *** [stmp-multilib] Error 2make[2]: Leaving directory `/usr/local/gcc-obj/gcc'make[1]: *** [stage1_build] Error 2make[1]: Leaving directory `/usr/local/gcc-obj/gcc'make: *** [bootstrap] Error 2# ./xgcc -vUsing built-in specs.Configured with: ../gcc-3.2.2/configure Thread model: aixgcc version 3.2.2GCC Used to make xgcc# gcc -vReading specs from /usr/bin/../lib/gcc-lib/powerpc-ibm-aix5.1.0.0/2.9-aix51-020209/specsgcc version 2.9-aix51-020209Release:gcc-3.2.2Environment:IBM AIX 5.2 on SMP PowerPC_POWER3 CPU.  64 bit kernel installed.gcc 2.9 is a 32bit executable.Using GNU Make version 3.79.1",RESOLVED          FIXED      
9930,David Edelsohn,gcc 3.2.2 bootstrap fails on AIX 5.1 with binutils 2.13.2,"Unable to make bootstrap on AIX 5.1 with gcc 2.9-aix51-020209.Yes, APAR IY25528 is applied already.This build bombs out with a core dump.  Where in the bootstrap the core dump happens depends on the config line (see ""how-to-repeat""), but happens within the same bfd function.I have not been able to fix this by using an older version of binutils either.  Any ideas?With the first config line (--without-gnu-as --without-gnu-ld):/vol2/cruvolo/fbe/gcc-objdir/gcc/../binutils/ar -X32_64 rc ./libgcc.a libgcc/./_muldi3.o libgcc/./_negdi2.o libgcc/./_lshrdi3.o libgcc/./_ashldi3.o libgcc/./_ashrdi3.o libgcc/./_ffsdi2.o libgcc/./_clz.o libgcc/./_cmpdi2.o libgcc/./_ucmpdi2.o libgcc/./_floatdidf.o libgcc/./_floatdisf.o libgcc/./_fixunsdfsi.o libgcc/./_fixunssfsi.o libgcc/./_fixunsdfdi.o libgcc/./_fixdfdi.o libgcc/./_fixunssfdi.o libgcc/./_fixsfdi.o libgcc/./_fixxfdi.o libgcc/./_fixunsxfdi.o libgcc/./_floatdixf.o libgcc/./_fixunsxfsi.o libgcc/./_fixtfdi.o libgcc/./_fixunstfdi.o libgcc/./_floatditf.o libgcc/./_clear_cache.o libgcc/./_trampoline.o libgcc/./__main.o libgcc/./_exit.o libgcc/./_absvsi2.o libgcc/./_absvdi2.o libgcc/./_addvsi3.o libgcc/./_addvdi3.o libgcc/./_subvsi3.o libgcc/./_subvdi3.o libgcc/./_mulvsi3.o libgcc/./_mulvdi3.o libgcc/./_negvsi2.o libgcc/./_negvdi2.o libgcc/./_ctors.o libgcc/./_divdi3.o libgcc/./_moddi3.o libgcc/./_udivdi3.o libgcc/./_umoddi3.o libgcc/./_udiv_w_sdiv.o libgcc/./_udivmoddi4.o libgcc/./_pack_sf.o libgcc/./_unpack_sf.o libgcc/./_addsub_sf.o libgcc/./_mul_sf.o libgcc/./_div_sf.o libgcc/./_fpcmp_parts_sf.o libgcc/./_compare_sf.o libgcc/./_eq_sf.o libgcc/./_ne_sf.o libgcc/./_gt_sf.o libgcc/./_ge_sf.o libgcc/./_lt_sf.o libgcc/./_le_sf.o libgcc/./_unord_sf.o libgcc/./_si_to_sf.o libgcc/./_sf_to_si.o libgcc/./_negate_sf.o libgcc/./_make_sf.o libgcc/./_sf_to_df.o libgcc/./_thenan_sf.o libgcc/./_sf_to_usi.o libgcc/./_usi_to_sf.o libgcc/./_pack_df.o libgcc/./_unpack_df.o libgcc/./_addsub_df.o libgcc/./_mul_df.o libgcc/./_div_df.o libgcc/./_fpcmp_parts_df.o libgcc/./_compare_df.o libgcc/./_eq_df.o libgcc/./_ne_df.o libgcc/./_gt_df.o libgcc/./_ge_df.o libgcc/./_lt_df.o libgcc/./_le_df.o libgcc/./_unord_df.o libgcc/./_si_to_df.o libgcc/./_df_to_si.o libgcc/./_negate_df.o libgcc/./_make_df.o libgcc/./_df_to_sf.o libgcc/./_thenan_df.o libgcc/./_df_to_usi.o libgcc/./_usi_to_df.o libgcc/./_eprintf.o libgcc/./_bb.o libgcc/./__gcc_bcmp.ogmake[3]: *** [libgcc.a] Segmentation fault (core dumped)gmake[3]: Leaving directory `/vol2/cruvolo/fbe/gcc-objdir/gcc'The following is the gdb backtrace (using GNU gdb 5.0-aix51-020209) of lt-ar using the given core:#0  0xd0d2ab90 in objalloc_create ()#1  0xd0d2529c in _bfd_new_bfd () at ../../gcc-3.2.2/bfd/opncls.c:53#2  0xd0d254a8 in bfd_openr (filename=0x2ff21214 ""libgcc/./_muldi3.o"",     target=0x0) at ../../gcc-3.2.2/bfd/opncls.c:148#3  0x10001f68 in open_inarch (archive_filename=0x2ff21209 ""./libgcc.a"",     file=0x2ff21214 ""libgcc/./_muldi3.o"") at ../../gcc-3.2.2/binutils/ar.c:773#4  0x10001d3c in main (argc=95, argv=0x2ff20e5c)    at ../../gcc-3.2.2/binutils/ar.c:676#5  0x100001dc in __start ()With the second configure line (using gas):./xgcc -B./ -B/usr/local/fbe/1.0/powerpc-ibm-aix5.1.0.0/bin/ -isystem /usr/local/fbe/1.0/powerpc-ibm-aix5.1.0.0/include -isystem /usr/local/fbe/1.0/powerpc-ibm-aix5.1.0.0/sys-include -O2  -DIN_GCC    -W -Wall -Wwrite-strings -Wstrict-prototypes -Wmissing-prototypes -isystem ./include   -g -DHAVE_GTHR_DEFAULT -DIN_LIBGCC2 -D__GCC_FLOAT_NOT_NEEDED  -I. -I. -I../../gcc-3.2.2/gcc -I../../gcc-3.2.2/gcc/. -I../../gcc-3.2.2/gcc/config -I../../gcc-3.2.2/gcc/../include  -DL_muldi3 -c ../../gcc-3.2.2/gcc/libgcc2.c -o libgcc/./_muldi3.oxgcc: Internal error: Segmentation fault (program as)Please submit a full bug report.See <URL:http://www.gnu.org/software/gcc/bugs.html> for instructions.gmake[3]: *** [libgcc/./_muldi3.o] Error 1gmake[3]: Leaving directory `/vol2/cruvolo/fbe/gcc-objdir/gcc'The following is the gdb backtrace (using GNU gdb 5.0-aix51-020209) of lt-as-new using the given core:#0  0xd0d2ab90 in objalloc_create ()#1  0xd0d2529c in _bfd_new_bfd () at ../../gcc-3.2.2/bfd/opncls.c:53#2  0xd0d25830 in bfd_openw (    filename=0x20010a08 <Address 0x20010a08 out of bounds>,     target=0x10048b3c ""aixcoff-rs6000"") at ../../gcc-3.2.2/bfd/opncls.c:357#3  0x1003eed8 in output_file_create (    name=0x20010a08 <Address 0x20010a08 out of bounds>)    at ../../gcc-3.2.2/gas/output-file.c:50#4  0x100022d8 in main (argc=2, argv=0x200109d8)    at ../../gcc-3.2.2/gas/as.c:860#5  0x100001dc in __start ()Release:gcc 3.2.2Environment:AIX 5.1, powerpc-ibm-aix5.1.0.0, gcc 2.9-aix51-020209How-To-Repeat:unpack gcc-3.2.2unpack binutils-2.13.2cd gcc-3.2.2rm -rf libibertyln -s ../binutils-2.13.2/libiberty libibertyln -s ../binutils-2.13.2/bfd bfdln -s ../binutils-2.13.2/binutils binutilsln -s ../binutils-2.13.2/gas gasln -s ../binutils-2.13.2/gprof gprofln -s ../binutils-2.13.2/ld ldln -s ../binutils-2.13.2/opcodes opcodesln -s ../binutils-2.13.2/intl intlmkdir ../gcc-objdircd ../gcc-objdir../gcc-3.2.2/configure --prefix=$FBETOP --with-stabs  --enable-shared --enable-threads=posix --without-gnu-as --with-as=/usr/bin/as --without-gnu-ld --with-ld=/usr/bin/ldgmake CFLAGS='-O -g' LIBCFLAGS='-g -O2' LIBCXXFLAGS='-g -O2' bootstrap -- OR --../gcc-3.2.2/configure --prefix=$FBETOP --with-stabs --enable-shared --enable-threads=posixgmake CFLAGS='-O -g' LIBCFLAGS='-g -O2' LIBCXXFLAGS='-g -O2' bootstrap",RESOLVED          FIXED      
10209,David Edelsohn,17-March-2003 3.3 snapshot fails to boot ibuilding libstdc++,"I tried bootstrapping the March 17 2003 snapshot on aix5.2l and got link failures building the c++ libraries.Here are the configure arguments:../configure --with-gcc-version-trigger=/home/rutt/gcc-20030317/gcc/version.c -\-host=powerpc-ibm-aix5.2.0.0 --disable-nls --disable-multilib --enable-threads \--enable-languages=c,c++ --norecursionI'll attach the full log of the build.  But the problem seems to have something to do with the (aix native) linker warnings:g BFD: .libs/libsupc++.a(tinfo2.o): Unrecognized storage class 111 for .data symb\ol `_ZTIPKe'The BFD thing is a little confusing as I don't even have binutils installed.Release:3.3 snapshotEnvironment:aix5.2l",RESOLVED          FIXED      
10390,David Edelsohn,[AIX 4.3.3] conflicting declarations in stdio.h,"When I tried to build gnu sed on AIX 4.3.3, the configure script detects _LARGE_FILES=1 and _LARGE_FILE_API=1 had to be set to use large files.stdio.h installed by gcc-3.2.2 into /usr/local/lib/gcc-lib/powerpc-ibm-aix4.3.3.0/3.2.2/include checks both defines separately and declares both functions groups which are using fpos_t/fpos64_t: fgetpos and fgetpos64 in a manner which causes gcc invoked with/usr/local/bin/gcc -DHAVE_CONFIG_H -I. -I. -I.. \-I../lib -I../intl -I.. \-DLOCALEDIR=\""/usr/local/share/locale\"" \-g -pipe -O2 -mcpu=603e -MT fmt.o -MD -MP -MF \"".deps/fmt.Tpo"" -c -o regex.o \`test -f 'regex.c' || echo './'`regex.cto fail with:/usr/local/lib/gcc-lib/powerpc-ibm-aix4.3.3.0/3.2.2/include/stdio.h:448: conflicting types for `fgetpos64'/usr/local/lib/gcc-lib/powerpc-ibm-aix4.3.3.0/3.2.2/include/stdio.h:288: previous declaration of `fgetpos64'/usr/local/lib/gcc-lib/powerpc-ibm-aix4.3.3.0/3.2.2/include/stdio.h:451: conflicting types for `fseeko64'/usr/local/lib/gcc-lib/powerpc-ibm-aix4.3.3.0/3.2.2/include/stdio.h:394: previous declaration of `fseeko64'/usr/local/lib/gcc-lib/powerpc-ibm-aix4.3.3.0/3.2.2/include/stdio.h:452: conflicting types for `fsetpos64'/usr/local/lib/gcc-lib/powerpc-ibm-aix4.3.3.0/3.2.2/include/stdio.h:290: previous declaration of `fsetpos64'/usr/local/lib/gcc-lib/powerpc-ibm-aix4.3.3.0/3.2.2/include/stdio.h:453: conflicting types for `ftello64'/usr/local/lib/gcc-lib/powerpc-ibm-aix4.3.3.0/3.2.2/include/stdio.h:395: previous declaration of `ftello64'I created a patch which corrects the issue, but maybe not the problem, because I don't know why the author wants both _LARGE_FILES and _LARGE_FILE_API existing in concurrent manner.Release:gcc-3.2.2Environment:AIX aix 3 4 00FFFFFF4C00 (AIX 4.3.3)",RESOLVED          FIXED      
10464,David Edelsohn,[AIX 5.1] getopt has conflicting definitions in stlib.h and stdio.h,"The getopt was in both stdio.h and stdlib.h and they were different.  one was char * const *, the other char * const [] for the second parameter.Release:gcc 3.2.2 - recent download of stableEnvironment:AIX 5.1 compiled from IBM supplied gcc 2.95.How-To-Repeat:Build gcc from scratch on an aix 5.1 machine I suppose.",RESOLVED          FIXED      
10465,David Edelsohn,[AIX] allow -mnatural-align option for AIX as well,The Darwin version of gcc 3.x has a -mnatural-align that allows doubles to be aligned to 8 bytes as is natural to the PPC architecture.  Could this same option be expanded to include the AIX system.I am doing a port of the OpenOffice.org (unpaid).  I would like this option so that I do not have to hack up a lot of OOo code puting in alignment code.This would also be a performance enhancement for the PPC architectute.Release:gcc 3.?.?Environment:AIX PPC,RESOLVED          FIXED      
3042,David Edelsohn,static class members in V3 shared library,V3 uses static class members in headers and shared library(essentially globally shared data) which are not sharedbetween the shared library and the application linkedagainst it.Release:gcc version 3.0 20010601 (prerelease)Environment:AIX 4.3.3.0How-To-Repeat:V3 testsuite failures (reported as duplicate symbolsin static linking tests),RESOLVED          FIXED      
80177,David Malcolm,wrong fixit hint for misspelled static_assert: __cpp_static_assert,"In the ill-formed test case below GCC suggests to replace the misspelled static_assert with the __cpp_static_assert feature test macro rather than with the static_assert keyword.  Using the feature test macro here would be incorrect  to the hint should suggest the latter.(I wonder if there is a way to have the  algorithm prefer non-reserved names over reserved ones.  Also, it would be nice, though I suspect difficult, if the algorithm could prefer names with the right type.  E.g., prefer a function over a literal where a the misspelled name looks like it's being used as a function.)$ cat a.C && gcc -S -Wall -Wextra -Wpedantic a.Cvoid f (){  static_assertion (1 == 0, ""1 == 0"");}a.C: In function ‘void f()’:a.C:3:3: error: ‘static_assertion’ was not declared in this scope   static_assertion (1 == 0, ""1 == 0"");   ^~~~~~~~~~~~~~~~a.C:3:3: note: suggested alternative: ‘__cpp_static_assert’   static_assertion (1 == 0, ""1 == 0"");   ^~~~~~~~~~~~~~~~   __cpp_static_assert",RESOLVED          FIXED      
82826,David Malcolm,[8 regression] jit.dg test-benchmark.c.exe fail,"r254140 triggers this:spawn -ignore SIGHUP /work/gcc/xgcc -B/work/gcc/ /source/gcc/testsuite/jit.dg/test-benchmark.c -fno-diagnostics-show-caret -fdiagnostics-color=never -I/source/gcc/testsuite/../jit -lgccjit -g -Wall -Werror -Wl,--export-dynamic -fgnu89-inline -lm -o test-benchmark.c.exeFAIL: test-benchmark.c.exe killed: 10882 exp9 0 0 CHILDKILLED SIGSEGV {segmentation violation}Option set:-with-system-zlib --with-demangler-in-ld --with-fpmath=sse --enable-shared --enable-host-shared --enable-clocale=gnu --enable-cloog-backend=isl --enable-languages=c,c++,fortran,jit,lto -with-arch=haswell --with-cpu=haswell",RESOLVED          FIXED      
82174,David Malcolm,Null name in one entry of the builtin_data array of jit-builtins.c,"I see a segmentation violation in some code calling libgccjit.  The backtrace is:Program terminated with signal SIGSEGV, Segmentation fault.#0  pp_format(pretty_printer*, text_info*) () at ../../gcc.git/gcc/pretty-print.c:317317	  output_buffer *buffer = pp_buffer (pp);(gdb) bt#0  pp_format(pretty_printer*, text_info*) () at ../../gcc.git/gcc/pretty-print.c:317#1  0x00007fef3c1fc698 in diagnostic_report_diagnostic(diagnostic_context*, diagnostic_info*) ()    at ../../gcc.git/gcc/diagnostic.c:974#2  0x00007fef3c1fc99e in diagnostic_impl (richloc=richloc@entry=0x7fff20ffec20, opt=opt@entry=-1,     gmsgid=gmsgid@entry=0x7fef3c6e88d7 ""in %s, at %s:%d"", ap=ap@entry=0x7fff20ffec08,     kind=kind@entry=DK_ICE) at ../../gcc.git/gcc/diagnostic.c:1099#3  0x00007fef3c1fd63d in internal_error (gmsgid=gmsgid@entry=0x7fef3c6e88d7 ""in %s, at %s:%d"")    at ../../gcc.git/gcc/diagnostic.c:1422#4  0x00007fef3b631a49 in fancy_abort (    file=file@entry=0x7fef3c29aea0 ""../../gcc.git/gcc/jit/jit-builtins.c"", line=line@entry=71,     function=function@entry=0x7fef3c29ec80 <gcc::jit::matches_builtin(char const*, gcc::jit::builtin_data const&)::__FUNCTION__> ""matches_builtin"") at ../../gcc.git/gcc/diagnostic.c:1488#5  0x00007fef3b38c6d8 in gcc::jit::matches_builtin (bd=..., bd=...,     in_name=0x434b21 ""__builtin_ia32_orps256"") at ../../gcc.git/gcc/jit/jit-builtins.c:71#6  gcc::jit::find_builtin_by_name (out_id=<synthetic pointer>, in_name=0x434b21 ""__builtin_ia32_orps256"")    at ../../gcc.git/gcc/jit/jit-builtins.c:118#7  gcc::jit::builtins_manager::get_builtin_function (this=0x2619850,     name=0x434b21 ""__builtin_ia32_orps256"") at ../../gcc.git/gcc/jit/jit-builtins.c:150#8  0x00007fef3b644019 in gcc_jit_context_get_builtin_function (ctxt=0x25d2ac0,     name=name@entry=0x434b21 ""__builtin_ia32_orps256"") at ../../gcc.git/gcc/jit/libgccjit.c:917#9  0x0000000000417bfd in ip_be_avx2_fdecls (be=be@entry=0x643820 <ip_avx2>) at intel-avx2.c:201#10 0x00000000004143d7 in ip_init_jit () at jit.c:892#11 0x000000000040a0ac in time_ip_init_jit () at arith-test.c:231#12 run_im_ii_tests (operator=operator@entry=0, size=size@entry=..., chk_flag=112) at arith-test.c:505#13 0x000000000040594a in main (argc=<optimized out>, argv=<optimized out>) at arith-test.c:616Stepping up to #6 find_builtin_by_name() finds that the loop counter i is:(gdb) print i$2 = 1092but the entries about i in the builtin_data array are:(gdb) print builtin_data[1091]$5 = {name = 0x7fef3c2a3964 ""__builtin__ITM_RfWE"", fnclass = BUILT_IN_NORMAL,   type = gcc::jit::BT_FN_LDOUBLE_VPTR, both_p = false, fallback_p = true,   attr = gcc::jit::ATTR_TM_PURE_TMPURE_NOTHROW_LIST, implicit_p = false}(gdb) print builtin_data[1092]$6 = {name = 0x0, fnclass = BUILT_IN_NORMAL, type = gcc::jit::BT_LAST, both_p = false, fallback_p = false,   attr = gcc::jit::ATTR_LAST, implicit_p = false}(gdb) print builtin_data[1093]$7 = {name = 0x7fef3c2a3978 ""__builtin___asan_init"", fnclass = BUILT_IN_NORMAL,   type = gcc::jit::BT_FN_VOID, both_p = true, fallback_p = true, attr = gcc::jit::ATTR_NOTHROW_LEAF_LIST,   implicit_p = true}and it's clear that the name in entry 1092 is NULL, which eventually leads to a failed insert and the segfault.  The size of the array is 46752 and each entry has 32 bytes thus the code is expecting 1461 entries in the array.",RESOLVED          FIXED      
81514,David Malcolm,g++.dg/lookup/missing-std-include-2.C FAILs on Solaris,"The new g++.dg/lookup/missing-std-include-2.C testcase FAILs on Solaris:FAIL: g++.dg/lookup/missing-std-include-2.C  -std=gnu++11  (test for warnings, line 13)FAIL: g++.dg/lookup/missing-std-include-2.C  -std=gnu++11  (test for warnings, line 24)FAIL: g++.dg/lookup/missing-std-include-2.C  -std=gnu++11  expected multiline pattern lines 45-53 not found: ""\\s*@@ -7,6 \\+7,8 @@.*\\n    directives\\)\\.  \\*/.*\\n .*\\n #include <stdio\\.h>.*\\n\\+#include <string>.*\\n\\+#include <iostream>.*\\n .*\\n void test \\(void\\).*\\n \\{.*\\n""FAIL: g++.dg/lookup/missing-std-include-2.C  -std=gnu++11 (test for excess errors)(32 and 64-bit, sparc and x86).The output for l.13 is/vol/gcc/src/hg/trunk/local/gcc/testsuite/g++.dg/lookup/missing-std-include-2.C: In function 'void test()':/vol/gcc/src/hg/trunk/local/gcc/testsuite/g++.dg/lookup/missing-std-include-2.C:13:8: error: 'string' is not a member of 'std'/vol/gcc/src/hg/trunk/local/gcc/testsuite/g++.dg/lookup/missing-std-include-2.C:13:8: note: suggested alternative: 'sprintf'while Linux has the expected/vol/gcc/src/hg/trunk/local/gcc/testsuite/g++.dg/lookup/missing-std-include-2.C: In function 'void test()':/vol/gcc/src/hg/trunk/local/gcc/testsuite/g++.dg/lookup/missing-std-include-2.C:13:8: error: 'string' is not a member of 'std'/vol/gcc/src/hg/trunk/local/gcc/testsuite/g++.dg/lookup/missing-std-include-2.C:13:8: note: 'std::string' is defined in header '<string>'; did you forget to '#include <string>'?  Rainer",RESOLVED          FIXED      
79300,David Malcolm,Wrong diagnostics position,"Let's consider following test-case:$ cat memtable.cc#include <assert.h>voida (){  long val_size;  unsigned long encoded_len;  char *buf, *p;  assert ((p + val_size) - buf == encoded_len);}$ g++ memtable.cc -Wsign-compare -cIn file included from memtable.cc:1:0:memtable.cc: In function ‘void a()’:memtable.cc:8:32: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]   assert ((p + val_size) - buf == encoded_len);           ~~~~~~~~~~~~~~~~~~~~~^~~~Tilda line ends after the first letter of 'encoded_len', which is wrong.",RESOLVED          FIXED      
80014,David Malcolm,[6/7/8 Regression] Caret missing in error message,"The caret is missing in the error message for testcasegcc/testsuite/g++.dg/rtti/typeid6.Csince GCC 6.1.0:gcc-6-branch:typeid6.C: In function 'void foo()':typeid6.C:10:3: error: no match for 'operator!' (operand type is 'const std::type_info')   !typeid(void); // { dg-error ""!typeid\\(void\\)|candidate is"" }    typeid6.C:10:3: note: candidate: operator!(bool) <built-in>typeid6.C:10:3: note:   no known conversion for argument 1 from 'const std::type_info' to 'bool'trunk:typeid6.C: In function 'void foo()':typeid6.C:10:3: error: no match for 'operator!' (operand type is 'const std::type_info')   !typeid(void); // { dg-error ""!typeid\\(void\\)|candidate is"" }typeid6.C:10:3: note: candidate: operator!(bool) <built-in>typeid6.C:10:3: note:   no known conversion for argument 1 from 'const std::type_info' to 'bool'Note that the location information is at least partially available since theline and column number in the error message are correct.",RESOLVED          FIXED      
81144,David Malcolm,"jit.dg/test-operator-overloading.cc, initial compilation","As seen for instance inhttps://gcc.gnu.org/ml/gcc-testresults/2017-06/msg01884.htmlIn function 'void create_code(gcc_jit_context*, void*)':/home/glisse/repos/gcc/trunk/gcc/testsuite/jit.dg/test-operator-overloading.cc:276:42: error: 'void* memset(void*, int, size_t)' clearing an object of non-trivial type 'struct quadratic_test'; use assignment or value-initialization instead [-Werror=class-memaccess]/home/glisse/repos/gcc/trunk/gcc/testsuite/jit.dg/test-operator-overloading.cc:61:8: note: 'struct quadratic_test' declared herecc1plus: all warnings being treated as errorsProbably since the warning was introduced.",RESOLVED          FIXED      
80954,David Malcolm,JIT make check regression for GCC 8.0,"Created attachment 41454 [details]JIT make check failsRevision r248336 made GCC JIT make check start reporting mass fails; see fails.log./configure line:--enable-languages=c,c++,jit --enable-clocale=gnu --enable-cloog-backend=isl --enable-shared --enable-host-shared --disable-libsanitizer --disable-bootstrap --disable-nls --with-system-zlib --with-demangler-in-ld --with-arch=corei7 --with-cpu=corei7 --with-fpmath=sse",RESOLVED          FIXED      
79852,David Malcolm,diagnostics should not end with exclamation mark,"from fortran/decl.c:gfc_error (""%qs at %C is already defined as FINAL procedure!"", name);Having a few diagnostics end with an exclamation mark makes them stick out although they are nothing special.All diagnostics in all files (not only Fortran) should not end with punctuation (except for the occasional ""did you mean %qs?"").",RESOLVED          FIXED      
78732,David Malcolm,Wrong description for Wendif-labels,"In file gcc/c-family/c.opt, at line 421, the description for Wendif-labels is""Warn about stray tokens after #elif and #endif.""I believe the message is about #else and #endif instead of #elif. Tokens are expected after #elif.",RESOLVED          FIXED      
78569,David Malcolm,"""internal compiler error: in get_substring_ranges_for_loc"" processing sprintf buffer overflow","Created attachment 40180 [details]preprocessed drivers/tty/nozomi.c from linux-4.9-rc5+nextOriginally replied to bug #78169, but I believe it's different now, so I opened a new one here.When building the Linux kernel with gcc snapshot x86_64-linux-gcc-7.0.0 (GCC) 7.0.0 20161124 (experimental), I get this output for incorrect code:/git/arm-soc/drivers/tty/nozomi.c: In function 'receive_flow_control':/git/arm-soc/drivers/tty/nozomi.c:919:12: internal compiler error: in get_substring_ranges_for_loc, at input.c:1388 static int receive_flow_control(struct nozomi *dc)            ^~~~~~~~~~~~~~~~~~~~0x110f22f get_substring_ranges_for_loc	/home/arnd/git/gcc/gcc/input.c:13880x110f22f get_source_location_for_substring(cpp_reader*, string_concat_db*, unsigned int, cpp_ttype, int, int, int, unsigned int*)	/home/arnd/git/gcc/gcc/input.c:14580x67230e c_get_substring_location(substring_loc const&, unsigned int*)	/home/arnd/git/gcc/gcc/c-family/c-common.c:8650xa5ce8f substring_loc::get_location(unsigned int*) const	/home/arnd/git/gcc/gcc/substring-locations.c:1940xa5ce8f format_warning_va(substring_loc const&, source_range const*, char const*, int, char const*, __va_list_tag (*) [1])	/home/arnd/git/gcc/gcc/substring-locations.c:1120xa5d1f4 format_warning_at_substring(substring_loc const&, source_range const*, char const*, int, char const*, ...)	/home/arnd/git/gcc/gcc/substring-locations.c:1790x1038159 add_bytes	/home/arnd/git/gcc/gcc/gimple-ssa-sprintf.c:20830x1038159 compute_format_length	/home/arnd/git/gcc/gcc/gimple-ssa-sprintf.c:22080x1038159 handle_gimple_call	/home/arnd/git/gcc/gcc/gimple-ssa-sprintf.c:27720x1038159 execute	/home/arnd/git/gcc/gcc/gimple-ssa-sprintf.c:2799Please submit a full bug report,with preprocessed source if appropriate.Please include the complete backtrace with any bug report.It seems to only happen when I first preprocess the file and feed that into compiler again (as done by ccache, but easily reproduced without it).command to reproduce is:x86_64-linux-gcc-7.0.0 -Wall -O -Wno-pointer-sign -s nozomi.iI've only seen this with an x86 target, not with ARM, but that could be coincidence.The code line causing this is  do {if (0x01 & debug) do { char tmp[128]; snprintf(tmp, sizeof(tmp),""The Base Band sends this value as a response to a "" ""request for IMSI detach sent over the control "" ""channel uplink (see section 7.6.1).""); printk(""\001"" ""7"" ""[%d] %s(): %s\n"", 932, __func__, tmp); } while (0); } while (0);and this in turn causes a stack overflow of the 'tmp' array as the string that gets copied in there is slightly longer than 128 bytes.",RESOLVED          FIXED      
80001,David Malcolm,diagnostics: untranslateable %s placeholders in omp-offload.c,"from omp-offload.c:error_at (loop->loc,          ""%s uses same OpenACC parallelism as containing loop"",          loop->routine ? ""routine call"" : ""inner loop"");The %s placeholder cannot be translated into other languages, but should be. Therefore the ?: should be replaced with a ?: for the whole sentence.error_at (loop->loc, loop->routine          ? ""routine call uses same OpenACC parallelism as containing loop""          : ""inner loop uses same OpenACC parallelism as containing loop"");",RESOLVED          FIXED      
79860,David Malcolm,"i18n: single-word translation in ""Character-valued %s %qs""","from fortran/resolve.c:gfc_error (""Character-valued %s %qs at %L must not be""           "" assumed length"",           module_proc ? _(""module procedure"") : _(""internal function""),           sym->name, &sym->declared_at);When translating the message from the above code into languages other than English, the adjective ""character-valued"" might take a different form depending on whether the following word is a procedure or a function.The German translation may look like this:Die zeichenwertige Prozedur ...Die zeichenwertige Funktion ...Das zeichenwertige Unterprogramm ...So depending on the inserted word the rest of the sentence may change (Die -> Das). Therefore translations should always come in whole sentences and only use placeholders in contexts that don't influence the outside grammar of the sentence.",RESOLVED          FIXED      
79848,David Malcolm,diagnostics: too complicated %<%s%>,"from ipa-devirt.c:inform (loc_t1,        ""type name %<%s%> should match type name %<%s%>"",        name1, name2);All instances of %<%s%> should be replaced with the much simpler %qs, in all files.",RESOLVED          FIXED      
79952,David Malcolm,[7 Regression] ICE in test_loading_cfg in read-rtl-function.c:2016 targeting hppa2.0w-hp-hpux11.11,"A build of the top of GCC 7.0 trunk for the hppa2.0w-hp-hpux11.11 target fails on x86_64-*-linux in the following self test.The following options were used to configure GCC:--enable-languages=c,c++ --enable-checking=all --enable-valgrind-annotations --prefix=/build/sysroot/hppa2.0w-hp-hpux11.11 --build=x86_64-pc-linux-gnu --host=x86_64-pc-linux-gnu --target=hppa2.0w-hp-hpux11.11 --without-headers/build/hppa2.0w-hp-hpux11.11/gcc-trunk/./gcc/xgcc -B/build/hppa2.0w-hp-hpux11.11/gcc-trunk/./gcc/ -nostdinc -x c /dev/null -S -o /dev/null -fself-test=/src/gcc/trunk/gcc/testsuite/selftestsIn function ‘cfg_test’:cc1: internal compiler error: Segmentation fault0x101199e crash_signal	/src/gcc/trunk/gcc/toplev.c:3370x8b4013 lookup_page_table_entry	/src/gcc/trunk/gcc/ggc-page.c:6350x8b5564 ggc_set_mark(void const*)	/src/gcc/trunk/gcc/ggc-page.c:15320x7881b5 gt_ggc_mx_lang_tree_node(void*)	./gt-c-c-decl.h:490x78a008 gt_ggc_mx_lang_tree_node(void*)	./gt-c-c-decl.h:4010x789e70 gt_ggc_mx_lang_tree_node(void*)	./gt-c-c-decl.h:3820x7882b7 gt_ggc_mx_lang_tree_node(void*)	./gt-c-c-decl.h:680xb6a1ff ggc_mark_root_tab	/src/gcc/trunk/gcc/ggc-common.c:770xb6a290 ggc_mark_roots()	/src/gcc/trunk/gcc/ggc-common.c:940x8b6aa7 ggc_collect()	/src/gcc/trunk/gcc/ggc-page.c:22020x97d419 cgraph_node::finalize_function(tree_node*, bool)	/src/gcc/trunk/gcc/cgraphunit.c:4800xe73fce function_reader::create_function()	/src/gcc/trunk/gcc/read-rtl-function.c:5200xe73bf5 function_reader::parse_function()	/src/gcc/trunk/gcc/read-rtl-function.c:4250xe73ba3 function_reader::handle_unknown_directive(file_location, char const*)	/src/gcc/trunk/gcc/read-rtl-function.c:4110x18bf972 md_reader::handle_file()	/src/gcc/trunk/gcc/read-md.c:11580x18bfa2c md_reader::handle_toplevel_file()	/src/gcc/trunk/gcc/read-md.c:11800x18bfb27 md_reader::read_file(char const*)	/src/gcc/trunk/gcc/read-md.c:13250xe76c3c read_rtl_function_body(char const*)	/src/gcc/trunk/gcc/read-rtl-function.c:15970xfa30e2 selftest::rtl_dump_test::rtl_dump_test(selftest::location const&, char*)	/src/gcc/trunk/gcc/selftest-rtl.c:690xe7bbfa test_loading_cfg	/src/gcc/trunk/gcc/read-rtl-function.c:2016Please submit a full bug report,with preprocessed source if appropriate.Please include the complete backtrace with any bug report.See <https://gcc.gnu.org/bugs/> for instructions.Makefile:1939: recipe for target 's-selftest' failedmake[1]: *** [s-selftest] Error 1make[1]: *** Waiting for unfinished jobs....rm gcov-tool.pod gpl.pod gfdl.pod fsf-funding.pod gcov.pod cpp.pod gcc.podmake[1]: Leaving directory '/build/hppa2.0w-hp-hpux11.11/gcc-trunk/gcc'Makefile:4236: recipe for target 'all-gcc' failedmake: *** [all-gcc] Error 2make: Leaving directory '/build/hppa2.0w-hp-hpux11.11/gcc-trunk'",RESOLVED          FIXED      
79875,David Malcolm,"diagnostics: missing question mark after ""did you mean""","from opts.c:error_at (loc,          ""unrecognized argument to -f%ssanitize%s= option: %q.*s;""          "" did you mean %qs"",While fixing this, please grep the whole GCC source code whether there are similar places.",RESOLVED          FIXED      
79921,David Malcolm,"missing translation for ""...this statement, but the latter is misleadingly indented""","from c-family/c-indentation.c:if (warning_at (guard_tinfo.location, OPT_Wmisleading_indentation,                ""this %qs clause does not guard..."",                guard_tinfo_to_string (guard_tinfo)))  inform (next_tinfo.location,          (""...this statement, but the latter is misleadingly indented""           "" as if it were guarded by the %qs""),          guard_tinfo_to_string (guard_tinfo));The first string literal (""this %qs..."") appears in the gcc.pot file and is thus being translated. The second string literal (""...this statement"") doesn't appear in gcc.pot and therefore cannot be translated.The cause may be the parentheses around the two string literals, which are unnecessary.In general, there should be a consistency check for cases like these, checking that the argument to all calls to the i18n functions are string literals or concatenations thereof. This check should flag the above one, as well as the following code from s390.md:    error (""invalid transaction abort code: "" HOST_WIDE_INT_PRINT_DEC",RESOLVED          FIXED      
77355,David Malcolm,FAIL: jit.dg/test-threads.c: error: static declaration of 'dejagnu_pass' follows non-static declaration,"I'm seeing the following compilation errors on recent trunk of GCC 7.0 while compiling the jit.dg/test-threads.c file:$ sed -n ""/spawn .*test-threads\.c/,/FAIL: jit.dg\/test-threads.c/p"" /build/gcc-49905/gcc/testsuite/jit/jit.logspawn -ignore SIGHUP /home/msebor/build/gcc-49905/gcc/xgcc -B/home/msebor/build/gcc-49905/gcc/ /src/gcc/49905/gcc/testsuite/jit.dg/test-threads.c -fno-diagnostics-show-caret -fdiagnostics-color=never -I/src/gcc/49905/gcc/testsuite/../jit -lgccjit -g -Wall -Werror -Wl,--export-dynamic -lpthread -fgnu89-inline -lm -o test-threads.c.exeIn file included from /src/gcc/49905/gcc/testsuite/jit.dg/test-accessing-struct.c:6:0,                 from /src/gcc/49905/gcc/testsuite/jit.dg/all-non-failing-tests.h:14,                 from /src/gcc/49905/gcc/testsuite/jit.dg/test-threads.c:82:/src/gcc/49905/gcc/testsuite/jit.dg/harness.h:25:14: error: static declaration of 'dejagnu_pass' follows non-static declaration/src/gcc/49905/gcc/testsuite/jit.dg/test-threads.c:23:6: note: previous declaration of 'dejagnu_pass' was hereIn file included from /src/gcc/49905/gcc/testsuite/jit.dg/test-accessing-struct.c:6:0,                 from /src/gcc/49905/gcc/testsuite/jit.dg/all-non-failing-tests.h:14,                 from /src/gcc/49905/gcc/testsuite/jit.dg/test-threads.c:82:/src/gcc/49905/gcc/testsuite/jit.dg/harness.h:26:14: error: static declaration of 'dejagnu_fail' follows non-static declaration/src/gcc/49905/gcc/testsuite/jit.dg/test-threads.c:24:6: note: previous declaration of 'dejagnu_fail' was hereIn file included from /src/gcc/49905/gcc/testsuite/jit.dg/test-accessing-struct.c:6:0,                 from /src/gcc/49905/gcc/testsuite/jit.dg/all-non-failing-tests.h:14,                 from /src/gcc/49905/gcc/testsuite/jit.dg/test-threads.c:82:/src/gcc/49905/gcc/testsuite/jit.dg/harness.h:27:14: error: static declaration of 'dejagnu_note' follows non-static declaration/src/gcc/49905/gcc/testsuite/jit.dg/test-threads.c:25:6: note: previous declaration of 'dejagnu_note' was herecompiler exited with status 1output is:In file included from /src/gcc/49905/gcc/testsuite/jit.dg/test-accessing-struct.c:6:0,                 from /src/gcc/49905/gcc/testsuite/jit.dg/all-non-failing-tests.h:14,                 from /src/gcc/49905/gcc/testsuite/jit.dg/test-threads.c:82:/src/gcc/49905/gcc/testsuite/jit.dg/harness.h:25:14: error: static declaration of 'dejagnu_pass' follows non-static declaration/src/gcc/49905/gcc/testsuite/jit.dg/test-threads.c:23:6: note: previous declaration of 'dejagnu_pass' was hereIn file included from /src/gcc/49905/gcc/testsuite/jit.dg/test-accessing-struct.c:6:0,                 from /src/gcc/49905/gcc/testsuite/jit.dg/all-non-failing-tests.h:14,                 from /src/gcc/49905/gcc/testsuite/jit.dg/test-threads.c:82:/src/gcc/49905/gcc/testsuite/jit.dg/harness.h:26:14: error: static declaration of 'dejagnu_fail' follows non-static declaration/src/gcc/49905/gcc/testsuite/jit.dg/test-threads.c:24:6: note: previous declaration of 'dejagnu_fail' was hereIn file included from /src/gcc/49905/gcc/testsuite/jit.dg/test-accessing-struct.c:6:0,                 from /src/gcc/49905/gcc/testsuite/jit.dg/all-non-failing-tests.h:14,                 from /src/gcc/49905/gcc/testsuite/jit.dg/test-threads.c:82:/src/gcc/49905/gcc/testsuite/jit.dg/harness.h:27:14: error: static declaration of 'dejagnu_note' follows non-static declaration/src/gcc/49905/gcc/testsuite/jit.dg/test-threads.c:25:6: note: previous declaration of 'dejagnu_note' was hereFAIL: jit.dg/test-threads.c, initial compilation",RESOLVED          FIXED      
79298,David Malcolm,[7 Regression] ICE on invalid C++ code on x86_64-linux-gnu: Segmentation fault,"This seems to be a recent regression. $ g++-trunk -v  Using built-in specs.COLLECT_GCC=g++-trunkCOLLECT_LTO_WRAPPER=/usr/local/gcc-trunk/libexec/gcc/x86_64-pc-linux-gnu/7.0.1/lto-wrapperTarget: x86_64-pc-linux-gnuConfigured with: ../gcc-source-trunk/configure --enable-languages=c,c++,lto --prefix=/usr/local/gcc-trunk --disable-bootstrapThread model: posixgcc version 7.0.1 20170130 (experimental) [trunk revision 245020] (GCC) $ $ g++-trunk -c tmp.cpptmp.cpp: In function ‘int foo()’:tmp.cpp:6:13: error: ‘y’ is not a member of ‘M’   return M::y;             ^tmp.cpp:6:13: internal compiler error: Segmentation fault0xe13a2f crash_signal	../../gcc-source-trunk/gcc/toplev.c:3330x89192b consider_binding_level	../../gcc-source-trunk/gcc/cp/name-lookup.c:47880x897a81 suggest_alternative_in_explicit_scope(unsigned int, tree_node*, tree_node*)	../../gcc-source-trunk/gcc/cp/name-lookup.c:45290x7871b4 qualified_name_lookup_error(tree_node*, tree_node*, tree_node*, unsigned int)	../../gcc-source-trunk/gcc/cp/error.c:37800x843ef8 finish_id_expression(tree_node*, tree_node*, tree_node*, cp_id_kind*, bool, bool, bool*, bool, bool, bool, bool, char const**, unsigned int)	../../gcc-source-trunk/gcc/cp/semantics.c:34610x7b0373 cp_parser_primary_expression	../../gcc-source-trunk/gcc/cp/parser.c:53350x7b314e cp_parser_postfix_expression	../../gcc-source-trunk/gcc/cp/parser.c:67820x7ae3cc cp_parser_unary_expression	../../gcc-source-trunk/gcc/cp/parser.c:81010x7bb627 cp_parser_cast_expression	../../gcc-source-trunk/gcc/cp/parser.c:87780x7bbc35 cp_parser_binary_expression	../../gcc-source-trunk/gcc/cp/parser.c:88800x7bc520 cp_parser_assignment_expression	../../gcc-source-trunk/gcc/cp/parser.c:91680x7befe9 cp_parser_expression	../../gcc-source-trunk/gcc/cp/parser.c:93350x7d16a3 cp_parser_jump_statement	../../gcc-source-trunk/gcc/cp/parser.c:121450x7d16a3 cp_parser_statement	../../gcc-source-trunk/gcc/cp/parser.c:105790x7d21cc cp_parser_statement_seq_opt	../../gcc-source-trunk/gcc/cp/parser.c:110250x7d22bf cp_parser_compound_statement	../../gcc-source-trunk/gcc/cp/parser.c:109790x7cccaf cp_parser_function_body	../../gcc-source-trunk/gcc/cp/parser.c:214310x7cccaf cp_parser_ctor_initializer_opt_and_function_body	../../gcc-source-trunk/gcc/cp/parser.c:214670x7cd591 cp_parser_function_definition_after_declarator	../../gcc-source-trunk/gcc/cp/parser.c:262350x7ce7c9 cp_parser_function_definition_from_specifiers_and_declarator	../../gcc-source-trunk/gcc/cp/parser.c:26147Please submit a full bug report,with preprocessed source if appropriate.Please include the complete backtrace with any bug report.See <http://gcc.gnu.org/bugs.html> for instructions.$ -----------------------------namespace N { int x; }namespace M = N; int foo () {  return M::y;}",RESOLVED          FIXED      
79210,David Malcolm,"[7 Regression] ""internal compiler error: in get_substring_ranges_for_loc"" processing -Wformat-signedness warning","I ran into a variant of pr78569, again building the kernel, reduced test case of drivers/scsi/lpfc/lpfc_attr.c:/* build with gcc-7.0.0 -c test.c -Wformat -Wformat-signedness */__attribute__((format(printf, 3, 4)))void dev_printk(const char *level, void *dev, const char *fmt, ...);#define lpfc_vport_param_init(attr)     \void lpfc_##attr##_init(void *vport, unsigned int val) \{ \        dev_printk(""3"", (void *)0, \                   ""0423 lpfc_""#attr"" attribute cannot be set to %d, ""\                   ""allowed range is [0, 1]\n"", val); \}#define LPFC_VPORT_ATTR_R(name, desc) \unsigned int lpfc_##name;\lpfc_vport_param_init(name)\LPFC_VPORT_ATTR_R(peer_port_login,                  ""Allow peer ports on the same physical port to login to each ""                  ""other."");// EOF/git/arm-soc/drivers/scsi/lpfc/lpfc_attr.c: In function 'lpfc_peer_port_login_init':/git/arm-soc/drivers/scsi/lpfc/lpfc_attr.c:16:1: internal compiler error: in get_substring_ranges_for_loc, at input.c:1398 LPFC_VPORT_ATTR_R(peer_port_login, ^~~~~~~~~~~~~~~~~0x111138c get_substring_ranges_for_loc	/home/arnd/git/gcc/gcc/input.c:13980x111138c get_source_location_for_substring(cpp_reader*, string_concat_db*, unsigned int, cpp_ttype, int, int, int, unsigned int*)	/home/arnd/git/gcc/gcc/input.c:14680x672afe c_get_substring_location(substring_loc const&, unsigned int*)	/home/arnd/git/gcc/gcc/c-family/c-common.c:8650x69ea5e get_corrected_substring	/home/arnd/git/gcc/gcc/c-family/c-format.c:33080x69ea5e format_type_warning	/home/arnd/git/gcc/gcc/c-family/c-format.c:34610x6a01f7 check_format_types	/home/arnd/git/gcc/gcc/c-family/c-format.c:30750x6a01f7 argument_parser::check_argument_type(format_char_info const*, length_modifier const&, tree_node*&, char const*&, bool, unsigned long&, tree_node*&, int, char const*, char const*, unsigned int, char)	/home/arnd/git/gcc/gcc/c-family/c-format.c:26750x6a2d07 argument_parser::check_argument_type(format_char_info const*, length_modifier const&, tree_node*&, char const*&, bool, unsigned long&, tree_node*&, int, char const*, char const*, unsigned int, char)	/home/arnd/git/gcc/gcc/c-family/c-format.c:25680x6a2d07 check_format_info_main	/home/arnd/git/gcc/gcc/c-family/c-format.c:28130x6a2d07 check_format_arg	/home/arnd/git/gcc/gcc/c-family/c-format.c:16720x6a0e5e check_format_info	/home/arnd/git/gcc/gcc/c-family/c-format.c:14050x6a0e5e check_function_format(tree_node*, int, tree_node**)	/home/arnd/git/gcc/gcc/c-family/c-format.c:10660x695712 check_function_arguments(unsigned int, tree_node const*, int, tree_node**)	/home/arnd/git/gcc/gcc/c-family/c-common.c:55990x638e8b build_function_call_vec(unsigned int, vec<unsigned int, va_heap, vl_ptr>, tree_node*, vec<tree_node*, va_gc, vl_embed>*, vec<tree_node*, va_gc, vl_embed>*)	/home/arnd/git/gcc/gcc/c/c-typeck.c:31130x6556d7 c_parser_postfix_expression_after_primary	/home/arnd/git/gcc/gcc/c/c-parser.c:84020x64e4ea c_parser_postfix_expression	/home/arnd/git/gcc/gcc/c/c-parser.c:81940x65105a c_parser_unary_expression	/home/arnd/git/gcc/gcc/c/c-parser.c:70120x651daf c_parser_cast_expression	/home/arnd/git/gcc/gcc/c/c-parser.c:68410x651ff5 c_parser_binary_expression	/home/arnd/git/gcc/gcc/c/c-parser.c:66500x652c88 c_parser_conditional_expression	/home/arnd/git/gcc/gcc/c/c-parser.c:6418",RESOLVED          FIXED      
78656,David Malcolm,Fix-it suggestion for std::alocator doesn't include std::allocator,"This typo for std::allocator gets a poor suggestion:#include <memory>void* allocate(std::size_t n) { return std::allocate<char>().allocate(n); }bad-fixit.cc: In function ‘void* allocate(std::size_t)’:bad-fixit.cc:3:40: error: ‘allocate’ is not a member of ‘std’ void* allocate(std::size_t n) { return std::allocate<char>().allocate(n); }                                        ^~~bad-fixit.cc:3:40: note: suggested alternative:bad-fixit.cc:3:7: note:   ‘allocate’ void* allocate(std::size_t n) { return std::allocate<char>().allocate(n); }       ^~~~~~~~bad-fixit.cc:3:54: error: expected primary-expression before ‘char’ void* allocate(std::size_t n) { return std::allocate<char>().allocate(n); }                                                      ^~~~bad-fixit.cc:3:54: error: expected ‘;’ before ‘char’bad-fixit.cc:3:58: error: expected unqualified-id before ‘>’ token void* allocate(std::size_t n) { return std::allocate<char>().allocate(n); }                                                          ^Even std::allocato or std::allocator or std::alocator doesn't get a good suggestion, it still suggests changing ""std"" to ""allocate"" (which would give ""allocate::allocate"")It seems that qualification with namespaces isn't really supported properly.",RESOLVED          FIXED      
77829,David Malcolm,Bad fix-it for nested-name-specifier,"namespace detail {  int _foo(int i) { return i; }}void bar(int i) {  detail::foo(i);}This says:fixit.cc: In function ‘void bar(int)’:fixit.cc:6:3: error: ‘foo’ is not a member of ‘detail’   detail::foo(i);   ^~~~~~fixit.cc:6:3: note: suggested alternative: ‘bool’   detail::foo(i);   ^~~~~~   boolThere are two problems here. Firstly, the range info for the rich location suggests replacing ""detail"" when it should be ""foo"". The patch generated by -fdiagnostics-generate-patch is:--- fixit.cc+++ fixit.cc@@ -3,5 +3,5 @@ }  void bar(int i) {-  detail::foo(i);+  bool::foo(i); }Secondly, detail::_foo should be a better match for detail::foo than detail::bool (which wouldn't be valid, because bool is not an identifier).",RESOLVED          FIXED      
69361,David Malcolm,"Nonsensical suggestion for misspelled command-line option ""-help""",Seen with gcc (GCC) 6.0.0 20151217 (experimental):$ gcc -helpgcc: error: unrecognized command line option ‘-h’; did you mean ‘-h’?gcc: fatal error: no input filescompilation terminated.,RESOLVED          FIXED      
62314,David Malcolm,Fix-it Hints,"Created attachment 33421 [details]fixit-hints draft implementationQuoting from http://clang.llvm.org/diagnostics.html""Fix-it"" hints provide advice for fixing small, localized problems in source code. When Clang produces a diagnostic about a particular problem that it can work around (e.g., non-standard or redundant syntax, missing keywords, common mistakes, etc.), it may also provide specific guidance in the form of a code transformation to correct the problem.  $ clang t.cpp  t.cpp:9:3: error: template specialization requires 'template<>'    struct iterator_traits<file_iterator> {    ^    template<> The attached patch implements the same behavior for GCC when given -fdiagnostic-show-caret. When the caret is disabled, it gives:  t.cpp:9:3: error: template specialization requires 'template<>'  t.cpp:9:3: fixit: template<> so an IDE might parse the ""fixit:"" diagnostic and use the message to edit the text directly.This is work in progress I have not even tried to build gcc using this patch.",RESOLVED          FIXED      
71497,David Malcolm,Warning text for -Wmisleading-indentation,"""...this statement, but the latter is misleadingly indented as if it is guarded by the 'if'""--> ""[...] as if it were [...]""The guarding is hypothetical, so the final ""is"" should be ""were"".https://en.wikipedia.org/wiki/English_subjunctive#Use_of_the_past_subjunctive(Does one get banned for filing grammar bugs against gcc?  :-)",RESOLVED          FIXED      
78304,David Malcolm,[7 Regression] -Wformat doesn't warn anymore for inttypes.h format string argument type mismatches,"For this program:#include <inttypes.h>#include <stdio.h>intmain (int argc, char **argv){  size_t size = argc;  printf (""size: %"" PRIu32 ""\n"", size);  return 0;}gcc (GCC) 4.8.5 20150623 (Red Hat 4.8.5-11) warns when given -Wformat:t.c: In function ‘main’:t.c:8:3: warning: format ‘%u’ expects argument of type ‘unsigned int’, but argument 2 has type ‘size_t’ [-Wformat=]   printf (""size: %"" PRIu32 ""\n"", size);   ^gcc (GCC) 7.0.0 20161110 (experimental) doesn't give any warning with -Wformat.Note that both versions do warn when using ""size: %u\n"" as format string:t.c: In function ‘main’:t.c:8:19: warning: format ‘%u’ expects argument of type ‘unsigned int’, but argument 2 has type ‘size_t {aka long unsigned int}’ [-Wformat=]   printf (""size: %u\n"", size);                  ~^                  %luThey also both warn when using normal string concatenation: t.c: In function ‘main’:t.c:8:11: warning: format ‘%u’ expects argument of type ‘unsigned int’, but argument 2 has type ‘size_t {aka long unsigned int}’ [-Wformat=]   printf (""size: %"" ""u"" ""\n"", size);           ^~~~~~~~~t.c:8:22: note: format string is defined here   printf (""size: %"" ""u"" ""\n"", size);                  ~~~~^                  %"" ""luThey even both warn when doing the format string define in the file itself:#include <stdio.h>#define UFORMAT ""u""intmain (int argc, char **argv){  size_t size = argc;  printf (""size: %"" UFORMAT ""\n"", size);  return 0;}But gcc 4.8.5 has a better warning message:t.c: In function ‘main’:t.c:9:3: warning: format ‘%u’ expects argument of type ‘unsigned int’, but argument 2 has type ‘size_t’ [-Wformat=]   printf (""size: %"" UFORMAT ""\n"", size);   ^While 7.0.0 gives the somewhat cryptic:t.c: In function ‘main’:t.c:3:18: warning: format ‘%u’ expects argument of type ‘unsigned int’, but argument 2 has type ‘size_t {aka long unsigned int}’ [-Wformat=] #define UFORMAT ""u""                  ^",RESOLVED          FIXED      
68473,David Malcolm,"ICE: in contains_point, at diagnostic-show-locus.c:340 after error","Created attachment 36799 [details]reduced testcaseCompiler output:$ gcc -mno-fp-ret-in-387 testcase.c testcase.c: In function 'foo':testcase.c:11:12: error: x87 register return with x87 disabled testcase.c:11:12: internal compiler error: in contains_point, at diagnostic-show-locus.c:340testcase.c:4:13: note: in definition of macro 'TEST_EQ'   if ((long)FUNC##l(xl,xl) != (long)xl) \             ^~~~0x14fc73f contains_point        /mnt/svn/gcc-trunk/gcc/diagnostic-show-locus.c:3400x14fc73f get_state_at_point        /mnt/svn/gcc-trunk/gcc/diagnostic-show-locus.c:6840x14fcc70 print_source_line        /mnt/svn/gcc-trunk/gcc/diagnostic-show-locus.c:5380x14fcc70 diagnostic_show_locus(diagnostic_context*, diagnostic_info const*)        /mnt/svn/gcc-trunk/gcc/diagnostic-show-locus.c:8030x6a1690 c_diagnostic_finalizer        /mnt/svn/gcc-trunk/gcc/c-family/c-opts.c:1670x14fab08 diagnostic_report_diagnostic(diagnostic_context*, diagnostic_info*)        /mnt/svn/gcc-trunk/gcc/diagnostic.c:8000x14fb95d error(char const*, ...)        /mnt/svn/gcc-trunk/gcc/diagnostic.c:11570xeaed98 construct_container        /mnt/svn/gcc-trunk/gcc/config/i386/i386.c:84350xeb8929 function_value_64        /mnt/svn/gcc-trunk/gcc/config/i386/i386.c:95470xeb8929 ix86_function_value_1        /mnt/svn/gcc-trunk/gcc/config/i386/i386.c:96070x81b30f hard_function_value(tree_node const*, tree_node const*, tree_node const*, int)        /mnt/svn/gcc-trunk/gcc/explow.c:18540x89926c aggregate_value_p(tree_node const*, tree_node const*)        /mnt/svn/gcc-trunk/gcc/function.c:20810x8fa2ed gimplify_modify_expr_rhs        /mnt/svn/gcc-trunk/gcc/gimplify.c:43520x8fad94 gimplify_modify_expr        /mnt/svn/gcc-trunk/gcc/gimplify.c:46430x8f0602 gimplify_expr(tree_node**, gimple**, gimple**, bool (*)(tree_node*), int)        /mnt/svn/gcc-trunk/gcc/gimplify.c:98870x8f2e26 gimplify_stmt(tree_node**, gimple**)        /mnt/svn/gcc-trunk/gcc/gimplify.c:55910x8f4c12 gimplify_and_add(tree_node*, gimple**)        /mnt/svn/gcc-trunk/gcc/gimplify.c:4170x8f4c12 internal_get_tmp_var        /mnt/svn/gcc-trunk/gcc/gimplify.c:5620x8edb7c gimplify_expr(tree_node**, gimple**, gimple**, bool (*)(tree_node*), int)        /mnt/svn/gcc-trunk/gcc/gimplify.c:108120x8edeff gimplify_expr(tree_node**, gimple**, gimple**, bool (*)(tree_node*), int)        /mnt/svn/gcc-trunk/gcc/gimplify.c:9827Please submit a full bug report,with preprocessed source if appropriate.Please include the complete backtrace with any bug report.See <http://gcc.gnu.org/bugs.html> for instructions.Tested revisions:r230703 - ICE5-branch r229305 - OK",RESOLVED          FIXED      
78616,David Malcolm,Poison strndup in system.h,"longest backtrack:       17 (code:    156)Shared 29773 out of 59469 states by creating 7857 new states, saving 21916/src/gcc-trunk/gcc/selftest.c: In function 'void selftest::assert_strndup_eq(const char*, const char*, size_t)':/src/gcc-trunk/gcc/selftest.c:209:30: error: 'strndup' was not declared in this scope   char *buf = strndup (src, n);                              ^make[3]: *** [selftest.o] Error 1make[3]: *** Waiting for unfinished jobs....make[2]: *** [all-stage1-gcc] Error 2make[1]: *** [stage1-bubble] Error 2The bootstrap compiler has a sysroot suitable for Darwin10 (which doesn't have strndup, strnlen etc.)",RESOLVED          FIXED      
78877,David Malcolm,Missing suggestion for -fsanitize=addres,"Currently, we do not suggest '-fsanitize=address' for '-fsanitize=addres', which replacing equal symbol with dash works fine.$ echo | ./xgcc -B. -fsanitize=addres -xc -xgcc: error: unrecognized argument to -fsanitize= option: ‘addres’$ echo | ./xgcc -B. -fsanitize-addres -xc -xgcc: error: unrecognized command line option ‘-fsanitize-addres’;did you mean ‘-fsanitize=address’?",RESOLVED          FIXED      
77949,David Malcolm,"[7 Regression] ICE on invalid code in internal compiler error: in linemap_position_for_loc_and_offset, at libcpp/line-map.c:907","Following test-case was accidentally created as a secondary product of a test-case reduction. The code is very crappy, but causes an ICE:$ g++ linemap-ice2.ii...linemap-ice2.ii:1:4063: error: expected ‘;’ at end of member declarationlinemap-ice2.ii:1:4095: internal compiler error: in linemap_position_for_loc_and_offset, at libcpp/line-map.c:907 :const_iterator, bool>         result = cobject_info_set.insert(co);     return *(result.first); } inline void basic_oarchive_impl::save_object(     basic_oarchive & ar     const void *t     const basic_oserializer & bos ) inline void basic_oarchive_implsave_pointer }                                                                                                                                                                                                                                                                            ^0x1591bd3 linemap_position_for_loc_and_offset(line_maps*, unsigned int, unsigned int)	../../libcpp/line-map.c:9070x7922d9 cp_parser_class_specifier_1	../../gcc/cp/parser.c:218100x794221 cp_parser_class_specifier	../../gcc/cp/parser.c:219610x794221 cp_parser_type_specifier	../../gcc/cp/parser.c:161020x7a82e9 cp_parser_decl_specifier_seq	../../gcc/cp/parser.c:130190x7bc7b5 cp_parser_member_declaration	../../gcc/cp/parser.c:226960x791c88 cp_parser_member_specification_opt	../../gcc/cp/parser.c:225480x791c88 cp_parser_class_specifier_1	../../gcc/cp/parser.c:217120x794221 cp_parser_class_specifier	../../gcc/cp/parser.c:219610x794221 cp_parser_type_specifier	../../gcc/cp/parser.c:161020x7a82e9 cp_parser_decl_specifier_seq	../../gcc/cp/parser.c:130190x7b2691 cp_parser_simple_declaration	../../gcc/cp/parser.c:125460x7b2ada cp_parser_block_declaration	../../gcc/cp/parser.c:124930x7bacfe cp_parser_declaration	../../gcc/cp/parser.c:123900x7bb156 cp_parser_declaration_seq_opt	../../gcc/cp/parser.c:122660x7bb8d8 cp_parser_namespace_body	../../gcc/cp/parser.c:179400x7bb8d8 cp_parser_namespace_definition	../../gcc/cp/parser.c:179160x7bae17 cp_parser_declaration	../../gcc/cp/parser.c:123740x7bb156 cp_parser_declaration_seq_opt	../../gcc/cp/parser.c:122660x7bb488 cp_parser_translation_unit	../../gcc/cp/parser.c:4360Started to ICE with r238008.",RESOLVED          FIXED      
72803,David Malcolm,"[7 Regression] ICE on invalid code in linemap_position_for_loc_and_offset, at libcpp/line-map.c:891","Starting from r238008, we ICE:$ g++ tc.cctc.cc:1:64: error: expected nested-name-specifier before ‘__gnu_cxx__alloc_traitstemplate’   template     class basic_string     {       typedef typename __gnu_cxx__alloc_traitstemplate  rebindother _Char_alloc_type            public                                                                                                  static const int npos = static_cast     private           template     class num_get  public localefacet        template      localeid num_putid                ;        ;        ;        ;        ;        ;        ;        ;        ;        ;        ;        ;        ; }                                                                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~tc.cc:1:64: error: expected ‘;’ at end of member declarationtc.cc:1:97: error: ‘rebindother’ does not name a type; did you mean ‘register’?   template     class basic_string     {       typedef typename __gnu_cxx__alloc_traitstemplate  rebindother _Char_alloc_type            public                                                                                                  static const int npos = static_cast     private           template     class num_get  public localefacet        template      localeid num_putid                ;        ;        ;        ;        ;        ;        ;        ;        ;        ;        ;        ;        ; }                                                                                                 ^~~~~~~~~~~                                                                                                 registertc.cc:4:127: internal compiler error: in linemap_position_for_loc_and_offset, at libcpp/line-map.c:8910x1543639 linemap_position_for_loc_and_offset(line_maps*, unsigned int, unsigned int)	../../libcpp/line-map.c:8910x789893 cp_parser_class_specifier_1	../../gcc/cp/parser.c:215060x789893 cp_parser_class_specifier	../../gcc/cp/parser.c:216570x789893 cp_parser_type_specifier	../../gcc/cp/parser.c:158830x79e441 cp_parser_decl_specifier_seq	../../gcc/cp/parser.c:128020x7a4637 cp_parser_explicit_instantiation	../../gcc/cp/parser.c:156470x7b4fe1 cp_parser_declaration	../../gcc/cp/parser.c:121320x7b38f6 cp_parser_declaration_seq_opt	../../gcc/cp/parser.c:120590x7b3c28 cp_parser_translation_unit	../../gcc/cp/parser.c:43500x7b3c28 c_parse_file()	../../gcc/cp/parser.c:375490x916922 c_common_parse_file()	../../gcc/c-family/c-opts.c:1070$ cat tc.cc  template     class basic_string     {       typedef typename __gnu_cxx__alloc_traitstemplate  rebindother _Char_alloc_type            public                                                                                                  static const int npos = static_cast     private           template     class num_get  public localefacet        template      localeid num_putid                ;        ;        ;        ;        ;        ;        ;        ;        ;        ;        ;        ;        ; }# 1 """" 1",RESOLVED          FIXED      
78811,David Malcolm,[7 Regression] raw-string-6.c testsuite failure,c-c++-common/raw-string-6.c:5:18: error: unterminated raw stringc-c++-common/raw-string-6.c:5:1: internal compiler error: Segmentation fault,RESOLVED          FIXED      
78680,David Malcolm,"[7 Regression] ICE in get_substring_ranges_for_loc, at input.c:1398","I'm aware of PR78569, but this is r243108, seen multiple times when test rebuilding the Debian archive.  It is reproducible, however not when adding -save-temps. Seen in the packages:cpl-plugin-uvesctnnsprrxtxtcptracewv/home/packages/tmp/rxtx-2.2pre2/./src/SerialImp.c:4651:28: note: in expansion of macro 'RXTXCommDriver' JNIEXPORT jboolean JNICALL RXTXCommDriver(registerKnownPorts)(JNIEnv *env,                            ^~~~~~~~~~~~~~0x10d2358 get_substring_ranges_for_loc        ../../src/gcc/input.c:13980x10d2358 get_source_location_for_substring(cpp_reader*, string_concat_db*, unsigned int, cpp_ttype, int, int, int, unsigned int*)        ../../src/gcc/input.c:14680x621654 c_get_substring_location(substring_loc const&, unsigned int*)        ../../src/gcc/c-family/c-common.c:8650x9ff32d substring_loc::get_location(unsigned int*) const        ../../src/gcc/substring-locations.c:1940x9ff32d format_warning_va(substring_loc const&, source_range const*, char const*, int, char const*, __va_list_tag (*) [1])        ../../src/gcc/substring-locations.c:1120x9ff627 format_warning_at_substring(substring_loc const&, source_range const*, char const*, int, char const*, ...)        ../../src/gcc/substring-locations.c:1790xffd2ed add_bytes        ../../src/gcc/gimple-ssa-sprintf.c:20770xffd2ed compute_format_length        ../../src/gcc/gimple-ssa-sprintf.c:22230xffd2ed handle_gimple_call        ../../src/gcc/gimple-ssa-sprintf.c:28350xffd2ed execute        ../../src/gcc/gimple-ssa-sprintf.c:2863Please submit a full bug report,with preprocessed source if appropriate.",RESOLVED          FIXED      
78705,David Malcolm,ICE in ix86_test_dumping_memory_blockage,"gmake[3]: Entering directory '/mnt/kargl/obj/gcc'/mnt/kargl/obj/./gcc/xgcc -B/mnt/kargl/obj/./gcc/ -nostdinc -x c /dev/null -S -fself-test -o /dev/null/mnt/kargl/gcc/gcc/config/i386/i386.c:51198: ix86_test_dumping_memory_blockage: FAIL: ASSERT_STREQ (expected_dump, dump) expected=""(cinsn 1 (set (mem/v:BLK (0|scratch:DI) [0  A8])        (unspec:BLK [                (mem/v:BLK (reuse_rtx 0) [0  A8])            ] UNSPEC_MEMORY_BLOCKAGE)))"" actual=""(cinsn 1 (set (mem/v:BLK (0|scratch:SI) [0  A8])        (unspec:BLK [                (mem/v:BLK (reuse_rtx 0) [0  A8])            ] UNSPEC_MEMORY_BLOCKAGE)))""cc1: internal compiler error: in fail_formatted, at selftest.c:62no stack trace because unwind library not availablePlease submit a full bug report,with preprocessed source if appropriate.",RESOLVED          FIXED      
78498,David Malcolm,[7 Regression] valgrind conditional jump or move depends on uninitialised value(s) in format_type_warning,"While debugging some memory problems in my own work I came across a Valgrind error that looks like it might be related to or a vestige of bug 78324.$ cat a.c && gcc -O2 -S -Wall -Wextra a.c -wrapper valgrindvoid f (void){  __builtin_printf (""%i"", """");}==28974== Memcheck, a memory error detector==28974== Copyright (C) 2002-2013, and GNU GPL'd, by Julian Seward et al.==28974== Using Valgrind-3.10.1 and LibVEX; rerun with -h for copyright info==28974== Command: /build/gcc-svn/gcc/cc1 -quiet -iprefix /home/msebor/build/gcc-svn/gcc/../lib/gcc/x86_64-pc-linux-gnu/7.0.0/ -isystem /build/gcc-svn/gcc/include -isystem /build/gcc-svn/gcc/include-fixed a.c -quiet -dumpbase a.c -mtune=generic -march=x86-64 -auxbase a -O2 -Wall -Wextra -o a.s==28974== ==28974== Conditional jump or move depends on uninitialised value(s)==28974==    at 0x4C2CC18: strlen (in /usr/lib64/valgrind/vgpreload_memcheck-amd64-linux.so)==28974==    by 0x1A6F646: xstrndup (xstrndup.c:51)==28974==    by 0x88D4F5: get_corrected_substring(substring_loc const&, format_wanted_type*, tree_node*, format_kind_info const*, int, char) (c-format.c:3350)==28974==    by 0x88D886: format_type_warning(substring_loc const&, source_range*, format_wanted_type*, tree_node*, tree_node*, format_kind_info const*, int, char) (c-format.c:3461)==28974==    by 0x88CCEE: check_format_types(substring_loc const&, format_wanted_type*, format_kind_info const*, int, char) (c-format.c:3075)==28974==    by 0x88BE99: argument_parser::check_argument_type(format_char_info const*, length_modifier const&, tree_node*&, char const*&, bool, unsigned long&, tree_node*&, int, char const*, char const*, unsigned int, char) (c-format.c:2675)==28974==    by 0x88C30F: check_format_info_main(format_check_results*, function_format_info*, char const*, unsigned int, tree_node*, int, tree_node*, unsigned long, object_allocator<format_wanted_type>&) (c-format.c:2820)==28974==    by 0x889674: check_format_arg(void*, tree_node*, unsigned long) (c-format.c:1672)==28974==    by 0x87616C: check_function_arguments_recurse(void (*)(void*, tree_node*, unsigned long), void*, tree_node*, unsigned long) (c-common.c:5689)==28974==    by 0x875EB5: check_function_arguments_recurse(void (*)(void*, tree_node*, unsigned long), void*, tree_node*, unsigned long) (c-common.c:5622)==28974==    by 0x888671: check_format_info(function_format_info*, tree_node*) (c-format.c:1405)==28974==    by 0x88795E: check_function_format(tree_node*, int, tree_node**) (c-format.c:1066)==28974== a.c: In function ‘f’:a.c:3:23: warning: format ‘%i’ expects argument of type ‘int’, but argument 2 has type ‘char *’ [-Wformat=]   __builtin_printf (""%i"", """");                      ~^   ~~                      %s==28974== ==28974== HEAP SUMMARY:==28974==     in use at exit: 2,437,618 bytes in 2,544 blocks==28974==   total heap usage: 12,675 allocs, 10,131 frees, 5,117,261 bytes allocated==28974== ==28974== LEAK SUMMARY:==28974==    definitely lost: 0 bytes in 0 blocks==28974==    indirectly lost: 0 bytes in 0 blocks==28974==      possibly lost: 0 bytes in 0 blocks==28974==    still reachable: 2,437,618 bytes in 2,544 blocks==28974==         suppressed: 0 bytes in 0 blocks==28974== Rerun with --leak-check=full to see details of leaked memory==28974== ==28974== For counts of detected and suppressed errors, rerun with: -v==28974== Use --track-origins=yes to see where uninitialised values come from==28974== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 0 from 0)",RESOLVED          FIXED      
78504,David Malcolm,Bad fixit hint: '_Pragma' does not name a type; did you mean '_Pragma'?,g++ -c -x c++ - <<< '_Pragma(GCC system_header)'<stdin>:1:9: error: _Pragma takes a parenthesized string literal<stdin>:1:1: error: '_Pragma' does not name a type; did you mean '_Pragma'?,RESOLVED          FIXED      
78313,David Malcolm,[7 Regression] Misleading spelling suggestion,"+++ This bug was initially created as a clone of Bug #72774 +++// PR c++/72774// { dg-do compile }void baz ();namespace A { void foo (); }void bar (){  using A::foo;  0 ? static_cast<foo> (0) : baz;	// { dg-error ""does not name a type"" }}Actually, the sug",RESOLVED          FIXED      
77922,David Malcolm,Bogus suggestion: ‘constexpr’ does not name a type; did you mean ‘constexpr’?,"constexpr int a = 1;with -std=c++98 givespr.C:1:1: error: ‘constexpr’ does not name a type; did you mean ‘constexpr’? constexpr int a = 1; ^~~~~~~~~ constexprpr.C:1:1: note: C++11 ‘constexpr’ only available with -std=c++11 or -std=gnu++11I'd say we should just not print the bogus ""did you mean"" if the identifier fuzzy matching found is the same as the one used originally.  Or not add constexpr into the suggestions in this case because it is not C++98?",RESOLVED          FIXED      
71481,David Malcolm,[7 regression] ICE during selftest: input.c: test_reading_source_line,"self-test of cross build would fail when run in an environment different from where it was built. This is because add_file_to_cache_tab() would try to read /path/to/build/src/gcc/gcc/input.c (__FILE__ expanded while building cross toolchain) which will be invalid when binaries are ran in a different machine/environment. cc1: internal compiler error: in fail, at selftest.c:440x1157822 selftest::fail(char const*, int, char const*)        /path/to/build/src/gcc/gcc/selftest.c:440x1160aa4 test_reading_source_line        /path/to/build/src/gcc/gcc/input.c:12300x1160aa4 selftest::input_c_tests()        /path/to/build/src/gcc/gcc/input.c:12490x1103fae selftest::run_tests()        /path/to/build/src/gcc/gcc/selftest-run-tests.c:520xb04699 toplev::run_self_tests()        /path/to/build/src/gcc/gcc/toplev.c:2048Please submit a full bug report,",RESOLVED          FIXED      
78324,David Malcolm,Valgrind issues seen with gcc.dg/tree-ssa/builtin-sprintf-2.c,"Seen on x86_64 with r242065.$ ./xgcc -B. -c ../../src/gcc/testsuite/gcc.dg/tree-ssa/builtin-sprintf-2.c -O2 -fprintf-return-value -fdump-tree-optimized -ftrack-macro-expansion=0 -w -wrapper valgrind==9312== Invalid read of size 1==9312==    at 0x1AE9864: cpp_interpret_string_1(cpp_reader*, cpp_string const*, unsigned long, cpp_string*, cpp_ttype, cpp_string_location_reader*, cpp_substring_ranges*) (charset.c:1568)==9312==    by 0x1AEA07B: cpp_interpret_string_ranges(cpp_reader*, cpp_string const*, cpp_string_location_reader*, unsigned long, cpp_substring_ranges*, cpp_ttype) (charset.c:1744)==9312==    by 0x1AD73F9: get_substring_ranges_for_loc(cpp_reader*, string_concat_db*, unsigned int, cpp_ttype, cpp_substring_ranges&) (input.c:1406)==9312==    by 0x1AD74FD: get_source_location_for_substring(cpp_reader*, string_concat_db*, unsigned int, cpp_ttype, int, int, int, unsigned int*) (input.c:1449)==9312==    by 0x834BF3: c_get_substring_location(substring_loc const&, unsigned int*) (c-common.c:864)==9312==    by 0xF237A1: format_warning_va(substring_loc const&, source_range const*, char const*, int, char const*, __va_list_tag (*) [1]) (substring-locations.c:112)==9312==    by 0xF23AA7: format_warning_at_substring(substring_loc const&, source_range const*, char const*, int, char const*, ...) (substring-locations.c:179)==9312==    by 0x1997C15: (anonymous namespace)::format_directive((anonymous namespace)::pass_sprintf_length::call_info const&, (anonymous namespace)::format_result*, char const*, unsigned long, (anonymous namespace)::conversion_spec const&, tree_node*) (gimple-ssa-sprintf.c:1819)==9312==    by 0x1999135: (anonymous namespace)::pass_sprintf_length::compute_format_length((anonymous namespace)::pass_sprintf_length::call_info const&, (anonymous namespace)::format_result*) (gimple-ssa-sprintf.c:2457)==9312==    by 0x1999ECF: (anonymous namespace)::pass_sprintf_length::handle_gimple_call(gimple_stmt_iterator) (gimple-ssa-sprintf.c:2775)==9312==    by 0x1999FE3: (anonymous namespace)::pass_sprintf_length::execute(function*) (gimple-ssa-sprintf.c:2802)==9312==    by 0xDE7523: execute_one_pass(opt_pass*) (passes.c:2388)==9312==  Address 0xc9bd7e3 is 0 bytes after a block of size 3 alloc'd==9312==    at 0x4A0645D: malloc (in /usr/lib64/valgrind/vgpreload_memcheck-amd64-linux.so)==9312==    by 0x1B33F17: xmalloc (xmalloc.c:148)==9312==    by 0x1B33FDA: xmemdup (xmemdup.c:37)==9312==    by 0x1AD7303: get_substring_ranges_for_loc(cpp_reader*, string_concat_db*, unsigned int, cpp_ttype, cpp_substring_ranges&) (input.c:1385)==9312==    by 0x1AD74FD: get_source_location_for_substring(cpp_reader*, string_concat_db*, unsigned int, cpp_ttype, int, int, int, unsigned int*) (input.c:1449)==9312==    by 0x834BF3: c_get_substring_location(substring_loc const&, unsigned int*) (c-common.c:864)==9312==    by 0xF237A1: format_warning_va(substring_loc const&, source_range const*, char const*, int, char const*, __va_list_tag (*) [1]) (substring-locations.c:112)==9312==    by 0xF23AA7: format_warning_at_substring(substring_loc const&, source_range const*, char const*, int, char const*, ...) (substring-locations.c:179)==9312==    by 0x1997C15: (anonymous namespace)::format_directive((anonymous namespace)::pass_sprintf_length::call_info const&, (anonymous namespace)::format_result*, char const*, unsigned long, (anonymous namespace)::conversion_spec const&, tree_node*) (gimple-ssa-sprintf.c:1819)==9312==    by 0x1999135: (anonymous namespace)::pass_sprintf_length::compute_format_length((anonymous namespace)::pass_sprintf_length::call_info const&, (anonymous namespace)::format_result*) (gimple-ssa-sprintf.c:2457)==9312==    by 0x1999ECF: (anonymous namespace)::pass_sprintf_length::handle_gimple_call(gimple_stmt_iterator) (gimple-ssa-sprintf.c:2775)==9312==    by 0x1999FE3: (anonymous namespace)::pass_sprintf_length::execute(function*) (gimple-ssa-sprintf.c:2802)==9312== ==9312== Conditional jump or move depends on uninitialised value(s)==9312==    at 0x1AE9867: cpp_interpret_string_1(cpp_reader*, cpp_string const*, unsigned long, cpp_string*, cpp_ttype, cpp_string_location_reader*, cpp_substring_ranges*) (charset.c:1568)==9312==    by 0x1AEA07B: cpp_interpret_string_ranges(cpp_reader*, cpp_string const*, cpp_string_location_reader*, unsigned long, cpp_substring_ranges*, cpp_ttype) (charset.c:1744)==9312==    by 0x1AD73F9: get_substring_ranges_for_loc(cpp_reader*, string_concat_db*, unsigned int, cpp_ttype, cpp_substring_ranges&) (input.c:1406)==9312==    by 0x1AD74FD: get_source_location_for_substring(cpp_reader*, string_concat_db*, unsigned int, cpp_ttype, int, int, int, unsigned int*) (input.c:1449)==9312==    by 0x834BF3: c_get_substring_location(substring_loc const&, unsigned int*) (c-common.c:864)==9312==    by 0xF237A1: format_warning_va(substring_loc const&, source_range const*, char const*, int, char const*, __va_list_tag (*) [1]) (substring-locations.c:112)==9312==    by 0xF23AA7: format_warning_at_substring(substring_loc const&, source_range const*, char const*, int, char const*, ...) (substring-locations.c:179)==9312==    by 0x1997C15: (anonymous namespace)::format_directive((anonymous namespace)::pass_sprintf_length::call_info const&, (anonymous namespace)::format_result*, char const*, unsigned long, (anonymous namespace)::conversion_spec const&, tree_node*) (gimple-ssa-sprintf.c:1819)==9312==    by 0x1999135: (anonymous namespace)::pass_sprintf_length::compute_format_length((anonymous namespace)::pass_sprintf_length::call_info const&, (anonymous namespace)::format_result*) (gimple-ssa-sprintf.c:2457)==9312==    by 0x1999ECF: (anonymous namespace)::pass_sprintf_length::handle_gimple_call(gimple_stmt_iterator) (gimple-ssa-sprintf.c:2775)==9312==    by 0x1999FE3: (anonymous namespace)::pass_sprintf_length::execute(function*) (gimple-ssa-sprintf.c:2802)==9312==    by 0xDE7523: execute_one_pass(opt_pass*) (passes.c:2388)",RESOLVED          FIXED      
70339,David Malcolm,"Poor message for ""singed"" vs ""signed"" typo","$ cat t.cvoid foo (singed char e) {}C frontend, trunk:$ ./xgcc -B. -c t.ct.c:1:18: error: expected ‘)’ before ‘char’ void foo (singed char e) {                  ^~~~C++ frontend, trunk:$ ./xgcc -B. -xc++ -c t.ct.c:1:18: error: variable or field ‘foo’ declared void void foo (singed char e) {                  ^~~~t.c:1:11: error: ‘singed’ was not declared in this scope void foo (singed char e) {           ^~~~~~clang 3.4:$ clang t.ct.c:1:11: error: unknown type name 'singed'; did you mean 'signed'?void foo (singed char e) {          ^~~~~~          signed1 error generated.",RESOLVED          FIXED      
72823,David Malcolm,[7 Regression] r239175 causes build failure,"trippels@gcc2-power8 gcc_build_dir % ../gcc/configure --enable-gnu-indirect-function --disable-libsanitizer --enable-valgrind-annotations --with-cpu=power8 --disable-bootstrap --disable-libstdcxx-pch --disable-libvtv --disable-libitm --disable-libcilkrts --disable-libssp --disable-libgomp --disable-werror --disable-multilib --enable-languages=c,c++trippels@gcc2-power8 gcc_build_dir % make -j60.../home/trippels/gcc_build_dir/./gcc/xgcc -B/home/trippels/gcc_build_dir/./gcc/ -xc -S -c /dev/null -fself-testcc1: internal compiler error: Segmentation fault0x1088b293 crash_signal        ../../gcc/gcc/toplev.c:3350x1115c694 cpp_string_location_reader::get_next()        ../../gcc/libcpp/charset.c:21430x1115c694 _cpp_valid_ucn        ../../gcc/libcpp/charset.c:1079Please submit a full bug report,with preprocessed source if appropriate.Please include the complete backtrace with any bug report.See <http://gcc.gnu.org/bugs.html> for instructions.Makefile:1898: recipe for target 's-selftest' failed",RESOLVED          FIXED      
72857,David Malcolm,incorrect caret location in -Wformat for width and precision given by asterisk,"In -Wformat diagnostics, GCC 6.1 (and 7.0, likely prior to r239260) would, for the most part, point the caret to the component of a format directive that it complained about.  For example, in the program below, it would point at the asterisk corresponding to the problem width or precision:$ cat xyz.c && gcc -S -Wformat xyz.cint f (char *d, long i){  __builtin_sprintf (d, ""%*ld"", i, i);  __builtin_sprintf (d, ""%.*ld"", i, i);}xyz.c: In function ‘f’:xyz.c:3:27: warning: field width specifier ‘*’ expects argument of type ‘int’, but argument 3 has type ‘long int’ [-Wformat=]   __builtin_sprintf (d, ""%*ld"", i, i);                           ^xyz.c:4:28: warning: field precision specifier ‘.*’ expects argument of type ‘int’, but argument 3 has type ‘long int’ [-Wformat=]   __builtin_sprintf (d, ""%.*ld"", i, i);                            ^The current trunk of GCC 7.0 has lost that feature and the caret instead points to the end of the format directive:xyz.c: In function ‘f’:xyz.c:3:29: warning: field width specifier ‘*’ expects argument of type ‘int’, but argument 3 has type ‘long int’ [-Wformat=]   __builtin_sprintf (d, ""%*ld"", i, i);                          ~~~^xyz.c:4:30: warning: field precision specifier ‘.*’ expects argument of type ‘int’, but argument 3 has type ‘long int’ [-Wformat=]   __builtin_sprintf (d, ""%.*ld"", i, i);                          ~~~~^This is a minor problem (distinguishing width from precision by including the period in the latter helps), but it is a regression nonetheless.Below is what Clang outputs for comparison.  (Underlining the argument corresponding to the asterisk for the width or precision seems like an especially nice touch.)xyz.c:3:18: warning: field width should have type 'int', but argument has type      'long' [-Wformat]  sprintf (d, ""%*ld"", i, i);               ~~^~   ~xyz.c:4:18: warning: field precision should have type 'int', but argument has      type 'long' [-Wformat]  sprintf (d, ""%.*ld"", i, i);               ~~^~~   ~",RESOLVED          FIXED      
64955,David Malcolm,RFE: have -Wformat suggest the correct format string to use,"Currently, -Wformat tells me that I got something wrong but doesn't tell we what the correct format string is:$ ./xgcc --versionxgcc (GCC) 5.0.0 20150204 (experimental)(etc)$ cat test.c#include <stdio.h>void test (long long ll){  printf (""%i\n"", ll);}$ ./xgcc -c -B. test.c -Wformattest.c: In function ‘test’:test.c:5:11: warning: format ‘%i’ expects argument of type ‘int’, but argument 2 has type ‘long long int’ [-Wformat=]   printf (""%i\n"", ll);           ^It would be helpful if gcc could emit something like:test.c:5:11: note: ‘printf‘ expects format string ‘%lli’ for type ‘long long int’.and maybe, if it can't be handled:test.c:5:11: note: ‘printf‘ does not have a format string for handling type ‘struct foo’.as an additional clarifying note after the warning/error(Bonus points: have GCC generate a patch to fix it ;) )",RESOLVED          FIXED      
72844,David Malcolm,Revision 293175 breaks gcc on FreeBSD,"% cd gcc7% svn update% cd ../obj7% ../gcc7/configure  --prefix=$HOME/work/7 --with-isl=/usr/local \--enable-languages=c,fortran,c++ --disable-libmudflap --disable-nls% gmake bootstrap../../gcc7/gcc/input.c: In function 'void selftest::test_lexer_string_locations_ebcdic(const selftest::line_table_case&)':../../gcc7/gcc/input.c:2137:8: error: 'HAVE_ICONV' was not declared in this scope   if (!HAVE_ICONV)        ^~~~~~~~~~../../gcc7/gcc/input.c:2137:8: note: suggested alternative: 'HAVE_ICONV_H'   if (!HAVE_ICONV)        ^~~~~~~~~~        HAVE_ICONV_H",RESOLVED          FIXED      
71184,David Malcolm,"ICE on ""operator new[""","Using g++ 6.1.0 on a file that contains just ""operator new["" produces the following error message:int_286791631.cpp:1:13: internal compiler error: Segmentation fault operator new[             ^0xaf5d8f crash_signal        /disk/0/erippey/gcc/objdir/../gcc-6.1.0/gcc/toplev.c:3330x6821f0 cp_parser_operator        /disk/0/erippey/gcc/objdir/../gcc-6.1.0/gcc/cp/parser.c:137960x6821f0 cp_parser_operator_function_id        /disk/0/erippey/gcc/objdir/../gcc-6.1.0/gcc/cp/parser.c:137240x699d5b cp_parser_template_name        /disk/0/erippey/gcc/objdir/../gcc-6.1.0/gcc/cp/parser.c:150490x699d5b cp_parser_template_id        /disk/0/erippey/gcc/objdir/../gcc-6.1.0/gcc/cp/parser.c:148210x69b03a cp_parser_type_name        /disk/0/erippey/gcc/objdir/../gcc-6.1.0/gcc/cp/parser.c:163760x68ca51 cp_parser_type_name        /disk/0/erippey/gcc/objdir/../gcc-6.1.0/gcc/cp/parser.c:163470x68ca51 cp_parser_simple_type_specifier        /disk/0/erippey/gcc/objdir/../gcc-6.1.0/gcc/cp/parser.c:162610x688ecd cp_parser_type_specifier        /disk/0/erippey/gcc/objdir/../gcc-6.1.0/gcc/cp/parser.c:159140x69a9fc cp_parser_decl_specifier_seq        /disk/0/erippey/gcc/objdir/../gcc-6.1.0/gcc/cp/parser.c:127600x6a4c41 cp_parser_simple_declaration        /disk/0/erippey/gcc/objdir/../gcc-6.1.0/gcc/cp/parser.c:123010x6a50ba cp_parser_block_declaration        /disk/0/erippey/gcc/objdir/../gcc-6.1.0/gcc/cp/parser.c:122480x6aae2e cp_parser_declaration        /disk/0/erippey/gcc/objdir/../gcc-6.1.0/gcc/cp/parser.c:121450x6a98e6 cp_parser_declaration_seq_opt        /disk/0/erippey/gcc/objdir/../gcc-6.1.0/gcc/cp/parser.c:120240x6a9be0 cp_parser_translation_unit        /disk/0/erippey/gcc/objdir/../gcc-6.1.0/gcc/cp/parser.c:43230x6a9be0 c_parse_file()        /disk/0/erippey/gcc/objdir/../gcc-6.1.0/gcc/cp/parser.c:374640x773542 c_common_parse_file()        /disk/0/erippey/gcc/objdir/../gcc-6.1.0/gcc/c-family/c-opts.c:1064Please submit a full bug report,with preprocessed source if appropriate.Please include the complete backtrace with any bug report.See <http://gcc.gnu.org/bugs.html> for instructions.",RESOLVED          FIXED      
71651,David Malcolm,Option suggestion provides a non-existing hint,"Running: gcc -fno-stack-protector-explicit -O2 pr71585.c -Sgcc: error: unrecognized command line option ‘-fno-stack-protector-explicit’; did you mean ‘-fno-stack-protector-explicit’?Problem is that the option has 'RejectNegative' flag set.fstack-protector-explicitCommon Report RejectNegative Var(flag_stack_protect, 4)Use stack protection method only for functions with the stack_protect attribute.Martin",RESOLVED          FIXED      
71471,David Malcolm,[7 Regression] Selftest failure in pretty-print.c,"/tmp/20160608/./gcc/xgcc -B/tmp/20160608/./gcc/ -xc -S -c /dev/null -fself-test/nasfarm/edelsohn/src/src/gcc/pretty-print.c:1246: FAIL: ASSERT_STREQ (expected, pp_formatted_text (&pp))cc1: internal compiler error: in fail, at selftest.c:44",RESOLVED          FIXED      
71171,David Malcolm,[6/7 Regression] Conditional jump or move depends on uninitialised value(s) in can_be_stored_compactly_p (line-map.c:148),"Hello.Following test-case uses an uninitialized memory:gcc/testsuite/c-c++-common/goacc/asyncwait-1.cReduced test-case:$ cat tc.cvoid f (  void) {#pragma acc parallel copyin  copy  async (*) $ valgrind --trace-children=yes gcc tc.c -fopenacc==29528== Conditional jump or move depends on uninitialised value(s)==29528==    at 0x10712FE: can_be_stored_compactly_p (line-map.c:148)==29528==    by 0x10712FE: get_combined_adhoc_loc(line_maps*, unsigned int, source_range, void*) (line-map.c:190)==29528==    by 0xBE1037: COMBINE_LOCATION_DATA (line-map.h:993)==29528==    by 0xBE1037: make_location(unsigned int, unsigned int, unsigned int) (tree.c:14045)==29528==    by 0x618F99: c_parser_unary_expression(c_parser*) (c-parser.c:6846)==29528==    by 0x619F27: c_parser_cast_expression(c_parser*, c_expr*) (c-parser.c:6759)==29528==    by 0x61A142: c_parser_binary_expression(c_parser*, c_expr*, tree_node*) (c-parser.c:6568)==29528==    by 0x61ADA5: c_parser_conditional_expression(c_parser*, c_expr*, tree_node*) (c-parser.c:6339)==29528==    by 0x61B2B0: c_parser_expr_no_commas(c_parser*, c_expr*, tree_node*) (c-parser.c:6256)==29528==    by 0x61B852: c_parser_expression(c_parser*) (c-parser.c:8443)==29528==    by 0x60EA78: c_parser_oacc_clause_async (c-parser.c:11727)==29528==    by 0x60EA78: c_parser_oacc_all_clauses(c_parser*, omp_clause_mask, char const*, bool) (c-parser.c:13015)==29528==    by 0x60F7E8: c_parser_oacc_kernels_parallel (c-parser.c:13936)==29528==    by 0x60F7E8: c_parser_omp_construct (c-parser.c:17140)==29528==    by 0x60F7E8: c_parser_pragma(c_parser*, pragma_context, bool*) (c-parser.c:10207)==29528==    by 0x615FAE: c_parser_compound_statement_nostart(c_parser*) (c-parser.c:4826)==29528==    by 0x62749E: c_parser_compound_statement(c_parser*) (c-parser.c:4693)==29528== ==29528== Conditional jump or move depends on uninitialised value(s)==29528==    at 0x107136B: get_combined_adhoc_loc(line_maps*, unsigned int, source_range, void*) (line-map.c:209)==29528==    by 0xBE1037: COMBINE_LOCATION_DATA (line-map.h:993)==29528==    by 0xBE1037: make_location(unsigned int, unsigned int, unsigned int) (tree.c:14045)==29528==    by 0x618F99: c_parser_unary_expression(c_parser*) (c-parser.c:6846)==29528==    by 0x619F27: c_parser_cast_expression(c_parser*, c_expr*) (c-parser.c:6759)==29528==    by 0x61A142: c_parser_binary_expression(c_parser*, c_expr*, tree_node*) (c-parser.c:6568)==29528==    by 0x61ADA5: c_parser_conditional_expression(c_parser*, c_expr*, tree_node*) (c-parser.c:6339)==29528==    by 0x61B2B0: c_parser_expr_no_commas(c_parser*, c_expr*, tree_node*) (c-parser.c:6256)==29528==    by 0x61B852: c_parser_expression(c_parser*) (c-parser.c:8443)==29528==    by 0x60EA78: c_parser_oacc_clause_async (c-parser.c:11727)==29528==    by 0x60EA78: c_parser_oacc_all_clauses(c_parser*, omp_clause_mask, char const*, bool) (c-parser.c:13015)==29528==    by 0x60F7E8: c_parser_oacc_kernels_parallel (c-parser.c:13936)==29528==    by 0x60F7E8: c_parser_omp_construct (c-parser.c:17140)==29528==    by 0x60F7E8: c_parser_pragma(c_parser*, pragma_context, bool*) (c-parser.c:10207)==29528==    by 0x615FAE: c_parser_compound_statement_nostart(c_parser*) (c-parser.c:4826)==29528==    by 0x62749E: c_parser_compound_statement(c_parser*) (c-parser.c:4693)==29528== ==29528== Use of uninitialised value of size 8==29528==    at 0x10A3A93: htab_find_slot_with_hash (hashtab.c:655)==29528==    by 0x10713A4: get_combined_adhoc_loc(line_maps*, unsigned int, source_range, void*) (line-map.c:220)==29528==    by 0xBE1037: COMBINE_LOCATION_DATA (line-map.h:993)==29528==    by 0xBE1037: make_location(unsigned int, unsigned int, unsigned int) (tree.c:14045)==29528==    by 0x618F99: c_parser_unary_expression(c_parser*) (c-parser.c:6846)==29528==    by 0x619F27: c_parser_cast_expression(c_parser*, c_expr*) (c-parser.c:6759)==29528==    by 0x61A142: c_parser_binary_expression(c_parser*, c_expr*, tree_node*) (c-parser.c:6568)==29528==    by 0x61ADA5: c_parser_conditional_expression(c_parser*, c_expr*, tree_node*) (c-parser.c:6339)==29528==    by 0x61B2B0: c_parser_expr_no_commas(c_parser*, c_expr*, tree_node*) (c-parser.c:6256)==29528==    by 0x61B852: c_parser_expression(c_parser*) (c-parser.c:8443)==29528==    by 0x60EA78: c_parser_oacc_clause_async (c-parser.c:11727)==29528==    by 0x60EA78: c_parser_oacc_all_clauses(c_parser*, omp_clause_mask, char const*, bool) (c-parser.c:13015)==29528==    by 0x60F7E8: c_parser_oacc_kernels_parallel (c-parser.c:13936)==29528==    by 0x60F7E8: c_parser_omp_construct (c-parser.c:17140)==29528==    by 0x60F7E8: c_parser_pragma(c_parser*, pragma_context, bool*) (c-parser.c:10207)==29528==    by 0x615FAE: c_parser_compound_statement_nostart(c_parser*) (c-parser.c:4826)==29528== ==29528== Use of uninitialised value of size 8==29528==    at 0x10713A8: get_combined_adhoc_loc(line_maps*, unsigned int, source_range, void*) (line-map.c:221)==29528==    by 0xBE1037: COMBINE_LOCATION_DATA (line-map.h:993)==29528==    by 0xBE1037: make_location(unsigned int, unsigned int, unsigned int) (tree.c:14045)==29528==    by 0x618F99: c_parser_unary_expression(c_parser*) (c-parser.c:6846)==29528==    by 0x619F27: c_parser_cast_expression(c_parser*, c_expr*) (c-parser.c:6759)==29528==    by 0x61A142: c_parser_binary_expression(c_parser*, c_expr*, tree_node*) (c-parser.c:6568)==29528==    by 0x61ADA5: c_parser_conditional_expression(c_parser*, c_expr*, tree_node*) (c-parser.c:6339)==29528==    by 0x61B2B0: c_parser_expr_no_commas(c_parser*, c_expr*, tree_node*) (c-parser.c:6256)==29528==    by 0x61B852: c_parser_expression(c_parser*) (c-parser.c:8443)==29528==    by 0x60EA78: c_parser_oacc_clause_async (c-parser.c:11727)==29528==    by 0x60EA78: c_parser_oacc_all_clauses(c_parser*, omp_clause_mask, char const*, bool) (c-parser.c:13015)==29528==    by 0x60F7E8: c_parser_oacc_kernels_parallel (c-parser.c:13936)==29528==    by 0x60F7E8: c_parser_omp_construct (c-parser.c:17140)==29528==    by 0x60F7E8: c_parser_pragma(c_parser*, pragma_context, bool*) (c-parser.c:10207)==29528==    by 0x615FAE: c_parser_compound_statement_nostart(c_parser*) (c-parser.c:4826)==29528==    by 0x62749E: c_parser_compound_statement(c_parser*) (c-parser.c:4693)==29528== ==29528== Use of uninitialised value of size 8==29528==    at 0x107146C: get_combined_adhoc_loc(line_maps*, unsigned int, source_range, void*) (line-map.c:247)==29528==    by 0xBE1037: COMBINE_LOCATION_DATA (line-map.h:993)==29528==    by 0xBE1037: make_location(unsigned int, unsigned int, unsigned int) (tree.c:14045)==29528==    by 0x618F99: c_parser_unary_expression(c_parser*) (c-parser.c:6846)==29528==    by 0x619F27: c_parser_cast_expression(c_parser*, c_expr*) (c-parser.c:6759)==29528==    by 0x61A142: c_parser_binary_expression(c_parser*, c_expr*, tree_node*) (c-parser.c:6568)==29528==    by 0x61ADA5: c_parser_conditional_expression(c_parser*, c_expr*, tree_node*) (c-parser.c:6339)==29528==    by 0x61B2B0: c_parser_expr_no_commas(c_parser*, c_expr*, tree_node*) (c-parser.c:6256)==29528==    by 0x61B852: c_parser_expression(c_parser*) (c-parser.c:8443)==29528==    by 0x60EA78: c_parser_oacc_clause_async (c-parser.c:11727)==29528==    by 0x60EA78: c_parser_oacc_all_clauses(c_parser*, omp_clause_mask, char const*, bool) (c-parser.c:13015)==29528==    by 0x60F7E8: c_parser_oacc_kernels_parallel (c-parser.c:13936)==29528==    by 0x60F7E8: c_parser_omp_construct (c-parser.c:17140)==29528==    by 0x60F7E8: c_parser_pragma(c_parser*, pragma_context, bool*) (c-parser.c:10207)==29528==    by 0x615FAE: c_parser_compound_statement_nostart(c_parser*) (c-parser.c:4826)==29528==    by 0x62749E: c_parser_compound_statement(c_parser*) (c-parser.c:4693)GCC 6 branch has the same issue, 5.3.1 looks fine.Martin",RESOLVED          FIXED      
69265,David Malcolm,Option suggestion provides a wrong hint,Hi.c++ -sanitize=addressc++: error: unrecognized command line option ‘-sanitize=address’; did you mean ‘-Wframe-address’?c++: fatal error: no input filesc++ -fsanitize=addressc++: fatal error: no input filesI would expect that just adding 'f' character is the best hint provided based on Levenstein distance.Thanks,RESOLVED          FIXED      
69993,David Malcolm,Misleading wording for -Wmisleading-indentation,"Reddit user ""sysop073"" observed here: https://www.reddit.com/r/programming/comments/47pejg/gcc_6_wmisleadingindentation_vs_goto_fail/d0eonwdthat the wording of -Wmisleading-indentation is rather confusing:> The way they split up the warning looks designed to trick you.> sslKeyExchange.c:631:8: warning: statement is indented as if it were guarded by... [-Wmisleading-indentation]>         goto fail;>         ^~~~> sslKeyExchange.c:629:4: note: ...this 'if' clause, but it is not>     if ((err = SSLHashSHA1.update(&hashCtx, &signedParams)) != 0)>     ^~> You read the first half and it sounds like goto fail; is guarding something. Why would it not be:> sslKeyExchange.c:631:8: warning: statement is wrongly indented... [-Wmisleading-indentation]>         goto fail;>         ^~~~> sslKeyExchange.c:629:4: note: ...as if it were guarded by this 'if' clause>     if ((err = SSLHashSHA1.update(&hashCtx, &signedParams)) != 0)>     ^~I agree that the current wording is suboptimal.I think the wording would be much clearer if the wording of the ""warning"" only spoke about the statement in question, and the ""note""/inform should then talk about the not-really-guarding guard.I think my preferred wording would be:sslKeyExchange.c:631:8: warning: statement is misleadingly indented... [-Wmisleading-indentation]        goto fail;        ^~~~sslKeyExchange.c:629:4: note: ...as if it were guarded by this 'if' clause, but it is not    if ((err = SSLHashSHA1.update(&hashCtx, &signedParams)) != 0)    ^~",RESOLVED          FIXED      
70281,David Malcolm,valgrind error in can_be_stored_compactly_p (line-map.c:148),"Created attachment 38001 [details]gzipped C source codeThe attached code, when compiled by gcc trunk dated 20160313 does this:==18886== Conditional jump or move depends on uninitialised value(s)==18886==    at 0x104961E: can_be_stored_compactly_p (line-map.c:148)==18886==    by 0x104961E: get_combined_adhoc_loc(line_maps*, unsigned int, source_range, void*) (line-map.c:190)==18886==    by 0xBBCF88: COMBINE_LOCATION_DATA (line-map.h:993)==18886==    by 0xBBCF88: set_source_range(tree_node*, source_range) (tree.c:14028)==18886==    by 0xBBCFB1: set_source_range(tree_node*, unsigned int, unsigned int) (tree.c:14015)==18886==    by 0x5F69FF: set_c_expr_source_range (c-parser.c:78)Only gcc flag required is -c.",RESOLVED          FIXED      
70264,David Malcolm,"[6 Regression] ICE at -O0 to -O3 in both 32-bit and 64-bit modes on x86_64-linux-gnu (compatible_locations_p, at diagnostic-show-locus.c:490)","$: gcc-trunk -vUsing built-in specs.COLLECT_GCC=gcc-trunkCOLLECT_LTO_WRAPPER=/usr/local/gcc-trunk/libexec/gcc/x86_64-pc-linux-gnu/6.0.0/lto-wrapperTarget: x86_64-pc-linux-gnuConfigured with: ../gcc-source-trunk/configure --enable-languages=c,c++,lto --prefix=/usr/local/gcc-trunk --disable-bootstrapThread model: posixgcc version 6.0.0 20160316 (experimental) [trunk revision 234270] (GCC) $: $: gcc-trunk small.csmall.c:1:11: error: expected identifier or ‘(’ before numeric constantsmall.c:1:11: internal compiler error: in compatible_locations_p, at diagnostic-show-locus.c:490small.c:2:1: note: in expansion of macro ‘X’ X ^0x1317e8d compatible_locations_p        ../../gcc-source-trunk/gcc/diagnostic-show-locus.c:4900x131884a layout        ../../gcc-source-trunk/gcc/diagnostic-show-locus.c:6090x1318cdf diagnostic_show_locus(diagnostic_context*, diagnostic_info const*)        ../../gcc-source-trunk/gcc/diagnostic-show-locus.c:11020x6b6960 c_diagnostic_finalizer        ../../gcc-source-trunk/gcc/c-family/c-opts.c:1670x1316019 diagnostic_report_diagnostic(diagnostic_context*, diagnostic_info*)        ../../gcc-source-trunk/gcc/diagnostic.c:8280x1316e95 error(char const*, ...)        ../../gcc-source-trunk/gcc/diagnostic.c:11540x699f7c c_parse_error(char const*, cpp_ttype, tree_node*, unsigned char)        ../../gcc-source-trunk/gcc/c-family/c-common.c:101380x6421ec c_parser_direct_declarator        ../../gcc-source-trunk/gcc/c/c-parser.c:34850x6421ec c_parser_declarator        ../../gcc-source-trunk/gcc/c/c-parser.c:33690x64a6fb c_parser_declaration_or_fndef        ../../gcc-source-trunk/gcc/c/c-parser.c:18150x654cae c_parser_external_declaration        ../../gcc-source-trunk/gcc/c/c-parser.c:15480x6557b9 c_parser_translation_unit        ../../gcc-source-trunk/gcc/c/c-parser.c:14290x6557b9 c_parse_file()        ../../gcc-source-trunk/gcc/c/c-parser.c:178400x6b9512 c_common_parse_file()        ../../gcc-source-trunk/gcc/c-family/c-opts.c:1064Please submit a full bug report,with preprocessed source if appropriate.Please include the complete backtrace with any bug report.See <http://gcc.gnu.org/bugs.html> for instructions.$: $: cat small.c#define X __LINE__X$:",RESOLVED          FIXED      
69985,David Malcolm,"[6 Regression] ICE: in linemap_position_for_loc_and_offset, at libcpp/line-map.c:924","This is a strange ICE.trippels@gcc2-power8 foo % ~/gcc_test/usr/local/bin/gcc -w -c -Wall cmds-check.icmds-check.c: In function ‘check_chunk_refs’:cmds-check.c:7849:6: internal compiler error: in linemap_position_for_loc_and_offset, at libcpp/line-map.c:924      block_group_rec->flags);      ^~~~~~~~~~~~~~~0x110c5cb3 linemap_position_for_loc_and_offset(line_maps*, unsigned int, unsigned int)        ../../gcc/libcpp/line-map.c:924If I move the cmds-check.i file to a different directory gcc no longer ICEs,so reducing is impossible.Also seen on OpenSUSE's:https://build.opensuse.org/package/live_build_log/openSUSE:Factory:Staging:Gcc6/btrfsprogs/standard/ppc64le",RESOLVED          FIXED      
69758,David Malcolm,[6 Regression] Plugins can't include params.h (missing params.list),"Whilst porting gcc-python-plugin to gcc 6 I ran into this:In file included from gcc-cfg.c:40:0:/home/david/coding/gcc-python/gcc-svn-trunk/install-dogfood/lib/gcc/x86_64-pc-linux-gnu/6.0.0/plugin/include/params.h:87:23: fatal error: params.list: No such file or directory #include ""params.list""params.list seems to have been introduced by r227566.  It looks like it needs to be added to the list of installed files.",RESOLVED          FIXED      
69779,David Malcolm,[6 Regression] Invalid free in driver::finalize on s390x running libgccjit,"I'm seeing crashes running ""make check-jit"" on s390x-ibm-linux-gnu:e.g. *** Error in `/home/dmalcolm/gcc-bugfixing/build/gcc/testsuite/jit/test-volatile.c.exe': free(): invalid pointer: 0x000003fffdf30568 ***The problem seems to be this line in driver::finalize:#4  0x000003fffcfe4582 in driver::finalize (this=<optimized out>) at ../../src/gcc/gcc.c:99019901	  XDELETEVEC (specs);where specs == static_specs i.e. we have an attempt to free a statically-allocated array.specs is modified by this code in set_specs:1871	  /* See if the spec already exists.  */1872	  for (sl = specs; sl; sl = sl->next)1873	    if (name_len == sl->name_len && !strcmp (sl->name, name))1874	      break;1875	1876	  if (!sl)1877	    {1878	      /* Not found - make it.  */1879	      sl = XNEW (struct spec_list);1880	      sl->name = xstrdup (name);1881	      sl->name_len = name_len;1882	      sl->ptr_spec = &sl->ptr;1883	      sl->alloc_p = 0;1884	      *(sl->ptr_spec) = """";1885	      sl->next = specs;1886	      sl->default_ptr = NULL;1887	      specs = sl;1888	    }i.e. it only changes ""specs"" from static_specs if there's a set_spec for a name that isn't in the static specs.The cleanup code happens to work on x86_64 as we have two calls to set_spec that modify ""specs"":  (1) It becomes static_specs in first call to set_spec, within ""read_specs"":    #0  set_spec (name=0x662131 ""asm"",     spec=0x6616e0 ""%{m16|m32:--32}  %{m16|m32|mx32:;:--64}  %{mx32:--x32}  %{!mno-sse2avx:%{mavx:-msse2avx}} %{msse2avx:%{!mavx:-msse2avx}}"", user_p=false) at ../../src/gcc/gcc.c:1872  (2) but then becomes non-equal in 2nd call to set_spec, also within ""read_specs""     set_spec (name=0x664fd1 ""cc1_cpu"",     spec=0x65cb90 ""%{march=native:%>march=native %:local_cpu_detect(arch)   %{!mtune=*:%>mtune=native %:local_cpu_detect(tune)}} %{mtune=native:%>mtune=native %:local_cpu_detect(tune)}"", user_p=false) at ../../src/gcc/gcc.c:1890  (and although there are many calls to set_spec, only those 2 modifiy ""specs"": the first one, and cc1_cpu)i.e. it only works for a host/target for which the ""specs"" file exists and has a name of a spec that isn't in static_specs.It fails on s390x since the specs file only has specs with the same names as those in static_specs.It looks like in driver::finalize that ought to be walking the list of dynamically-allocated spec_list instances, freeing them, until we reach static_specs.  Am testing a patch for this.",RESOLVED          FIXED      
69453,David Malcolm,unrecognized command line option suggestions should take negation into account,"Unrecognized command line option suggestions should take negation into account:markus@x4 tmp % g++ --Wno-narrowingg++: error: unrecognized command line option ‘--Wno-narrowing’; did you mean ‘-Wnarrowing’?g++: fatal error: no input filescompilation terminated.""did you mean ‘-Wno-narrowing’"" would be nicer.",RESOLVED          FIXED      
68446,David Malcolm,[6 Regression] jit testsuite failures seen inside dwarf2out.c:gen_producer_string,"At r230562 (aka 21a6b87b86defda10ac903a9cd49e34b1f8ce6fb) jit.sum has:  # of expected passes            1711  # of unexpected failures        60  # of unresolved testcases       2as compared to e.g. trunk from July (r226339; 1ae7fdc96dfbbd74f29a0d563fa7641c1563d615) which has jit.sum:  # of expected passes            6372  # of unexpected failures        1(where: FAIL: jit.dg/test-threads.c, initial compilation, due to:/home/david/coding-3/gcc-git-jit-clean/src/gcc/testsuite/jit.dg/harness.h:25:14: error: static declaration of 'dejagnu_pass' follows non-static declaration/home/david/coding-3/gcc-git-jit-clean/src/gcc/testsuite/jit.dg/test-threads.c:23:6: note: previous declaration of 'dejagnu_pass' was here(I think I've fixed this other failure).i.e. lots of major failures.They seem to mostly be an ICE in:0x7f9d586ee332 gen_producer_string        ../../src/gcc/dwarf2out.c:201390x7f9d586ee332 dwarf2out_finish        ../../src/gcc/dwarf2out.c:25250due to this assertion failing:20139     gcc_checking_assert (save_decoded_options[j].canonical_option[0][0]20140                          == '-');A minimal reproducer is e.g. test-volatile.cAs far as I can tell, save_decoded_options[3] and [4] canonical_option fieldhave become the empty string (or corrupt?); the loop is accessing 0..9, and dies with j == 3:(gdb) p save_decoded_options[0]$6 = {opt_index = 1432, warn_message = 0x0,   arg = 0x606120 ""/home/david/coding-3/gcc-git-clean/build-with-jit/gcc/test-volatile.c.exe"",   orig_option_with_args_text = 0x606120 ""/home/david/coding-3/gcc-git-clean/build-with-jit/gcc/test-volatile.c.exe"",   canonical_option = {0x606120 ""/home/david/coding-3/gcc-git-clean/build-with-jit/gcc/test-volatile.c.exe"", 0x0, 0x0, 0x0},   canonical_option_num_elements = 1, value = 1, errors = 0}(gdb) p save_decoded_options[1]$7 = {opt_index = 1433, warn_message = 0x0, arg = 0x606b50 ""/tmp/libgccjit-8Mwbrw/fake.c"",   orig_option_with_args_text = 0x606b50 ""/tmp/libgccjit-8Mwbrw/fake.c"", canonical_option = {    0x606b50 ""/tmp/libgccjit-8Mwbrw/fake.c"", 0x0, 0x0, 0x0}, canonical_option_num_elements = 1, value = 1, errors = 0}(gdb) p save_decoded_options[2]$8 = {opt_index = 486, warn_message = 0x0, arg = 0x0, orig_option_with_args_text = 0x608340 """", canonical_option = {    0x7ffff75b9759 ""-fPIC"", 0x0, 0x0, 0x0}, canonical_option_num_elements = 1, value = 1, errors = 0}(gdb) p save_decoded_options[3]$9 = {opt_index = 139, warn_message = 0x0, arg = 0x606e42 ""3"", orig_option_with_args_text = 0x608360 ""\377\377\001"",   canonical_option = {0x608350 """", 0x0, 0x0, 0x0}, canonical_option_num_elements = 1, value = 1, errors = 0}(gdb) p save_decoded_options[4]$10 = {opt_index = 1126, warn_message = 0x0, arg = 0x606e62 """", orig_option_with_args_text = 0x608380 ""\200"", canonical_option = {    0x608370 """", 0x0, 0x0, 0x0}, canonical_option_num_elements = 1, value = 1, errors = 0}I ran a git bisect, it indicated that the failure of test-volatile.c was introduced by:commit 25faed340686df8d7bb2242dc8d04285976922b6Author: marxin <marxin@138bc75d-0d04-0410-961f-82ee72b054a4>Date:   Thu Nov 12 15:50:05 2015 +0000    Fix big memory leak in ix86_valid_target_attribute_p            * config/i386/i386.c (ix86_valid_target_attribute_p):        Finalize options at the of the function.        * gcc.c (driver_get_configure_time_options): Call newly        introduced init_opts_obstack.        * lto-wrapper.c (main): Likewise.        * opts.c (init_opts_obstack): New function.        (init_options_struct): Call newly        introduced init_opts_obstack.        * opts.h (init_options_struct): Declare.            git-svn-id: svn+ssh://gcc.gnu.org/svn/gcc/trunk@230264 138bc75d-0d04-0410-961f-82ee72b054a4",RESOLVED          FIXED      
69144,David Malcolm,Some libgccjit API entrypoints leave files in /tmp/libgccjit-*,running the libgccjit tests leaves temporary files /tmp/libgccjit-*these should be cleaned.,RESOLVED          FIXED      
69181,David Malcolm,multiline.exp does not handle conditional compilation,"The multiline.exp functionality, introduced in [1] does not handle conditional compilation. This deficiency was exposed by patch [2] that disabled the newly introduced test for 32bit targets. When following directive:/* { dg-do compile { target { ! ia32 } } } */is added to the testcase, such as in recently changed gcc.target/i386/pr68473-1.c, then the test directive is passed to the next testcase, leading to spurious testsuite failures in unrelated testcases, as in [3].[1] https://gcc.gnu.org/ml/gcc-patches/2015-12/msg01140.html[2] https://gcc.gnu.org/ml/gcc-patches/2015-12/msg02194.html[3] https://gcc.gnu.org/ml/gcc-testresults/2015-12/msg02761.html",RESOLVED          FIXED      
68899,David Malcolm,[6 Regression] Invalid read of size: 3 occurences in get_line_width_without_trailing_whitespace (diagnostic-show-locus.c:413),"Hello.Looks some unit tests started to produce Invalid reads:spawn /home/mliska/gcc/objdir/gcc/xgcc -B/home/mliska/gcc/objdir/gcc/ /home/mliska/gcc/gcc/testsuite/gcc.dg/plugin/diagnostic-test-show-locus-bw.c -B/home/mliska/gcc/objdir/x86_64-pc-linux-gnu/./libmpx/ -B/home/mliska/gcc/objdir/x86_64-pc-linux-gnu/./libmpx/mpxrt -L/home/mliska/gcc/objdir/x86_64-pc-linux-gnu/./libmpx/mpxrt/.libs -B/home/mliska/gcc/objdir/x86_64-pc-linux-gnu/./libmpx/ -B/home/mliska/gcc/objdir/x86_64-pc-linux-gnu/./libmpx/mpxwrap -L/home/mliska/gcc/objdir/x86_64-pc-linux-gnu/./libmpx/mpxwrap/.libs -fno-diagnostics-show-caret -fdiagnostics-color=never -fplugin=./diagnostic_plugin_test_show_locus.so -O -fdiagnostics-show-caret -S -o diagnostic-test-show-locus-bw.s/home/mliska/gcc/gcc/testsuite/gcc.dg/plugin/diagnostic-test-show-locus-bw.c: In function 'test_very_wide_line':==79749== Invalid read of size 1==79749==    at 0xFF1A54: get_line_width_without_trailing_whitespace (diagnostic-show-locus.c:405)==79749==    by 0xFF1A54: print_source_line (diagnostic-show-locus.c:512)==79749==    by 0xFF1A54: diagnostic_show_locus(diagnostic_context*, diagnostic_info const*) (diagnostic-show-locus.c:803)==79749==    by 0x63DC85A: custom_diagnostic_finalizer(diagnostic_context*, diagnostic_info*) (diagnostic_plugin_test_show_locus.c:136)==79749==    by 0xFEFA11: diagnostic_report_diagnostic(diagnostic_context*, diagnostic_info*) (diagnostic.c:800)==79749==    by 0xFF0338: warning_at(unsigned int, int, char const*, ...) (diagnostic.c:1029)==79749==    by 0x63DCD98: test_show_locus(function*) (diagnostic_plugin_test_show_locus.c:247)==79749==    by 0x63DD1C3: pass_test_show_locus::execute(function*) (diagnostic_plugin_test_show_locus.c:336)==79749==    by 0x8E011C: execute_one_pass(opt_pass*) (passes.c:2336)==79749==    by 0x8E0657: execute_pass_list_1(opt_pass*) (passes.c:2410)==79749==    by 0x8E06B4: execute_pass_list(function*, opt_pass*) (passes.c:2421)==79749==    by 0x8DF008: do_per_function_toporder(void (*)(function*, void*), void*) (passes.c:1725)==79749==    by 0x8E0D16: execute_ipa_pass_list(opt_pass*) (passes.c:2763)==79749==    by 0x69F8E4: ipa_passes (cgraphunit.c:2247)==79749==    by 0x69F8E4: symbol_table::compile() (cgraphunit.c:2386)==79749==  Address 0x606fda6 is 22 bytes after a block of size 144 in arena ""client""Thanks,Martin",RESOLVED          FIXED      
66779,David Malcolm,jit segfault,This bug is to track the segfault during jit-compilation reported here:  https://gcc.gnu.org/ml/jit/2015-q3/msg00018.htmlI'm able to reproduce it locally on x86_64 with trunk using the reproducer attached to that mail.,RESOLVED          FIXED      
69177,David Malcolm,[6 Regression] Bit-packing optimization makes it too easy to have location_t >= LINE_MAP_MAX_LOCATION_WITH_COLS,"[splitting this off from PR c++/68819, and from https://gcc.gnu.org/ml/gcc-patches/2015-12/msg01921.html, to ensure that we fix this]libcpp has a degraded fallback mode for large source files where if a location_t > LINE_MAP_MAX_LOCATION_WITH_COLS we fall back to just tracking lines, not columns&ranges (currently 0x60000000), and every location_t expands to having a column == 0.Sadly we're more likely to see this case in gcc 6 than in gcc 5 since we're using up 5 bits of location_t for packing short ranges into them (to avoid needing to go to the ad-hoc lookaside during tokenization; this change was part of r230331).I've seen us hit this limit on our own code during bootstrap; for example, gimple-match.c is hitting the LINE_MAP_MAX_LOCATION_WITH_COLS limit; I've seen a diagnostic at line 50437 column 0.The bit-packing optimization is causing us to hit that LINE_MAP_MAX_LOCATION_WITH_COLS limit earlier than before, and presumably this will affect people with other very large source files (e.g. as in the initial PR c++/68819 report).Rough calculations, assuming 7 bits of columns,LINE_MAP_MAX_LOCATION_WITH_COLS == 0x60000000gcc 5:  0x60000000 / 128 per line = 12,582,912 lines of code before  hitting the has-column-information limit.gcc 6 trunk:  0x60000000 / (128 * 32) per line = 393,216 lines of code before  hitting the has-column-information limit.These numbers will be less in the face of lines longer than127 characters.I've posted a proposed fix for this as:  https://gcc.gnu.org/ml/gcc-patches/2015-12/msg01921.htmlwhich gives us a ""longer runway"", though this is mixed up with changes to -Wmisleading-indentation",RESOLVED          FIXED      
68819,David Malcolm,"Invalid ""-Wmisleading-indentation"" warning if location_t >=LINE_MAP_MAX_LOCATION_WITH_COLS","I get the following bogus warning:Quadtree.h:210:0: warning: statement is indented as if it were guarded by... [-Wmisleading-indentation]   unsigned int  get_max_index() const   { if (ul) return 4; return 0; }Quadtree.h:210:0: note: ...this ‘if’ clause, but it is notFor some reasons, a quick attempt to create a test case failed. I think it has something to do with the reason that the column number is 0. I also do not get it for all ""Quadtree<T>"" but only once for project. BTW, ""ul"" is defined as:  QuadtreeT<T, C>      *ul;I will try to create a working reduced example.",RESOLVED          FIXED      
68795,David Malcolm,[6 Regression] Use of uninitialised value of size 8 in cp_parser_postfix_expression (parser.c:6831),"Hi.This is very similar to PR68757.$ valgrind --leak-check=yes --trace-children=yes ./gcc/xg++ -B gcc /home/marxin/Programming/gcc3/gcc/testsuite/g++.old-deja/g++.ns/invalid1.C==13137== Use of uninitialised value of size 8==13137==    at 0x117FA93: htab_find_slot_with_hash (hashtab.c:655)==13137==    by 0x114D32C: get_combined_adhoc_loc(line_maps*, unsigned int, source_range, void*) (line-map.c:214)==13137==    by 0xCC7DE7: COMBINE_LOCATION_DATA (line-map.h:1007)==13137==    by 0xCC7DE7: make_location(unsigned int, unsigned int, unsigned int) (tree.c:13972)==13137==    by 0x67C0BF: cp_parser_postfix_expression(cp_parser*, bool, bool, bool, bool, cp_id_kind*) (parser.c:6831)==13137==    by 0x684270: cp_parser_unary_expression(cp_parser*, cp_id_kind*, bool, bool, bool) (parser.c:7901)==13137==    by 0x684D6B: cp_parser_cast_expression(cp_parser*, bool, bool, bool, cp_id_kind*) (parser.c:8578)==13137==    by 0x685187: cp_parser_binary_expression(cp_parser*, bool, bool, bool, cp_parser_prec, cp_id_kind*) (parser.c:8679)==13137==    by 0x685924: cp_parser_assignment_expression(cp_parser*, cp_id_kind*, bool, bool) (parser.c:8966)==13137==    by 0x6885EA: cp_parser_expression(cp_parser*, cp_id_kind*, bool, bool) (parser.c:9135)==13137==    by 0x688FA0: cp_parser_expression_statement(cp_parser*, tree_node*) (parser.c:10596)==13137==    by 0x6778B5: cp_parser_statement(cp_parser*, tree_node*, bool, bool*, vec<tree_node*, va_heap, vl_ptr>*) (parser.c:10447)==13137==    by 0x678639: cp_parser_statement_seq_opt(cp_parser*, tree_node*) (parser.c:10719)==13137== ==13137== Use of uninitialised value of size 8==13137==    at 0x114D330: get_combined_adhoc_loc(line_maps*, unsigned int, source_range, void*) (line-map.c:215)==13137==    by 0xCC7DE7: COMBINE_LOCATION_DATA (line-map.h:1007)==13137==    by 0xCC7DE7: make_location(unsigned int, unsigned int, unsigned int) (tree.c:13972)==13137==    by 0x67C0BF: cp_parser_postfix_expression(cp_parser*, bool, bool, bool, bool, cp_id_kind*) (parser.c:6831)==13137==    by 0x684270: cp_parser_unary_expression(cp_parser*, cp_id_kind*, bool, bool, bool) (parser.c:7901)==13137==    by 0x684D6B: cp_parser_cast_expression(cp_parser*, bool, bool, bool, cp_id_kind*) (parser.c:8578)==13137==    by 0x685187: cp_parser_binary_expression(cp_parser*, bool, bool, bool, cp_parser_prec, cp_id_kind*) (parser.c:8679)==13137==    by 0x685924: cp_parser_assignment_expression(cp_parser*, cp_id_kind*, bool, bool) (parser.c:8966)==13137==    by 0x6885EA: cp_parser_expression(cp_parser*, cp_id_kind*, bool, bool) (parser.c:9135)==13137==    by 0x688FA0: cp_parser_expression_statement(cp_parser*, tree_node*) (parser.c:10596)==13137==    by 0x6778B5: cp_parser_statement(cp_parser*, tree_node*, bool, bool*, vec<tree_node*, va_heap, vl_ptr>*) (parser.c:10447)==13137==    by 0x678639: cp_parser_statement_seq_opt(cp_parser*, tree_node*) (parser.c:10719)==13137==    by 0x67875B: cp_parser_compound_statement(cp_parser*, tree_node*, int, bool) (parser.c:10673)==13137== ==13137== Use of uninitialised value of size 8==13137==    at 0x114D3FC: get_combined_adhoc_loc(line_maps*, unsigned int, source_range, void*) (line-map.c:241)==13137==    by 0xCC7DE7: COMBINE_LOCATION_DATA (line-map.h:1007)==13137==    by 0xCC7DE7: make_location(unsigned int, unsigned int, unsigned int) (tree.c:13972)==13137==    by 0x67C0BF: cp_parser_postfix_expression(cp_parser*, bool, bool, bool, bool, cp_id_kind*) (parser.c:6831)==13137==    by 0x684270: cp_parser_unary_expression(cp_parser*, cp_id_kind*, bool, bool, bool) (parser.c:7901)==13137==    by 0x684D6B: cp_parser_cast_expression(cp_parser*, bool, bool, bool, cp_id_kind*) (parser.c:8578)==13137==    by 0x685187: cp_parser_binary_expression(cp_parser*, bool, bool, bool, cp_parser_prec, cp_id_kind*) (parser.c:8679)==13137==    by 0x685924: cp_parser_assignment_expression(cp_parser*, cp_id_kind*, bool, bool) (parser.c:8966)==13137==    by 0x6885EA: cp_parser_expression(cp_parser*, cp_id_kind*, bool, bool) (parser.c:9135)==13137==    by 0x688FA0: cp_parser_expression_statement(cp_parser*, tree_node*) (parser.c:10596)==13137==    by 0x6778B5: cp_parser_statement(cp_parser*, tree_node*, bool, bool*, vec<tree_node*, va_heap, vl_ptr>*) (parser.c:10447)==13137==    by 0x678639: cp_parser_statement_seq_opt(cp_parser*, tree_node*) (parser.c:10719)==13137==    by 0x67875B: cp_parser_compound_statement(cp_parser*, tree_node*, int, bool) (parser.c:10673)Thanks,Martin",RESOLVED          FIXED      
69122,David Malcolm,-Wmisleading-indentation false positive with empty macros,"When a statement is preceded by an empty macro, the warning triggers incorrectly:$ cat /tmp/test.c #define emitvoid g();void f(int x){    if (x)         g();    emit g();}$ ~/gcc6/bin/gcc -c -O3 -Wall /tmp/test.c/tmp/test.c: In function ‘f’:/tmp/test.c:7:10: warning: statement is indented as if it were guarded by... [-Wmisleading-indentation]     emit g();          ^/tmp/test.c:5:5: note: ...this ‘if’ clause, but it is not     if (x)     ^~$ ~/gcc6/bin/gcc -E /tmp/test.c | ~/gcc6/bin/gcc -c -O3 -Wall -xc -[no error]This also happens in C++ and happens often in Qt code due to the empty ""emit"" macro.",RESOLVED          FIXED      
68757,David Malcolm,[6 Regression] Use of uninitialised value of size 8 in get_combined_adhoc_loc (line-map.c:214),"Hello.This is probably very similar problem related to PR68438.$ valgrind --leak-check=yes --trace-children=yes ./gcc/xgcc -Bgcc /home/marxin/Programming/gcc3/gcc/testsuite/gcc.dg/Wconversion-complex-c99.cproduces:==20170== Use of uninitialised value of size 8==20170==    at 0x107DB13: htab_find_slot_with_hash (hashtab.c:655)==20170==    by 0x104B3AC: get_combined_adhoc_loc(line_maps*, unsigned int, source_range, void*) (line-map.c:214)==20170==    by 0xBC43B8: COMBINE_LOCATION_DATA (line-map.h:1007)==20170==    by 0xBC43B8: set_source_range(tree_node*, source_range) (tree.c:13957)==20170==    by 0xBC43E1: set_source_range(tree_node*, unsigned int, unsigned int) (tree.c:13944)==20170==    by 0x610A78: set_c_expr_source_range (c-parser.c:69)==20170==    by 0x610A78: c_parser_expr_no_commas(c_parser*, c_expr*, tree_node*) (c-parser.c:6153)==20170==    by 0x610EB2: c_parser_expression(c_parser*) (c-parser.c:8262)==20170==    by 0x611689: c_parser_expression_conv(c_parser*) (c-parser.c:8295)==20170==    by 0x609D8C: c_parser_statement_after_labels(c_parser*, vec<tree_node*, va_heap, vl_ptr>*) (c-parser.c:5178)==20170==    by 0x60BD03: c_parser_compound_statement_nostart(c_parser*) (c-parser.c:4763)==20170==    by 0x61CA8E: c_parser_compound_statement(c_parser*) (c-parser.c:4599)==20170==    by 0x608EE8: c_parser_declaration_or_fndef(c_parser*, bool, bool, bool, bool, bool, tree_node**, vec<c_token, va_heap, vl_ptr>, tree_node*) (c-parser.c:2017)==20170==    by 0x62147D: c_parser_external_declaration(c_parser*) (c-parser.c:1461)==20170== ==20170== Conditional jump or move depends on uninitialised value(s)==20170==    at 0x107DBA2: htab_find_slot_with_hash (hashtab.c:668)==20170==    by 0x104B3AC: get_combined_adhoc_loc(line_maps*, unsigned int, source_range, void*) (line-map.c:214)==20170==    by 0xBC43B8: COMBINE_LOCATION_DATA (line-map.h:1007)==20170==    by 0xBC43B8: set_source_range(tree_node*, source_range) (tree.c:13957)==20170==    by 0xBC43E1: set_source_range(tree_node*, unsigned int, unsigned int) (tree.c:13944)==20170==    by 0x610A78: set_c_expr_source_range (c-parser.c:69)==20170==    by 0x610A78: c_parser_expr_no_commas(c_parser*, c_expr*, tree_node*) (c-parser.c:6153)==20170==    by 0x610EB2: c_parser_expression(c_parser*) (c-parser.c:8262)==20170==    by 0x611689: c_parser_expression_conv(c_parser*) (c-parser.c:8295)==20170==    by 0x609D8C: c_parser_statement_after_labels(c_parser*, vec<tree_node*, va_heap, vl_ptr>*) (c-parser.c:5178)==20170==    by 0x60BD03: c_parser_compound_statement_nostart(c_parser*) (c-parser.c:4763)==20170==    by 0x61CA8E: c_parser_compound_statement(c_parser*) (c-parser.c:4599)==20170==    by 0x608EE8: c_parser_declaration_or_fndef(c_parser*, bool, bool, bool, bool, bool, tree_node**, vec<c_token, va_heap, vl_ptr>, tree_node*) (c-parser.c:2017)==20170==    by 0x62147D: c_parser_external_declaration(c_parser*) (c-parser.c:1461)Thanks,Martin",RESOLVED          FIXED      
68438,David Malcolm,[6 Regression] Conditional jump or move depends on uninitialised value in location_adhoc_data_eq (line-map.c:89),"Hi.Looks objc test-suite contains many valgrind errors:Command:valgrind --leak-check=yes --trace-children=yes --num-callers=100 gcc /home/marxin/Programming/gcc/gcc/testsuite/objc.dg/call-super-2.m -c==8665== Conditional jump or move depends on uninitialised value(s)==8665==    at 0x169A8D6: location_adhoc_data_eq(void const*, void const*) (line-map.c:89)==8665==    by 0x16CDB3C: htab_find_slot_with_hash (hashtab.c:679)==8665==    by 0x169B5DC: get_combined_adhoc_loc(line_maps*, unsigned int, source_range, void*) (line-map.c:214)==8665==    by 0xFFEAE9: COMBINE_LOCATION_DATA(line_maps*, unsigned int, source_range, void*) (line-map.h:1004)==8665==    by 0xFFCE0B: set_source_range(tree_node*, source_range) (tree.c:13936)==8665==    by 0xFFCD5A: set_source_range(tree_node*, unsigned int, unsigned int) (tree.c:13923)==8665==    by 0x804E73: c_fully_fold_internal(tree_node*, bool, bool*, bool*, bool) (c-common.c:1639)==8665==    by 0x803C7A: c_fully_fold_internal(tree_node*, bool, bool*, bool*, bool) (c-common.c:1372)==8665==    by 0x803497: c_fully_fold(tree_node*, bool, bool*) (c-common.c:1162)==8665==    by 0x7CA952: build_modify_expr(unsigned int, tree_node*, tree_node*, tree_code, unsigned int, tree_node*, tree_node*) (c-typeck.c:5545)==8665==    by 0x7DA5F8: c_parser_expr_no_commas(c_parser*, c_expr*, tree_node*) (c-parser.c:6149)==8665==    by 0x7E0CFF: c_parser_expression(c_parser*) (c-parser.c:8250)==8665==    by 0x7E0F38: c_parser_expression_conv(c_parser*) (c-parser.c:8283)==8665==    by 0x7D82FF: c_parser_statement_after_labels(c_parser*, vec<tree_node*, va_heap, vl_ptr>*) (c-parser.c:5177)==8665==    by 0x7D781D: c_parser_compound_statement_nostart(c_parser*) (c-parser.c:4762)==8665==    by 0x7D724D: c_parser_compound_statement(c_parser*) (c-parser.c:4599)==8665==    by 0x7E1FFC: c_parser_objc_method_definition(c_parser*) (c-parser.c:8821)==8665==    by 0x7D0FA9: c_parser_external_declaration(c_parser*) (c-parser.c:1449)==8665==    by 0x7D0BF1: c_parser_translation_unit(c_parser*) (c-parser.c:1348)==8665==    by 0x7FB922: c_parse_file() (c-parser.c:17658)==8665==    by 0x850A92: c_common_parse_file() (c-opts.c:1064)==8665==    by 0xD41AF8: compile_file() (toplev.c:464)==8665==    by 0xD43F4F: do_compile() (toplev.c:1951)==8665==    by 0xD441CE: toplev::main(int, char**) (toplev.c:2058)==8665==    by 0x166391D: main (main.c:39)==8665== /home/marxin/Programming/gcc/gcc/testsuite/objc.dg/call-super-2.m:134:4: warning: ‘-categ_instance_func2’ not found in protocol(s)    i += (size_t)[(id <Func>)self categ_instance_func2];  /* { dg-warning "".\\-categ_instance_func2. not found in protocol"" } */    ^/home/marxin/Programming/gcc/gcc/testsuite/objc.dg/call-super-2.m:136:4: warning: ‘TestsuiteObject’ may not respond to ‘-instance_func0’    return i + (size_t)[super instance_func0];   /* { dg-warning "".TestsuiteObject. may not respond to .\\-instance_func0."" } */    ^~~~~~==8665== Use of uninitialised value of size 8==8665==    at 0x16CDA83: htab_find_slot_with_hash (hashtab.c:655)==8665==    by 0x169B5DC: get_combined_adhoc_loc(line_maps*, unsigned int, source_range, void*) (line-map.c:214)==8665==    by 0xFFEAE9: COMBINE_LOCATION_DATA(line_maps*, unsigned int, source_range, void*) (line-map.h:1004)==8665==    by 0xFFCD27: set_block(unsigned int, tree_node*) (tree.c:13914)==8665==    by 0x156A9C4: gimple_set_block(gimple*, tree_node*) (gimple.h:1744)==8665==    by 0x156B4A6: lower_stmt(gimple_stmt_iterator*, lower_data*) (gimple-low.c:236)==8665==    by 0x156B3D8: lower_sequence(gimple**, lower_data*) (gimple-low.c:203)==8665==    by 0x156B586: lower_stmt(gimple_stmt_iterator*, lower_data*) (gimple-low.c:272)==8665==    by 0x156B3D8: lower_sequence(gimple**, lower_data*) (gimple-low.c:203)==8665==    by 0x156B94E: lower_gimple_bind(gimple_stmt_iterator*, lower_data*) (gimple-low.c:418)==8665==    by 0x156B0EB: lower_function_body() (gimple-low.c:107)==8665==    by 0x156B33C: (anonymous namespace)::pass_lower_cf::execute(function*) (gimple-low.c:181)==8665==    by 0xC39BF9: execute_one_pass(opt_pass*) (passes.c:2335)==8665==    by 0xC39EFC: execute_pass_list_1(opt_pass*) (passes.c:2408)==8665==    by 0xC39F85: execute_pass_list(function*, opt_pass*) (passes.c:2419)==8665==    by 0x904119: cgraph_node::analyze() (cgraphunit.c:634)==8665==    by 0x9051B9: analyze_functions(bool) (cgraphunit.c:1078)==8665==    by 0x908B48: symbol_table::finalize_compilation_unit() (cgraphunit.c:2518)==8665==    by 0xD41B80: compile_file() (toplev.c:489)==8665==    by 0xD43F4F: do_compile() (toplev.c:1951)==8665==    by 0xD441CE: toplev::main(int, char**) (toplev.c:2058)==8665==    by 0x166391D: main (main.c:39)==8665== ==8665== Use of uninitialised value of size 8==8665==    at 0x169B5E0: get_combined_adhoc_loc(line_maps*, unsigned int, source_range, void*) (line-map.c:215)==8665==    by 0xFFEAE9: COMBINE_LOCATION_DATA(line_maps*, unsigned int, source_range, void*) (line-map.h:1004)==8665==    by 0xFFCD27: set_block(unsigned int, tree_node*) (tree.c:13914)==8665==    by 0x156A9C4: gimple_set_block(gimple*, tree_node*) (gimple.h:1744)==8665==    by 0x156B4A6: lower_stmt(gimple_stmt_iterator*, lower_data*) (gimple-low.c:236)==8665==    by 0x156B3D8: lower_sequence(gimple**, lower_data*) (gimple-low.c:203)==8665==    by 0x156B586: lower_stmt(gimple_stmt_iterator*, lower_data*) (gimple-low.c:272)==8665==    by 0x156B3D8: lower_sequence(gimple**, lower_data*) (gimple-low.c:203)==8665==    by 0x156B94E: lower_gimple_bind(gimple_stmt_iterator*, lower_data*) (gimple-low.c:418)==8665==    by 0x156B0EB: lower_function_body() (gimple-low.c:107)==8665==    by 0x156B33C: (anonymous namespace)::pass_lower_cf::execute(function*) (gimple-low.c:181)==8665==    by 0xC39BF9: execute_one_pass(opt_pass*) (passes.c:2335)==8665==    by 0xC39EFC: execute_pass_list_1(opt_pass*) (passes.c:2408)==8665==    by 0xC39F85: execute_pass_list(function*, opt_pass*) (passes.c:2419)==8665==    by 0x904119: cgraph_node::analyze() (cgraphunit.c:634)==8665==    by 0x9051B9: analyze_functions(bool) (cgraphunit.c:1078)==8665==    by 0x908B48: symbol_table::finalize_compilation_unit() (cgraphunit.c:2518)==8665==    by 0xD41B80: compile_file() (toplev.c:489)==8665==    by 0xD43F4F: do_compile() (toplev.c:1951)==8665==    by 0xD441CE: toplev::main(int, char**) (toplev.c:2058)==8665==    by 0x166391D: main (main.c:39)Thanks,Martin",RESOLVED          FIXED      
67613,David Malcolm,spell suggestions for misspelled command line options,"$ gcc -Wcoercion test.ccc1: error: unrecognized command line option ""-Wcoercion""$ clang -Wcoercion test.cwarning: unknown warning option '-Wcoercion'; did you mean '-Wconversion'? [-Wunknown-warning-option]Once PR52277 is fixed, gcc could do better here.",RESOLVED          FIXED      
67363,David Malcolm,[6 Regression] r227188 breaks build for mingw-w64,"After r227188 mingw-w64 build on Linux fails with:../../combined-6.0.0/gcc/gcc.c: In member function 'voidenv_manager::xput(const char*)':../../combined-6.0.0/gcc/gcc.c:126:50: error: 'strndup' was notdeclared in this scope       kv.m_key = strndup (string, equals - string);                                                  ^../../combined-6.0.0/gcc/gcc.c: In member function 'voidenv_manager::restore()':../../combined-6.0.0/gcc/gcc.c:154:2: error: '::setenv' has not been declared  ::setenv (item->m_key, item->m_value, 1);  ^../../combined-6.0.0/gcc/gcc.c:156:2: error: '::unsetenv' has not been declared  ::unsetenv (item->m_key);  ^",RESOLVED          FIXED      